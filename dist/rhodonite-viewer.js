/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$1=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$3=Symbol(),n$5=new Map;class s$3{constructor(t,n){if(this._$cssResult$=!0,n!==e$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t;}get styleSheet(){let e=n$5.get(this.cssText);return t$1&&void 0===e&&(n$5.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o$3=t=>new s$3("string"==typeof t?t:t+"",e$3),r$2=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return new s$3(o,e$3)},i$2=(e,n)=>{t$1?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement("style"),s=window.litNonce;void 0!==s&&n.setAttribute("nonce",s),n.textContent=t.cssText,e.appendChild(n);}));},S$1=t$1?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return o$3(e)})(t):t;

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$2;const e$2=window.trustedTypes,r$1=e$2?e$2.emptyScript:"",h$1=window.reactiveElementPolyfillSupport,o$2={toAttribute(t,i){switch(i){case Boolean:t=t?r$1:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t);}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t);}catch(t){s=null;}}return s}},n$4=(t,i)=>i!==t&&(i==i||t==t),l$2={attribute:!0,type:String,converter:o$2,reflect:!1,hasChanged:n$4};class a$1 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o();}static addInitializer(t){var i;null!==(i=this.l)&&void 0!==i||(this.l=[]),this.l.push(t);}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Eh(s,i);void 0!==e&&(this._$Eu.set(e,s),t.push(e));})),t}static createProperty(t,i=l$2){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s="symbol"==typeof t?Symbol():"__"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e);}}static getPropertyDescriptor(t,i,s){return {get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s);},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l$2}static finalize(){if(this.hasOwnProperty("finalized"))return !1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s]);}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(S$1(i));}else void 0!==i&&s.push(S$1(i));return s}static _$Eh(t,i){const s=i.attribute;return !1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)));}addController(t){var i,s;(null!==(i=this._$Eg)&&void 0!==i?i:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t));}removeController(t){var i;null===(i=this._$Eg)||void 0===i||i.splice(this._$Eg.indexOf(t)>>>0,1);}_$Em(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Et.set(i,this[i]),delete this[i]);}));}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i$2(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}));}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}));}attributeChangedCallback(t,i,s){this._$AK(t,s);}_$ES(t,i,s=l$2){var e,r;const h=this.constructor._$Eh(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o$2.toAttribute)(i,s.type);this._$Ei=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$Ei=null;}}_$AK(t,i){var s,e,r;const h=this.constructor,n=h._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=h.getPropertyOptions(n),l=t.converter,a=null!==(r=null!==(e=null===(s=l)||void 0===s?void 0:s.fromAttribute)&&void 0!==e?e:"function"==typeof l?l:null)&&void 0!==r?r:o$2.fromAttribute;this._$Ei=n,this[n]=a(i,t.type),this._$Ei=null;}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n$4)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$E_());}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep;}catch(t){Promise.reject(t);}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,i)=>this[i]=t)),this._$Et=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$EU();}catch(t){throw i=!1,this._$EU(),t}i&&this._$AE(s);}willUpdate(t){}_$AE(t){var i;null===(i=this._$Eg)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t);}_$EU(){this._$AL=new Map,this.isUpdatePending=!1;}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return !0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$ES(i,this[i],t))),this._$EC=void 0),this._$EU();}updated(t){}firstUpdated(t){}}a$1.finalized=!0,a$1.elementProperties=new Map,a$1.elementStyles=[],a$1.shadowRootOptions={mode:"open"},null==h$1||h$1({ReactiveElement:a$1}),(null!==(s$2=globalThis.reactiveElementVersions)&&void 0!==s$2?s$2:globalThis.reactiveElementVersions=[]).push("1.3.2");

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var t;const i$1=globalThis.trustedTypes,s$1=i$1?i$1.createPolicy("lit-html",{createHTML:t=>t}):void 0,e$1=`lit$${(Math.random()+"").slice(9)}$`,o$1="?"+e$1,n$3=`<${o$1}>`,l$1=document,h=(t="")=>l$1.createComment(t),r=t=>null===t||"object"!=typeof t&&"function"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||"function"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_=/'/g,m=/"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),b=Symbol.for("lit-noChange"),w=Symbol.for("lit-nothing"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{});}return l._$AI(t),l},A=l$1.createTreeWalker(l$1,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?"<svg>":"",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?"!--"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp("</"+u[2],"g")),d=f):void 0!==u[3]&&(d=f):d===f?">"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith("/>")?" ":"";r+=d===c?s+n$3:p>=0?(l.push(o),s.slice(0,p)+"$lit$"+s.slice(p)+e$1+y):s+e$1+(-2===p?(l.push(void 0),i):y);}const u=r+(t[o]||"<?>")+(2===i?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return [void 0!==s$1?s$1.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes);}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith("$lit$")||i.startsWith(e$1)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+"$lit$").split(e$1),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:"."===i[1]?M:"?"===i[1]?H:"@"===i[1]?I:S});}else c.push({type:6,index:r});}for(const i of t)l.removeAttribute(i);}if(g.test(l.tagName)){const t=l.textContent.split(e$1),s=t.length-1;if(s>0){l.textContent=i$1?i$1.emptyScript:"";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h());}}}else if(8===l.nodeType)if(l.data===o$1)c.push({type:2,index:r});else {let t=-1;for(;-1!==(t=l.data.indexOf(e$1,t+1));)c.push({type:7,index:r}),t+=e$1.length-1;}r++;}}static createElement(t,i){const s=l$1.createElement("template");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return (null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i;}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l$1).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r];}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++);}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++;}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o;}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||""===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t);}M(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t));}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l$1.createTextNode(t)),this._$AH=t;}T(t){var i;const{values:s,_$litType$:e}=t,o="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else {const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t;}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.M(h()),this.M(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e);}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i;}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t));}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w;}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else {const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:"")+o[l+1]),this._$AH[l]=h;}n&&!e&&this.C(t);}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"");}}class M extends S{constructor(){super(...arguments),this.type=3;}C(t){this.element[this.name]=t===w?void 0:t;}}const k=i$1?i$1.emptyScript:"";class H extends S{constructor(){super(...arguments),this.type=4;}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name);}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5;}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t;}handleEvent(t){var i,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t);}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s;}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t);}}const z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push("2.2.5");

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l,o;class s extends a$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0;}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=x(i,this.renderRoot,this.renderOptions);}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0);}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1);}render(){return b}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n$2=globalThis.litElementPolyfillSupport;null==n$2||n$2({LitElement:s});(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push("3.2.0");

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const n$1=n=>e=>"function"==typeof e?((n,e)=>(window.customElements.define(n,e),e))(n,e):((n,e)=>{const{kind:t,elements:i}=e;return {kind:t,elements:i,finisher(e){window.customElements.define(n,e);}}})(n,e);

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const i=(i,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i);}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this));},finisher(n){n.createProperty(e.key,i);}};function e(e){return (n,t)=>void 0!==t?((i,e,n)=>{e.constructor.createProperty(n,i);})(e,n,t):i(e,n)}

/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n;null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));

/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");

/******/ var __webpack_modules__ = ({

/***/ "./node_modules/ktx-parse/dist/ktx-parse.modern.js":
/*!*********************************************************!*\
  !*** ./node_modules/ktx-parse/dist/ktx-parse.modern.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KTX2ChannelETC1S": () => (/* binding */ l),
/* harmony export */   "KTX2ChannelUASTC": () => (/* binding */ f),
/* harmony export */   "KTX2Container": () => (/* binding */ U),
/* harmony export */   "KTX2DescriptorType": () => (/* binding */ i),
/* harmony export */   "KTX2Flags": () => (/* binding */ o),
/* harmony export */   "KTX2Model": () => (/* binding */ s),
/* harmony export */   "KTX2Primaries": () => (/* binding */ a),
/* harmony export */   "KTX2SupercompressionScheme": () => (/* binding */ n),
/* harmony export */   "KTX2Transfer": () => (/* binding */ r),
/* harmony export */   "read": () => (/* binding */ p),
/* harmony export */   "write": () => (/* binding */ y)
/* harmony export */ });
const t=new Uint8Array([0]),e=[171,75,84,88,32,50,48,187,13,10,26,10];var n,i,s,a,r,o,l,f;!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB";}(n||(n={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT";}(i||(i={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC";}(s||(s={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB";}(a||(a={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2";}(r||(r={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED";}(o||(o={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA";}(l||(l={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG";}(f||(f={}));class U{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=n.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:i.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:s.UNSPECIFIED,colorPrimaries:a.SRGB,transferFunction:a.SRGB,flags:o.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null;}}class c{constructor(t,e,n,i){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0;}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}function h(t){return "undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):Buffer.from(t)}function _(t){return "undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString("utf8")}function g(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function p(t){const n=new Uint8Array(t.buffer,t.byteOffset,e.length);if(n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]||n[6]!==e[6]||n[7]!==e[7]||n[8]!==e[8]||n[9]!==e[9]||n[10]!==e[10]||n[11]!==e[11])throw new Error("Missing KTX 2.0 identifier.");const i=new U,s=17*Uint32Array.BYTES_PER_ELEMENT,a=new c(t,e.length,s,!0);i.vkFormat=a._nextUint32(),i.typeSize=a._nextUint32(),i.pixelWidth=a._nextUint32(),i.pixelHeight=a._nextUint32(),i.pixelDepth=a._nextUint32(),i.layerCount=a._nextUint32(),i.faceCount=a._nextUint32();const r=a._nextUint32();i.supercompressionScheme=a._nextUint32();const o=a._nextUint32(),l=a._nextUint32(),f=a._nextUint32(),h=a._nextUint32(),g=a._nextUint64(),p=a._nextUint64(),x=new c(t,e.length+s,3*r*8,!0);for(let e=0;e<r;e++)i.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+x._nextUint64(),x._nextUint64()),uncompressedByteLength:x._nextUint64()});const u=new c(t,o,l,!0),y={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:{x:u._nextUint8()+1,y:u._nextUint8()+1,z:u._nextUint8()+1,w:u._nextUint8()+1},bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},D=(y.descriptorBlockSize/4-6)/4;for(let t=0;t<D;t++)y.samples[t]={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelID:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:u._nextUint32(),sampleUpper:u._nextUint32()};i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(y);const b=new c(t,f,h,!0);for(;b._offset<h;){const t=b._nextUint32(),e=b._scan(t),n=_(e),s=b._scan(t-e.byteLength);i.keyValue[n]=n.match(/^ktx/i)?_(s):s,b._offset%4&&b._skip(4-b._offset%4);}if(p<=0)return i;const d=new c(t,g,p,!0),B=d._nextUint16(),w=d._nextUint16(),A=d._nextUint32(),S=d._nextUint32(),m=d._nextUint32(),L=d._nextUint32(),I=[];for(let t=0;t<r;t++)I.push({imageFlags:d._nextUint32(),rgbSliceByteOffset:d._nextUint32(),rgbSliceByteLength:d._nextUint32(),alphaSliceByteOffset:d._nextUint32(),alphaSliceByteLength:d._nextUint32()});const R=g+d._offset,E=R+A,T=E+S,O=T+m,P=new Uint8Array(t.buffer,t.byteOffset+R,A),C=new Uint8Array(t.buffer,t.byteOffset+E,S),F=new Uint8Array(t.buffer,t.byteOffset+T,m),G=new Uint8Array(t.buffer,t.byteOffset+O,L);return i.globalData={endpointCount:B,selectorCount:w,imageDescs:I,endpointsData:P,selectorsData:C,tablesData:F,extendedData:G},i}function x(){return (x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}return t}).apply(this,arguments)}const u={keepWriter:!1};function y(n,s={}){s=x({},u,s);let a=new ArrayBuffer(0);if(n.globalData){const t=new ArrayBuffer(20+5*n.globalData.imageDescs.length*4),e=new DataView(t);e.setUint16(0,n.globalData.endpointCount,!0),e.setUint16(2,n.globalData.selectorCount,!0),e.setUint32(4,n.globalData.endpointsData.byteLength,!0),e.setUint32(8,n.globalData.selectorsData.byteLength,!0),e.setUint32(12,n.globalData.tablesData.byteLength,!0),e.setUint32(16,n.globalData.extendedData.byteLength,!0);for(let t=0;t<n.globalData.imageDescs.length;t++){const i=n.globalData.imageDescs[t];e.setUint32(20+5*t*4+0,i.imageFlags,!0),e.setUint32(20+5*t*4+4,i.rgbSliceByteOffset,!0),e.setUint32(20+5*t*4+8,i.rgbSliceByteLength,!0),e.setUint32(20+5*t*4+12,i.alphaSliceByteOffset,!0),e.setUint32(20+5*t*4+16,i.alphaSliceByteLength,!0);}a=g([t,n.globalData.endpointsData,n.globalData.selectorsData,n.globalData.tablesData,n.globalData.extendedData]);}const r=[];let o=n.keyValue;s.keepWriter||(o=x({},n.keyValue,{KTXwriter:"KTX-Parse v0.2.2"}));for(const e in o){const n=o[e],i=h(e),s="string"==typeof n?h(n):n,a=i.byteLength+1+s.byteLength+1,l=a%4?4-a%4:0;r.push(g([new Uint32Array([a]),i,t,s,t,new Uint8Array(l).fill(0)]));}const l=g(r);if(1!==n.dataFormatDescriptor.length||n.dataFormatDescriptor[0].descriptorType!==i.BASICFORMAT)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const f=n.dataFormatDescriptor[0],U=new ArrayBuffer(28+16*f.samples.length),c=new DataView(U);c.setUint32(0,U.byteLength,!0),c.setUint16(4,f.vendorId,!0),c.setUint16(6,f.descriptorType,!0),c.setUint16(8,f.versionNumber,!0),c.setUint16(10,f.descriptorBlockSize,!0),c.setUint8(12,f.colorModel),c.setUint8(13,f.colorPrimaries),c.setUint8(14,f.transferFunction),c.setUint8(15,f.flags),c.setUint8(16,f.texelBlockDimension.x-1),c.setUint8(17,f.texelBlockDimension.y-1),c.setUint8(18,f.texelBlockDimension.z-1),c.setUint8(19,f.texelBlockDimension.w-1);for(let t=0;t<8;t++)c.setUint8(20+t,f.bytesPlane[t]);for(let t=0;t<f.samples.length;t++){const e=f.samples[t],n=28+16*t;c.setUint16(n+0,e.bitOffset,!0),c.setUint8(n+2,e.bitLength),c.setUint8(n+3,e.channelID),c.setUint8(n+4,e.samplePosition[0]),c.setUint8(n+5,e.samplePosition[1]),c.setUint8(n+6,e.samplePosition[2]),c.setUint8(n+7,e.samplePosition[3]),c.setUint32(n+8,e.sampleLower,!0),c.setUint32(n+12,e.sampleUpper,!0);}const _=e.length+68+3*n.levels.length*8,p=_+U.byteLength;let y=p+l.byteLength;y%8&&(y+=8-y%8);const D=[],b=new DataView(new ArrayBuffer(3*n.levels.length*8));let d=y+a.byteLength;for(let t=0;t<n.levels.length;t++){const e=n.levels[t];D.push(e.levelData),b.setBigUint64(24*t+0,BigInt(d),!0),b.setBigUint64(24*t+8,BigInt(e.levelData.byteLength),!0),b.setBigUint64(24*t+16,BigInt(e.uncompressedByteLength),!0),d+=e.levelData.byteLength;}const B=new ArrayBuffer(68),w=new DataView(B);return w.setUint32(0,n.vkFormat,!0),w.setUint32(4,n.typeSize,!0),w.setUint32(8,n.pixelWidth,!0),w.setUint32(12,n.pixelHeight,!0),w.setUint32(16,n.pixelDepth,!0),w.setUint32(20,n.layerCount,!0),w.setUint32(24,n.faceCount,!0),w.setUint32(28,n.levels.length,!0),w.setUint32(32,n.supercompressionScheme,!0),w.setUint32(36,_,!0),w.setUint32(40,U.byteLength,!0),w.setUint32(44,p,!0),w.setUint32(48,l.byteLength,!0),w.setBigUint64(52,BigInt(y),!0),w.setBigUint64(60,BigInt(a.byteLength),!0),new Uint8Array(g([new Uint8Array(e).buffer,B,b.buffer,U,l,new ArrayBuffer(y-(p+l.byteLength)),a,...D]))}



/***/ }),

/***/ "./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.frag":
/*!**********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.frag ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec3 v_baryCentricCoord;\n\nuniform int u_shadingModel; // initialValue=0\nuniform float u_alphaCutoff; // initialValue=0.01\nuniform float u_shininess; // initialValue=5\nuniform vec4 u_diffuseColorFactor; // initialValue=(1,1,1,1)\nuniform sampler2D u_diffuseColorTexture; // initialValue=(0,white)\nuniform sampler2D u_normalTexture; // initialValue=(1,blue)\nuniform vec4 u_diffuseColorTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_diffuseColorTextureRotation; // initialValue=0\n\n/* shaderity: @{renderTargetBegin} */\n\n// #pragma shaderity: require(../common/deliot2019SeamlessTexture.glsl)\n// uniform sampler2D u_tInvTexture; // initialValue=(1,white)\n// uniform vec3 u_colorSpaceOrigin;\n// uniform vec3 u_colorSpaceVector1;\n// uniform vec3 u_colorSpaceVector2;\n// uniform vec3 u_colorSpaceVector3;\n// uniform vec4 u_scaleTranslate;\n\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  if (light.effectiveRange <= 0.0) // means no range limit\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n  if (light.type != 0) // Point Light and Spot Light\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  if (light.type == 2) // Spot light\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec4 position_and_w_of_LightObject = get_lightPosition(0.0, lightIdx);\n  vec4 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec4 intensity_and_w_of_LightObject = get_lightIntensity(0.0, lightIdx);\n  Light light;\n  vec3 lightPosition = position_and_w_of_LightObject.xyz;\n  light.directionOfLightObject = direction_and_w_of_LightObject.xyz;\n  vec3 lightIntensity = intensity_and_w_of_LightObject.xyz;\n  float lightType = position_and_w_of_LightObject.w;\n  light.spotAngleScale = direction_and_w_of_LightObject.w;\n  light.spotAngleOffset = intensity_and_w_of_LightObject.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n\n\n  // diffuseColor (Considered to be premultiplied alpha)\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture (Considered to be premultiplied alpha)\n  vec4 diffuseColorTextureTransform = get_diffuseColorTextureTransform(materialSID, 0);\n  float diffuseColorTextureRotation = get_diffuseColorTextureRotation(materialSID, 0);\n  vec2 diffuseColorTexUv = uvTransform(diffuseColorTextureTransform.xy, diffuseColorTextureTransform.zw, diffuseColorTextureRotation, v_texcoord_0);\n  vec4 textureColor = texture2D(u_diffuseColorTexture, diffuseColorTexUv);\n  diffuseColor *= textureColor.rgb;\n  alpha *= textureColor.a;\n\n#ifdef RN_IS_ALPHAMODE_MASK\n  float alphaCutoff = get_alphaCutoff(materialSID, 0);\n  if (alpha < alphaCutoff) {\n    discard;\n  }\n#endif\n\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n#ifdef RN_IS_LIGHTING\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */ ; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      // Light\n      Light light = getLight(i, v_position_inWorld.xyz);\n\n      // Diffuse\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, light.direction)) * light.attenuatedIntensity;\n\n      float shininess = get_shininess(materialSID, 0);\n      int shadingModel = get_shadingModel(materialSID, 0);\n\n      float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\n\n      // Specular\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(light.direction + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(light.direction, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n#else\n  shadingColor = diffuseColor;\n#endif\n\n  rt0 = vec4(shadingColor * alpha, alpha);\n  // rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\n  // rt0 = vec4(1.0, 0.0, 0.0, 1.0);\n  // rt0 = vec4(normal_inWorld*0.5+0.5, 1.0);\n\n#ifdef RN_IS_ALPHAMODE_OPAQUE\n  rt0.a = 1.0;\n#elif defined(RN_IS_ALPHAMODE_MASK)\n  rt0.a = 1.0;\n#endif\n\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.vert":
/*!**********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.vert ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec3 v_baryCentricCoord;\n\nuniform float u_pointSize; // initialValue=30\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0,0.1,0.01)\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.frag":
/*!**************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.frag ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec2 v_texcoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  vec4 textureColor = texture2D(u_baseColorTexture, v_texcoord);\n\n  float r = textureColor.r;\n  float g = textureColor.g;\n  float b = textureColor.b;\n  float r16 = r * 15.0;\n  float g16 = g * 15.0;\n  float b16 = b * 15.0;\n  float rInt = floor(r16);\n  float gInt = floor(g16);\n  float bInt = floor(b16);\n\n  float rRate, gRate, bRate;\n  float rIntAdjust, gIntAdjust, bIntAdjust;\n\n  vec3 newColor = vec3(0.0);\n  for(int i=0; i<8; i++){\n    rRate = 1.0 - fract(r16);\n    gRate = 1.0 - fract(g16);\n    bRate = 1.0 - fract(b16);\n    rIntAdjust = rInt;\n    gIntAdjust = gInt;\n    bIntAdjust = bInt;\n\n    if(fract(float(i) / 2.0) != 0.0){\n      rIntAdjust += 1.0;\n      rRate = 1.0 - rRate;\n    }\n    if(fract(float(i / 2) / 2.0) != 0.0){\n      gIntAdjust += 1.0;\n      gRate = 1.0 - gRate;\n    }\n    if(fract(float(i / 4) / 2.0) != 0.0){\n      bIntAdjust += 1.0;\n      bRate = 1.0 - bRate;\n    }\n\n    if( rRate * gRate * bRate != 0.0){\n      newColor += texture2D(u_lookupTableTexture, vec2(rIntAdjust / 256.0 + bIntAdjust / 16.0  + 1.0 / 512.0, gIntAdjust / 16.0 + 1.0 / 32.0)).rgb * rRate * gRate * bRate;\n    }\n  }\n\n  rt0 = vec4(newColor, 1.0);\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.vert":
/*!**************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.vert ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\nin float a_instanceID;\nin vec2 a_texcoord;\nin vec3 a_position;\n\nout vec2 v_texcoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\n  v_texcoord = a_texcoord;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.frag":
/*!******************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.frag ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec4 v_position_inLocal;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec4 encodeDepthToRGBA(float depth){\n  float r = depth;\n  float g = fract(r * 255.0);\n  float b = fract(g * 255.0);\n  float a = fract(b * 255.0);\n  float coef = 1.0 / 255.0;\n  r -= g * coef;\n  g -= b * coef;\n  b -= a * coef;\n  return vec4(r, g, b, a);\n}\n\nvoid main (){\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n  float depth;\n  bool isPointLight = get_isPointLight(materialSID, 0);\n  if(isPointLight){\n    float zNear = get_zNearInner(materialSID, 0);\n    float zFar = get_zFarInner(materialSID, 0);\n    float normalizationCoefficient = 1.0 / (zFar - zNear);\n    depth = normalizationCoefficient * length(v_position_inLocal);\n  }else{\n    depth = gl_FragCoord.z;\n  }\n\n  float depthPow = get_depthPow(materialSID, 0);\n  float depthData = pow(depth, depthPow);\n  vec4 encodedDepth = encodeDepthToRGBA(depthData);\n\n  rt0 = encodedDepth;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.vert":
/*!******************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.vert ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_normal;\nin float a_instanceID;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec3 v_normal_inWorld;\nout vec4 v_position_inLocal;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_position_inLocal = gl_Position;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.frag":
/*!******************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.frag ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n  vec4 baseColor = texture2D(u_baseColorTexture, offset * tFrag);\n\n  float luminance = length(baseColor);\n\n  float luminanceCriterion = get_luminanceCriterion(materialSID, 0);\n  if(luminance < luminanceCriterion){\n    baseColor = vec4(0.0);\n  }else{\n    float luminanceReduce = get_luminanceReduce(materialSID, 0);\n    baseColor.rgb = pow(baseColor.rgb, vec3(luminanceReduce));\n  }\n\n  rt0 = baseColor;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.vert":
/*!******************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.vert ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\nin float a_instanceID;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.frag":
/*!**************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.frag ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin float v_instanceID;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nconst vec4 bitEnc = vec4(1.,255.,65025.,16581375.);\nconst vec4 bitDec = 1./bitEnc;\n\nvec4 encodeFloatRGBA(float v) {\n  float val = v;\n  float r = mod(val, 255.0);\n  val -= r;\n  float g = mod(val, 65025.0);\n  val -= g;\n  float b = mod(val, 16581375.0);\n  return vec4(r/255.0, g/65025.0, b/16581375.0, 1.0);\n}\n\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  rt0 = encodeFloatRGBA(v_instanceID);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.vert":
/*!**************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.vert ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout float v_instanceID;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\n\nvoid main()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_instanceID = a_instanceID;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag":
/*!******************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec2 v_texcoord_0;\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec3 v_position_inWorld;\n\nuniform int u_envHdriFormat; // initialValue=0\nuniform float u_envRotation; // initialValue=0\nuniform vec4 u_diffuseColorFactor; // initialValue=(1,1,1,1)\nuniform samplerCube u_colorEnvTexture; // initialValue=(0,black)\nuniform bool u_makeOutputSrgb; // initialValue=true\nuniform bool u_inverseEnvironment; // initialValue=true\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nvoid main() {\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n\n  // adapt OpenGL (RenderMan) CubeMap convention\n  float envRotation = get_envRotation(materialSID, 0);\n  float rot = envRotation + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n  vec3 envNormal = normalize(rotEnvMatrix * v_position_inWorld);\n\n  if (get_inverseEnvironment(materialSID, 0)) {\n    envNormal.x *= -1.0;\n  }\n\n  vec4 diffuseTexel = textureCube(u_colorEnvTexture, envNormal);\n  vec3 textureColor;\n  int EnvHdriFormat = get_envHdriFormat(materialSID, 0);\n  if (EnvHdriFormat == 0) { // LDR_SRGB\n    textureColor = srgbToLinear(diffuseTexel.rgb);\n  } else if (EnvHdriFormat == 3) { // RGBE\n    textureColor = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  } else {\n    textureColor = diffuseTexel.rgb;\n  }\n  diffuseColor *= textureColor;\n\n  rt0 = vec4(diffuseColor, alpha);\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert":
/*!******************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\n\nout vec2 v_texcoord_0;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec3 v_position_inWorld;\n\nuniform bool u_enableViewMatrix; // initialValue=true\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n\n  if (get_enableViewMatrix(materialSID, 0)) {\n    mat4 rotateMatrix = viewMatrix;\n    rotateMatrix[3][0] = 0.0;\n    rotateMatrix[3][1] = 0.0;\n    rotateMatrix[3][2] = 0.0;\n    gl_Position = projectionMatrix * rotateMatrix * worldMatrix * vec4(a_position, 1.0);\n  } else {\n    gl_Position = projectionMatrix * worldMatrix * vec4(a_position, 1.0);\n  }\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n  v_normal_inWorld = normalMatrix * a_normal;\n\n  v_color = a_color;\n  v_position_inWorld = (worldMatrix * vec4(a_position, 1.0)).xyz;\n  v_texcoord_0 = a_texcoord_0;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.frag":
/*!**************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.frag ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/**\n * This file contains source code provided by NVIDIA Corporation.\n * FXAA antialiasing is developed by NVIDIA.\n * The codes of this file is modified from original code to work on WebGL1.\n * The modification for GLSL 100 is referred from Three.js, https://github.com/mrdoob/three.js/blob/5ba4c25bcb74577e1b1e14906f345135610a94f3/examples/js/shaders/FXAAShader.js\n * The original FXAA code is https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/80e8ba8f5e8935821513207033490735dd3279d8/samples/es3-kepler/FXAA/FXAA3_11.h\n */\n\n//----------------------------------------------------------------------------------\n// File:        es3-kepler\\FXAA/FXAA3_11.h\n// SDK Version: v3.00\n// Email:       gameworks@nvidia.com\n// Site:        http://developer.nvidia.com/\n//\n// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  * Redistributions of source code must retain the above copyright\n//    notice, this list of conditions and the following disclaimer.\n//  * Redistributions in binary form must reproduce the above copyright\n//    notice, this list of conditions and the following disclaimer in the\n//    documentation and/or other materials provided with the distribution.\n//  * Neither the name of NVIDIA CORPORATION nor the names of its\n//    contributors may be used to endorse or promote products derived\n//    from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS 'AS IS' AND ANY\n// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n//----------------------------------------------------------------------------------\n/*============================================================================\n                    NVIDIA FXAA 3.11 by TIMOTHY LOTTES\n============================================================================*/\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec2 v_texcoord_0;\n\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform vec2 u_screenInfo; // initialValue=(0,0)\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\n\n\n  #define FXAA_PC 1\n  #define FXAA_QUALITYPRESET 39\n  #define FXAA_GREEN_AS_LUMA 0\n  #define FXAA_GLSL_100 1\n\n  /*============================================================================\n                                INTEGRATION KNOBS\n  ============================================================================*/\n  //\n  // FXAA_PS3 and FXAA_360 choose the console algorithm (FXAA3 CONSOLE).\n  // FXAA_360_OPT is a prototype for the new optimized 360 version.\n  //\n  // 1 = Use API.\n  // 0 = Don't use API.\n  //\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PS3\n  #define FXAA_PS3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360\n  #define FXAA_360 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360_OPT\n  #define FXAA_360_OPT 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_PC\n  //\n  // FXAA Quality\n  // The high quality PC algorithm.\n  //\n  #define FXAA_PC 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PC_CONSOLE\n  //\n  // The console algorithm for PC is included\n  // for developers targeting really low spec machines.\n  // Likely better to just run FXAA_PC, and use a really low preset.\n  //\n  #define FXAA_PC_CONSOLE 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_120\n  #define FXAA_GLSL_120 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_130\n  #define FXAA_GLSL_130 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_3\n  #define FXAA_HLSL_3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_4\n  #define FXAA_HLSL_4 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_5\n  #define FXAA_HLSL_5 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_GREEN_AS_LUMA\n  //\n  // For those using non-linear color,\n  // and either not able to get luma in alpha, or not wanting to,\n  // this enables FXAA to run using green as a proxy for luma.\n  // So with this enabled, no need to pack luma in alpha.\n  //\n  // This will turn off AA on anything which lacks some amount of green.\n  // Pure red and blue or combination of only R and B, will get no AA.\n  //\n  // Might want to lower the settings for both,\n  //    fxaaConsoleEdgeThresholdMin\n  //    fxaaQualityEdgeThresholdMin\n  // In order to insure AA does not get turned off on colors\n  // which contain a minor amount of green.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_GREEN_AS_LUMA 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_EARLY_EXIT\n  //\n  // Controls algorithm's early exit path.\n  // On PS3 turning this ON adds 2 cycles to the shader.\n  // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n  // Turning this off on console will result in a more blurry image.\n  // So this defaults to on.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_EARLY_EXIT 1\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_DISCARD\n  //\n  // Only valid for PC OpenGL currently.\n  // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n  //\n  // 1 = Use discard on pixels which don't need AA.\n  //     For APIs which enable concurrent TEX+ROP from same surface.\n  // 0 = Return unchanged color on pixels which don't need AA.\n  //\n  #define FXAA_DISCARD 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  //\n  // Used for GLSL 120 only.\n  //\n  // 1 = GL API supports fast pixel offsets\n  // 0 = do not use fast pixel offsets\n  //\n  #ifdef GLEXT_gpu_shader4\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  #define FXAA_FAST_PIXEL_OFFSET 0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GATHER4_ALPHA\n  //\n  // 1 = API supports gather4 on alpha channel.\n  // 0 = API does not support gather4 on alpha channel.\n  //\n  #if (FXAA_HLSL_5 == 1)\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifndef FXAA_GATHER4_ALPHA\n  #define FXAA_GATHER4_ALPHA 0\n  #endif\n  #endif\n\n  /*============================================================================\n                        FXAA CONSOLE PS3 - TUNING KNOBS\n  ============================================================================*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_SHARPNESS\n  //\n  // Consoles the sharpness of edges on PS3 only.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 4 and 8.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 8.0 is sharper\n  // 4.0 is softer\n  // 2.0 is really soft (good for vector graphics inputs)\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 8.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 4.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 2.0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_THRESHOLD\n  //\n  // Only effects PS3.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // The minimum amount of local contrast required to apply algorithm.\n  // The console setting has a different mapping than the quality setting.\n  //\n  // This only applies when FXAA_EARLY_EXIT is 1.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 0.25 and 0.125.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 0.125 leaves less aliasing, but is softer\n  // 0.25 leaves more aliasing, and is sharper\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.125\n  #else\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.25\n  #endif\n  #endif\n\n  /*============================================================================\n                          FXAA QUALITY - TUNING KNOBS\n  ------------------------------------------------------------------------------\n  NOTE the other tuning knobs are now in the shader function inputs!\n  ============================================================================*/\n  #ifndef FXAA_QUALITYPRESET\n  //\n  // Choose the quality preset.\n  // This needs to be compiled into the shader as it effects code.\n  // Best option to include multiple presets is to\n  // in each shader define the preset, then include this file.\n  //\n  // OPTIONS\n  // -----------------------------------------------------------------------\n  // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n  // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n  // 39       - no dither, very expensive\n  //\n  // NOTES\n  // -----------------------------------------------------------------------\n  // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n  // 13 = about same speed as FXAA 3.9 and better than 12\n  // 23 = closest to FXAA 3.9 visually and performance wise\n  //  _ = the lowest digit is directly related to performance\n  // _  = the highest digit is directly related to style\n  //\n  #define FXAA_QUALITYPRESET 12\n  #endif\n\n\n  /*============================================================================\n                             FXAA QUALITY - PRESETS\n  ============================================================================*/\n\n  /*============================================================================\n                       FXAA QUALITY - MEDIUM DITHER PRESETS\n  ============================================================================*/\n  #if(FXAA_QUALITYPRESET == 10)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 3.0\n#define FXAA_QUALITYP2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 11)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 3.0\n#define FXAA_QUALITYP3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 12)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 4.0\n#define FXAA_QUALITYP4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 13)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 4.0\n#define FXAA_QUALITYP5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 14)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 4.0\n#define FXAA_QUALITYP6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 15)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 12.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 20)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 2.0\n#define FXAA_QUALITYP2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 21)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 22)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 23)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 24)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 3.0\n#define FXAA_QUALITYP6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 25)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 26)\n#define FXAA_QUALITYPS 9\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 4.0\n#define FXAA_QUALITYP8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 27)\n#define FXAA_QUALITYPS 10\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 4.0\n#define FXAA_QUALITYP9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 28)\n#define FXAA_QUALITYPS 11\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 4.0\n#define FXAA_QUALITYP10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 29)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 39)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.0\n#define FXAA_QUALITYP2 1.0\n#define FXAA_QUALITYP3 1.0\n#define FXAA_QUALITYP4 1.0\n#define FXAA_QUALITYP5 1.5\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n\n\n/*============================================================================\n                                API PORTING\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n#define FxaaBool bool\n#define FxaaDiscard discard\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 ivec2\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTex sampler2D\n#else\n#define FxaaBool bool\n#define FxaaDiscard clip(-1)\n#define FxaaFloat float\n#define FxaaFloat2 float2\n#define FxaaFloat3 float3\n#define FxaaFloat4 float4\n#define FxaaHalf half\n#define FxaaHalf2 half2\n#define FxaaHalf3 half3\n#define FxaaHalf4 half4\n#define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n#define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n// Requires,\n//  #version 120\n// And at least,\n//  #extension GLEXT_gpu_shader4 : enable\n//  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n#if (FXAA_FAST_PIXEL_OFFSET == 1)\n#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n#else\n#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n#endif\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n// Requires \"#version 130\" or better\n#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n\n\n/*============================================================================\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n  FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return dot(rgba.rgb, vec3(0.298912, 0.586611, 0.114478)); }\n  // FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\n  FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n\n\n\n\n\n\n\n\n/*============================================================================\n                             FXAA3 QUALITY - PC\n============================================================================*/\n#if (FXAA_PC == 1)\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = upper left of pixel\n    // {zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {_a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //   Where N ranges between,\n    //     N = 0.50 (default)\n    //     N = 0.33 (sharper)\n    // {x_} = -N/screenWidthInPixels\n    // {_y} = -N/screenHeightInPixels\n    // {z_} =  N/screenWidthInPixels\n    // {_w} =  N/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x_} = -2.0/screenWidthInPixels\n    // {_y} = -2.0/screenHeightInPixels\n    // {z_} =  2.0/screenWidthInPixels\n    // {_w} =  2.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x_} =  8.0/screenWidthInPixels\n    // {_y} =  8.0/screenHeightInPixels\n    // {z_} = -4.0/screenWidthInPixels\n    // {_w} = -4.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYSUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_SHARPNESS for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only three safe values here: 2 and 4 and 8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //   8.0 is sharper (default!!!)\n    //   4.0 is softer\n    //   2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_THRESHOLD for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only two safe values here: 1/4 and 1/8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //   0.125 leaves less aliasing, but is softer (default!!!)\n    //   0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3,\n    // PS3 was simplified to avoid more shader instructions.\n    //   0.06 - faster but more aliasing in darks\n    //   0.05 - default\n    //   0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //\n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immedates.\n    // Immedates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n  ) {\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posM;\n  posM.x = pos.x;\n  posM.y = pos.y;\n  #if (FXAA_GATHER4_ALPHA == 1)\n  #if (FXAA_DISCARD == 0)\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #endif\n  #if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n  #else\n  FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n  #endif\n  #if (FXAA_DISCARD == 1)\n  #define lumaM luma4A.w\n  #endif\n  #define lumaE luma4A.z\n  #define lumaS luma4A.x\n  #define lumaSE luma4A.y\n  #define lumaNW luma4B.w\n  #define lumaN luma4B.z\n  #define lumaW luma4B.x\n  #else\n  FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 0.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, -1), fxaaQualityRcpFrame.xy));\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat maxSM = max(lumaS, lumaM);\n  FxaaFloat minSM = min(lumaS, lumaM);\n  FxaaFloat maxESM = max(lumaE, maxSM);\n  FxaaFloat minESM = min(lumaE, minSM);\n  FxaaFloat maxWN = max(lumaN, lumaW);\n  FxaaFloat minWN = min(lumaN, lumaW);\n  FxaaFloat rangeMax = max(maxWN, maxESM);\n  FxaaFloat rangeMin = min(minWN, minESM);\n  FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n  FxaaFloat range = rangeMax - rangeMin;\n  FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n  FxaaBool earlyExit = range < rangeMaxClamped;\n  /*--------------------------------------------------------------------------*/\n  if (earlyExit)\n  #if (FXAA_DISCARD == 1)\n    FxaaDiscard;\n  #else\n  return rgbyM;\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #if (FXAA_GATHER4_ALPHA == 0)\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  #else\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNS = lumaN + lumaS;\n  FxaaFloat lumaWE = lumaW + lumaE;\n  FxaaFloat subpixRcpRange = 1.0 / range;\n  FxaaFloat subpixNSWE = lumaNS + lumaWE;\n  FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n  FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNESE = lumaNE + lumaSE;\n  FxaaFloat lumaNWNE = lumaNW + lumaNE;\n  FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n  FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNWSW = lumaNW + lumaSW;\n  FxaaFloat lumaSWSE = lumaSW + lumaSE;\n  FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n  FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n  FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n  FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n  FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n  FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n  FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n  FxaaBool horzSpan = edgeHorz >= edgeVert;\n  FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n  /*--------------------------------------------------------------------------*/\n  if (!horzSpan) lumaN = lumaW;\n  if (!horzSpan) lumaS = lumaE;\n  if (horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n  FxaaFloat subpixB = (subpixA * (1.0 / 12.0)) - lumaM;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat gradientN = lumaN - lumaM;\n  FxaaFloat gradientS = lumaS - lumaM;\n  FxaaFloat lumaNN = lumaN + lumaM;\n  FxaaFloat lumaSS = lumaS + lumaM;\n  FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n  FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n  if (pairN) lengthSign = -lengthSign;\n  FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posB;\n  posB.x = posM.x;\n  posB.y = posM.y;\n  FxaaFloat2 offNP;\n  offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n  offNP.y = (horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n  if (!horzSpan) posB.x += lengthSign * 0.5;\n  if (horzSpan) posB.y += lengthSign * 0.5;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posN;\n  posN.x = posB.x - offNP.x * FXAA_QUALITYP0;\n  posN.y = posB.y - offNP.y * FXAA_QUALITYP0;\n  FxaaFloat2 posP;\n  posP.x = posB.x + offNP.x * FXAA_QUALITYP0;\n  posP.y = posB.y + offNP.y * FXAA_QUALITYP0;\n  FxaaFloat subpixD = ((-2.0) * subpixC) + 3.0;\n  FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n  FxaaFloat subpixE = subpixC * subpixC;\n  FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n  /*--------------------------------------------------------------------------*/\n  if (!pairN) lumaNN = lumaSS;\n  FxaaFloat gradientScaled = gradient * 1.0 / 4.0;\n  FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n  FxaaFloat subpixF = subpixD * subpixE;\n  FxaaBool lumaMLTZero = lumaMM < 0.0;\n  /*--------------------------------------------------------------------------*/\n  lumaEndN -= lumaNN * 0.5;\n  lumaEndP -= lumaNN * 0.5;\n  FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n  FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n  if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP1;\n  if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP1;\n  FxaaBool doneNP = (!doneN) || (!doneP);\n  if (!doneP) posP.x += offNP.x * FXAA_QUALITYP1;\n  if (!doneP) posP.y += offNP.y * FXAA_QUALITYP1;\n  /*--------------------------------------------------------------------------*/\n  if (doneNP) {\n    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n    doneN = abs(lumaEndN) >= gradientScaled;\n    doneP = abs(lumaEndP) >= gradientScaled;\n    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP2;\n    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP2;\n    doneNP = (!doneN) || (!doneP);\n    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP2;\n    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP2;\n    /*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITYPS > 3)\n      if (doneNP) {\n        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP3;\n        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP3;\n        doneNP = (!doneN) || (!doneP);\n        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP3;\n        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP3;\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITYPS > 4)\n          if (doneNP) {\n            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP4;\n            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP4;\n            doneNP = (!doneN) || (!doneP);\n            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP4;\n            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP4;\n            /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITYPS > 5)\n              if (doneNP) {\n                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP5;\n                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP5;\n                doneNP = (!doneN) || (!doneP);\n                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP5;\n                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP5;\n                /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITYPS > 6)\n                  if (doneNP) {\n                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP6;\n                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP6;\n                    doneNP = (!doneN) || (!doneP);\n                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP6;\n                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP6;\n                    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITYPS > 7)\n                      if (doneNP) {\n                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP7;\n                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP7;\n                        doneNP = (!doneN) || (!doneP);\n                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP7;\n                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP7;\n                        /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITYPS > 8)\n                          if (doneNP) {\n                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP8;\n                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP8;\n                            doneNP = (!doneN) || (!doneP);\n                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP8;\n                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP8;\n                            /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITYPS > 9)\n                              if (doneNP) {\n                                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP9;\n                                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP9;\n                                doneNP = (!doneN) || (!doneP);\n                                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP9;\n                                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP9;\n                                /*--------------------------------------------------------------------------*/\n                                #if (FXAA_QUALITYPS > 10)\n                                  if (doneNP) {\n                                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                    doneN = abs(lumaEndN) >= gradientScaled;\n                                    doneP = abs(lumaEndP) >= gradientScaled;\n                                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP10;\n                                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP10;\n                                    doneNP = (!doneN) || (!doneP);\n                                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP10;\n                                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP10;\n                                    /*--------------------------------------------------------------------------*/\n                                    #if (FXAA_QUALITYPS > 11)\n                                      if (doneNP) {\n                                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                        doneN = abs(lumaEndN) >= gradientScaled;\n                                        doneP = abs(lumaEndP) >= gradientScaled;\n                                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP11;\n                                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP11;\n                                        doneNP = (!doneN) || (!doneP);\n                                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP11;\n                                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP11;\n                                        /*--------------------------------------------------------------------------*/\n                                        #if (FXAA_QUALITYPS > 12)\n                                          if (doneNP) {\n                                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                            doneN = abs(lumaEndN) >= gradientScaled;\n                                            doneP = abs(lumaEndP) >= gradientScaled;\n                                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP12;\n                                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP12;\n                                            doneNP = (!doneN) || (!doneP);\n                                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP12;\n                                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP12;\n                                            /*--------------------------------------------------------------------------*/\n                                          }\n                                        #endif\n                                        /*--------------------------------------------------------------------------*/\n                                      }\n                                    #endif\n                                    /*--------------------------------------------------------------------------*/\n                                  }\n                                #endif\n                                /*--------------------------------------------------------------------------*/\n                              }\n                            #endif\n                            /*--------------------------------------------------------------------------*/\n                          }\n                        #endif\n                        /*--------------------------------------------------------------------------*/\n                      }\n                    #endif\n                    /*--------------------------------------------------------------------------*/\n                  }\n                #endif\n                /*--------------------------------------------------------------------------*/\n              }\n            #endif\n            /*--------------------------------------------------------------------------*/\n          }\n        #endif\n        /*--------------------------------------------------------------------------*/\n      }\n    #endif\n    /*--------------------------------------------------------------------------*/\n  }\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat dstN = posM.x - posN.x;\n  FxaaFloat dstP = posP.x - posM.x;\n  if (!horzSpan) dstN = posM.y - posN.y;\n  if (!horzSpan) dstP = posP.y - posM.y;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n  FxaaFloat spanLength = (dstP + dstN);\n  FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n  FxaaFloat spanLengthRcp = 1.0 / spanLength;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool directionN = dstN < dstP;\n  FxaaFloat dst = min(dstN, dstP);\n  FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n  FxaaFloat subpixG = subpixF * subpixF;\n  FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n  FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n  FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n  if (!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n  if (horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n  #if (FXAA_DISCARD == 1)\n    return FxaaTexTop(tex, posM);\n  #else\n  return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n  #endif\n}\n/*==========================================================================*/\n#endif\n\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  vec2 screenInfo = get_screenInfo(materialSID, 0);\n  rt0 = FxaaPixelShader(\n      v_texcoord_0,\n      vec4(0.0),\n      u_baseColorTexture,\n      u_baseColorTexture,\n      u_baseColorTexture,\n      1.0 / screenInfo,\n      vec4(0.0),\n      vec4(0.0),\n      vec4(0.0),\n      0.75,\n      0.166,\n      0.0833,\n      0.0,\n      0.0,\n      0.0,\n      vec4(0.0)\n  );\n  rt0.a = 1.0;\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.vert":
/*!**************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.vert ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nout vec2 v_texcoord_0;\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\n  v_texcoord_0 = a_texcoord_0;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.frag":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.frag ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec2 v_texcoord;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n\n/* shaderity: @{getters} */\n\n#define MATH_PI 3.141592\n\n// These codes are referenced from https://github.com/knarkowicz/FurnaceTest\nfloat roughnessRemap(float userRoughness) {\n  return userRoughness * userRoughness;\n}\n\n// GGX NDF\nfloat d_ggx(float userRoughness, float NH) {\n  float alphaRoughness = userRoughness * userRoughness;\n  float roughnessSqr = alphaRoughness * alphaRoughness;\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n  return roughnessSqr / (MATH_PI * f * f);\n}\n\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 envBRDFApprox( float Roughness, float NoV ) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n  vec4 r = Roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n  return AB;\n}\n\nfloat specularIBL(float userRoughness, float NV, float f0) {\n  /// Use specular BRDF LUT\n  // vec3 brdf = texture2D(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\n  // float specular = 1.0 * (f0 * brdf.x + brdf.y);\n\n  /// Use specular BRDF Approx\n  vec2 f_ab = envBRDFApprox(userRoughness, NV);\n  vec3 specular = vec3(f0) * f_ab.x + f_ab.y;\n  return specular.x;\n}\n\n// The Schlick Approximation to Fresnel\nfloat fresnel(float f0, float VH) {\n  return f0 + (1.0 - f0) * pow(1.0 - VH, 5.0);\n}\n\nfloat smithG1(float roughness, float NoV)\n{\n\tfloat a = roughnessRemap( roughness );\n\tfloat a2 = a * a;\n\tfloat NoV2 = NoV * NoV;\n\tfloat lambda = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoV2) / NoV2)) * 0.5;\n\treturn 1.0 / (1.0 + lambda);\n}\n\nfloat smithG(float roughness, float NoV, float NoL)\n{\n\tfloat a = roughnessRemap( roughness );\n\tfloat a2 = a * a;\n\tfloat NoV2 = NoV * NoV;\n\tfloat NoL2 = NoL * NoL;\n\tfloat lambdaV = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoV2) / NoV2)) * 0.5;\n\tfloat lambdaL = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoL2) / NoL2)) * 0.5;\n\treturn 1.0 / (1.0 + lambdaV + lambdaL);\n}\n\nfloat g_shieldingForWeak(float alphaRoughness, float NV, float NL) {\n  float r = alphaRoughness;\n\n  // Local Masking using \"Schlick-Smith\" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localMasking;\n}\n\n\nfloat g_shielding(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float r = a;\n\n  // Local Shadowing using \"Schlick-Smith\" Masking Function\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n  // Local Masking using \"Schlick-Smith\" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localShadowing * localMasking;\n}\n\nfloat v_SmithGGXCorrelatedForWeak(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float a2 = a * a;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  return 0.5 / (GGXV);\n}\n\nfloat v_SmithGGXCorrelated(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float a2 = a * a;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n  return 0.5 / (GGXV + GGXL);\n}\n\nfloat vanDerCorpus(int n, int base)\n{\n    float invBase = 1.0 / float(base);\n    float denom   = 1.0;\n    float result  = 0.0;\n\n    for(int i = 0; i < 32; ++i)\n    {\n        if(n > 0)\n        {\n            denom   = mod(float(n), 2.0);\n            result += denom * invBase;\n            invBase = invBase / 2.0;\n            n       = int(float(n) / 2.0);\n        }\n    }\n\n    return result;\n}\n\n// this is from https://learnopengl.com/PBR/IBL/Specular-IBL\nvec2 hammersleyNoBitOps(int i, int N)\n{\n  return vec2(float(i)/float(N), vanDerCorpus(i, 2));\n}\n\nvec3 sampleHemisphereGGX(vec2 Xi, float roughness) {\n  float a = roughnessRemap(roughness);\n\tfloat a2 = a * a;\n\n  float phi = 2.0 * MATH_PI * Xi.x;\n  float cosPhi = cos(phi);\n  float sinPhi = sin(phi);\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a2 - 1.0) * Xi.y)); // GGX\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\n  return vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n}\n\nfloat weakWhiteFurnaceTest(float roughness, float NoV, float f0, int g_type, int disable_fresnel)\n{\n\tfloat vx = sqrt(1.0 - NoV * NoV);\n\tfloat vy = 0.0;\n\tfloat vz = NoV;\n\n\tfloat integral = 0.0;\n\tconst int sampleNum = 2048;\n\tfor (int i = 0; i < sampleNum; ++i)\n\t{\n    vec2 Xi = hammersleyNoBitOps(i, sampleNum);\n\n    vec3 hvec = sampleHemisphereGGX(Xi, roughness);\n\n\t\tfloat VoHUnsat = vx * hvec.x + vy * hvec.y + vz * hvec.z;\n\n    float lz = 2.0 * VoHUnsat * hvec.z - vz;\n\n    float NoL = max(lz, 0.0);\n\t\tfloat NoH = max(hvec.z, 0.0);\n\t\tfloat VoH = max(VoHUnsat, 0.0);\n\n    float f = fresnel(f0, VoH);\n\n    float g1 = 0.0;\n    if (g_type == 0) {\n      g1 = smithG1(roughness, NoV);\n    } else if (g_type == 1) {\n      g1 = g_shieldingForWeak(roughness, NoV, NoL);\n    } else if (g_type == 2) {\n      g1 = v_SmithGGXCorrelatedForWeak(roughness, NoV, NoL) * 4.0 * NoV * NoL;\n    }\n\n    float pdf = 4.0 * VoH / NoH;\n    float integralValue = (g1 * pdf) / (4.0 * NoV);\n    if (disable_fresnel == 0) {\n      integralValue *= f;\n    }\n    // integralValue *= 0.5; // Set furnace color 0.5\n\n    integral += integralValue;\n\n\t}\n\tintegral /= float(sampleNum);\n\treturn clamp(integral, 0.0, 1.0);\n}\n\nfloat whiteFurnaceTest(float roughness, float NoV, float f0, int g_type, int disable_fresnel)\n{\n\tfloat vx = sqrt(1.0 - NoV * NoV);\n\tfloat vy = 0.0;\n\tfloat vz = NoV;\n\n\tfloat integral = 0.0;\n\tconst int sampleNum = 4096;\n\tfor (int i = 0; i < sampleNum; ++i)\n\t{\n\n    vec2 Xi = hammersleyNoBitOps(i, sampleNum);\n\n    vec3 hvec = sampleHemisphereGGX(Xi, roughness);\n\n\t\tfloat VoHUnsat = vx * hvec.x + vy * hvec.y + vz * hvec.z;\n\t\tfloat lx = 2.0 * VoHUnsat * hvec.x - vx;\n\t\tfloat ly = 2.0 * VoHUnsat * hvec.y - vy;\n\t\tfloat lz = 2.0 * VoHUnsat * hvec.z - vz;\n\n\t\tfloat NoL = max(lz, 0.0);\n\t\tfloat NoH = max(hvec.z, 0.0);\n    float VoH = max(VoHUnsat, 0.0);\n\n    float f = fresnel(f0, VoH);\n\n    float g = 0.0;\n    if (g_type == 0) {\n      g = smithG(roughness, NoV, NoL);\n    } else if (g_type == 1){\n      g = g_shielding(roughness, NoV, NoL);\n    } else if (g_type == 2){\n      g = v_SmithGGXCorrelated(roughness, NoV, NoL) * (4.0 * NoV * NoL);\n    } else if (g_type == 3) {\n      g = 0.0;\n    }\n\n    float pdf = 4.0 * VoH / NoH;\n    float integralValue = (g * pdf) / (4.0 * NoV);\n    if (disable_fresnel == 0 && g_type != 3) {\n      integralValue *= f;\n    }\n    // integralValue *= 0.5; // Set furnace color 0.5\n    integral += integralValue;\n\t}\n  integral /= float(sampleNum);\n  if (g_type == 3) {\n    integral = specularIBL(roughness, NoV, f0);\n  }\n\treturn clamp(integral, 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  vec2 quadSizeInPixel = get_screenInfo(materialSID, 0);\n  float roughness = 0.0;\n  float NoV = 0.0; // normal dot view vector\n\n  // 2D mode\n  int mode = get_mode(materialSID, 0);\n  if (mode == 0) {\n    roughness = (gl_FragCoord.y) / quadSizeInPixel.y;\n    NoV = (gl_FragCoord.x) / quadSizeInPixel.x;\n  } else {\n    // object mode\n    // Roughness\n    const float c_MinRoughness = 0.04;\n    vec2 metallicRoughnessFactor = get_metallicRoughnessFactor(materialSID, 0);\n    float userRoughness = metallicRoughnessFactor.y;\n    float metallic = metallicRoughnessFactor.x;\n\n    vec4 ormTexel = texture2D(u_metallicRoughnessTexture, v_texcoord);\n    userRoughness = ormTexel.g * userRoughness;\n    userRoughness = clamp(userRoughness, c_MinRoughness, 1.0);\n    roughness = userRoughness;\n\n    // vec3 viewVector = normalize(vec3(0.0, 0.0, 10.0) - v_position_inWorld.xyz);\n    // vec3 viewVector = normalize(u_viewPosition - v_position_inWorld.xyz);\n    vec3 viewVector = vec3(0.0, 0.0, 1.0);\n    NoV = dot(v_normal_inWorld, viewVector);\n  }\n\n  int debugView = get_debugView(materialSID, 0);\n  float f0 = get_f0(materialSID, 0);\n  int g_type = get_g_type(materialSID, 0);\n  int disable_fresnel = get_disable_fresnel(materialSID, 0);\n\n  if (debugView == 0) {\n    float whiteFurnaceResult = whiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(whiteFurnaceResult, whiteFurnaceResult, whiteFurnaceResult, 1.0);\n\n  } else if (debugView == 1) {\n    float weakWhiteFurnaceResult = weakWhiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(weakWhiteFurnaceResult, weakWhiteFurnaceResult, weakWhiteFurnaceResult, 1.0);\n\n  } else if (debugView == 2){\n    float nn = NoV*0.5+0.5;\n    rt0 = vec4(nn, nn, nn, 1.0);\n\n  } else if (debugView == 3){\n    rt0 = vec4(v_normal_inWorld.xyz, 1.0);\n\n  } else if (debugView == 4){\n    float whiteFurnaceResult = whiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    float weakWhiteFurnaceResult = weakWhiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(whiteFurnaceResult, weakWhiteFurnaceResult, 0.0, 1.0);\n\n  } else if (debugView == 5){\n    rt0 = vec4(roughness, NoV, 0.0, 1.0);\n\n  } else {\n    rt0 = vec4(1.0, 1.0, 1.0, 1.0);\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.vert":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.vert ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin float a_instanceID;\nin vec2 a_texcoord;\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec2 v_texcoord;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\n  v_texcoord = a_texcoord;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag":
/*!**************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec2 v_texcoord_0;\n\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform bool u_enableLinearToSrgb; // initialValue=true\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nvec4 baseColor = texture2D(u_baseColorTexture, v_texcoord_0);\n\nif (get_enableLinearToSrgb(materialSID, 0)) {\n  baseColor.rgb = linearToSrgb(baseColor.rgb);\n}\n\nrt0 = baseColor;\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert":
/*!**************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nout vec2 v_texcoord_0;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\nv_texcoord_0 = a_texcoord_0;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.frag":
/*!**************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.frag ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nvec4 encodeDepthToRGBA(float depth){\n  float r = depth;\n  float g = fract(r * 255.0);\n  float b = fract(g * 255.0);\n  float a = fract(b * 255.0);\n  float coef = 1.0 / 255.0;\n  r -= g * coef;\n  g -= b * coef;\n  b -= a * coef;\n  return vec4(r, g, b, a);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  vec2 blurDirection;\n  bool isHorizontal = get_isHorizontal(materialSID, 0);\n  if(isHorizontal){\n    blurDirection = vec2(1.0,0.0);\n  }else{\n    blurDirection = vec2(0.0,1.0);\n  }\n\n  float depth = 0.0;\n  int gaussianKernelSize = get_gaussianKernelSize(materialSID, 0);\n  float minStrideLength = -float(gaussianKernelSize - 1) / 2.0;\n\n  for(int i=0; i < 30; i++) {\n    if(gaussianKernelSize == i) {\n      break;\n    }\n\n    float strideLength = minStrideLength + float(i);\n    vec2 stride = strideLength * blurDirection;\n    float depthData = decodeRGBAToDepth(texture2D(u_baseColorTexture, (offset + stride) * tFrag));\n    if(depthData > 1.0) depthData = 1.0;\n\n    float gaussianRatio = u_gaussianRatio[i];\n    depth +=  depthData * gaussianRatio;\n  }\n\n  rt0 = encodeDepthToRGBA(depth);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.vert":
/*!**************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.vert ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\nin float a_instanceID;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.frag":
/*!********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.frag ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  vec2 blurDirection;\n  bool isHorizontal = get_isHorizontal(materialSID, 0);\n  if(isHorizontal){\n    blurDirection = vec2(1.0,0.0);\n  }else{\n    blurDirection = vec2(0.0,1.0);\n  }\n\n  vec4 color = vec4(0.0);\n  int gaussianKernelSize = get_gaussianKernelSize(materialSID, 0);\n  float minStrideLength = -float(gaussianKernelSize - 1) / 2.0;\n\n  for(int i=0; i < 30; i++) {\n    if(gaussianKernelSize == i) {\n      break;\n    }\n\n    float strideLength = minStrideLength + float(i);\n    vec2 stride = strideLength * blurDirection;\n\n    float gaussianRatio = u_gaussianRatio[i];\n    color += texture2D(u_baseColorTexture, (offset + stride) * tFrag) * gaussianRatio;\n  }\n\n  rt0 = color;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.vert":
/*!********************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.vert ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\nin float a_instanceID;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.frag":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.frag ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nconst float EPS_COL = 0.00001;\n\nin vec2 v_texcoord_0;\nin vec3 v_baryCentricCoord;\nin vec3 v_normal_inView;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec3 v_tangent_inWorld;\n  in vec3 v_binormal_inWorld; // bitangent_inWorld\n#endif\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord) {\n    vec3 tangent_inWorld = normalize(v_tangent_inWorld);\n    vec3 binormal_inWorld = normalize(v_binormal_inWorld);\n    mat3 tbnMat_tangent_to_world = mat3(tangent_inWorld, binormal_inWorld, normal_inWorld);\n\n    vec3 normal = texture(u_normalTexture, texcoord).xyz * 2.0 - 1.0;\n    return normalize(tbnMat_tangent_to_world * normal);\n  }\n#else\n  #ifdef RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n    // This is based on http://www.thetenthplanet.de/archives/1180\n    mat3 cotangent_frame(vec3 normal, vec3 position, vec2 uv) {\n      uv = gl_FrontFacing ? uv : -uv;\n\n      // get edge vectors of the pixel triangle\n      vec3 dp1 = dFdx(position);\n      vec3 dp2 = dFdy(position);\n      vec2 duv1 = dFdx(uv);\n      vec2 duv2 = dFdy(uv);\n\n      // solve the linear system\n      vec3 dp2perp = cross(dp2, normal);\n      vec3 dp1perp = cross(normal, dp1);\n      vec3 tangent = dp2perp * duv1.x + dp1perp * duv2.x;\n      vec3 bitangent = dp2perp * duv1.y + dp1perp * duv2.y;\n\n      // construct a scale-invariant frame\n      float invMat = inversesqrt(max(dot(tangent, tangent), dot(bitangent, bitangent)));\n      return mat3(tangent * invMat, bitangent * invMat, normal);\n    }\n\n    vec3 perturb_normal(vec3 normal, vec3 viewVector, vec2 texcoord) {\n      vec3 normalTex = texture(u_normalTexture, texcoord).xyz * 2.0 - 1.0;\n\n      mat3 tbnMat_tangent_to_world = cotangent_frame(normal, -viewVector, texcoord);\n      return normalize(tbnMat_tangent_to_world * normalTex);\n    }\n  #else\n    vec3 perturb_normal(vec3 normal, vec3 viewVector, vec2 texcoord) {\n      return normal;\n    }\n  #endif\n#endif\n\n\nvoid main (){\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_NONE\n      discard;\n    #endif\n  #endif\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n\n  // TODO\n  // uv transform\n\n  // TODO\n  // uv animation\n\n  // main color\n  vec4 litTextureColor = texture(u_litColorTexture, v_texcoord_0);\n  vec4 litColorFactor = get_litColor(materialSID, 0);\n\n  // alpha\n  float alpha = 1.0;\n\n  #ifdef RN_ALPHATEST_ON\n    alpha = litTextureColor.a * litColorFactor.a;\n    float cutoff = get_cutoff(materialSID, 0);\n    if(alpha < cutoff) discard;\n  #elif defined(RN_ALPHABLEND_ON)\n    alpha = litTextureColor.a * litColorFactor.a;\n  #endif\n\n  if (alpha < 0.01) {\n    discard;\n  }else{\n    rt0.w = alpha;\n  }\n\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_COLOR_FIXED\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\n      rt0.xyz = outlineColor;\n\n      rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n      return;\n    #endif\n  #endif\n\n  // view vector\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\n  vec3 viewVector = viewPosition - v_position_inWorld.xyz;\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n  #ifdef RN_MTOON_HAS_BUMPMAP\n    normal_inWorld = perturb_normal(normal_inWorld, viewVector, v_texcoord_0);\n  #endif\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    normal_inWorld *= -1.0;\n  #endif\n\n\n  // Lighting, Direct Light\n\n  float shadowAttenuation = 1.0;\n  // TODO: shadowmap computation\n\n  float receiveShadowRate = get_receiveShadowRate(materialSID, 0);\n  float lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, receiveShadowRate * texture(u_receiveShadowTexture, v_texcoord_0).r);\n\n  float shadingGradeRate = get_shadingGradeRate(materialSID, 0);\n  float shadingGrade = 1.0 - shadingGradeRate * (1.0 - texture(u_shadingGradeTexture, v_texcoord_0).r);\n  float lightColorAttenuation = get_lightColorAttenuation(materialSID, 0);\n\n  vec3 shadeColorFactor = get_shadeColor(materialSID, 0);\n  vec3 shadeColor = shadeColorFactor * texture(u_shadeColorTexture, v_texcoord_0).xyz;\n  shadeColor.xyz = srgbToLinear(shadeColor.xyz);\n\n  vec3 litColor = litColorFactor.xyz * litTextureColor.xyz;\n  litColor.xyz = srgbToLinear(litColor.xyz);\n\n\n  float shadeShift = get_shadeShift(materialSID, 0);\n  float shadeToony = get_shadeToony(materialSID, 0);\n\n  vec3 lightings[/* shaderity: @{Config.maxLightNumberInShader} */];\n  #ifdef RN_MTOON_DEBUG_LITSHADERATE\n    float lightIntensities[/* shaderity: @{Config.maxLightNumberInShader} */];\n  #endif\n  for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n    if (i >= lightNumber) {\n      break;\n    }\n\n    // Rn_Light\n    vec4 gotLightDirection = get_lightDirection(0.0, i);\n    vec4 gotLightIntensity = get_lightIntensity(0.0, i); //light color\n    vec4 gotLightPosition = get_lightPosition(0.0, i);\n    vec3 lightDirection = gotLightDirection.xyz;\n    vec3 lightColor = gotLightIntensity.xyz;\n    vec3 lightPosition = gotLightPosition.xyz;\n    float lightType = gotLightPosition.w;\n    float spotCosCutoff = gotLightDirection.w;\n    float spotExponent = gotLightIntensity.w;\n\n    float distanceAttenuation = 1.0;\n    if (lightType > 0.75) { // is point light or spotlight\n      lightDirection = normalize(lightPosition.xyz - v_position_inWorld.xyz);\n\n      float distance = dot(lightPosition - v_position_inWorld.xyz, lightPosition - v_position_inWorld.xyz);\n      distanceAttenuation = 1.0 / pow(distance, 2.0);\n    }\n\n    float spotEffect = 1.0;\n    if (lightType > 1.75) { // is spotlight\n      spotEffect *= dot(gotLightDirection.xyz, lightDirection);\n      if (spotEffect > spotCosCutoff) {\n        spotEffect *= pow(clamp(spotEffect, 0.0, 1.0), spotExponent);\n      } else {\n        spotEffect = 0.0;\n      }\n    }\n\n    // lightAttenuation *= distanceAttenuation * spotEffect;\n    float dotNL = dot(lightDirection, normal_inWorld);\n    float lightIntensity = dotNL * 0.5 + 0.5; // from [-1, +1] to [0, 1]\n    lightIntensity = lightIntensity * lightAttenuation; // TODO: receive shadow\n    lightIntensity = lightIntensity * shadingGrade; // darker\n    lightIntensity = lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\n\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\n    float maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\n    float minIntensityThreshold = shadeShift;\n    lightIntensity = clamp((lightIntensity - minIntensityThreshold) / max(EPS_COL, (maxIntensityThreshold - minIntensityThreshold)), 0.0, 1.0);\n    #ifdef RN_MTOON_DEBUG_LITSHADERATE\n      lightIntensities[i] = lightIntensity;\n    #endif\n\n    // Albedo color\n    vec3 col = mix(shadeColor, litColor, lightIntensity);\n\n    // Direct Light\n    vec3 lighting = lightColor;\n    lighting = mix(lighting, vec3(max(EPS_COL, max(lighting.x, max(lighting.y, lighting.z)))), lightColorAttenuation); // color atten\n\n\n    if(i > 0){\n      lighting *= 0.5; // darken if additional light.\n      lighting *= min(0.0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\n      // lighting *= shadowAttenuation; // darken if receiving shadow\n      #ifdef RN_ALPHABLEND_ON\n        lighting *= step(0.0, dotNL); // darken if transparent. Because Unity's transparent material can't receive shadowAttenuation.\n      #endif\n    }\n\n    col *= lighting;\n    lightings[i] = lighting;\n\n    rt0.xyz += col;\n\n    lightAttenuation = 1.0;\n  }\n\n\n  // Indirect Light\n  vec3 indirectLighting = get_ambientColor(materialSID, 0);\n  indirectLighting = srgbToLinear(indirectLighting);\n  indirectLighting = mix(indirectLighting, vec3(max(EPS_COL, max(indirectLighting.x, max(indirectLighting.y, indirectLighting.z)))), lightColorAttenuation); // color atten\n  // TODO: use ShadeIrad in www.ppsloan.org/publications/StupidSH36.pdf\n\n  rt0.xyz += indirectLighting * litColor;\n  rt0.xyz = min(rt0.xyz, litColor); // comment out if you want to PBR absolutely.\n\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_COLOR_MIXED\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\n      outlineColor = srgbToLinear(outlineColor);\n      float outlineLightingMix = get_outlineLightingMix(materialSID, 0);\n      rt0.xyz = outlineColor * mix(vec3(1.0), rt0.xyz, outlineLightingMix);\n    #endif\n  #else\n    vec3 viewDirection = normalize(viewVector);\n\n    float rimFresnelPower = get_rimFresnelPower(materialSID, 0);\n    float rimLift = get_rimLift(materialSID, 0);\n    vec3 rimColorFactor = get_rimColor(materialSID, 0);\n    vec3 rimTextureColor = texture(u_rimTexture, v_texcoord_0).xyz;\n    vec3 rimColor = srgbToLinear(rimColorFactor * rimTextureColor);\n    vec3 rim = pow(clamp(1.0 - dot(normal_inWorld, viewDirection) + rimLift, 0.0, 1.0), rimFresnelPower) * rimColor;\n\n    float staticRimLighting = 1.0;\n    float rimLightingMix = get_rimLightingMix(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) break;\n\n      if(i > 0) staticRimLighting = 0.0;\n\n      vec3 rimLighting = mix(vec3(staticRimLighting), lightings[i], vec3(rimLightingMix));\n      rt0.xyz += rim * rimLighting;\n    }\n\n    // additive matcap\n    vec3 cameraUp = get_cameraUp(0.0, 0); //solo datum\n    vec3 worldViewUp = normalize(cameraUp - viewDirection * dot(viewDirection, cameraUp));\n    vec3 worldViewRight = normalize(cross(viewDirection, worldViewUp));\n    vec2 matcapUv = vec2(dot(worldViewRight, normal_inWorld), dot(worldViewUp, normal_inWorld)) * 0.5 + 0.5;\n    vec3 matCapColor = srgbToLinear(texture(u_matCapTexture, matcapUv).xyz);\n    rt0.xyz += matCapColor;\n\n\n    // Emission\n    vec3 emissionColor = get_emissionColor(materialSID, 0);\n    vec3 emission = srgbToLinear(texture(u_emissionTexture, v_texcoord_0).xyz) * emissionColor;\n    rt0.xyz += emission;\n  #endif\n\n\n  // debug\n  #ifdef RN_MTOON_DEBUG_NORMAL\n    rt0 = vec4(normal_inWorld * 0.5 + 0.5, alpha);\n\n    rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  #elif defined(RN_MTOON_DEBUG_LITSHADERATE)\n    rt0 = vec4(0.0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) break;\n      rt0 += vec4(lightIntensities[i] * lightings[i], alpha);\n    }\n\n    rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  #endif\n\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.vert":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.vert ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\n// This shader is based on https://github.com/Santarh/MToon\n\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_baryCentricCoord;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec2 v_texcoord_0;\nout vec3 v_baryCentricCoord;\nout vec3 v_normal_inView;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\nin vec4 a_tangent;\nout vec3 v_tangent_inWorld;\nout vec3 v_binormal_inWorld; // bitangent_inWorld\n#endif\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_NONE\n      return;\n    #endif\n  #endif\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n\n  v_normal_inView = vec3(viewMatrix * vec4(v_normal_inWorld, 0.0));\n\n  #ifndef RN_MTOON_IS_OUTLINE\n    gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n  #else\n    #if defined(RN_MTOON_HAS_OUTLINE_WIDTH_TEXTURE)\n      float outlineTex = texture(u_outlineWidthTexture, a_texcoord_0).r;\n    #else\n      float outlineTex = 1.0;\n    #endif\n\n    #if defined(RN_MTOON_OUTLINE_WIDTH_WORLD)\n      float outlineWidth = get_outlineWidth(materialSID, 0);\n      vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * a_normal;\n      vec4 worldOutlineOffset = worldMatrix * vec4(outlineOffset, 0.0);\n      gl_Position = projectionMatrix * viewMatrix * (v_position_inWorld + worldOutlineOffset);\n\n    #elif defined(RN_MTOON_OUTLINE_WIDTH_SCREEN)\n      vec4 vertex = projectionMatrix * viewMatrix * v_position_inWorld;\n\n      vec3 clipNormal = (projectionMatrix * vec4(v_normal_inView, 1.0)).xyz;\n      vec2 projectedNormal = normalize(clipNormal.xy);\n      float outlineScaledMaxDistance = get_outlineScaledMaxDistance(materialSID, 0);\n      projectedNormal *= min(vertex.w, outlineScaledMaxDistance);\n      float aspect = abs(get_aspect(0.0, 0)); //solo datum\n      projectedNormal.x *= aspect;\n\n      float outlineWidth = get_outlineWidth(materialSID, 0);\n      vertex.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(v_normal_inView.z), 0.0, 1.0); // ignore offset when normal toward camera\n\n      gl_Position = vertex;\n    #else\n      gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n    #endif\n  #endif\n\n  #ifdef RN_USE_TANGENT_ATTRIBUTE\n    v_tangent_inWorld = normalMatrix * a_tangent.xyz;\n    v_binormal_inWorld = cross(v_normal_inWorld, v_tangent_inWorld) * a_tangent.w;\n  #endif\n\n  v_texcoord_0 = a_texcoord_0;\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.frag":
/*!********************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.frag ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec3 v_baryCentricCoord;\nin vec3 v_normal_inView;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  vec3 normal_inView = normalize(v_normal_inView);\n  normal_inView.y *= -1.0;\n  vec2 normalUVCordinate = normal_inView.xy * 0.5 + 0.5;\n  vec4 matCapColor = texture2D(u_matCapTexture, normalUVCordinate);\n  rt0 = matCapColor;\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.vert":
/*!********************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.vert ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin float a_instanceID;\nin vec3 a_baryCentricCoord;\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec3 v_baryCentricCoord;\nout vec3 v_normal_inView;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_normal_inView = vec3(viewMatrix * vec4(normalMatrix * a_normal, 0.0));\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_baryCentricCoord = a_baryCentricCoord;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.frag":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.frag ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n#define PI 3.141592\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec3 v_normal_inView;\nin vec3 v_tangent_inWorld;\nin vec3 v_binormal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord;\nin vec3 v_baryCentricCoord;\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n\nvec2 hash(ivec2 p) {\n    return fract(sin(vec2(p) * mat2(127.1, 311.7, 269.5, 183.3))*43758.5453123);\n}\n\n// Decorrelated color space vectors and origin\nvec3 returnToOriginalColorSpace(\n  vec3 color,\n  vec3 colorSpaceOrigin,\n  vec3 colorSpaceVector1,\n  vec3 colorSpaceVector2,\n  vec3 colorSpaceVector3)\n{\n  vec3 result =\n    colorSpaceOrigin +\n    colorSpaceVector1 * color.r +\n    colorSpaceVector2 * color.g +\n    colorSpaceVector3 * color.b;\n  return result;\n}\n\nvoid triangleGrid(\n  vec2 uv,\n  out float w1, out float w2, out float w3,\n  out ivec2 vertex1, out ivec2 vertex2, out ivec2 vertex3)\n{\n  // Scaling of the input\n  uv *= 3.464; // 2 * sqrt(3)\n\n  // Skew input space into simplex triangle grid\n  const mat2 gridToSkewedGrid = mat2(1.0, 0.0, -0.57735027, 1.15470054);\n  vec2 skewedCoord = gridToSkewedGrid * uv;\n\n  // Compute local triangle vertex IDs and local barycentric coordinates\n  ivec2 baseId = ivec2(floor(skewedCoord));\n  vec3 temp = vec3(fract(skewedCoord), 0);\n  temp.z = 1.0 - temp.x - temp.y;\n  if (temp.z > 0.0)\n  {\n    w1 = temp.z;\n    w2 = temp.y;\n    w3 = temp.x;\n    vertex1 = baseId;\n    vertex2 = baseId + ivec2(0, 1);\n    vertex3 = baseId + ivec2(1, 0);\n  }\n  else\n  {\n    w1 = -temp.z;\n    w2 = 1.0 - temp.y;\n    w3 = 1.0 - temp.x;\n    vertex1 = baseId + ivec2(1, 1);\n    vertex2 = baseId + ivec2(1, 0);\n    vertex3 = baseId + ivec2(0, 1);\n  }\n}\n\n// https://stackoverflow.com/questions/24388346/how-to-access-automatic-mipmap-level-in-glsl-fragment-shader-texture\nfloat mipmapLevel(in vec2 uv_as_texel)\n{\n  vec2  dx_vtc        = dFdx(uv_as_texel);\n  vec2  dy_vtc        = dFdy(uv_as_texel);\n  float delta_max_sqr = max(dot(dx_vtc, dx_vtc), dot(dy_vtc, dy_vtc));\n  float mml = 0.5 * log2(delta_max_sqr);\n  return max( 0.0, mml );\n}\n\n// By-Example procedural noise at uv\nvec3 byExampleProceduralNoise(highp sampler2D Tinput, highp sampler2D Tinv, vec2 uv,\n  vec3 colorSpaceOrigin,\n  vec3 colorSpaceVector1,\n  vec3 colorSpaceVector2,\n  vec3 colorSpaceVector3)\n{\n\t// Get triangle info\n\tfloat w1, w2, w3;\n\tivec2 vertex1, vertex2, vertex3;\n\ttriangleGrid(uv, w1, w2, w3, vertex1, vertex2, vertex3);\n\n\t// Assign random offset to each triangle vertex\n\tvec2 uv1 = uv + hash(vertex1);\n\tvec2 uv2 = uv + hash(vertex2);\n\tvec2 uv3 = uv + hash(vertex3);\n\n\t// Precompute UV derivatives\n\tvec2 duvdx = dFdx(uv);\n\tvec2 duvdy = dFdy(uv);\n\n\t// Fetch Gaussian input\n  // 'textureGrad' is webGL2 only\n\tvec3 G1 = textureGrad(Tinput, uv1, duvdx, duvdy).rgb;\n\tvec3 G2 = textureGrad(Tinput, uv2, duvdx, duvdy).rgb;\n\tvec3 G3 = textureGrad(Tinput, uv3, duvdx, duvdy).rgb;\n\n\t// Variance-preserving blending\n\tvec3 G = w1*G1 + w2*G2 + w3*G3;\n\tG = G - vec3(0.5);\n\tG = G * inversesqrt(w1*w1 + w2*w2 + w3*w3);\n\tG = G + vec3(0.5);\n\n\t// Compute LOD level to fetch the prefiltered look-up table invT\n\tfloat LOD = mipmapLevel(uv * vec2(textureSize(Tinput, 0))) / float(textureSize(Tinv, 0).y);\n\n\t// Fetch prefiltered LUT (T^{-1})\n\tvec3 color;\n\tcolor.r\t= texture(Tinv, vec2(G.r, LOD)).r;\n\tcolor.g\t= texture(Tinv, vec2(G.g, LOD)).g;\n\tcolor.b\t= texture(Tinv, vec2(G.b, LOD)).b;\n\n\t// Original color space\n\tvec3 outColor = returnToOriginalColorSpace(color,\n      colorSpaceOrigin,\n      colorSpaceVector1,\n      colorSpaceVector2,\n      colorSpaceVector3\n    );\n\n\treturn outColor;\n}\n\n\nvec4 texture2DSeamless(highp sampler2D Tinput, highp sampler2D Tinv, vec2 uv,\n  vec3 colorSpaceOrigin,\n  vec3 colorSpaceVector1,\n  vec3 colorSpaceVector2,\n  vec3 colorSpaceVector3,\n  vec4 scaleTranslate) {\n  vec4 color = vec4(byExampleProceduralNoise(Tinput, Tinv,\n      uv * scaleTranslate.xy + scaleTranslate.zw,\n      colorSpaceOrigin,\n      colorSpaceVector1,\n      colorSpaceVector2,\n      colorSpaceVector3\n    ),\n    1);\n  return color;\n}\n\n\n/* shaderity: @{getters} */\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nfloat angular_n_h(float NH) {\n  return acos(NH);\n}\n\nfloat sqr(float x) {\n  return x*x;\n}\n\nfloat d_phong(float NH, float c1) {\n  return pow(\n    cos(acos(NH))\n    , c1\n  );\n}\n\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 envBRDFApprox( float Roughness, float NoV ) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n  vec4 r = Roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n  return AB;\n}\n\n// GGX NDF\nfloat d_ggx(float NH, float alphaRoughness) {\n  float roughnessSqr = alphaRoughness * alphaRoughness;\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n  return roughnessSqr / (M_PI * f * f);\n}\n\nfloat d_torrance_reiz(float NH, float c3) {\n  float CosSquared = NH*NH;\n  float TanSquared = (1.0 - CosSquared)/CosSquared;\n  //return (1.0/M_PI) * sqr(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\n  return (1.0/sqrt(M_PI)) * (sqr(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\n}\n\nfloat d_beckmann(float NH, float m) {\n  float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\n  float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\n  return co * expx;\n}\n\n// the same as glTF WebGL sample\n// https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\n// That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\n// and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\n// https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\nfloat g_shielding(float NL, float NV, float alphaRoughness) {\n  float r = alphaRoughness;\n\n  // Local Shadowing using \"Schlick-Smith\" Masking Function\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n  // Local Masking using \"Schlick-Smith\" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localShadowing * localMasking;\n}\n\n// The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\n// The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\nfloat v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\n  float a2 = alphaRoughness * alphaRoughness;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n  return 0.5 / (GGXV + GGXL);\n}\n\nfloat v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\n  float a = alphaRoughness;\n  float GGXV = NL * (NV * (1.0 - a) + a);\n  float GGXL = NV * (NL * (1.0 - a) + a);\n  return 0.5 / (GGXV + GGXL);\n}\n\n// The Schlick Approximation to Fresnel\nvec3 fresnel(vec3 f0, float VH) {\n  return vec3(f0) + (vec3(1.0) - f0) * pow(1.0 - VH, 5.0);\n}\n\nvec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n  float D = d_ggx(NH, alphaRoughness);\n  float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\n  return vec3(D)*vec3(V)*F;\n//      float G = g_shielding(NL, NV, alphaRoughness);\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\n\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#diffuse-brdf\nvec3 diffuse_brdf(vec3 albedo)\n{\n  // (1/pi) * diffuseAlbedo\n  return albedo / M_PI;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#specular-brdf\nfloat specular_brdf(float alphaRoughness, float NdotL, float NdotV, float NdotH) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotH, alphaRoughness);\n  return V * D;\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_transmission#implementation-notes\nfloat specular_btdf(float alphaRoughness, float NdotL, float NdotV, float NdotHt) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotHt, alphaRoughness);\n  return V * D;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 conductor_fresnel(vec3 f0, float brdf, float alphaRoughness, float VdotH) {\n  return vec3(brdf) * (f0.rgb + (vec3(1.0) - f0.rgb) * vec3(pow(1.0 - abs(VdotH), 5.0)));\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 fresnel_mix(float ior, vec3 base, vec3 layer, float VdotH) {\n  float f0 = pow((1.0 - ior)/(1.0 + ior), 2.0);\n  float fr = f0 + (1.0 - f0) * pow(1.0 - abs(VdotH), 5.0);\n  return mix(base, layer, fr);\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 metal_brdf(float perceptualRoughness, vec3 baseColor, float NdotL, float NdotV, float NdotH, float VdotH) {\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  return conductor_fresnel(\n    baseColor,\n    specular_brdf(alphaRoughness, NdotL, NdotV, NdotH),\n    alphaRoughness,\n    VdotH\n  );\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 dielectric_brdf(float ior, vec3 baseColor, float perceptualRoughness, float NdotL, float NdotV, float NdotH, float VdotH) {\n  vec3 base = diffuse_brdf(baseColor);\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  vec3 layer = vec3(specular_brdf(alphaRoughness, NdotL, NdotV, NdotH));\n  return fresnel_mix(ior, base, layer, VdotH);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\nvec3 coated_material_s(vec3 base, float perceptualRoughness, float clearcoatRoughness, float clearcoat, float VdotNc, float LdotNc, float NdotHc) {\n  float clearcoatFresnel = 0.04 + (1.0 - 0.04) * pow(1.0 - abs(VdotNc), 5.0);\n  float clearcoatAlpha = clearcoatRoughness * clearcoatRoughness;\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  float D = d_ggx(NdotHc, clearcoatAlpha);\n  float V = v_SmithGGXCorrelated(LdotNc, VdotNc, clearcoatAlpha);\n  float f_clearcoat = clearcoatFresnel * D * V;\n\n  // base = (f_diffuse + f_specular) in https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\n  return base * vec3(1.0 - clearcoat * clearcoatFresnel) + vec3(f_clearcoat * clearcoat);\n}\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nfloat srgbToLinear(float value) {\n  return pow(value, 2.2);\n}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nfloat linearToSrgb(float value) {\n  return pow(value, 1.0/2.2);\n}\n\n// Roughness Dependent Fresnel\n// https://www.jcgt.org/published/0008/01/03/paper.pdf\nvec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\n{\n  return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n}\n\nvec3 normalBlendingUDN(sampler2D baseMap, sampler2D detailMap, vec2 baseUv, vec2 detailUv) {\n  vec3 t = texture2D(baseMap,   baseUv).xyz * 2.0 - 1.0;\n  vec3 u = texture2D(detailMap, detailUv).xyz * 2.0 - 1.0;\n  vec3 r = normalize(vec3(t.xy + u.xy, t.z));\n  return r;\n}\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n// https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_volume/README.md#attenuation\nvec3 volumeAttenuation(vec3 attenuationColor, float attenuationDistance, vec3 intensity, float transmissionDistance)\n{\n  if (attenuationDistance == 0.0) { // means Infinite distance\n    return intensity; // No attenuation\n  } else {\n    vec3 attenuationCo = -log(attenuationColor) / attenuationDistance;\n    vec3 attenuatedTransmittance = exp(-attenuationCo * transmissionDistance);\n    return intensity * attenuatedTransmittance;\n  }\n}\n\nfloat d_Charlie(float alphaRoughness, float NoH) {\n  // Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n  float invAlpha  = 1.0 / alphaRoughness;\n  float cos2h = NoH * NoH;\n  float sin2h = 1.0 - cos2h;\n  return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen#sheen-visibility\nfloat sheenSimpleVisibility(float NdotL, float NdotV) {\n  return 1.0 / (4.0 * (NdotL + NdotV - NdotL * NdotV));\n}\n\n\n\nfloat d_Charlie(float alphaRoughness, float NoH) {\n  // Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n  float invAlpha  = 1.0 / alphaRoughness;\n  float cos2h = NoH * NoH;\n  float sin2h = max(1.0 - cos2h, 0.0078125);\n  return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://google.github.io/filament/Filament.html#materialsystem/anisotropicmodel/anisotropicspecularbrdf\nfloat d_GGX_Anisotropic(float NoH, const vec3 h, const vec3 t, const vec3 b, float at, float ab) {\n  float ToH = dot(t, h);\n  float BoH = dot(b, h);\n  float a2 = at * ab;\n  highp vec3 v = vec3(ab * ToH, at * BoH, a2 * NoH);\n  highp float v2 = dot(v, v);\n  float w2 = a2 / v2;\n  return a2 * w2 * w2 * (1.0 / PI);\n}\n\nfloat v_SmithGGXCorrelated_Anisotropic(float ToV, float BoV, float ToL, float BoL, float NoV, float NoL, float at, float ab) {\n  float lambdaV = NoL * length(vec3(at * ToV, ab * BoV, NoV));\n  float lambdaL = NoV * length(vec3(at * ToL, ab * BoL, NoL));\n  float v = 0.5 / (lambdaV + lambdaL);\n  return v;\n}\n\nfloat v_Neubelt(float NoV, float NoL) {\n  // Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n  return 1.0 / (4.0 * (NoL + NoV - NoL * NoV));\n}\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvec3 baseSpecularLayer(float NH, float NL, float NV, vec3 F, vec3 l, vec3 h, vec3 v, const vec3 t, const vec3 b, float alphaRoughness, float anisotropy) {\n  float at = max(alphaRoughness * (1.0 + anisotropy), 0.001);\n  float ab = max(alphaRoughness * (1.0 - anisotropy), 0.001);\n\n  float D = d_GGX_Anisotropic(NH, h, t, b, at, ab);\n  float V = v_SmithGGXCorrelated_Anisotropic(dot(t,v), dot(b,v), dot(t,l), dot(b,l), NV, NL, at, ab);\n  return vec3(D) * vec3(V) * F;\n}\n\nvec3 clearcoatLayer(float NH, float NL, float NV, vec3 F, vec3 l, vec3 h, vec3 v, const vec3 t, const vec3 b, float alphaRoughness, float anisotropy) {\n  float at = max(alphaRoughness * (1.0 + anisotropy), 0.001);\n  float ab = max(alphaRoughness * (1.0 - anisotropy), 0.001);\n\n  float D = d_GGX_Anisotropic(NH, h, t, b, at, ab);\n  float V = v_SmithGGXCorrelated_Anisotropic(dot(t,v), dot(b,v), dot(t,l), dot(b,l), NV, NL, at, ab);\n  return vec3(D) * vec3(V) * F;\n}\n\nvec3 sheenLayer(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n  float D = d_Charlie(alphaRoughness, NH);\n  float V = v_Neubelt(NV, NL);\n\n  vec3 specular = vec3(D) * vec3(V) * F;\n  return specular;\n}\n\nvec3 baseSpecularLayerWithoutD(float NH, float NL, float NV, vec3 F, vec3 l, vec3 h, vec3 v, const vec3 t, const vec3 b, float alphaRoughness, float anisotropy) {\n  float at = max(alphaRoughness * (1.0 + anisotropy), 0.001);\n  float ab = max(alphaRoughness * (1.0 - anisotropy), 0.001);\n\n  float V = v_SmithGGXCorrelated_Anisotropic(dot(t,v), dot(b,v), dot(t,l), dot(b,l), NV, NL, at, ab);\n  return vec3(V) * F;\n}\n\nvec3 clearcoatLayerWithoutD(float NH, float NL, float NV, vec3 F, vec3 l, vec3 h, vec3 v, const vec3 t, const vec3 b, float alphaRoughness, float anisotropy) {\n  float at = max(alphaRoughness * (1.0 + anisotropy), 0.001);\n  float ab = max(alphaRoughness * (1.0 - anisotropy), 0.001);\n\n  float V = v_SmithGGXCorrelated_Anisotropic(dot(t,v), dot(b,v), dot(t,l), dot(b,l), NV, NL, at, ab);\n  return vec3(V) * F;\n}\n\nvec3 sheenLayerWithoutD(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n  float V = v_Neubelt(NV, NL);\n\n  vec3 specular = vec3(V) * F;\n  return specular;\n}\n\nvec3 surfaceShading(float materialSID, float NH, float NL, float NV, float VH, vec3 F0, vec3 lightDirection, vec3 halfVector, vec3 viewDirection, const vec3 t, const vec3 b, vec3 albedo, vec3 incidentLight,\n  float alphaRoughness, float clearcoatRoughness, float clearcoatFactor, float baseAnisotropy, float clearcoatAnisotropy) {\n\n  // Fresnel\n  vec3 F_diffuse = fresnel(F0, NL);\n  vec3 F_specular = fresnel(F0, VH);\n  vec3 F_clearcoat = fresnel(vec3(0.04), VH) * clearcoatFactor;\n  vec3 sheenColor = get_sheenParameter(materialSID, 0);\n  vec3 F_sheen = sheenColor;\n\n  // Diffuse\n  vec3 diffuseContrib = (vec3(1.0) - F_diffuse) * diffuse_brdf(albedo);\n\n  float clearcoatAlphaRoughness = clearcoatRoughness * clearcoatRoughness;\n  vec3 baseSpecularContrib = baseSpecularLayer(NH, NL, NV, F_specular, lightDirection, halfVector, viewDirection, t, b, alphaRoughness, baseAnisotropy);\n  vec3 clearcoatContrib = clearcoatLayer(NH, NL, NV, F_clearcoat, lightDirection, halfVector, viewDirection, t, b, clearcoatAlphaRoughness, clearcoatAnisotropy);\n  vec3 sheenContrib = sheenLayer(NH, NL, NV, F_sheen, alphaRoughness);\n\n  vec3 diffuseAndBaseSpecular = diffuseContrib + baseSpecularContrib;\n  vec3 diffuse_baseSpecular_clearcoat = diffuseAndBaseSpecular * (1.0 - F_clearcoat) + clearcoatContrib;\n  vec3 diffuse_baseSpecular_clearcoat_sheen = diffuse_baseSpecular_clearcoat * (1.0 - F_sheen) + sheenContrib;\n  vec3 totalContrib = diffuse_baseSpecular_clearcoat_sheen * vec3(NL) * incidentLight.rgb;\n\n  return totalContrib;\n  // return baseSpecularContrib * vec3(NL) * incidentLight.rgb;\n}\n\nvec3 surfaceShadingIBL(float NH, float NL, float NV, float VH, vec3 F0, vec3 lightDirection, vec3 halfVector, vec3 viewDirection, const vec3 t, const vec3 b, vec3 albedo, vec3 diffuseLight, vec3 specularLight,\n  float alphaRoughness, float clearcoatRoughness, float clearcoatFactor, float baseAnisotropy, float clearcoatAnisotropy) {\n\n  // Fresnel\n  vec3 F_diffuse = fresnel(F0, NL);\n  vec3 F_specular = fresnel(F0, VH);\n  vec3 F_clearcoat = fresnel(vec3(0.04), VH) * clearcoatFactor;\n  vec3 F_sheen = vec3(0.04);\n\n  // Diffuse\n  // vec3 diffuseContrib = (vec3(1.0) - F_diffuse) * diffuse_brdf(albedo);\n  vec3 diffuseContrib = diffuse_brdf(albedo);\n\n  float clearcoatAlphaRoughness = clearcoatRoughness * clearcoatRoughness;\n  vec3 baseSpecularContrib = baseSpecularLayer(NH, NL, NV, F_specular, lightDirection, halfVector, viewDirection, t, b, alphaRoughness, baseAnisotropy);\n  vec3 clearcoatContrib = clearcoatLayer(NH, NL, NV, F_clearcoat, lightDirection, halfVector, viewDirection, t, b, clearcoatAlphaRoughness, clearcoatAnisotropy);\n  vec3 sheenContrib = sheenLayer(NH, NL, NV, F_sheen, alphaRoughness);\n\n  vec3 diffuse = diffuseContrib * diffuseLight; // Note that NoL is 1.0 because light direction is geometry normal in diffuse IBL\n  vec3 specularLightCos = specularLight;\n  vec3 baseSpecular = baseSpecularContrib * specularLightCos;\n  vec3 clearcoat = clearcoatContrib * specularLightCos;\n  vec3 sheen = sheenContrib * specularLightCos;\n\n  // vec3 diffuseAndBaseSpecular = diffuse + baseSpecular;\n  vec3 diffuse_baseSpecular_clearcoat = (diffuse + baseSpecular * (1.0 - F_clearcoat)) * (1.0 - F_clearcoat) + clearcoat;\n  vec3 diffuse_baseSpecular_clearcoat_sheen = diffuse_baseSpecular_clearcoat * (1.0) + sheen;\n  vec3 totalContrib = diffuse_baseSpecular_clearcoat_sheen;\n\n  return totalContrib;\n  // return baseSpecular;\n}\n\nvec3 getReflectedVector(const vec3 v, const vec3 n, float anisotropy, vec3 t, vec3 b, float userRoughness) {\n  vec3  anisotropyDirection = anisotropy >= 0.0 ? b : t;\n  vec3  anisotropyDirectionPerp = anisotropy <= 0.0 ? b : t;\n  vec3  anisotropicTangent  = cross(anisotropyDirection, v);\n  vec3  anisotropicTangentPerp  = cross(anisotropyDirectionPerp, v);\n  vec3  anisotropicNormal   = cross(anisotropicTangent, anisotropyDirection);\n  vec3  anisotropicNormalPerp   = cross(anisotropicTangentPerp, anisotropyDirectionPerp);\n  float bendFactor          = abs(anisotropy) * clamp(5.0 * userRoughness, 0.0, 1.0);\n  vec3  bentNormal          = normalize(mix(n, anisotropicNormal, bendFactor));\n  bentNormal          = normalize(mix(bentNormal, anisotropicNormalPerp, -bendFactor));\n\n  vec3 r = reflect(-v, bentNormal);\n\n  return r;\n}\n\n/*\nvec3 IBLContribution2(vec3 n, vec3 reflection, float NV, vec3 F0, vec3 viewDirection, const vec3 t, const vec3 b, vec3 albedo,\n  float userRoughness, float alphaRoughness, float clearcoatRoughness, float clearcoatFactor, float baseAnisotropy, float clearcoatAnisotropy)\n{\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  float mipCount = iblParameter.x;\n  float lod = userRoughness * (mipCount - 1.0);\n\n  vec3 brdf = texture2D(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\n  vec4 diffuseTexel = textureCube(u_diffuseEnvTexture, n);\n  vec3 diffuseLight;\n\n  ivec2 hdriFormat = get_hdriFormat(materialSID, 0);\n\n  if (hdriFormat.x == 0) { // LDR_SRGB\n    diffuseLight = srgbToLinear(diffuseTexel.rgb);\n  } else if (hdriFormat.x == 3) { // RGBE\n    diffuseLight = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  } else {\n    diffuseLight = diffuseTexel.rgb;\n  }\n\n  vec3 specularLightDir = mix(reflection, n, lod/(mipCount - 1.0));\nreflection.x *= -1.0;\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n  vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, reflection, lod);\n#elif defined(GLSL_ES3)\n  vec4 specularTexel = textureLod(u_specularEnvTexture, reflection, lod);\n#else\n  vec4 specularTexel = textureCube(u_specularEnvTexture, reflection);\n#endif\n\n\n  vec3 specularLight;\n  if (hdriFormat.y == 0) { // LDR_SRGB\n    specularLight = srgbToLinear(specularTexel.rgb);\n  } else if (hdriFormat.y == 3) { // RGBE\n    specularLight = specularTexel.rgb * pow(2.0, specularTexel.a*255.0-128.0);\n  } else {\n    specularLight = specularTexel.rgb;\n  }\n\n  vec3 halfVector = normalize(specularLightDir + viewDirection);\n//  float LH = clamp(dot(specularLightDir, halfVector), 0.0, 1.0);\n  float NL = clamp(dot(n, specularLightDir), 0.0, 1.0);\n  float NH = clamp(dot(n, halfVector), 0.0, 1.0);\n  float VH = clamp(dot(viewDirection, halfVector), 0.0, 1.0);\n\n  vec3 totalContrib = surfaceShadingIBL(NH, NL, NV, VH, F0, specularLightDir, halfVector, viewDirection, t, b, albedo, diffuseLight, specularLight,\n    alphaRoughness, clearcoatRoughness, clearcoatFactor, baseAnisotropy, clearcoatAnisotropy);\n\n  return totalContrib;\n}\n*/\n\nvec3 prefilteredRadiance(float materialSID, vec3 v, vec3 n, float NV, float anisotropy, vec3 t, vec3 b, float userRoughness, vec3 F0) {\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  float mipCount = iblParameter.x;\n  float lod = (userRoughness * mipCount);\n\n  vec3 reflectedVecAnisotropy = getReflectedVector(v, n, anisotropy, t, b, userRoughness);\n  vec3 specularLightDir = mix(reflectedVecAnisotropy, n, lod/(mipCount - 1.0));\n\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n  vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, specularLightDir, lod);\n#elif defined(GLSL_ES3)\n  vec4 specularTexel = textureLod(u_specularEnvTexture, specularLightDir, lod);\n#else\n  float specularCubeSize = pow(2.0, mipCount - 1.0);\n  float emulatedLod = mipmapLevel((specularLightDir) * specularCubeSize);\n  vec4 specularTexel = textureCube(u_specularEnvTexture, specularLightDir, lod - emulatedLod);\n#endif\n\n  vec3 specularLight;\n  ivec2 hdriFormat = get_hdriFormat(materialSID, 0);\n  if (hdriFormat.y == 0) { // LDR_SRGB\n    specularLight = srgbToLinear(specularTexel.rgb);\n  } else if (hdriFormat.y == 3) { // RGBE\n    specularLight = specularTexel.rgb * pow(2.0, specularTexel.a*255.0-128.0);\n  } else {\n    specularLight = specularTexel.rgb;\n  }\n\n\n  return specularLight;\n}\n\nvec3 IBLContribution(float materialSID, vec3 n, vec3 v, float NV, vec3 reflection, vec3 albedo, vec3 F0, float userRoughness, float clearcoatFactor, float clearcoatRoughness, float baseAnisotropy, float clearcoatAnisotropy, vec3 t, vec3 b)\n{\n  vec4 diffuseTexel = textureCube(u_diffuseEnvTexture, n);\n  vec3 diffuseLight;\n  ivec2 hdriFormat = get_hdriFormat(materialSID, 0);\n  if (hdriFormat.x == 0) { // LDR_SRGB\n    diffuseLight = srgbToLinear(diffuseTexel.rgb);\n  } else if (hdriFormat.x == 3) { // RGBE\n    diffuseLight = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  } else {\n    diffuseLight = diffuseTexel.rgb;\n  }\n\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  vec3 diffuse = diffuseLight * albedo * iblParameter.y;\n\n  vec3 specularLight = prefilteredRadiance(materialSID, v, n, NV, baseAnisotropy, t, b, userRoughness, F0) * iblParameter.z;\n  // vec3 brdf = texture2D(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\n  // vec3 baseSpecular = specularLight * (F0 * brdf.x + brdf.y);\n  vec2 f_ab = envBRDFApprox(userRoughness, NV);\n  vec3 baseSpecular = specularLight * (F0 * f_ab.x + f_ab.y);\n  vec3 clearcoatSpecular = prefilteredRadiance(materialSID, v, n, NV, clearcoatAnisotropy, t, b, clearcoatRoughness, vec3(0.04));\n  // vec3 sheenSpecular = specularLight * (F0 * brdf.z);\n  vec3 sheenSpecular = specularLight * (F0 * 1.0);\n\n  vec3 sheenParameter = get_sheenParameter(materialSID, 0);\n  vec3 sheenColor = sheenParameter;\n  vec3 Fs = sheenColor;\n  vec3 Fc = fresnel(vec3(0.04), NV) * clearcoatFactor;\n  vec3 Fb = fresnel(F0, NV);\n  vec3 attenuationC = 1.0 - Fc;\n  vec3 attenuationB = 1.0 - Fb;\n\n  return ((diffuse + baseSpecular * attenuationC) * attenuationC + clearcoatSpecular * Fc) *\n    vec3(1.0) + sheenSpecular * Fs;\n\n}\n\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  float rot = iblParameter.w + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n\n  vec3 tangent_inWorld = vec3(0.0);\n  vec3 binormal_inWorld = vec3(0.0);\n  vec4 normalTextureTransform = get_normalTextureTransform(materialSID, 0);\n  float normalTextureRotation = get_normalTextureRotation(materialSID, 0);\n  vec2 baseUv = uvTransform(normalTextureTransform.xy, normalTextureTransform.zw, normalTextureRotation, v_texcoord);\n  vec4 detailNormalTextureTransform = get_detailNormalTextureTransform(materialSID, 0);\n  float detailNormalTextureRotation = get_detailNormalTextureRotation(materialSID, 0);\n  vec2 detailUv = uvTransform(detailNormalTextureTransform.xy, detailNormalTextureTransform.zw, detailNormalTextureRotation, v_texcoord);\n  if (abs(length(v_tangent_inWorld)) > 0.01) {\n    vec3 normal = normalBlendingUDN(u_normalTexture, u_detailNormalTexture, baseUv, detailUv);\n    // vec3 normal = texture2D(u_normalTexture, baseUv).xyz * 2.0 - 1.0;\n    tangent_inWorld = normalize(v_tangent_inWorld);\n    binormal_inWorld = normalize(v_binormal_inWorld);\n    normal_inWorld = normalize(v_normal_inWorld);\n\n    mat3 tbnMat_tangent_to_world = mat3(\n      tangent_inWorld.x, tangent_inWorld.y, tangent_inWorld.z,\n      binormal_inWorld.x, binormal_inWorld.y, binormal_inWorld.z,\n      normal_inWorld.x, normal_inWorld.y, normal_inWorld.z\n    );\n\n    normal = normalize(tbnMat_tangent_to_world * normal);\n    normal_inWorld = normal;\n  }\n  vec3 normal_forEnv = rotEnvMatrix * normal_inWorld;\n  normal_forEnv.x *= -1.0;\n  vec3 tangent_forEnv = rotEnvMatrix * tangent_inWorld;\n  tangent_forEnv.x *= -1.0;\n  vec3 binormal_forEnv = rotEnvMatrix * binormal_inWorld;\n  binormal_forEnv.x *= -1.0;\n  if (v_normal_inView.z < 0.0) {\n    normal_forEnv = -normal_forEnv;\n    tangent_forEnv = -tangent_forEnv;\n    binormal_forEnv = -binormal_forEnv;\n  }\n\n  // BaseColorFactor\n  vec3 baseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != baseColor && diffuseColorFactor.rgb != baseColor) {\n    baseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == baseColor) {\n    baseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == baseColor) {\n    baseColor = v_color;\n  } else {\n    baseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n\n  // Diffuse Color (take account for BaseColorTexture)\n  vec2 baseTexUv = uvTransform(u_diffuseTextureTransform.xy, u_diffuseTextureTransform.zw, u_diffuseTextureRotation, v_texcoord);\n  vec2 detailTexUv = uvTransform(u_detailColorTextureTransform.xy, u_detailColorTextureTransform.zw, u_detailColorTextureRotation, v_texcoord);\n  vec4 textureColor = texture2D(u_diffuseColorTexture, baseTexUv);\n  textureColor.rgb = pow(textureColor.rgb, vec3(2.2));\n  vec4 baseDiffuseColor = textureColor;\n  vec4 detailColor = texture2D(u_detailColorTexture, detailTexUv);\n  detailColor.rgb = pow(detailColor.rgb, vec3(2.2));\n  textureColor.xyz += clamp(detailColor.xyz - vec3(0.5, 0.5, 0.5), vec3(-0.5), vec3(0.5));\n  baseColor *= textureColor.rgb;\n  alpha *= textureColor.a;\n\n  if (alpha < 0.01) {\n    discard;\n  }\n\n  // Specular & Glossiness\n  vec4 specularGlossinessFactor = get_specularGlossinessFactor(materialSID, 0);\n  float userGlossiness = specularGlossinessFactor.a;\n  vec3 specular = specularGlossinessFactor.rgb;\n\n  vec4 specularGlossiness = texture2D(u_specularGlossinessTexture, v_texcoord);\n  specularGlossiness = pow(specularGlossiness, vec4(2.2)); // sRGB to Linear\n  userGlossiness = specularGlossiness.a * userGlossiness;\n  specular = specularGlossiness.rgb * specular;\n\n  float userRoughness = max(1.0 - userGlossiness, 0.04);\n  float alphaRoughness = userRoughness * userRoughness;\n  alphaRoughness = max(alphaRoughness, 0.0078125);\n\n  // F0\n  vec3 F0 = specular;\n\n  // Albedo\n  vec3 albedo = baseColor;\n\n  // Anisotropy\n  vec2 anisotropy = get_anisotropy(materialSID, 0);\n  float baseAnisotropy = anisotropy.x;\n  float clearcoatAnisotropy = anisotropy.y;\n\n  // ViewDirection\n  vec3 viewPosition = get_viewPosition(materialSID, 0);\n  vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n  vec3 env_viewDirection = rotEnvMatrix * normalize(viewPosition - v_position_inWorld.xyz);\n  env_viewDirection.x *= -1.0;\n\n  // NV\n  float NV = clamp(dot(normal_inWorld, viewDirection), 0.0078125, 1.0);\n\n  rt0 = vec4(0.0, 0.0, 0.0, alpha);\n\n  vec2 clearcoatParameter = get_clearcoatParameter(materialSID, 0);\n  float clearcoatFactor = clearcoatParameter.x;\n  float clearcoatRoughness = max(1.0 - clearcoatParameter.y, 0.04);\n\n\n  // Lighting\n  if (length(normal_inWorld) > 0.02) {\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      // Light\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\n      vec3 lightDirection = gotLightDirection.xyz;\n      vec3 lightIntensity = gotLightIntensity.xyz;\n      vec3 lightPosition = gotLightPosition.xyz;\n      float lightType = gotLightPosition.w;\n      float spotCosCutoff = gotLightDirection.w;\n      float spotExponent = gotLightIntensity.w;\n\n      if (0.75 < lightType) { // is pointlight or spotlight\n        lightDirection = normalize(lightPosition - v_position_inWorld.xyz);\n      }\n      float spotEffect = 1.0;\n      if (lightType > 1.75) { // is spotlight\n        spotEffect = dot(lightDirection, lightDirection);\n        if (spotEffect > spotCosCutoff) {\n          spotEffect = pow(spotEffect, spotExponent);\n        } else {\n          spotEffect = 0.0;\n        }\n      }\n\n      // IncidentLight\n      vec3 incidentLight = spotEffect * lightIntensity.xyz;\n      incidentLight *= M_PI;\n\n      vec3 halfVector = normalize(lightDirection + viewDirection);\n      float LH = clamp(dot(lightDirection, halfVector), 0.0, 1.0);\n\n      // Specular\n      float NL = clamp(dot(normal_inWorld, lightDirection), 0.0078125, 1.0);\n      float NH = clamp(dot(normal_inWorld, halfVector), 0.0, 1.0);\n      float VH = clamp(dot(viewDirection, halfVector), 0.0, 1.0);\n\n      vec3 totalContrib = surfaceShading(materialSID, NH, NL, NV, VH, F0, lightDirection, halfVector, viewDirection, tangent_inWorld, binormal_inWorld, albedo, incidentLight,\n        alphaRoughness, clearcoatRoughness, clearcoatFactor, baseAnisotropy, clearcoatAnisotropy);\n\n      rt0.xyz += totalContrib;\n//      rt0.xyz += specularContrib * vec3(NL) * incidentLight.rgb;\n  //    rt0.xyz += diffuseContrib * vec3(NL) * incidentLight.rgb;\n  //    rt0.xyz += (vec3(1.0) - F) * diffuse_brdf(albedo);//diffuseContrib;//vec3(NL) * incidentLight.rgb;\n    }\n\n    vec3 reflection = reflect(-env_viewDirection, normal_forEnv);\n\n    vec3 ibl = IBLContribution(materialSID, normal_forEnv, env_viewDirection, NV, reflection, albedo, F0, userRoughness, clearcoatFactor, clearcoatRoughness, baseAnisotropy, clearcoatAnisotropy, tangent_forEnv, binormal_forEnv);\n    // vec3 ibl = IBLContribution2(normal_forEnv, reflection, NV, F0, viewDirection, tangent_inWorld, binormal_inWorld, albedo,\n      // userRoughness, alphaRoughness, clearcoatRoughness, clearcoatFactor, baseAnisotropy, clearcoatAnisotropy);\n\n    // float occlusion = texture2D(u_occlusionTexture, v_texcoord).a;\n\n    // Occlution to Indirect Lights\n    rt0.xyz += ibl;\n    // rt0.xyz += ibl * occlusion;\n\n  } else {\n    rt0 = vec4(baseColor, alpha);\n  }\n\n  // Emissive\n  // vec3 emissive = srgbToLinear(texture2D(u_emissiveTexture, v_texcoord).xyz);\n  // rt0.xyz += emissive;\n\n/*\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n  */\n\n  rt0.rgb *= alpha;\n  rt0.a = alpha;\n  int debugDisplay = get_debugDisplay(materialSID, 0);\n  if (debugDisplay == 1) {\n    rt0.rgb = baseDiffuseColor.rgb;\n    rt0.a = 1.0;\n  } else if (debugDisplay == 2) {\n    rt0.rgb = detailColor.rgb;\n    rt0.a = 1.0;\n  } else if (debugDisplay == 3) {\n    rt0.rgb = texture2D(u_normalTexture, baseUv).xyz * 2.0 - 1.0;\n    rt0.a = 1.0;\n  } else if (debugDisplay == 4) {\n    rt0.rgb = texture2D(u_detailNormalTexture, detailUv).xyz * 2.0 - 1.0;\n    rt0.a = 1.0;\n  } else if (debugDisplay == 5) {\n    rt0.rgb = specularGlossiness.rgb;\n    rt0.a = 1.0;\n  } else if (debugDisplay == 6) {\n    rt0.rgb = vec3(specularGlossiness.w);\n    rt0.a = 1.0;\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.vert":
/*!******************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.vert ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_tangent;\nin float a_instanceID;\nin vec2 a_texcoord;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec3 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec3 v_tangent_inWorld;\nout vec3 v_binormal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord;\nout vec3 v_baryCentricCoord;\nout vec3 v_normal_inView;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  v_color = a_color;\n\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_texcoord = a_texcoord;\n\n  if (abs(length(a_normal)) > 0.01) {\n    // if normal exist\n    vec3 tangent_inWorld = normalMatrix * a_tangent.xyz;\n    v_binormal_inWorld = cross(v_normal_inWorld, tangent_inWorld) * a_tangent.w;\n    v_tangent_inWorld = cross(v_binormal_inWorld, v_normal_inWorld);\n  }\n  v_baryCentricCoord = a_baryCentricCoord;\n\n\n//  v_color = vec3(u_boneMatrices[int(a_joint.x)][1].xyz);\n\n  mat3 viewMat = mat3(viewMatrix);\n  vec3 result = viewMat * v_normal_inWorld;\n  v_normal_inView = result.rgb;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag":
/*!**************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec2 v_texcoord_1;\nin vec3 v_baryCentricCoord;\nin float v_instanceID;\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec3 v_tangent_inWorld;\n  in vec3 v_binormal_inWorld;\n#endif\n\nuniform vec4 u_baseColorFactor; // initialValue=(1,1,1,1)\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform vec2 u_metallicRoughnessFactor; // initialValue=(1,1)\nuniform sampler2D u_metallicRoughnessTexture; // initialValue=(1,white)\nuniform sampler2D u_occlusionTexture; // initialValue=(3,white)\nuniform sampler2D u_emissiveTexture; // initialValue=(4,black)\nuniform vec3 u_wireframe; // initialValue=(0,0,1)\nuniform bool u_isOutputHDR; // initialValue=0\nuniform bool u_makeOutputSrgb; // initialValue=1\nuniform vec4 u_iblParameter; // initialValue=(1,1,1,1), isCustomSetting=true\nuniform ivec2 u_hdriFormat; // initialValue=(0,0), isCustomSetting=true\nuniform samplerCube u_diffuseEnvTexture; // initialValue=(5,white), isCustomSetting=true\nuniform samplerCube u_specularEnvTexture; // initialValue=(6,white), isCustomSetting=true\nuniform vec4 u_baseColorTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_baseColorTextureRotation; // initialValue=0\nuniform vec4 u_metallicRoughnessTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_metallicRoughnessTextureRotation; // initialValue=0\nuniform int u_baseColorTexcoordIndex; // initialValue=0\nuniform int u_metallicRoughnessTexcoordIndex; // initialValue=0\nuniform int u_occlusionTexcoordIndex; // initialValue=0\nuniform int u_emissiveTexcoordIndex; // initialValue=0\nuniform float u_occlusionStrength; // initialValue=1\nuniform bool u_inverseEnvironment; // initialValue=true\n\n#ifdef RN_USE_CLEARCOAT\n  uniform float u_clearCoatFactor; // initialValue=0\n  uniform sampler2D u_clearCoatTexture; // initialValue=(8,white)\n  uniform float u_clearCoatRoughnessFactor; // initialValue=0\n  uniform sampler2D u_clearCoatRoughnessTexture; // initialValue=(9,white)\n  uniform sampler2D u_clearCoatNormalTexture; // initialValue=(10,blue)\n#endif\n\n#ifdef RN_USE_NORMAL_TEXTURE\n  uniform sampler2D u_normalTexture; // initialValue=(2,black)\n  uniform vec4 u_normalTextureTransform; // initialValue=(1,1,0,0)\n  uniform float u_normalTextureRotation; // initialValue=(0)\n  uniform int u_normalTexcoordIndex; // initialValue=(0)\n  uniform float u_normalScale; // initialValue=(1)\n#endif\n\n#ifdef RN_USE_TRANSMISSION\n  uniform float u_transmissionFactor; // initialValue=(0)\n  uniform sampler2D u_transmissionTexture; // initialValue=(11,white)\n  uniform sampler2D u_backBufferTexture; // initialValue=(12,black)\n#endif\n\n#ifdef RN_USE_VOLUME\n  uniform float u_thicknessFactor; // initialValue=(0)\n  uniform sampler2D u_thicknessTexture; // initialValue=(13,white)\n  uniform float u_attenuationDistance; // initialValue=(0.000001)\n  uniform vec3 u_attenuationColor; // initialValue=(1,1,1)\n#endif\n\nuniform float u_alphaCutoff; // initialValue=(0.01)\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nfloat angular_n_h(float NH) {\n  return acos(NH);\n}\n\nfloat sqr(float x) {\n  return x*x;\n}\n\nfloat d_phong(float NH, float c1) {\n  return pow(\n    cos(acos(NH))\n    , c1\n  );\n}\n\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 envBRDFApprox( float Roughness, float NoV ) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n  vec4 r = Roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n  return AB;\n}\n\n// GGX NDF\nfloat d_ggx(float NH, float alphaRoughness) {\n  float roughnessSqr = alphaRoughness * alphaRoughness;\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n  return roughnessSqr / (M_PI * f * f);\n}\n\nfloat d_torrance_reiz(float NH, float c3) {\n  float CosSquared = NH*NH;\n  float TanSquared = (1.0 - CosSquared)/CosSquared;\n  //return (1.0/M_PI) * sqr(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\n  return (1.0/sqrt(M_PI)) * (sqr(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\n}\n\nfloat d_beckmann(float NH, float m) {\n  float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\n  float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\n  return co * expx;\n}\n\n// the same as glTF WebGL sample\n// https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\n// That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\n// and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\n// https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\nfloat g_shielding(float NL, float NV, float alphaRoughness) {\n  float r = alphaRoughness;\n\n  // Local Shadowing using \"Schlick-Smith\" Masking Function\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n  // Local Masking using \"Schlick-Smith\" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localShadowing * localMasking;\n}\n\n// The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\n// The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\nfloat v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\n  float a2 = alphaRoughness * alphaRoughness;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n  return 0.5 / (GGXV + GGXL);\n}\n\nfloat v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\n  float a = alphaRoughness;\n  float GGXV = NL * (NV * (1.0 - a) + a);\n  float GGXL = NV * (NL * (1.0 - a) + a);\n  return 0.5 / (GGXV + GGXL);\n}\n\n// The Schlick Approximation to Fresnel\nvec3 fresnel(vec3 f0, float VH) {\n  return vec3(f0) + (vec3(1.0) - f0) * pow(1.0 - VH, 5.0);\n}\n\nvec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n  float D = d_ggx(NH, alphaRoughness);\n  float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\n  return vec3(D)*vec3(V)*F;\n//      float G = g_shielding(NL, NV, alphaRoughness);\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\n\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#diffuse-brdf\nvec3 diffuse_brdf(vec3 albedo)\n{\n  // (1/pi) * diffuseAlbedo\n  return albedo / M_PI;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#specular-brdf\nfloat specular_brdf(float alphaRoughness, float NdotL, float NdotV, float NdotH) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotH, alphaRoughness);\n  return V * D;\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_transmission#implementation-notes\nfloat specular_btdf(float alphaRoughness, float NdotL, float NdotV, float NdotHt) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotHt, alphaRoughness);\n  return V * D;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 conductor_fresnel(vec3 f0, float brdf, float alphaRoughness, float VdotH) {\n  return vec3(brdf) * (f0.rgb + (vec3(1.0) - f0.rgb) * vec3(pow(1.0 - abs(VdotH), 5.0)));\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 fresnel_mix(float ior, vec3 base, vec3 layer, float VdotH) {\n  float f0 = pow((1.0 - ior)/(1.0 + ior), 2.0);\n  float fr = f0 + (1.0 - f0) * pow(1.0 - abs(VdotH), 5.0);\n  return mix(base, layer, fr);\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 metal_brdf(float perceptualRoughness, vec3 baseColor, float NdotL, float NdotV, float NdotH, float VdotH) {\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  return conductor_fresnel(\n    baseColor,\n    specular_brdf(alphaRoughness, NdotL, NdotV, NdotH),\n    alphaRoughness,\n    VdotH\n  );\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 dielectric_brdf(float ior, vec3 baseColor, float perceptualRoughness, float NdotL, float NdotV, float NdotH, float VdotH) {\n  vec3 base = diffuse_brdf(baseColor);\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  vec3 layer = vec3(specular_brdf(alphaRoughness, NdotL, NdotV, NdotH));\n  return fresnel_mix(ior, base, layer, VdotH);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\nvec3 coated_material_s(vec3 base, float perceptualRoughness, float clearcoatRoughness, float clearcoat, float VdotNc, float LdotNc, float NdotHc) {\n  float clearcoatFresnel = 0.04 + (1.0 - 0.04) * pow(1.0 - abs(VdotNc), 5.0);\n  float clearcoatAlpha = clearcoatRoughness * clearcoatRoughness;\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  float D = d_ggx(NdotHc, clearcoatAlpha);\n  float V = v_SmithGGXCorrelated(LdotNc, VdotNc, clearcoatAlpha);\n  float f_clearcoat = clearcoatFresnel * D * V;\n\n  // base = (f_diffuse + f_specular) in https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\n  return base * vec3(1.0 - clearcoat * clearcoatFresnel) + vec3(f_clearcoat * clearcoat);\n}\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nfloat srgbToLinear(float value) {\n  return pow(value, 2.2);\n}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nfloat linearToSrgb(float value) {\n  return pow(value, 1.0/2.2);\n}\n\n// Roughness Dependent Fresnel\n// https://www.jcgt.org/published/0008/01/03/paper.pdf\nvec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\n{\n  return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\n}\n\nvec3 normalBlendingUDN(sampler2D baseMap, sampler2D detailMap, vec2 baseUv, vec2 detailUv) {\n  vec3 t = texture2D(baseMap,   baseUv).xyz * 2.0 - 1.0;\n  vec3 u = texture2D(detailMap, detailUv).xyz * 2.0 - 1.0;\n  vec3 r = normalize(vec3(t.xy + u.xy, t.z));\n  return r;\n}\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n// https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_volume/README.md#attenuation\nvec3 volumeAttenuation(vec3 attenuationColor, float attenuationDistance, vec3 intensity, float transmissionDistance)\n{\n  if (attenuationDistance == 0.0) { // means Infinite distance\n    return intensity; // No attenuation\n  } else {\n    vec3 attenuationCo = -log(attenuationColor) / attenuationDistance;\n    vec3 attenuatedTransmittance = exp(-attenuationCo * transmissionDistance);\n    return intensity * attenuatedTransmittance;\n  }\n}\n\nfloat d_Charlie(float alphaRoughness, float NoH) {\n  // Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n  float invAlpha  = 1.0 / alphaRoughness;\n  float cos2h = NoH * NoH;\n  float sin2h = 1.0 - cos2h;\n  return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen#sheen-visibility\nfloat sheenSimpleVisibility(float NdotL, float NdotV) {\n  return 1.0 / (4.0 * (NdotL + NdotV - NdotL * NdotV));\n}\n\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  if (light.effectiveRange <= 0.0) // means no range limit\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n  if (light.type != 0) // Point Light and Spot Light\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  if (light.type == 2) // Spot light\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec4 position_and_w_of_LightObject = get_lightPosition(0.0, lightIdx);\n  vec4 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec4 intensity_and_w_of_LightObject = get_lightIntensity(0.0, lightIdx);\n  Light light;\n  vec3 lightPosition = position_and_w_of_LightObject.xyz;\n  light.directionOfLightObject = direction_and_w_of_LightObject.xyz;\n  vec3 lightIntensity = intensity_and_w_of_LightObject.xyz;\n  float lightType = position_and_w_of_LightObject.w;\n  light.spotAngleScale = direction_and_w_of_LightObject.w;\n  light.spotAngleOffset = intensity_and_w_of_LightObject.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nvec3 get_irradiance(vec3 normal_forEnv, float materialSID, ivec2 hdriFormat) {\n  vec4 diffuseTexel = textureCube(u_diffuseEnvTexture, normal_forEnv);\n\n  vec3 irradiance;\n  if (hdriFormat.x == 0) {\n    // LDR_SRGB\n    irradiance = srgbToLinear(diffuseTexel.rgb);\n  }\n  else if (hdriFormat.x == 3) {\n    // RGBE\n    irradiance = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  }\n  else {\n    irradiance = diffuseTexel.rgb;\n  }\n\n  return irradiance;\n}\n\nfloat scaleForLod(float perceptualRoughness, float ior)\n{\n  // Scale roughness to the range [0, 1],\n  // ior=1.0 will be scale 0,\n  // ior=1.5 will be scale 1.0,\n  // ior=2 will be scale 1.0 (clamped),\n  float scale = clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n  return perceptualRoughness * scale;\n}\n\nvec3 get_sample_from_backbuffer(float materialSID, vec2 sampleCoord, float perceptualRoughness, float ior) {\n  ivec2 vrState = get_vrState(0.0, 0);\n  vec2 backBufferTextureSize = get_backBufferTextureSize(materialSID, 0);\n  float backBufferTextureLength = max(backBufferTextureSize.x, backBufferTextureSize.y);\n  if (vrState.x == 1) { // For VR\n    backBufferTextureLength = max(backBufferTextureSize.x / 2.0, backBufferTextureSize.y);\n    sampleCoord.x = sampleCoord.x * 0.5;\n    if (vrState.y == 1) { // For right eye\n      sampleCoord.x += 0.5;\n    }\n  }\n  float framebufferLod = log2(backBufferTextureLength) * scaleForLod(perceptualRoughness, ior);\n\n  #ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n    vec3 transmittedLight = texture2DLodEXT(u_backBufferTexture, sampleCoord, framebufferLod).rgb;\n  #elif defined(GLSL_ES3)\n    vec3 transmittedLight = textureLod(u_backBufferTexture, sampleCoord, framebufferLod).rgb;\n  #else\n    vec3 transmittedLight = texture2D(u_backBufferTexture, sampleCoord).rgb;\n  #endif\n\n  return transmittedLight;\n}\n\n\nvec3 get_radiance(vec3 reflection, float lod, ivec2 hdriFormat) {\n  #ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n    vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, reflection, lod);\n  #elif defined(GLSL_ES3)\n    vec4 specularTexel = textureLod(u_specularEnvTexture, reflection, lod);\n  #else\n    vec4 specularTexel = textureCube(u_specularEnvTexture, reflection);\n  #endif\n\n// #pragma shaderity: require(./../common/fetchCubeTexture.glsl)\n\n  vec3 radiance;\n  if (hdriFormat.y == 0) {\n    // LDR_SRGB\n    radiance = srgbToLinear(specularTexel.rgb);\n  }\n  else if (hdriFormat.y == 3) {\n    // RGBE\n    radiance = specularTexel.rgb * pow(2.0, specularTexel.a*255.0-128.0);\n  }\n  else {\n    radiance = specularTexel.rgb;\n  }\n\n  return radiance;\n}\n\n// from glTF Sample Viewer: https://github.com/KhronosGroup/glTF-Sample-Viewer\nvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior)\n{\n  vec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n  mat4 worldMatrix = get_worldMatrix(v_instanceID);\n\n  vec3 modelScale;\n  modelScale.x = length(vec3(worldMatrix[0].xyz));\n  modelScale.y = length(vec3(worldMatrix[1].xyz));\n  modelScale.z = length(vec3(worldMatrix[2].xyz));\n\n  return normalize(refractionVector) * thickness * modelScale;\n}\n\nstruct IblResult\n{\n  vec3 specular;\n  vec3 diffuse;\n  vec3 FssEss;\n};\n\nIblResult IBL(float materialSID, vec3 normal_inWorld, float NdotV, vec3 viewDirection, vec3 albedo, vec3 F0,\n  float perceptualRoughness, vec4 iblParameter, ivec2 hdriFormat, mat3 rotEnvMatrix)\n{\n  // get irradiance\n  vec3 normal_forEnv = rotEnvMatrix * normal_inWorld;\n  if (get_inverseEnvironment(materialSID, 0)) {\n    normal_forEnv.x *= -1.0;\n  }\n  vec3 irradiance = get_irradiance(normal_forEnv, materialSID, hdriFormat);\n\n  // get radiance\n  vec3 reflection = rotEnvMatrix * reflect(-viewDirection, normal_inWorld);\n  if (get_inverseEnvironment(materialSID, 0)) {\n    reflection.x *= -1.0;\n  }\n  float mipCount = iblParameter.x;\n  float lod = (perceptualRoughness * (mipCount - 1.0));\n  vec3 radiance = get_radiance(reflection, lod, hdriFormat);\n\n  // Roughness dependent fresnel\n  vec3 kS = fresnelSchlickRoughness(F0, NdotV, perceptualRoughness);\n  // vec3 f_ab = texture2D(u_brdfLutTexture, vec2(1.0 - NdotV, 1.0 - perceptualRoughness)).rgb;\n  vec2 f_ab = envBRDFApprox(perceptualRoughness, NdotV);\n  vec3 FssEss = kS * f_ab.x + f_ab.y;\n  IblResult result;\n  result.FssEss = FssEss;\n\n  // Multiple scattering, Fdez-Aguera's approach\n  float Ems = (1.0 - (f_ab.x + f_ab.y));\n  vec3 F_avg = F0 + (1.0 - F0) / 21.0;\n  vec3 FmsEms = Ems * FssEss * F_avg / (1.0 - F_avg * Ems);\n  vec3 k_D = albedo * (1.0 - FssEss - FmsEms);\n\n  // Diffuse IBL\n  vec3 diffuse = (FmsEms + k_D) * irradiance;\n\n  // Specular IBL\n  vec3 specular = FssEss * radiance;\n\n  // scale with user parameters\n  float IBLDiffuseContribution = iblParameter.y;\n  float IBLSpecularContribution = iblParameter.z;\n  diffuse *= IBLDiffuseContribution;\n  specular *= IBLSpecularContribution;\n\n  result.diffuse = diffuse;\n  result.specular = specular;\n\n  return result;\n}\n\nvec3 IBLContribution(float materialSID, vec3 normal_inWorld, float NdotV, vec3 viewDirection,\n  vec3 albedo, vec3 F0, float perceptualRoughness, float clearcoatRoughness, vec3 clearcoatNormal_inWorld,\n  float clearcoat, float VdotNc, vec3 geomNormal_inWorld, float cameraSID, float transmission, vec3 v_position_inWorld, float thickness)\n{\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  float rot = iblParameter.w + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n  ivec2 hdriFormat = get_hdriFormat(materialSID, 0);\n\n  IblResult baseResult = IBL(materialSID, normal_inWorld, NdotV, viewDirection, albedo, F0,\n    perceptualRoughness, iblParameter, hdriFormat, rotEnvMatrix);\n\n#ifdef RN_USE_TRANSMISSION\n  float ior = 1.5;\n  vec3 refractedRay = getVolumeTransmissionRay(geomNormal_inWorld, viewDirection, thickness, ior);\n  vec3 refractedRayFromVPosition = v_position_inWorld + refractedRay;\n  vec4 ndcPoint = get_projectionMatrix(cameraSID, 0) * get_viewMatrix(cameraSID, 0) * vec4(refractedRayFromVPosition, 1.0);\n  vec2 refractionCoords = ndcPoint.xy / ndcPoint.w;\n  refractionCoords += 1.0;\n  refractionCoords /= 2.0;\n  vec3 transmittedLight = get_sample_from_backbuffer(materialSID, refractionCoords, perceptualRoughness, ior);\n\n#ifdef RN_USE_VOLUME\n  vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n  float attenuationDistance = get_attenuationDistance(materialSID, 0);\n  transmittedLight = volumeAttenuation(attenuationColor, attenuationDistance, transmittedLight, length(refractedRay));\n#endif\n\n  vec3 transmissionComp = (vec3(1.0) - baseResult.FssEss) * transmittedLight * albedo;\n  vec3 diffuse = mix(baseResult.diffuse, transmissionComp, transmission);\n  vec3 base = diffuse + baseResult.specular;\n#else\n  vec3 base = baseResult.diffuse + baseResult.specular;\n#endif\n\n#ifdef RN_USE_CLEARCOAT\n  float VdotNg = dot(geomNormal_inWorld, viewDirection);\n  IblResult coatResult = IBL(materialSID, clearcoatNormal_inWorld, VdotNc, viewDirection, vec3(0.0), F0,\n    clearcoatRoughness, iblParameter, hdriFormat, rotEnvMatrix);\n  vec3 coatLayer = coatResult.diffuse + coatResult.specular;\n\n  float clearcoatFresnel = 0.04 + (1.0 - 0.04) * pow(1.0 - abs(VdotNc), 5.0);\n  vec3 coated = base * vec3(1.0 - clearcoat * clearcoatFresnel) + vec3(coatLayer * clearcoat);\n\n  return coated;\n#else\n  return base;\n#endif\n\n}\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvec2 getTexcoord(int texcoordIndex) {\n  vec2 texcoord;\n  if(texcoordIndex == 1){\n    texcoord = v_texcoord_1;\n  }else{\n    texcoord = v_texcoord_0;\n  }\n  return texcoord;\n}\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n    vec3 tangent_inWorld = normalize(v_tangent_inWorld);\n    vec3 binormal_inWorld = normalize(v_binormal_inWorld);\n    mat3 tbnMat_tangent_to_world = mat3(tangent_inWorld, binormal_inWorld, normal_inWorld);\n\n    return normalize(tbnMat_tangent_to_world * normalTex);\n  }\n#else\n  #ifdef RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n    // This is based on http://www.thetenthplanet.de/archives/1180\n    mat3 cotangent_frame(vec3 normal_inWorld, vec3 position, vec2 uv) {\n      uv = gl_FrontFacing ? uv : -uv;\n\n      // get edge vectors of the pixel triangle\n      vec3 dp1 = dFdx(position);\n      vec3 dp2 = dFdy(position);\n      vec2 duv1 = dFdx(uv);\n      vec2 duv2 = dFdy(uv);\n\n      // solve the linear system\n      vec3 dp2perp = cross(dp2, normal_inWorld);\n      vec3 dp1perp = cross(normal_inWorld, dp1);\n      vec3 tangent = dp2perp * duv1.x + dp1perp * duv2.x;\n      vec3 bitangent = dp2perp * duv1.y + dp1perp * duv2.y;\n      bitangent *= -1.0;\n\n      // construct a scale-invariant frame\n      float invMat = inversesqrt(max(dot(tangent, tangent), dot(bitangent, bitangent)));\n      return mat3(tangent * invMat, bitangent * invMat, normal_inWorld);\n    }\n\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      mat3 tbnMat_tangent_to_world = cotangent_frame(normal_inWorld, -viewVector, texcoord);\n      if (texcoord.x > 0.0 || texcoord.y > 0.0) {\n        return normalize(tbnMat_tangent_to_world * normalTex);\n      } else {\n        return normal_inWorld;\n      }\n    }\n  #else\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      return normal_inWorld;\n    }\n  #endif\n#endif\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // View vector\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\n  vec3 viewVector = viewPosition - v_position_inWorld.xyz;\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n  vec3 geomNormal_inWorld = normal_inWorld;\n  vec4 normalTextureTransform = get_normalTextureTransform(materialSID, 0);\n  float normalTextureRotation = get_normalTextureRotation(materialSID, 0);\n  int normalTexcoordIndex = get_normalTexcoordIndex(materialSID, 0);\n  vec2 normalTexcoord = getTexcoord(normalTexcoordIndex);\n  vec2 normalTexUv = uvTransform(normalTextureTransform.xy, normalTextureTransform.zw, normalTextureRotation, normalTexcoord);\n  #ifdef RN_USE_NORMAL_TEXTURE\n    vec3 normalTexValue = texture2D(u_normalTexture, normalTexUv).xyz;\n    if(normalTexValue.b >= 128.0 / 255.0) {\n      // normal texture is existence\n      vec3 normalTex = normalTexValue * 2.0 - 1.0;\n      float normalScale = get_normalScale(materialSID, 0);\n      vec3 scaledNormal = normalize(normalTex * vec3(normalScale, normalScale, 1.0));\n      normal_inWorld = perturb_normal(normal_inWorld, viewVector, normalTexUv, scaledNormal);\n    }\n  #endif\n\n  // BaseColorFactor\n  vec3 baseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 baseColorFactor = get_baseColorFactor(materialSID, 0);\n  if (v_color != baseColor && baseColorFactor.rgb != baseColor) {\n    baseColor = v_color * baseColorFactor.rgb;\n    alpha = baseColorFactor.a;\n  } else if (v_color == baseColor) {\n    baseColor = baseColorFactor.rgb;\n    alpha = baseColorFactor.a;\n  } else if (baseColorFactor.rgb == baseColor) {\n    baseColor = v_color;\n  } else {\n    baseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // BaseColor (take account for BaseColorTexture)\n  vec4 baseColorTextureTransform = get_baseColorTextureTransform(materialSID, 0);\n  float baseColorTextureRotation = get_baseColorTextureRotation(materialSID, 0);\n  int baseColorTexcoordIndex = get_baseColorTexcoordIndex(materialSID, 0);\n  vec2 baseColorTexcoord = getTexcoord(baseColorTexcoordIndex);\n  vec2 baseColorTexUv = uvTransform(baseColorTextureTransform.xy, baseColorTextureTransform.zw, baseColorTextureRotation, baseColorTexcoord);\n  vec4 textureColor = texture2D(u_baseColorTexture, baseColorTexUv);\n  baseColor *= srgbToLinear(textureColor.rgb);\n  alpha *= textureColor.a;\n\n#ifdef RN_IS_ALPHAMODE_MASK\n  float alphaCutoff = get_alphaCutoff(materialSID, 0);\n  if (alpha < alphaCutoff) {\n    discard;\n  }\n#endif\n\n\n  // NdotV\n  vec3 viewDirection = normalize(viewVector);\n  float NdotV = saturateEpsilonToOne(dot(normal_inWorld, viewDirection));\n\n  // Clearcoat\n#ifdef RN_USE_CLEARCOAT\n  float clearcoatFactor = get_clearCoatFactor(materialSID, 0);\n  float clearcoatTexture = texture2D(u_clearCoatTexture, baseColorTexUv).r;\n  float clearcoat = clearcoatFactor * clearcoatTexture;\n#else\n  float clearcoat = 0.0;\n#endif\n\n  // Transmission\n#ifdef RN_USE_TRANSMISSION\n  float transmissionFactor = get_transmissionFactor(materialSID, 0);\n  float transmissionTexture = texture2D(u_transmissionTexture, baseColorTexUv).r;\n  float transmission = transmissionFactor * transmissionTexture;\n  // alpha *= transmission;\n#else\n  float transmission = 0.0;\n#endif\n\n#ifdef RN_IS_LIGHTING\n  // Metallic & Roughness\n  vec2 metallicRoughnessFactor = get_metallicRoughnessFactor(materialSID, 0);\n  float perceptualRoughness = metallicRoughnessFactor.y;\n  float metallic = metallicRoughnessFactor.x;\n\n  vec4 metallicRoughnessTextureTransform = get_metallicRoughnessTextureTransform(materialSID, 0);\n  float metallicRoughnessTextureRotation = get_metallicRoughnessTextureRotation(materialSID, 0);\n  int metallicRoughnessTexcoordIndex = get_metallicRoughnessTexcoordIndex(materialSID, 0);\n  vec2 metallicRoughnessTexcoord = getTexcoord(metallicRoughnessTexcoordIndex);\n  vec2 metallicRoughnessTexUv = uvTransform(metallicRoughnessTextureTransform.xy, metallicRoughnessTextureTransform.zw, metallicRoughnessTextureRotation, metallicRoughnessTexcoord);\n  vec4 ormTexel = texture2D(u_metallicRoughnessTexture, metallicRoughnessTexUv);\n  perceptualRoughness = ormTexel.g * perceptualRoughness;\n  metallic = ormTexel.b * metallic;\n\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // F0\n  vec3 diffuseMatAverageF0 = vec3(0.04);\n  vec3 F0 = mix(diffuseMatAverageF0, baseColor.rgb, metallic);\n\n  // Albedo\n  vec3 black = vec3(0.0);\n  vec3 albedo = mix(baseColor.rgb, black, metallic);\n\n  rt0 = vec4(0.0, 0.0, 0.0, alpha);\n\n#ifdef RN_USE_CLEARCOAT\n  // Clearcoat\n  float clearcoatRoughnessFactor = get_clearCoatRoughnessFactor(materialSID, 0);\n  float textureRoughnessTexture = texture2D(u_clearCoatRoughnessTexture, baseColorTexUv).g;\n  float clearcoatRoughness = clearcoatRoughnessFactor * textureRoughnessTexture;\n  vec3 textureNormal_tangent = texture2D(u_clearCoatNormalTexture, baseColorTexUv).xyz * vec3(2.0) - vec3(1.0);\n\n  vec3 clearcoatNormal_inWorld = perturb_normal(geomNormal_inWorld, viewVector, normalTexUv, textureNormal_tangent);\n  float VdotNc = saturateEpsilonToOne(dot(viewDirection, clearcoatNormal_inWorld));\n#else\n  float clearcoatRoughness = 0.0;\n  vec3 clearcoatNormal_inWorld = vec3(0.0);\n  float VdotNc = 0.0;\n#endif\n\n#ifdef RN_USE_VOLUME\n  // Volume\n  float thicknessFactor = get_thicknessFactor(materialSID, 0);\n  float thicknessTexture = texture2D(u_thicknessTexture, baseColorTexUv).g;\n  float attenuationDistance = get_attenuationDistance(materialSID, 0);\n  vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n  float thickness = thicknessFactor * thicknessTexture;\n#else\n  float thickness = 0.0;\n  vec3 attenuationColor = vec3(0.0);\n  float attenuationDistance = 0.000001;\n#endif\n\n  // Lighting\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n    if (i >= lightNumber) {\n      break;\n    }\n\n    // Light\n    Light light = getLight(i, v_position_inWorld.xyz);\n\n    // Fresnel\n    vec3 halfVector = normalize(light.direction + viewDirection);\n    float VdotH = dot(viewDirection, halfVector);\n    vec3 F = fresnel(F0, VdotH);\n\n    float NdotL = saturateEpsilonToOne(dot(normal_inWorld, light.direction));\n\n    // Diffuse\n    vec3 diffuseBrdf = diffuse_brdf(albedo);\n    vec3 pureDiffuse = (vec3(1.0) - F) * diffuseBrdf * vec3(NdotL) * light.attenuatedIntensity;\n\n#ifdef RN_USE_TRANSMISSION\n    float ior = 1.5;\n    vec3 refractionVector = refract(-viewDirection, normal_inWorld, 1.0 / ior);\n    Light transmittedLightFromUnderSurface = light;\n    transmittedLightFromUnderSurface.pointToLight -= refractionVector;\n    vec3 transmittedLightDirectionFromUnderSurface = normalize(transmittedLightFromUnderSurface.pointToLight);\n    transmittedLightFromUnderSurface.direction = transmittedLightDirectionFromUnderSurface;\n\n    vec3 Ht = normalize(viewDirection + transmittedLightFromUnderSurface.direction);\n    float NdotHt = saturateEpsilonToOne(dot(normal_inWorld, Ht));\n    float NdotLt = saturateEpsilonToOne(dot(normal_inWorld, transmittedLightFromUnderSurface.direction));\n\n    vec3 transmittedContrib = (vec3(1.0) - F) * specular_btdf(alphaRoughness, NdotLt, NdotV, NdotHt) * albedo * transmittedLightFromUnderSurface.attenuatedIntensity;\n\n#ifdef RN_USE_VOLUME\n    vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n    float attenuationDistance = get_attenuationDistance(materialSID, 0);\n    transmittedContrib = volumeAttenuation(attenuationColor, attenuationDistance, transmittedContrib, length(transmittedLightFromUnderSurface.pointToLight));\n#endif\n\n    vec3 diffuseContrib = mix(pureDiffuse, vec3(transmittedContrib), transmission);\n#else\n    vec3 diffuseContrib = pureDiffuse;\n#endif\n\n    // Specular\n    float NdotH = saturateEpsilonToOne(dot(normal_inWorld, halfVector));\n    vec3 specularContrib = cook_torrance_specular_brdf(NdotH, NdotL, NdotV, F, alphaRoughness) * vec3(NdotL) * light.attenuatedIntensity;\n\n    // Base Layer\n    vec3 baseLayer = diffuseContrib + specularContrib;\n\n#ifdef RN_USE_CLEARCOAT\n    // Clear Coat Layer\n    float NdotHc = saturateEpsilonToOne(dot(clearcoatNormal_inWorld, halfVector));\n    float LdotNc = saturateEpsilonToOne(dot(light.direction, clearcoatNormal_inWorld));\n    vec3 coated = coated_material_s(baseLayer, perceptualRoughness,\n      clearcoatRoughness, clearcoat, VdotNc, LdotNc, NdotHc);\n    rt0.xyz += coated;\n#else\n    rt0.xyz += baseLayer;\n#endif\n  }\n\n  vec3 ibl = IBLContribution(materialSID, normal_inWorld, NdotV, viewDirection,\n    albedo, F0, perceptualRoughness, clearcoatRoughness, clearcoatNormal_inWorld,\n    clearcoat, VdotNc, geomNormal_inWorld, cameraSID, transmission, v_position_inWorld.xyz, thickness);\n\n  int occlusionTexcoordIndex = get_occlusionTexcoordIndex(materialSID, 0);\n  vec2 occlusionTexcoord = getTexcoord(occlusionTexcoordIndex);\n  float occlusion = texture2D(u_occlusionTexture, occlusionTexcoord).r;\n  float occlusionStrength = get_occlusionStrength(materialSID, 0);\n\n  // Occlution to Indirect Lights\n  rt0.xyz += mix(ibl, ibl * occlusion, occlusionStrength);\n#else\n  rt0 = vec4(baseColor, alpha);\n#endif\n\n  // Emissive\n  int emissiveTexcoordIndex = get_emissiveTexcoordIndex(materialSID, 0);\n  vec2 emissiveTexcoord = getTexcoord(emissiveTexcoordIndex);\n  vec3 emissive = srgbToLinear(texture2D(u_emissiveTexture, emissiveTexcoord).xyz);\n\n#ifdef RN_USE_CLEARCOAT\n  vec3 coated_emissive = emissive * mix(vec3(1.0), vec3(0.04 + (1.0 - 0.04) * pow(1.0 - NdotV, 5.0)), clearcoat);\n  rt0.xyz += coated_emissive;\n#else\n  rt0.xyz += emissive;\n#endif\n\n  bool isOutputHDR = get_isOutputHDR(materialSID, 0);\n  if(isOutputHDR){\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  }\n\n#ifdef RN_IS_ALPHAMODE_OPAQUE\n  rt0.a = 1.0;\n#elif defined(RN_IS_ALPHAMODE_MASK)\n  rt0.a = 1.0;\n#endif\n\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n  // premultiplied alpha\n  // rt0.rgb /= alpha;\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\nrt1 = rt0;\nrt2 = rt0;\nrt3 = rt0;\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert":
/*!**************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec2 a_texcoord_1;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec2 v_texcoord_1;\nout vec3 v_baryCentricCoord;\nout float v_instanceID;\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec4 a_tangent;\n  out vec3 v_tangent_inWorld;\n  out vec3 v_binormal_inWorld;\n#endif\n\nuniform float u_pointSize; // initialValue=30, soloDatum=true\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0.0, 0.1, 0.01), soloDatum=true\n\n#ifdef RN_IS_MORPHING\nuniform int u_morphTargetNumber; // initialValue=0, isCustomSetting=true, soloDatum=true, needUniformInFastest=true\n// uniform int u_dataTextureMorphOffsetPosition[];\n// uniform int u_morphWeights[]; //\n#endif\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  v_color = a_color;\n\n  bool isSkinning = false;\n\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_texcoord_0 = a_texcoord_0;\n  v_texcoord_1 = a_texcoord_1;\n\n\n  #ifdef RN_USE_TANGENT_ATTRIBUTE\n    v_tangent_inWorld = normalMatrix * a_tangent.xyz;\n    v_binormal_inWorld = cross(v_tangent_inWorld, v_normal_inWorld) * a_tangent.w;\n  #endif\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n\n  v_instanceID = a_instanceID;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.frag":
/*!****************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.frag ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec4 v_texcoord_1;\nin vec4 v_projPosition_from_light;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nvoid main (){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n  vec4 textureColor = texture(u_diffuseColorTexture, v_texcoord_0);\n  if (textureColor.r > 0.05) {\n    diffuseColor *= textureColor.rgb;\n    alpha *= textureColor.a;\n  }\n\n  // shadow mapping\n  if(v_projPosition_from_light.w > 0.0){\n    float zNear = get_zNearInner(materialSID, 0);\n    float zFar = get_zFarInner(materialSID, 0);\n    float normalizationCoefficient = 1.0 / (zFar - zNear);\n\n    vec2 shadowMapUV = v_texcoord_1.xy / v_texcoord_1.w;\n\n    #ifdef RN_IS_DEBUGGING\n      bool inShadowMap = (shadowMapUV.x >= 0.0 && shadowMapUV.x <= 1.0) && (shadowMapUV.y >= 0.0 && shadowMapUV.y <= 1.0);\n      if(inShadowMap == false){\n        rt0 = get_debugColorFactor(materialSID, 0);\n/* shaderity: @{renderTargetEnd} */\n\n        return;\n      }\n    #endif\n\n    float measureDepth = normalizationCoefficient * length(v_projPosition_from_light);\n    float textureDepth = decodeRGBAToDepth(texture(u_depthTexture, shadowMapUV));\n    float allowableDepthError = get_allowableDepthError(materialSID, 0);\n\n    if(measureDepth > textureDepth + allowableDepthError){\n      // case of shadow\n      vec4 shadowColorFactor = get_shadowColorFactor(materialSID, 0);\n      diffuseColor = shadowColorFactor.rgb;\n      alpha = shadowColorFactor.a;\n    }\n  }\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    int lightNumber = get_lightNumber(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\n\n      vec3 lightDirection = gotLightDirection.xyz;\n      vec3 lightIntensity = gotLightIntensity.xyz;\n      vec3 lightPosition = gotLightPosition.xyz;\n      float spotCosCutoff = gotLightDirection.w;\n      float spotExponent = gotLightIntensity.w;\n      float lightType = gotLightPosition.w;\n\n      if (0.75 < lightType) { // is pointlight or spotlight\n        lightDirection = normalize(lightPosition - v_position_inWorld.xyz);\n      }\n      float spotEffect = 1.0;\n      if (lightType > 1.75) { // is spotlight\n        spotEffect = dot(gotLightDirection.xyz, lightDirection);\n        if (spotEffect > spotCosCutoff) {\n          spotEffect = pow(spotEffect, spotExponent);\n        } else {\n          spotEffect = 0.0;\n        }\n      }\n\n      vec3 incidentLight = spotEffect * lightIntensity.xyz;\n//      incidentLight *= M_PI;\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\n\n      float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\n      float shininess = get_shininess(materialSID, 0);\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(lightDirection + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(lightDirection, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n\n  rt0 = vec4(shadingColor, alpha);\n  //rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.vert":
/*!****************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.vert ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec2 a_texcoord_1;\nin vec4 a_joint;\nin vec4 a_weight;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec4 v_texcoord_1;\nout vec4 v_projPosition_from_light;\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  // Shadow mapping\n  mat4 lightViewProjectionMatrix = get_lightViewProjectionMatrix(materialSID, 0);\n  v_projPosition_from_light = lightViewProjectionMatrix * v_position_inWorld;\n\n  // Following tMatrix is based on https://wgld.org/d/webgl/w051.html\n  mat4 tMatrix = mat4(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.5, 0.5, 0.0, 1.0\n  );\n  v_texcoord_1 = tMatrix * v_projPosition_from_light;\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.frag":
/*!************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.frag ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec3 v_baryCentricCoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3 + vec3(1.0 - wireframeWidthInner) * d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n  float tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  float synthesizeCoefficient0 = u_synthesizeCoefficient[0];\n  vec3 color = synthesizeCoefficient0 * texture2D(u_synthesizeTexture0, offset * tFrag).rgb;\n\n  vec4 targetTextureColor = texture2D(u_targetRegionTexture, offset * tFrag);\n  if (targetTextureColor != vec4(1.0, 1.0, 1.0, 1.0)) {\n    float synthesizeCoefficient1 = u_synthesizeCoefficient[1];\n    float synthesizeCoefficient2 = u_synthesizeCoefficient[2];\n    float synthesizeCoefficient3 = u_synthesizeCoefficient[3];\n    float synthesizeCoefficient4 = u_synthesizeCoefficient[4];\n    float synthesizeCoefficient5 = u_synthesizeCoefficient[5];\n\n    color += synthesizeCoefficient1 * texture2D(u_synthesizeTexture1, offset * tFrag).rgb;\n    color += synthesizeCoefficient2 * texture2D(u_synthesizeTexture2, offset * tFrag).rgb;\n    color += synthesizeCoefficient3 * texture2D(u_synthesizeTexture3, offset * tFrag).rgb;\n    color += synthesizeCoefficient4 * texture2D(u_synthesizeTexture4, offset * tFrag).rgb;\n    color += synthesizeCoefficient5 * texture2D(u_synthesizeTexture5, offset * tFrag).rgb;\n  }\n\n  rt0 = vec4(color, 1.0);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.vert":
/*!************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.vert ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\nin float a_instanceID;\nin vec3 a_baryCentricCoord;\nin vec3 a_position;\n\nout vec3 v_baryCentricCoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\nmat4 worldMatrix = get_worldMatrix(a_instanceID);\nmat4 viewMatrix = get_viewMatrix(cameraSID, 0);\nmat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\ngl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n\n  v_baryCentricCoord = a_baryCentricCoord;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.frag":
/*!********************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.frag ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec4 v_texcoord_1;\nin vec4 v_projPosition_from_light;\nin vec3 v_baryCentricCoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nfloat linstep(float min,float max,float v){\n  return clamp((v-min)/(max-min),0.0,1.0);\n}\n\nfloat reduceLightBleeding(float p_max, float parameter){\n  return linstep(parameter,1.0,p_max);\n}\n\nfloat chebyshevUpperBound(float materialSID){\n  float textureDepth = decodeRGBAToDepth(texture2DProj(u_depthTexture, v_texcoord_1));\n  float textureSquareDepth = decodeRGBAToDepth(texture2DProj(u_squareDepthTexture, v_texcoord_1));\n  if(textureDepth == 1.0 || textureSquareDepth == 1.0){\n    return 1.0;\n  }\n\n  float nonShadowProb = 1.0;\n\n  if(v_projPosition_from_light.w > 0.0){\n    float measureDepth;\n    bool isPointLight = get_isPointLight(materialSID, 0);\n    if(isPointLight){\n      float zNear = get_zNearInner(materialSID, 0);\n      float zFar = get_zFarInner(materialSID, 0);\n      float normalizationCoefficient = 1.0 / (zFar - zNear);\n      measureDepth = normalizationCoefficient * length(v_projPosition_from_light);\n    }else{\n      measureDepth = (v_projPosition_from_light / v_projPosition_from_light.w).z;\n    }\n\n    float depthAdjustment = get_depthAdjustment(materialSID, 0);\n    measureDepth += depthAdjustment;\n\n    float textureDepthAdjustment = get_textureDepthAdjustment(materialSID, 0);\n    textureDepth += textureDepthAdjustment;\n\n    float d = measureDepth - textureDepth;\n    if(d < 0.0) return 1.0;\n\n    float variance = textureSquareDepth - textureDepth * textureDepth;\n    float minimumVariance = get_minimumVariance(materialSID, 0);\n    variance = max(variance, minimumVariance);\n\n    nonShadowProb = variance / (variance + d * d);\n\n\n    float lightBleedingParameter = get_lightBleedingParameter(materialSID, 0);\n    nonShadowProb = reduceLightBleeding(nonShadowProb, lightBleedingParameter);\n  }\n  return nonShadowProb;\n}\n\nvoid main ()\n{\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n  vec4 textureColor = texture2D(u_diffuseColorTexture, v_texcoord_0);\n  if (textureColor.r > 0.05) {\n    diffuseColor *= textureColor.rgb;\n    alpha *= textureColor.a;\n  }\n\n  // shadow mapping\n  vec4 shadowColor = get_shadowColor(materialSID, 0);\n\n  float nonShadowProb = chebyshevUpperBound(materialSID);\n  diffuseColor = nonShadowProb * diffuseColor + (1.0 - nonShadowProb) * shadowColor.rgb;\n  alpha = nonShadowProb * alpha + (1.0 - nonShadowProb) * shadowColor.a;\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    int lightNumber = get_lightNumber(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */ ; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      vec4 gotLightDirection = get_lightDirection(0.0, i);\n      vec4 gotLightIntensity = get_lightIntensity(0.0, i);\n      vec4 gotLightPosition = get_lightPosition(0.0, i);\n\n      vec3 lightDirection = gotLightDirection.xyz;\n      vec3 lightIntensity = gotLightIntensity.xyz;\n      vec3 lightPosition = gotLightPosition.xyz;\n      float spotCosCutoff = gotLightDirection.w;\n      float spotExponent = gotLightIntensity.w;\n      float lightType = gotLightPosition.w;\n\n      if (0.75 < lightType) { // is pointlight or spotlight\n        lightDirection = normalize(lightPosition.xyz - v_position_inWorld.xyz);\n      }\n      float spotEffect = 1.0;\n      if (lightType > 1.75) { // is spotlight\n        spotEffect = dot(lightDirection.xyz, lightDirection);\n        if (spotEffect > spotCosCutoff) {\n          spotEffect = pow(spotEffect, spotExponent);\n        } else {\n          spotEffect = 0.0;\n        }\n      }\n\n      vec3 incidentLight = spotEffect * lightIntensity.xyz;\n//      incidentLight *= M_PI;\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\n\n      vec3 viewPosition = get_viewPosition(materialSID, 0);\n      float shininess = get_shininess(materialSID, 0);\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(lightDirection + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(lightDirection, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n\n  rt0 = vec4(shadingColor, alpha);\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.vert":
/*!********************************************************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.vert ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin float a_instanceID;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec4 v_texcoord_1;\nout vec4 v_projPosition_from_light;\nout vec3 v_baryCentricCoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrix * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceID);\n  mat4 worldMatrix = get_worldMatrix(a_instanceID);\n\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n  v_color = a_color;\n  v_texcoord_0 = a_texcoord_0;\n\n  // Shadow mapping\n  mat4 lightViewProjectionMatrix = get_lightViewProjectionMatrix(materialSID, 0);\n  v_projPosition_from_light = lightViewProjectionMatrix * v_position_inWorld;\n\n  // Following tMatrix is based on https://wgld.org/d/webgl/w051.html\n  mat4 tMatrix = mat4(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.5, 0.5, 0.0, 1.0\n  );\n  v_texcoord_1 = tMatrix * v_projPosition_from_light;\n\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/common/mainPrerequisites.glsl":
/*!*******************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/common/mainPrerequisites.glsl ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"#ifdef RN_IS_FASTEST_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.SkeletalComponentTID} */];\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/common/prerequisites.glsl":
/*!***************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/common/prerequisites.glsl ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"const float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_FASTEST_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture2D( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else if (posIn4bytes == 3) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n  vec4 val = fetchElement(scalar_idx);\n  return val.x;\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Add.glsl":
/*!****************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Add.glsl ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid add(in float lfs, in float rhs, out float outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in int lfs, in int rhs, out int outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec2 lfs, in vec2 rhs, out vec2 outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec3 lfs, in vec3 rhs, out vec3 outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec4 lfs, in vec4 rhs, out vec4 outValue) {\n  outValue = lfs + rhs;\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/AttributeNormal.vert":
/*!****************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/AttributeNormal.vert ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nin vec3 a_normal;\n\nvoid attributeNormal(out vec3 outValue) {\n  outValue = a_normal;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/AttributePosition.vert":
/*!******************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/AttributePosition.vert ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nin vec4 a_position;\n\nvoid attributePosition(out vec4 outValue) {\n  outValue = a_position;\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/DotProduct.glsl":
/*!***********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/DotProduct.glsl ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid dotProduct(in vec2 lfs, in vec2 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\nvoid dotProduct(in vec3 lfs, in vec3 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\nvoid dotProduct(in vec4 lfs, in vec4 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Greater.glsl":
/*!********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Greater.glsl ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid greater(in float lhs, in float rhs, out bool outValue) {\n  outValue = lhs > rhs;\n}\n\nvoid greater(in int lhs, in int rhs, out bool outValue) {\n  outValue = lhs > rhs;\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Multiply.glsl":
/*!*********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Multiply.glsl ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid multiply(in float lfs, in float rhs, out float outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in int lfs, in int rhs, out int outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat2 lfs, in mat2 rhs, out mat2 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat3 lfs, in mat3 rhs, out mat3 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat4 lfs, in mat4 rhs, out mat4 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat3 lfs, in vec3 rhs, out vec3 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat4 lfs, in vec4 rhs, out vec4 outValue) {\n  outValue = lfs * rhs;\n}\n\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/NormalMatrix.vert":
/*!*************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/NormalMatrix.vert ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid normalMatrix(out mat3 outValue) {\n  outValue = get_normalMatrix(a_instanceID);\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Normalize.glsl":
/*!**********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Normalize.glsl ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid normalize(in vec2 value, out vec2 outValue) {\n  outValue = normalize(value);\n}\n\nvoid normalize(in vec3 value, out vec3 outValue) {\n  outValue = normalize(value);\n}\n\nvoid normalize(in vec4 value, out vec4 outValue) {\n  outValue = normalize(value);\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/ProjectionMatrix.vert":
/*!*****************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/ProjectionMatrix.vert ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid projectionMatrix(out mat4 outValue) {\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID}*/];\n  outValue = get_projectionMatrix(cameraSID, 0);\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/ScalarToVector4.glsl":
/*!****************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/ScalarToVector4.glsl ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid scalarToVector4(in float x, in float y, in float z, in float w, out vec4 outValue) {\n  outValue.x = x;\n  outValue.y = y;\n  outValue.z = z;\n  outValue.w = w;\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Vector3AndScalarToVector4.glsl":
/*!**************************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Vector3AndScalarToVector4.glsl ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid vector3AndScalarToVector4(in vec3 xyz, in float w, out vec4 outValue) {\n  outValue.x = xyz.x;\n  outValue.y = xyz.y;\n  outValue.z = xyz.z;\n  outValue.w = w;\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/ViewMatrix.vert":
/*!***********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/ViewMatrix.vert ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid viewMatrix(out mat4 outValue) {\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID}*/];\n  outValue = get_viewMatrix(cameraSID, 0);\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/Wireframe.glsl":
/*!**********************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/Wireframe.glsl ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"bool wireframe(\n  in vec4 existingFragColor,\n  in vec4 wireframeColor,\n  out vec4 outColor\n) {\n  vec3 wireframeInfo = get_wireframe(a_instanceID);\n\n  // Wireframe\n  float threshold = 0.001;\n  float wireframeWidthInner = wireframeInfo.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframeInfo.x > 0.5 && wireframeInfo.y < 0.5) {\n    outColor.a = 0.0;\n  }\n  vec4 wireframeResult = existingFragColor;\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + existingFragColor.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(existingFragColor.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframeInfo.x > 0.5) {\n    outColor = wireframeResult;\n    if (wireframeInfo.y < 0.5 && existingFragColor.a == 0.0) {\n      discard;\n    }\n  }\n}\n","shaderStage":"fragment","isFragmentShader":true});

/***/ }),

/***/ "./src/webgl/shaderity_shaders/nodes/WorldMatrix.vert":
/*!************************************************************!*\
  !*** ./src/webgl/shaderity_shaders/nodes/WorldMatrix.vert ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"code":"\nvoid worldMatrix(out mat4 outValue) {\n  outValue = get_worldMatrix(a_instanceID);\n}\n","shaderStage":"vertex","isFragmentShader":false});

/***/ }),

/***/ "./node_modules/shaderity/dist/esm/index.js":
/*!**************************************************!*\
  !*** ./node_modules/shaderity/dist/esm/index.js ***!
  \**************************************************/
/***/ ((module) => {

module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __nested_webpack_require_187__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_187__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__nested_webpack_require_187__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__nested_webpack_require_187__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__nested_webpack_require_187__.d = function(exports, name, getter) {
/******/ 		if(!__nested_webpack_require_187__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__nested_webpack_require_187__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__nested_webpack_require_187__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __nested_webpack_require_187__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__nested_webpack_require_187__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __nested_webpack_require_187__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__nested_webpack_require_187__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__nested_webpack_require_187__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__nested_webpack_require_187__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__nested_webpack_require_187__.p = "./../../dist/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __nested_webpack_require_187__(__nested_webpack_require_187__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __nested_webpack_require_3810__) {

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Shaderity_1 = __importDefault(__nested_webpack_require_3810__(/*! ./main/Shaderity */ "./src/main/Shaderity.ts"));
exports.default = Shaderity_1.default;


/***/ }),

/***/ "./src/main/Reflection.ts":
/*!********************************!*\
  !*** ./src/main/Reflection.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * This class gets the attribute, varying, and uniform information from the code property of a shaderity object.
 * The methods of the Shaderity instance create an instance of this class.
 *
 * Before getting the information of the attribute, varying, and uniform, you need to call the reflect method of this instance.
 */
class Reflection {
    constructor(splittedShaderityShaderCode, shaderStage) {
        this.__attributeSemanticsMap = new Map();
        this.__uniformSemanticsMap = new Map();
        this.__attributes = [];
        this.__varyings = [];
        this.__uniforms = [];
        this.__splittedShaderCode = splittedShaderityShaderCode;
        this.__shaderStage = shaderStage;
        this.__setDefaultAttributeAndUniformSemanticsMap();
    }
    /**
     * Gets all attribute variable information in the shader code.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of ReflectionAttribute object
     */
    get attributes() {
        return this.__attributes;
    }
    /**
     * Gets all varying variable information in the shader code.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of ReflectionVarying object
     */
    get varyings() {
        return this.__varyings;
    }
    /**
     * Gets all uniform variable information in the shader code.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of ReflectionUniform object
     */
    get uniforms() {
        return this.__uniforms;
    }
    /**
     * Get the names of all attributes included in the shader.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of string
     */
    get attributesNames() {
        return this.__attributes.map((attribute) => { return attribute.name; });
    }
    /**
     * Get the attribute semantic (e.g. 'POSITION') of all attributes included in the shader.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of AttributeSemantics object
     */
    get attributesSemantics() {
        return this.__attributes.map((attribute) => { return attribute.semantic; });
    }
    /**
     * Get the variable type (e.g. 'vec4') of all attributes included in the shader.
     * Before calling this method, you need to call the reflect method of this instance.
     * @returns Array of VarType object
     */
    get attributesTypes() {
        return this.__attributes.map((attribute) => { return attribute.type; });
    }
    /**
     * Add an attributeSemantics.
     * The attributeSemantics is used in the ReflectionAttribute.semantics
     * (See reflect method of this class)
     */
    addAttributeSemanticsMap(map) {
        this.__attributeSemanticsMap = new Map([...this.__attributeSemanticsMap, ...map]);
    }
    /**
     * Add a uniformSemantics.
     * The attributeSemantics is used in the ReflectionAttribute.semantics
     * (See reflect method of this class)
     */
    addUniformSemanticsMap(map) {
        this.__uniformSemanticsMap = new Map([...this.__uniformSemanticsMap, ...map]);
    }
    /**
     * Add an attributeSemantics.
     * The attributeSemantics is used in the ReflectionAttribute.semantics
     * (See reflect method of this class)
     */
    addAttributeSemantics(key, value) {
        this.__attributeSemanticsMap.set(key, value);
    }
    /**
     * Add a uniformSemantics.
     * The attributeSemantics is used in the ReflectionAttribute.semantics
     * (See reflect method of this class)
     */
    addUniformSemantics(key, value) {
        this.__uniformSemanticsMap.set(key, value);
    }
    /**
     * Initialize attributeSemantics
     */
    resetAttributeSemantics() {
        this.__attributeSemanticsMap = new Map();
    }
    /**
     * Initialize uniformSemantics
     */
    resetUniformSemantics() {
        this.__uniformSemanticsMap = new Map();
    }
    /**
     * Analyze shader code of the shaderity and get information of attribute, varying and uniform.
     * The information can be retrieved from the get method of this instance.
     *
     * The semantic property of the ReflectionAttribute is assigned to the value of the semantic if
     * it is specified in the attribute line of the shader code. If not, the AttributeSemanticsMap
     * is searched for matching semantics, or UNKNOWN. The same applies to the semantic property of
     * ReflectionUniform.
     */
    reflect() {
        const splittedShaderCode = this.__splittedShaderCode;
        const shaderStage = this.__shaderStage;
        for (const shaderCodeLine of splittedShaderCode) {
            const isAttributeLine = this.__matchAttribute(shaderCodeLine, shaderStage);
            if (isAttributeLine) {
                this.__addAttribute(shaderCodeLine);
                continue;
            }
            const isVaryingLine = this.__matchVarying(shaderCodeLine, shaderStage);
            if (isVaryingLine) {
                this.__addVarying(shaderCodeLine, shaderStage);
                continue;
            }
            const isUniformLine = shaderCodeLine.match(/^(?![\/])[\t ]*uniform[\t ]+/);
            if (isUniformLine) {
                this.__addUniform(shaderCodeLine);
                continue;
            }
        }
    }
    __setDefaultAttributeAndUniformSemanticsMap() {
        this.__attributeSemanticsMap.set('position', 'POSITION');
        this.__attributeSemanticsMap.set('color$', 'COLOR_0');
        this.__attributeSemanticsMap.set('color_?0', 'COLOR_0');
        this.__attributeSemanticsMap.set('texcoord$', 'TEXCOORD_0');
        this.__attributeSemanticsMap.set('texcoord_?0', 'TEXCOORD_0');
        this.__attributeSemanticsMap.set('texcoord_?1', 'TEXCOORD_1');
        this.__attributeSemanticsMap.set('normal', 'NORMAL');
        this.__attributeSemanticsMap.set('tangent', 'TANGENT');
        this.__attributeSemanticsMap.set('joint$', 'JOINTS_0');
        this.__attributeSemanticsMap.set('bone$', 'JOINTS_0');
        this.__attributeSemanticsMap.set('joint_?0', 'JOINTS_0');
        this.__attributeSemanticsMap.set('bone_?0', 'JOINTS_0');
        this.__attributeSemanticsMap.set('weight$', 'WEIGHTS_0');
        this.__attributeSemanticsMap.set('weight_?0', 'WEIGHTS_0');
        this.__uniformSemanticsMap.set('worldmatrix', 'WorldMatrix');
        this.__uniformSemanticsMap.set('normalmatrix', 'NormalMatrix');
        this.__uniformSemanticsMap.set('viewmatrix', 'ViewMatrix');
        this.__uniformSemanticsMap.set('projectionmatrix', 'ProjectionMatrix');
        this.__uniformSemanticsMap.set('modelviewmatrix', 'ModelViewMatrix');
    }
    __matchAttribute(shaderCodeLine, shaderStage) {
        if (shaderStage !== 'vertex') {
            return false;
        }
        return shaderCodeLine.match(/^(?![\/])[\t ]*(attribute|in)[\t ]+.+;/);
    }
    __addAttribute(shaderCodeLine) {
        const reflectionAttribute = {
            name: '',
            type: 'float',
            semantic: 'UNKNOWN'
        };
        const matchType = shaderCodeLine.match(Reflection.attributeAndVaryingTypeRegExp);
        if (matchType) {
            const type = matchType[1];
            reflectionAttribute.type = type;
            const name = matchType[2];
            reflectionAttribute.name = name;
            const matchSemantic = shaderCodeLine.match(Reflection.semanticRegExp);
            if (matchSemantic) {
                reflectionAttribute.semantic = matchSemantic[1];
            }
            else {
                for (let [key, value] of this.__attributeSemanticsMap) {
                    if (name.match(new RegExp(key, 'i'))) {
                        reflectionAttribute.semantic = value;
                    }
                }
            }
        }
        this.__attributes.push(reflectionAttribute);
    }
    __matchVarying(shaderCodeLine, shaderStage) {
        if (shaderStage === 'vertex') {
            return shaderCodeLine.match(/^(?![\/])[\t ]*(varying|out)[\t ]+.+;/);
        }
        else {
            return shaderCodeLine.match(/^(?![\/])[\t ]*(varying|in)[\t ]+.+;/);
        }
    }
    __addVarying(shaderCodeLine, shaderStage) {
        const reflectionVarying = {
            name: '',
            type: 'float',
            inout: 'in'
        };
        const matchType = shaderCodeLine.match(Reflection.attributeAndVaryingTypeRegExp);
        if (matchType) {
            const type = matchType[1];
            reflectionVarying.type = type;
            const name = matchType[2];
            reflectionVarying.name = name;
            reflectionVarying.inout = (shaderStage === 'vertex') ? 'out' : 'in';
        }
        this.__varyings.push(reflectionVarying);
    }
    __addUniform(shaderCodeLine) {
        const reflectionUniform = {
            name: '',
            type: 'float',
            semantic: 'UNKNOWN'
        };
        const matchType = shaderCodeLine.match(Reflection.uniformTypeRegExp);
        if (matchType) {
            const type = matchType[1];
            reflectionUniform.type = type;
            const name = matchType[2];
            reflectionUniform.name = name;
            const matchSemantics = shaderCodeLine.match(Reflection.semanticRegExp);
            if (matchSemantics) {
                reflectionUniform.semantic = matchSemantics[1];
            }
            else {
                for (let [key, value] of this.__uniformSemanticsMap) {
                    if (name.match(new RegExp(key, 'i'))) {
                        reflectionUniform.semantic = value;
                    }
                }
            }
        }
        this.__uniforms.push(reflectionUniform);
    }
}
exports.default = Reflection;
Reflection.attributeAndVaryingTypeRegExp = /[\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4)[\t ]+(\w+);/;
Reflection.uniformTypeRegExp = /[\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4|sampler2D|samplerCube|sampler3D)[\t ]+(\w+);/;
Reflection.semanticRegExp = /<.*semantic[\t ]*=[\t ]*(\w+).*>/;


/***/ }),

/***/ "./src/main/ShaderEditor.ts":
/*!**********************************!*\
  !*** ./src/main/ShaderEditor.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * This class edits the code property of a shaderity object.
 */
class ShaderEditor {
    static _insertDefinition(splittedShaderCode, definition) {
        const defStr = definition.replace(/#define[\t ]+/, '');
        splittedShaderCode.unshift(`#define ${defStr}`);
    }
    static _fillTemplate(shaderCode, templateObject) {
        const templateString = shaderCode.replace(/\/\*[\t ]*shaderity:[\t ]*(@{[\t ]*)(\S+)([\t ]*})[\t ]*\*\//g, '${this.$2}');
        const resultCode = new Function("return `" + templateString + "`;").call(templateObject);
        return resultCode;
    }
}
exports.default = ShaderEditor;


/***/ }),

/***/ "./src/main/ShaderTransformer.ts":
/*!***************************************!*\
  !*** ./src/main/ShaderTransformer.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * This class converts the code property of a shaderity object to the specified format.
 */
class ShaderTransformer {
    /**
     * @private
     * Translate a GLSL ES3 shader code to a GLSL ES1 shader code
     */
    static _transformToGLSLES1(splittedShaderCode, isFragmentShader, embedErrorsInOutput) {
        this.__convertOrInsertVersionGLSLES1(splittedShaderCode);
        this.__removeES3Qualifier(splittedShaderCode, embedErrorsInOutput);
        this.__convertIn(splittedShaderCode, isFragmentShader);
        this.__convertOut(splittedShaderCode, isFragmentShader, embedErrorsInOutput);
        this.__removePrecisionForES3(splittedShaderCode);
        this.__convertTextureFunctionToES1(splittedShaderCode, isFragmentShader, embedErrorsInOutput);
        const transformedSplittedShaderCode = splittedShaderCode;
        return transformedSplittedShaderCode;
    }
    /**
     * @private
     * Translate a GLSL ES1 shader code to a GLSL ES3 shader code
     */
    static _transformToGLSLES3(splittedShaderCode, isFragmentShader) {
        this.__convertOrInsertVersionGLSLES3(splittedShaderCode);
        this.__convertAttribute(splittedShaderCode, isFragmentShader);
        this.__convertVarying(splittedShaderCode, isFragmentShader);
        this.__convertTextureCube(splittedShaderCode);
        this.__convertTexture2D(splittedShaderCode);
        this.__convertTexture2DProd(splittedShaderCode);
        this.__convertTexture3D(splittedShaderCode);
        this.__convertTexture3DProd(splittedShaderCode);
        const transformedSplittedShaderCode = splittedShaderCode;
        return transformedSplittedShaderCode;
    }
    /**
     * @private
     * Translate a GLSL shader code to a shader code of specified GLSL version
     */
    static _transformTo(version, splittedShaderCode, isFragmentShader, embedErrorsInOutput) {
        if (version.match(/webgl2|es3/i)) {
            return this._transformToGLSLES3(splittedShaderCode, isFragmentShader);
        }
        else if (version.match(/webgl1|es1/i)) {
            return this._transformToGLSLES1(splittedShaderCode, isFragmentShader, embedErrorsInOutput);
        }
        else {
            console.error('Invalid Version');
            return splittedShaderCode;
        }
    }
    /**
     * @private
     * If the first line contains version information, overwrite the first line with '#version 100'.
     * If not, add '#version 100' to the first line.
     *
     * Note: If the first line is commented out and the version information is written in the second or later line,
     * the appropriate version information will be added to the first line and the user-defined version information
     * in the second or later line will be removed.
     */
    static __convertOrInsertVersionGLSLES1(splittedShaderCode) {
        const reg = /^(?![\/])[\t ]*#[\t ]*version[\t ]+.*/;
        this.__removeFirstMatchingLine(splittedShaderCode, reg);
        splittedShaderCode.unshift('#version 100');
    }
    /**
     * @private
     * If the first line contains version information, overwrite the first line with '#version 300 es'.
     * If not, add '#version 300 es' to the first line.
     * In both cases, '#define GLSL_ES3' will be inserted in the second line.
     * Use the '#define GLSL_ES3' directive if you want to write a shader code that will only run in the case of webgl2.
     *
     * Note: If the first line is commented out and the version information is written in the second or later line,
     * the appropriate version information will be added to the first line and the user-defined version information
     * in the second or later line will be removed.
     */
    static __convertOrInsertVersionGLSLES3(splittedShaderCode) {
        const reg = /^(?![\/])[\t ]*#[\t ]*version[\t ]+.*/;
        this.__removeFirstMatchingLine(splittedShaderCode, reg);
        splittedShaderCode.unshift('#define GLSL_ES3');
        splittedShaderCode.unshift('#version 300 es');
    }
    /**
     * @private
     * Find the 'in' qualifier in the shader code and replace it with the GLSL ES1 qualifier('attribute' or 'varying')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertIn(splittedShaderCode, isFragmentShader) {
        const reg = /^(?![\/])[\t ]*in[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*\w+[\t ]*;)/;
        let replaceFunc;
        if (isFragmentShader) {
            replaceFunc = function (match, p1) {
                return 'varying ' + p1;
            };
        }
        else {
            replaceFunc = function (match, p1) {
                return 'attribute ' + p1;
            };
        }
        this.__replaceLine(splittedShaderCode, reg, replaceFunc);
    }
    /**
     * @private
     * Find the "out" qualifier in the shader code and modify the shader code.
     * If the shader stage is vertex, the "out" qualifiers will be replaced by "varying" qualifier.
     * If the shader stage is fragment and the shader has "out" qualifiers, the "out" qualifiers will
     * be deleted and the variable is used to assign a value to gl_FragColor.
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertOut(splittedShaderCode, isFragmentShader, embedErrorsInOutput) {
        if (isFragmentShader) {
            const variableName = this.__removeOutQualifier(splittedShaderCode, embedErrorsInOutput);
            if (variableName == null) {
                // no out qualifier
                return;
            }
            this.__addGLFragColor(variableName, splittedShaderCode, embedErrorsInOutput);
        }
        else {
            const reg = /^(?![\/])[\t ]*out[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*\w+[\t ]*;)/;
            const replaceFunc = function (match, p1) {
                return 'varying ' + p1;
            };
            this.__replaceLine(splittedShaderCode, reg, replaceFunc);
        }
    }
    /**
     * @private
     * This method is a part of __convertOut method.
     * This method deletes the "out" qualifiers and adds the line for assigning to gl_FragColor.
     * If the shader does not have the "out" qualifiers, this method does nothing.
     */
    static __removeOutQualifier(splittedShaderCode, embedErrorsInOutput) {
        const reg = /^(?![\/])[\t ]*out[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*(\w+)[\t ]*;)/;
        let variableName;
        for (let i = 0; i < splittedShaderCode.length; i++) {
            const match = splittedShaderCode[i].match(reg);
            if (match) {
                splittedShaderCode[i] = match[1];
                variableName = match[3];
                break;
            }
        }
        return variableName;
    }
    static __addGLFragColor(variableName, splittedShaderCode, embedErrorsInOutput) {
        const closeBracketReg = /(.*)\}[\n\t ]*$/;
        const returnReg = /[\n\t ]*return[\n\t ]*;/;
        const mainFuncStartReg = /(^|^(?![\/])[\t\n ]+)void[\t\n ]+main([\t\n ]|\(|$)/;
        const fragColorCode = `  gl_FragColor = ${variableName};`;
        let setGlFragColorInLastLine = false;
        for (let i = splittedShaderCode.length - 1; i >= 0; i--) {
            const line = splittedShaderCode[i];
            if (!setGlFragColorInLastLine && line.match(closeBracketReg)) {
                // add gl_FragColor to last line of main function
                splittedShaderCode[i] = line.replace(closeBracketReg, `$1\n${fragColorCode}\n}\n`);
                setGlFragColorInLastLine = true;
            }
            if (line.match(returnReg)) {
                // add gl_FragColor just before return
                splittedShaderCode.splice(i, 0, fragColorCode);
            }
            if (line.match(mainFuncStartReg)) {
                // add gl_FragColor only in the main function
                break;
            }
        }
        if (!setGlFragColorInLastLine) {
            const errorMessage = '__removeOutQualifier: Not found the closing brackets for the main function';
            this.__outError(splittedShaderCode, splittedShaderCode.length, errorMessage, embedErrorsInOutput);
        }
    }
    /**
     * @private
     * Find the qualifier for es3 only in the shader code and remove it
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __removeES3Qualifier(splittedShaderCode, embedErrorsInOutput) {
        this.__removeVaryingQualifier(splittedShaderCode, embedErrorsInOutput);
        this.__removeLayout(splittedShaderCode);
    }
    /**
     * @private
     * Find the "flat" and "smooth" qualifier in the shader code and remove it
     */
    static __removeVaryingQualifier(splittedShaderCode, embedErrorsInOutput) {
        const reg = /^(?![\/])[\t ]*(flat|smooth)[\t ]*((in|out)[\t ]+.*)/;
        const errorMessage = '__removeVaryingQualifier: glsl es1 does not support flat qualifier';
        for (let i = 0; i < splittedShaderCode.length; i++) {
            splittedShaderCode[i] = splittedShaderCode[i].replace(reg, (match, p1, p2) => {
                if (p1 === 'flat') {
                    this.__outError(splittedShaderCode, i + 1, errorMessage, embedErrorsInOutput);
                    return match;
                }
                return p2;
            });
        }
    }
    /**
     * @private
     * Find the "layout" qualifier in the shader code and remove it
     */
    static __removeLayout(splittedShaderCode) {
        const reg = /^(?![\/])[\t ]*layout[\t ]*\([\t ]*location[\t ]*\=[\t ]*\d[\t ]*\)[\t ]+/g;
        this.__replaceLine(splittedShaderCode, reg, '');
    }
    /**
     * @private
     * Find the "precision" qualifier in the shader code and remove it if the "precision" qualifier is valid for only GLSL ES3
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __removePrecisionForES3(splittedShaderCode) {
        const reg = /^(?![\/])[\t ]*precision[\t ]+(highp|mediump|lowp)[\t ]+(\w+)[\t ]*;/;
        for (let i = 0; i < splittedShaderCode.length; i++) {
            const match = splittedShaderCode[i].match(reg);
            if (match != null) {
                if (match[2] === 'int' ||
                    match[2] === 'float' ||
                    match[2] === 'sampler2D' ||
                    match[2] === 'samplerCube') {
                    // these precisions are supported in es1
                    continue;
                }
                else {
                    splittedShaderCode.splice(i--, 1);
                }
            }
        }
    }
    /**
     * @private
     * Find the "texture" and "textureProj" method in the shader code and
     * replace it with the GLSL ES1 method('texture2D', 'texture2D', and so on)
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTextureFunctionToES1(splittedShaderCode, isFragmentShader, embedErrorsInOutput) {
        var _a, _b;
        const sbl = this.__regSymbols();
        const regTextureProj = new RegExp(`(${sbl}+)textureProj(Lod|)(${sbl}+)`, 'g');
        const regTexture = new RegExp(`(${sbl}+)texture(Lod|)(${sbl}+)`, 'g');
        let argumentSamplerMap;
        const uniformSamplerMap = this.__createUniformSamplerMap(splittedShaderCode, embedErrorsInOutput);
        for (let i = 0; i < splittedShaderCode.length; i++) {
            const line = splittedShaderCode[i];
            const matchTextureProj = line.match(/textureProj(Lod|)[\t ]*\([\t ]*(\w+),/);
            if (matchTextureProj) {
                argumentSamplerMap = argumentSamplerMap !== null && argumentSamplerMap !== void 0 ? argumentSamplerMap : this.__createArgumentSamplerMap(splittedShaderCode, i, embedErrorsInOutput);
                const isLodMethod = matchTextureProj[1] === 'Lod';
                const extensionStr = isFragmentShader && isLodMethod ? `EXT` : ``;
                const variableName = matchTextureProj[2];
                const samplerType = (_a = argumentSamplerMap === null || argumentSamplerMap === void 0 ? void 0 : argumentSamplerMap.get(variableName)) !== null && _a !== void 0 ? _a : uniformSamplerMap.get(variableName);
                if (samplerType != null) {
                    if (samplerType === 'sampler2D') {
                        splittedShaderCode[i] = splittedShaderCode[i].replace(regTextureProj, `$1texture2DProj$2${extensionStr}$3`);
                    }
                    else {
                        const errorMessage = '__convertTextureFunctionToES1: do not support ' + samplerType + ' type';
                        this.__outError(splittedShaderCode, i, errorMessage, embedErrorsInOutput);
                    }
                }
                continue;
            }
            const matchTexture = line.match(/texture(Lod|)[\t ]*\([\t ]*(\w+),/);
            if (matchTexture) {
                argumentSamplerMap = argumentSamplerMap !== null && argumentSamplerMap !== void 0 ? argumentSamplerMap : this.__createArgumentSamplerMap(splittedShaderCode, i, embedErrorsInOutput);
                const isLodMethod = matchTexture[1] === 'Lod';
                const extensionStr = isFragmentShader && isLodMethod ? `EXT` : ``;
                const variableName = matchTexture[2];
                const samplerType = (_b = argumentSamplerMap === null || argumentSamplerMap === void 0 ? void 0 : argumentSamplerMap.get(variableName)) !== null && _b !== void 0 ? _b : uniformSamplerMap.get(variableName);
                if (samplerType != null) {
                    let textureFunc;
                    if (samplerType === 'sampler2D') {
                        textureFunc = 'texture2D';
                    }
                    else if (samplerType === 'samplerCube') {
                        textureFunc = 'textureCube';
                    }
                    else {
                        textureFunc = '';
                        const errorMessage = '__convertTextureFunctionToES1: do not support ' + samplerType + ' type';
                        this.__outError(splittedShaderCode, i, errorMessage, embedErrorsInOutput);
                    }
                    if (textureFunc !== '') {
                        splittedShaderCode[i] = splittedShaderCode[i].replace(regTexture, `$1${textureFunc}$2${extensionStr}$3`);
                    }
                }
                continue;
            }
            const isBlockEnd = !!line.match(/\}/);
            if (isBlockEnd) {
                argumentSamplerMap = undefined;
            }
        }
    }
    /**
     * @private
     * This method finds uniform declarations of sampler types in the shader and
     * creates a map with variable names as keys and types as values.
     */
    static __createUniformSamplerMap(splittedShaderCode, embedErrorsInOutput) {
        const uniformSamplerMap = new Map();
        for (let i = 0; i < splittedShaderCode.length; i++) {
            const line = splittedShaderCode[i];
            const match = line.match(/^(?![\/])[\t ]*uniform*[\t ]*(highp|mediump|lowp|)[\t ]*(sampler\w+)[\t ]+(\w+)/);
            if (match) {
                const samplerType = match[2];
                const name = match[3];
                if (uniformSamplerMap.get(name)) {
                    const errorMessage = '__createUniformSamplerMap: duplicate variable name';
                    this.__outError(splittedShaderCode, i, errorMessage, embedErrorsInOutput);
                }
                uniformSamplerMap.set(name, samplerType);
            }
        }
        return uniformSamplerMap;
    }
    /**
     * @private
     * This method finds sampler types from the function arguments and
     * creates a map with variable names as keys and types as values.
     */
    static __createArgumentSamplerMap(splittedShaderCode, lineIndex, embedErrorsInOutput) {
        var _a, _b;
        const argumentSamplerMap = new Map();
        for (let i = lineIndex; i >= 0; i--) {
            const line = splittedShaderCode[i];
            const isBlockStartLine = !!line.match(/\{/);
            if (!isBlockStartLine) {
                continue;
            }
            const bracketSectionCode = this.__getBracketSection(splittedShaderCode, i);
            const innerBracketSectionCode = (_a = bracketSectionCode.match(/.*\((.*)\)/)) === null || _a === void 0 ? void 0 : _a[1];
            if (innerBracketSectionCode == null) {
                return;
            }
            const variableCandidates = innerBracketSectionCode.split(',');
            const samplerTypeDefinitionReg = /[\n\t ]*(highp|mediump|lowp|)[\n\t ]*(sampler\w+)[\n\t ]*(\w+)[\n\t ]*/;
            const isFunctionBracket = !!((_b = variableCandidates[0].match(samplerTypeDefinitionReg)) !== null && _b !== void 0 ? _b : variableCandidates[0].match(/^[\n\t ]*$/));
            if (!isFunctionBracket) {
                continue;
            }
            for (const variableCandidate of variableCandidates) {
                const samplerVariableMatch = variableCandidate.match(samplerTypeDefinitionReg);
                if (samplerVariableMatch == null) {
                    continue;
                }
                const samplerType = samplerVariableMatch[2];
                const name = samplerVariableMatch[3];
                if (argumentSamplerMap.get(name)) {
                    const errorMessage = '__createArgumentSamplerMap: duplicate variable name';
                    this.__outError(splittedShaderCode, i, errorMessage, embedErrorsInOutput);
                }
                argumentSamplerMap.set(name, samplerType);
            }
            break;
        }
        return argumentSamplerMap;
    }
    /**
     * @private
     * This method returns the part enclosed in brackets(= '()').
     * For example, you can get lines that contain function arguments, conditional expressions for if statements, etc.
     */
    static __getBracketSection(splittedShaderCode, bracketEndIndex) {
        let bracketStartIndex = 0;
        for (let j = bracketEndIndex; j >= 0; j--) {
            const line = splittedShaderCode[j];
            const isBracketStartMatch = !!line.match(/\(/);
            if (isBracketStartMatch) {
                bracketStartIndex = j;
                break;
            }
        }
        let containBracketCode = '';
        for (let j = bracketStartIndex; j <= bracketEndIndex; j++) {
            containBracketCode += splittedShaderCode[j];
        }
        return containBracketCode;
    }
    /**
     * @private
     * Find the 'attribute' qualifier in the vertex shader code and replace it with the GLSL ES3 qualifier('in')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertAttribute(splittedShaderCode, isFragmentShader) {
        if (isFragmentShader) {
            return;
        }
        const reg = /^(?![\/])[\t ]*attribute[\t ]+/g;
        const replaceStr = 'in ';
        this.__replaceLine(splittedShaderCode, reg, replaceStr);
    }
    /**
     * @private
     * Find the 'varying' qualifier in the shader code and replace it with the GLSL ES3 qualifier('in' or 'out')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertVarying(splittedShaderCode, isFragmentShader) {
        const reg = /^(?![\/])[\t ]*varying[\t ]+/g;
        const replaceStr = isFragmentShader ? 'in ' : 'out ';
        this.__replaceLine(splittedShaderCode, reg, replaceStr);
    }
    /**
     * @private
     * Find the 'textureCube' method in the shader code and replace it with the GLSL ES3 method('texture')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTextureCube(splittedShaderCode) {
        const sbl = this.__regSymbols();
        const reg = new RegExp(`(${sbl}+)(textureCube)(${sbl}+)`, 'g');
        const replaceStr = 'texture';
        this.__replaceLine(splittedShaderCode, reg, '$1' + replaceStr + '$3');
    }
    /**
     * @private
     * Find the 'texture2D' method in the shader code and replace it with the GLSL ES3 method('texture')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTexture2D(splittedShaderCode) {
        const sbl = this.__regSymbols();
        const reg = new RegExp(`(${sbl}+)(texture2D)(${sbl}+)`, 'g');
        const replaceStr = 'texture';
        this.__replaceLine(splittedShaderCode, reg, '$1' + replaceStr + '$3');
    }
    /**
     * @private
     * Find the 'texture2DProj' method in the shader code and replace it with the GLSL ES3 method('textureProj')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTexture2DProd(splittedShaderCode) {
        const sbl = this.__regSymbols();
        const reg = new RegExp(`(${sbl}+)(texture2DProj)(${sbl}+)`, 'g');
        const replaceStr = 'textureProj';
        this.__replaceLine(splittedShaderCode, reg, '$1' + replaceStr + '$3');
    }
    /**
     * @private
     * Find the 'texture3D' method in the shader code and replace it with the GLSL ES3 method('texture')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTexture3D(splittedShaderCode) {
        const sbl = this.__regSymbols();
        const reg = new RegExp(`(${sbl}+)(texture3D)(${sbl}+)`, 'g');
        const replaceStr = 'texture';
        this.__replaceLine(splittedShaderCode, reg, '$1' + replaceStr + '$3');
    }
    /**
     * @private
     * Find the 'texture3DProj' method in the shader code and replace it with the GLSL ES3 method('textureProj')
     * This method directly replace the elements of the splittedShaderCode variable.
     */
    static __convertTexture3DProd(splittedShaderCode) {
        const sbl = this.__regSymbols();
        const reg = new RegExp(`(${sbl}+)(texture3DProj)(${sbl}+)`, 'g');
        const replaceStr = 'textureProj';
        this.__replaceLine(splittedShaderCode, reg, '$1' + replaceStr + '$3');
    }
    static __regSymbols() {
        return `[!"#$%&'()\*\+\-\.,\/:;<=>?@\[\\\]^` + '`{|}~\t\n ]';
    }
    static __replaceLine(splittedShaderCode, reg, replacement) {
        for (let i = 0; i < splittedShaderCode.length; i++) {
            splittedShaderCode[i] = splittedShaderCode[i].replace(reg, replacement);
        }
    }
    static __removeFirstMatchingLine(splittedShaderCode, reg) {
        for (let i = 0; i < splittedShaderCode.length; i++) {
            if (splittedShaderCode[i].match(reg)) {
                splittedShaderCode.splice(i, 1);
                break;
            }
        }
    }
    static __outError(splittedShaderCode, lineIndex, errorMessage, embedErrorsInOutput) {
        if (embedErrorsInOutput) {
            const shaderOutputMessage = `// line ${lineIndex}: ${errorMessage}\n`;
            const closeBracketReg = /(.*)\}[\n\t ]*$/;
            for (let i = splittedShaderCode.length - 1; i >= 0; i--) {
                const line = splittedShaderCode[i];
                if (line.match(closeBracketReg)) {
                    break;
                }
                if (splittedShaderCode[i] === shaderOutputMessage) {
                    // avoid duplicate error message
                    return;
                }
            }
            console.error(errorMessage);
            splittedShaderCode.push(shaderOutputMessage);
        }
        else {
            throw new Error(errorMessage);
        }
    }
}
exports.default = ShaderTransformer;


/***/ }),

/***/ "./src/main/Shaderity.ts":
/*!*******************************!*\
  !*** ./src/main/Shaderity.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __nested_webpack_require_39880__) {

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Reflection_1 = __importDefault(__nested_webpack_require_39880__(/*! ./Reflection */ "./src/main/Reflection.ts"));
const ShaderTransformer_1 = __importDefault(__nested_webpack_require_39880__(/*! ./ShaderTransformer */ "./src/main/ShaderTransformer.ts"));
const ShaderEditor_1 = __importDefault(__nested_webpack_require_39880__(/*! ./ShaderEditor */ "./src/main/ShaderEditor.ts"));
const Utility_1 = __importDefault(__nested_webpack_require_39880__(/*! ./Utility */ "./src/main/Utility.ts"));
const ShaderityObjectCreator_1 = __importDefault(__nested_webpack_require_39880__(/*! ./ShaderityObjectCreator */ "./src/main/ShaderityObjectCreator.ts"));
class Shaderity {
    // =========================================================================================================
    // shader transformation functions
    // =========================================================================================================
    /**
     * Translate a GLSL ES3 shader code to a GLSL ES1 shader code
     * @param obj Shaderity object to translate to glsl es1
     * @param embedErrorsInOutput If true, when there is an error in the conversion,
     *    the error and the number of lines are output at the bottom of the return
     *    value ShaderityObject.code. If false, throw an error.
     * @returns ShaderityObject whose code property is the shader code for GLSL ES1
     */
    static transformToGLSLES1(obj, embedErrorsInOutput = false) {
        const splittedShaderCode = Utility_1.default._splitByLineFeedCode(obj.code);
        const transformedSplittedShaderCode = ShaderTransformer_1.default._transformToGLSLES1(splittedShaderCode, obj.isFragmentShader, embedErrorsInOutput);
        const resultCode = Utility_1.default._joinSplittedLine(transformedSplittedShaderCode);
        const resultObj = {
            code: resultCode,
            shaderStage: obj.shaderStage,
            isFragmentShader: obj.isFragmentShader,
        };
        return resultObj;
    }
    /**
     * Translate a GLSL ES1 shader code to a GLSL ES3 shader code
     */
    static transformToGLSLES3(obj) {
        const splittedShaderCode = Utility_1.default._splitByLineFeedCode(obj.code);
        const transformedSplittedShaderCode = ShaderTransformer_1.default._transformToGLSLES3(splittedShaderCode, obj.isFragmentShader);
        const resultCode = Utility_1.default._joinSplittedLine(transformedSplittedShaderCode);
        const resultObj = {
            code: resultCode,
            shaderStage: obj.shaderStage,
            isFragmentShader: obj.isFragmentShader,
        };
        return resultObj;
    }
    /**
     * Translate a GLSL shader code to a shader code of specified GLSL version
     */
    static transformTo(version, obj, embedErrorsInOutput = false) {
        const splittedShaderCode = Utility_1.default._splitByLineFeedCode(obj.code);
        const transformedSplittedShaderCode = ShaderTransformer_1.default._transformTo(version, splittedShaderCode, obj.isFragmentShader, embedErrorsInOutput);
        const resultCode = Utility_1.default._joinSplittedLine(transformedSplittedShaderCode);
        const resultObj = {
            code: resultCode,
            shaderStage: obj.shaderStage,
            isFragmentShader: obj.isFragmentShader,
        };
        return resultObj;
    }
    // =========================================================================================================
    // shaderity object creation functions
    // =========================================================================================================
    /**
     * Create an instance to create shaderity object.
     */
    static createShaderityObjectCreator(shaderStage) {
        return new ShaderityObjectCreator_1.default(shaderStage);
    }
    // =========================================================================================================
    // shader edit functions
    // =========================================================================================================
    /**
     * Find the following template pattern in the shader code and replace key to value
     * @param templateObject An object that represents the string before and after the replacement
     * The key can be a string or an object. If an object is used as the key,
     * the key in the pattern of shaderCode must also match the object.
     * For example, if templateObject is
        {
            sample {
                sampleA: 0
            }
        }
     * then the key in a shader code is sample.sampleA.
     */
    // The template pattern is	/* shaderity: @{key} */
    static fillTemplate(obj, arg) {
        const copy = this.__copyShaderityObject(obj);
        copy.code = ShaderEditor_1.default._fillTemplate(copy.code, arg);
        return copy;
    }
    /**
     * Insert define directive
     */
    static insertDefinition(obj, definition) {
        const copy = this.__copyShaderityObject(obj);
        const splittedShaderCode = Utility_1.default._splitByLineFeedCode(obj.code);
        ShaderEditor_1.default._insertDefinition(splittedShaderCode, definition);
        copy.code = Utility_1.default._joinSplittedLine(splittedShaderCode);
        return copy;
    }
    // =========================================================================================================
    // reflection functions
    // =========================================================================================================
    /**
     * Create an instance to get the attribute, varying, and uniform information from a shader code of the shaderity.
     * To get these information, you need to call reflection.reflect method.
     */
    static createReflectionObject(obj) {
        const splittedShaderCode = Utility_1.default._splitByLineFeedCode(obj.code);
        const reflection = new Reflection_1.default(splittedShaderCode, obj.shaderStage);
        return reflection;
    }
    // =========================================================================================================
    // private functions
    // =========================================================================================================
    static __copyShaderityObject(obj) {
        const copiedObj = {
            code: obj.code,
            shaderStage: obj.shaderStage,
            isFragmentShader: obj.isFragmentShader,
        };
        return copiedObj;
    }
}
exports.default = Shaderity;


/***/ }),

/***/ "./src/main/ShaderityObjectCreator.ts":
/*!********************************************!*\
  !*** ./src/main/ShaderityObjectCreator.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __nested_webpack_require_46797__) {

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Utility_1 = __importDefault(__nested_webpack_require_46797__(/*! ./Utility */ "./src/main/Utility.ts"));
/**
 * This class creates a shaderity object.
 */
class ShaderityObjectCreator {
    constructor(shaderStage) {
        this.__functionIdCount = 0;
        this.__defineDirectiveNames = [];
        this.__extensions = [];
        this.__globalPrecision = {
            int: 'highp',
            float: 'highp',
            sampler2D: 'highp',
            samplerCube: 'highp',
            sampler3D: 'highp',
            sampler2DArray: 'highp',
            isampler2D: 'highp',
            isamplerCube: 'highp',
            isampler3D: 'highp',
            isampler2DArray: 'highp',
            usampler2D: 'highp',
            usamplerCube: 'highp',
            usampler3D: 'highp',
            usampler2DArray: 'highp',
            sampler2DShadow: 'highp',
            samplerCubeShadow: 'highp',
            sampler2DArrayShadow: 'highp',
        };
        this.__structDefinitions = [];
        this.__globalConstantValues = [];
        this.__globalConstantStructValues = [];
        this.__attributes = []; // for vertex shader only
        this.__varyings = [];
        this.__uniforms = [];
        this.__uniformStructs = [];
        this.__uniformBufferObjects = [];
        this.__functions = []; // first index represent dependency level
        this.__mainFunctionCode = 'void main() {}';
        this.__outputColorVariableName = 'renderTarget0'; // for fragment shader only
        this.__shaderStage = shaderStage;
    }
    // =========================================================================================================
    // add parameters functions
    // =========================================================================================================
    addDefineDirective(defineDirectiveName) {
        const isDuplicate = this.__defineDirectiveNames.some(name => name === defineDirectiveName);
        if (isDuplicate) {
            console.warn('addDefineDirective: this define directive is already set');
            return;
        }
        this.__defineDirectiveNames.push(defineDirectiveName);
    }
    addExtension(extensionName, behavior = 'enable') {
        const isDuplicate = this.__extensions.some(extension => extension.extensionName === extensionName);
        if (isDuplicate) {
            console.warn('addExtension: this extension is already set');
            return;
        }
        this.__extensions.push({
            extensionName,
            behavior
        });
    }
    // only define types
    addStructDefinition(structName, memberObjects) {
        const isDuplicate = this.__structDefinitions.some(structDefinition => structDefinition.structName === structName);
        if (isDuplicate) {
            console.error(`addStructDefinition: duplicate struct type name ${structName}`);
            return;
        }
        this.__structDefinitions.push({
            structName,
            memberObjects,
        });
    }
    addGlobalConstantValue(variableName, type, values) {
        const isDuplicate = this.__globalConstantValues.some(globalConstantValue => globalConstantValue.variableName === variableName);
        if (isDuplicate) {
            console.error(`addGlobalConstantValue: duplicate variable name ${variableName}`);
            return;
        }
        const isValidComponentNumber = Utility_1.default._isValidComponentCount(type, values);
        if (!isValidComponentNumber) {
            console.error(`addGlobalConstantValue: the component count of ${variableName} is invalid`);
            return;
        }
        const isIntType = Utility_1.default._isIntType(type);
        if (isIntType) {
            const existNonIntegerValue = ShaderityObjectCreator.__existNonIntegerValue(values);
            if (existNonIntegerValue) {
                console.warn(`addGlobalConstantValue: non-integer value is set to ${variableName}`);
            }
        }
        this.__globalConstantValues.push({
            variableName,
            type,
            values,
        });
    }
    // need to define struct by the addStructDefinition method
    // validate that the corresponding structure is defined by the __createGlobalConstantStructValueShaderCode method
    addGlobalConstantStructValue(structName, variableName, values) {
        const isDuplicate = this.__globalConstantStructValues.some(structValue => structValue.variableName === variableName);
        if (isDuplicate) {
            console.error(`addGlobalConstantStructValue: duplicate variable name ${variableName}`);
            return;
        }
        this.__globalConstantStructValues.push({
            variableName,
            structName,
            values,
        });
    }
    addAttributeDeclaration(variableName, type, options) {
        if (this.__shaderStage !== 'vertex') {
            console.error('addAttribute: this method is for vertex shader only');
            return;
        }
        const isDuplicate = this.__attributes.some(attribute => attribute.variableName === variableName);
        if (isDuplicate) {
            console.error(`addAttribute: duplicate variable name ${variableName}`);
            return;
        }
        this.__attributes.push({
            variableName,
            type,
            precision: options === null || options === void 0 ? void 0 : options.precision,
            location: options === null || options === void 0 ? void 0 : options.location,
        });
    }
    addVaryingDeclaration(variableName, type, options) {
        const isDuplicate = this.__varyings.some(varying => varying.variableName === variableName);
        if (isDuplicate) {
            console.error(`addVarying: duplicate variable name ${variableName}`);
            return;
        }
        const isIntType = Utility_1.default._isIntType(type);
        let interpolationType = options === null || options === void 0 ? void 0 : options.interpolationType;
        if (isIntType && interpolationType !== 'flat') {
            if (interpolationType != null) {
                console.error(`addVarying: the interpolationType must be flat for integer types`);
                return;
            }
            else {
                console.warn(`addVarying: set the interpolationType of integer types to flat to avoid compilation error`);
                interpolationType = 'flat';
            }
        }
        this.__varyings.push({
            variableName,
            type,
            precision: options === null || options === void 0 ? void 0 : options.precision,
            interpolationType,
        });
    }
    addUniformDeclaration(variableName, type, options) {
        const isDuplicate = this.__uniforms.some(uniform => uniform.variableName === variableName);
        if (isDuplicate) {
            console.error(`addUniform: duplicate variable name ${variableName}`);
            return;
        }
        if (type === 'bool' && (options === null || options === void 0 ? void 0 : options.precision) != null) {
            console.warn(`addUniform: remove the specification of precision for bool type to avoid compilation error`);
            options.precision = undefined;
        }
        this.__uniforms.push({
            variableName,
            type,
            precision: options === null || options === void 0 ? void 0 : options.precision,
        });
    }
    // need to define struct by the addStructDefinition method
    addUniformStructDeclaration(structName, variableName) {
        const isDuplicate = this.__uniformStructs.some(uniformStruct => uniformStruct.variableName === variableName);
        if (isDuplicate) {
            console.error(`addUniformStructDeclaration: duplicate variable name ${variableName}`);
            return;
        }
        this.__uniformStructs.push({
            variableName,
            structName,
        });
    }
    // for es3
    addUniformBufferObjectDeclaration(blockName, variableObjects, options) {
        const isDuplicateBlockName = this.__uniformBufferObjects.some(ubo => ubo.blockName === blockName);
        if (isDuplicateBlockName) {
            console.error(`addUniformBufferObjectDeclaration: duplicate block name ${blockName}`);
            return;
        }
        for (const ubo of this.__uniformBufferObjects) {
            for (const uboVariableObject of ubo.variableObjects) {
                for (const variableObject of variableObjects) {
                    if (uboVariableObject.variableName === variableObject.variableName) {
                        console.error(`addUniformBufferObjectDeclaration: duplicate variable name ${variableObject.variableName}`);
                        return;
                    }
                }
            }
        }
        this.__uniformBufferObjects.push({
            blockName,
            variableObjects,
            instanceName: options === null || options === void 0 ? void 0 : options.instanceName,
        });
    }
    // the return value Id is a value to delete the function
    // the main function is defined (updated) by the updateMainFunction method
    addFunctionDefinition(functionCode, options) {
        var _a, _b;
        const functionId = this.__functionIdCount++;
        const dependencyLevel = (_a = options === null || options === void 0 ? void 0 : options.dependencyLevel) !== null && _a !== void 0 ? _a : 0;
        this.__functions[dependencyLevel] = (_b = this.__functions[dependencyLevel]) !== null && _b !== void 0 ? _b : [];
        this.__functions[dependencyLevel].push({
            functionCode,
            functionId
        });
        return functionId;
    }
    // =========================================================================================================
    // update parameters functions
    // =========================================================================================================
    updateGlobalPrecision(precision) {
        Object.assign(this.__globalPrecision, precision);
    }
    updateStructDefinition(structName, memberObjects) {
        const matchedIndex = this.__structDefinitions.findIndex(structDefinition => structDefinition.structName === structName);
        if (matchedIndex === -1) {
            console.error(`updateStructDefinition: the struct type name ${structName} is not exist`);
            return;
        }
        this.__structDefinitions[matchedIndex].memberObjects = memberObjects;
    }
    updateGlobalConstantValue(variableName, values) {
        const matchedIndex = this.__globalConstantValues.findIndex(globalConstantValue => globalConstantValue.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`updateGlobalConstantValue: the variable name ${variableName} is not exist`);
            return;
        }
        const type = this.__globalConstantValues[matchedIndex].type;
        const isValidComponentNumber = Utility_1.default._isValidComponentCount(type, values);
        if (!isValidComponentNumber) {
            console.error('updateGlobalConstantValue: the component count is invalid');
            return;
        }
        const isIntType = Utility_1.default._isIntType(type);
        if (isIntType) {
            const existNonIntegerValue = ShaderityObjectCreator.__existNonIntegerValue(values);
            if (existNonIntegerValue) {
                console.warn(`updateGlobalConstantValue: the ${variableName} has a non-integer value.`);
            }
        }
        this.__globalConstantValues[matchedIndex].values = values;
    }
    updateGlobalConstantStructValue(variableName, values) {
        const matchedIndex = this.__globalConstantStructValues.findIndex(structValue => structValue.variableName === variableName);
        if (matchedIndex === -1) {
            console.error(`updateGlobalConstantStructValue:  the variable name ${variableName} is not exist`);
            return;
        }
        this.__globalConstantStructValues[matchedIndex].values = values;
    }
    updateMainFunction(mainFunctionCodeInner) {
        this.__mainFunctionCode = mainFunctionCodeInner;
    }
    // specify the name of the output color variable from the main function in the fragment shader.
    // users have to assign the result of fragment shader calculation to this variable.
    updateOutputColorVariableName(outputColorVariableName) {
        if (this.__shaderStage !== 'fragment') {
            console.error('updateOutputColorVariableName: this method is for fragment shader only');
            return;
        }
        if (outputColorVariableName.length === 0) {
            console.error('updateOutputColorVariableName: invalid outColorVariableName');
            return;
        }
        this.__outputColorVariableName = outputColorVariableName;
    }
    // =========================================================================================================
    // remove parameters functions
    // =========================================================================================================
    removeDefineDirective(defineDirectiveName) {
        const matchedIndex = this.__defineDirectiveNames.indexOf(defineDirectiveName);
        if (matchedIndex === -1) {
            console.warn('removedDefineDirective: this define directive is not exist');
            return;
        }
        this.__defineDirectiveNames.splice(matchedIndex, 1);
    }
    removeExtension(extensionName) {
        const matchedIndex = this.__extensions.findIndex(extension => extension.extensionName === extensionName);
        if (matchedIndex === -1) {
            console.warn('removeExtension: this extension is not exist');
            return;
        }
        this.__extensions.splice(matchedIndex, 1);
    }
    removeStructDefinition(structName) {
        const matchedIndex = this.__structDefinitions.findIndex(structDefinition => structDefinition.structName === structName);
        if (matchedIndex === -1) {
            console.error(`removeStructDefinition: the struct type name ${structName} is not exist`);
            return;
        }
        this.__structDefinitions.splice(matchedIndex, 1);
    }
    removeGlobalConstantValue(variableName) {
        const matchedIndex = this.__globalConstantValues.findIndex(globalConstantValue => globalConstantValue.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`removeGlobalConstantValue: the variable name ${variableName} is not exist`);
            return;
        }
        this.__globalConstantValues.splice(matchedIndex, 1);
    }
    removeGlobalConstantStructValue(variableName) {
        const matchedIndex = this.__globalConstantStructValues.findIndex(structValue => structValue.variableName === variableName);
        if (matchedIndex === -1) {
            console.error(`updateGlobalConstantStructValue:  the variable name ${variableName} is not exist`);
            return;
        }
        this.__globalConstantStructValues.splice(matchedIndex, 1);
    }
    removeAttributeDeclaration(variableName) {
        const matchedIndex = this.__attributes.findIndex(attribute => attribute.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`removeAttribute: the variable name ${variableName} is not exist`);
            return;
        }
        this.__attributes.splice(matchedIndex, 1);
    }
    removeVaryingDeclaration(variableName) {
        const matchedIndex = this.__varyings.findIndex(varying => varying.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`removeVarying: the variable name ${variableName} is not exist`);
            return;
        }
        this.__varyings.splice(matchedIndex, 1);
    }
    removeUniformDeclaration(variableName) {
        const matchedIndex = this.__uniforms.findIndex(uniform => uniform.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`removeUniform: the variable name ${variableName} is not exist`);
            return;
        }
        this.__uniforms.splice(matchedIndex, 1);
    }
    removeUniformStructDeclaration(variableName) {
        const matchedIndex = this.__uniformStructs.findIndex(uniformStruct => uniformStruct.variableName === variableName);
        if (matchedIndex === -1) {
            console.warn(`removeUniformStructDeclaration: the variable name ${variableName} is not exist`);
            return;
        }
        this.__uniformStructs.splice(matchedIndex, 1);
    }
    removeUniformBufferObjectDeclaration(blockName) {
        const matchedIndex = this.__uniformBufferObjects.findIndex(ubo => ubo.blockName === blockName);
        if (matchedIndex === -1) {
            console.warn(`removeUniformStructDeclaration: the variable name ${blockName} is not exist`);
            return;
        }
        this.__uniformBufferObjects.splice(matchedIndex, 1);
    }
    removeFunctionDefinition(functionId) {
        this.__fillEmptyFunctions();
        // id is too small or too big
        if (functionId < 0 || functionId >= this.__functionIdCount) {
            console.warn('removeFunctionDefinition: invalid function id');
        }
        for (const functionObjects of this.__functions) {
            const matchedIndex = functionObjects.findIndex(functionObject => functionObject.functionId === functionId);
            if (matchedIndex !== -1) {
                functionObjects.splice(matchedIndex, 1);
                return;
            }
        }
        console.warn(`removeFunctionDefinition: not found the function of functionId ${functionId}`);
    }
    // =========================================================================================================
    // create shaderity object function
    // =========================================================================================================
    createShaderityObject() {
        const shaderityObj = {
            code: this.__createShaderCode(),
            shaderStage: this.__shaderStage,
            isFragmentShader: this.__shaderStage === 'fragment',
        };
        return shaderityObj;
    }
    // =========================================================================================================
    // private methods
    // =========================================================================================================
    static __existNonIntegerValue(values) {
        for (const value of values) {
            if (!Number.isInteger(value)) {
                return true;
            }
        }
        return false;
    }
    // TODO: implement shader code import feature (low priority)
    // public importShaderCode(code: string) {}
    // need to apply Shaderity.transformToGLSLES1, transformToGLSLES3 or transformTo method
    __createShaderCode() {
        this.__fillEmptyFunctions();
        const code = `#version 300 es\n\n`
            + this.__createDefineDirectiveShaderCode()
            + this.__createExtensionShaderCode()
            + this.__createGlobalPrecisionShaderCode()
            + this.__createStructDefinitionShaderCode()
            + this.__createGlobalConstantValueShaderCode()
            + this.__createGlobalConstantStructValueShaderCode()
            + this.__createAttributeDeclarationShaderCode()
            + this.__createVaryingDeclarationShaderCode()
            + this.__createOutputColorDeclarationShaderCode()
            + this.__createUniformDeclarationShaderCode()
            + this.__createUniformStructDeclarationShaderCode()
            + this.__createUniformBufferObjectShaderCode()
            + this.__createFunctionDefinitionShaderCode()
            + this.__createMainFunctionDefinitionShaderCode();
        return code;
    }
    __fillEmptyFunctions() {
        var _a;
        for (let i = 0; i < this.__functions.length; i++) {
            this.__functions[i] = (_a = this.__functions[i]) !== null && _a !== void 0 ? _a : [];
        }
    }
    __createDefineDirectiveShaderCode() {
        let shaderCode = '';
        for (const defineDirectiveName of this.__defineDirectiveNames) {
            shaderCode += `#define ${defineDirectiveName}\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createExtensionShaderCode() {
        let shaderCode = '';
        for (const extension of this.__extensions) {
            shaderCode += `#extension ${extension.extensionName}: ${extension.behavior}\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    //TODO: remove needless precisions
    __createGlobalPrecisionShaderCode() {
        let shaderCode = '';
        for (const type in this.__globalPrecision) {
            const precisionType = type;
            const precisionQualifier = this.__globalPrecision[precisionType];
            shaderCode += `precision ${precisionQualifier} ${precisionType};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createStructDefinitionShaderCode() {
        let shaderCode = '';
        for (const structDefinition of this.__structDefinitions) {
            shaderCode += `struct ${structDefinition.structName} {\n`;
            for (let i = 0; i < structDefinition.memberObjects.length; i++) {
                const variable = structDefinition.memberObjects[i];
                shaderCode += `  `;
                if (variable.precision != null) {
                    shaderCode += `${variable.precision} `;
                }
                shaderCode += `${variable.type} ${variable.memberName};\n`;
            }
            shaderCode += `};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createGlobalConstantValueShaderCode() {
        let shaderCode = '';
        for (const globalConstantValue of this.__globalConstantValues) {
            const type = globalConstantValue.type;
            const variableName = globalConstantValue.variableName;
            const value = globalConstantValue.values;
            shaderCode += `const ${type} ${variableName} = ${type}(`;
            for (let i = 0; i < value.length; i++) {
                shaderCode += value[i] + ', ';
            }
            shaderCode = shaderCode.replace(/,\s$/, ');\n');
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createGlobalConstantStructValueShaderCode() {
        let shaderCode = '';
        for (const structValue of this.__globalConstantStructValues) {
            const matchedIndex = this.__structDefinitions.findIndex(definition => definition.structName === structValue.structName);
            if (matchedIndex === -1) {
                console.error(`__createGlobalConstantStructValueShaderCode: the struct type ${structValue.structName} is not defined`);
                continue;
            }
            shaderCode += `const ${structValue.structName} ${structValue.variableName} = ${structValue.structName} (\n`;
            const structDefinition = this.__structDefinitions[matchedIndex];
            if (structDefinition.memberObjects.length !== Object.keys(structValue.values).length) {
                console.error(`__createGlobalConstantStructValueShaderCode: Invalid number of variables that ${structValue.variableName} has`);
                continue;
            }
            const hasSamplerType = structDefinition.memberObjects.some(memberObject => Utility_1.default._isSamplerType(memberObject.type));
            if (hasSamplerType) {
                console.error(`__createGlobalConstantStructValueShaderCode: ConstantStructValue (${structValue.variableName}) cannot have sampler type parameter`);
                continue;
            }
            for (let i = 0; i < structDefinition.memberObjects.length; i++) {
                const variableName = structDefinition.memberObjects[i].memberName;
                const value = structValue.values[variableName];
                if (value == null) {
                    console.error(`__createGlobalConstantStructValueShaderCode: ${structValue.variableName} does not have the value of ${variableName}`);
                    continue;
                }
                const type = structDefinition.memberObjects[i].type;
                const isValidComponentNumber = Utility_1.default._isValidComponentCount(type, value);
                if (!isValidComponentNumber) {
                    console.error(`__createGlobalConstantStructValueShaderCode: the component count of ${variableName} in ${structValue.variableName} is invalid`);
                    continue;
                }
                shaderCode += `  ${type}(`;
                for (let i = 0; i < value.length; i++) {
                    shaderCode += value[i] + ', ';
                }
                shaderCode = shaderCode.replace(/,\s$/, '),\n');
            }
            shaderCode = shaderCode.replace(/,\n$/, '\n);\n');
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createAttributeDeclarationShaderCode() {
        let shaderCode = '';
        for (const attribute of this.__attributes) {
            if (attribute.location != null) {
                shaderCode += `layout (location = ${attribute.location}) `;
            }
            shaderCode += `in `;
            if (attribute.precision != null) {
                shaderCode += `${attribute.precision} `;
            }
            shaderCode += `${attribute.type} ${attribute.variableName};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createVaryingDeclarationShaderCode() {
        let shaderCode = '';
        for (const varying of this.__varyings) {
            if (varying.interpolationType != null) {
                shaderCode += `${varying.interpolationType} `;
            }
            shaderCode += this.__shaderStage == 'vertex' ? `out ` : `in `;
            if (varying.precision != null) {
                shaderCode += `${varying.precision} `;
            }
            shaderCode += `${varying.type} ${varying.variableName};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    //TODO: translate when glsl es1
    __createOutputColorDeclarationShaderCode() {
        if (this.__shaderStage !== 'fragment') {
            return '';
        }
        return `layout(location = 0) out vec4 ${this.__outputColorVariableName};\n\n`;
    }
    __createUniformDeclarationShaderCode() {
        let shaderCode = '';
        for (const uniform of this.__uniforms) {
            shaderCode += `uniform `;
            if (uniform.precision != null) {
                shaderCode += `${uniform.precision} `;
            }
            shaderCode += `${uniform.type} ${uniform.variableName};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createUniformStructDeclarationShaderCode() {
        let shaderCode = '';
        for (const uniformStruct of this.__uniformStructs) {
            const structName = uniformStruct.structName;
            const existStructDefinition = this.__structDefinitions.some(definition => definition.structName === structName);
            if (!existStructDefinition) {
                console.error(`__createUniformStructDeclarationShaderCode: the struct type ${structName} is not defined`);
                continue;
            }
            shaderCode += `uniform ${structName} ${uniformStruct.variableName};\n`;
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createUniformBufferObjectShaderCode() {
        let shaderCode = '';
        for (const ubo of this.__uniformBufferObjects) {
            shaderCode += `layout (std140) uniform ${ubo.blockName} {\n`;
            for (let i = 0; i < ubo.variableObjects.length; i++) {
                const variableObj = ubo.variableObjects[i];
                shaderCode += `  ${variableObj.type} ${variableObj.variableName};\n`;
            }
            if (ubo.instanceName != null) {
                shaderCode += `} ${ubo.instanceName};\n`;
            }
            else {
                shaderCode += `};\n`;
            }
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createFunctionDefinitionShaderCode() {
        let shaderCode = '';
        for (let i = 0; i < this.__functions.length; i++) {
            const functionObjects = this.__functions[i];
            for (let j = 0; j < functionObjects.length; j++) {
                shaderCode += functionObjects[j].functionCode + `\n`;
            }
        }
        return Utility_1.default._addLineFeedCodeIfNotNullString(shaderCode);
    }
    __createMainFunctionDefinitionShaderCode() {
        return this.__mainFunctionCode + `\n`;
    }
}
exports.default = ShaderityObjectCreator;


/***/ }),

/***/ "./src/main/Utility.ts":
/*!*****************************!*\
  !*** ./src/main/Utility.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
class Utility {
    static _splitByLineFeedCode(source) {
        return source.split(/\r\n|\n/);
    }
    static _joinSplittedLine(splittedLine) {
        return splittedLine.join('\n');
    }
    static _addLineFeedCodeIfNotNullString(source) {
        return source === '' ? source : source + '\n';
    }
    static _componentNumber(type) {
        let componentNumber;
        if (type === 'float' || type === 'int' || type === 'bool' || type === 'uint' ||
            type === 'sampler2D' || type === 'samplerCube' || type === 'sampler3D' || type === 'sampler2DArray' ||
            type === 'isampler2D' || type === 'isamplerCube' || type === 'isampler3D' || type === 'isampler2DArray' ||
            type === 'usampler2D' || type === 'usamplerCube' || type === 'usampler3D' || type === 'usampler2DArray' ||
            type === 'sampler2DShadow' || type === 'samplerCubeShadow' || type === 'sampler2DArrayShadow') {
            componentNumber = 1;
        }
        else if (type === 'vec2' || type === 'ivec2' || type === 'bvec2' || type === 'uvec2') {
            componentNumber = 2;
        }
        else if (type === 'vec3' || type === 'ivec3' || type === 'bvec3' || type === 'uvec3') {
            componentNumber = 3;
        }
        else if (type === 'vec4' || type === 'ivec4' || type === 'bvec4' || type === 'uvec4' || type === 'mat2' || type === 'mat2x2') {
            componentNumber = 4;
        }
        else if (type === 'mat2x3' || type === 'mat3x2') {
            componentNumber = 6;
        }
        else if (type === 'mat2x4' || type === 'mat4x2') {
            componentNumber = 8;
        }
        else if (type === 'mat3' || type === 'mat3x3') {
            componentNumber = 9;
        }
        else if (type === 'mat3x4' || type === 'mat4x3') {
            componentNumber = 12;
        }
        else if (type === 'mat4' || type === 'mat4x4') {
            componentNumber = 16;
        }
        else {
            // unknown type
            componentNumber = 0;
            console.error('Utility._componentNumber: detect unknown type');
        }
        return componentNumber;
    }
    static _isIntType(type) {
        if (type === 'int' || type === 'ivec2' || type === 'ivec3' || type === 'ivec4' ||
            type === 'uint' || type === 'uvec2' || type === 'uvec3' || type === 'uvec4') {
            return true;
        }
        else {
            return false;
        }
    }
    static _isValidComponentCount(type, values) {
        const validComponentCount = Utility._componentNumber(type);
        if (validComponentCount === values.length) {
            return true;
        }
        return false;
    }
    static _isSamplerType(type) {
        if (type === 'sampler2D' || type === 'samplerCube' || type === 'sampler3D' || type === 'sampler2DArray' ||
            type === 'isampler2D' || type === 'isamplerCube' || type === 'isampler3D' || type === 'isampler2DArray' ||
            type === 'usampler2D' || type === 'usamplerCube' || type === 'usampler3D' || type === 'usampler2DArray' ||
            type === 'sampler2DShadow' || type === 'samplerCubeShadow' || type === 'sampler2DArrayShadow') {
            return true;
        }
        else {
            return false;
        }
    }
}
exports.default = Utility;


/***/ })

/******/ });


/***/ }),

/***/ "./src/cjs.ts":
/*!********************!*\
  !*** ./src/cjs.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ "./src/index.ts");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index__WEBPACK_IMPORTED_MODULE_0__);


/***/ }),

/***/ "./src/effekseer/EffekseerComponent.ts":
/*!*********************************************!*\
  !*** ./src/effekseer/EffekseerComponent.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EffekseerComponent": () => (/* binding */ EffekseerComponent)
/* harmony export */ });
/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/components/Transform/TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");
/* harmony import */ var _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/// <reference path="../../vendor/effekseer.d.ts" />












class EffekseerComponent extends _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.type = 'efk';
        this.playJustAfterLoaded = false;
        this.isLoop = false;
        this.isPause = false;
        this.randomSeed = -1;
        this.isImageLoadWithCredential = false;
        this.__speed = 1;
        this.isLoadEffect = false;
        _foundation_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.noWebGLTex2DStateCache = true;
    }
    static get componentTID() {
        return _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__.WellKnownComponentTIDs.EffekseerComponentTID;
    }
    cancelLoop() {
        clearInterval(this.__timer);
    }
    isPlay() {
        return _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__handle) ? this.__handle.exists : false;
    }
    play() {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__context)) {
            console.warn('No Effekseer context yet');
            return false;
        }
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__effect)) {
            console.warn('No Effekseer effect yet');
            return false;
        }
        this.stop();
        this.isPause = false;
        this.__handle = this.__context.play(this.__effect, 0, 0, 0);
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__handle) &&
            _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__handle.setRandomSeed) &&
            this.randomSeed > 0) {
            this.__handle.setRandomSeed(this.randomSeed);
        }
        // if (this.isLoop) {
        //   this.__timer = setTimeout(() => {
        //     this.play();
        //   }, 500);
        // }
        return true;
    }
    continue() {
        this.isPause = false;
    }
    pause() {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__handle)) {
            this.isPause = true;
            clearInterval(this.__timer);
        }
    }
    stop() {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__handle)) {
            this.__handle.stop();
            this.isPause = true;
            clearInterval(this.__timer);
        }
    }
    set playSpeed(val) {
        if (this.__handle) {
            this.__handle.setSpeed(val);
        }
        this.__speed = val;
    }
    get playSpeed() {
        return this.__speed;
    }
    setTime(targetSec) {
        if (!this.play()) {
            return false;
        }
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__context)) {
            return false;
        }
        let time = 0;
        const oneTime = 0.0166;
        time = oneTime;
        while (time <= targetSec) {
            this.__context.update(time / oneTime);
            time += oneTime;
            if (targetSec < time) {
                const exceededSec = targetSec - time;
                const remainSec = oneTime - exceededSec;
                this.__context.update(remainSec / oneTime);
                break;
            }
        }
        this.pause();
        return true;
    }
    set translate(vec) {
        if (this.__handle) {
            this.__handle.setLocation(vec.x, vec.y, vec.z);
        }
        this.__transformComponent.translate = vec;
    }
    get translate() {
        return this.__transformComponent.translate;
    }
    set rotate(vec) {
        if (this.__handle) {
            this.__handle.setRotation(vec.x, vec.y, vec.z);
        }
        this.__transformComponent.rotate = vec;
    }
    get rotate() {
        return this.__transformComponent.rotate;
    }
    set scale(vec) {
        if (this.__handle) {
            this.__handle.setScale(vec.x, vec.y, vec.z);
        }
        this.__transformComponent.scale = vec;
    }
    get scale() {
        return this.__transformComponent.scale;
    }
    $create() {
        this.__sceneGraphComponent = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__.SceneGraphComponent);
        this.__transformComponent = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_4__.TransformComponent);
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Load);
    }
    __createEffekseerContext() {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.uri) && _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.arrayBuffer)) {
            // console.error('Effekseer data not found.');
            return false;
        }
        effekseer.setImageCrossOrigin(this.isImageLoadWithCredential ? 'use-credentials' : '');
        this.__context = effekseer.createContext();
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__context)) {
            console.error('Effekseer context creation fails');
            return false;
        }
        const webGLResourceRepository = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        EffekseerComponent.__isInitialized = true;
        const gl = glw.getRawContext();
        const data = _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.uri) ? this.uri : this.arrayBuffer;
        this.__context.init(gl);
        const onLoad = () => {
            if (this.playJustAfterLoaded) {
                this.play();
                this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
            }
        };
        const onError = (message, path) => {
            console.error(message, path);
        };
        if (this.type === 'efkpkg') {
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(EffekseerComponent.Unzip)) {
                console.error('Please Set an Unzip object to EffekseerComponent.Unzip');
                return false;
            }
            this.__effect = this.__context.loadEffectPackage(data, EffekseerComponent.Unzip, 1.0, onLoad.bind(this), onError.bind(this));
        }
        else {
            this.__effect = this.__context.loadEffect(data, 1.0, onLoad.bind(this), onError.bind(this));
        }
        return true;
    }
    $load() {
        if (EffekseerComponent.__isInitialized) {
            return;
        }
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__context) && _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__effect)) {
            const useWASM = _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(EffekseerComponent.wasmModuleUri);
            if (useWASM) {
                effekseer.initRuntime(EffekseerComponent.wasmModuleUri, () => {
                    const succeed = this.__createEffekseerContext();
                    if (succeed) {
                        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
                    }
                }, () => {
                    console.error('Failed to initialize Effekseer');
                });
            }
            else {
                const succeed = this.__createEffekseerContext();
                if (succeed) {
                    this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
                }
            }
        }
    }
    $logic() {
        if (!this.isPause) {
            // Playing ...
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__context) && _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is["false"](this.isPause)) {
                this.__context.update();
            }
        }
        if (this.__handle != null) {
            const worldMatrix = EffekseerComponent.__tmp_identityMatrix_0.copyComponents(this.__sceneGraphComponent.worldMatrixInner);
            this.__handle.setMatrix(worldMatrix._v);
            this.__handle.setSpeed(this.__speed);
        }
        if (this.isPause) {
            // If Pause mode...
            this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Render);
            return;
        }
        if (this.isLoop) {
            if (!this.isPlay()) {
                this.play();
            }
        }
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Render);
    }
    $render() {
        // const webGLResourceRepository =
        //   CGAPIResourceRepository.getWebGLResourceRepository();
        // webGLResourceRepository.setWebGLStateToDefault();
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__effect)) {
            this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Load);
            return;
        }
        const cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__.ComponentRepository.getComponent(_foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent, _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent.current);
        const viewMatrix = EffekseerComponent.__tmp_identityMatrix_0;
        const projectionMatrix = EffekseerComponent.__tmp_identityMatrix_1;
        if (cameraComponent) {
            viewMatrix.copyComponents(cameraComponent.viewMatrix);
            projectionMatrix.copyComponents(cameraComponent.projectionMatrix);
        }
        else {
            viewMatrix.identity();
            projectionMatrix.identity();
        }
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.exist(this.__context)) {
            this.__context.setProjectionMatrix(projectionMatrix._v);
            this.__context.setCameraMatrix(viewMatrix._v);
            this.__context.draw();
        }
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
    }
    static sort_$render(renderPass) {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is["false"](renderPass.toRenderEffekseerEffects)) {
            return [];
        }
        const components = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__.ComponentRepository.getComponentsWithType(EffekseerComponent);
        return components.map(c => c.componentSID);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class EffekseerEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getEffekseer() {
                return this.getComponentByComponentTID(EffekseerComponent.componentTID);
            }
        }
        (0, _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.applyMixins)(base, EffekseerEntity);
        return base;
    }
}
EffekseerComponent.ANIMATION_EVENT_PLAY = 0;
EffekseerComponent.ANIMATION_EVENT_PAUSE = 1;
EffekseerComponent.ANIMATION_EVENT_END = 2;
EffekseerComponent.wasmModuleUri = undefined;
EffekseerComponent.__isInitialized = false;
EffekseerComponent.__tmp_identityMatrix_0 = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__.MutableMatrix44.identity();
EffekseerComponent.__tmp_identityMatrix_1 = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__.MutableMatrix44.identity();
_foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__.ComponentRepository.registerComponentClass(EffekseerComponent);


/***/ }),

/***/ "./src/effekseer/index.ts":
/*!********************************!*\
  !*** ./src/effekseer/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Effekseer": () => (/* reexport safe */ _main__WEBPACK_IMPORTED_MODULE_0__.Effekseer),
/* harmony export */   "EffekseerComponent": () => (/* reexport safe */ _EffekseerComponent__WEBPACK_IMPORTED_MODULE_1__.EffekseerComponent)
/* harmony export */ });
/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main */ "./src/effekseer/main.ts");
/* harmony import */ var _EffekseerComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EffekseerComponent */ "./src/effekseer/EffekseerComponent.ts");




/***/ }),

/***/ "./src/effekseer/main.ts":
/*!*******************************!*\
  !*** ./src/effekseer/main.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Effekseer": () => (/* binding */ Effekseer)
/* harmony export */ });
/* harmony import */ var _EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EffekseerComponent */ "./src/effekseer/EffekseerComponent.ts");
/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/Transform/TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");
/* harmony import */ var _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");




const createEffekseerEntity = function () {
    const entity = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.createEntity();
    const entity1 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_2__.TransformComponent, entity);
    const entity2 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__.SceneGraphComponent, entity1);
    const entity3 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__.EffekseerComponent, entity2);
    return entity3;
};
const Effekseer = Object.freeze({
    EffekseerComponent: _EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__.EffekseerComponent,
    createEffekseerEntity,
});


/***/ }),

/***/ "./src/foundation/cameras/AbstractCameraController.ts":
/*!************************************************************!*\
  !*** ./src/foundation/cameras/AbstractCameraController.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractCameraController": () => (/* binding */ AbstractCameraController)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");


class AbstractCameraController {
    constructor() {
        this.zNearMax = 0.1;
        this.zFarScalingFactor = 100000;
        this.autoCalculateZNearAndZFar = true;
    }
    _calcZNearInner(camera, eyePosition, eyeDirection) {
        if (this.autoCalculateZNearAndZFar && _misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(this.__targetEntity)) {
            const targetAABB = this.__targetEntity.getSceneGraph().worldAABB;
            const lengthOfCenterToEye = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.lengthBtw(eyePosition, targetAABB.centerPoint);
            // calc cos between eyeToTarget and eye direction
            const eyeToTargetDirectionX = targetAABB.centerPoint.x - eyePosition.x;
            const eyeToTargetDirectionY = targetAABB.centerPoint.y - eyePosition.y;
            const eyeToTargetDirectionZ = targetAABB.centerPoint.z - eyePosition.z;
            const cos = (eyeToTargetDirectionX * eyeDirection.x +
                eyeToTargetDirectionY * eyeDirection.y +
                eyeToTargetDirectionZ * eyeDirection.z) /
                (Math.hypot(eyeToTargetDirectionX, eyeToTargetDirectionY, eyeToTargetDirectionZ) *
                    eyeDirection.length());
            camera.zNearInner = Math.min(lengthOfCenterToEye * cos - targetAABB.lengthCenterToCorner, this.zNearMax);
        }
        else {
            camera.zNearInner = camera.zNear;
        }
    }
    _calcZFarInner(camera) {
        if (this.autoCalculateZNearAndZFar) {
            camera.zFarInner = camera.zNearInner * this.zFarScalingFactor;
        }
        else {
            camera.zNearInner = camera.zFar;
        }
    }
}


/***/ }),

/***/ "./src/foundation/cameras/ICameraController.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/cameras/ICameraController.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/cameras/OrbitCameraController.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/cameras/OrbitCameraController.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OrbitCameraController": () => (/* binding */ OrbitCameraController)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _AbstractCameraController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AbstractCameraController */ "./src/foundation/cameras/AbstractCameraController.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _system_InputManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../system/InputManager */ "./src/foundation/system/InputManager.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");










class OrbitCameraController extends _AbstractCameraController__WEBPACK_IMPORTED_MODULE_6__.AbstractCameraController {
    constructor() {
        super();
        this.dollyScale = 2.0;
        this.scaleOfLengthCenterToCamera = 1.0;
        this.moveSpeed = 1;
        this.followTargetAABB = false;
        this.__fixedDolly = false;
        this.__fixedLengthOfCenterToEye = 1;
        this.__isMouseDown = false;
        this.__lastMouseDownTimeStamp = 0;
        this.__lastMouseUpTimeStamp = 0;
        this.__originalY = -1;
        this.__originalX = -1;
        this.__buttonNumber = 0;
        this.__mouse_translate_y = 0;
        this.__mouse_translate_x = 0;
        this.__efficiency = 1;
        this.__lengthOfCenterToEye = 1;
        this.__fovyBias = 1.0;
        this.__scaleOfTranslation = 2.8;
        this.__mouseTranslateVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__newEyeVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__newCenterVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__newUpVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__newTangentVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        // private __verticalAngleThreshold = 0;
        // private __verticalAngleOfVectors = 0;
        this.__isSymmetryMode = true;
        // private __doResetWhenCameraSettingChanged = false;
        this.__rot_bgn_x = 0;
        this.__rot_bgn_y = 0;
        this.__rot_x = 0;
        this.__rot_y = 0;
        this.__dolly = 0.5;
        this.__eyeVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__centerVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__upVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__scaleOfZNearAndZFar = 5000;
        this.__doPreventDefault = false;
        this.__isPressingShift = false;
        this.__isPressingCtrl = false;
        this.__pinchInOutControl = false;
        this.__pinchInOutOriginalDistance = null;
        this.__resetDollyTouchTime = 0;
        // private __controllerTranslate = MutableVector3.zero();
        this.__mouseDownFunc = this.__mouseDown.bind(this);
        this.__mouseUpFunc = this.__mouseUp.bind(this);
        this.__mouseMoveFunc = this.__mouseMove.bind(this);
        this.__touchDownFunc = this.__touchDown.bind(this);
        this.__touchUpFunc = this.__touchUp.bind(this);
        this.__touchMoveFunc = this.__touchMove.bind(this);
        this.__pinchInOutFunc = this.__pinchInOut.bind(this);
        this.__pinchInOutEndFunc = this.__pinchInOutEnd.bind(this);
        this.__mouseWheelFunc = this.__mouseWheel.bind(this);
        this.__mouseDblClickFunc = this.__mouseDblClick.bind(this);
        this.__contextMenuFunc = this.__contextMenu.bind(this);
        this.__pressShiftFunc = this.__pressShift.bind(this);
        this.__releaseShiftFunc = this.__releaseShift.bind(this);
        this.__pressCtrlFunc = this.__pressCtrl.bind(this);
        this.__releaseCtrlFunc = this.__releaseCtrl.bind(this);
        this.__resetDollyAndPositionFunc = this.__resetDollyAndPosition.bind(this);
        this.registerEventListeners();
    }
    setTarget(targetEntity) {
        this.__targetEntity = targetEntity;
        this.__originalTargetAABB = undefined;
    }
    getTarget() {
        return this.__targetEntity;
    }
    set doPreventDefault(flag) {
        this.__doPreventDefault = flag;
    }
    get doPreventDefault() {
        return this.__doPreventDefault;
    }
    __mouseDown(e) {
        this.__tryToPreventDefault(e);
        // if (this.isMouseDown) return;
        if (this.__isPressingCtrl)
            return;
        this.__originalX = e.clientX;
        this.__originalY = e.clientY;
        this.__rot_bgn_x = this.__rot_x;
        this.__rot_bgn_y = this.__rot_y;
        this.__isMouseDown = true;
        this.__lastMouseDownTimeStamp = e.timeStamp;
        console.log('original', this.__originalX, this.__originalY);
    }
    __mouseMove(e) {
        this.__tryToPreventDefault(e);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is["false"](this.isMouseDown))
            return;
        if (this.__isPressingCtrl)
            return;
        if (this.__buttonNumber === 0) {
            this.__buttonNumber = e.buttons;
        }
        const currentMouseX = e.clientX;
        const currentMouseY = e.clientY;
        console.log('currentMouse: ', currentMouseX, currentMouseY);
        switch (this.__buttonNumber) {
            case 1: // left
                if (this.__isPressingShift) {
                    this.__parallelTranslateControl(this.__originalX, this.__originalY, currentMouseX, currentMouseY);
                }
                else {
                    this.__rotateControl(this.__originalX, this.__originalY, currentMouseX, currentMouseY);
                    this.__rot_bgn_x = this.__rot_x;
                    this.__rot_bgn_y = this.__rot_y;
                }
                break;
            case 2: // right
                this.__zoomControl(this.__originalX, currentMouseX);
                break;
            case 4: // center
                this.__parallelTranslateControl(this.__originalX, this.__originalY, currentMouseX, currentMouseY);
                break;
            default:
                return;
        }
        this.__originalX = currentMouseX;
        this.__originalY = currentMouseY;
    }
    __mouseUp(e) {
        this.__buttonNumber = 0;
        this.__originalX = -1;
        this.__originalY = -1;
        this.__isMouseDown = false;
        this.__lastMouseUpTimeStamp = e.timeStamp;
    }
    __touchDown(e) {
        this.__tryToPreventDefault(e);
        if (e.touches.length === 1) {
            this.__originalX = e.touches[0].clientX;
            this.__originalY = e.touches[0].clientY;
            this.__rot_bgn_x = this.__rot_x;
            this.__rot_bgn_y = this.__rot_y;
        }
        else {
            this.__originalX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;
            this.__originalY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;
        }
        this.__isMouseDown = true;
        this.__lastMouseDownTimeStamp = e.timeStamp;
    }
    __touchMove(e) {
        this.__tryToPreventDefault(e);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is["false"](this.isMouseDown))
            return;
        let currentTouchX = e.touches[0].clientX;
        let currentTouchY = e.touches[0].clientY;
        if (e.touches.length === 1) {
            currentTouchX = e.touches[0].clientX;
            currentTouchY = e.touches[0].clientY;
            this.__rotateControl(this.__originalX, this.__originalY, currentTouchX, currentTouchY);
            this.__rot_bgn_x = this.__rot_x;
            this.__rot_bgn_y = this.__rot_y;
        }
        else {
            currentTouchX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;
            currentTouchY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;
            this.__parallelTranslateControl(this.__originalX, this.__originalY, currentTouchX, currentTouchY);
        }
        this.__originalX = currentTouchX;
        this.__originalY = currentTouchY;
    }
    __touchUp(e) {
        const touchNumber = e.touches.length;
        if (touchNumber === 0) {
            this.__originalX = -1;
            this.__originalY = -1;
        }
        else if (touchNumber === 1) {
            this.__originalX = e.touches[0].clientX;
            this.__originalY = e.touches[0].clientY;
            this.__rot_bgn_x = this.__rot_x;
            this.__rot_bgn_y = this.__rot_y;
        }
        else {
            this.__originalX = (e.touches[0].clientX + e.touches[1].clientX) * 0.5;
            this.__originalY = (e.touches[0].clientY + e.touches[1].clientY) * 0.5;
        }
        this.__isMouseDown = false;
        this.__lastMouseUpTimeStamp = e.timeStamp;
    }
    set rotX(value) {
        this.__rot_x = value;
    }
    get rotX() {
        return this.__rot_x;
    }
    set rotY(value) {
        this.__rot_y = value;
    }
    get rotY() {
        return this.__rot_y;
    }
    set maximumY(maximum_y) {
        this.__maximum_y = maximum_y;
    }
    set minimumY(minimum_y) {
        this.__minimum_y = minimum_y;
    }
    __rotateControl(originalX, originalY, currentX, currentY) {
        // calc rotation angle
        const delta_x = (currentX - originalX) * this.__efficiency * 0.3;
        const delta_y = (currentY - originalY) * this.__efficiency * 0.3;
        this.__rot_x = this.__rot_bgn_x - delta_x;
        this.__rot_y = this.__rot_bgn_y - delta_y;
        // check if rotation angle is within range
        // if (
        //   this.__verticalAngleThreshold - this.__verticalAngleOfVectors < this.__rot_y
        // ) {
        //          this._rot_y -= this._rot_y - (this._verticalAngleThreshold - this._verticalAngleOfVectors);
        // }
        // if (
        //   this.__rot_y < -this.__verticalAngleThreshold + this.__verticalAngleOfVectors
        // ) {
        //         this._rot_y += this._rot_y - (this._verticalAngleThreshold - this._verticalAngleOfVectors);
        // }
        if (this.__maximum_y != null && this.__rot_y > this.__maximum_y) {
            this.__rot_y = this.__maximum_y;
        }
        if (this.__minimum_y != null && this.__rot_y < this.__minimum_y) {
            this.__rot_y = this.__minimum_y;
        }
    }
    __zoomControl(originalValue, currentValue) {
        this.dolly -= ((currentValue - originalValue) / 1000) * this.__efficiency;
    }
    __parallelTranslateControl(originalX, originalY, currentX, currentY) {
        this.__mouse_translate_y =
            ((currentY - originalY) / 1000) * this.__efficiency;
        this.__mouse_translate_x =
            ((currentX - originalX) / 1000) * this.__efficiency;
        const scale = this.__fixedDolly
            ? 1.0
            : this.__lengthOfCenterToEye *
                this.__fovyBias *
                this.__scaleOfTranslation;
        const upDirTranslateVec = OrbitCameraController.__tmpVec3_0;
        upDirTranslateVec
            .copyComponents(this.__newUpVec)
            .normalize()
            .multiply(this.__mouse_translate_y)
            .multiply(scale);
        const tangentDirTranslateVec = OrbitCameraController.__tmpVec3_1;
        tangentDirTranslateVec
            .copyComponents(this.__newTangentVec)
            .normalize()
            .multiply(this.__mouse_translate_x)
            .multiply(scale);
        this.__mouseTranslateVec.add(upDirTranslateVec).add(tangentDirTranslateVec);
    }
    __getTouchesDistance(e) {
        const touches = e.touches;
        const diffX = touches[1].clientX - touches[0].clientX;
        const diffY = touches[1].clientY - touches[0].clientY;
        return Math.hypot(diffX, diffY);
    }
    __pinchInOut(e) {
        if (e.touches.length < 2)
            return;
        if (this.__pinchInOutOriginalDistance == null) {
            this.__pinchInOutOriginalDistance = this.__getTouchesDistance(e);
            return;
        }
        const currentDistance = this.__getTouchesDistance(e);
        const originalDistance = this.__pinchInOutOriginalDistance;
        if (!this.__pinchInOutControl) {
            if (Math.abs(currentDistance - originalDistance) > 35.0) {
                this.__pinchInOutOriginalDistance = currentDistance;
                this.__pinchInOutControl = true;
            }
            return;
        }
        const ratio = originalDistance / currentDistance;
        this.dolly *= Math.pow(ratio * this.__efficiency, 2.2 / 15.0);
        this.__pinchInOutOriginalDistance = currentDistance;
    }
    __pinchInOutEnd(e) {
        if (e.touches.length < 2) {
            this.__pinchInOutControl = false;
            this.__pinchInOutOriginalDistance = null;
        }
    }
    __tryToPreventDefault(evt) {
        if (this.__doPreventDefault) {
            evt.preventDefault();
        }
    }
    __mouseWheel(evt) {
        this.__tryToPreventDefault(evt);
        this.dolly += Math.sign(evt.deltaY) / 200;
    }
    __contextMenu(evt) {
        this.__tryToPreventDefault(evt);
    }
    set dolly(value) {
        value = Math.min(value, 1);
        value = Math.max(value, 0.0001);
        let gamma = Math.pow(value, 5);
        gamma = Math.max(gamma, 0.0001);
        this.__dolly = gamma;
    }
    get dolly() {
        return Math.pow(this.__dolly, 1 / 5);
    }
    __mouseDblClick(evt) {
        if (evt.shiftKey) {
            this.__mouseTranslateVec.zero();
        }
        else if (evt.ctrlKey) {
            this.__rot_y = 0;
            this.__rot_x = 0;
            this.__rot_bgn_y = 0;
            this.__rot_bgn_x = 0;
        }
    }
    __resetDollyAndPosition(e) {
        if (e.touches.length > 1)
            return;
        const currentTime = new Date().getTime();
        if (currentTime - this.__resetDollyTouchTime < 300) {
            this.dolly = Math.pow(0.5, 1.0 / 2.2);
            this.__mouseTranslateVec.zero();
            this.__rot_x = 0;
            this.__rot_y = 0;
        }
        else {
            this.__resetDollyTouchTime = currentTime;
        }
    }
    __pressShift(e) {
        if (e.shiftKey === true) {
            this.__isPressingShift = true;
        }
    }
    __releaseShift(e) {
        if (e.shiftKey === false) {
            this.__isPressingShift = false;
        }
    }
    __pressCtrl(e) {
        if (e.ctrlKey === true) {
            this.__isPressingCtrl = true;
        }
    }
    __releaseCtrl(e) {
        if (e.ctrlKey === false) {
            this.__isPressingCtrl = false;
        }
    }
    registerEventListeners() {
        let eventTargetDom = window;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.eventTargetDom)) {
            eventTargetDom = _core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.eventTargetDom;
        }
        if ('ontouchend' in document) {
            // touch devices
            _system_InputManager__WEBPACK_IMPORTED_MODULE_8__.InputManager.register(_system_InputManager__WEBPACK_IMPORTED_MODULE_8__.INPUT_HANDLING_STATE_CAMERACONTROLLER, [
                {
                    eventName: 'touchstart',
                    handler: this.__touchDownFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'touchmove',
                    handler: this.__touchMoveFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'touchend',
                    handler: this.__touchUpFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'touchmove',
                    handler: this.__pinchInOutFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'touchend',
                    handler: this.__pinchInOutEndFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'touchstart',
                    handler: this.__resetDollyAndPositionFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'contextmenu',
                    handler: this.__contextMenuFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'dblclick',
                    handler: this.__mouseDblClickFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
            ]);
        }
        else {
            // pc devices
            _system_InputManager__WEBPACK_IMPORTED_MODULE_8__.InputManager.register(_system_InputManager__WEBPACK_IMPORTED_MODULE_8__.INPUT_HANDLING_STATE_CAMERACONTROLLER, [
                {
                    eventName: 'mousedown',
                    handler: this.__mouseDownFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'mouseup',
                    handler: this.__mouseUpFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'mouseleave',
                    handler: this.__mouseUpFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'mousemove',
                    handler: this.__mouseMoveFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'keydown',
                    handler: this.__pressShiftFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'keyup',
                    handler: this.__releaseShiftFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'keydown',
                    handler: this.__pressCtrlFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'keyup',
                    handler: this.__releaseCtrlFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'contextmenu',
                    handler: this.__contextMenuFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'wheel',
                    handler: this.__mouseWheelFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
                {
                    eventName: 'dblclick',
                    handler: this.__mouseDblClickFunc,
                    options: {
                        passive: !this.__doPreventDefault,
                    },
                    classInstance: this,
                    eventTargetDom,
                },
            ]);
        }
    }
    unregisterEventListeners() {
        _system_InputManager__WEBPACK_IMPORTED_MODULE_8__.InputManager.unregister(_system_InputManager__WEBPACK_IMPORTED_MODULE_8__.INPUT_HANDLING_STATE_CAMERACONTROLLER);
    }
    __getFovyFromCamera(camera) {
        if (camera.fovy) {
            return camera.fovy;
        }
        else {
            return _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.radianToDegree(2 * Math.atan(Math.abs(camera.top - camera.bottom) / (2 * camera.zNear)));
        }
    }
    logic(cameraComponent) {
        this.__updateTargeting(cameraComponent);
        this.__calculateInfluenceOfController();
        this.__updateCameraComponent(cameraComponent);
    }
    /**
     * @private update center, eye and up vectors of OrbitCameraController
     */
    __updateTargeting(camera) {
        const eyeVec = camera.eye;
        const centerVec = camera._direction;
        const upVec = camera._up;
        const newEyeVec = this.__eyeVec;
        const newCenterVec = this.__centerVec;
        const newUpVec = this.__upVec.copyComponents(upVec);
        if (this.__targetEntity == null) {
            newEyeVec.copyComponents(eyeVec);
            newCenterVec.copyComponents(centerVec);
        }
        else {
            if (this.__originalTargetAABB == null) {
                const targetAABB = this.__targetEntity.tryToGetSceneGraph().worldAABB;
                this.__originalTargetAABB = targetAABB.clone();
            }
            // calc newCenterVec
            if (this.followTargetAABB) {
                const targetAABB = this.__targetEntity.tryToGetSceneGraph().worldAABB;
                newCenterVec.copyComponents(targetAABB.centerPoint);
            }
            else {
                newCenterVec.copyComponents(this.__originalTargetAABB.centerPoint);
            }
            // calc newEyeVec
            const centerToCameraVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.subtractTo(eyeVec, centerVec, newEyeVec);
            const centerToCameraVecNormalized = centerToCameraVec.normalize();
            let lengthCenterToCamera = this.__fixedDolly
                ? this.__fixedLengthOfCenterToEye
                : this.__originalTargetAABB.lengthCenterToCorner *
                    (1.0 + 1.0 / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(camera.fovy / 2.0))) *
                    this.scaleOfLengthCenterToCamera;
            if (Math.abs(lengthCenterToCamera) < 0.00001) {
                lengthCenterToCamera = 1;
            }
            centerToCameraVecNormalized
                .multiply(lengthCenterToCamera)
                .add(newCenterVec);
            const sg = camera.entity.tryToGetSceneGraph();
            if (sg != null) {
                const invMat = _math_Matrix44__WEBPACK_IMPORTED_MODULE_4__.Matrix44.invertTo(sg.worldMatrixInner, OrbitCameraController.__tmpMat44_0);
                invMat.multiplyVector3To(newCenterVec, newCenterVec);
                invMat.multiplyVector3To(newEyeVec, newEyeVec);
                invMat.multiplyVector3To(newUpVec, newUpVec);
            }
        }
    }
    /**
     * @private calculate up, eye, center and tangent vector with controller influence
     */
    __calculateInfluenceOfController() {
        const centerToEyeVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.subtractTo(this.__eyeVec, this.__centerVec, OrbitCameraController.__tmpVec3_0);
        if (this.__fixedDolly) {
            this.__lengthOfCenterToEye = this.__fixedLengthOfCenterToEye;
        }
        else {
            centerToEyeVec.multiply(this.__dolly * this.dollyScale);
            this.__lengthOfCenterToEye = centerToEyeVec.length();
        }
        const newUpVec = this.__newUpVec;
        const newEyeVec = this.__newEyeVec;
        const newCenterVec = this.__newCenterVec;
        const newTangentVec = this.__newTangentVec;
        if (this.__isSymmetryMode) {
            const projectedCenterToEyeVec = OrbitCameraController.__tmpVec3_1;
            projectedCenterToEyeVec.setComponents(centerToEyeVec.x, 0, centerToEyeVec.z);
            let horizontalAngleOfVectors = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.angleOfVectors(projectedCenterToEyeVec, OrbitCameraController.__tmp_up);
            const horizontalSign = Math.sign(projectedCenterToEyeVec.cross(OrbitCameraController.__tmp_up).y);
            horizontalAngleOfVectors *= horizontalSign;
            const rotateM_X = OrbitCameraController.__tmp_rotateM_X;
            const rotateM_Y = OrbitCameraController.__tmp_rotateM_Y;
            const rotateM_Reset = OrbitCameraController.__tmp_rotateM_Reset;
            const rotateM_Revert = OrbitCameraController.__tmp_rotateM_Revert;
            rotateM_X.rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(this.__rot_y));
            rotateM_Y.rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(this.__rot_x));
            rotateM_Reset.rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(horizontalAngleOfVectors));
            rotateM_Revert.rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(-horizontalAngleOfVectors));
            const rotateM = OrbitCameraController.__tmp_rotateM;
            _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.multiplyTo(rotateM_X, rotateM_Reset, rotateM);
            rotateM.multiplyByLeft(rotateM_Y);
            rotateM.multiplyByLeft(rotateM_Revert);
            rotateM.multiplyVectorTo(this.__upVec, newUpVec);
            rotateM.multiplyVectorTo(centerToEyeVec, newEyeVec).add(this.__centerVec);
            newCenterVec.copyComponents(this.__centerVec);
            const newEyeToCenterVec = OrbitCameraController.__tmpVec3_2;
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.subtractTo(newCenterVec, newEyeVec, newEyeToCenterVec);
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.crossTo(newUpVec, newEyeToCenterVec, newTangentVec);
            newEyeVec.add(this.__mouseTranslateVec);
            newCenterVec.add(this.__mouseTranslateVec);
            // const horizonResetVec = OrbitCameraController.__tmpVec3_2;
            // rotateM_Reset.multiplyVectorTo(centerToEyeVec, horizonResetVec);
            // this.__verticalAngleOfVectors = Vector3.angleOfVectors(horizonResetVec, OrbitCameraController.__tmp_up);
            // const verticalSign = Math.sign(Vector3.crossTo(horizonResetVec, OrbitCameraController.__tmp_up, OrbitCameraController.__tmp_verticalSign).x);
            //this._verticalAngleOfVectors *= verticalSign;
        }
        else {
            const rotateM_X = OrbitCameraController.__tmp_rotateM_X;
            const rotateM_Y = OrbitCameraController.__tmp_rotateM_Y;
            rotateM_X.rotateX(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(this.__rot_y));
            rotateM_Y.rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(this.__rot_x));
            const rotateM = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.multiplyTo(rotateM_Y, rotateM_X, OrbitCameraController.__tmp_rotateM);
            rotateM.multiplyVectorTo(this.__upVec, newUpVec);
            rotateM.multiplyVectorTo(centerToEyeVec, newEyeVec).add(this.__centerVec);
            newCenterVec.copyComponents(this.__centerVec);
            const newEyeToCenterVec = OrbitCameraController.__tmpVec3_1;
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.subtractTo(newCenterVec, newEyeVec, newEyeToCenterVec);
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.crossTo(newUpVec, newEyeToCenterVec, newTangentVec);
            newEyeVec.add(this.__mouseTranslateVec);
            newCenterVec.add(this.__mouseTranslateVec);
        }
    }
    __updateCameraComponent(camera) {
        const eyeDirection = OrbitCameraController.__tmpVec3_0.copyComponents(this.__newCenterVec);
        eyeDirection.subtract(this.__newEyeVec).normalize();
        this._calcZNearInner(camera, this.__newEyeVec, eyeDirection);
        this._calcZFarInner(camera);
        const ratio = camera.zFar / camera.zNear;
        const minRatio = this.__scaleOfZNearAndZFar;
        const scale = ratio / minRatio;
        const newLeft = camera.left + scale;
        const newRight = camera.right + scale;
        const newTop = camera.top + scale;
        const newBottom = camera.bottom + scale;
        const fovy = this.__getFovyFromCamera(camera);
        this.__fovyBias = Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.degreeToRadian(fovy / 2.0));
        camera.eyeInner = this.__newEyeVec;
        camera.directionInner = this.__newCenterVec;
        camera.upInner = this.__newUpVec;
        camera.leftInner = newLeft;
        camera.rightInner = newRight;
        camera.topInner = newTop;
        camera.bottomInner = newBottom;
        camera.fovyInner = fovy;
    }
    set scaleOfZNearAndZFar(value) {
        this.__scaleOfZNearAndZFar = value;
    }
    get scaleOfZNearAndZFar() {
        return this.__scaleOfZNearAndZFar;
    }
    get isMouseDown() {
        return this.__isMouseDown;
    }
    get lastMouseDownTimeStamp() {
        return this.__lastMouseDownTimeStamp;
    }
    get lastMouseUpTimeStamp() {
        return this.__lastMouseUpTimeStamp;
    }
    setFixedDollyTrue(lengthOfCenterToEye) {
        this.__fixedLengthOfCenterToEye = lengthOfCenterToEye;
        this.__fixedDolly = true;
    }
    unsetFixedDolly() {
        this.__fixedDolly = false;
    }
}
OrbitCameraController.__tmp_up = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([0, 0, 1]);
OrbitCameraController.__tmpVec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
OrbitCameraController.__tmpVec3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
OrbitCameraController.__tmpVec3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
OrbitCameraController.__tmp_rotateM_X = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
OrbitCameraController.__tmp_rotateM_Y = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
OrbitCameraController.__tmp_rotateM = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
OrbitCameraController.__tmp_rotateM_Reset = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
OrbitCameraController.__tmp_rotateM_Revert = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
OrbitCameraController.__tmpMat44_0 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_5__.MutableMatrix44.identity();


/***/ }),

/***/ "./src/foundation/cameras/WalkThroughCameraController.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/cameras/WalkThroughCameraController.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WalkThroughCameraController": () => (/* binding */ WalkThroughCameraController)
/* harmony export */ });
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MathClassUtil */ "./src/foundation/math/MathClassUtil.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _AbstractCameraController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AbstractCameraController */ "./src/foundation/cameras/AbstractCameraController.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _system_InputManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../system/InputManager */ "./src/foundation/system/InputManager.ts");









class WalkThroughCameraController extends _AbstractCameraController__WEBPACK_IMPORTED_MODULE_5__.AbstractCameraController {
    constructor(options = {
        eventTargetDom: document,
        verticalSpeed: 1,
        horizontalSpeed: 1,
        turnSpeed: 0.25,
        mouseWheelSpeedScale: 1,
        inverseVerticalRotating: false,
        inverseHorizontalRotating: false,
    }) {
        super();
        this._isKeyDown = false;
        this._isMouseDrag = false;
        this._lastKeyCode = -1;
        this._currentDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.fromCopyArray([0, 0, -1]);
        this._currentPos = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.fromCopyArray([0, 0, 0]);
        this._currentCenter = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.fromCopyArray([0, 0, -1]);
        this._currentHorizontalDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.fromCopyArray([0, 0, -1]);
        this._newDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.fromCopyArray([0, 0, -1]);
        this._isMouseDown = false;
        this._clickedMouseXOnCanvas = -1;
        this._clickedMouseYOnCanvas = -1;
        this._draggedMouseXOnCanvas = -1;
        this._draggedMouseYOnCanvas = -1;
        this._deltaMouseXOnCanvas = -1;
        this._deltaMouseYOnCanvas = -1;
        this._mouseXAdjustScale = 1;
        this._mouseYAdjustScale = 1;
        this._deltaY = -1;
        this._deltaX = -1;
        this._mouseUpBind = this._mouseUp.bind(this);
        this._mouseDownBind = this._mouseDown.bind(this);
        this._mouseMoveBind = this._mouseMove.bind(this);
        this._mouseWheelBind = this._mouseWheel.bind(this);
        this.__doPreventDefault = false;
        this._needInitialize = true;
        this._horizontalSpeed = options.horizontalSpeed;
        this._verticalSpeed = options.verticalSpeed;
        this._turnSpeed = options.turnSpeed;
        this._mouseXAdjustScale = this._turnSpeed;
        this._mouseYAdjustScale = this._turnSpeed;
        this._mouseWheelSpeedScale = options.mouseWheelSpeedScale;
        this._inverseVerticalRotating = options.inverseVerticalRotating;
        this._inverseHorizontalRotating = options.inverseHorizontalRotating;
        this.reset();
        this._onKeydown = e => {
            this._isKeyDown = true;
            this._lastKeyCode = e.keyCode;
        };
        this._onKeyup = e => {
            this._isKeyDown = false;
            this._lastKeyCode = -1;
        };
        const eventTargetDom = options.eventTargetDom;
        this.registerEventListeners(eventTargetDom);
    }
    registerEventListeners(eventTargetDom = document) {
        this._eventTargetDom = eventTargetDom;
        const inputHandlerInfos = [
            {
                eventName: 'keydown',
                handler: this._onKeydown,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            },
            {
                eventName: 'keyup',
                handler: this._onKeyup,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            },
        ];
        if ('ontouchend' in document) {
            inputHandlerInfos.push({
                eventName: 'touchstart',
                handler: this._mouseDownBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            }, {
                eventName: 'touchend',
                handler: this._mouseUpBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            }, {
                eventName: 'touchmove',
                handler: this._mouseMoveBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            });
        }
        if ('onmouseup' in document) {
            inputHandlerInfos.push({
                eventName: 'mousedown',
                handler: this._mouseDownBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            }, {
                eventName: 'mouseup',
                handler: this._mouseUpBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            }, {
                eventName: 'mouseleave',
                handler: this._mouseUpBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            }, {
                eventName: 'mousemove',
                handler: this._mouseMoveBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            });
        }
        if ('onwheel' in document) {
            inputHandlerInfos.push({
                eventName: 'wheel',
                handler: this._mouseWheelBind,
                options: {
                    passive: !this.__doPreventDefault,
                },
                classInstance: this,
                eventTargetDom,
            });
        }
        _system_InputManager__WEBPACK_IMPORTED_MODULE_8__.InputManager.register(_system_InputManager__WEBPACK_IMPORTED_MODULE_8__.INPUT_HANDLING_STATE_CAMERACONTROLLER, inputHandlerInfos);
    }
    unregisterEventListeners() {
        _system_InputManager__WEBPACK_IMPORTED_MODULE_8__.InputManager.unregister(_system_InputManager__WEBPACK_IMPORTED_MODULE_8__.INPUT_HANDLING_STATE_CAMERACONTROLLER);
    }
    __tryToPreventDefault(evt) {
        if (this.__doPreventDefault) {
            evt.preventDefault();
        }
    }
    _mouseWheel(e) {
        if (this._currentDir === null) {
            return;
        }
        const delta = -1 *
            Math.sign(e.deltaY) *
            this._mouseWheelSpeedScale *
            this._horizontalSpeed;
        const horizontalDir = WalkThroughCameraController.__tmp_Vec3_0;
        horizontalDir
            .setComponents(this._currentDir.x, 0, this._currentDir.z)
            .normalize();
        const deltaVec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.multiplyTo(horizontalDir, delta, WalkThroughCameraController.__tmp_Vec3_1);
        this._currentPos.add(deltaVec);
        this._currentCenter.add(deltaVec);
    }
    _mouseDown(evt) {
        this.__tryToPreventDefault(evt);
        this._isMouseDown = true;
        const rect = evt.target.getBoundingClientRect();
        this._clickedMouseXOnCanvas = evt.clientX - rect.left;
        this._clickedMouseYOnCanvas = evt.clientY - rect.top;
        return false;
    }
    _mouseMove(evt) {
        this.__tryToPreventDefault(evt);
        if (!this._isMouseDown) {
            return;
        }
        const rect = evt.target.getBoundingClientRect();
        this._draggedMouseXOnCanvas = evt.clientX - rect.left;
        this._draggedMouseYOnCanvas = evt.clientY - rect.top;
        this._deltaMouseXOnCanvas =
            this._draggedMouseXOnCanvas - this._clickedMouseXOnCanvas;
        this._deltaMouseYOnCanvas =
            this._draggedMouseYOnCanvas - this._clickedMouseYOnCanvas;
        this._isMouseDrag = true;
    }
    _mouseUp(evt) {
        this._isMouseDown = false;
        this._isMouseDrag = false;
        const target = evt.target;
        if ((target === null || target === void 0 ? void 0 : target.getBoundingClientRect) == null) {
            return;
        }
        const rect = target.getBoundingClientRect();
        this._clickedMouseXOnCanvas = evt.clientX - rect.left;
        this._clickedMouseYOnCanvas = evt.clientY - rect.top;
    }
    tryReset() { }
    reset() {
        this._isKeyDown = false;
        this._lastKeyCode = -1;
        this._currentPos.zero();
        this._currentCenter.setComponents(0, 0, -1);
        this._currentDir.setComponents(0, 0, -1);
        this._currentHorizontalDir.setComponents(0, 0, -1);
        this._isMouseDown = false;
        this._isMouseDrag = false;
        this._draggedMouseXOnCanvas = -1;
        this._draggedMouseYOnCanvas = -1;
        this._deltaMouseXOnCanvas = -1;
        this._deltaMouseYOnCanvas = -1;
        this._mouseXAdjustScale = this._turnSpeed;
        this._mouseYAdjustScale = this._turnSpeed;
        this._deltaY = 0;
        this._deltaX = 0;
        this._newDir.setComponents(0, 0, -1);
    }
    logic(cameraComponent) {
        this.__updateCameraComponent(cameraComponent);
    }
    __updateCameraComponent(camera) {
        const targetAABB = this.__targetEntity.getSceneGraph().worldAABB;
        if (this._needInitialize && targetAABB != null) {
            const lengthCenterToCamera = targetAABB.lengthCenterToCorner *
                (1.0 + 1.0 / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_6__.MathUtil.degreeToRadian(camera.fovy / 2.0)));
            this._currentPos.copyComponents(targetAABB.centerPoint);
            this._currentPos.z += lengthCenterToCamera;
            this._currentCenter.copyComponents(targetAABB.centerPoint);
            this._currentDir.setComponents(0, 0, -1);
            const sceneComponent = camera.entity.tryToGetSceneGraph();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(sceneComponent)) {
                const invMat = _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__.Matrix44.invertTo(sceneComponent.worldMatrixInner, WalkThroughCameraController.__tmpInvMat);
                invMat.multiplyVector3To(this._currentPos, this._currentPos);
                invMat.multiplyVector3To(this._currentCenter, this._currentCenter);
            }
            this._needInitialize = false;
        }
        const t = this._deltaY / 90;
        this._newDir.x = this._currentDir.x * (1 - t);
        this._newDir.y = t;
        this._newDir.z = this._currentDir.z * (1 - t);
        this._newDir.normalize();
        this._currentHorizontalDir.x = this._currentDir.x;
        this._currentHorizontalDir.y = 0;
        this._currentHorizontalDir.z = this._currentDir.z;
        this._currentHorizontalDir.normalize();
        const moveVector = WalkThroughCameraController.__tmp_Vec3_0.zero();
        switch (this._lastKeyCode) {
            case 87: // w key
            case 38: // arrow upper key
                moveVector.x = this._currentHorizontalDir.x * this._horizontalSpeed;
                moveVector.z = this._currentHorizontalDir.z * this._horizontalSpeed;
                break;
            case 65: // a key
            case 37: // arrow left key
                moveVector.x = this._currentHorizontalDir.z * this._horizontalSpeed;
                moveVector.z = -this._currentHorizontalDir.x * this._horizontalSpeed;
                break;
            case 83: // s key
            case 40: // arrow down key
                moveVector.x = -this._currentHorizontalDir.x * this._horizontalSpeed;
                moveVector.z = -this._currentHorizontalDir.z * this._horizontalSpeed;
                break;
            case 68: // d key
            case 39: // arrow right key
                moveVector.x = -this._currentHorizontalDir.z * this._horizontalSpeed;
                moveVector.z = this._currentHorizontalDir.x * this._horizontalSpeed;
                break;
            case 81: // q key
                moveVector.x = -this._newDir.x * this._horizontalSpeed;
                moveVector.y = -this._newDir.y * this._horizontalSpeed;
                moveVector.z = -this._newDir.z * this._horizontalSpeed;
                break;
            case 69: // e key
                moveVector.x = this._newDir.x * this._horizontalSpeed;
                moveVector.y = this._newDir.y * this._horizontalSpeed;
                moveVector.z = this._newDir.z * this._horizontalSpeed;
                break;
            case 82: // r key
                moveVector.y = this._verticalSpeed;
                break;
            case 70: // f key
                moveVector.y = -this._verticalSpeed;
                break;
        }
        this._currentPos.add(moveVector);
        this._currentCenter.add(moveVector);
        if (this._isMouseDrag) {
            if (this._inverseHorizontalRotating) {
                this._deltaX = this._deltaMouseXOnCanvas * this._mouseXAdjustScale;
            }
            else {
                this._deltaX = -this._deltaMouseXOnCanvas * this._mouseXAdjustScale;
            }
            if (this._inverseVerticalRotating) {
                this._deltaY += this._deltaMouseYOnCanvas * this._mouseYAdjustScale;
            }
            else {
                this._deltaY += -this._deltaMouseYOnCanvas * this._mouseYAdjustScale;
            }
            this._deltaY = Math.max(-120, Math.min(50, this._deltaY));
            const rotateMatrix = WalkThroughCameraController.__tmpRotateMat.rotateY(_math_MathUtil__WEBPACK_IMPORTED_MODULE_6__.MathUtil.degreeToRadian(this._deltaX));
            rotateMatrix.multiplyVectorTo(this._currentDir, this._currentDir);
            const newEyeToCenter = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.subtractTo(this._currentCenter, this._currentPos, WalkThroughCameraController.__tmp_Vec3_1);
            rotateMatrix.multiplyVectorTo(newEyeToCenter, newEyeToCenter);
            newEyeToCenter.x = newEyeToCenter.x * (1 - t);
            newEyeToCenter.y = t;
            newEyeToCenter.z = newEyeToCenter.z * (1 - t);
            newEyeToCenter.normalize();
            this._currentCenter.copyComponents(this._currentPos);
            this._currentCenter.add(newEyeToCenter);
            this._clickedMouseXOnCanvas = this._draggedMouseXOnCanvas;
            this._clickedMouseYOnCanvas = this._draggedMouseYOnCanvas;
            this._deltaMouseXOnCanvas = 0;
            this._deltaMouseYOnCanvas = 0;
        }
        camera.eyeInner = this._currentPos;
        camera.directionInner = this._currentCenter;
        camera.upInner = camera._up;
        camera.leftInner = camera.left;
        camera.rightInner = camera.right;
        camera.topInner = camera.top;
        camera.bottomInner = camera.bottom;
        camera.fovyInner = camera.fovy;
        this._calcZNearInner(camera, this._currentPos, this._newDir);
        this._calcZFarInner(camera);
    }
    getDirection() {
        return this._currentCenter !== null ? this._newDir.clone() : null;
    }
    set horizontalSpeed(value) {
        this._horizontalSpeed = value;
    }
    get horizontalSpeed() {
        return this._horizontalSpeed;
    }
    set verticalSpeed(value) {
        this._verticalSpeed = value;
    }
    get verticalSpeed() {
        return this._verticalSpeed;
    }
    set mouseWheelSpeed(value) {
        this._mouseWheelSpeedScale = value;
    }
    get mouseWheelSpeed() {
        return this._mouseWheelSpeedScale;
    }
    setTarget(targetEntity) {
        const speed = targetEntity.tryToGetSceneGraph().worldAABB.lengthCenterToCorner / 10;
        this.verticalSpeed = speed;
        this.horizontalSpeed = speed;
        this.__targetEntity = targetEntity;
        this._needInitialize = true;
    }
    getTarget() {
        return this.__targetEntity;
    }
    get allInfo() {
        const info = {};
        info.verticalSpeed = this.verticalSpeed;
        info.horizontalSpeed = this.horizontalSpeed;
        info._turnSpeed = this._turnSpeed;
        if (this._currentPos) {
            info._currentPos = this._currentPos.clone();
        }
        if (this._currentCenter) {
            info._currentCenter = this._currentCenter.clone();
        }
        if (this._currentDir) {
            info._currentDir = this._currentDir.clone();
        }
        info._deltaY = this._deltaY;
        info._newDir = this._newDir.clone();
        return info;
    }
    set allInfo(arg) {
        let json = arg;
        if (typeof arg === 'string') {
            json = JSON.parse(arg);
        }
        for (const key in json) {
            if (json.hasOwnProperty(key) && key in this) {
                if (key === 'quaternion') {
                    this[key] = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_1__.MathClassUtil.cloneOfMathObjects(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_1__.MathClassUtil.arrayToQuaternion(json[key]));
                }
                else {
                    this[key] = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_1__.MathClassUtil.cloneOfMathObjects(_math_MathClassUtil__WEBPACK_IMPORTED_MODULE_1__.MathClassUtil.arrayToVectorOrMatrix(json[key]));
                }
            }
        }
    }
}
WalkThroughCameraController.__tmpInvMat = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_4__.MutableMatrix44.identity();
WalkThroughCameraController.__tmpRotateMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_3__.MutableMatrix33.identity();
WalkThroughCameraController.__tmp_Vec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.zero();
WalkThroughCameraController.__tmp_Vec3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_2__.MutableVector3.zero();


/***/ }),

/***/ "./src/foundation/cameras/index.ts":
/*!*****************************************!*\
  !*** ./src/foundation/cameras/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractCameraController": () => (/* reexport safe */ _AbstractCameraController__WEBPACK_IMPORTED_MODULE_0__.AbstractCameraController),
/* harmony export */   "OrbitCameraController": () => (/* reexport safe */ _OrbitCameraController__WEBPACK_IMPORTED_MODULE_2__.OrbitCameraController),
/* harmony export */   "WalkThroughCameraController": () => (/* reexport safe */ _WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_3__.WalkThroughCameraController)
/* harmony export */ });
/* harmony import */ var _AbstractCameraController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractCameraController */ "./src/foundation/cameras/AbstractCameraController.ts");
/* harmony import */ __webpack_require__(/*! ./ICameraController */ "./src/foundation/cameras/ICameraController.ts");
/* harmony import */ var _OrbitCameraController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OrbitCameraController */ "./src/foundation/cameras/OrbitCameraController.ts");
/* harmony import */ var _WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WalkThroughCameraController */ "./src/foundation/cameras/WalkThroughCameraController.ts");






/***/ }),

/***/ "./src/foundation/components/Animation/AnimationComponent.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/components/Animation/AnimationComponent.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationComponent": () => (/* binding */ AnimationComponent)
/* harmony export */ });
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/AnimationInterpolation */ "./src/foundation/definitions/AnimationInterpolation.ts");
/* harmony import */ var _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/AnimationAttribute */ "./src/foundation/definitions/AnimationAttribute.ts");
/* harmony import */ var _Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Transform/TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _system_EventPubSub__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../system/EventPubSub */ "./src/foundation/system/EventPubSub.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/raw/raw_extension */ "./src/foundation/math/raw/raw_extension.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");















const defaultAnimationInfo = {
    name: '',
    maxStartInputTime: 0,
    maxEndInputTime: 0,
};
const ChangeAnimationInfo = Symbol('AnimationComponentEventChangeAnimationInfo');
const PlayEnd = Symbol('AnimationComponentEventPlayEnd');
class AnimationComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        /// inner states ///
        this.__backupDefaultValues = new Map();
        // Animation Data of each AnimationComponent
        this.__animationTracks = new Map();
        /// flags ///
        this.__isAnimating = true;
        this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__.ProcessStage.Create;
    }
    /// LifeCycle Methods ///
    $create() {
        this.__transformComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_6__.TransformComponent);
        this.__meshComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_8__.MeshComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__.ProcessStage.Logic);
    }
    $logic() {
        if (this.isAnimating &&
            this.__currentActiveAnimationTrackName !== undefined) {
            const animationSet = this.__animationTracks.get(this.__currentActiveAnimationTrackName);
            if (animationSet !== undefined) {
                for (const [attributeName, channel] of animationSet) {
                    const i = _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.fromString(attributeName).index;
                    const value = AnimationComponent.__interpolate(channel, AnimationComponent.globalTime, i);
                    if (i === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Quaternion.index) {
                        this.__transformComponent.quaternion = _math_Quaternion__WEBPACK_IMPORTED_MODULE_11__.Quaternion.fromCopyArray4(value);
                    }
                    else if (i === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Translate.index) {
                        this.__transformComponent.translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_13__.Vector3.fromCopyArray3(value);
                    }
                    else if (i === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Scale.index) {
                        this.__transformComponent.scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_13__.Vector3.fromCopyArray3(value);
                    }
                    else if (i === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Weights.index) {
                        this.__meshComponent.weights = value;
                    }
                }
            }
        }
    }
    static subscribe(type, handler) {
        AnimationComponent.__pubsub.subscribe(type, handler);
    }
    /**
     * Compute cubic spline interpolation.
     * @param p_0 starting point
     * @param p_1 ending point
     * @param m_0 inTangent
     * @param m_1 outTangent
     * @param t ratio
     * @param animationAttributeIndex index of attribution
     */
    static cubicSpline(p0, p1, m0, m1, t) {
        const ret = new Array(p0.length);
        for (let i = 0; i < p0.length; i++) {
            ret[i] =
                (2 * t ** 3 - 3 * t ** 2 + 1) * p0[i] +
                    (t ** 3 - 2 * t ** 2 + t) * m0[i] +
                    (-2 * t ** 3 + 3 * t ** 2) * p1[i] +
                    (t ** 3 - t ** 2) * m1[i];
        }
        return ret;
    }
    static binarySearch(inputArray, currentTime) {
        let low = 0;
        let high = inputArray.length - 1;
        let mid = 0;
        let retVal = 0;
        while (low <= high) {
            mid = low + ((high - low) >> 1);
            if (inputArray[mid] < currentTime) {
                low = mid + 1;
                retVal = mid;
            }
            else if (currentTime < inputArray[mid]) {
                high = mid - 1;
                retVal = high;
            }
            else {
                // if (inputArray[mid] === input) {
                return mid;
            }
        }
        return retVal;
    }
    static interpolationSearch(inputArray, currentTime) {
        let mid = 0;
        let lower = 0;
        let upper = inputArray.length - 1;
        let retVal = 0;
        while (lower <= upper &&
            currentTime >= inputArray[lower] &&
            currentTime <= inputArray[upper]) {
            mid = Math.floor(lower +
                ((currentTime - inputArray[lower]) * (upper - lower)) /
                    (inputArray[upper] - inputArray[lower]));
            if (inputArray[mid] < currentTime) {
                lower = mid + 1;
                retVal = mid;
            }
            else if (currentTime < inputArray[mid]) {
                upper = mid - 1;
                retVal = upper;
            }
            else {
                // if (inputArray[mid] === input) {
                return mid;
            }
        }
        return retVal;
    }
    static bruteForceSearch(inputArray, currentTime) {
        for (let i = 0; i < inputArray.length; i++) {
            if (inputArray[i] <= currentTime && currentTime < inputArray[i + 1]) {
                return i;
            }
        }
        return inputArray.length - 1;
    }
    restoreDefaultValues() {
        this.__transformComponent.quaternion = this.__backupDefaultValues.get(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Quaternion.str);
        this.__transformComponent.translate = this.__backupDefaultValues.get(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Translate.str);
        this.__transformComponent.scale = this.__backupDefaultValues.get(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Scale.str);
        if (this.__meshComponent != null) {
            this.__meshComponent.weights = this.__backupDefaultValues.get(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Weights.str);
        }
    }
    backupDefaultValues() {
        var _a;
        this.__backupDefaultValues.set(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Quaternion.str, this.__transformComponent.quaternion);
        this.__backupDefaultValues.set(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Translate.str, this.__transformComponent.translate);
        this.__backupDefaultValues.set(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Scale.str, this.__transformComponent.scale);
        if (this.__meshComponent != null) {
            this.__backupDefaultValues.set(_definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Weights.str, (_a = this.__meshComponent) === null || _a === void 0 ? void 0 : _a.weights);
        }
    }
    setAnimating(flg) {
        this.__isAnimating = flg;
    }
    setAnimationToRest() {
        this.restoreDefaultValues();
    }
    static setAnimatingForAll(flg) {
        const animationComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository._getComponents(AnimationComponent);
        for (const animationComponent of animationComponents) {
            animationComponent.setAnimating(flg);
        }
    }
    static setActiveAnimationForAll(animationName) {
        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentsWithType(AnimationComponent);
        for (const component of components) {
            component.setActiveAnimationTrack(animationName);
        }
    }
    setActiveAnimationTrack(animationName) {
        if (this.__animationTracks.has(animationName)) {
            this.__currentActiveAnimationTrackName = animationName;
            return true;
        }
        else {
            return false;
        }
    }
    getActiveAnimationTrack() {
        return this.__currentActiveAnimationTrackName;
    }
    setAnimation(trackName, pathName, inputArray, outputArray, outputComponentN, interpolation, makeThisActiveAnimation = true) {
        if (makeThisActiveAnimation) {
            this.__currentActiveAnimationTrackName = trackName;
        }
        else {
            this.__currentActiveAnimationTrackName = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.valueWithDefault)({
                value: this.__currentActiveAnimationTrackName,
                defaultValue: trackName,
            });
        }
        const channel = {
            sampler: {
                input: inputArray,
                output: outputArray,
                outputComponentN,
                interpolationMethod: interpolation,
            },
            target: {
                pathName: pathName,
                entity: this.entity,
            },
            belongTrackName: trackName,
        };
        // set AnimationSet
        let animationSet = this.__animationTracks.get(trackName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(animationSet)) {
            animationSet = new Map();
            this.__animationTracks.set(trackName, animationSet);
        }
        animationSet.set(pathName, channel);
        // set AnimationInfo
        const newMaxStartInputTime = inputArray[0];
        const newMaxEndInputTime = inputArray[inputArray.length - 1];
        const existingAnimationInfo = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.valueWithDefault)({
            value: AnimationComponent.__animationGlobalInfo.get(trackName),
            defaultValue: defaultAnimationInfo,
        });
        const existingMaxStartInputTime = existingAnimationInfo.maxStartInputTime;
        const existingMaxEndInputTime = existingAnimationInfo.maxEndInputTime;
        // eslint-disable-next-line prettier/prettier
        const startResult = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.lessThan)(existingMaxStartInputTime, newMaxStartInputTime);
        const endResult = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.greaterThan)(newMaxEndInputTime, existingMaxEndInputTime);
        if (startResult.result || endResult.result) {
            const info = {
                name: trackName,
                maxStartInputTime: startResult.less,
                maxEndInputTime: endResult.greater,
            };
            AnimationComponent.__animationGlobalInfo.set(trackName, info);
            AnimationComponent.__pubsub.publishAsync(AnimationComponent.Event.ChangeAnimationInfo, { infoMap: new Map(AnimationComponent.__animationGlobalInfo) });
        }
        this.__transformComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_6__.TransformComponent);
        this.__meshComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_8__.MeshComponent);
        this.backupDefaultValues();
    }
    getStartInputValueOfAnimation(animationTrackName) {
        const name = animationTrackName !== null && animationTrackName !== void 0 ? animationTrackName : this.__currentActiveAnimationTrackName;
        if (name === undefined) {
            const array = Array.from(AnimationComponent.__animationGlobalInfo.values());
            if (array.length === 0) {
                return 0;
            }
            const firstAnimationInfo = array[0];
            return firstAnimationInfo.maxEndInputTime;
        }
        const maxStartInputTime = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.valueWithDefault)({
            value: AnimationComponent.__animationGlobalInfo.get(name),
            defaultValue: defaultAnimationInfo,
        }).maxStartInputTime;
        return maxStartInputTime;
    }
    getEndInputValueOfAnimation(animationTrackName) {
        const name = animationTrackName !== null && animationTrackName !== void 0 ? animationTrackName : this.__currentActiveAnimationTrackName;
        if (name === undefined) {
            const array = Array.from(AnimationComponent.__animationGlobalInfo.values());
            if (array.length === 0) {
                return 0;
            }
            const firstAnimationInfo = array[0];
            return firstAnimationInfo.maxEndInputTime;
        }
        const maxEndInputTime = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_9__.valueWithDefault)({
            value: AnimationComponent.__animationGlobalInfo.get(name),
            defaultValue: defaultAnimationInfo,
        }).maxEndInputTime;
        return maxEndInputTime;
    }
    /**
     * get the Array of Animation Track Name
     * @returns Array of Animation Track Name
     */
    static getAnimationList() {
        return Array.from(this.__animationGlobalInfo.keys());
    }
    /**
     * get the AnimationInfo of the Component
     * @returns the map of
     */
    static getAnimationInfo() {
        return new Map(this.__animationGlobalInfo);
    }
    /**
     * get animation track names of this component
     * @returns an array of animation track name
     */
    getAnimationTrackNames() {
        return Array.from(this.__animationTracks.keys());
    }
    /**
     * get the animation channels of the animation track
     * @param animationTrackName the name of animation track to get
     * @returns the channel maps of the animation track
     */
    getAnimationChannelsOfTrack(animationTrackName) {
        return this.__animationTracks.get(animationTrackName);
    }
    get isAnimating() {
        return this.__isAnimating;
    }
    static get startInputValue() {
        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentsWithType(AnimationComponent);
        if (components.length === 0) {
            return 0;
        }
        else {
            const infoArray = Array.from(this.__animationGlobalInfo.values());
            const lastInfo = infoArray[infoArray.length - 1];
            return lastInfo.maxStartInputTime;
        }
    }
    static get endInputValue() {
        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentsWithType(AnimationComponent);
        if (components.length === 0) {
            return 0;
        }
        else {
            const infoArray = Array.from(this.__animationGlobalInfo.values());
            const lastInfo = infoArray[infoArray.length - 1];
            return lastInfo.maxEndInputTime;
        }
    }
    static get isAnimating() {
        const components = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentsWithType(AnimationComponent);
        for (const component of components) {
            if (component.isAnimating) {
                return true;
            }
        }
        return false;
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.AnimationComponentTID;
    }
    static __prepareVariablesForCubicSpline(outputArray_, i, componentN, t_diff) {
        const outputArray = outputArray_;
        if (componentN === 4) {
            const p_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get4_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * i + componentN);
            const p_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get4_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * (i + 1) + componentN);
            const m_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArray4WithScalar_offset](componentN * 3 * i + componentN * 2, t_diff);
            const m_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArray4WithScalar_offset](componentN * 3 * (i + 1), t_diff);
            return { p_0, p_1, m_0, m_1 };
        }
        else if (componentN === 3) {
            const p_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get3_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * i + componentN);
            const p_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get3_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * (i + 1) + componentN);
            const m_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArray3WithScalar_offset](componentN * 3 * i + componentN * 2, t_diff);
            const m_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArray3WithScalar_offset](componentN * 3 * (i + 1), t_diff);
            return { p_0, p_1, m_0, m_1 };
        }
        else {
            const p_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.getN_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * i + componentN, componentN);
            const p_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.getN_offset](
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            componentN * 3 * (i + 1) + componentN, componentN);
            const m_0 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArrayNWithScalar_offset](componentN * 3 * i + componentN * 2, componentN, t_diff);
            const m_1 = outputArray[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.mulArrayNWithScalar_offset](componentN * 3 * (i + 1), componentN, t_diff);
            return { p_0, p_1, m_0, m_1 };
        }
    }
    static __getOutputValue(keyFrameId, channel, array_) {
        const array = array_;
        if (channel.sampler.interpolationMethod === _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__.AnimationInterpolation.CubicSpline) {
            // In glTF CUBICSPLINE interpolation, tangents (ak, bk) and values (vk) are grouped within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
            if (channel.sampler.outputComponentN === 4) {
                // Quaternion/weights
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get4_offset](channel.sampler.outputComponentN * 3 * keyFrameId +
                    channel.sampler.outputComponentN);
                return value;
            }
            else if (channel.sampler.outputComponentN === 3) {
                // Translate/Scale/weights
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get3_offset](channel.sampler.outputComponentN * 3 * keyFrameId +
                    channel.sampler.outputComponentN);
                return value;
            }
            else if (channel.sampler.outputComponentN === 1) {
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get1_offset](channel.sampler.outputComponentN * 3 * keyFrameId +
                    channel.sampler.outputComponentN);
                return value;
            }
            else {
                // weights // outputComponentN === N
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.getN_offset](channel.sampler.outputComponentN * 3 * keyFrameId +
                    channel.sampler.outputComponentN, channel.sampler.outputComponentN);
                return value;
            }
        }
        else {
            // For Other than CUBICSPLINE interpolation
            if (channel.sampler.outputComponentN === 4) {
                // Quaternion/weights
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get4_offsetAsComposition](keyFrameId);
                return value;
            }
            else if (channel.sampler.outputComponentN === 3) {
                // Translate/Scale/weights
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get3_offsetAsComposition](keyFrameId);
                return value;
            }
            else if (channel.sampler.outputComponentN === 1) {
                // Effekseer (Animation Event)
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.get1_offsetAsComposition](keyFrameId);
                return value;
            }
            else {
                // weights
                const value = array[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.getN_offsetAsComposition](keyFrameId, channel.sampler.outputComponentN);
                return value;
            }
        }
    }
    static __lerp(data_, ratio, animationAttributeIndex, i, outputComponentN) {
        const data = data_;
        if (animationAttributeIndex === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Quaternion.index) {
            const array4 = data[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.qlerp_offsetAsComposition](data, ratio, i, i + 1);
            return array4;
        }
        else if (animationAttributeIndex === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Weights.index) {
            const arrayN = data[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.arrayN_lerp_offsetAsComposition](data, outputComponentN, ratio, i, i + 1);
            return arrayN;
        }
        else {
            // Translate / Scale
            const array3 = data[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.array3_lerp_offsetAsComposition](data, ratio, i, i + 1);
            return array3;
        }
    }
    static __interpolate(channel, currentTime, animationAttributeIndex) {
        var _a;
        const inputArray = channel.sampler.input;
        const outputArray = channel.sampler.output;
        const method = (_a = channel.sampler.interpolationMethod) !== null && _a !== void 0 ? _a : _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__.AnimationInterpolation.Linear;
        // out of range
        if (currentTime <= inputArray[0]) {
            const outputOfZeroFrame = this.__getOutputValue(0, channel, outputArray);
            return outputOfZeroFrame;
        }
        else if (inputArray[inputArray.length - 1] <= currentTime) {
            const outputOfEndFrame = this.__getOutputValue(inputArray.length - 1, channel, outputArray);
            return outputOfEndFrame;
        }
        if (method === _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__.AnimationInterpolation.CubicSpline) {
            // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#appendix-c-spline-interpolation
            const i = this.interpolationSearch(inputArray, currentTime);
            const t_diff = inputArray[i + 1] - inputArray[i]; // t_(k+1) - t_k
            const t = (currentTime - inputArray[i]) / t_diff;
            const { p_0, p_1, m_0, m_1 } = this.__prepareVariablesForCubicSpline(outputArray, i, channel.sampler.outputComponentN, t_diff);
            const ret = this.cubicSpline(p_0, p_1, m_0, m_1, t);
            if (animationAttributeIndex === _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.Quaternion.index) {
                ret[_math_raw_raw_extension__WEBPACK_IMPORTED_MODULE_12__.normalizeArray4]();
            }
            return ret;
        }
        else if (method === _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__.AnimationInterpolation.Linear) {
            const i = this.interpolationSearch(inputArray, currentTime);
            const ratio = (currentTime - inputArray[i]) / (inputArray[i + 1] - inputArray[i]);
            const ret = this.__lerp(outputArray, ratio, animationAttributeIndex, i, channel.sampler.outputComponentN);
            return ret;
        }
        else if (method === _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_4__.AnimationInterpolation.Step) {
            for (let i = 0; i < inputArray.length - 1; i++) {
                if (inputArray[i] <= currentTime && currentTime < inputArray[i + 1]) {
                    const output_frame_i = this.__getOutputValue(i, channel, outputArray);
                    return output_frame_i;
                }
            }
            const outputOfEndFrame = this.__getOutputValue(inputArray.length - 1, channel, outputArray);
            return outputOfEndFrame;
        }
        // non supported type
        return [];
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class AnimationEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getAnimation() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.AnimationComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, AnimationEntity);
        return base;
    }
    addKeyFrame(trackName, pathName, frameToInsert, fps) {
        const secBegin = frameToInsert * fps;
        const input = secBegin;
        const secEnd = (frameToInsert + 1) * fps;
        const animationSet = this.__animationTracks.get(trackName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(animationSet)) {
            return false;
        }
        const channel = animationSet.get(pathName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(channel)) {
            return false;
        }
        if (ArrayBuffer.isView(channel.sampler.input)) {
            channel.sampler.input = Array.from(channel.sampler.input);
        }
        if (ArrayBuffer.isView(channel.sampler.output)) {
            channel.sampler.output = Array.from(channel.sampler.output);
        }
        const i = _definitions_AnimationAttribute__WEBPACK_IMPORTED_MODULE_5__.AnimationAttribute.fromString(pathName).index;
        const value = AnimationComponent.__interpolate(channel, AnimationComponent.globalTime, i);
        for (let i = 0; i < channel.sampler.input.length; i++) {
            const existedInput = channel.sampler.input[i];
            if (secBegin < existedInput && existedInput <= secEnd) {
                channel.sampler.input.splice(i - 1, 0, input);
                channel.sampler.output.splice((i - 1) * channel.sampler.outputComponentN, 0, ...value);
                break;
            }
        }
        return true;
    }
    addKeyFrameWithValue(trackName, pathName, frameToInsert, output, fps) {
        const secBegin = frameToInsert * fps;
        const input = secBegin;
        const secEnd = (frameToInsert + 1) * fps;
        const animationSet = this.__animationTracks.get(trackName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(animationSet)) {
            return false;
        }
        const channel = animationSet.get(pathName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(channel)) {
            return false;
        }
        if (ArrayBuffer.isView(channel.sampler.input)) {
            channel.sampler.input = Array.from(channel.sampler.input);
        }
        if (ArrayBuffer.isView(channel.sampler.output)) {
            channel.sampler.output = Array.from(channel.sampler.output);
        }
        for (let i = 0; i < channel.sampler.input.length; i++) {
            const existedInput = channel.sampler.input[i];
            if (secBegin < existedInput && existedInput <= secEnd) {
                channel.sampler.input.splice(i - 1, 0, input);
                channel.sampler.output.splice((i - 1) * channel.sampler.outputComponentN, 0, ...output);
                break;
            }
        }
        return true;
    }
    deleteKeysAtFrame(trackName, pathName, frameToDelete, fps) {
        const secBegin = frameToDelete * fps;
        const secEnd = (frameToDelete + 1) * fps;
        const animationSet = this.__animationTracks.get(trackName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(animationSet)) {
            return false;
        }
        const channel = animationSet.get(pathName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(channel)) {
            return false;
        }
        if (ArrayBuffer.isView(channel.sampler.input)) {
            channel.sampler.input = Array.from(channel.sampler.input);
        }
        if (ArrayBuffer.isView(channel.sampler.output)) {
            channel.sampler.output = Array.from(channel.sampler.output);
        }
        for (let i = 0; i < channel.sampler.input.length; i++) {
            const input = channel.sampler.input[i];
            if (secBegin <= input && input < secEnd) {
                channel.sampler.input.splice(i, 1);
                channel.sampler.output.splice(i * channel.sampler.outputComponentN, channel.sampler.outputComponentN);
            }
        }
        return true;
    }
    hasKeyFramesAtFrame(trackName, pathName, frame, fps) {
        const secBegin = frame * fps;
        const secEnd = (frame + 1) * fps;
        const animationSet = this.__animationTracks.get(trackName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(animationSet)) {
            return false;
        }
        const channel = animationSet.get(pathName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_14__.Is.not.exist(channel)) {
            return false;
        }
        for (let i = 0; i < channel.sampler.input.length; i++) {
            const input = channel.sampler.input[i];
            if (secBegin <= input && input < secEnd) {
                return true;
            }
        }
        return false;
    }
}
/// Static Members ///
// Global animation time in Rhodonite
AnimationComponent.globalTime = 0;
// Event for pubsub of notifications
AnimationComponent.Event = {
    ChangeAnimationInfo,
    PlayEnd,
};
// TODO: fix the conflict possibilities of AnimationTrackNames btw components
AnimationComponent.__animationGlobalInfo = new Map();
AnimationComponent.__pubsub = new _system_EventPubSub__WEBPACK_IMPORTED_MODULE_10__.EventPubSub();
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.registerComponentClass(AnimationComponent);


/***/ }),

/***/ "./src/foundation/components/Animation/IAnimationEntity.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/components/Animation/IAnimationEntity.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Animation/index.ts":
/*!******************************************************!*\
  !*** ./src/foundation/components/Animation/index.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationComponent": () => (/* reexport safe */ _AnimationComponent__WEBPACK_IMPORTED_MODULE_0__.AnimationComponent)
/* harmony export */ });
/* harmony import */ var _AnimationComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AnimationComponent */ "./src/foundation/components/Animation/AnimationComponent.ts");
/* harmony import */ __webpack_require__(/*! ./IAnimationEntity */ "./src/foundation/components/Animation/IAnimationEntity.ts");




/***/ }),

/***/ "./src/foundation/components/BlendShape/BlendShapeComponent.ts":
/*!*********************************************************************!*\
  !*** ./src/foundation/components/BlendShape/BlendShapeComponent.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlendShapeComponent": () => (/* binding */ BlendShapeComponent)
/* harmony export */ });
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");





class BlendShapeComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityComponent) {
        super(entityUid, componentSid, entityComponent);
        this.__weights = [];
        this.__targetNames = [];
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Logic);
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.BlendShapeComponentTID;
    }
    set weights(weights) {
        this.__weights = weights;
    }
    get weights() {
        return this.__weights;
    }
    set targetNames(names) {
        this.__targetNames = names;
    }
    get targetNames() {
        return this.__targetNames;
    }
    $logic() { }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class BlendShapeEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getBlendShape() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.BlendShapeComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, BlendShapeEntity);
        return base;
    }
}
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.registerComponentClass(BlendShapeComponent);


/***/ }),

/***/ "./src/foundation/components/BlendShape/IBlendShapeEntity.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/components/BlendShape/IBlendShapeEntity.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/BlendShape/index.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/components/BlendShape/index.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlendShapeComponent": () => (/* reexport safe */ _BlendShapeComponent__WEBPACK_IMPORTED_MODULE_0__.BlendShapeComponent)
/* harmony export */ });
/* harmony import */ var _BlendShapeComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BlendShapeComponent */ "./src/foundation/components/BlendShape/BlendShapeComponent.ts");
/* harmony import */ __webpack_require__(/*! ./IBlendShapeEntity */ "./src/foundation/components/BlendShape/IBlendShapeEntity.ts");




/***/ }),

/***/ "./src/foundation/components/Camera/CameraComponent.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/Camera/CameraComponent.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraComponent": () => (/* binding */ CameraComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/CameraType */ "./src/foundation/definitions/CameraType.ts");
/* harmony import */ var _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _geometry_Frustum__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../geometry/Frustum */ "./src/foundation/geometry/Frustum.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _CameraController_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../CameraController/CameraControllerComponent */ "./src/foundation/components/CameraController/CameraControllerComponent.ts");
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");




















class CameraComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this._eyeInner = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.dummy();
        this._direction = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.dummy();
        this._directionInner = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.dummy();
        this._up = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.dummy();
        this._upInner = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.dummy();
        this._filmWidth = 36; // mili meter
        this._filmHeight = 24; // mili meter
        this._focalLength = 20;
        this.primitiveMode = false;
        // x: left, y:right, z:top, w: bottom
        this._corner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4.dummy();
        this._cornerInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4.dummy();
        // x: zNear, y: zFar,
        // if perspective, z: fovy, w: aspect
        // if ortho, z: xmag, w: ymag
        this._parameters = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4.dummy();
        this._parametersInner = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4.dummy();
        this.__type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_5__.CameraType.Perspective;
        this._projectionMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.dummy();
        this.__isProjectionMatrixUpToDate = false;
        this._viewMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.dummy();
        this.__isViewMatrixUpToDate = false;
        this.__frustum = new _geometry_Frustum__WEBPACK_IMPORTED_MODULE_13__.Frustum();
        this._setMaxNumberOfComponent(Math.max(10, Math.floor(_core_Config__WEBPACK_IMPORTED_MODULE_14__.Config.maxEntityNumber / 100)));
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'eyeInner', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0, 0, 0]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'direction', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0, 0, -1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'up', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0, 1, 0]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'directionInner', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0, 0, -1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'upInner', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0, 1, 0]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'corner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [-1, 1, 1, -1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'cornerInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [-1, 1, 1, -1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'parameters', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0.1, 10000, 90, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'parametersInner', _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [0.1, 10000, 90, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'projectionMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_7__.BufferUse.CPUGeneric, 'viewMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        this.submitToAllocation(_core_Config__WEBPACK_IMPORTED_MODULE_14__.Config.maxCameraNumber);
        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__.GlobalDataRepository.getInstance();
        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ViewMatrix);
        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ProjectionMatrix);
        globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ViewPosition);
        this.setFovyAndChangeFocalLength(90);
        if (CameraComponent.current === -1) {
            CameraComponent.current = componentSid;
        }
    }
    static set current(componentSID) {
        this.__current = componentSID;
    }
    static get current() {
        return this.__current;
    }
    set type(type) {
        this.__type = type;
        if (type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_5__.CameraType.Orthographic) {
            this._parameters.z = 1;
            this._parameters.w = 1;
            this._parametersInner.z = 1;
            this._parametersInner.w = 1;
        }
        else {
            this.setFovyAndChangeFocalLength(90);
            this._parameters.w = 1;
            this._parametersInner.z = 90;
            this._parametersInner.w = 1;
        }
    }
    get type() {
        return this.__type;
    }
    get eye() {
        // In Rhodonite, eye is always (0,0,0). Use TransformComponent for Camera positioning
        return CameraComponent._eye;
    }
    set eye(noUseVec) {
        throw Error('In Rhodonite, eye is always (0,0,0). Use TransformComponent for Camera positioning.');
    }
    get eyeInner() {
        return this._eyeInner;
    }
    /**
     * @private
     */
    set eyeInner(vec) {
        this._eyeInner.copyComponents(vec);
    }
    set upInner(vec) {
        this._upInner.copyComponents(vec);
    }
    set up(vec) {
        this._up.copyComponents(vec);
    }
    get up() {
        return this._up.clone();
    }
    get upInner() {
        return this._upInner;
    }
    set direction(vec) {
        const oldDirection = this._direction;
        const newDirection = vec;
        const oldUp = this._up;
        const orthogonalVectorNewDirectionAndOldUp = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.crossTo(newDirection, oldUp, CameraComponent.__tmpVector3_0);
        const isOrthogonalNewDirectionAndOldUp = orthogonalVectorNewDirectionAndOldUp.length() === 0.0;
        let newUpNonNormalize;
        if (isOrthogonalNewDirectionAndOldUp) {
            const relativeXaxis = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.crossTo(oldDirection, oldUp, CameraComponent.__tmpVector3_1);
            newUpNonNormalize = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.crossTo(relativeXaxis, newDirection, CameraComponent.__tmpVector3_2);
        }
        else {
            const newDirectionComponentInOldUp = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.multiplyTo(newDirection, newDirection.dot(oldUp), CameraComponent.__tmpVector3_1);
            newUpNonNormalize = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.subtractTo(oldUp, newDirectionComponentInOldUp, CameraComponent.__tmpVector3_2);
        }
        this._up.copyComponents(newUpNonNormalize).normalize();
        this._direction.copyComponents(newDirection);
    }
    set directionInner(vec) {
        this._directionInner.copyComponents(vec);
    }
    get direction() {
        return this._direction.clone();
    }
    get directionInner() {
        return this._directionInner;
    }
    set corner(vec) {
        this._corner.copyComponents(vec);
    }
    get corner() {
        return this._corner.clone();
    }
    set left(value) {
        this._corner.x = value;
    }
    set leftInner(value) {
        this._cornerInner.x = value;
    }
    get left() {
        return this._corner.x;
    }
    set right(value) {
        this._corner.y = value;
    }
    set rightInner(value) {
        this._cornerInner.y = value;
    }
    get right() {
        return this._corner.y;
    }
    set top(value) {
        this._corner.z = value;
    }
    set topInner(value) {
        this._cornerInner.z = value;
    }
    get top() {
        return this._corner.z;
    }
    set bottom(value) {
        this._corner.w = value;
    }
    set bottomInner(value) {
        this._cornerInner.w = value;
    }
    get bottom() {
        return this._corner.w;
    }
    set cornerInner(vec) {
        this._cornerInner.copyComponents(vec);
    }
    get cornerInner() {
        return this._cornerInner;
    }
    // set parameters(vec: Vector4) {
    //   this._parameters.copyComponents(vec);
    // }
    set parametersInner(vec) {
        this._parametersInner.copyComponents(vec);
    }
    get parametersInner() {
        return this._parametersInner;
    }
    get parameters() {
        return this._parameters.clone();
    }
    set zNear(val) {
        this._parameters.x = val;
    }
    set zNearInner(val) {
        this._parametersInner.x = val;
    }
    get zNearInner() {
        return this._parametersInner.x;
    }
    get zNear() {
        return this._parameters.x;
    }
    set focalLength(val) {
        this._focalLength = val;
        this._parameters.z =
            2 * _math_MathUtil__WEBPACK_IMPORTED_MODULE_17__.MathUtil.radianToDegree(Math.atan(this._filmHeight / (val * 2)));
    }
    get focalLength() {
        return this._focalLength;
    }
    set zFar(val) {
        this._parameters.y = val;
    }
    set zFarInner(val) {
        this._parametersInner.y = val;
    }
    get zFarInner() {
        return this._parametersInner.y;
    }
    get zFar() {
        return this._parameters.y;
    }
    setFovyAndChangeFilmSize(degree) {
        this._parameters.z = degree;
        this._filmHeight =
            2 * this.focalLength * Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_17__.MathUtil.degreeToRadian(degree) / 2);
        this._filmWidth = this._filmHeight * this.aspect;
    }
    setFovyAndChangeFocalLength(degree) {
        this._parameters.z = degree;
        this._focalLength =
            this._filmHeight / 2 / Math.tan(_math_MathUtil__WEBPACK_IMPORTED_MODULE_17__.MathUtil.degreeToRadian(degree) / 2);
    }
    get fovy() {
        return this._parameters.z;
    }
    set fovyInner(val) {
        this._parametersInner.z = val;
    }
    set aspect(val) {
        this._parameters.w = val;
        this._filmWidth = this._filmHeight * val;
    }
    set aspectInner(val) {
        this._parametersInner.w = val;
    }
    get aspectInner() {
        return this._parametersInner.w;
    }
    get aspect() {
        return this._parameters.w;
    }
    set xMag(val) {
        this._parameters.z = val;
    }
    get xMag() {
        return this._parameters.z;
    }
    set yMag(val) {
        this._parameters.w = val;
    }
    get yMag() {
        return this._parameters.w;
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.CameraComponentTID;
    }
    calcProjectionMatrix() {
        const zNear = this._parametersInner.x;
        const zFar = this._parametersInner.y;
        if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_5__.CameraType.Perspective) {
            const fovy = this._parametersInner.z;
            const aspect = this._parametersInner.w;
            const yscale = 1.0 / Math.tan((0.5 * fovy * Math.PI) / 180);
            const xscale = yscale / aspect;
            this._projectionMatrix.setComponents(xscale, 0, 0, 0, 0, yscale, 0, 0, 0, 0, -(zFar + zNear) / (zFar - zNear), -(2.0 * zFar * zNear) / (zFar - zNear), 0, 0, -1, 0);
        }
        else if (this.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_5__.CameraType.Orthographic) {
            const xmag = this._parametersInner.z;
            const ymag = this._parametersInner.w;
            this._projectionMatrix.setComponents(1 / xmag, 0.0, 0.0, 0, 0.0, 1 / ymag, 0.0, 0, 0.0, 0.0, -2 / (zFar - zNear), -(zFar + zNear) / (zFar - zNear), 0.0, 0.0, 0.0, 1.0);
        }
        else {
            const left = this._cornerInner.x;
            const right = this._cornerInner.y;
            const top = this._cornerInner.z;
            const bottom = this._cornerInner.w;
            this._projectionMatrix.setComponents((2 * zNear) / (right - left), 0.0, (right + left) / (right - left), 0.0, 0.0, (2 * zNear) / (top - bottom), (top + bottom) / (top - bottom), 0.0, 0.0, 0.0, -(zFar + zNear) / (zFar - zNear), (-1 * 2 * zFar * zNear) / (zFar - zNear), 0.0, 0.0, -1.0, 0.0);
        }
        return this._projectionMatrix;
    }
    get projectionMatrix() {
        return this._projectionMatrix;
    }
    calcViewMatrix() {
        const eye = this.eyeInner;
        const f = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.subtractTo(this._directionInner, eye, CameraComponent.__tmpVector3_0).normalize();
        const s = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.crossTo(f, this._upInner, CameraComponent.__tmpVector3_1).normalize();
        const u = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.crossTo(s, f, CameraComponent.__tmpVector3_2);
        this._viewMatrix.setComponents(s.x, s.y, s.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.dot(s, eye), u.x, u.y, u.z, -_math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.dot(u, eye), -f.x, -f.y, -f.z, _math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.dot(f, eye), 0, 0, 0, 1);
        if (!this.primitiveMode) {
            const invertWorldMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.invertTo(this.__sceneGraphComponent.worldMatrixInner, CameraComponent.__tmpMatrix44_0);
            this._viewMatrix.multiply(invertWorldMatrix);
        }
        return this._viewMatrix;
    }
    get viewMatrix() {
        return this._viewMatrix;
    }
    set viewMatrix(viewMatrix) {
        this._viewMatrix.copyComponents(viewMatrix);
    }
    set projectionMatrix(projectionMatrix) {
        this._projectionMatrix.copyComponents(projectionMatrix);
    }
    get viewProjectionMatrix() {
        return _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.multiplyTo(this._projectionMatrix, this._viewMatrix, CameraComponent.__tmpMatrix44_0);
    }
    setValuesToGlobalDataRepositoryOnlyMatrices() {
        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ViewMatrix, this.componentSID, this.viewMatrix);
        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ProjectionMatrix, this.componentSID, this.projectionMatrix);
    }
    setValuesToGlobalDataRepository() {
        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ViewMatrix, this.componentSID, this.viewMatrix);
        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ProjectionMatrix, this.componentSID, this.projectionMatrix);
        CameraComponent.__globalDataRepository.setValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_16__.ShaderSemantics.ViewPosition, this.componentSID, this.worldPosition);
    }
    get worldPosition() {
        this.__sceneGraphComponent.worldMatrixInner.multiplyVector3To(this.eyeInner, CameraComponent.returnVector3);
        return CameraComponent.returnVector3;
    }
    updateFrustum() {
        this.__frustum.update(this.viewMatrix, this.projectionMatrix);
    }
    get frustum() {
        return this.__frustum;
    }
    $create() {
        this.__sceneGraphComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__.SceneGraphComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_10__.ProcessStage.Logic);
    }
    $logic({ renderPass }) {
        const cameraControllerComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _CameraController_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_18__.CameraControllerComponent);
        if (cameraControllerComponent == null) {
            if (!this.primitiveMode) {
                this._eyeInner.copyComponents(CameraComponent._eye);
                this._directionInner.copyComponents(this._direction);
                this._upInner.copyComponents(this._up);
                this._cornerInner.copyComponents(this._corner);
                this._parametersInner.copyComponents(this._parameters);
            }
        }
        else {
            this._parametersInner.w = this._parameters.w;
        }
        this.calcViewMatrix();
        this.calcProjectionMatrix();
        const rnXRModule = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_19__.ModuleManager.getInstance().getModule('xr');
        if (rnXRModule === null || rnXRModule === void 0 ? void 0 : rnXRModule.WebXRSystem.getInstance().isWebXRMode) ;
        else {
            this.setValuesToGlobalDataRepository();
        }
    }
    static getCurrentCameraEntity() {
        const currentCameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.getComponent(this, this.current);
        return currentCameraComponent.entity;
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class CameraEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getCamera() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.CameraComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, CameraEntity);
        return base;
    }
}
CameraComponent._eye = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.zero();
CameraComponent.__current = -1;
CameraComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
CameraComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_15__.GlobalDataRepository.getInstance();
CameraComponent.__tmpVector3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
CameraComponent.__tmpVector3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
CameraComponent.__tmpVector3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
CameraComponent.__tmpMatrix44_0 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.zero();
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(CameraComponent);


/***/ }),

/***/ "./src/foundation/components/Camera/ICameraEntity.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/components/Camera/ICameraEntity.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Camera/index.ts":
/*!***************************************************!*\
  !*** ./src/foundation/components/Camera/index.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraComponent": () => (/* reexport safe */ _CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent)
/* harmony export */ });
/* harmony import */ var _CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ __webpack_require__(/*! ./ICameraEntity */ "./src/foundation/components/Camera/ICameraEntity.ts");




/***/ }),

/***/ "./src/foundation/components/CameraController/CameraControllerComponent.ts":
/*!*********************************************************************************!*\
  !*** ./src/foundation/components/CameraController/CameraControllerComponent.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraControllerComponent": () => (/* binding */ CameraControllerComponent)
/* harmony export */ });
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../cameras/OrbitCameraController */ "./src/foundation/cameras/OrbitCameraController.ts");
/* harmony import */ var _cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../cameras/WalkThroughCameraController */ "./src/foundation/cameras/WalkThroughCameraController.ts");
/* harmony import */ var _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/CameraControllerType */ "./src/foundation/definitions/CameraControllerType.ts");









class CameraControllerComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.__cameraController = new _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_6__.OrbitCameraController();
    }
    set type(type) {
        this.__cameraController.unregisterEventListeners();
        if (type === _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_8__.CameraControllerType.Orbit) {
            this.__cameraController = new _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_6__.OrbitCameraController();
        }
        else if (type === _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_8__.CameraControllerType.WalkThrough) {
            this.__cameraController = new _cameras_WalkThroughCameraController__WEBPACK_IMPORTED_MODULE_7__.WalkThroughCameraController();
        }
        else {
            console.warn('Not support type!');
        }
    }
    get type() {
        if (this.__cameraController instanceof _cameras_OrbitCameraController__WEBPACK_IMPORTED_MODULE_6__.OrbitCameraController) {
            return _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_8__.CameraControllerType.Orbit;
        }
        else {
            return _definitions_CameraControllerType__WEBPACK_IMPORTED_MODULE_8__.CameraControllerType.WalkThrough;
        }
    }
    get controller() {
        return this.__cameraController;
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__.WellKnownComponentTIDs.CameraControllerComponentTID;
    }
    $create() {
        this.__cameraComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getComponentOfEntity(this.__entityUid, _Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_2__.CameraComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
    }
    $logic() {
        if (this.__cameraController) {
            this.__cameraController.logic(this.__cameraComponent);
        }
    }
    addThisComponentToEntity(base, _componentClass) {
        class CameraControllerEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getCameraController() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__.WellKnownComponentTIDs.CameraControllerComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.applyMixins)(base, CameraControllerEntity);
        return base;
    }
}
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__.ComponentRepository.registerComponentClass(CameraControllerComponent);


/***/ }),

/***/ "./src/foundation/components/CameraController/ICameraControllerEntity.ts":
/*!*******************************************************************************!*\
  !*** ./src/foundation/components/CameraController/ICameraControllerEntity.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/CameraController/index.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/CameraController/index.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraControllerComponent": () => (/* reexport safe */ _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_0__.CameraControllerComponent)
/* harmony export */ });
/* harmony import */ var _CameraControllerComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CameraControllerComponent */ "./src/foundation/components/CameraController/CameraControllerComponent.ts");
/* harmony import */ __webpack_require__(/*! ./ICameraControllerEntity */ "./src/foundation/components/CameraController/ICameraControllerEntity.ts");




/***/ }),

/***/ "./src/foundation/components/ComponentTypes.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/components/ComponentTypes.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Light/ILightEntity.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/Light/ILightEntity.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Light/LightComponent.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/components/Light/LightComponent.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LightComponent": () => (/* binding */ LightComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/LightType */ "./src/foundation/definitions/LightType.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");













class LightComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.type = _definitions_LightType__WEBPACK_IMPORTED_MODULE_4__.LightType.Point;
        this.__intensity = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([1, 1, 1]);
        this.__initialdirection = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0, 1, 0]);
        this.__direction = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0, 1, 0]);
        this.innerConeAngle = 0.0;
        this.outerConeAngle = Math.PI / 4.0; // in radian
        this.range = -1;
        this.enable = true;
        this._setMaxNumberOfComponent(Math.max(10, Math.floor(_core_Config__WEBPACK_IMPORTED_MODULE_8__.Config.maxEntityNumber / 100)));
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.LightComponentTID;
    }
    get direction() {
        return this.__direction;
    }
    set intensity(value) {
        this.__intensity = value;
    }
    get intensity() {
        return this.__intensity;
    }
    $create() {
        this.__sceneGraphComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_6__.SceneGraphComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__.ProcessStage.Load);
    }
    $load() {
        const lightComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.getComponentsWithType(LightComponent);
        const currentComponentSIDs = LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.CurrentComponentSIDs, 0);
        currentComponentSIDs._v[_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.LightComponentTID] =
            lightComponents.length;
        LightComponent.__lightPositions =
            LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.LightPosition, 0);
        LightComponent.__lightDirections =
            LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.LightDirection, 0);
        LightComponent.__lightIntensities =
            LightComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.LightIntensity, 0);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__.ProcessStage.Logic);
    }
    $logic() {
        this.__direction =
            this.__sceneGraphComponent.normalMatrixInner.multiplyVector(this.__initialdirection);
        const lightAngleScale = 1.0 /
            Math.max(0.001, Math.cos(this.innerConeAngle) - Math.cos(this.outerConeAngle));
        const lightAngleOffset = -Math.cos(this.outerConeAngle) * lightAngleScale;
        LightComponent.__lightDirections._v[4 * this.componentSID + 0] =
            this.__direction.x;
        LightComponent.__lightDirections._v[4 * this.componentSID + 1] =
            this.__direction.y;
        LightComponent.__lightDirections._v[4 * this.componentSID + 2] =
            this.__direction.z;
        LightComponent.__lightDirections._v[4 * this.componentSID + 3] =
            lightAngleScale;
        const lightPosition = this.__sceneGraphComponent.worldPosition;
        LightComponent.__lightPositions._v[4 * this.componentSID + 0] =
            lightPosition.x;
        LightComponent.__lightPositions._v[4 * this.componentSID + 1] =
            lightPosition.y;
        LightComponent.__lightPositions._v[4 * this.componentSID + 2] =
            lightPosition.z;
        LightComponent.__lightPositions._v[4 * this.componentSID + 3] = this.enable
            ? this.type.index
            : -1;
        LightComponent.__lightIntensities._v[4 * this.componentSID + 0] =
            this.__intensity.x;
        LightComponent.__lightIntensities._v[4 * this.componentSID + 1] =
            this.__intensity.y;
        LightComponent.__lightIntensities._v[4 * this.componentSID + 2] =
            this.__intensity.z;
        LightComponent.__lightIntensities._v[4 * this.componentSID + 3] =
            lightAngleOffset;
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getEntity(this.__entityUid);
    }
    addThisComponentToEntity(base, _componentClass) {
        class LightEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getLight() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.LightComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, LightEntity);
        return base;
    }
}
LightComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_9__.GlobalDataRepository.getInstance();
LightComponent.__tmp_vec4 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_11__.MutableVector4.zero();
LightComponent.__lightPositions = new _math_VectorN__WEBPACK_IMPORTED_MODULE_12__.VectorN(new Float32Array(0));
LightComponent.__lightDirections = new _math_VectorN__WEBPACK_IMPORTED_MODULE_12__.VectorN(new Float32Array(0));
LightComponent.__lightIntensities = new _math_VectorN__WEBPACK_IMPORTED_MODULE_12__.VectorN(new Float32Array(0));
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(LightComponent);


/***/ }),

/***/ "./src/foundation/components/Light/index.ts":
/*!**************************************************!*\
  !*** ./src/foundation/components/Light/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LightComponent": () => (/* reexport safe */ _LightComponent__WEBPACK_IMPORTED_MODULE_1__.LightComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./ILightEntity */ "./src/foundation/components/Light/ILightEntity.ts");
/* harmony import */ var _LightComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LightComponent */ "./src/foundation/components/Light/LightComponent.ts");




/***/ }),

/***/ "./src/foundation/components/Mesh/IMeshEntity.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/components/Mesh/IMeshEntity.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Mesh/MeshComponent.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/Mesh/MeshComponent.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MeshComponent": () => (/* binding */ MeshComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _core_Entity__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/Entity */ "./src/foundation/core/Entity.ts");
/* harmony import */ var _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/MathClassUtil */ "./src/foundation/math/MathClassUtil.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _BlendShape_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../BlendShape/BlendShapeComponent */ "./src/foundation/components/BlendShape/BlendShapeComponent.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
















class MeshComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.__viewDepth = -Number.MAX_VALUE;
        this.isPickable = true;
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Create);
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.MeshComponentTID;
    }
    setMesh(mesh) {
        this.__mesh = mesh;
        mesh._belongToMeshComponent(this);
        mesh._attachedEntityUID = this.entityUID;
    }
    unsetMesh() {
        if (this.__mesh == null) {
            return false;
        }
        this.__mesh._attachedEntityUID = _core_Entity__WEBPACK_IMPORTED_MODULE_7__.Entity.invalidEntityUID;
        this.__mesh = void 0;
        return true;
    }
    get mesh() {
        return this.__mesh;
    }
    set weights(value) {
        if (this.__mesh == null) {
            return;
        }
        //    this.__mesh!.makeVerticesSeparated();
        this.__mesh.weights = value;
    }
    calcViewDepth(cameraComponent) {
        const centerPosition_inLocal = this.__mesh.AABB.centerPoint;
        const skeletal = this.entity.tryToGetSkeletal();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_13__.Is.exist(skeletal) && _misc_Is__WEBPACK_IMPORTED_MODULE_13__.Is.exist(skeletal._bindShapeMatrix)) {
            skeletal._bindShapeMatrix.multiplyVector3To(this.__mesh.AABB.centerPoint, centerPosition_inLocal);
        }
        const worldMatrixInner = this.entity.getSceneGraph().worldMatrixInner;
        const centerPosition_inWorld = worldMatrixInner.multiplyVector3To(centerPosition_inLocal, MeshComponent.__tmpVector3_0);
        const viewMatrix = cameraComponent.viewMatrix;
        const centerPosition_inView = viewMatrix.multiplyVector3To(centerPosition_inWorld, MeshComponent.__tmpVector3_1);
        this.__viewDepth = centerPosition_inView.z;
        return this.__viewDepth;
    }
    get viewDepth() {
        return this.__viewDepth;
    }
    static alertNoMeshSet(meshComponent) {
        console.debug('No mesh is set on this MeshComponent:' + meshComponent.componentSID);
    }
    castRay(srcPointInWorld, directionInWorld, dotThreshold = 0) {
        if (this.__mesh) {
            let srcPointInLocal = srcPointInWorld;
            let directionInLocal = directionInWorld;
            if (this.__sceneGraphComponent) {
                const invWorldMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_9__.Matrix44.invert(this.__sceneGraphComponent.worldMatrixInner);
                srcPointInLocal = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyVector4(invWorldMatrix.multiplyVector(_math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyVector3(srcPointInWorld)));
                const distVecInWorld = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.add(srcPointInWorld, directionInWorld);
                const distVecInLocal = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyVector4(invWorldMatrix.multiplyVector(_math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyVector3(distVecInWorld)));
                directionInLocal = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.subtract(distVecInLocal, srcPointInLocal));
                const result = this.__mesh.castRay(srcPointInLocal, directionInLocal, dotThreshold);
                let intersectPositionInWorld = null;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_13__.Is.defined(result.data) && result.data.t >= 0) {
                    intersectPositionInWorld = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyVector4(this.__sceneGraphComponent.worldMatrixInner.multiplyVector(_math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyVector3(result.data.position)));
                    return {
                        result: true,
                        data: {
                            t: result.data.t,
                            u: result.data.u,
                            v: result.data.v,
                            position: intersectPositionInWorld,
                        },
                    };
                }
            }
        }
        return {
            result: false,
        };
    }
    castRayFromScreenInLocal(x, y, camera, viewport, dotThreshold = 0) {
        if (this.__mesh) {
            if (this.__sceneGraphComponent) {
                const invPVW = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__.MutableMatrix44.multiplyTo(camera.projectionMatrix, camera.viewMatrix, MeshComponent.__tmpMatrix44_0)
                    .multiply(this.__sceneGraphComponent.worldMatrixInner)
                    .invert();
                const srcPointInLocal = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__.MathClassUtil.unProjectTo(x, y, 0, invPVW, viewport, MeshComponent.__tmpVector3_0);
                const distVecInLocal = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_11__.MathClassUtil.unProjectTo(x, y, 1, invPVW, viewport, MeshComponent.__tmpVector3_1);
                const directionInLocal = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.subtractTo(distVecInLocal, srcPointInLocal, MeshComponent.__tmpVector3_2).normalize();
                const result = this.__mesh.castRay(srcPointInLocal, directionInLocal, dotThreshold);
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_13__.Is.defined(result.data) && result.data.t >= 0) {
                    return {
                        result: true,
                        data: {
                            t: result.data.t,
                            u: result.data.u,
                            v: result.data.v,
                            position: result.data.position,
                        },
                    };
                }
            }
        }
        return {
            result: false,
        };
    }
    castRayFromScreenInWorld(x, y, camera, viewport, dotThreshold = 0) {
        const result = this.castRayFromScreenInLocal(x, y, camera, viewport, dotThreshold);
        if (this.__mesh && this.__sceneGraphComponent && result.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_15__.assertExist)(result.data);
            // convert to World space
            const intersectedPositionInWorld = this.__sceneGraphComponent.worldMatrixInner.multiplyVector3To(result.data.position, MeshComponent.__returnVector3);
            return {
                result: true,
                data: {
                    t: result.data.t,
                    u: result.data.u,
                    v: result.data.v,
                    position: intersectedPositionInWorld,
                },
            };
        }
        else {
            return result;
        }
    }
    $create() {
        this.__blendShapeComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _BlendShape_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_14__.BlendShapeComponent);
        this.__sceneGraphComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getComponentOfEntity(this.__entityUid, _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__.SceneGraphComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Load);
    }
    static common_$load({ processApproach, }) {
        // check for the need to update VBO
        const meshComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.getComponentsWithType(MeshComponent);
        for (const meshComponent of meshComponents) {
            const mesh = meshComponent.mesh;
            if (!_misc_Is__WEBPACK_IMPORTED_MODULE_13__.Is.exist(mesh)) {
                continue;
            }
            const primitiveNum = mesh.getPrimitiveNumber();
            for (let i = 0; i < primitiveNum; i++) {
                const primitive = mesh.getPrimitiveAt(i);
                if (primitive.positionAccessorVersion !==
                    MeshComponent.__latestPrimitivePositionAccessorVersion) {
                    const meshRendererComponent = meshComponent.entity.tryToGetMeshRenderer();
                    meshRendererComponent === null || meshRendererComponent === void 0 ? void 0 : meshRendererComponent.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Load);
                    MeshComponent.__latestPrimitivePositionAccessorVersion =
                        primitive.positionAccessorVersion;
                }
            }
        }
    }
    $load() {
        if (this.__mesh == null) {
            return;
        }
        //    this.__mesh!.makeVerticesSeparated();
        this.__mesh._calcTangents();
        // this.__mesh.__initMorphPrimitives();
        this.__mesh._calcFaceNormalsIfNonNormal();
        if (this.__blendShapeComponent &&
            this.__blendShapeComponent.weights.length > 0) {
            this.__mesh._calcBaryCentricCoord();
        }
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Logic);
    }
    $logic() { }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class MeshEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getMesh() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.MeshComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, MeshEntity);
        return base;
    }
}
MeshComponent.__tmpVector3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
MeshComponent.__tmpVector3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
MeshComponent.__tmpVector3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
MeshComponent.__returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
MeshComponent.__tmpMatrix44_0 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__.MutableMatrix44.zero();
MeshComponent.__latestPrimitivePositionAccessorVersion = 0;
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(MeshComponent);


/***/ }),

/***/ "./src/foundation/components/Mesh/index.ts":
/*!*************************************************!*\
  !*** ./src/foundation/components/Mesh/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MeshComponent": () => (/* reexport safe */ _MeshComponent__WEBPACK_IMPORTED_MODULE_1__.MeshComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./IMeshEntity */ "./src/foundation/components/Mesh/IMeshEntity.ts");
/* harmony import */ var _MeshComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");




/***/ }),

/***/ "./src/foundation/components/MeshRenderer/IMeshRendererEntity.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/components/MeshRenderer/IMeshRendererEntity.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts":
/*!*************************************************************************!*\
  !*** ./src/foundation/components/MeshRenderer/MeshRendererComponent.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MeshRendererComponent": () => (/* binding */ MeshRendererComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _definitions_Visibility__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/Visibility */ "./src/foundation/definitions/Visibility.ts");
/* harmony import */ var _materials_core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../materials/core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _geometry_types_GeometryTypes__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../geometry/types/GeometryTypes */ "./src/foundation/geometry/types/GeometryTypes.ts");
/* harmony import */ var _webgl_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../webgl/WebGLStrategyCommonMethod */ "./src/webgl/WebGLStrategyCommonMethod.ts");















class MeshRendererComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.diffuseCubeMapContribution = 1.0;
        this.specularCubeMapContribution = 1.0;
        this.rotationOfCubeMap = 0;
        this._readyForRendering = false;
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_6__.WellKnownComponentTIDs.MeshRendererComponentTID;
    }
    $create() {
        this.__meshComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_4__.EntityRepository.getComponentOfEntity(this.__entityUid, _Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_2__.MeshComponent);
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Load);
    }
    static common_$load({ processApproach, }) {
        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_9__.ModuleManager.getInstance();
        const moduleName = 'webgl';
        const webglModule = moduleManager.getModule(moduleName);
        // Strategy
        MeshRendererComponent.__webglRenderingStrategy =
            webglModule.getRenderingStrategy(processApproach);
        _materials_core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_11__.AbstractMaterialContent.initDefaultTextures();
    }
    $load() {
        MeshRendererComponent.__webglRenderingStrategy.$load(this.__meshComponent);
        if (this.diffuseCubeMap && !this.diffuseCubeMap.startedToLoad) {
            this.diffuseCubeMap.loadTextureImagesAsync();
        }
        if (this.specularCubeMap && !this.specularCubeMap.startedToLoad) {
            this.specularCubeMap.loadTextureImagesAsync();
        }
        // this.moveStageTo(ProcessStage.PreRender);
    }
    static common_$prerender() {
        MeshRendererComponent.__webglRenderingStrategy.common_$prerender();
        return;
    }
    // $prerender() {
    // }
    static sort_$render(renderPass) {
        const primitiveUids = MeshRendererComponent.sort_$render_inner(renderPass);
        return primitiveUids;
    }
    static sort_$render_inner(renderPass) {
        // get CameraComponent
        let cameraComponent = renderPass.cameraComponent;
        // If the renderPass doesn't have a cameraComponent, then we get it of the main camera
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.getComponent(_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_7__.CameraComponent, _Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_7__.CameraComponent.current);
        }
        // FrustumCulling
        let primitives = [];
        const sceneGraphComponents = renderPass.sceneTopLevelGraphComponents;
        primitives = MeshRendererComponent.__cullingWithViewFrustum(cameraComponent, sceneGraphComponents, renderPass);
        // After Frustum Culling, remove duplicated Primitives
        primitives = Array.from(new Set(primitives));
        // Sort by sortkey
        primitives.sort((a, b) => {
            const deltaKey = a._sortkey - b._sortkey;
            if (deltaKey === 0) {
                return a._viewDepth - b._viewDepth;
            }
            else {
                return deltaKey;
            }
        });
        const primitiveUids = primitives.map(primitive => primitive.primitiveUid);
        primitiveUids.push(-1);
        MeshRendererComponent._lastOpaqueIndex = -1;
        MeshRendererComponent._lastTransparentIndex = -1;
        MeshRendererComponent._firstTransparentSortKey = -1;
        MeshRendererComponent._lastTransparentSortKey = -1;
        for (let i = 0; i < primitives.length; i++) {
            const primitive = primitives[i];
            const bitOffset = _geometry_types_GeometryTypes__WEBPACK_IMPORTED_MODULE_13__.PrimitiveSortKey_BitOffset_TranslucencyType + 1;
            const isTranslucency = (primitive._sortkey >> bitOffset) & 1;
            if (isTranslucency) {
                MeshRendererComponent._lastOpaqueIndex = i - 1;
                MeshRendererComponent._firstTransparentSortKey = primitive._sortkey;
                break;
            }
        }
        if (MeshRendererComponent._lastOpaqueIndex === -1) {
            MeshRendererComponent._lastOpaqueIndex = primitives.length - 1;
        }
        if (primitives.length > 0) {
            MeshRendererComponent._lastTransparentIndex = primitives.length - 1;
            MeshRendererComponent._lastTransparentSortKey =
                primitives[primitives.length - 1]._sortkey;
        }
        return primitiveUids;
    }
    static __cullingWithViewFrustum(cameraComponent, sceneGraphComponents, renderPass) {
        let meshComponents = [];
        if (cameraComponent && MeshRendererComponent.isViewFrustumCullingEnabled) {
            cameraComponent.updateFrustum();
            const whetherContainsSkeletal = (sg) => {
                const skeletalComponent = sg.entity.tryToGetSkeletal();
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_12__.Is.exist(skeletalComponent)) {
                    return true;
                }
                else {
                    const children = sg.children;
                    for (const child of children) {
                        return whetherContainsSkeletal(child);
                    }
                    return false;
                }
            };
            const frustum = cameraComponent.frustum;
            const doAsVisible = (sg, meshComponents) => {
                const sgs = _SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_5__.SceneGraphComponent.flattenHierarchy(sg, false);
                for (const sg of sgs) {
                    const mesh = sg.entity.tryToGetMesh();
                    if (mesh) {
                        meshComponents.push(mesh);
                    }
                }
            };
            const frustumCullingRecursively = (sg, meshComponents) => {
                const result = frustum.culling(sg);
                if (result === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_10__.Visibility.Visible) {
                    doAsVisible(sg, meshComponents);
                }
                else if (result === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_10__.Visibility.Neutral ||
                    whetherContainsSkeletal(sg)) {
                    const children = sg.children;
                    const mesh = sg.entity.tryToGetMesh();
                    if (mesh) {
                        meshComponents.push(mesh);
                    }
                    for (const child of children) {
                        frustumCullingRecursively(child, meshComponents);
                    }
                }
            };
            for (const tlsg of sceneGraphComponents) {
                frustumCullingRecursively(tlsg, meshComponents);
            }
        }
        else {
            meshComponents = renderPass.meshComponents;
        }
        const primitives = [];
        for (let i = 0; i < meshComponents.length; i++) {
            const meshComponent = meshComponents[i];
            const viewDepth = meshComponent.calcViewDepth(cameraComponent);
            const mesh = meshComponent.mesh;
            if (mesh !== undefined) {
                const meshPrimitives = mesh.primitives;
                for (let j = 0; j < meshPrimitives.length; j++) {
                    const primitive = meshPrimitives[j];
                    if (_webgl_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_14__["default"].isSkipDrawing(primitive.material)) ;
                    primitive._viewDepth = viewDepth;
                    primitives.push(primitive);
                }
            }
        }
        return primitives;
    }
    static common_$render({ renderPass, processStage, renderPassTickCount, }) {
        let cameraComponent = renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.getComponent(_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_7__.CameraComponent, _Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_7__.CameraComponent.current);
        }
        let viewMatrix = MeshRendererComponent.__tmp_identityMatrix;
        let projectionMatrix = MeshRendererComponent.__tmp_identityMatrix;
        if (cameraComponent != null) {
            viewMatrix = cameraComponent.viewMatrix;
            projectionMatrix = cameraComponent.projectionMatrix;
        }
        // Call common_$render of WebGLRenderingStrategy
        const primitiveUids = _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component.__componentsOfProcessStages.get(processStage);
        const meshComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository._getComponents(_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_2__.MeshComponent);
        MeshRendererComponent.__webglRenderingStrategy.common_$render(primitiveUids, meshComponents, viewMatrix, projectionMatrix, renderPass, renderPassTickCount);
    }
    $render({ i, renderPass, renderPassTickCount, }) { }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class MeshRendererEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getMeshRenderer() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_6__.WellKnownComponentTIDs.MeshRendererComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_4__.applyMixins)(base, MeshRendererEntity);
        return base;
    }
}
MeshRendererComponent.__shaderProgramHandleOfPrimitiveObjectUids = new Map();
MeshRendererComponent.__tmp_identityMatrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_8__.Matrix44.identity();
MeshRendererComponent._lastOpaqueIndex = -1;
MeshRendererComponent._lastTransparentIndex = -1;
MeshRendererComponent._firstTransparentSortKey = -1;
MeshRendererComponent._lastTransparentSortKey = -1;
MeshRendererComponent.isViewFrustumCullingEnabled = true;
MeshRendererComponent.isDepthMaskTrueForTransparencies = false;
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(MeshRendererComponent);


/***/ }),

/***/ "./src/foundation/components/MeshRenderer/index.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/components/MeshRenderer/index.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MeshRendererComponent": () => (/* reexport safe */ _MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__.MeshRendererComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./IMeshRendererEntity */ "./src/foundation/components/MeshRenderer/IMeshRendererEntity.ts");
/* harmony import */ var _MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");




/***/ }),

/***/ "./src/foundation/components/Physics/IPhysicsEntity.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/Physics/IPhysicsEntity.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Physics/PhysicsComponent.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/components/Physics/PhysicsComponent.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PhysicsComponent": () => (/* binding */ PhysicsComponent)
/* harmony export */ });
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../physics/VRMSpringBonePhysicsStrategy */ "./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts");






class PhysicsComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityComponent) {
        super(entityUid, componentSid, entityComponent);
        this.__strategy = new _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_5__.VRMSpringBonePhysicsStrategy();
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Logic);
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.PhysicsComponentTID;
    }
    get strategy() {
        return this.__strategy;
    }
    static common_$logic() {
        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_5__.VRMSpringBonePhysicsStrategy.update();
    }
    $logic() { }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class PhysicsEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getPhysics() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.PhysicsComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, PhysicsEntity);
        return base;
    }
}
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.registerComponentClass(PhysicsComponent);


/***/ }),

/***/ "./src/foundation/components/Physics/index.ts":
/*!****************************************************!*\
  !*** ./src/foundation/components/Physics/index.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PhysicsComponent": () => (/* reexport safe */ _PhysicsComponent__WEBPACK_IMPORTED_MODULE_1__.PhysicsComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./IPhysicsEntity */ "./src/foundation/components/Physics/IPhysicsEntity.ts");
/* harmony import */ var _PhysicsComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PhysicsComponent */ "./src/foundation/components/Physics/PhysicsComponent.ts");




/***/ }),

/***/ "./src/foundation/components/SceneGraph/ISceneGraphEntity.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/components/SceneGraph/ISceneGraphEntity.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts":
/*!*********************************************************************!*\
  !*** ./src/foundation/components/SceneGraph/SceneGraphComponent.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SceneGraphComponent": () => (/* binding */ SceneGraphComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/AABB */ "./src/foundation/math/AABB.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _gizmos_AABBGizmo__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../gizmos/AABBGizmo */ "./src/foundation/gizmos/AABBGizmo.ts");
/* harmony import */ var _gizmos_LocatorGizmo__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../gizmos/LocatorGizmo */ "./src/foundation/gizmos/LocatorGizmo.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _gizmos_TranslationGizmo__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../gizmos/TranslationGizmo */ "./src/foundation/gizmos/TranslationGizmo.ts");
/* harmony import */ var _gizmos_ScaleGizmo__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../gizmos/ScaleGizmo */ "./src/foundation/gizmos/ScaleGizmo.ts");


















class SceneGraphComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this.__children = [];
        this.__gizmoChildren = [];
        this._worldMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.dummy();
        this._normalMatrix = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix33.dummy();
        this.__isWorldMatrixUpToDate = false;
        this.__isNormalMatrixUpToDate = false;
        this.__tmpMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.identity();
        this.__worldAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_11__.AABB();
        this.__isWorldAABBDirty = true;
        this.isVisible = true;
        this.__transformGizmoSpace = 'world';
        this.toMakeWorldMatrixTheSameAsLocalMatrix = false;
        this.__latestPrimitivePositionAccessorVersion = 0;
        // Skeletal
        this.isRootJoint = false;
        this.jointIndex = -1;
        SceneGraphComponent.__sceneGraphs.push(this);
        this.isAbleToBeParent = false;
        this.beAbleToBeParent(true);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__.BufferUse.GPUInstanceData, 'worldMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_6__.BufferUse.GPUInstanceData, 'normalMatrix', _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix33, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);
        this.submitToAllocation(this.maxNumberOfComponent);
    }
    set isAABBGizmoVisible(flg) {
        if (flg) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.not.defined(this.__aabbGizmo)) {
                this.__aabbGizmo = new _gizmos_AABBGizmo__WEBPACK_IMPORTED_MODULE_13__.AABBGizmo(this.entity);
                this.__aabbGizmo._setup();
            }
            this.__aabbGizmo.isVisible = true;
        }
        else {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__aabbGizmo)) {
                this.__aabbGizmo.isVisible = false;
            }
        }
    }
    get isAABBGizmoVisible() {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__aabbGizmo)) {
            return this.__aabbGizmo.isVisible;
        }
        else {
            return false;
        }
    }
    set isLocatorGizmoVisible(flg) {
        if (flg) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.not.defined(this.__locatorGizmo)) {
                this.__locatorGizmo = new _gizmos_LocatorGizmo__WEBPACK_IMPORTED_MODULE_14__.LocatorGizmo(this.entity);
                this.__locatorGizmo._setup();
            }
            this.__locatorGizmo.isVisible = true;
        }
        else {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__locatorGizmo)) {
                this.__locatorGizmo.isVisible = false;
            }
        }
    }
    get isLocatorGizmoVisible() {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__locatorGizmo)) {
            return this.__locatorGizmo.isVisible;
        }
        else {
            return false;
        }
    }
    set isTranslationGizmoVisible(flg) {
        if (flg) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.not.defined(this.__translationGizmo)) {
                this.__translationGizmo = new _gizmos_TranslationGizmo__WEBPACK_IMPORTED_MODULE_16__.TranslationGizmo(this.entity);
                this.__translationGizmo._setup();
            }
            this.__translationGizmo.isVisible = true;
        }
        else {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__translationGizmo)) {
                this.__translationGizmo.isVisible = false;
            }
        }
    }
    get isTranslationGizmoVisible() {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__translationGizmo)) {
            return this.__translationGizmo.isVisible;
        }
        else {
            return false;
        }
    }
    set isScaleGizmoVisible(flg) {
        if (flg) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.not.defined(this.__scaleGizmo)) {
                this.__scaleGizmo = new _gizmos_ScaleGizmo__WEBPACK_IMPORTED_MODULE_17__.ScaleGizmo(this.entity);
                this.__scaleGizmo._setup();
            }
            this.__scaleGizmo.isVisible = true;
        }
        else {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__scaleGizmo)) {
                this.__scaleGizmo.isVisible = false;
            }
        }
    }
    get isScaleGizmoVisible() {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__scaleGizmo)) {
            return this.__scaleGizmo.isVisible;
        }
        else {
            return false;
        }
    }
    static getTopLevelComponents() {
        return SceneGraphComponent.__sceneGraphs.filter((sg) => {
            return sg.isTopLevel;
        });
    }
    isJoint() {
        if (this.jointIndex >= 0) {
            return true;
        }
        else {
            return false;
        }
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__.WellKnownComponentTIDs.SceneGraphComponentTID;
    }
    beAbleToBeParent(flag) {
        this.isAbleToBeParent = flag;
    }
    setWorldMatrixDirty() {
        var _a;
        this.setWorldMatrixDirtyRecursively();
        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.setWorldAABBDirtyParentRecursively();
    }
    setWorldMatrixDirtyRecursively() {
        this.__isWorldMatrixUpToDate = false;
        this.__isNormalMatrixUpToDate = false;
        this.__isWorldAABBDirty = true;
        this.children.forEach(child => {
            child.setWorldMatrixDirtyRecursively();
        });
    }
    setWorldAABBDirtyParentRecursively() {
        var _a;
        this.__isWorldAABBDirty = true;
        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.setWorldAABBDirtyParentRecursively();
    }
    /**
     * add a SceneGraph component as a child of this
     * @param sg a SceneGraph component
     */
    addChild(sg) {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(sg.__parent)) {
            sg.__parent.removeChild(sg);
        }
        sg.__parent = this;
        this.__children.push(sg);
    }
    /**
     * remove the child SceneGraph component from this
     * @param sg a SceneGraph component
     */
    removeChild(sg) {
        const index = this.__children.indexOf(sg);
        if (index >= 0) {
            this.__children.splice(index, 1);
        }
        sg.__parent = undefined;
    }
    /**
     * add a SceneGraph component as a child of this (But Gizmo only)
     * @param sg a SceneGraph component of Gizmo
     */
    _addGizmoChild(sg) {
        sg.__parent = this;
        this.__gizmoChildren.push(sg);
    }
    get isTopLevel() {
        return this.__parent == null;
    }
    get children() {
        return this.__children;
    }
    get parent() {
        return this.__parent;
    }
    get worldMatrixInner() {
        if (!this.__isWorldMatrixUpToDate) {
            this._worldMatrix.copyComponents(this.__calcWorldMatrixRecursively());
            this.__isWorldMatrixUpToDate = true;
        }
        return this._worldMatrix;
    }
    get worldMatrix() {
        return this.worldMatrixInner.clone();
    }
    get normalMatrixInner() {
        if (!this.__isNormalMatrixUpToDate) {
            _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__.Matrix44.invertTo(this.worldMatrixInner, SceneGraphComponent.invertedMatrix44);
            this._normalMatrix.copyComponents(SceneGraphComponent.invertedMatrix44.transpose());
            this.__isNormalMatrixUpToDate = true;
        }
        return this._normalMatrix;
    }
    get entityWorldMatrix() {
        return this.entityWorldMatrixInner.clone();
    }
    get entityWorldMatrixInner() {
        const skeletalComponent = this.entity.tryToGetSkeletal();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(skeletalComponent) && skeletalComponent.isWorldMatrixUpdated) {
            return skeletalComponent.worldMatrixInner;
        }
        else {
            const sceneGraphComponent = this.entity.getSceneGraph();
            return sceneGraphComponent.worldMatrixInner;
        }
    }
    get normalMatrix() {
        return this.normalMatrixInner.clone();
    }
    isWorldMatrixUpToDateRecursively() {
        if (this.__isWorldMatrixUpToDate) {
            if (this.__parent) {
                const result = this.__parent.isWorldMatrixUpToDateRecursively();
                return result;
            }
            else {
                return true;
            }
        }
        return false;
    }
    __calcWorldMatrixRecursively() {
        if (this.__isWorldMatrixUpToDate) {
            return this._worldMatrix;
        }
        const entity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_3__.EntityRepository.getEntity(this.__entityUid);
        const transform = entity.getTransform();
        if (this.__parent == null || this.toMakeWorldMatrixTheSameAsLocalMatrix) {
            return transform.matrixInner;
        }
        const matrixFromAncestorToParent = this.__parent.__calcWorldMatrixRecursively();
        return _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.multiplyTo(matrixFromAncestorToParent, transform.matrixInner, this.__tmpMatrix);
    }
    /**
     * Collects children and itself from specified sceneGraphComponent.
     * @param sceneGraphComponent collects children and itself from the sceneGraphComponent
     * @param isJointMode collects joints only
     */
    static flattenHierarchy(sceneGraphComponent, isJointMode) {
        const results = [];
        if (!isJointMode || sceneGraphComponent.isJoint()) {
            results.push(sceneGraphComponent);
        }
        if (sceneGraphComponent.isAbleToBeParent) {
            const children = sceneGraphComponent.children;
            for (let i = 0; i < children.length; i++) {
                const hitChildren = this.flattenHierarchy(children[i], isJointMode);
                Array.prototype.push.apply(results, hitChildren);
            }
        }
        return results;
    }
    get worldPosition() {
        const zeroVector = SceneGraphComponent.__originVector3;
        this.worldMatrixInner.multiplyVector3To(zeroVector, SceneGraphComponent.returnVector3);
        return SceneGraphComponent.returnVector3;
    }
    getWorldPositionOf(localPosition) {
        return this.worldMatrixInner.multiplyVector3(localPosition);
    }
    getLocalPositionOf(worldPosition) {
        return _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__.Matrix44.invert(this.worldMatrixInner).multiplyVector3(worldPosition);
    }
    calcWorldAABB() {
        this.__worldAABB.initialize();
        const aabb = (function mergeAABBRecursively(elem) {
            const meshComponent = elem.entity.tryToGetMesh();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(meshComponent) && _misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(meshComponent.mesh)) {
                _math_AABB__WEBPACK_IMPORTED_MODULE_11__.AABB.multiplyMatrixTo(elem.entityWorldMatrixInner, meshComponent.mesh.AABB, elem.__worldAABB);
            }
            const children = elem.children;
            for (let i = 0; i < children.length; i++) {
                const aabb = mergeAABBRecursively(children[i]);
                elem.__worldAABB.mergeAABB(aabb);
            }
            return elem.__worldAABB;
        })(this);
        return aabb;
    }
    get __shouldJointWorldAabbBeCalculated() {
        return !SceneGraphComponent.isJointAABBShouldBeCalculated && this.isJoint();
    }
    get worldAABB() {
        if (this.__shouldJointWorldAabbBeCalculated) {
            return this.__worldAABB;
        }
        if (this.__isWorldAABBDirty) {
            this.calcWorldAABB();
            this.__isWorldAABBDirty = false;
        }
        return this.__worldAABB;
    }
    setVisibilityRecursively(flag) {
        this.isVisible = flag;
        for (const child of this.__children) {
            child.setVisibilityRecursively(flag);
        }
    }
    /**
     * castRay Methods
     *
     * @param srcPointInWorld a source position in world space
     * @param directionInWorld a direction vector in world space
     * @param dotThreshold threshold of the intersected triangle and the ray
     * @param ignoreMeshComponents mesh components to ignore
     * @returns information of intersection in world space
     */
    castRay(srcPointInWorld, directionInWorld, dotThreshold = 0, ignoreMeshComponents = []) {
        const collectedSgComponents = SceneGraphComponent.flattenHierarchy(this, false);
        const meshComponents = [];
        for (const sg of collectedSgComponents) {
            const mesh = sg.entity.tryToGetMesh();
            if (mesh) {
                meshComponents.push(mesh);
            }
        }
        let rayDistance = Number.MAX_VALUE;
        let intersectedPosition = undefined;
        let selectedMeshComponent = undefined;
        let u = 0;
        let v = 0;
        for (const meshComponent of meshComponents) {
            if (!meshComponent.entity.getSceneGraph().isVisible) {
                continue;
            }
            if (!meshComponent.isPickable) {
                continue;
            }
            if (ignoreMeshComponents.indexOf(meshComponent) !== -1) {
                continue;
            }
            const result = meshComponent.castRay(srcPointInWorld, directionInWorld, dotThreshold);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.defined(result.data) && result.data.t < rayDistance) {
                rayDistance = result.data.t;
                intersectedPosition = result.data.position;
                selectedMeshComponent = meshComponent;
                u = result.data.u;
                v = result.data.v;
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(selectedMeshComponent) && _misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(intersectedPosition)) {
            return {
                result: true,
                data: {
                    t: rayDistance,
                    u,
                    v,
                    position: intersectedPosition,
                    selectedMeshComponent,
                },
            };
        }
        else {
            return {
                result: false,
            };
        }
    }
    /**
     * castRayFromScreen Methods
     *
     * @param x x position of screen
     * @param y y position of screen
     * @param camera a camera component
     * @param viewport a viewport vector4
     * @param dotThreshold threshold of the intersected triangle and the ray
     * @param ignoreMeshComponents mesh components to ignore
     * @returns information of intersection in world space
     */
    castRayFromScreen(x, y, camera, viewport, dotThreshold = 0, ignoreMeshComponents = []) {
        const collectedSgComponents = SceneGraphComponent.flattenHierarchy(this, false);
        const meshComponents = [];
        for (const sg of collectedSgComponents) {
            const mesh = sg.entity.tryToGetMesh();
            if (mesh) {
                meshComponents.push(mesh);
            }
        }
        let rayDistance = Number.MAX_VALUE;
        let intersectedPosition = undefined;
        let selectedMeshComponent = undefined;
        let u = 0;
        let v = 0;
        for (const meshComponent of meshComponents) {
            if (!meshComponent.entity.getSceneGraph().isVisible) {
                continue;
            }
            if (!meshComponent.isPickable) {
                continue;
            }
            if (ignoreMeshComponents.indexOf(meshComponent) !== -1) {
                continue;
            }
            const result = meshComponent.castRayFromScreenInWorld(x, y, camera, viewport, dotThreshold);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.defined(result.data) && result.data.t < rayDistance) {
                rayDistance = result.data.t;
                intersectedPosition = result.data.position;
                selectedMeshComponent = meshComponent;
                u = result.data.u;
                v = result.data.v;
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(selectedMeshComponent) && _misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(intersectedPosition)) {
            return {
                result: true,
                data: {
                    t: rayDistance,
                    u,
                    v,
                    position: intersectedPosition,
                    selectedMeshComponent,
                },
            };
        }
        else {
            return {
                result: false,
            };
        }
    }
    $create() {
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_7__.ProcessStage.Logic);
    }
    $logic() {
        this._worldMatrix.copyComponents(this.__calcWorldMatrixRecursively());
        this.__updateGizmos();
        const meshComponent = this.entity.tryToGetMesh();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(meshComponent)) {
            const mesh = meshComponent.mesh;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(mesh)) {
                const primitiveNum = mesh.getPrimitiveNumber();
                for (let i = 0; i < primitiveNum; i++) {
                    const primitive = mesh.getPrimitiveAt(i);
                    if (primitive.positionAccessorVersion !==
                        this.__latestPrimitivePositionAccessorVersion) {
                        this.setWorldAABBDirtyParentRecursively();
                        this.__latestPrimitivePositionAccessorVersion =
                            primitive.positionAccessorVersion;
                        break;
                    }
                }
            }
        }
    }
    __updateGizmos() {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__aabbGizmo) &&
            this.__aabbGizmo.isSetup &&
            this.__aabbGizmo.isVisible) {
            this.__aabbGizmo._update();
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__locatorGizmo) &&
            this.__locatorGizmo.isSetup &&
            this.__locatorGizmo.isVisible) {
            this.__locatorGizmo._update();
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__translationGizmo) &&
            this.__translationGizmo.isSetup &&
            this.__translationGizmo.isVisible) {
            this.__translationGizmo._update();
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_15__.Is.exist(this.__scaleGizmo) &&
            this.__scaleGizmo.isSetup &&
            this.__scaleGizmo.isVisible) {
            this.__scaleGizmo._update();
        }
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_3__.EntityRepository.getEntity(this.__entityUid);
    }
    setTransformGizmoSpace(space) {
        var _a, _b;
        this.__transformGizmoSpace = space;
        (_a = this.__translationGizmo) === null || _a === void 0 ? void 0 : _a.setSpace(space);
        (_b = this.__scaleGizmo) === null || _b === void 0 ? void 0 : _b.setSpace(space);
    }
    destroy() {
        var _a;
        // this.__aabbGizmo?.destroy();
        // this.__locatorGizmo?.destroy();
        // this.__translationGizmo?.destroy();
        // this.__scaleGizmo?.destroy();
        // this.__entityRepository.removeEntity(this.__entityUid);
        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.removeChild(this);
        this.children.forEach(child => { var _a; return (_a = child.parent) === null || _a === void 0 ? void 0 : _a.removeChild(child); });
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class SceneGraphEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getSceneGraph() {
                if (this.__sceneGraphComponent === undefined) {
                    this.__sceneGraphComponent = this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__.WellKnownComponentTIDs.SceneGraphComponentTID);
                }
                return this.__sceneGraphComponent;
            }
            get worldMatrx() {
                const sceneGraph = this.getSceneGraph();
                return sceneGraph.worldMatrix;
            }
            get worldMatrxInner() {
                const sceneGraph = this.getSceneGraph();
                return sceneGraph.worldMatrixInner;
            }
            addChild(sg) {
                const sceneGraph = this.getSceneGraph();
                sceneGraph.addChild(sg);
            }
            get children() {
                const sceneGraph = this.getSceneGraph();
                return sceneGraph.children;
            }
            removeChild(sg) {
                const sceneGraph = this.getSceneGraph();
                sceneGraph.removeChild(sg);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_3__.applyMixins)(base, SceneGraphEntity);
        return base;
    }
}
SceneGraphComponent.__sceneGraphs = [];
SceneGraphComponent.__originVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_10__.Vector3.zero();
SceneGraphComponent.returnVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_12__.MutableVector3.zero();
SceneGraphComponent.isJointAABBShouldBeCalculated = false;
SceneGraphComponent.invertedMatrix44 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.fromCopyArray16ColumnMajor([
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
]);
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(SceneGraphComponent);


/***/ }),

/***/ "./src/foundation/components/SceneGraph/index.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/components/SceneGraph/index.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SceneGraphComponent": () => (/* reexport safe */ _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__.SceneGraphComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./ISceneGraphEntity */ "./src/foundation/components/SceneGraph/ISceneGraphEntity.ts");
/* harmony import */ var _SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");




/***/ }),

/***/ "./src/foundation/components/Skeletal/ISkeletalEntity.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/components/Skeletal/ISkeletalEntity.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Skeletal/SkeletalComponent.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/components/Skeletal/SkeletalComponent.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SkeletalComponent": () => (/* binding */ SkeletalComponent)
/* harmony export */ });
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../definitions/BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");














class SkeletalComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_1__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
        this._jointIndices = [];
        this.__joints = [];
        this.isSkinning = true;
        this.isOptimizingMode = true;
        this.__qArray = new Float32Array(0);
        this.__tsArray = new Float32Array(0);
        this.__tqArray = new Float32Array(0);
        this.__sqArray = new Float32Array(0);
        this.__qtsArray = new Float32Array(0);
        this.__qtsInfo = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_8__.MutableVector4.dummy();
        this.__matArray = new Float32Array(0);
        this.__worldMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.identity();
        this.__isWorldMatrixVanilla = true;
        if (SkeletalComponent.__tookGlobalDataNum < _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxSkeletonNumber) {
            if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Mat44x1) {
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneMatrix);
            }
            else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2) {
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslatePackedQuat);
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneScalePackedQuat);
            }
            else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2Old) {
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneQuaternion);
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslateScale);
            }
            else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslateScale);
                SkeletalComponent.__globalDataRepository.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneCompressedChunk);
            }
            SkeletalComponent.__tookGlobalDataNum++;
        }
        else {
            console.warn('The actual number of Skeleton generated exceeds Config.maxSkeletonNumber.');
        }
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_4__.ProcessStage.Logic);
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.SkeletalComponentTID;
    }
    setInverseBindMatricesAccessor(inverseBindMatricesAccessor) {
        this.__inverseBindMatricesAccessor = inverseBindMatricesAccessor;
    }
    setJoints(joints) {
        this.__joints = joints;
        let index = 0;
        if (this.componentSID < _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxSkeletonNumber) {
            index = this.componentSID;
        }
        if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Mat44x1) {
            this.__matArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneMatrix, index)._v;
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2) {
            this.__tqArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslatePackedQuat, index)._v;
            this.__sqArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneScalePackedQuat, index)._v;
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2Old) {
            this.__qArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneQuaternion, index)._v;
            this.__tsArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslateScale, index)._v;
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
            this.__tsArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneTranslateScale, index)._v;
            this.__qtsArray = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneCompressedChunk, index)._v;
            this.__qtsInfo = SkeletalComponent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_10__.ShaderSemantics.BoneCompressedInfo, 0);
        }
    }
    getJoints() {
        return this.__joints.concat();
    }
    get rootJointWorldMatrixInner() {
        var _a;
        return (_a = this.topOfJointsHierarchy) === null || _a === void 0 ? void 0 : _a.worldMatrixInner;
    }
    get jointMatrices() {
        return this.__jointMatrices;
    }
    get jointQuaternionArray() {
        return this.__qArray;
    }
    get jointTranslateScaleArray() {
        return this.__tsArray;
    }
    get jointTranslatePackedQuat() {
        return this.__tqArray;
    }
    get jointScalePackedQuat() {
        return this.__sqArray;
    }
    get jointMatricesArray() {
        return this.__matArray;
    }
    get jointCompressedChunk() {
        return this.__qtsArray;
    }
    get jointCompressedInfo() {
        return this.__qtsInfo;
    }
    get worldMatrix() {
        return this.__worldMatrix.clone();
    }
    get worldMatrixInner() {
        return this.__worldMatrix;
    }
    get isWorldMatrixUpdated() {
        return !this.__isWorldMatrixVanilla;
    }
    $logic() {
        if (!this.isSkinning) {
            return;
        }
        for (let i = 0; i < this.__joints.length; i++) {
            const joint = this.__joints[i];
            let m;
            if (joint.isVisible) {
                const globalJointTransform = joint.worldMatrixInner;
                _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.multiplyTypedArrayTo(globalJointTransform, this.__inverseBindMatricesAccessor.getTypedArray(), SkeletalComponent.__tmp_mat4, i);
                if (this._bindShapeMatrix) {
                    SkeletalComponent.__tmp_mat4.multiply(this._bindShapeMatrix); // only for glTF1
                }
                m = SkeletalComponent.__tmp_mat4;
            }
            else {
                m = SkeletalComponent.__identityMat;
            }
            if (i === 0) {
                this.__worldMatrix.copyComponents(m);
            }
            this.__isWorldMatrixVanilla = false;
            if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Mat44x1 ||
                _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
                this.__copyToMatArray(m, i);
            }
            if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType !== _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Mat44x1) {
                const scaleVec = SkeletalComponent.__tmpVec3_0.setComponents(Math.hypot(m.m00, m.m01, m.m02), Math.hypot(m.m10, m.m11, m.m12), Math.hypot(m.m20, m.m21, m.m22));
                m.m00 /= scaleVec.x;
                m.m01 /= scaleVec.x;
                m.m02 /= scaleVec.x;
                m.m10 /= scaleVec.y;
                m.m11 /= scaleVec.y;
                m.m12 /= scaleVec.y;
                m.m20 /= scaleVec.z;
                m.m21 /= scaleVec.z;
                m.m22 /= scaleVec.z;
                const q = SkeletalComponent.__tmp_q.fromMatrix(m);
                if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2Old ||
                    _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
                    let maxScale = 1;
                    if (Math.abs(scaleVec.x) > Math.abs(scaleVec.y)) {
                        if (Math.abs(scaleVec.x) > Math.abs(scaleVec.z)) {
                            maxScale = scaleVec.x;
                        }
                        else {
                            maxScale = scaleVec.z;
                        }
                    }
                    else {
                        if (Math.abs(scaleVec.y) > Math.abs(scaleVec.z)) {
                            maxScale = scaleVec.y;
                        }
                        else {
                            maxScale = scaleVec.z;
                        }
                    }
                    this.__tsArray[i * 4 + 3] = maxScale;
                }
                if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2) {
                    const vec2QPacked = _math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.packNormalizedVec4ToVec2(q.x, q.y, q.z, q.w, Math.pow(2, 12));
                    this.__tqArray[i * 4 + 0] = m.m03;
                    this.__tqArray[i * 4 + 1] = m.m13;
                    this.__tqArray[i * 4 + 2] = m.m23;
                    this.__sqArray[i * 4 + 0] = scaleVec.x;
                    this.__sqArray[i * 4 + 1] = scaleVec.y;
                    this.__sqArray[i * 4 + 2] = scaleVec.z;
                    this.__tqArray[i * 4 + 3] = vec2QPacked[0];
                    this.__sqArray[i * 4 + 3] = vec2QPacked[1];
                }
                else if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x2Old) {
                    this.__tsArray[i * 4 + 0] = m.m03; // m.getTranslate().x
                    this.__tsArray[i * 4 + 1] = m.m13; // m.getTranslate().y
                    this.__tsArray[i * 4 + 2] = m.m23; // m.getTranslate().z
                    this.__qArray[i * 4 + 0] = q.x;
                    this.__qArray[i * 4 + 1] = q.y;
                    this.__qArray[i * 4 + 2] = q.z;
                    this.__qArray[i * 4 + 3] = q.w;
                }
                if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
                    // pack quaternion
                    this.__tsArray[i * 4 + 0] = m.m03; // m.getTranslate().x
                    this.__tsArray[i * 4 + 1] = m.m13; // m.getTranslate().y
                    this.__tsArray[i * 4 + 2] = m.m23; // m.getTranslate().z
                    const vec2QPacked = _math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.packNormalizedVec4ToVec2(q.x, q.y, q.z, q.w, Math.pow(2, 12));
                    this.__qtsArray[i * 4 + 0] = vec2QPacked[0];
                    this.__qtsArray[i * 4 + 1] = vec2QPacked[1];
                    // q.normalize();
                }
            }
        }
        if (_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_13__.BoneDataType.Vec4x1) {
            // const maxScale = Math.max(...scales);
            let maxAbsX = 1;
            let maxAbsY = 1;
            let maxAbsZ = 1;
            for (let i = 0; i < this.__joints.length; i++) {
                const absX = Math.abs(this.__tsArray[i * 4 + 0]);
                if (absX > maxAbsX) {
                    maxAbsX = absX;
                }
                const absY = Math.abs(this.__tsArray[i * 4 + 1]);
                if (absY > maxAbsY) {
                    maxAbsY = absY;
                }
                const absZ = Math.abs(this.__tsArray[i * 4 + 2]);
                if (absZ > maxAbsZ) {
                    maxAbsZ = absZ;
                }
            }
            this.__qtsInfo.x = maxAbsX;
            this.__qtsInfo.y = maxAbsY;
            this.__qtsInfo.z = maxAbsZ;
            this.__qtsInfo.w = 1;
            for (let i = 0; i < this.__joints.length; i++) {
                // pack normalized XYZ and Uniform Scale
                const x = this.__tsArray[i * 4 + 0];
                const y = this.__tsArray[i * 4 + 1];
                const z = this.__tsArray[i * 4 + 2];
                const scale = this.__tsArray[i * 4 + 3];
                const normalizedX = x / maxAbsX;
                const normalizedY = y / maxAbsY;
                const normalizedZ = z / maxAbsZ;
                const normalizedW = scale;
                const vec2TPacked = _math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.packNormalizedVec4ToVec2(normalizedX, normalizedY, normalizedZ, normalizedW, Math.pow(2, 12));
                this.__qtsArray[i * 4 + 2] = vec2TPacked[0];
                this.__qtsArray[i * 4 + 3] = vec2TPacked[1];
            }
        }
    }
    __copyToMatArray(m, i) {
        this.__matArray[i * 16 + 0] = m._v[0];
        this.__matArray[i * 16 + 1] = m._v[1];
        this.__matArray[i * 16 + 2] = m._v[2];
        this.__matArray[i * 16 + 3] = m._v[3];
        this.__matArray[i * 16 + 4] = m._v[4];
        this.__matArray[i * 16 + 5] = m._v[5];
        this.__matArray[i * 16 + 6] = m._v[6];
        this.__matArray[i * 16 + 7] = m._v[7];
        this.__matArray[i * 16 + 8] = m._v[8];
        this.__matArray[i * 16 + 9] = m._v[9];
        this.__matArray[i * 16 + 10] = m._v[10];
        this.__matArray[i * 16 + 11] = m._v[11];
        this.__matArray[i * 16 + 12] = m._v[12];
        this.__matArray[i * 16 + 13] = m._v[13];
        this.__matArray[i * 16 + 14] = m._v[14];
        this.__matArray[i * 16 + 15] = m._v[15];
    }
    getInverseBindMatricesAccessor() {
        return this.__inverseBindMatricesAccessor;
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class SkeletalEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getSkeletal() {
                return this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_3__.WellKnownComponentTIDs.SkeletalComponentTID);
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_2__.applyMixins)(base, SkeletalEntity);
        return base;
    }
}
SkeletalComponent.__tmpVec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_5__.MutableVector3.zero();
SkeletalComponent.__tmpVec3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_5__.MutableVector3.zero();
SkeletalComponent.__tmp_mat4 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.identity();
SkeletalComponent.__tmp_q = _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_6__.MutableQuaternion.fromCopy4(0, 0, 0, 1);
SkeletalComponent.__identityMat = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.identity();
SkeletalComponent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_11__.GlobalDataRepository.getInstance();
SkeletalComponent.__tookGlobalDataNum = 0;
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository.registerComponentClass(SkeletalComponent);


/***/ }),

/***/ "./src/foundation/components/Skeletal/index.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/components/Skeletal/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SkeletalComponent": () => (/* reexport safe */ _SkeletalComponent__WEBPACK_IMPORTED_MODULE_1__.SkeletalComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./ISkeletalEntity */ "./src/foundation/components/Skeletal/ISkeletalEntity.ts");
/* harmony import */ var _SkeletalComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SkeletalComponent */ "./src/foundation/components/Skeletal/SkeletalComponent.ts");




/***/ }),

/***/ "./src/foundation/components/Transform/ITransformEntity.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/components/Transform/ITransformEntity.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/components/Transform/TransformComponent.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/components/Transform/TransformComponent.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TransformComponent": () => (/* binding */ TransformComponent)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");














// import AnimationComponent from './AnimationComponent';
class TransformComponent extends _core_Component__WEBPACK_IMPORTED_MODULE_3__.Component {
    constructor(entityUid, componentSid, entityComponent) {
        super(entityUid, componentSid, entityComponent);
        this._translate = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.dummy();
        // private _rotate: MutableVector3 = MutableVector3.dummy();
        this._scale = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.dummy();
        this._quaternion = _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_10__.MutableQuaternion.dummy();
        this._matrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.dummy();
        this._invMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.dummy();
        this._normalMatrix = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_12__.MutableMatrix33.dummy();
        this._updateCount = 0;
        this.__updateCountAtLastLogic = 0;
        // dependencies
        this._dependentAnimationComponentId = 0;
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'translate', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [0, 0, 0]);
        // this.registerMember(
        //   BufferUse.CPUGeneric,
        //   'rotate',
        //   MutableVector3,
        //   ComponentType.Float,
        //   [0, 0, 0]
        // );
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'scale', _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [1, 1, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'quaternion', _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_10__.MutableQuaternion, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [0, 0, 0, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'matrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'invMatrix', _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        this.registerMember(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.CPUGeneric, 'normalMatrix', _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_12__.MutableMatrix33, _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float, [1, 0, 0, 0, 1, 0, 0, 0, 1]);
        this.submitToAllocation(this.maxNumberOfComponent);
        this._is_translate_updated = true;
        this._is_scale_updated = true;
        this._is_quaternion_updated = true;
        this._is_trs_matrix_updated = true;
        this._is_inverse_trs_matrix_updated = true;
        this._is_normal_trs_matrix_updated = true;
        this.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_11__.ProcessStage.Logic);
    }
    static get renderedPropertyCount() {
        return null;
    }
    static get componentTID() {
        return _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__.WellKnownComponentTIDs.TransformComponentTID;
    }
    _needUpdate() {
        this._updateCount++;
    }
    set translate(vec) {
        this._translate.copyComponents(vec);
        this._is_translate_updated = true;
        this._is_trs_matrix_updated = false;
        this._is_inverse_trs_matrix_updated = false;
        this._is_normal_trs_matrix_updated = false;
        this.__updateTransform();
    }
    get translate() {
        return this.translateInner.clone();
    }
    get translateInner() {
        if (this._is_translate_updated) {
            return this._translate;
        }
        else if (this._is_trs_matrix_updated) {
            this._matrix.getTranslateTo(this._translate);
            this._is_translate_updated = true;
        }
        return this._translate;
    }
    set rotate(vec) {
        const rotationMat = TransformComponent.__tmpMatrix44_0.rotate(vec);
        this.quaternion = _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__.Quaternion.fromMatrix(rotationMat);
    }
    get rotate() {
        return this.rotateInner.clone();
    }
    get rotateInner() {
        if (this._is_trs_matrix_updated) {
            return this._matrix.toEulerAngles();
        }
        else {
            // this._is_quaternion_updated
            return this._quaternion.toEulerAngles();
        }
    }
    set scale(vec) {
        this._scale.copyComponents(vec);
        this._is_scale_updated = true;
        this._is_trs_matrix_updated = false;
        this._is_inverse_trs_matrix_updated = false;
        this._is_normal_trs_matrix_updated = false;
        this.__updateTransform();
    }
    get scale() {
        return this.scaleInner.clone();
    }
    get scaleInner() {
        if (this._is_scale_updated) {
            return this._scale;
        }
        else if (this._is_trs_matrix_updated) {
            this._matrix.getScaleTo(this._scale);
            this._is_scale_updated = true;
        }
        return this._scale;
    }
    set quaternion(quat) {
        this._quaternion.copyComponents(quat);
        this._is_quaternion_updated = true;
        this._is_trs_matrix_updated = false;
        this._is_inverse_trs_matrix_updated = false;
        this._is_normal_trs_matrix_updated = false;
        this.__updateTransform();
    }
    get quaternion() {
        return this.quaternionInner.clone();
    }
    get quaternionInner() {
        if (this._is_quaternion_updated) {
            return this._quaternion;
        }
        else if (!this._is_quaternion_updated) {
            if (this._is_trs_matrix_updated) {
                this._is_quaternion_updated = true;
                this._quaternion.fromMatrix(this._matrix);
                return this._quaternion;
            }
        }
        return this._quaternion;
    }
    set matrix(mat) {
        this._matrix.copyComponents(mat);
        this._is_trs_matrix_updated = true;
        this._is_translate_updated = false;
        this._is_quaternion_updated = false;
        this._is_scale_updated = false;
        this._is_inverse_trs_matrix_updated = false;
        this._is_normal_trs_matrix_updated = false;
        this.__updateTransform();
    }
    get matrix() {
        return this.matrixInner.clone();
    }
    get matrixInner() {
        if (this._is_trs_matrix_updated) {
            return this._matrix;
        }
        // Clear and set Scale
        const scale = this.scaleInner;
        const n00 = scale._v[0];
        // const n01 = 0;
        // const n02 = 0;
        // const n03 = 0;
        // const n10 = 0;
        const n11 = scale._v[1];
        // const n12 = 0;
        // const n13 = 0;
        // const n20 = 0;
        // const n21 = 0;
        const n22 = scale._v[2];
        // const n23 = 0;
        // const n30 = 0;
        // const n31 = 0;
        // const n32 = 0;
        // const n33 = 1;
        const q = this.quaternionInner;
        const sx = q._v[0] * q._v[0];
        const sy = q._v[1] * q._v[1];
        const sz = q._v[2] * q._v[2];
        const cx = q._v[1] * q._v[2];
        const cy = q._v[0] * q._v[2];
        const cz = q._v[0] * q._v[1];
        const wx = q._v[3] * q._v[0];
        const wy = q._v[3] * q._v[1];
        const wz = q._v[3] * q._v[2];
        const m00 = 1.0 - 2.0 * (sy + sz);
        const m01 = 2.0 * (cz - wz);
        const m02 = 2.0 * (cy + wy);
        // const m03 = 0.0;
        const m10 = 2.0 * (cz + wz);
        const m11 = 1.0 - 2.0 * (sx + sz);
        const m12 = 2.0 * (cx - wx);
        // const m13 = 0.0;
        const m20 = 2.0 * (cy - wy);
        const m21 = 2.0 * (cx + wx);
        const m22 = 1.0 - 2.0 * (sx + sy);
        // const m23 = 0.0;
        // const m30 = 0.0;
        // const m31 = 0.0;
        // const m32 = 0.0;
        // const m33 = 1.0;
        const translate = this.translateInner;
        // TranslateMatrix * RotateMatrix * ScaleMatrix
        this._matrix.m00 = m00 * n00;
        this._matrix.m01 = m01 * n11;
        this._matrix.m02 = m02 * n22;
        this._matrix.m03 = translate.x;
        this._matrix.m10 = m10 * n00;
        this._matrix.m11 = m11 * n11;
        this._matrix.m12 = m12 * n22;
        this._matrix.m13 = translate.y;
        this._matrix.m20 = m20 * n00;
        this._matrix.m21 = m21 * n11;
        this._matrix.m22 = m22 * n22;
        this._matrix.m23 = translate.z;
        this._matrix.m30 = 0;
        this._matrix.m31 = 0;
        this._matrix.m32 = 0;
        this._matrix.m33 = 1;
        // const rotateMatrix = new Matrix44(this.quaternion);
        // const matrix = MutableMatrix44.multiply(rotateMatrix, Matrix44.scale(this.scale));
        // matrix.m03 = this.translate.x;
        // matrix.m13 = this.translate.y;
        // matrix.m23 = this.translate.z;
        //this._matrix.copyComponents(matrix);
        this._is_trs_matrix_updated = true;
        return this._matrix;
    }
    get inverseMatrix() {
        return this.inverseMatrixInner.clone();
    }
    get inverseMatrixInner() {
        if (!this._is_inverse_trs_matrix_updated) {
            _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.invertTo(this.matrixInner, this._invMatrix);
            this._is_inverse_trs_matrix_updated = true;
        }
        return this._invMatrix;
    }
    get normalMatrix() {
        return this.normalMatrixInner.clone();
    }
    get normalMatrixInner() {
        if (!this._is_normal_trs_matrix_updated) {
            const invertedMatrix44 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.invertTo(this.matrixInner, TransformComponent.__tmpMatrix44_0);
            const newNormalMatrix = invertedMatrix44.transpose();
            this._normalMatrix.copyComponents(newNormalMatrix);
            this._is_normal_trs_matrix_updated = true;
        }
        return this._normalMatrix;
    }
    /**
     * Set multiple transform information at once. By using this method,
     * we reduce the cost of automatically updating other transform components inside this class.
     * This method may be useful for animation processing and so on.
     *
     * The transform components of these arguments must not be mutually discrepant.
     * for example. The transform components of matrix argument (translate, rotate/quaternion, scale)
     * must be equal to translate, rotate, scale, quaternion arguments.
     * And both rotate and quaternion arguments must be same rotation.
     * If there is an argument passed with null or undefined, it is interpreted as unchanged.
     *
     * @param {*} translate
     * @param {*} rotate
     * @param {*} scale
     * @param {*} quaternion
     * @param {*} matrix
     */
    setTransform(translate, rotate, scale, quaternion, matrix) {
        this._is_trs_matrix_updated = false;
        this._is_inverse_trs_matrix_updated = false;
        this._is_normal_trs_matrix_updated = false;
        // Matrix
        if (matrix != null) {
            this._matrix.copyComponents(matrix);
            this._is_trs_matrix_updated = true;
            this._is_translate_updated = false;
            this._is_quaternion_updated = false;
            this._is_scale_updated = false;
        }
        // Translate
        if (translate != null) {
            this._translate.copyComponents(translate);
            this._is_translate_updated = true;
        }
        // Rotation
        if (rotate != null && quaternion != null) {
            this._quaternion = _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_10__.MutableQuaternion.fromCopyQuaternion(quaternion);
            this._is_quaternion_updated = true;
        }
        else if (rotate != null) {
            this._is_quaternion_updated = false;
        }
        else if (quaternion != null) {
            this._quaternion.copyComponents(quaternion);
            this._is_quaternion_updated = true;
        }
        // Scale
        if (scale != null) {
            this._scale.copyComponents(scale);
            this._is_scale_updated = true;
        }
        this.__updateTransform();
    }
    __updateTransform() {
        this.__updateRotation();
        this.__updateTranslate();
        this.__updateScale();
        //this.__updateMatrix();
        this._needUpdate();
    }
    __updateRotation() {
        if (!this._is_quaternion_updated && this._is_trs_matrix_updated) {
            this._quaternion.fromMatrix(this._matrix);
            this._is_quaternion_updated = true;
        }
    }
    __updateTranslate() {
        if (!this._is_translate_updated && this._is_trs_matrix_updated) {
            this._matrix.getTranslateTo(this._translate);
            this._is_translate_updated = true;
        }
    }
    __updateScale() {
        if (!this._is_scale_updated && this._is_trs_matrix_updated) {
            this._matrix.getScaleTo(this._scale);
            this._is_scale_updated = true;
        }
    }
    __updateMatrix() {
        if (!this._is_trs_matrix_updated &&
            this._is_translate_updated &&
            this._is_quaternion_updated &&
            this._is_scale_updated) {
            const rotationMatrix = this._matrix.fromQuaternion(this._quaternion);
            const scaleMat = TransformComponent.__tmpMatrix44_0.scale(this._scale);
            const rsMatrix = rotationMatrix.multiply(scaleMat); // rsMatrix references to this._matrix
            rsMatrix.putTranslate(this._translate);
            this._is_trs_matrix_updated = true;
        }
    }
    setPropertiesFromJson(arg) {
        let json = arg;
        if (typeof arg === 'string') {
            json = JSON.parse(arg);
        }
        for (const key in json) {
            if (json.hasOwnProperty(key) && key in this) {
                if (key === 'quaternion') {
                    this[key] = _math_Quaternion__WEBPACK_IMPORTED_MODULE_1__.Quaternion.fromCopyArray4(json[key]);
                }
                else if (key === 'matrix') {
                    this[key] = _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__.Matrix44.fromCopyArray16RowMajor(json[key]);
                }
                else {
                    this[key] = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray(json[key]);
                }
            }
        }
    }
    setRotationFromNewUpAndFront(UpVec, FrontVec) {
        const yDir = UpVec;
        const xDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.crossTo(yDir, FrontVec, TransformComponent.__tmpVector3_0);
        const zDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.crossTo(xDir, yDir, TransformComponent.__tmpVector3_1);
        const rotateMatrix = TransformComponent.__tmpMatrix44_0.setComponents(xDir.x, yDir.x, zDir.x, 0, xDir.y, yDir.y, zDir.y, 0, xDir.z, yDir.z, zDir.z, 0, 0, 0, 0, 1);
        this.rotateMatrix44 = rotateMatrix;
    }
    headToDirection(fromVec, toVec) {
        const fromDir = TransformComponent.__tmpVector3_0
            .copyComponents(fromVec)
            .normalize();
        const toDir = TransformComponent.__tmpVector3_1
            .copyComponents(toVec)
            .normalize();
        const rotationDir = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.crossTo(fromDir, toDir, TransformComponent.__tmpVector3_2);
        const cosTheta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.dot(fromDir, toDir);
        const theta = Math.acos(cosTheta);
        this.quaternion = TransformComponent.__tmpQuaternion_0.axisAngle(rotationDir, theta);
    }
    set rotateMatrix44(rotateMatrix) {
        this.quaternion =
            TransformComponent.__tmpQuaternion_0.fromMatrix(rotateMatrix);
    }
    get rotateMatrix44() {
        return _math_Matrix44__WEBPACK_IMPORTED_MODULE_2__.Matrix44.fromCopyQuaternion(this.quaternion);
    }
    $logic() {
        const sceneGraphComponent = this.entity.tryToGetSceneGraph();
        if (this.__updateCountAtLastLogic !== this._updateCount) {
            sceneGraphComponent.setWorldMatrixDirty();
            this.__updateCountAtLastLogic = this._updateCount;
        }
        else {
            const skeletalComponent = this.entity.tryToGetSkeletal();
            if (skeletalComponent != null) {
                sceneGraphComponent.setWorldMatrixDirty();
            }
        }
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _core_EntityRepository__WEBPACK_IMPORTED_MODULE_6__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class TransformEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getTransform() {
                if (this.__transformComponent === undefined) {
                    this.__transformComponent = this.getComponentByComponentTID(_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__.WellKnownComponentTIDs.TransformComponentTID);
                }
                return this.__transformComponent;
            }
            set translate(vec) {
                const transform = this.getTransform();
                transform.translate = vec;
            }
            get translate() {
                return this.translateInner.clone();
            }
            get translateInner() {
                const transform = this.getTransform();
                return transform.translateInner;
            }
            set scale(vec) {
                const transform = this.getTransform();
                transform.scale = vec;
            }
            get scale() {
                return this.scaleInner.clone();
            }
            get scaleInner() {
                const transform = this.getTransform();
                return transform.scaleInner;
            }
            set rotate(vec) {
                const transform = this.getTransform();
                transform.rotate = vec;
            }
            get rotate() {
                return this.rotateInner.clone();
            }
            get rotateInner() {
                const transform = this.getTransform();
                return transform.rotateInner;
            }
            set quaternion(quat) {
                const transform = this.getTransform();
                transform.quaternion = quat;
            }
            get quaternion() {
                return this.quaternionInner.clone();
            }
            get quaternionInner() {
                const transform = this.getTransform();
                return transform.quaternionInner;
            }
            set matrix(mat) {
                const transform = this.getTransform();
                transform.matrix = mat;
            }
            get matrix() {
                return this.matrixInner.clone();
            }
            get matrixInner() {
                const transform = this.getTransform();
                return transform.matrixInner;
            }
        }
        (0, _core_EntityRepository__WEBPACK_IMPORTED_MODULE_6__.applyMixins)(base, TransformEntity);
        return base;
    }
}
TransformComponent.__tmpMatrix44_0 = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.zero();
TransformComponent.__tmpVector3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.zero();
TransformComponent.__tmpVector3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.zero();
TransformComponent.__tmpVector3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_13__.MutableVector3.zero();
TransformComponent.__tmpQuaternion_0 = _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_10__.MutableQuaternion.identity();
_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__.ComponentRepository.registerComponentClass(TransformComponent);


/***/ }),

/***/ "./src/foundation/components/Transform/index.ts":
/*!******************************************************!*\
  !*** ./src/foundation/components/Transform/index.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TransformComponent": () => (/* reexport safe */ _TransformComponent__WEBPACK_IMPORTED_MODULE_1__.TransformComponent)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./ITransformEntity */ "./src/foundation/components/Transform/ITransformEntity.ts");
/* harmony import */ var _TransformComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");




/***/ }),

/***/ "./src/foundation/components/WellKnownComponentTIDs.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/components/WellKnownComponentTIDs.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WellKnownComponentTIDs": () => (/* binding */ WellKnownComponentTIDs)
/* harmony export */ });
// const MaterialSID = 0
const AnimationComponentTID = 1;
const TransformComponentTID = 2;
const SceneGraphComponentTID = 3;
const MeshComponentTID = 4;
const MeshRendererComponentTID = 5;
const CameraControllerComponentTID = 6;
const CameraComponentTID = 7;
const LightComponentTID = 8;
const SkeletalComponentTID = 9;
const BlendShapeComponentTID = 10;
const PhysicsComponentTID = 11;
const SparkGearComponentTID = 12;
const EffekseerComponentTID = 13;
const maxWellKnownTidNumber = 13;
const WellKnownComponentTIDs = Object.freeze({
    AnimationComponentTID,
    TransformComponentTID,
    SceneGraphComponentTID,
    MeshComponentTID,
    MeshRendererComponentTID,
    CameraControllerComponentTID,
    CameraComponentTID,
    LightComponentTID,
    SkeletalComponentTID,
    BlendShapeComponentTID,
    PhysicsComponentTID,
    SparkGearComponentTID,
    EffekseerComponentTID,
    maxWellKnownTidNumber,
});


/***/ }),

/***/ "./src/foundation/components/index.ts":
/*!********************************************!*\
  !*** ./src/foundation/components/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationComponent": () => (/* reexport safe */ _Animation_index__WEBPACK_IMPORTED_MODULE_0__.AnimationComponent),
/* harmony export */   "BlendShapeComponent": () => (/* reexport safe */ _BlendShape_index__WEBPACK_IMPORTED_MODULE_1__.BlendShapeComponent),
/* harmony export */   "CameraComponent": () => (/* reexport safe */ _Camera_index__WEBPACK_IMPORTED_MODULE_2__.CameraComponent),
/* harmony export */   "CameraControllerComponent": () => (/* reexport safe */ _CameraController_index__WEBPACK_IMPORTED_MODULE_3__.CameraControllerComponent),
/* harmony export */   "LightComponent": () => (/* reexport safe */ _Light_index__WEBPACK_IMPORTED_MODULE_4__.LightComponent),
/* harmony export */   "MeshComponent": () => (/* reexport safe */ _Mesh_index__WEBPACK_IMPORTED_MODULE_5__.MeshComponent),
/* harmony export */   "MeshRendererComponent": () => (/* reexport safe */ _MeshRenderer_index__WEBPACK_IMPORTED_MODULE_6__.MeshRendererComponent),
/* harmony export */   "PhysicsComponent": () => (/* reexport safe */ _Physics_index__WEBPACK_IMPORTED_MODULE_7__.PhysicsComponent),
/* harmony export */   "SceneGraphComponent": () => (/* reexport safe */ _SceneGraph_index__WEBPACK_IMPORTED_MODULE_8__.SceneGraphComponent),
/* harmony export */   "SkeletalComponent": () => (/* reexport safe */ _Skeletal_index__WEBPACK_IMPORTED_MODULE_9__.SkeletalComponent),
/* harmony export */   "TransformComponent": () => (/* reexport safe */ _Transform_index__WEBPACK_IMPORTED_MODULE_10__.TransformComponent),
/* harmony export */   "WellKnownComponentTIDs": () => (/* reexport safe */ _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_12__.WellKnownComponentTIDs)
/* harmony export */ });
/* harmony import */ var _Animation_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Animation/index */ "./src/foundation/components/Animation/index.ts");
/* harmony import */ var _BlendShape_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BlendShape/index */ "./src/foundation/components/BlendShape/index.ts");
/* harmony import */ var _Camera_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Camera/index */ "./src/foundation/components/Camera/index.ts");
/* harmony import */ var _CameraController_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CameraController/index */ "./src/foundation/components/CameraController/index.ts");
/* harmony import */ var _Light_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Light/index */ "./src/foundation/components/Light/index.ts");
/* harmony import */ var _Mesh_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Mesh/index */ "./src/foundation/components/Mesh/index.ts");
/* harmony import */ var _MeshRenderer_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MeshRenderer/index */ "./src/foundation/components/MeshRenderer/index.ts");
/* harmony import */ var _Physics_index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Physics/index */ "./src/foundation/components/Physics/index.ts");
/* harmony import */ var _SceneGraph_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SceneGraph/index */ "./src/foundation/components/SceneGraph/index.ts");
/* harmony import */ var _Skeletal_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Skeletal/index */ "./src/foundation/components/Skeletal/index.ts");
/* harmony import */ var _Transform_index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Transform/index */ "./src/foundation/components/Transform/index.ts");
/* harmony import */ __webpack_require__(/*! ./ComponentTypes */ "./src/foundation/components/ComponentTypes.ts");
/* harmony import */ var _WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");















/***/ }),

/***/ "./src/foundation/core/Component.ts":
/*!******************************************!*\
  !*** ./src/foundation/core/Component.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* binding */ Component)
/* harmony export */ });
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RnObject */ "./src/foundation/core/RnObject.ts");






/**
 * Component is a functional unit that can be added to an Entity instance.
 */
class Component extends _RnObject__WEBPACK_IMPORTED_MODULE_5__.RnObject {
    /**
     * The constructor of the Component class.
     * When creating an Component, use the createComponent method of the ComponentRepository class
     * instead of directly calling this constructor.
     * @param entityUid Unique ID of the corresponding entity
     * @param componentSid Scoped ID of the Component
     * @param entityRepository The instance of the EntityRepository class (Dependency Injection)
     */
    constructor(entityUid, componentSid, entityRepository) {
        super();
        this._isAlive = true;
        this.__currentProcessStage = _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.Create;
        this.__byteOffsetOfThisComponent = -1;
        /** the MaxComponent Number of entities */
        this.__maxComponentNumber = _Config__WEBPACK_IMPORTED_MODULE_4__.Config.maxEntityNumber;
        this.__entityUid = entityUid;
        this._component_sid = componentSid;
        const stages = Component._processStages;
        stages.forEach(stage => {
            if (this.isExistProcessStageMethod(stage)) {
                if (Component.__componentsOfProcessStages.get(stage) == null) {
                    Component.__componentsOfProcessStages.set(stage, new Int32Array(_Config__WEBPACK_IMPORTED_MODULE_4__.Config.maxEntityNumber));
                    // Component.__dirtyOfArrayOfProcessStages.set(stage, false);
                    Component.__lengthOfArrayOfProcessStages.set(stage, 0);
                }
            }
        });
        this.__memoryManager = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__.MemoryManager.getInstance();
        this.__entityRepository = entityRepository;
    }
    /**
     * Move to the other stages of process
     * @param processStage stage of component's process
     */
    moveStageTo(processStage) {
        // Component.__dirtyOfArrayOfProcessStages.set(this.__currentProcessStage, false);
        // Component.__dirtyOfArrayOfProcessStages.set(processStage, true);
        this.__currentProcessStage = processStage;
    }
    /**
     * @private
     * set the Max number of components
     * this method is called by the ***Component classes only
     */
    _setMaxNumberOfComponent(value) {
        this.__maxComponentNumber = value;
    }
    /**
     * Get the max number of components
     */
    get maxNumberOfComponent() {
        return this.__maxComponentNumber;
    }
    /**
     * Get the Type ID of the Component
     */
    static get componentTID() {
        return 0;
    }
    /**
     * Get the Scoped ID of the Component
     */
    get componentSID() {
        return this._component_sid;
    }
    /**
     * Get the unique ID of the entity corresponding to the component.
     */
    get entityUID() {
        return this.__entityUid;
    }
    /**
     * Get the current process stage of the component.
     */
    get currentProcessStage() {
        return this.__currentProcessStage;
    }
    /**
     * Get true or false whether the specified ProcessStage exists in Component.
     * @returns true or false
     */
    static doesTheProcessStageMethodExist(componentType, processStage) {
        if (componentType.prototype[processStage.methodName] == null) {
            return false;
        }
        return true;
    }
    /**
     * Get true or false whether the specified ProcessStage exists in Component.
     */
    isExistProcessStageMethod(processStage) {
        if (this[processStage.methodName] == null) {
            return false;
        }
        return true;
    }
    /**
     * Process the components
     * @param param0 params
     */
    static process({ componentType, processStage, processApproach, strategy, renderPass, renderPassTickCount, }) {
        if (!Component.doesTheProcessStageMethodExist(componentType, processStage)) {
            return;
        }
        const methodName = processStage.methodName;
        const array = this.__componentsOfProcessStages.get(processStage);
        const components = _ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository._getComponentsIncludingDead(componentType);
        for (let i = 0; i < array.length; ++i) {
            const componentSid = array[i];
            if (componentSid === Component.invalidComponentSID) {
                return;
            }
            const component = components[componentSid];
            if (component !== undefined) {
                component[methodName]({
                    i,
                    processStage,
                    processApproach,
                    strategy,
                    renderPass,
                    renderPassTickCount,
                });
            }
        }
    }
    /**
     * Update all components at each process stage.
     */
    static updateComponentsOfEachProcessStage(componentClass, processStage, renderPass) {
        if (!Component.doesTheProcessStageMethodExist(componentClass, processStage)) {
            return;
        }
        const array = Component.__componentsOfProcessStages.get(processStage);
        if (array) {
            const method = componentClass['sort_' + processStage.methodName];
            if (method != null) {
                let sids = [];
                sids = method(renderPass);
                for (let i = 0; i < sids.length; i++) {
                    array[i] = sids[i];
                }
            }
            else {
                let count = 0;
                const components = _ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository.getComponentsWithType(componentClass);
                for (let i = 0; i < components.length; ++i) {
                    const component = components[i];
                    if (processStage === component.__currentProcessStage) {
                        array[count++] = component.componentSID;
                    }
                }
                array[count] = Component.invalidComponentSID;
            }
        }
    }
    /**
     * get byte length of sum of member fields in the component class
     */
    static getByteLengthSumOfMembers(bufferUse, componentClass) {
        const byteLengthSumOfMembers = this.__byteLengthSumOfMembers.get(componentClass);
        return byteLengthSumOfMembers.get(bufferUse);
    }
    /**
     * register a dependency for the other components.
     * Note: This method is not used yet
     */
    registerDependency(component, isMust) { }
    // /**
    //  * take a buffer view from the buffer.
    //  */
    // static takeBufferView(
    //   bufferUse: BufferUseEnum,
    //   componentClass: Function,
    //   byteLengthSumOfMembers: Byte,
    //   count: Count
    // ) {
    //   const buffer = MemoryManager.getInstance().createOrGetBuffer(bufferUse);
    //   if (!this.__bufferViews.has(componentClass)) {
    //     this.__bufferViews.set(componentClass, new Map());
    //   }
    //   const bufferViews = this.__bufferViews.get(componentClass)!;
    //   if (!bufferViews.has(bufferUse)) {
    //     const bufferView = buffer.takeBufferView({
    //       byteLengthToNeed: byteLengthSumOfMembers * count,
    //       byteStride: 0,
    //     }).unwrapForce();
    //     bufferViews.set(bufferUse, bufferView);
    //     return bufferView;
    //   }
    //   return void 0;
    // }
    /**
     * take one memory area for the specified member for all same type of the component instances.
     */
    takeOne(memberName, dataClassType, initValues) {
        if (!this['_' + memberName].isDummy()) {
            return;
        }
        const taken = Component.__accessors
            .get(this.constructor)
            .get(memberName)
            .takeOne();
        this['_' + memberName] = new dataClassType(taken, false, true);
        for (let i = 0; i < this['_' + memberName]._v.length; ++i) {
            this['_' + memberName]._v[i] = initValues[i];
        }
        return null;
    }
    /**
     * get the taken accessor for the member field.
     */
    static getAccessor(memberName, componentClass) {
        return this.__accessors.get(componentClass).get(memberName);
    }
    /**
     * take one accessor for the member field.
     */
    static takeAccessor(bufferUse, memberName, componentClass, compositionType, componentType, count) {
        if (!this.__accessors.has(componentClass)) {
            this.__accessors.set(componentClass, new Map());
        }
        const accessors = this.__accessors.get(componentClass);
        if (!accessors.has(memberName)) {
            const bytes = compositionType.getNumberOfComponents() *
                componentType.getSizeInBytes();
            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_0__.MemoryManager.getInstance().createOrGetBuffer(bufferUse);
            const bufferView = buffer
                .takeBufferView({
                byteLengthToNeed: bytes * count,
                byteStride: 0,
            })
                .unwrapForce();
            const accessor = bufferView
                .takeAccessor({
                compositionType,
                componentType,
                count: count,
                byteStride: bytes,
            })
                .unwrapForce();
            accessors.set(memberName, accessor);
            return accessor;
        }
        else {
            return void 0;
        }
    }
    static getByteOffsetOfThisComponentTypeInBuffer(bufferUse, componentClass) {
        return this.__bufferViews.get(componentClass).get(bufferUse)
            .byteOffsetInBuffer;
    }
    static getByteOffsetOfFirstOfThisMemberInBuffer(memberName, componentClass) {
        return this.__accessors.get(componentClass).get(memberName)
            .byteOffsetInBuffer;
    }
    static getByteOffsetOfFirstOfThisMemberInBufferView(memberName, componentClass) {
        return this.__accessors.get(componentClass).get(memberName)
            .byteOffsetInBufferView;
    }
    /**
     * Register a member field of component class for memory allocation.
     * @param bufferUse purpose type of buffer use
     * @param memberName the name of member field
     * @param dataClassType a class of data
     * @param componentType a type of number
     * @param initValues a initial value
     */
    registerMember(bufferUse, memberName, dataClassType, componentType, initValues) {
        if (!Component.__memberInfo.has(this.constructor)) {
            Component.__memberInfo.set(this.constructor, []);
        }
        const memberInfoArray = Component.__memberInfo.get(this.constructor);
        memberInfoArray.push({
            bufferUse: bufferUse,
            memberName: memberName,
            dataClassType: dataClassType,
            compositionType: dataClassType.compositionType,
            componentType: componentType,
            initValues: initValues,
        });
    }
    /**
     * Allocate memory of self member fields
     * @param count a number of entities to need allocate
     */
    submitToAllocation(count) {
        const componentClass = this.constructor;
        const memberInfoArray = Component.__memberInfo.get(componentClass);
        // Do this only for the first entity of the component
        if (this._component_sid === 0) {
            getBufferViewsAndAccessors(this);
        }
        const member = Component.__members.get(componentClass);
        // take a field value allocation for each entity for each member field
        for (const bufferUse of member.keys()) {
            const infoArray = member.get(bufferUse);
            infoArray.forEach(info => {
                this.takeOne(info.memberName, info.dataClassType, info.initValues);
            });
        }
        return;
        // inner function
        function getBufferViewsAndAccessors(that) {
            if (!Component.__members.has(componentClass)) {
                Component.__members.set(componentClass, new Map());
            }
            const member = Component.__members.get(componentClass);
            memberInfoArray.forEach(info => {
                member.set(info.bufferUse, []);
            });
            memberInfoArray.forEach(info => {
                member.get(info.bufferUse).push(info);
            });
            // for each member field, take a BufferView for all entities' the member field.
            for (const bufferUse of member.keys()) {
                const infoArray = member.get(bufferUse);
                if (!Component.__byteLengthSumOfMembers.has(componentClass)) {
                    Component.__byteLengthSumOfMembers.set(componentClass, new Map());
                }
                const byteLengthSumOfMembers = Component.__byteLengthSumOfMembers.get(componentClass);
                if (!byteLengthSumOfMembers.has(bufferUse)) {
                    byteLengthSumOfMembers.set(bufferUse, 0);
                }
                infoArray.forEach(info => {
                    byteLengthSumOfMembers.set(bufferUse, byteLengthSumOfMembers.get(bufferUse) +
                        info.compositionType.getNumberOfComponents() *
                            info.componentType.getSizeInBytes());
                });
                if (infoArray.length > 0) ;
            }
            // take a Accessor for all entities for each member fields (same as BufferView)
            for (const bufferUse of member.keys()) {
                const infoArray = member.get(bufferUse);
                infoArray.forEach(info => {
                    const accessor = Component.takeAccessor(info.bufferUse, info.memberName, componentClass, info.compositionType, info.componentType, count);
                    that['_byteOffsetOfAccessorInBuffer_' + info.memberName] =
                        accessor.byteOffsetInBuffer;
                    that['_byteOffsetOfAccessorInComponent_' + info.memberName] =
                        accessor.byteOffsetInBufferView;
                });
            }
        }
    }
    /**
     * get the entity which has this component.
     * @returns the entity which has this component
     */
    get entity() {
        return _EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getEntity(this.__entityUid);
    }
    /**
     * get the bytes Information of the member
     * @param component a instance of the component
     * @param memberName the member of component in string
     * @returns bytes information
     */
    static getDataByteInfoInner(component, memberName) {
        const data = component['_' + memberName];
        const typedArray = data._v;
        const byteOffsetInBuffer = typedArray.byteOffset;
        const byteLength = typedArray.byteLength;
        const componentNumber = typedArray.length;
        const locationOffsetInBuffer = byteOffsetInBuffer / 4 / 4; // 4byte is the size of Float32Array, and texel fetch is 4 components unit.
        const byteOffsetInThisComponent = this['_byteOffsetOfAccessorInComponent_' + memberName] +
            component.componentSID * componentNumber * 4;
        const locationOffsetInThisComponent = this['_byteOffsetOfAccessorInComponent_' + memberName] +
            component.componentSID * componentNumber;
        const thisComponentByteOffsetInBuffer = component.__byteOffsetOfThisComponent;
        const thisComponentLocationOffsetInBuffer = component.__byteOffsetOfThisComponent / 4 / 4;
        return {
            byteLength,
            byteOffsetInBuffer,
            byteOffsetInThisComponent,
            locationOffsetInBuffer,
            locationOffsetInThisComponent,
            thisComponentByteOffsetInBuffer,
            thisComponentLocationOffsetInBuffer,
            componentNumber,
        };
    }
    /**
     * get the bytes Information of the member
     * @param memberName the member of component in string
     * @returns bytes information
     */
    getDataByteInfo(memberName) {
        return Component.getDataByteInfoInner(this, memberName);
    }
    /**
     * get the bytes Information of the member (static version) by ComponentSID
     * @param componentType the Component type
     * @param componentSID the ComponentSID of the component
     * @param memberName the member of component in string
     * @returns bytes information
     */
    static getDataByteInfoByComponentSID(componentType, componentSID, memberName) {
        const component = _ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository.getComponent(componentType, componentSID);
        if (component) {
            return Component.getDataByteInfoInner(component, memberName);
        }
        return void 0;
    }
    /**
     * get the bytes Information of the member (static version) by EntityUID
     * @param componentType the component type
     * @param entityUID the EntityUID
     * @param memberName the member of component in string
     * @returns bytes information
     */
    static getDataByteInfoByEntityUID(componentType, entityUID, memberName) {
        const component = _EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getComponentOfEntity(entityUID, componentType);
        if (component) {
            return Component.getDataByteInfoInner(component, memberName);
        }
        return void 0;
    }
    /**
     * get the Pixel Location Offset in the Buffer of the Member
     * @param componentType the component type (e.g. TransformComponent )
     * @param memberName the member name in string
     * @returns the pixel offsets
     */
    static getLocationOffsetOfMemberOfComponent(componentType, memberName) {
        const component = _ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository.getComponent(componentType, 0);
        return (component['_byteOffsetOfAccessorInBuffer_' + memberName] / 4 / 4);
    }
    /**
     * @virtual
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        // can not be called. this is a virtual method.
        throw 'Invalid Calling';
    }
    // $create() {
    //   // Define process dependencies with other components.
    //   // If circular dependencies are detected, the error will be reported.
    //   // this.registerDependency(TransformComponent);
    // }
    // $load() {}
    // $mount() {}
    // $logic() {}
    // $prerender(instanceIDBufferUid: CGAPIResourceHandle) {}
    // $render() {}
    // $unmount() {}
    // $discard() {}
    ///
    /// convenient methods but not used yet
    ///
    static getCompositionTypeOfMember(memberName, componentClass) {
        const memberInfoArray = this.__memberInfo.get(componentClass);
        const info = memberInfoArray.find(info => {
            return info.memberName === memberName;
        });
        if (info != null) {
            return info.compositionType;
        }
        else {
            return undefined;
        }
    }
    static getComponentTypeOfMember(memberName, componentClass) {
        const memberInfoArray = this.__memberInfo.get(componentClass);
        const info = memberInfoArray.find(info => {
            return info.memberName === memberName;
        });
        if (info != null) {
            return info.componentType;
        }
        else {
            return undefined;
        }
    }
    destroy() {
        this._isAlive = false;
    }
}
Component.invalidComponentSID = -1;
Component.__componentsOfProcessStages = new Map();
Component.__lengthOfArrayOfProcessStages = new Map();
// protected static __dirtyOfArrayOfProcessStages: Map<ProcessStageEnum, boolean> = new Map();
Component.__bufferViews = new Map();
Component.__accessors = new Map();
Component.__byteLengthSumOfMembers = new Map();
Component.__memberInfo = new Map();
Component.__members = new Map();
Component._processStages = [
    _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.Create,
    _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.Load,
    // ProcessStage.Mount,
    _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.Logic,
    _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.PreRender,
    _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_2__.ProcessStage.Render,
    // ProcessStage.Unmount,
    // ProcessStage.Discard
];


/***/ }),

/***/ "./src/foundation/core/ComponentRepository.ts":
/*!****************************************************!*\
  !*** ./src/foundation/core/ComponentRepository.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ComponentRepository": () => (/* binding */ ComponentRepository)
/* harmony export */ });
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ "./src/foundation/core/Config.ts");



/**
 * The class that generates and manages all kinds of components.
 */
class ComponentRepository {
    constructor() { }
    static registerComponentClass(componentClass) {
        const thisClass = ComponentRepository;
        thisClass.__componentClasses.set(componentClass.componentTID, componentClass);
    }
    static unregisterComponentClass(componentTID) {
        const thisClass = ComponentRepository;
        thisClass.__componentClasses.delete(componentTID);
    }
    /**
     * Gets the class object of the component corresponding to specified ComponentTID.
     * @param componentTid The componentTID to get the class object.
     */
    static getComponentClass(componentTid) {
        return this.__componentClasses.get(componentTid);
    }
    /**
     * Creates an instance of the component for the entity.
     * @param componentTid The componentTID to create the instance.
     * @param entityUid The entityUID of the entity.
     * @param entityRepository the reference of the entityRepository.
     */
    static createComponent(componentTid, entityUid, entityRepository) {
        const thisClass = ComponentRepository;
        const componentClass = thisClass.__componentClasses.get(componentTid);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(componentClass)) {
            // Update __component_sid_count_map
            let component_sid_count = this.__component_sid_count_map.get(componentTid);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.not.exist(component_sid_count)) {
                this.__component_sid_count_map.set(componentTid, 0);
                component_sid_count = _Component__WEBPACK_IMPORTED_MODULE_0__.Component.invalidComponentSID;
            }
            this.__component_sid_count_map.set(componentTid, ++component_sid_count);
            // create the component
            const component = new componentClass(entityUid, component_sid_count, entityRepository);
            // register the component
            if (!this.__components.has(componentTid)) {
                this.__components.set(componentTid, []);
            }
            const array = this.__components.get(componentTid);
            array[component.componentSID] = component;
            return component;
        }
        else {
            throw new Error('The Component Class object is invalid.');
        }
    }
    /**
     * Get the instance of the component corresponding to the component class and componentSID.
     * @param componentClass The class object to get the component.
     * @param componentSid The componentSID to get the component.
     */
    static getComponent(componentClass, componentSid) {
        return this.getComponentFromComponentTID(componentClass.componentTID, componentSid);
    }
    /**
     * Get the instance of the component corresponding to the componentTID and componentSID.
     * @param componentTid The componentTID to get the component.
     * @param componentSid The componentSID to get the component.
     */
    static getComponentFromComponentTID(componentTid, componentSid) {
        const map = this.__components.get(componentTid);
        if (map != null) {
            const component = map[componentSid];
            if (component != null) {
                return map[componentSid];
            }
            else {
                return undefined;
            }
        }
        return undefined;
    }
    /**
     * @private
     * Gets an array of components corresponding to the class object of the component.
     * @param componentClass The class object of the component.
     */
    static _getComponents(componentClass) {
        const components = this.__components.get(componentClass.componentTID);
        return components === null || components === void 0 ? void 0 : components.filter(component => component._isAlive);
    }
    /**
     * @private
     * Gets an array of components corresponding to the class object of the component (dead components included).
     * @param componentClass The class object of the component.
     */
    static _getComponentsIncludingDead(componentClass) {
        const components = this.__components.get(componentClass.componentTID);
        return components;
    }
    static getMemoryBeginIndex(componentTid) {
        let memoryBeginIndex = 0;
        for (let i = 0; i < componentTid; i++) {
            const componentClass = ComponentRepository.__componentClasses.get(i);
            if (componentClass != null) {
                const sizeOfComponent = componentClass.sizeOfThisComponent;
                const maxEntityNumber = _Config__WEBPACK_IMPORTED_MODULE_2__.Config.maxEntityNumber;
                memoryBeginIndex += sizeOfComponent * maxEntityNumber;
            }
        }
        return memoryBeginIndex;
    }
    /**
     * Gets an array of components corresponding to the class object of the component.
     * @param componentType The class object of the component.
     */
    static getComponentsWithType(componentType) {
        const components = this.__components.get(componentType.componentTID);
        if (components == null) {
            return [];
        }
        return components.filter(component => component._isAlive);
    }
    /**
     * Gets all componentTIDs.
     */
    static getComponentTIDs() {
        const componentTids = Array.from(this.__components.keys());
        componentTids.sort((a, b) => a - b);
        return componentTids;
    }
}
ComponentRepository.__component_sid_count_map = new Map();
ComponentRepository.__components = new Map(); // index of array Is ComponentSID
ComponentRepository.__componentClasses = new Map();


/***/ }),

/***/ "./src/foundation/core/Config.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Config.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Config": () => (/* binding */ Config)
/* harmony export */ });
/* harmony import */ var _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");
/* harmony import */ var _misc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc */ "./src/foundation/misc/index.ts");
/* eslint-disable prefer-const */


let maxEntityNumber = 5000;
let maxLightNumberInShader = 4;
let maxVertexMorphNumberInShader = 41;
let maxMaterialInstanceForEachType = 500;
let maxSkeletonNumber = 33;
let maxCameraNumber = 20;
let maxSizeLimitOfNonCompressedTexture = 512;
/// ShaderGlobalStorageSize ///
let maxSkeletalBoneNumber = 300;
let maxSkeletalBoneNumberForUniformMode = 50; // For Uniform Mode
let dataTextureWidth = Math.pow(2, 12);
let dataTextureHeight = Math.pow(2, 12);
let boneDataType = _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_0__.BoneDataType.Vec4x2;
let noWebGLTex2DStateCache = false;
let maxMorphTargetNumber = 4;
let totalSizeOfGPUShaderDataStorageExceptMorphData = 0;
let isUboEnabled = false;
let eventTargetDom;
if (typeof navigator !== 'undefined') {
    if (_misc__WEBPACK_IMPORTED_MODULE_1__.MiscUtil.isMobile() || _misc__WEBPACK_IMPORTED_MODULE_1__.MiscUtil.isMobileVr()) {
        maxMaterialInstanceForEachType = 28;
        maxVertexMorphNumberInShader = 4;
        maxSkeletonNumber = 32;
        dataTextureWidth = 2 ** 9;
        dataTextureHeight = 2 ** 9;
    }
}
const Config = {
    maxEntityNumber,
    maxLightNumberInShader,
    maxVertexMorphNumberInShader,
    maxMaterialInstanceForEachType,
    boneDataType,
    maxSkeletonNumber,
    maxCameraNumber,
    maxSizeLimitOfNonCompressedTexture,
    maxSkeletalBoneNumber,
    maxSkeletalBoneNumberForUniformMode,
    dataTextureWidth,
    dataTextureHeight,
    noWebGLTex2DStateCache,
    maxMorphTargetNumber,
    totalSizeOfGPUShaderDataStorageExceptMorphData,
    isUboEnabled,
    eventTargetDom,
};


/***/ }),

/***/ "./src/foundation/core/Entity.ts":
/*!***************************************!*\
  !*** ./src/foundation/core/Entity.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Entity": () => (/* binding */ Entity)
/* harmony export */ });
/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");



/**
 * The Rhodonite Entity Class which are an entities that exists in space.
 * Entities can acquire various functions by having components on themselves.
 */
class Entity extends _RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    /**
     * The constructor of the Entity class.
     * When creating an Entity, use the createEntity method of the EntityRepository class
     * instead of directly calling this constructor.
     * @param entityUID The unique ID of the entity
     * @param isAlive Whether this entity alive or not
     * @param entityComponent The instance of EntityComponent (Dependency Injection)
     */
    constructor(entityUID, isAlive, components) {
        super();
        this.__entity_uid = entityUID;
        this._isAlive = isAlive;
        this.__components = _misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(components) ? components : new Map();
    }
    /**
     * Get Unique ID of the entity.
     */
    get entityUID() {
        return this.__entity_uid;
    }
    /**
     * @private
     * Sets a component to this entity.
     * @param component The component to set.
     */
    _setComponent(componentType, component) {
        this.__components.set(componentType.componentTID, component);
    }
    /**
     * return whether this entity has the component or not
     * @param componentType The component to check
     * @returns
     */
    hasComponent(componentType) {
        return this.__components.has(componentType.componentTID);
    }
    /**
     * Get the component of the specified type that the entity has
     * @param componentType
     */
    getComponent(componentType) {
        return this.__components.get(componentType.componentTID);
    }
    /**
     * Gets the component corresponding to the ComponentTID.
     * @param componentTID The ComponentTID to get the component.
     */
    getComponentByComponentTID(componentTID) {
        return this.__components.get(componentTID);
    }
    /**
     * @private
     * @param componentTID
     */
    _removeComponent(componentTID) {
        this.__components.delete(componentTID);
    }
    ///
    /// tryToGet methods
    ///
    /**
     * try to get an Animation Component if the entity has it.
     * @returns AnimationComponent | undefined
     */
    tryToGetAnimation() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.AnimationComponentTID);
    }
    tryToGetBlendShape() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.BlendShapeComponentTID);
    }
    tryToGetCamera() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.CameraComponentTID);
    }
    tryToGetCameraController() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.CameraControllerComponentTID);
    }
    tryToGetLight() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.LightComponentTID);
    }
    tryToGetMesh() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.MeshComponentTID);
    }
    tryToGetMeshRenderer() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.MeshRendererComponentTID);
    }
    tryToGetPhysics() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.PhysicsComponentTID);
    }
    tryToGetSceneGraph() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.SceneGraphComponentTID);
    }
    tryToGetSkeletal() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.SkeletalComponentTID);
    }
    tryToGetTransform() {
        return this.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.TransformComponentTID);
    }
    destroy() {
        this.__components.forEach((component) => {
            component.destroy();
        });
        this._isAlive = false;
    }
}
/** Invalid Entity UID constant value */
Entity.invalidEntityUID = -1;


/***/ }),

/***/ "./src/foundation/core/EntityRepository.ts":
/*!*************************************************!*\
  !*** ./src/foundation/core/EntityRepository.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EntityRepository": () => (/* binding */ EntityRepository),
/* harmony export */   "applyMixins": () => (/* binding */ applyMixins)
/* harmony export */ });
/* harmony import */ var _Entity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Entity */ "./src/foundation/core/Entity.ts");
/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");




/**
 * The class that generates and manages entities.
 */
class EntityRepository {
    constructor() { }
    /**
     * Creates an entity
     */
    static createEntity() {
        const entity = new _Entity__WEBPACK_IMPORTED_MODULE_0__.Entity(++this.__entity_uid_count, true);
        this.__entities[this.__entity_uid_count] = entity;
        return entity;
    }
    static addComponentToEntity(componentClass, entity) {
        if (entity.hasComponent(componentClass)) {
            console.log('This entity already has the Component.');
            return entity;
        }
        // Create Component
        const component = _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.createComponent(componentClass.componentTID, entity.entityUID, this);
        const map = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_2__.valueWithCompensation)({
            value: this._components[entity.entityUID],
            compensation: () => {
                const map = new Map();
                this._components[entity.entityUID] = map;
                return map;
            },
        });
        map.set(componentClass.componentTID, component);
        // add this component to the entity
        component.addThisComponentToEntity(entity, componentClass);
        entity._setComponent(componentClass, component);
        return entity;
    }
    /**
     * Remove components from the entity.
     * Note: the returned entity's type will be IEntity (most basic type).
     *       You have to cast it to appropriate type later.
     * @param componentClass The class object of the component to remove.
     * @param entityUid The entityUID of the entity.
     */
    static removeComponentFromEntity(componentClass, entity) {
        let map = this._components[entity.entityUID];
        if (map == null) {
            map = new Map();
            this._components[entity.entityUID] = map;
        }
        const component = map.get(componentClass.componentTID);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.exist(component)) {
            component.destroy();
            map.delete(componentClass.componentTID);
            entity._removeComponent(componentClass.componentTID);
        }
        return entity;
    }
    /**
     * Gets the entity corresponding to the entityUID.
     * @param entityUid The entityUID of the entity.
     */
    static getEntity(entityUid) {
        return this.__entities[entityUid];
    }
    /**
     * Gets the specified component from the entity.
     * @param entityUid The entity to get the component from.
     * @param componentType The class object of the component to get.
     */
    static getComponentOfEntity(entityUid, componentType) {
        const entity = this._components[entityUid];
        let component = null;
        if (entity != null) {
            component = entity.get(componentType.componentTID);
            if (component != null) {
                return component;
            }
            else {
                return null;
            }
        }
        return component;
    }
    /**
     * Search entities by the given tags.
     * @param tags The tags to search
     */
    static searchByTags(tags) {
        const matchEntities = [];
        for (const entity of this.__entities) {
            if (entity.matchTags(tags)) {
                matchEntities.push(entity);
            }
        }
        return matchEntities;
    }
    /**
     * Gets entity by the unique name.
     * @param uniqueName The unique name of the entity.
     */
    static getEntityByUniqueName(uniqueName) {
        for (const entity of this.__entities) {
            if (entity.uniqueName === uniqueName) {
                return entity;
            }
        }
        return void 0;
    }
    /**
     * @private
     * Gets all entities.
     */
    static _getEntities() {
        return this.__entities.filter(entity => entity._isAlive);
    }
    /**
     * Gets the number of all entities.
     */
    static getEntitiesNumber() {
        const entities = this.__entities.filter(entity => entity._isAlive);
        return entities.length;
    }
}
EntityRepository.__entity_uid_count = _Entity__WEBPACK_IMPORTED_MODULE_0__.Entity.invalidEntityUID;
EntityRepository.__entities = [];
EntityRepository._components = []; // index is EntityUID
// This can live anywhere in your codebase:
function applyMixins(derivedCtor, baseCtor) {
    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {
        Object.defineProperty(derivedCtor, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name) ||
            Object.create(null));
    });
}


/***/ }),

/***/ "./src/foundation/core/GlobalDataRepository.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/core/GlobalDataRepository.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GlobalDataRepository": () => (/* binding */ GlobalDataRepository)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _MemoryManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../materials/core/Material */ "./src/foundation/materials/core/Material.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MathClassUtil */ "./src/foundation/math/MathClassUtil.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../definitions/BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");
/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../foundation/definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../math */ "./src/foundation/math/index.ts");




















/**
 * The class which manages global data.
 */
class GlobalDataRepository {
    constructor() {
        this.__fields = new Map();
    }
    initialize(approach) {
        // CurrentComponentSIDs
        const currentComponentSIDsInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.CurrentComponentSIDs,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.ScalarArray,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            arrayLength: _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_16__.WellKnownComponentTIDs.maxWellKnownTidNumber,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            needUniformInFastest: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_16__.WellKnownComponentTIDs.maxWellKnownTidNumber)),
        };
        this.registerProperty(currentComponentSIDsInfo, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.CurrentComponentSIDs);
        // Camera
        const viewMatrixInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ViewMatrix,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Mat4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix44.identity(),
        };
        const projectionMatrixInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ProjectionMatrix,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Mat4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix44.identity(),
        };
        const viewPositionInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ViewPosition,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec3,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_14__.Vector3.fromCopyArray([0, 0, 1]),
        };
        this.registerProperty(viewMatrixInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxCameraNumber);
        this.registerProperty(projectionMatrixInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxCameraNumber);
        this.registerProperty(viewPositionInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxCameraNumber);
        const maxSkeletalBoneNumber = _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_18__.ProcessApproach.isUniformApproach(approach)
            ? _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletalBoneNumberForUniformMode
            : _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletalBoneNumber;
        // Skinning
        const boneMatrixInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneMatrix,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Mat4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneQuaternionInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneQuaternion,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneTranslateScaleInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneTranslateScale,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            soloDatum: true,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneTranslatePackedQuatInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneTranslatePackedQuat,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneScalePackedQuatInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneScalePackedQuat,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            soloDatum: true,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneCompressedChunkInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneCompressedChunk,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            arrayLength: maxSkeletalBoneNumber,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            soloDatum: true,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(0)),
        };
        const boneCompressedInfoInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneCompressedInfo,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            soloDatum: true,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_13__.Vector4.zero(),
        };
        const skeletalComponentSIDInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SkinningMode,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: 0,
            max: 1,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(-1),
        };
        if (_Config__WEBPACK_IMPORTED_MODULE_11__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_17__.BoneDataType.Mat44x1) {
            this.registerProperty(boneMatrixInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
        }
        else if (_Config__WEBPACK_IMPORTED_MODULE_11__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_17__.BoneDataType.Vec4x2) {
            this.registerProperty(boneTranslatePackedQuatInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
            this.registerProperty(boneScalePackedQuatInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
        }
        else if (_Config__WEBPACK_IMPORTED_MODULE_11__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_17__.BoneDataType.Vec4x2Old) {
            this.registerProperty(boneQuaternionInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
            this.registerProperty(boneTranslateScaleInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
        }
        else if (_Config__WEBPACK_IMPORTED_MODULE_11__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_17__.BoneDataType.Vec4x1) {
            this.registerProperty(boneTranslateScaleInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
            this.registerProperty(boneCompressedChunkInfo, _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxSkeletonNumber);
            this.registerProperty(boneCompressedInfoInfo, 1);
            this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BoneCompressedInfo);
        }
        this.registerProperty(skeletalComponentSIDInfo, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SkinningMode);
        // Lighting
        const lightPositionInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightPosition,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
            arrayLength: _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader)),
        };
        const lightDirectionInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightDirection,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
            arrayLength: _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader,
            min: -1,
            max: 1,
            isCustomSetting: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader)),
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
        };
        const lightIntensityInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightIntensity,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec4Array,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
            arrayLength: _Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader,
            min: 0,
            max: 10,
            isCustomSetting: true,
            initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(new Float32Array(_Config__WEBPACK_IMPORTED_MODULE_11__.Config.maxLightNumberInShader)),
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
        };
        this.registerProperty(lightPositionInfo, 1);
        this.registerProperty(lightDirectionInfo, 1);
        this.registerProperty(lightIntensityInfo, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightDirection);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightIntensity);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightPosition);
        const lightNumberInfo = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightNumber,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0),
        };
        this.registerProperty(lightNumberInfo, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightNumber);
        const backBufferTextureSize = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BackBufferTextureSize,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec2,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: true,
            needUniformInFastest: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: _math__WEBPACK_IMPORTED_MODULE_19__.Vector2.fromCopy2(0, 0),
        };
        this.registerProperty(backBufferTextureSize, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BackBufferTextureSize);
        const vrState = {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.VrState,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec2,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: true,
            needUniformInFastest: true,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_10__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: _math__WEBPACK_IMPORTED_MODULE_19__.Vector2.fromCopy2(0, 0),
            // x: 0: not vr, 1: vr
            // y: 0: left eye, 1: right eye
        };
        this.registerProperty(vrState, 1);
        this.takeOne(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.VrState);
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new GlobalDataRepository();
        }
        return this.__instance;
    }
    registerProperty(semanticInfo, maxCount) {
        const propertyIndex = _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__.Material._getPropertyIndex(semanticInfo);
        const buffer = _MemoryManager__WEBPACK_IMPORTED_MODULE_2__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUInstanceData);
        const alignedByteLength = _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__.Material._calcAlignedByteLength(semanticInfo);
        const bufferView = buffer
            .takeBufferView({
            byteLengthToNeed: alignedByteLength * maxCount,
            byteStride: 0,
        })
            .unwrapForce();
        let maxArrayLength = semanticInfo.arrayLength;
        if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.isArray(semanticInfo.compositionType) &&
            maxArrayLength == null) {
            maxArrayLength = 100;
        }
        const accessor = bufferView
            .takeAccessor({
            compositionType: semanticInfo.compositionType,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            count: maxCount,
            byteStride: alignedByteLength,
            arrayLength: maxArrayLength,
        })
            .unwrapForce();
        const globalPropertyStruct = {
            shaderSemanticsInfo: semanticInfo,
            values: [],
            maxCount: maxCount,
            accessor: accessor,
        };
        this.__fields.set(propertyIndex, globalPropertyStruct);
    }
    takeOne(shaderSemantic) {
        const propertyIndex = _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__.Material._getPropertyIndex2(shaderSemantic);
        const globalPropertyStruct = this.__fields.get(propertyIndex);
        if (globalPropertyStruct) {
            const semanticInfo = globalPropertyStruct.shaderSemanticsInfo;
            const typedArray = globalPropertyStruct.accessor.takeOne();
            const countIndex = globalPropertyStruct.values.length;
            const valueObj = _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__.MathClassUtil.initWithFloat32Array(semanticInfo.initialValue, semanticInfo.initialValue, typedArray, semanticInfo.compositionType);
            globalPropertyStruct.values[countIndex] = valueObj;
            return valueObj;
        }
        return void 0;
    }
    setValue(shaderSemantic, countIndex, value) {
        const propertyIndex = _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__.Material._getPropertyIndex2(shaderSemantic);
        const globalPropertyStruct = this.__fields.get(propertyIndex);
        if (globalPropertyStruct) {
            const valueObj = globalPropertyStruct.values[countIndex];
            _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_6__.MathClassUtil._setForce(valueObj, value);
        }
    }
    getValue(shaderSemantic, countIndex) {
        const propertyIndex = _materials_core_Material__WEBPACK_IMPORTED_MODULE_4__.Material._getPropertyIndex2(shaderSemantic);
        const globalPropertyStruct = this.__fields.get(propertyIndex);
        if (globalPropertyStruct) {
            const valueObj = globalPropertyStruct.values[countIndex];
            return valueObj;
        }
        return void 0;
    }
    getGlobalPropertyStruct(propertyIndex) {
        return this.__fields.get(propertyIndex);
    }
    getGlobalProperties() {
        return Array.from(this.__fields.values());
    }
    setUniformLocationsForUniformModeOnly(shaderProgramUid) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__.CGAPIResourceRepository.getWebGLResourceRepository();
        const semanticsInfoArray = [];
        this.__fields.forEach((globalPropertyStruct, key) => {
            const semanticInfo = globalPropertyStruct.shaderSemanticsInfo;
            semanticsInfoArray.push(semanticInfo);
        });
        webglResourceRepository.setupUniformLocations(shaderProgramUid, semanticsInfoArray, true);
    }
    setUniformLocationsForFastestModeOnly(shaderProgramUid) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__.CGAPIResourceRepository.getWebGLResourceRepository();
        const semanticsInfoArray = [];
        this.__fields.forEach((globalPropertyStruct, key) => {
            const semanticInfo = globalPropertyStruct.shaderSemanticsInfo;
            if (semanticInfo.needUniformInFastest) {
                semanticsInfoArray.push(semanticInfo);
            }
        });
        webglResourceRepository.setupUniformLocations(shaderProgramUid, semanticsInfoArray, true);
    }
    setUniformValues(shaderProgram) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_7__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.__fields.forEach((globalPropertyStruct, key) => {
            const info = globalPropertyStruct.shaderSemanticsInfo;
            const values = globalPropertyStruct.values;
            for (let i = 0; i < values.length; i++) {
                webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, true, values[i]);
            }
        });
    }
    // getLocationOffsetOfProperty(propertyIndex: Index, countIndex: Index) {
    //   const globalPropertyStruct = this.__fields.get(propertyIndex);
    //   if (globalPropertyStruct) {
    //     const value = globalPropertyStruct.values[countIndex];
    //     return (value._v as Float32Array).byteOffset / 4 / 4;
    //   }
    //   return void 0;
    // }
    getLocationOffsetOfProperty(propertyIndex) {
        const globalPropertyStruct = this.__fields.get(propertyIndex);
        if (globalPropertyStruct) {
            return globalPropertyStruct.accessor.byteOffsetInBuffer / 4 / 4;
        }
        return -1;
    }
    getCurrentDataNumberOfTheProperty(propertyIndex) {
        const globalPropertyStruct = this.__fields.get(propertyIndex);
        if (globalPropertyStruct) {
            return globalPropertyStruct.values.length;
        }
        return 0;
    }
    addPropertiesStr(vertexPropertiesStr, pixelPropertiesStr, propertySetter, isWebGL2) {
        this.__fields.forEach((globalPropertyStruct, propertyIndex) => {
            const info = globalPropertyStruct.shaderSemanticsInfo;
            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexShader ||
                info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader) {
                vertexPropertiesStr += propertySetter('', info, propertyIndex, true, isWebGL2);
            }
            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader ||
                info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.VertexAndPixelShader) {
                pixelPropertiesStr += propertySetter('', info, propertyIndex, true, isWebGL2);
            }
        });
        return [vertexPropertiesStr, pixelPropertiesStr];
    }
}


/***/ }),

/***/ "./src/foundation/core/MemoryManager.ts":
/*!**********************************************!*\
  !*** ./src/foundation/core/MemoryManager.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MemoryManager": () => (/* binding */ MemoryManager)
/* harmony export */ });
/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../memory/Buffer */ "./src/foundation/memory/Buffer.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");




/**
 * Usage
 * const mm = MemoryManager.getInstance();
 * this.translate = new Vector3(
 *   mm.assignMem(componentUID, propertyId, entityUID, isRendered)
 * );
 */
class MemoryManager {
    constructor(cpuGeneric, gpuInstanceData, gpuVertexData) {
        //__entityMaxCount: number;
        this.__buffers = {};
        this.__buffersOnDemand = new Map();
        this.__memorySizeRatios = {};
        this.__memorySizeRatios[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.CPUGeneric.str] = cpuGeneric;
        this.__memorySizeRatios[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUInstanceData.str] = gpuInstanceData;
        this.__memorySizeRatios[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUVertexData.str] = gpuVertexData;
    }
    static createInstanceIfNotCreated({ cpuGeneric, gpuInstanceData, gpuVertexData, }) {
        if (!this.__instance) {
            this.__instance = new MemoryManager(cpuGeneric, gpuInstanceData, gpuVertexData);
            return this.__instance;
        }
        return this.__instance;
    }
    __makeMultipleOf4byteSize(memorySize) {
        return memorySize + (memorySize % 4 === 0 ? 0 : 4 - (memorySize % 4));
    }
    static getInstance() {
        return this.__instance;
    }
    __createBuffer(bufferUse) {
        const memorySize = MemoryManager.bufferWidthLength *
            MemoryManager.bufferHeightLength /*width*height*/ *
            4 /*rgba*/ *
            4 /*byte*/ *
            this.__memorySizeRatios[bufferUse.str];
        const arrayBuffer = new ArrayBuffer(this.__makeMultipleOf4byteSize(memorySize));
        let byteAlign = 4;
        if (bufferUse === _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUInstanceData ||
            bufferUse === _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUVertexData) {
            byteAlign = 16;
        }
        const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer({
            byteLength: arrayBuffer.byteLength,
            buffer: arrayBuffer,
            name: bufferUse.str,
            byteAlign: byteAlign,
        });
        this.__buffers[buffer.name] = buffer;
        return buffer;
    }
    getBuffer(bufferUse) {
        const buffer = this.__buffers[bufferUse.toString()];
        return buffer;
    }
    createOrGetBuffer(bufferUse) {
        let buffer = this.__buffers[bufferUse.toString()];
        if (buffer == null) {
            buffer = this.__createBuffer(bufferUse);
        }
        return buffer;
    }
    createBufferOnDemand(size, object, byteAlign) {
        const arrayBuffer = new ArrayBuffer(size);
        const buffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer({
            byteLength: arrayBuffer.byteLength,
            buffer: arrayBuffer,
            name: _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.UBOGeneric.toString(),
            byteAlign: byteAlign,
        });
        this.__buffersOnDemand.set(object.objectUID, buffer);
        return buffer;
    }
    getBufferOnDemand(object) {
        return this.__buffersOnDemand.get(object.objectUID);
    }
    static get bufferWidthLength() {
        return _Config__WEBPACK_IMPORTED_MODULE_2__.Config.dataTextureWidth;
    }
    static get bufferHeightLength() {
        return _Config__WEBPACK_IMPORTED_MODULE_2__.Config.dataTextureHeight;
    }
    printMemoryUsage() {
        const cpuGeneric = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.CPUGeneric.toString()];
        const gpuInstanceData = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUInstanceData.toString()];
        const gpuVertexData = this.__buffers[_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_1__.BufferUse.GPUVertexData.toString()];
        // const uboGeneric = this.__buffers[BufferUse.UBOGeneric.toString()];
        console.log('Memory Usage in Memory Manager:');
        console.log(`CPUGeneric: ${cpuGeneric.takenSizeInByte} byte of ${cpuGeneric.byteLength} bytes. (${(cpuGeneric.takenSizeInByte / cpuGeneric.byteLength) * 100} %) `);
        console.log(`GPUInstanceData: ${gpuInstanceData.takenSizeInByte} byte of ${gpuInstanceData.byteLength} bytes. (${(gpuInstanceData.takenSizeInByte / gpuInstanceData.byteLength) * 100} %) `);
        if (gpuVertexData != null) {
            console.log(`GPUVertexData: ${gpuVertexData.takenSizeInByte} byte of ${gpuVertexData.byteLength} bytes. (${(gpuVertexData.takenSizeInByte / gpuVertexData.byteLength) * 100} %) `);
        }
        // console.log(`UBOGeneric: ${uboGeneric.takenSizeInByte} byte of ${uboGeneric.byteLength} bytes. (${uboGeneric.takenSizeInByte / uboGeneric.byteLength * 100} %) `);
    }
    dumpBuffer(bufferUse) {
        const buffer = this.__buffers[bufferUse.toString()];
        _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__.MiscUtil.downloadArrayBuffer(bufferUse.toString(), buffer.getArrayBuffer());
        return buffer;
    }
}


/***/ }),

/***/ "./src/foundation/core/RnObject.ts":
/*!*****************************************!*\
  !*** ./src/foundation/core/RnObject.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RnObject": () => (/* binding */ RnObject)
/* harmony export */ });
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");

/**
 * The root class of the objects in Rhodonite
 */
class RnObject {
    constructor() {
        /// members
        this.__objectUid = RnObject.currentMaxObjectCount++;
        this.__tags = {}; // Tag string allows alphabet, digit and underscore (_) only
        this.__combinedTagString = ''; // Tag string allows alphabet, digit and underscore (_) only
        this.__uniqueName = `${this.constructor.name}__uid_${this.__objectUid}`;
        this.__updateInfo(this.__uniqueName);
    }
    __updateInfo(uniqueName) {
        RnObject.__objects[this.__objectUid] = this;
        RnObject.__uniqueNames[this.__objectUid] = uniqueName;
        RnObject.__objectsByNameMap.set(this.__uniqueName, this);
    }
    static searchByTag(tag, value) {
        for (const obj of RnObject.__objects) {
            if (obj.getTagValue(tag) === value) {
                return obj;
            }
        }
        return void 0;
    }
    /**
     * Gets the objectUID of the object.
     */
    get objectUID() {
        return this.__objectUid;
    }
    /**
     * Gets the object by corresponding to the objectUID.
     * @param objectUid The objectUID of the object.
     */
    static getRnObject(objectUid) {
        return RnObject.__objects[objectUid];
    }
    /**
     * Gets the object by the unique name.
     * @param uniqueName The unique name of the object.
     */
    static getRnObjectByName(uniqueName) {
        return RnObject.__objectsByNameMap.get(uniqueName);
    }
    /**
     * Try to set a unique name of the entity.
     * @param name
     * @param toAddNameIfConflict If true, force to add name string to the current unique name string. If false, give up to change name.
     */
    tryToSetUniqueName(name, toAddNameIfConflict) {
        if (RnObject.__uniqueNames.indexOf(name) !== -1) {
            // Conflict
            if (toAddNameIfConflict) {
                const newName = name + '_(' + this.__objectUid + ')';
                if (RnObject.__uniqueNames.indexOf(newName) === -1) {
                    this.__uniqueName = newName;
                    RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;
                    RnObject.__objectsByNameMap.set(this.__uniqueName, this);
                    return true;
                }
            }
            return false;
        }
        else {
            this.__uniqueName = name;
            RnObject.__uniqueNames[this.__objectUid] = this.__uniqueName;
            RnObject.__objectsByNameMap.set(this.__uniqueName, this);
            return true;
        }
    }
    /**
     * Validate the string of tags.
     * @param val The string to be validated
     */
    validateTagString(val) {
        const reg = new RegExp(/[!"#$%&'()\*\+\-\s\.,\/:;<=>?@\[\\\]^`{|}~]/g);
        if (reg.test(val)) {
            return false;
        }
        return true;
    }
    /**
     * Tries to set tag (name and value).
     * @param tagName The tag name.
     * @param tagValue Tha value of the tag.
     */
    tryToSetTag(tag) {
        if (this.validateTagString(tag.tag)) {
            if (this.hasTag(tag.tag)) {
                this.removeTag(tag.tag);
            }
            this.__tags[tag.tag] = tag.value;
            this.__combinedTagString += `${tag.tag}:${tag.value}` + ' ';
            return true;
        }
        return false;
    }
    /**
     * Gets the value of the tag.
     * @param tagName The tag name.
     */
    getTagValue(tagName) {
        return this.__tags[tagName];
    }
    /**
     * Gets the tag object.
     * @param tagName The tag name.
     */
    getTag(tagName) {
        const tag = {
            tag: tagName,
            value: this.__tags[tagName],
        };
        return tag;
    }
    /**
     * Gets the boolean value whether this object has the tag or not.
     * @param tagName The tag name.
     */
    hasTag(tagName) {
        if (this.__tags[tagName] != null) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Remove the tag.
     * @param tagName The tag name.
     */
    removeTag(tagName) {
        `${tagName}:${this.__tags[tagName]}` + ' ';
        this.__combinedTagString.replace(this.__combinedTagString, '');
        delete this.__tags[tagName];
    }
    /**
     * Confirms the matching of the tag name and tag value.
     * @param tagName The tag name.
     * @param tagValue The tag value.
     */
    matchTag(tagName, tagValue) {
        if (this.__tags[tagName] === tagValue) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Confirm that this object's tags includes given an array of string.
     * @param stringArray an array of string.
     */
    matchTagsAsFreeStrings(stringArray) {
        let regExpStr = '^';
        for (let i = 0; i < stringArray.length; i++) {
            regExpStr += `(?=.*${stringArray[i]})`;
        }
        const reg = new RegExp(regExpStr);
        if (reg.test(this.__combinedTagString)) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Confirm that this object's tags includes given set of tags.
     * @param tags The set of tags.
     */
    matchTags(tags) {
        let regExpStr = '^';
        for (const tagName in tags) {
            regExpStr += `(?=.*${[tagName]}:${tags[tagName]})`;
        }
        const reg = new RegExp(regExpStr);
        if (reg.test(this.__combinedTagString)) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Get the unique name of the entity.
     */
    get uniqueName() {
        return this.__uniqueName;
    }
    /**
     * @private
     */
    static _reset() {
        this.currentMaxObjectCount = 0;
        this.__uniqueNames = [];
        this.__objectsByNameMap = new Map();
        this.__objects = [];
    }
    _copyFrom(rnObject) {
        this.__tags = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_0__.deepCopyUsingJsonStringify)(rnObject.__tags);
        this.__combinedTagString = rnObject.__combinedTagString;
    }
}
/// static members
RnObject.InvalidObjectUID = -1;
RnObject.currentMaxObjectCount = 0;
RnObject.__uniqueNames = [];
RnObject.__objectsByNameMap = new Map();
RnObject.__objects = [];


/***/ }),

/***/ "./src/foundation/core/index.ts":
/*!**************************************!*\
  !*** ./src/foundation/core/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* reexport safe */ _Component__WEBPACK_IMPORTED_MODULE_0__.Component),
/* harmony export */   "ComponentRepository": () => (/* reexport safe */ _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository),
/* harmony export */   "Config": () => (/* reexport safe */ _Config__WEBPACK_IMPORTED_MODULE_2__.Config),
/* harmony export */   "Entity": () => (/* reexport safe */ _Entity__WEBPACK_IMPORTED_MODULE_3__.Entity),
/* harmony export */   "EntityRepository": () => (/* reexport safe */ _EntityRepository__WEBPACK_IMPORTED_MODULE_4__.EntityRepository),
/* harmony export */   "GlobalDataRepository": () => (/* reexport safe */ _GlobalDataRepository__WEBPACK_IMPORTED_MODULE_5__.GlobalDataRepository),
/* harmony export */   "MemoryManager": () => (/* reexport safe */ _MemoryManager__WEBPACK_IMPORTED_MODULE_6__.MemoryManager),
/* harmony export */   "RnObject": () => (/* reexport safe */ _RnObject__WEBPACK_IMPORTED_MODULE_7__.RnObject),
/* harmony export */   "applyMixins": () => (/* reexport safe */ _EntityRepository__WEBPACK_IMPORTED_MODULE_4__.applyMixins)
/* harmony export */ });
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _Entity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Entity */ "./src/foundation/core/Entity.ts");
/* harmony import */ var _EntityRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _GlobalDataRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _MemoryManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _RnObject__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./RnObject */ "./src/foundation/core/RnObject.ts");










/***/ }),

/***/ "./src/foundation/definitions/AlphaMode.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/AlphaMode.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlphaMode": () => (/* binding */ AlphaMode)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class AlphaModeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
    toGltfString() {
        if (this.str === 'TRANSLUCENT') {
            return 'BLEND';
        }
        else {
            return this.str;
        }
    }
}
const Opaque = new AlphaModeClass({ index: 0, str: 'OPAQUE' });
const Mask = new AlphaModeClass({ index: 1, str: 'MASK' });
const Translucent = new AlphaModeClass({
    index: 2,
    str: 'TRANSLUCENT',
});
const Additive = new AlphaModeClass({ index: 3, str: 'ADDITIVE' });
const typeList = [Opaque, Mask, Translucent, Additive];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function fromGlTFString(str) {
    if (str === 'BLEND') {
        return Translucent;
    }
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const AlphaMode = Object.freeze({
    Opaque,
    Mask,
    Translucent,
    Additive,
    from,
    fromString,
    fromGlTFString,
});


/***/ }),

/***/ "./src/foundation/definitions/AnimationAttribute.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/definitions/AnimationAttribute.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationAttribute": () => (/* binding */ AnimationAttribute)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class AnimationAttributeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Quaternion = new AnimationAttributeClass({
    index: 0,
    str: 'Quaternion',
});
const Translate = new AnimationAttributeClass({
    index: 1,
    str: 'Translate',
});
const Scale = new AnimationAttributeClass({
    index: 2,
    str: 'Scale',
});
const Weights = new AnimationAttributeClass({
    index: 3,
    str: 'Weights',
});
const typeList = [Quaternion, Translate, Scale, Weights];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const AnimationAttribute = Object.freeze({
    Quaternion,
    Translate,
    Scale,
    Weights,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/AnimationInterpolation.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/definitions/AnimationInterpolation.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationInterpolation": () => (/* binding */ AnimationInterpolation)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class AnimationInterpolationClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
    get GltfString() {
        return this.str.toUpperCase();
    }
}
const Linear = new AnimationInterpolationClass({
    index: 0,
    str: 'Linear',
});
const Step = new AnimationInterpolationClass({
    index: 1,
    str: 'Step',
});
const CubicSpline = new AnimationInterpolationClass({ index: 2, str: 'CubicSpline' });
const typeList = [Linear, Step, CubicSpline];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const AnimationInterpolation = Object.freeze({
    Linear,
    Step,
    CubicSpline,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/BasisCompressionType.ts":
/*!************************************************************!*\
  !*** ./src/foundation/definitions/BasisCompressionType.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BasisCompressionType": () => (/* binding */ BasisCompressionType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class BasisCompressionTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const ETC1 = new BasisCompressionTypeClass({
    index: 0,
    str: 'ETC1',
});
const ETC2 = new BasisCompressionTypeClass({
    index: 1,
    str: 'ETC2',
});
const BC1 = new BasisCompressionTypeClass({
    index: 2,
    str: 'BC1',
});
const BC3 = new BasisCompressionTypeClass({
    index: 3,
    str: 'BC3',
});
const BC4 = new BasisCompressionTypeClass({
    index: 4,
    str: 'BC4',
});
const BC5 = new BasisCompressionTypeClass({
    index: 5,
    str: 'BC5',
});
const BC7_M6_OPAQUE = new BasisCompressionTypeClass({
    index: 6,
    str: 'BC7_M6_OPAQUE',
});
const BC7_M5 = new BasisCompressionTypeClass({
    index: 7,
    str: 'BC7_M5',
});
const PVRTC1_RGB = new BasisCompressionTypeClass({
    index: 8,
    str: 'PVRTC1_RGB',
});
const PVRTC1_RGBA = new BasisCompressionTypeClass({
    index: 9,
    str: 'PVRTC1_RGBA',
});
const ASTC = new BasisCompressionTypeClass({
    index: 10,
    str: 'ASTC',
});
const ATC_RGB = new BasisCompressionTypeClass({
    index: 11,
    str: 'ATC_RGB',
});
const ATC_RGBA = new BasisCompressionTypeClass({
    index: 12,
    str: 'ATC_RGBA',
});
const RGBA32 = new BasisCompressionTypeClass({
    index: 13,
    str: 'RGBA32',
});
const RGB565 = new BasisCompressionTypeClass({
    index: 14,
    str: 'RGB565',
});
const BGR565 = new BasisCompressionTypeClass({
    index: 15,
    str: 'BGR565',
});
const RGBA4444 = new BasisCompressionTypeClass({
    index: 16,
    str: 'RGBA4444',
});
const typeList = [
    ETC1,
    ETC2,
    BC1,
    BC3,
    BC4,
    BC5,
    BC7_M5,
    BC7_M6_OPAQUE,
    PVRTC1_RGB,
    PVRTC1_RGBA,
    ASTC,
    ATC_RGB,
    ATC_RGBA,
    RGBA32,
    RGB565,
    BGR565,
    RGBA4444,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const BasisCompressionType = Object.freeze({
    ETC1,
    ETC2,
    BC1,
    BC3,
    BC4,
    BC5,
    BC7_M5,
    BC7_M6_OPAQUE,
    PVRTC1_RGB,
    PVRTC1_RGBA,
    ASTC,
    ATC_RGB,
    ATC_RGBA,
    RGBA32,
    RGB565,
    BGR565,
    RGBA4444,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/BoneDataType.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/BoneDataType.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BoneDataType": () => (/* binding */ BoneDataType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class BoneDataTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Mat44x1 = new BoneDataTypeClass({
    index: 0,
    str: 'Mat44x1',
});
const Vec4x2 = new BoneDataTypeClass({
    index: 1,
    str: 'Vec4x2',
});
const Vec4x2Old = new BoneDataTypeClass({
    index: 2,
    str: 'Vec4x2Old',
});
const Vec4x1 = new BoneDataTypeClass({
    index: 3,
    str: 'Vec4x1',
});
const typeList = [Mat44x1, Vec4x2, Vec4x1];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const BoneDataType = Object.freeze({
    Mat44x1,
    Vec4x2,
    Vec4x2Old,
    Vec4x1,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/BufferUse.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/BufferUse.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BufferUse": () => (/* binding */ BufferUse)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class BufferUseClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const GPUInstanceData = new BufferUseClass({
    index: 0,
    str: 'GPUInstanceData',
});
const GPUVertexData = new BufferUseClass({
    index: 1,
    str: 'GPUVertexData',
});
const UBOGeneric = new BufferUseClass({
    index: 2,
    str: 'UBOGeneric',
});
const CPUGeneric = new BufferUseClass({
    index: 3,
    str: 'CPUGeneric',
});
const typeList = [GPUInstanceData, GPUVertexData, UBOGeneric, CPUGeneric];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const BufferUse = Object.freeze({
    GPUInstanceData,
    GPUVertexData,
    UBOGeneric,
    CPUGeneric,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/CameraControllerType.ts":
/*!************************************************************!*\
  !*** ./src/foundation/definitions/CameraControllerType.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraControllerType": () => (/* binding */ CameraControllerType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class CameraControllerTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Orbit = new CameraControllerTypeClass({
    index: 0,
    str: 'Orbit',
});
const WalkThrough = new CameraControllerTypeClass({
    index: 1,
    str: 'WalkThrough',
});
const typeList = [Orbit, WalkThrough];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const CameraControllerType = Object.freeze({
    Orbit,
    WalkThrough,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/CameraType.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/CameraType.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CameraType": () => (/* binding */ CameraType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class CameraTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Perspective = new CameraTypeClass({
    index: 0,
    str: 'Perspective',
});
const Orthographic = new CameraTypeClass({
    index: 1,
    str: 'Orthographic',
});
const Frustum = new CameraTypeClass({ index: 2, str: 'Frustum' });
const typeList = [Perspective, Orthographic, Frustum];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const CameraType = Object.freeze({
    Perspective,
    Orthographic,
    Frustum,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/ComponentType.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/ComponentType.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ComponentType": () => (/* binding */ ComponentType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ComponentTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str, sizeInBytes, }) {
        super({ index, str });
        this.__sizeInBytes = sizeInBytes;
    }
    getSizeInBytes() {
        return this.__sizeInBytes;
    }
    isFloatingPoint() {
        if (this.index === 5126 || // Float
            this.index === 5127 || // Double
            this.index === 0x8d61 // HalfFloat
        ) {
            return true;
        }
        return false;
    }
    isInteger() {
        if (this.index === 5120 || // Byte
            this.index === 5121 || // UnsignedByte
            this.index === 5122 || // Short
            this.index === 5123 || // UnsignedShort
            this.index === 5124 || // Int
            this.index === 5125 // UnsignedInt
        ) {
            return true;
        }
        return false;
    }
}
const Unknown = new ComponentTypeClass({
    index: 5119,
    str: 'UNKNOWN',
    sizeInBytes: 0,
});
const Byte = new ComponentTypeClass({
    index: 5120,
    str: 'BYTE',
    sizeInBytes: 1,
});
const UnsignedByte = new ComponentTypeClass({
    index: 5121,
    str: 'UNSIGNED_BYTE',
    sizeInBytes: 1,
});
const Short = new ComponentTypeClass({
    index: 5122,
    str: 'SHORT',
    sizeInBytes: 2,
});
const UnsignedShort = new ComponentTypeClass({
    index: 5123,
    str: 'UNSIGNED_SHORT',
    sizeInBytes: 2,
});
const Int = new ComponentTypeClass({
    index: 5124,
    str: 'INT',
    sizeInBytes: 4,
});
const UnsignedInt = new ComponentTypeClass({
    index: 5125,
    str: 'UNSIGNED_INT',
    sizeInBytes: 4,
});
const Float = new ComponentTypeClass({
    index: 5126,
    str: 'FLOAT',
    sizeInBytes: 4,
});
const Double = new ComponentTypeClass({
    index: 5127,
    str: 'DOUBLE',
    sizeInBytes: 8,
});
const Bool = new ComponentTypeClass({
    index: 35670,
    str: 'BOOL',
    sizeInBytes: 1,
});
const HalfFloat = new ComponentTypeClass({
    index: 0x8d61,
    str: 'HALF_FLOAT_OES',
    sizeInBytes: 2,
});
const typeList = [
    Unknown,
    Byte,
    UnsignedByte,
    Short,
    UnsignedShort,
    Int,
    UnsignedInt,
    Float,
    Double,
    HalfFloat,
    Bool,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function fromTypedArray(typedArray) {
    if (typedArray instanceof Int8Array) {
        return Byte;
    }
    else if (typedArray instanceof Uint8Array ||
        typedArray instanceof Uint8ClampedArray) {
        return UnsignedByte;
    }
    else if (typedArray instanceof Int16Array) {
        return Short;
    }
    else if (typedArray instanceof Uint16Array) {
        return UnsignedShort;
    }
    else if (typedArray instanceof Int32Array) {
        return Int;
    }
    else if (typedArray instanceof Uint32Array) {
        return UnsignedInt;
    }
    else if (typedArray instanceof Float32Array) {
        return Float;
    }
    else if (typedArray instanceof Float64Array) {
        return Double;
    }
    return Unknown;
}
function toTypedArray(componentType) {
    if (componentType === Byte) {
        return Int8Array;
    }
    else if (componentType === UnsignedByte) {
        return Uint8Array;
    }
    else if (componentType === Short) {
        return Int16Array;
    }
    else if (componentType === UnsignedShort) {
        return Uint16Array;
    }
    else if (componentType === Int) {
        return Int32Array;
    }
    else if (componentType === UnsignedInt) {
        return Uint32Array;
    }
    else if (componentType === Float) {
        return Float32Array;
    }
    else if (componentType === Double) {
        return Float64Array;
    }
    else {
        return undefined;
    }
}
function fromGlslString(str_) {
    let str = str_;
    switch (str_) {
        case 'bool':
            str = 'BOOL';
            break;
        case 'int':
            str = 'INT';
            break;
        case 'float':
            str = 'FLOAT';
            break;
        case 'vec2':
            str = 'FLOAT';
            break;
        case 'vec3':
            str = 'FLOAT';
            break;
        case 'vec4':
            str = 'FLOAT';
            break;
        case 'mat2':
            str = 'FLOAT';
            break;
        case 'mat3':
            str = 'FLOAT';
            break;
        case 'mat4':
            str = 'FLOAT';
            break;
        case 'ivec2':
            str = 'INT';
            break;
        case 'ivec3':
            str = 'INT';
            break;
        case 'ivec4':
            str = 'INT';
            break;
        case 'sampler2D':
            str = 'INT';
            break;
        case 'sampler3D':
            str = 'INT';
            break;
        case 'samplerCube':
            str = 'INT';
            break;
    }
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function toGltf2AccessorComponentType(componentTypeForGltf2) {
    return componentTypeForGltf2.index;
}
const ComponentType = Object.freeze({
    Unknown,
    Byte,
    UnsignedByte,
    Short,
    UnsignedShort,
    Int,
    UnsignedInt,
    Float,
    Double,
    Bool,
    HalfFloat,
    from,
    fromTypedArray,
    toTypedArray,
    toGltf2AccessorComponentType,
    fromString,
    fromGlslString,
});


/***/ }),

/***/ "./src/foundation/definitions/CompositionType.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/CompositionType.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CompositionType": () => (/* binding */ CompositionType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class CompositionTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str, glslStr, hlslStr, numberOfComponents, vec4SizeOfProperty, isArray = false, }) {
        super({ index, str });
        this.__numberOfComponents = numberOfComponents;
        this.__glslStr = glslStr;
        this.__hlslStr = hlslStr;
        this.__vec4SizeOfProperty = vec4SizeOfProperty;
        this.__isArray = isArray;
    }
    getNumberOfComponents() {
        return this.__numberOfComponents;
    }
    getGlslStr(componentType) {
        if (componentType.index === 5126 || // FLOAT
            componentType.index === 5127 || // DOUBLE
            this === CompositionType.Texture2D ||
            this === CompositionType.TextureCube) {
            return this.__glslStr;
        }
        else if (componentType.index === 5120 || // BYTE
            componentType.index === 5122 || // SHORT
            componentType.index === 5124 // INT
        ) {
            if (this === CompositionType.Scalar ||
                this === CompositionType.ScalarArray) {
                return 'int';
            }
            else {
                return 'i' + this.__glslStr;
            }
            // eslint-disable-next-line prettier/prettier
        }
        else if (componentType.index === 35670) { // BOOL
            return 'bool';
        }
        return 'unknown';
    }
    getGlslInitialValue(componentType) {
        if (componentType.index === 5126 || // FLOAT
            componentType.index === 5127 // DOUBLE
        ) {
            if (this === CompositionType.Scalar) {
                return '0.0';
            }
            else {
                if (this.__numberOfComponents === 2) {
                    return this.__glslStr + '(0.0, 0.0)';
                }
                else if (this.__numberOfComponents === 3) {
                    return this.__glslStr + '(0.0, 0.0, 0.0)';
                }
                else if (this.__numberOfComponents === 4) {
                    return this.__glslStr + '(0.0, 0.0, 0.0, 0.0)';
                }
                else if (this.__numberOfComponents === 9) {
                    return (this.__glslStr + '(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)');
                }
                else if (this.__numberOfComponents === 16) {
                    return (this.__glslStr +
                        '(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)');
                }
            }
        }
        else if (componentType.index === 5120 || // BYTE
            componentType.index === 5122 || // SHORT
            componentType.index === 5124 // INT
        ) {
            if (this === CompositionType.Scalar) {
                return '0';
            }
            else {
                if (this.__numberOfComponents === 2) {
                    return this.__glslStr + '(0, 0)';
                }
                else if (this.__numberOfComponents === 3) {
                    return this.__glslStr + '(0, 0, 0)';
                }
                else if (this.__numberOfComponents === 4) {
                    return this.__glslStr + '(0, 0, 0, 0)';
                }
                else if (this.__numberOfComponents === 9) {
                    return this.__glslStr + '(0, 0, 0, 0, 0, 0, 0, 0, 0)';
                }
                else if (this.__numberOfComponents === 16) {
                    return (this.__glslStr + '(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)');
                }
            }
            // eslint-disable-next-line prettier/prettier
        }
        else if (componentType.index === 35670) { // BOOL
            if (this === CompositionType.Scalar) {
                return 'false';
            }
            else {
                if (this.__numberOfComponents === 2) {
                    return this.__glslStr + '(false, false)';
                }
                else if (this.__numberOfComponents === 3) {
                    return this.__glslStr + '(false, false, false)';
                }
                else if (this.__numberOfComponents === 4) {
                    return this.__glslStr + '(false, false, false, false)';
                }
            }
        }
        return 'unknown';
    }
    getVec4SizeOfProperty() {
        return this.__vec4SizeOfProperty;
    }
}
const Unknown = new CompositionTypeClass({
    index: -1,
    str: 'UNKNOWN',
    glslStr: 'unknown',
    hlslStr: 'unknown',
    numberOfComponents: 0,
    vec4SizeOfProperty: 0,
});
const Scalar = new CompositionTypeClass({
    index: 0,
    str: 'SCALAR',
    glslStr: 'float',
    hlslStr: 'float',
    numberOfComponents: 1,
    vec4SizeOfProperty: 1,
});
const Vec2 = new CompositionTypeClass({
    index: 1,
    str: 'VEC2',
    glslStr: 'vec2',
    hlslStr: 'float2',
    numberOfComponents: 2,
    vec4SizeOfProperty: 1,
});
const Vec3 = new CompositionTypeClass({
    index: 2,
    str: 'VEC3',
    glslStr: 'vec3',
    hlslStr: 'float3',
    numberOfComponents: 3,
    vec4SizeOfProperty: 1,
});
const Vec4 = new CompositionTypeClass({
    index: 3,
    str: 'VEC4',
    glslStr: 'vec4',
    hlslStr: 'float4',
    numberOfComponents: 4,
    vec4SizeOfProperty: 1,
});
const Mat2 = new CompositionTypeClass({
    index: 4,
    str: 'MAT2',
    glslStr: 'mat2',
    hlslStr: 'float2x2',
    numberOfComponents: 4,
    vec4SizeOfProperty: 2,
});
const Mat3 = new CompositionTypeClass({
    index: 5,
    str: 'MAT3',
    glslStr: 'mat3',
    hlslStr: 'float3x3',
    numberOfComponents: 9,
    vec4SizeOfProperty: 3,
});
const Mat4 = new CompositionTypeClass({
    index: 6,
    str: 'MAT4',
    glslStr: 'mat4',
    hlslStr: 'float4x4',
    numberOfComponents: 16,
    vec4SizeOfProperty: 4,
});
const Texture2D = new CompositionTypeClass({
    index: 7,
    str: 'TEXTURE_2D',
    glslStr: 'sampler2D',
    hlslStr: 'Texture2D',
    numberOfComponents: 1,
    vec4SizeOfProperty: 1,
});
const TextureCube = new CompositionTypeClass({
    index: 8,
    str: 'TEXTURE_CUBE_MAP',
    glslStr: 'samplerCube',
    hlslStr: 'TextureCube',
    numberOfComponents: 1,
    vec4SizeOfProperty: 1,
});
const ScalarArray = new CompositionTypeClass({
    index: 9,
    str: 'SCALAR_ARRAY',
    glslStr: 'float',
    hlslStr: 'float',
    numberOfComponents: 1,
    vec4SizeOfProperty: 1,
    isArray: true,
});
const Vec2Array = new CompositionTypeClass({
    index: 10,
    str: 'VEC2_ARRAY',
    glslStr: 'vec2',
    hlslStr: 'float2',
    numberOfComponents: 2,
    vec4SizeOfProperty: 1,
    isArray: true,
});
const Vec3Array = new CompositionTypeClass({
    index: 11,
    str: 'VEC3_ARRAY',
    glslStr: 'vec3',
    hlslStr: 'float3',
    numberOfComponents: 3,
    vec4SizeOfProperty: 1,
    isArray: true,
});
const Vec4Array = new CompositionTypeClass({
    index: 12,
    str: 'VEC4_ARRAY',
    glslStr: 'vec4',
    hlslStr: 'float4',
    numberOfComponents: 4,
    vec4SizeOfProperty: 1,
    isArray: true,
});
const Mat4Array = new CompositionTypeClass({
    index: 13,
    str: 'MAT4_ARRAY',
    glslStr: 'mat4',
    hlslStr: 'float4x4',
    numberOfComponents: 16,
    vec4SizeOfProperty: 4,
    isArray: true,
});
const Mat3Array = new CompositionTypeClass({
    index: 14,
    str: 'MAT3_ARRAY',
    glslStr: 'mat3',
    hlslStr: 'float3x3',
    numberOfComponents: 9,
    vec4SizeOfProperty: 3,
    isArray: true,
});
const Mat2Array = new CompositionTypeClass({
    index: 15,
    str: 'MAT2_ARRAY',
    glslStr: 'mat2',
    hlslStr: 'float2x2',
    numberOfComponents: 4,
    vec4SizeOfProperty: 2,
    isArray: true,
});
const typeList = [
    Unknown,
    Scalar,
    Vec2,
    Vec3,
    Vec4,
    Mat2,
    Mat3,
    Mat4,
    Vec2Array,
    Vec3Array,
    Vec4Array,
    ScalarArray,
    Mat2Array,
    Mat3Array,
    Mat4Array,
    Texture2D,
    TextureCube,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function vectorFrom(componentN) {
    let str = '';
    switch (componentN) {
        case 1:
            str = 'scalar';
            break;
        case 2:
            str = 'vec2';
            break;
        case 3:
            str = 'vec3';
            break;
        case 4:
            str = 'vec4';
            break;
        default:
            console.error('not found appropreate Vectors');
    }
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function fromGlslString(str_) {
    let str = str_;
    switch (str_) {
        case 'bool':
            str = 'scalar';
            break;
        case 'int':
            str = 'scalar';
            break;
        case 'float':
            str = 'scalar';
            break;
        case 'ivec2':
            str = 'vec2';
            break;
        case 'ivec3':
            str = 'vec3';
            break;
        case 'ivec4':
            str = 'vec4';
            break;
        case 'sampler2D':
            str = 'TEXTURE_2D';
            break;
        case 'samplerCube':
            str = 'TEXTURE_CUBE_MAP';
            break;
    }
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function toGltf2AccessorCompositionTypeString(componentN) {
    switch (componentN) {
        case 1:
            return 'SCALAR';
        case 2:
            return 'VEC2';
        case 3:
            return 'VEC3';
        case 4:
            return 'VEC4';
        case 9:
            return 'MAT3';
        case 16:
            return 'MAT4';
        default:
            throw new Error('Invalid componentN');
    }
}
function toGltf2AnimationAccessorCompositionTypeString(componentN) {
    switch (componentN) {
        case 1:
            return 'SCALAR';
        case 2:
            return 'VEC2';
        case 3:
            return 'VEC3';
        case 4:
            return 'VEC4';
        default:
            throw new Error('Invalid componentN');
    }
}
function toGltf2SquareMatrixAccessorCompositionTypeString(componentN) {
    switch (componentN) {
        case 4:
            return 'VEC4';
        case 9:
            return 'MAT3';
        case 16:
            return 'MAT4';
        default:
            throw new Error('Invalid componentN');
    }
}
function toGltf2AnimationAccessorCompositionType(componentN) {
    switch (componentN) {
        case 1:
            return Scalar;
        case 2:
            return Vec2;
        case 3:
            return Vec3;
        case 4:
            return Vec4;
        default:
            throw new Error('Invalid componentN');
    }
}
function isArray(compositionType) {
    if (compositionType === ScalarArray ||
        compositionType === Vec2Array ||
        compositionType === Vec3Array ||
        compositionType === Vec4Array ||
        compositionType === Mat4Array ||
        compositionType === Mat3Array ||
        compositionType === Mat2Array) {
        return true;
    }
    else {
        return false;
    }
}
function isTexture(compositionType) {
    if (compositionType === Texture2D || compositionType === TextureCube) {
        return true;
    }
    else {
        return false;
    }
}
const CompositionType = Object.freeze({
    Unknown,
    Scalar,
    Vec2,
    Vec3,
    Vec4,
    Mat2,
    Mat3,
    Mat4,
    ScalarArray,
    Vec2Array,
    Vec3Array,
    Vec4Array,
    Mat2Array,
    Mat3Array,
    Mat4Array,
    Texture2D,
    TextureCube,
    from,
    fromString,
    vectorFrom,
    fromGlslString,
    isArray,
    isTexture,
    toGltf2AnimationAccessorCompositionType,
    toGltf2AccessorCompositionTypeString,
    toGltf2AnimationAccessorCompositionTypeString,
    toGltf2SquareMatrixAccessorCompositionTypeString,
});


/***/ }),

/***/ "./src/foundation/definitions/CompressionTextureType.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/definitions/CompressionTextureType.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CompressionTextureType": () => (/* binding */ CompressionTextureType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class CompressionTextureTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const ASTC_RGBA_4x4 = new CompressionTextureTypeClass({
    index: 37808,
    str: 'COMPRESSED_RGBA_ASTC_4x4_KHR',
});
const ASTC_RGBA_5x4 = new CompressionTextureTypeClass({
    index: 37809,
    str: 'COMPRESSED_RGBA_ASTC_5x4_KHR',
});
const ASTC_RGBA_5x5 = new CompressionTextureTypeClass({
    index: 37810,
    str: 'COMPRESSED_RGBA_ASTC_5x5_KHR',
});
const ASTC_RGBA_6x5 = new CompressionTextureTypeClass({
    index: 37811,
    str: 'COMPRESSED_RGBA_ASTC_6x5_KHR',
});
const ASTC_RGBA_6x6 = new CompressionTextureTypeClass({
    index: 37812,
    str: 'COMPRESSED_RGBA_ASTC_6x6_KHR',
});
const ASTC_RGBA_8x5 = new CompressionTextureTypeClass({
    index: 37813,
    str: 'COMPRESSED_RGBA_ASTC_8x5_KHR',
});
const ASTC_RGBA_8x6 = new CompressionTextureTypeClass({
    index: 37814,
    str: 'COMPRESSED_RGBA_ASTC_8x6_KHR',
});
const ASTC_RGBA_8x8 = new CompressionTextureTypeClass({
    index: 37815,
    str: 'COMPRESSED_RGBA_ASTC_8x8_KHR',
});
const ASTC_RGBA_10x5 = new CompressionTextureTypeClass({
    index: 37816,
    str: 'COMPRESSED_RGBA_ASTC_10x5_KHR',
});
const ASTC_RGBA_10x6 = new CompressionTextureTypeClass({
    index: 37817,
    str: 'COMPRESSED_RGBA_ASTC_10x6_KHR',
});
const ASTC_RGBA_10x8 = new CompressionTextureTypeClass({
    index: 37818,
    str: 'COMPRESSED_RGBA_ASTC_10x8_KHR',
});
const ASTC_RGBA_10x10 = new CompressionTextureTypeClass({
    index: 37819,
    str: 'COMPRESSED_RGBA_ASTC_10x10_KHR',
});
const ASTC_RGBA_12x10 = new CompressionTextureTypeClass({
    index: 37820,
    str: 'COMPRESSED_RGBA_ASTC_12x10_KHR',
});
const ASTC_RGBA_12x12 = new CompressionTextureTypeClass({
    index: 37821,
    str: 'COMPRESSED_RGBA_ASTC_12x12_KHR',
});
const ASTC_SRGB_4x4 = new CompressionTextureTypeClass({
    index: 37840,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR',
});
const ASTC_SRGB_5x4 = new CompressionTextureTypeClass({
    index: 37841,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR',
});
const ASTC_SRGB_5x5 = new CompressionTextureTypeClass({
    index: 37842,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR',
});
const ASTC_SRGB_6x5 = new CompressionTextureTypeClass({
    index: 37843,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR',
});
const ASTC_SRGB_6x6 = new CompressionTextureTypeClass({
    index: 37844,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR',
});
const ASTC_SRGB_8x5 = new CompressionTextureTypeClass({
    index: 37845,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR',
});
const ASTC_SRGB_8x6 = new CompressionTextureTypeClass({
    index: 37846,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR',
});
const ASTC_SRGB_8x8 = new CompressionTextureTypeClass({
    index: 37847,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR',
});
const ASTC_SRGB_10x5 = new CompressionTextureTypeClass({
    index: 37848,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR',
});
const ASTC_SRGB_10x6 = new CompressionTextureTypeClass({
    index: 37849,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR',
});
const ASTC_SRGB_10x8 = new CompressionTextureTypeClass({
    index: 37850,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR',
});
const ASTC_SRGB_10x10 = new CompressionTextureTypeClass({
    index: 37851,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR',
});
const ASTC_SRGB_12x10 = new CompressionTextureTypeClass({
    index: 37852,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR',
});
const ASTC_SRGB_12x12 = new CompressionTextureTypeClass({
    index: 37853,
    str: 'COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR',
});
const S3TC_RGB_DXT1 = new CompressionTextureTypeClass({
    index: 33776,
    str: 'COMPRESSED_RGB_S3TC_DXT1_EXT',
});
const S3TC_RGBA_DXT1 = new CompressionTextureTypeClass({
    index: 33777,
    str: 'COMPRESSED_RGBA_S3TC_DXT1_EXT',
});
const S3TC_RGBA_DXT3 = new CompressionTextureTypeClass({
    index: 33778,
    str: 'COMPRESSED_RGBA_S3TC_DXT3_EXT',
});
const S3TC_RGBA_DXT5 = new CompressionTextureTypeClass({
    index: 33779,
    str: 'COMPRESSED_RGBA_S3TC_DXT5_EXT',
});
const BPTC_RGBA = new CompressionTextureTypeClass({
    index: 36492,
    str: 'COMPRESSED_RGBA_BPTC_UNORM_EXT',
});
const PVRTC_RGBA_4BPPV1 = new CompressionTextureTypeClass({
    index: 35842,
    str: 'COMPRESSED_RGBA_PVRTC_4BPPV1_IMG',
});
const PVRTC_RGB_4BPPV1 = new CompressionTextureTypeClass({
    index: 35840,
    str: 'COMPRESSED_RGB_PVRTC_4BPPV1_IMG',
});
const ETC2_RGBA8_EAC = new CompressionTextureTypeClass({
    index: 37496,
    str: 'COMPRESSED_RGBA8_ETC2_EAC',
});
const ETC2_RGB8 = new CompressionTextureTypeClass({
    index: 37492,
    str: 'COMPRESSED_RGB8_ETC2',
});
const ETC1_RGB = new CompressionTextureTypeClass({
    index: 36196,
    str: 'COMPRESSED_RGB_ETC1_WEBGL',
});
const RGBA8_EXT = new CompressionTextureTypeClass({
    index: 32856,
    str: 'RGBA8_EXT',
});
const typeList = [
    ASTC_RGBA_4x4,
    ASTC_RGBA_5x4,
    ASTC_RGBA_5x5,
    ASTC_RGBA_6x5,
    ASTC_RGBA_6x6,
    ASTC_RGBA_8x5,
    ASTC_RGBA_8x6,
    ASTC_RGBA_8x8,
    ASTC_RGBA_10x5,
    ASTC_RGBA_10x6,
    ASTC_RGBA_10x8,
    ASTC_RGBA_10x10,
    ASTC_RGBA_12x10,
    ASTC_RGBA_12x12,
    ASTC_SRGB_4x4,
    ASTC_SRGB_5x4,
    ASTC_SRGB_5x5,
    ASTC_SRGB_6x5,
    ASTC_SRGB_6x6,
    ASTC_SRGB_8x5,
    ASTC_SRGB_8x6,
    ASTC_SRGB_8x8,
    ASTC_SRGB_10x5,
    ASTC_SRGB_10x6,
    ASTC_SRGB_10x8,
    ASTC_SRGB_10x10,
    ASTC_SRGB_12x10,
    ASTC_SRGB_12x12,
    S3TC_RGB_DXT1,
    S3TC_RGBA_DXT1,
    S3TC_RGBA_DXT3,
    S3TC_RGBA_DXT5,
    BPTC_RGBA,
    PVRTC_RGBA_4BPPV1,
    PVRTC_RGB_4BPPV1,
    ETC2_RGBA8_EAC,
    ETC2_RGB8,
    ETC1_RGB,
    RGBA8_EXT,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const CompressionTextureType = Object.freeze({
    ASTC_RGBA_4x4,
    ASTC_RGBA_5x4,
    ASTC_RGBA_5x5,
    ASTC_RGBA_6x5,
    ASTC_RGBA_6x6,
    ASTC_RGBA_8x5,
    ASTC_RGBA_8x6,
    ASTC_RGBA_8x8,
    ASTC_RGBA_10x5,
    ASTC_RGBA_10x6,
    ASTC_RGBA_10x8,
    ASTC_RGBA_10x10,
    ASTC_RGBA_12x10,
    ASTC_RGBA_12x12,
    ASTC_SRGB_4x4,
    ASTC_SRGB_5x4,
    ASTC_SRGB_5x5,
    ASTC_SRGB_6x5,
    ASTC_SRGB_6x6,
    ASTC_SRGB_8x5,
    ASTC_SRGB_8x6,
    ASTC_SRGB_8x8,
    ASTC_SRGB_10x5,
    ASTC_SRGB_10x6,
    ASTC_SRGB_10x8,
    ASTC_SRGB_10x10,
    ASTC_SRGB_12x10,
    ASTC_SRGB_12x12,
    S3TC_RGB_DXT1,
    S3TC_RGBA_DXT1,
    S3TC_RGBA_DXT3,
    S3TC_RGBA_DXT5,
    BPTC_RGBA,
    PVRTC_RGBA_4BPPV1,
    PVRTC_RGB_4BPPV1,
    ETC2_RGBA8_EAC,
    ETC2_RGB8,
    ETC1_RGB,
    RGBA8_EXT,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/FileType.ts":
/*!************************************************!*\
  !*** ./src/foundation/definitions/FileType.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FileType": () => (/* binding */ FileType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class FileTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str, ext, brand, }) {
        super({ index, str });
        this.extension = ext;
        this.brand = brand;
    }
}
const Unknown = new FileTypeClass({
    index: -1,
    str: 'unknown',
    ext: 'unknown',
    brand: 'UnKnown',
});
const Gltf = new FileTypeClass({
    index: 0,
    str: 'gltf',
    ext: 'gltf',
    brand: 'glTF',
});
const GltfBinary = new FileTypeClass({
    index: 1,
    str: 'glb',
    ext: 'glb',
    brand: 'glTF',
});
const VRM = new FileTypeClass({
    index: 2,
    str: 'vrm',
    ext: 'vrm',
    brand: 'VRM',
});
const Draco = new FileTypeClass({
    index: 3,
    str: 'drc',
    ext: 'drc',
    brand: 'Draco',
});
const EffekseerEffect = new FileTypeClass({
    index: 4,
    str: 'efk',
    ext: 'efk',
    brand: 'EffekseerEffect',
});
const typeList = [Unknown, Gltf, GltfBinary, VRM, Draco, EffekseerEffect];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    const filetype = (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
    if (filetype != null) {
        return filetype;
    }
    else {
        return Unknown;
    }
}
function isGltfOrGlb(file) {
    if (file === Gltf || file === GltfBinary) {
        return true;
    }
    else {
        return false;
    }
}
const FileType = Object.freeze({
    Unknown,
    Gltf,
    GltfBinary,
    VRM,
    Draco,
    EffekseerEffect,
    from,
    fromString,
    isGltfOrGlb,
});


/***/ }),

/***/ "./src/foundation/definitions/HdriFormat.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/HdriFormat.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HdriFormat": () => (/* binding */ HdriFormat)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class HdriFormatClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const LDR_SRGB = new HdriFormatClass({
    index: 0,
    str: '.ldr_srgb',
});
const LDR_LINEAR = new HdriFormatClass({
    index: 1,
    str: '.ldr_linear',
});
const HDR_LINEAR = new HdriFormatClass({ index: 2, str: '.hdr' });
const RGBE_PNG = new HdriFormatClass({
    index: 3,
    str: '.rgbe.png',
});
const RGB9_E5_PNG = new HdriFormatClass({
    index: 4,
    str: '.rgb9_e5.png',
});
const OpenEXR = new HdriFormatClass({ index: 5, str: '.exr' });
const HdriFormat = Object.freeze({
    LDR_SRGB,
    LDR_LINEAR,
    HDR_LINEAR,
    RGBE_PNG,
    RGB9_E5_PNG,
    OpenEXR,
});


/***/ }),

/***/ "./src/foundation/definitions/LightType.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/LightType.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LightType": () => (/* binding */ LightType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class LightTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Directional = new LightTypeClass({
    index: 0,
    str: 'Directional',
});
const Point = new LightTypeClass({ index: 1, str: 'Point' });
const Spot = new LightTypeClass({ index: 2, str: 'Spot' });
const Ambient = new LightTypeClass({ index: 3, str: 'Ambient' });
const typeList = [Point, Directional, Spot, Ambient];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const LightType = Object.freeze({
    Point,
    Directional,
    Spot,
    Ambient,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/PixelFormat.ts":
/*!***************************************************!*\
  !*** ./src/foundation/definitions/PixelFormat.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PixelFormat": () => (/* binding */ PixelFormat)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class PixelFormatClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const DepthComponent = new PixelFormatClass({
    index: 0x1902,
    str: 'DEPTH_COMPONENT',
});
const Alpha = new PixelFormatClass({
    index: 0x1906,
    str: 'ALPHA',
});
const RGB = new PixelFormatClass({ index: 0x1907, str: 'RGB' });
const RGBA = new PixelFormatClass({
    index: 0x1908,
    str: 'RGBA',
});
const Luminance = new PixelFormatClass({
    index: 0x1909,
    str: 'LUMINANCE',
});
const LuminanceAlpha = new PixelFormatClass({
    index: 0x190a,
    str: 'LUMINANCE_ALPHA',
});
const PixelFormat = Object.freeze({
    DepthComponent,
    Alpha,
    RGB,
    RGBA,
    Luminance,
    LuminanceAlpha,
});


/***/ }),

/***/ "./src/foundation/definitions/PrimitiveMode.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/definitions/PrimitiveMode.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PrimitiveMode": () => (/* binding */ PrimitiveMode)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class PrimitiveModeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Unknown = new PrimitiveModeClass({
    index: -1,
    str: 'UNKNOWN',
});
const Points = new PrimitiveModeClass({
    index: 0,
    str: 'POINTS',
});
const Lines = new PrimitiveModeClass({
    index: 1,
    str: 'LINES',
});
const LineLoop = new PrimitiveModeClass({
    index: 2,
    str: 'LINE_LOOP',
});
const LineStrip = new PrimitiveModeClass({
    index: 3,
    str: 'LINE_STRIP',
});
const Triangles = new PrimitiveModeClass({
    index: 4,
    str: 'TRIANGLES',
});
const TriangleStrip = new PrimitiveModeClass({
    index: 5,
    str: 'TRIANGLE_STRIP',
});
const TriangleFan = new PrimitiveModeClass({
    index: 6,
    str: 'TRIANGLE_FAN',
});
const typeList = [
    Unknown,
    Points,
    Lines,
    LineLoop,
    LineStrip,
    Triangles,
    TriangleStrip,
    TriangleFan,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
const PrimitiveMode = Object.freeze({
    Unknown,
    Points,
    Lines,
    LineLoop,
    LineStrip,
    Triangles,
    TriangleStrip,
    TriangleFan,
    from,
});


/***/ }),

/***/ "./src/foundation/definitions/ProcessApproach.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ProcessApproach.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProcessApproach": () => (/* binding */ ProcessApproach),
/* harmony export */   "ProcessApproachClass": () => (/* binding */ ProcessApproachClass)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ProcessApproachClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
    get webGLVersion() {
        switch (this) {
            case UniformWebGL2:
            case FastestWebGL2:
                return 2;
            case UniformWebGL1:
            case FastestWebGL1:
                return 1;
            default:
                return 0;
        }
    }
}
const None = new ProcessApproachClass({
    index: 0,
    str: 'NONE',
});
const UniformWebGL1 = new ProcessApproachClass({
    index: 1,
    str: 'UNIFORM_WEBGL1',
});
const UniformWebGL2 = new ProcessApproachClass({
    index: 2,
    str: 'UNIFORM_WEBGL2',
});
const FastestWebGL1 = new ProcessApproachClass({
    index: 7,
    str: 'FASTEST_WEBGL1',
});
const FastestWebGL2 = new ProcessApproachClass({
    index: 8,
    str: 'FASTEST_WEBGL2',
});
const isFastestApproach = (processApproach) => {
    switch (processApproach) {
        case FastestWebGL1:
        case FastestWebGL2:
            return true;
        default:
            return false;
    }
};
const isUniformApproach = (processApproach) => {
    switch (processApproach) {
        case UniformWebGL1:
        case UniformWebGL2:
            return true;
        default:
            return false;
    }
};
const isWebGL2Approach = (processApproach) => {
    switch (processApproach) {
        case UniformWebGL2:
        case FastestWebGL2:
            return true;
        default:
            return false;
    }
};
const ProcessApproach = Object.freeze({
    isFastestApproach,
    isUniformApproach,
    None,
    UniformWebGL1,
    UniformWebGL2,
    FastestWebGL1,
    FastestWebGL2,
    isWebGL2Approach,
});


/***/ }),

/***/ "./src/foundation/definitions/ProcessStage.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ProcessStage.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProcessStage": () => (/* binding */ ProcessStage)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ProcessStageClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str, methodName, }) {
        super({ index, str });
        this.methodName = methodName;
    }
}
const Unknown = new ProcessStageClass({
    index: -1,
    str: 'UNKNOWN',
    methodName: '$unknown',
});
const Create = new ProcessStageClass({
    index: 0,
    str: 'CREATE',
    methodName: '$create',
});
const Load = new ProcessStageClass({
    index: 1,
    str: 'LOAD',
    methodName: '$load',
});
const Mount = new ProcessStageClass({
    index: 2,
    str: 'MOUNT',
    methodName: '$mount',
});
const Logic = new ProcessStageClass({
    index: 3,
    str: 'LOGIC',
    methodName: '$logic',
});
const PreRender = new ProcessStageClass({
    index: 4,
    str: 'PRE_RENDER',
    methodName: '$prerender',
});
const Render = new ProcessStageClass({
    index: 5,
    str: 'RENDER',
    methodName: '$render',
});
const Unmount = new ProcessStageClass({
    index: 6,
    str: 'UNMOUNT',
    methodName: '$unmount',
});
const Discard = new ProcessStageClass({
    index: 7,
    str: 'DISCARD',
    methodName: '$discard',
});
const typeList = [
    Unknown,
    Create,
    Load,
    Mount,
    Logic,
    PreRender,
    Render,
    Unmount,
    Discard,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
const ProcessStage = Object.freeze({
    Unknown,
    Create,
    Load,
    Mount,
    Logic,
    PreRender,
    Render,
    Unmount,
    Discard,
    from,
});


/***/ }),

/***/ "./src/foundation/definitions/RenderBufferTarget.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/definitions/RenderBufferTarget.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderBufferTarget": () => (/* binding */ RenderBufferTarget)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class RenderBufferTargetClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
    webGLConstantValue() {
        if (this.index === -2) {
            return 0x0; // gl.NONE
        }
        else if (this.index === -1) {
            return 0x0405; // gl.BACK
        }
        return 0x8ce0 + this.index; // GL_COLOR_ATTACHMENT0 = 0x8ce0
    }
}
const None = new RenderBufferTargetClass({
    index: -2,
    str: 'NONE',
});
const Back = new RenderBufferTargetClass({
    index: -1,
    str: 'BACK',
});
const ColorAttachment0 = new RenderBufferTargetClass({
    index: 0,
    str: 'COLOR_ATTACHMENT0',
});
const ColorAttachment1 = new RenderBufferTargetClass({
    index: 1,
    str: 'COLOR_ATTACHMENT1',
});
const ColorAttachment2 = new RenderBufferTargetClass({
    index: 2,
    str: 'COLOR_ATTACHMENT2',
});
const ColorAttachment3 = new RenderBufferTargetClass({
    index: 3,
    str: 'COLOR_ATTACHMENT3',
});
const ColorAttachment4 = new RenderBufferTargetClass({
    index: 4,
    str: 'COLOR_ATTACHMENT4',
});
const ColorAttachment5 = new RenderBufferTargetClass({
    index: 5,
    str: 'COLOR_ATTACHMENT5',
});
const ColorAttachment6 = new RenderBufferTargetClass({
    index: 6,
    str: 'COLOR_ATTACHMENT6',
});
const ColorAttachment7 = new RenderBufferTargetClass({
    index: 7,
    str: 'COLOR_ATTACHMENT7',
});
const ColorAttachment8 = new RenderBufferTargetClass({
    index: 8,
    str: 'COLOR_ATTACHMENT8',
});
const ColorAttachment9 = new RenderBufferTargetClass({
    index: 9,
    str: 'COLOR_ATTACHMENT9',
});
const ColorAttachment10 = new RenderBufferTargetClass({
    index: 10,
    str: 'COLOR_ATTACHMENT10',
});
const ColorAttachment11 = new RenderBufferTargetClass({
    index: 11,
    str: 'COLOR_ATTACHMENT11',
});
const ColorAttachment12 = new RenderBufferTargetClass({
    index: 12,
    str: 'COLOR_ATTACHMENT12',
});
const ColorAttachment13 = new RenderBufferTargetClass({
    index: 13,
    str: 'COLOR_ATTACHMENT13',
});
const ColorAttachment14 = new RenderBufferTargetClass({
    index: 14,
    str: 'COLOR_ATTACHMENT14',
});
const ColorAttachment15 = new RenderBufferTargetClass({
    index: 15,
    str: 'COLOR_ATTACHMENT15',
});
const typeList = [
    None,
    Back,
    ColorAttachment0,
    ColorAttachment1,
    ColorAttachment2,
    ColorAttachment3,
    ColorAttachment4,
    ColorAttachment5,
    ColorAttachment6,
    ColorAttachment7,
    ColorAttachment8,
    ColorAttachment9,
    ColorAttachment10,
    ColorAttachment11,
    ColorAttachment12,
    ColorAttachment13,
    ColorAttachment14,
    ColorAttachment15,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
const RenderBufferTarget = Object.freeze({
    None,
    Back,
    ColorAttachment0,
    ColorAttachment1,
    ColorAttachment2,
    ColorAttachment3,
    ColorAttachment4,
    ColorAttachment5,
    ColorAttachment6,
    ColorAttachment7,
    ColorAttachment8,
    ColorAttachment9,
    ColorAttachment10,
    ColorAttachment11,
    ColorAttachment12,
    ColorAttachment13,
    ColorAttachment14,
    ColorAttachment15,
    from,
});


/***/ }),

/***/ "./src/foundation/definitions/ShaderNode.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/ShaderNode.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderNode": () => (/* binding */ ShaderNode)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShaderNodeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const ClassicShading = new ShaderNodeClass({
    index: 0,
    str: 'ClassicShading',
});
const PBRShading = new ShaderNodeClass({
    index: 1,
    str: 'PBRShading',
});
new ShaderNodeClass({ index: 2, str: 'Lerp' });
new ShaderNodeClass({ index: 3, str: 'Add' });
const typeList = [ClassicShading, PBRShading];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const ShaderNode = Object.freeze({
    ClassicShading,
    PBRShading,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/ShaderSemantics.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/ShaderSemantics.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderSemantics": () => (/* binding */ ShaderSemantics),
/* harmony export */   "ShaderSemanticsClass": () => (/* binding */ ShaderSemanticsClass)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");
/* harmony import */ var _CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CompositionType */ "./src/foundation/definitions/CompositionType.ts");


class ShaderSemanticsClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ str }) {
        super({
            index: ++ShaderSemanticsClass.__indexCount * ShaderSemanticsClass._scale,
            str,
            noCheckStrUnique: true,
        });
        ShaderSemanticsClass.__classes[this.index] = this;
    }
    static getShaderSemanticByIndex(index) {
        return this.__classes[Math.abs(index) - (Math.abs(index) % this._scale)];
    }
    static isNonArrayShaderSemanticIndex(index) {
        if (index >= this._scale) {
            return true;
        }
        else {
            return false;
        }
    }
    static isArrayAndZeroIndexShaderSemanticIndex(index) {
        if (index < 0 && Math.abs(index) % ShaderSemanticsClass._scale === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    static isArrayAndNonZeroIndexShaderSemanticIndex(index) {
        if (index < 0 && Math.abs(index) % ShaderSemanticsClass._scale !== 0) {
            return true;
        }
        else {
            return false;
        }
    }
    static getIndexCount() {
        return ShaderSemanticsClass.__indexCount;
    }
}
ShaderSemanticsClass.__indexCount = -1;
ShaderSemanticsClass._scale = 10000;
ShaderSemanticsClass.__classes = [];
const WorldMatrix = new ShaderSemanticsClass({
    str: 'worldMatrix',
});
const ViewMatrix = new ShaderSemanticsClass({
    str: 'viewMatrix',
});
const EnableViewMatrix = new ShaderSemanticsClass({
    str: 'enableViewMatrix',
});
const ProjectionMatrix = new ShaderSemanticsClass({
    str: 'projectionMatrix',
});
const NormalMatrix = new ShaderSemanticsClass({
    str: 'normalMatrix',
});
const BoneMatrix = new ShaderSemanticsClass({
    str: 'boneMatrix',
});
const BaseColorFactor = new ShaderSemanticsClass({
    str: 'baseColorFactor',
});
const BaseColorTexture = new ShaderSemanticsClass({
    str: 'baseColorTexture',
});
const NormalTexture = new ShaderSemanticsClass({
    str: 'normalTexture',
});
const MetallicRoughnessTexture = new ShaderSemanticsClass({
    str: 'metallicRoughnessTexture',
});
const OcclusionTexture = new ShaderSemanticsClass({
    str: 'occlusionTexture',
});
const EmissiveTexture = new ShaderSemanticsClass({
    str: 'emissiveTexture',
});
const LightNumber = new ShaderSemanticsClass({
    str: 'lightNumber',
});
const LightPosition = new ShaderSemanticsClass({
    str: 'lightPosition',
});
const LightDirection = new ShaderSemanticsClass({
    str: 'lightDirection',
});
const LightIntensity = new ShaderSemanticsClass({
    str: 'lightIntensity',
});
const MetallicRoughnessFactor = new ShaderSemanticsClass({
    str: 'metallicRoughnessFactor',
});
const BrdfLutTexture = new ShaderSemanticsClass({
    str: 'brdfLutTexture',
});
const DiffuseEnvTexture = new ShaderSemanticsClass({
    str: 'diffuseEnvTexture',
});
const SpecularEnvTexture = new ShaderSemanticsClass({
    str: 'specularEnvTexture',
});
const InverseEnvironment = new ShaderSemanticsClass({
    str: 'inverseEnvironment',
});
const IBLParameter = new ShaderSemanticsClass({
    str: 'iblParameter',
});
const ViewPosition = new ShaderSemanticsClass({
    str: 'viewPosition',
});
const Wireframe = new ShaderSemanticsClass({
    str: 'wireframe',
});
const DiffuseColorFactor = new ShaderSemanticsClass({
    str: 'diffuseColorFactor',
});
const DiffuseColorTexture = new ShaderSemanticsClass({
    str: 'diffuseColorTexture',
});
const SpecularColorFactor = new ShaderSemanticsClass({
    str: 'specularColorFactor',
});
const SpecularColorTexture = new ShaderSemanticsClass({
    str: 'specularColorTexture',
});
const Shininess = new ShaderSemanticsClass({
    str: 'shininess',
});
const ShadingModel = new ShaderSemanticsClass({
    str: 'shadingModel',
});
const SkinningMode = new ShaderSemanticsClass({
    str: 'skinningMode',
});
const GeneralTexture = new ShaderSemanticsClass({
    str: 'generalTexture',
});
const VertexAttributesExistenceArray = new ShaderSemanticsClass({ str: 'vertexAttributesExistenceArray' });
const BoneQuaternion = new ShaderSemanticsClass({
    str: 'boneQuaternion',
});
const BoneTranslateScale = new ShaderSemanticsClass({
    str: 'boneTranslateScale',
});
const BoneTranslatePackedQuat = new ShaderSemanticsClass({
    str: 'boneTranslatePackedQuat',
});
const BoneScalePackedQuat = new ShaderSemanticsClass({
    str: 'boneScalePackedQuat',
});
const BoneCompressedChunk = new ShaderSemanticsClass({
    str: 'boneCompressedChunk',
});
const BoneCompressedInfo = new ShaderSemanticsClass({
    str: 'boneCompressedInfo',
});
const PointSize = new ShaderSemanticsClass({
    str: 'pointSize',
});
const ColorEnvTexture = new ShaderSemanticsClass({
    str: 'colorEnvTexture',
});
const PointDistanceAttenuation = new ShaderSemanticsClass({
    str: 'pointDistanceAttenuation',
});
const HDRIFormat = new ShaderSemanticsClass({
    str: 'hdriFormat',
});
const ScreenInfo = new ShaderSemanticsClass({
    str: 'screenInfo',
});
const DepthTexture = new ShaderSemanticsClass({
    str: 'depthTexture',
});
const LightViewProjectionMatrix = new ShaderSemanticsClass({ str: 'lightViewProjectionMatrix' });
const Anisotropy = new ShaderSemanticsClass({
    str: 'anisotropy',
});
const ClearCoatParameter = new ShaderSemanticsClass({
    str: 'clearcoatParameter',
});
const SheenParameter = new ShaderSemanticsClass({
    str: 'sheenParameter',
});
const SpecularGlossinessFactor = new ShaderSemanticsClass({
    str: 'specularGlossinessFactor',
});
const SpecularGlossinessTexture = new ShaderSemanticsClass({ str: 'specularGlossinessTexture' });
const EntityUID = new ShaderSemanticsClass({
    str: 'entityUID',
});
const MorphTargetNumber = new ShaderSemanticsClass({
    str: 'morphTargetNumber',
});
// the 16byteoffset (16byte unit offset) of MorphData in DataTexture
const DataTextureMorphOffsetPosition = new ShaderSemanticsClass({ str: 'dataTextureMorphOffsetPosition' });
const MorphWeights = new ShaderSemanticsClass({
    str: 'morphWeights',
});
const CurrentComponentSIDs = new ShaderSemanticsClass({
    str: 'currentComponentSIDs',
});
const AlphaCutoff = new ShaderSemanticsClass({
    str: 'alphaCutoff',
});
const AlphaTexture = new ShaderSemanticsClass({
    str: 'alphaTexture',
});
const MakeOutputSrgb = new ShaderSemanticsClass({
    str: 'makeOutputSrgb',
});
const FramebufferWidth = new ShaderSemanticsClass({
    str: 'framebufferWidth',
});
const ClearCoatFactor = new ShaderSemanticsClass({
    str: 'clearCoatFactor',
});
const ClearCoatTexture = new ShaderSemanticsClass({
    str: 'clearCoatTexture',
});
const ClearCoatRoughnessFactor = new ShaderSemanticsClass({
    str: 'clearCoatRoughnessFactor',
});
const ClearCoatRoughnessTexture = new ShaderSemanticsClass({
    str: 'clearCoatRoughnessTexture',
});
const ClearCoatNormalTexture = new ShaderSemanticsClass({
    str: 'clearCoatNormalTexture',
});
const TransmissionFactor = new ShaderSemanticsClass({
    str: 'transmissionFactor',
});
const TransmissionTexture = new ShaderSemanticsClass({
    str: 'transmissionTexture',
});
const BackBufferTexture = new ShaderSemanticsClass({
    str: 'backBufferTexture',
});
const BackBufferTextureSize = new ShaderSemanticsClass({
    str: 'backBufferTextureSize',
});
const ThicknessFactor = new ShaderSemanticsClass({
    str: 'thicknessFactor',
});
const ThicknessTexture = new ShaderSemanticsClass({
    str: 'thicknessTexture',
});
const AttenuationDistance = new ShaderSemanticsClass({
    str: 'attenuationDistance',
});
const AttenuationColor = new ShaderSemanticsClass({
    str: 'attenuationColor',
});
const IsOutputHDR = new ShaderSemanticsClass({
    str: 'isOutputHDR',
});
const BaseColorTextureTransform = new ShaderSemanticsClass({
    str: 'baseColorTextureTransform',
});
const BaseColorTextureRotation = new ShaderSemanticsClass({
    str: 'baseColorTextureRotation',
});
const NormalTextureTransform = new ShaderSemanticsClass({
    str: 'normalTextureTransform',
});
const NormalTextureRotation = new ShaderSemanticsClass({
    str: 'normalTextureRotation',
});
const MetallicRoughnessTextureTransform = new ShaderSemanticsClass({
    str: 'metallicRoughnessTextureTransform',
});
const MetallicRoughnessTextureRotation = new ShaderSemanticsClass({
    str: 'metallicRoughnessTextureRotation',
});
const NormalTexcoordIndex = new ShaderSemanticsClass({
    str: 'normalTexcoordIndex',
});
const BaseColorTexcoordIndex = new ShaderSemanticsClass({
    str: 'baseColorTexcoordIndex',
});
const MetallicRoughnessTexcoordIndex = new ShaderSemanticsClass({
    str: 'metallicRoughnessTexcoordIndex',
});
const OcclusionTexcoordIndex = new ShaderSemanticsClass({
    str: 'occlusionTexcoordIndex',
});
const EmissiveTexcoordIndex = new ShaderSemanticsClass({
    str: 'emissiveTexcoordIndex',
});
const NormalScale = new ShaderSemanticsClass({ str: 'normalScale' });
const OcclusionStrength = new ShaderSemanticsClass({
    str: 'occlusionStrength',
});
const envRotation = new ShaderSemanticsClass({ str: 'envRotation' });
const EnvHdriFormat = new ShaderSemanticsClass({ str: 'envHdriFormat' });
const VrState = new ShaderSemanticsClass({ str: 'vrState' });
const EnableLinearToSrgb = new ShaderSemanticsClass({ str: 'enableLinearToSrgb' });
const typeList = [
    WorldMatrix,
    ViewMatrix,
    EnableViewMatrix,
    ProjectionMatrix,
    NormalMatrix,
    BoneMatrix,
    BaseColorFactor,
    BaseColorTexture,
    NormalTexture,
    MetallicRoughnessTexture,
    OcclusionTexture,
    EmissiveTexture,
    LightNumber,
    LightPosition,
    LightDirection,
    LightIntensity,
    MetallicRoughnessFactor,
    BrdfLutTexture,
    DiffuseEnvTexture,
    SpecularEnvTexture,
    InverseEnvironment,
    IBLParameter,
    ViewPosition,
    Wireframe,
    DiffuseColorFactor,
    DiffuseColorTexture,
    SpecularColorFactor,
    SpecularColorTexture,
    Shininess,
    ShadingModel,
    SkinningMode,
    GeneralTexture,
    VertexAttributesExistenceArray,
    BoneQuaternion,
    BoneTranslateScale,
    BoneTranslatePackedQuat,
    BoneScalePackedQuat,
    BoneCompressedChunk,
    BoneCompressedInfo,
    PointSize,
    ColorEnvTexture,
    PointDistanceAttenuation,
    HDRIFormat,
    ScreenInfo,
    DepthTexture,
    LightViewProjectionMatrix,
    Anisotropy,
    ClearCoatParameter,
    SheenParameter,
    SpecularGlossinessFactor,
    SpecularGlossinessTexture,
    EntityUID,
    MorphTargetNumber,
    DataTextureMorphOffsetPosition,
    MorphWeights,
    CurrentComponentSIDs,
    AlphaCutoff,
    AlphaTexture,
    MakeOutputSrgb,
    FramebufferWidth,
    ClearCoatFactor,
    ClearCoatTexture,
    ClearCoatRoughnessFactor,
    ClearCoatRoughnessTexture,
    ClearCoatNormalTexture,
    TransmissionFactor,
    TransmissionTexture,
    BackBufferTexture,
    BackBufferTextureSize,
    ThicknessFactor,
    ThicknessTexture,
    AttenuationDistance,
    AttenuationColor,
    IsOutputHDR,
    BaseColorTextureTransform,
    BaseColorTextureRotation,
    NormalTextureTransform,
    NormalTextureRotation,
    MetallicRoughnessTextureTransform,
    MetallicRoughnessTextureRotation,
    NormalTexcoordIndex,
    BaseColorTexcoordIndex,
    MetallicRoughnessTexcoordIndex,
    OcclusionTexcoordIndex,
    EmissiveTexcoordIndex,
    NormalScale,
    OcclusionStrength,
    envRotation,
    EnvHdriFormat,
    VrState,
    EnableLinearToSrgb,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
function fromStringCaseSensitively(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromStringCaseSensitively)({ typeList, str });
}
function fullSemanticStr(info) {
    let prefix = '';
    if (info.prefix != null) {
        prefix = info.prefix;
    }
    return prefix + info.semantic.str;
}
const getShaderProperty = (materialTypeName, info, propertyIndex, isGlobalData, isWebGL2) => {
    if (info.isComponentData) {
        return '';
    }
    const returnType = info.compositionType.getGlslStr(info.componentType);
    let variableName = ShaderSemantics.fullSemanticStr(info);
    // definition of uniform variable
    const varType = info.compositionType.getGlslStr(info.componentType);
    let varIndexStr = '';
    if (info.arrayLength) {
        varIndexStr = `[${info.arrayLength}]`;
    }
    const varDef = `  uniform ${varType} u_${variableName}${varIndexStr};\n`;
    // inner contents of 'get_' shader function
    let str = '';
    if (propertyIndex < 0 || _CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.isArray(info.compositionType)) {
        if (Math.abs(propertyIndex) % ShaderSemanticsClass._scale !== 0 &&
            !_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.isArray(info.compositionType)) {
            return '';
        }
        if (variableName.match(/\[.+?\]/)) {
            variableName = variableName.replace(/\[.+?\]/g, '[i]');
        }
        else {
            variableName += '[i]';
        }
        if (isWebGL2) {
            str += `
        ${returnType} val;
          int i = index;
          return u_${variableName};
        `;
        }
        else {
            str += `
        ${returnType} val;
        for (int i=0; i<${info.arrayLength}; i++) {
          if (i == index) {
            val = u_${variableName};
            break;
          }
        }
        return val;
        `;
        }
    }
    else {
        str += `return u_${variableName};`;
    }
    let funcDef = '';
    const isTexture = info.compositionType === _CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Texture2D ||
        info.compositionType === _CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.TextureCube;
    if (!isTexture) {
        funcDef = `
  ${returnType} get_${info.semantic.str}(float instanceId, int index) {
    ${str}
  }
`;
    }
    return `${varDef}${funcDef}`;
};
const ShaderSemantics = Object.freeze({
    from,
    fromString,
    fromStringCaseSensitively,
    WorldMatrix,
    ViewMatrix,
    EnableViewMatrix,
    ProjectionMatrix,
    NormalMatrix,
    BoneMatrix,
    BaseColorFactor,
    BaseColorTexture,
    NormalTexture,
    MetallicRoughnessTexture,
    OcclusionTexture,
    EmissiveTexture,
    LightNumber,
    LightPosition,
    LightDirection,
    LightIntensity,
    MetallicRoughnessFactor,
    BrdfLutTexture,
    DiffuseEnvTexture,
    SpecularEnvTexture,
    InverseEnvironment,
    IBLParameter,
    ViewPosition,
    Wireframe,
    DiffuseColorFactor,
    DiffuseColorTexture,
    SpecularColorFactor,
    SpecularColorTexture,
    Shininess,
    ShadingModel,
    SkinningMode,
    GeneralTexture,
    VertexAttributesExistenceArray,
    BoneQuaternion,
    BoneTranslateScale,
    BoneTranslatePackedQuat,
    BoneScalePackedQuat,
    BoneCompressedChunk,
    BoneCompressedInfo,
    PointSize,
    ColorEnvTexture,
    PointDistanceAttenuation,
    HDRIFormat,
    ScreenInfo,
    DepthTexture,
    LightViewProjectionMatrix,
    Anisotropy,
    ClearCoatParameter,
    SheenParameter,
    SpecularGlossinessFactor,
    SpecularGlossinessTexture,
    ClearCoatFactor,
    ClearCoatTexture,
    ClearCoatRoughnessFactor,
    ClearCoatRoughnessTexture,
    ClearCoatNormalTexture,
    TransmissionFactor,
    TransmissionTexture,
    BackBufferTexture,
    BackBufferTextureSize,
    ThicknessFactor,
    ThicknessTexture,
    AttenuationDistance,
    AttenuationColor,
    fullSemanticStr,
    getShaderProperty,
    EntityUID,
    MorphTargetNumber,
    DataTextureMorphOffsetPosition,
    MorphWeights,
    CurrentComponentSIDs,
    AlphaCutoff,
    AlphaTexture,
    MakeOutputSrgb,
    FramebufferWidth,
    IsOutputHDR,
    BaseColorTextureTransform,
    BaseColorTextureRotation,
    NormalTextureTransform,
    NormalTextureRotation,
    MetallicRoughnessTextureTransform,
    MetallicRoughnessTextureRotation,
    NormalTexcoordIndex,
    BaseColorTexcoordIndex,
    MetallicRoughnessTexcoordIndex,
    OcclusionTexcoordIndex,
    EmissiveTexcoordIndex,
    NormalScale,
    OcclusionStrength,
    envRotation,
    EnvHdriFormat,
    VrState,
    EnableLinearToSrgb,
});


/***/ }),

/***/ "./src/foundation/definitions/ShaderSemanticsInfo.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/definitions/ShaderSemanticsInfo.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/definitions/ShaderType.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/ShaderType.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderType": () => (/* binding */ ShaderType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShaderTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const VertexShader = new ShaderTypeClass({
    index: 1,
    str: 'VertexShader',
});
const PixelShader = new ShaderTypeClass({
    index: 2,
    str: 'PixelShader',
});
const VertexAndPixelShader = new ShaderTypeClass({
    index: 3,
    str: 'VertexAndPixelShader',
});
const ComputeShader = new ShaderTypeClass({
    index: 4,
    str: 'ComputeShader',
});
const typeList = [
    VertexShader,
    PixelShader,
    VertexAndPixelShader,
    ComputeShader,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const ShaderType = Object.freeze({
    VertexShader,
    PixelShader,
    VertexAndPixelShader,
    ComputeShader,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/ShaderVariableType.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/definitions/ShaderVariableType.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderVariableType": () => (/* binding */ ShaderVariableType)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShaderVariableTypeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Varying = new ShaderVariableTypeClass({
    index: 1,
    str: 'Varying',
});
const ReadOnlyData = new ShaderVariableTypeClass({
    index: 2,
    str: 'ReadOnlyData',
});
const typeList = [Varying, ReadOnlyData];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const ShaderVariableType = Object.freeze({
    Varying,
    ReadOnlyData,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/definitions/ShaderVariableUpdateInterval.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderVariableUpdateInterval": () => (/* binding */ ShaderVariableUpdateInterval)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShaderVariableUpdateIntervalClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const FirstTimeOnly = new ShaderVariableUpdateIntervalClass({ index: 0, str: 'FirstTimeOnly' }); // If the previous object was the same material as mine, the parameter will not be set in my turn.
const EveryTime = new ShaderVariableUpdateIntervalClass({ index: 1, str: 'EveryTime' }); // The parameters are set each time the object is drawn.
const RenderPass = new ShaderVariableUpdateIntervalClass({ index: 2, str: 'RenderPass' });
const typeList = [FirstTimeOnly, EveryTime, RenderPass];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const ShaderVariableUpdateInterval = Object.freeze({
    FirstTimeOnly,
    EveryTime,
    RenderPass,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/ShadingModel.ts":
/*!****************************************************!*\
  !*** ./src/foundation/definitions/ShadingModel.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShadingModel": () => (/* binding */ ShadingModel)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShadingModelClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Unknown = new ShadingModelClass({
    index: -1,
    str: 'UNKNOWN',
});
const Constant = new ShadingModelClass({
    index: 0,
    str: 'CONSTANT',
});
const Lambert = new ShadingModelClass({
    index: 1,
    str: 'LAMBERT',
});
const BlinnPhong = new ShadingModelClass({
    index: 2,
    str: 'BLINN',
});
const Phong = new ShadingModelClass({ index: 3, str: 'PHONG' });
const typeList = [Unknown, Constant, Lambert, BlinnPhong, Phong];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
const ShadingModel = Object.freeze({
    Unknown,
    Constant,
    Lambert,
    BlinnPhong,
    Phong,
    from,
});


/***/ }),

/***/ "./src/foundation/definitions/ShadowMap.ts":
/*!*************************************************!*\
  !*** ./src/foundation/definitions/ShadowMap.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShadowMap": () => (/* binding */ ShadowMap)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class ShadowMapClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Standard = new ShadowMapClass({ index: 0, str: 'Standard' });
const Variance = new ShadowMapClass({ index: 1, str: 'Variance' });
const typeList = [Standard, Variance];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const ShadowMap = Object.freeze({ Standard, Variance, from, fromString });


/***/ }),

/***/ "./src/foundation/definitions/TextureParameter.ts":
/*!********************************************************!*\
  !*** ./src/foundation/definitions/TextureParameter.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextureParameter": () => (/* binding */ TextureParameter)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");
/* harmony import */ var _PixelFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");


class TextureParameterClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Nearest = new TextureParameterClass({
    index: 0x2600,
    str: 'NEAREST',
});
const Linear = new TextureParameterClass({
    index: 0x2601,
    str: 'LINEAR',
});
const NearestMipmapNearest = new TextureParameterClass({
    index: 0x2700,
    str: 'NEAREST_MIPMAP_NEAREST',
});
const LinearMipmapNearest = new TextureParameterClass({
    index: 0x2701,
    str: 'LINEAR_MIPMAP_NEAREST',
});
const NearestMipmapLinear = new TextureParameterClass({
    index: 0x2702,
    str: 'NEAREST_MIPMAP_LINEAR',
});
const LinearMipmapLinear = new TextureParameterClass({
    index: 0x2703,
    str: 'LINEAR_MIPMAP_LINEAR',
});
const TextureMagFilter = new TextureParameterClass({
    index: 0x2800,
    str: 'TEXTURE_MAG_FILTER',
});
const TextureMinFilter = new TextureParameterClass({
    index: 0x2801,
    str: 'TEXTURE_MIN_FILTER',
});
const TextureWrapS = new TextureParameterClass({
    index: 0x2802,
    str: 'TEXTURE_WRAP_S',
});
const TextureWrapT = new TextureParameterClass({
    index: 0x2803,
    str: 'TEXTURE_WRAP_T',
});
const Texture2D = new TextureParameterClass({
    index: 0x0de1,
    str: 'TEXTURE_2D',
});
const Texture = new TextureParameterClass({
    index: 0x1702,
    str: 'TEXTURE',
});
const Texture0 = new TextureParameterClass({
    index: 0x84c0,
    str: 'TEXTURE0',
});
const Texture1 = new TextureParameterClass({
    index: 0x84c1,
    str: 'TEXTURE1',
});
const ActiveTexture = new TextureParameterClass({
    index: 0x84e0,
    str: 'ACTIVE_TEXTURE',
});
const Repeat = new TextureParameterClass({
    index: 0x2901,
    str: 'REPEAT',
});
const ClampToEdge = new TextureParameterClass({
    index: 0x812f,
    str: 'CLAMP_TO_EDGE',
});
const MirroredRepeat = new TextureParameterClass({
    index: 0x8370,
    str: 'MIRRORED_REPEAT',
});
const RGB8 = new TextureParameterClass({
    index: 0x8051,
    str: 'RGB8',
});
const RGBA8 = new TextureParameterClass({
    index: 0x8058,
    str: 'RGBA8',
});
const RGB10_A2 = new TextureParameterClass({
    index: 0x8059,
    str: 'RGB10_A2',
});
const RGB16F = new TextureParameterClass({
    index: 0x881b,
    str: 'RGB16F',
});
const RGB32F = new TextureParameterClass({
    index: 0x8815,
    str: 'RGB32F',
});
const RGBA16F = new TextureParameterClass({
    index: 0x881a,
    str: 'RGBA16F',
});
const RGBA32F = new TextureParameterClass({
    index: 0x8814,
    str: 'RGBA32F',
});
const Depth16 = new TextureParameterClass({
    index: 0x81a5,
    str: 'DEPTH_COMPONENT16',
});
const Depth24 = new TextureParameterClass({
    index: 0x81a6,
    str: 'DEPTH_COMPONENT24',
});
const Depth32F = new TextureParameterClass({
    index: 0x8cac,
    str: 'DEPTH_COMPONENT32F',
});
const Depth24Stencil8 = new TextureParameterClass({
    index: 0x88f0,
    str: 'DEPTH24_STENCIL8',
});
const Depth32FStencil8 = new TextureParameterClass({
    index: 0x8cad,
    str: 'DEPTH32F_STENCIL8',
});
const typeList = [
    Nearest,
    Linear,
    NearestMipmapNearest,
    LinearMipmapNearest,
    NearestMipmapLinear,
    LinearMipmapLinear,
    TextureMagFilter,
    TextureMinFilter,
    TextureWrapS,
    TextureWrapT,
    Texture2D,
    Texture,
    Texture0,
    Texture1,
    ActiveTexture,
    Repeat,
    ClampToEdge,
    MirroredRepeat,
    RGB8,
    RGBA8,
    RGB10_A2,
    RGB16F,
    RGB32F,
    RGBA16F,
    RGBA32F,
    Depth16,
    Depth24,
    Depth32F,
    Depth24Stencil8,
    Depth32FStencil8,
];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function migrateToWebGL1InternalFormat(tp) {
    if (tp.index === RGBA8.index) {
        return _PixelFormat__WEBPACK_IMPORTED_MODULE_1__.PixelFormat.RGBA;
    }
    else if (tp.index === RGB8.index) {
        return _PixelFormat__WEBPACK_IMPORTED_MODULE_1__.PixelFormat.RGB;
    }
    throw new Error('Unsupported texture parameter');
}
const TextureParameter = Object.freeze({
    Nearest,
    Linear,
    NearestMipmapNearest,
    LinearMipmapNearest,
    NearestMipmapLinear,
    LinearMipmapLinear,
    TextureMagFilter,
    TextureMinFilter,
    TextureWrapS,
    TextureWrapT,
    Texture2D,
    Texture,
    Texture0,
    Texture1,
    ActiveTexture,
    Repeat,
    ClampToEdge,
    MirroredRepeat,
    RGB8,
    RGBA8,
    RGB10_A2,
    RGB16F,
    RGB32F,
    RGBA16F,
    RGBA32F,
    Depth16,
    Depth24,
    Depth32F,
    Depth24Stencil8,
    Depth32FStencil8,
    from,
    migrateToWebGL1InternalFormat,
});


/***/ }),

/***/ "./src/foundation/definitions/VertexAttribute.ts":
/*!*******************************************************!*\
  !*** ./src/foundation/definitions/VertexAttribute.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VertexAttribute": () => (/* binding */ VertexAttribute),
/* harmony export */   "VertexAttributeClass": () => (/* binding */ VertexAttributeClass)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");
/* harmony import */ var _misc_Result__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Result */ "./src/foundation/misc/Result.ts");


class VertexAttributeClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ str, shaderStr, attributeSlot, gltfComponentN, }) {
        super({ index: VertexAttributeClass.__indexCount++, str });
        this.__attributeSlot = attributeSlot;
        this.__shaderStr = shaderStr;
        this.__gltfComponentN = gltfComponentN;
    }
    getAttributeSlot() {
        return this.__attributeSlot;
    }
    get shaderStr() {
        return this.__shaderStr;
    }
    get attributeTypeName() {
        return this.str;
    }
    _setShaderStr(str) {
        this.__shaderStr = this.__shaderStr + str;
    }
    get X() {
        return `${this.attributeTypeName}.X`;
    }
    get Y() {
        return `${this.attributeTypeName}.Y`;
    }
    get Z() {
        return `${this.attributeTypeName}.Z`;
    }
    get W() {
        return `${this.attributeTypeName}.W`;
    }
    get XY() {
        return `${this.attributeTypeName}.X,${this.attributeTypeName}.Y`;
    }
    get XYZ() {
        return `${this.attributeTypeName}.X,${this.attributeTypeName}.Y,${this.attributeTypeName}.Z`;
    }
    get XYZW() {
        return `${this.attributeTypeName}.X,${this.attributeTypeName}.Y,${this.attributeTypeName}.Z,${this.attributeTypeName}.W`;
    }
    getVertexAttributeComponentsAsGltf() {
        if (this.__gltfComponentN === 1) {
            return this.X;
        }
        else if (this.__gltfComponentN === 2) {
            return this.XY;
        }
        else if (this.__gltfComponentN === 3) {
            return this.XYZ;
        }
        else if (this.__gltfComponentN === 4) {
            return this.XYZW;
        }
        else {
            throw new _misc_Result__WEBPACK_IMPORTED_MODULE_1__.RnException({
                message: 'Invalid gltf component number',
                error: this.__gltfComponentN,
            });
        }
    }
    static __createVertexAttributeClass(desc) {
        return new VertexAttributeClass(desc);
    }
}
VertexAttributeClass.__indexCount = -1;
const Unknown = VertexAttributeClass.__createVertexAttributeClass({
    str: 'UNKNOWN',
    shaderStr: 'a_unknown',
    attributeSlot: -1,
    gltfComponentN: 0,
});
const Position = VertexAttributeClass.__createVertexAttributeClass({
    str: 'POSITION',
    shaderStr: 'a_position',
    attributeSlot: 0,
    gltfComponentN: 3,
});
const Normal = VertexAttributeClass.__createVertexAttributeClass({
    str: 'NORMAL',
    shaderStr: 'a_normal',
    attributeSlot: 1,
    gltfComponentN: 3,
});
const Tangent = VertexAttributeClass.__createVertexAttributeClass({
    str: 'TANGENT',
    shaderStr: 'a_tangent',
    attributeSlot: 2,
    gltfComponentN: 3,
});
const Texcoord0 = VertexAttributeClass.__createVertexAttributeClass({
    str: 'TEXCOORD_0',
    shaderStr: 'a_texcoord_0',
    attributeSlot: 3,
    gltfComponentN: 2,
});
const Texcoord1 = VertexAttributeClass.__createVertexAttributeClass({
    str: 'TEXCOORD_1',
    shaderStr: 'a_texcoord_1',
    attributeSlot: 4,
    gltfComponentN: 2,
});
const Color0 = VertexAttributeClass.__createVertexAttributeClass({
    str: 'COLOR_0',
    shaderStr: 'a_color_0',
    attributeSlot: 5,
    gltfComponentN: 4,
});
const Joints0 = VertexAttributeClass.__createVertexAttributeClass({
    str: 'JOINTS_0',
    shaderStr: 'a_joints_0',
    attributeSlot: 6,
    gltfComponentN: 4,
});
const Weights0 = VertexAttributeClass.__createVertexAttributeClass({
    str: 'WEIGHTS_0',
    shaderStr: 'a_weights_0',
    attributeSlot: 7,
    gltfComponentN: 4,
});
const Instance = VertexAttributeClass.__createVertexAttributeClass({
    str: 'INSTANCE',
    shaderStr: 'a_instance',
    attributeSlot: 8,
    gltfComponentN: 1,
});
const FaceNormal = VertexAttributeClass.__createVertexAttributeClass({
    str: 'FACE_NORMAL',
    shaderStr: 'a_faceNormal',
    attributeSlot: 9,
    gltfComponentN: 3,
});
const BaryCentricCoord = VertexAttributeClass.__createVertexAttributeClass({
    str: 'BARY_CENTRIC_COORD',
    shaderStr: 'a_baryCentricCoord',
    attributeSlot: 10,
    gltfComponentN: 3,
});
const typeList = [
    Unknown,
    Position,
    Normal,
    Tangent,
    Texcoord0,
    Texcoord1,
    Color0,
    Joints0,
    Weights0,
    Instance,
    FaceNormal,
    BaryCentricCoord,
];
const AttributeTypeNumber = typeList.length - 1;
function isInstanceOfVertexAttributeClass(obj) {
    return obj instanceof VertexAttributeClass;
}
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    let newStr = str;
    if (str === 'COLOR') {
        newStr = 'COLOR_0';
    }
    else if (str === 'TEXCOORD') {
        newStr = 'TEXCOORD_0';
    }
    else if (str === 'JOINTS') {
        newStr = 'JOINTS_0';
    }
    else if (str === 'WEIGHTS') {
        newStr = 'WEIGHTS_0';
    }
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str: newStr });
}
function toVertexAttributeSemanticJoinedStringAsGltfStyle(attribute) {
    switch (attribute) {
        case Position:
            return attribute.XYZ;
        case Color0:
            return attribute.XYZ;
        case Normal:
            return attribute.XYZ;
        case Tangent:
            return attribute.XYZ;
        case Texcoord0:
            return attribute.XY;
        case Texcoord1:
            return attribute.XY;
        case Joints0:
            return attribute.XYZW;
        case Weights0:
            return attribute.XYZW;
        case Instance:
            return attribute.X;
        case FaceNormal:
            return attribute.XYZW;
        case BaryCentricCoord:
            return attribute.XYZW;
        default:
            throw new Error('Invalied glTF VertexAttributeEnum');
    }
}
function toAttributeSlotFromJoinedString(str) {
    switch (str) {
        case Position.XYZ:
            return Position.getAttributeSlot();
        case Color0.XYZ:
            return Color0.getAttributeSlot();
        case Normal.XYZ:
            return Normal.getAttributeSlot();
        case Tangent.XYZ:
            return Tangent.getAttributeSlot();
        case Texcoord0.XY:
            return Texcoord0.getAttributeSlot();
        case Texcoord1.XY:
            return Texcoord1.getAttributeSlot();
        case Joints0.XYZW:
            return Joints0.getAttributeSlot();
        case Weights0.XYZW:
            return Weights0.getAttributeSlot();
        case Instance.X:
            return Instance.getAttributeSlot();
        case FaceNormal.XYZ:
            return FaceNormal.getAttributeSlot();
        case BaryCentricCoord.XYZ:
            return BaryCentricCoord.getAttributeSlot();
        default:
            throw new Error('Invalied glTF VertexAttributeEnum');
    }
}
function toVectorComponentN(joinedString) {
    return joinedString.split(',').length;
}
const VertexAttribute = Object.freeze({
    Unknown,
    Position,
    Normal,
    Tangent,
    Texcoord0,
    Texcoord1,
    Color0,
    Joints0,
    Weights0,
    Instance,
    FaceNormal,
    BaryCentricCoord,
    AttributeTypeNumber,
    isInstanceOfVertexAttributeClass,
    toVertexAttributeSemanticJoinedStringAsGltfStyle,
    toAttributeSlotFromJoinedString,
    toVectorComponentN,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/Visibility.ts":
/*!**************************************************!*\
  !*** ./src/foundation/definitions/Visibility.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Visibility": () => (/* binding */ Visibility)
/* harmony export */ });
/* harmony import */ var _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class VisibilityClass extends _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const Neutral = new VisibilityClass({ index: 0, str: 'Neutral' });
const Visible = new VisibilityClass({ index: 1, str: 'Visible' });
const Invisible = new VisibilityClass({
    index: -1,
    str: 'Invisible',
});
const typeList = [Visible, Invisible, Neutral];
function from(index) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._from)({ typeList, index });
}
function fromString(str) {
    return (0, _misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__._fromString)({ typeList, str });
}
const Visibility = Object.freeze({
    Visible,
    Invisible,
    Neutral,
    from,
    fromString,
});


/***/ }),

/***/ "./src/foundation/definitions/index.ts":
/*!*********************************************!*\
  !*** ./src/foundation/definitions/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlphaMode": () => (/* reexport safe */ _AlphaMode__WEBPACK_IMPORTED_MODULE_0__.AlphaMode),
/* harmony export */   "AnimationAttribute": () => (/* reexport safe */ _AnimationAttribute__WEBPACK_IMPORTED_MODULE_1__.AnimationAttribute),
/* harmony export */   "AnimationInterpolation": () => (/* reexport safe */ _AnimationInterpolation__WEBPACK_IMPORTED_MODULE_2__.AnimationInterpolation),
/* harmony export */   "BasisCompressionType": () => (/* reexport safe */ _BasisCompressionType__WEBPACK_IMPORTED_MODULE_3__.BasisCompressionType),
/* harmony export */   "BoneDataType": () => (/* reexport safe */ _BoneDataType__WEBPACK_IMPORTED_MODULE_4__.BoneDataType),
/* harmony export */   "BufferUse": () => (/* reexport safe */ _BufferUse__WEBPACK_IMPORTED_MODULE_5__.BufferUse),
/* harmony export */   "CameraControllerType": () => (/* reexport safe */ _CameraControllerType__WEBPACK_IMPORTED_MODULE_6__.CameraControllerType),
/* harmony export */   "CameraType": () => (/* reexport safe */ _CameraType__WEBPACK_IMPORTED_MODULE_7__.CameraType),
/* harmony export */   "ComponentType": () => (/* reexport safe */ _ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType),
/* harmony export */   "CompositionType": () => (/* reexport safe */ _CompositionType__WEBPACK_IMPORTED_MODULE_9__.CompositionType),
/* harmony export */   "CompressionTextureType": () => (/* reexport safe */ _CompressionTextureType__WEBPACK_IMPORTED_MODULE_10__.CompressionTextureType),
/* harmony export */   "FileType": () => (/* reexport safe */ _FileType__WEBPACK_IMPORTED_MODULE_11__.FileType),
/* harmony export */   "HdriFormat": () => (/* reexport safe */ _HdriFormat__WEBPACK_IMPORTED_MODULE_12__.HdriFormat),
/* harmony export */   "LightType": () => (/* reexport safe */ _LightType__WEBPACK_IMPORTED_MODULE_13__.LightType),
/* harmony export */   "PixelFormat": () => (/* reexport safe */ _PixelFormat__WEBPACK_IMPORTED_MODULE_14__.PixelFormat),
/* harmony export */   "PrimitiveMode": () => (/* reexport safe */ _PrimitiveMode__WEBPACK_IMPORTED_MODULE_15__.PrimitiveMode),
/* harmony export */   "ProcessApproach": () => (/* reexport safe */ _ProcessApproach__WEBPACK_IMPORTED_MODULE_16__.ProcessApproach),
/* harmony export */   "ProcessApproachClass": () => (/* reexport safe */ _ProcessApproach__WEBPACK_IMPORTED_MODULE_16__.ProcessApproachClass),
/* harmony export */   "ProcessStage": () => (/* reexport safe */ _ProcessStage__WEBPACK_IMPORTED_MODULE_17__.ProcessStage),
/* harmony export */   "RenderBufferTarget": () => (/* reexport safe */ _RenderBufferTarget__WEBPACK_IMPORTED_MODULE_18__.RenderBufferTarget),
/* harmony export */   "ShaderNode": () => (/* reexport safe */ _ShaderNode__WEBPACK_IMPORTED_MODULE_19__.ShaderNode),
/* harmony export */   "ShaderSemantics": () => (/* reexport safe */ _ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics),
/* harmony export */   "ShaderSemanticsClass": () => (/* reexport safe */ _ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemanticsClass),
/* harmony export */   "ShaderType": () => (/* reexport safe */ _ShaderType__WEBPACK_IMPORTED_MODULE_22__.ShaderType),
/* harmony export */   "ShaderVariableType": () => (/* reexport safe */ _ShaderVariableType__WEBPACK_IMPORTED_MODULE_23__.ShaderVariableType),
/* harmony export */   "ShaderVariableUpdateInterval": () => (/* reexport safe */ _ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_24__.ShaderVariableUpdateInterval),
/* harmony export */   "ShadingModel": () => (/* reexport safe */ _ShadingModel__WEBPACK_IMPORTED_MODULE_25__.ShadingModel),
/* harmony export */   "ShadowMap": () => (/* reexport safe */ _ShadowMap__WEBPACK_IMPORTED_MODULE_26__.ShadowMap),
/* harmony export */   "TextureParameter": () => (/* reexport safe */ _TextureParameter__WEBPACK_IMPORTED_MODULE_27__.TextureParameter),
/* harmony export */   "VertexAttribute": () => (/* reexport safe */ _VertexAttribute__WEBPACK_IMPORTED_MODULE_28__.VertexAttribute),
/* harmony export */   "VertexAttributeClass": () => (/* reexport safe */ _VertexAttribute__WEBPACK_IMPORTED_MODULE_28__.VertexAttributeClass),
/* harmony export */   "Visibility": () => (/* reexport safe */ _Visibility__WEBPACK_IMPORTED_MODULE_29__.Visibility)
/* harmony export */ });
/* harmony import */ var _AlphaMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _AnimationAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AnimationAttribute */ "./src/foundation/definitions/AnimationAttribute.ts");
/* harmony import */ var _AnimationInterpolation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AnimationInterpolation */ "./src/foundation/definitions/AnimationInterpolation.ts");
/* harmony import */ var _BasisCompressionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BasisCompressionType */ "./src/foundation/definitions/BasisCompressionType.ts");
/* harmony import */ var _BoneDataType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");
/* harmony import */ var _BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _CameraControllerType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CameraControllerType */ "./src/foundation/definitions/CameraControllerType.ts");
/* harmony import */ var _CameraType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CameraType */ "./src/foundation/definitions/CameraType.ts");
/* harmony import */ var _ComponentType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _CompositionType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _CompressionTextureType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./CompressionTextureType */ "./src/foundation/definitions/CompressionTextureType.ts");
/* harmony import */ var _FileType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./FileType */ "./src/foundation/definitions/FileType.ts");
/* harmony import */ var _HdriFormat__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _LightType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./LightType */ "./src/foundation/definitions/LightType.ts");
/* harmony import */ var _PixelFormat__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _PrimitiveMode__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _ProcessApproach__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _ProcessStage__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _RenderBufferTarget__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./RenderBufferTarget */ "./src/foundation/definitions/RenderBufferTarget.ts");
/* harmony import */ var _ShaderNode__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./ShaderNode */ "./src/foundation/definitions/ShaderNode.ts");
/* harmony import */ var _ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ __webpack_require__(/*! ./ShaderSemanticsInfo */ "./src/foundation/definitions/ShaderSemanticsInfo.ts");
/* harmony import */ var _ShaderType__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _ShaderVariableType__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ShaderVariableType */ "./src/foundation/definitions/ShaderVariableType.ts");
/* harmony import */ var _ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _ShadingModel__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ShadingModel */ "./src/foundation/definitions/ShadingModel.ts");
/* harmony import */ var _ShadowMap__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ShadowMap */ "./src/foundation/definitions/ShadowMap.ts");
/* harmony import */ var _TextureParameter__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _VertexAttribute__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _Visibility__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./Visibility */ "./src/foundation/definitions/Visibility.ts");
































/***/ }),

/***/ "./src/foundation/enhanced_js_objects/Array.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/enhanced_js_objects/Array.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GetComponentFromEntities": () => (/* binding */ GetComponentFromEntities),
/* harmony export */   "enhanceArray": () => (/* binding */ enhanceArray)
/* harmony export */ });
const GetComponentFromEntities = Symbol();
const getComponentFromEntitiesStr = 'getComponentFromEntities';
function getComponentFromEntities(ComponentClass) {
    const that = this.__raw;
    const components = [];
    that.forEach((entity) => {
        const component = entity.getComponentByComponentTID(ComponentClass.componentTID);
        if (component != null) {
            components.push(component);
        }
    });
    return components;
}
class EnhancedArrayMethods {
    constructor(__raw) {
        this.__raw = __raw;
    }
}
const enhanceInner = () => {
    Object.defineProperty(EnhancedArrayMethods.prototype, getComponentFromEntitiesStr, {
        enumerable: false,
        writable: false,
        configurable: true,
        value: getComponentFromEntities,
    });
};
enhanceInner();
const enhanceArray = () => {
    Object.defineProperty(Array.prototype, 'Rn', {
        enumerable: false,
        configurable: false,
        get() {
            const ret = new EnhancedArrayMethods(this);
            return ret;
        },
    });
};


/***/ }),

/***/ "./src/foundation/enhanced_js_objects/index.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/enhanced_js_objects/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GetComponentFromEntities": () => (/* reexport safe */ _Array__WEBPACK_IMPORTED_MODULE_0__.GetComponentFromEntities),
/* harmony export */   "enhanceArray": () => (/* reexport safe */ _Array__WEBPACK_IMPORTED_MODULE_0__.enhanceArray)
/* harmony export */ });
/* harmony import */ var _Array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Array */ "./src/foundation/enhanced_js_objects/Array.ts");



/***/ }),

/***/ "./src/foundation/exporter/Gltf2Exporter.ts":
/*!**************************************************!*\
  !*** ./src/foundation/exporter/Gltf2Exporter.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GLTF2_EXPORT_DRACO": () => (/* binding */ GLTF2_EXPORT_DRACO),
/* harmony export */   "GLTF2_EXPORT_EMBEDDED": () => (/* binding */ GLTF2_EXPORT_EMBEDDED),
/* harmony export */   "GLTF2_EXPORT_GLB": () => (/* binding */ GLTF2_EXPORT_GLB),
/* harmony export */   "GLTF2_EXPORT_GLTF": () => (/* binding */ GLTF2_EXPORT_GLTF),
/* harmony export */   "GLTF2_EXPORT_NO_DOWNLOAD": () => (/* binding */ GLTF2_EXPORT_NO_DOWNLOAD),
/* harmony export */   "Gltf2Exporter": () => (/* binding */ Gltf2Exporter),
/* harmony export */   "createAndAddGltf2BufferView": () => (/* binding */ createAndAddGltf2BufferView)
/* harmony export */ });
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _types_glTF2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types/glTF2 */ "./src/types/glTF2.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _types_WebGLConstants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../types/WebGLConstants */ "./src/types/WebGLConstants.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _Gltf2ExporterEffekseer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Gltf2ExporterEffekseer */ "./src/foundation/exporter/Gltf2ExporterEffekseer.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions */ "./src/foundation/definitions/index.ts");
/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../math */ "./src/foundation/math/index.ts");













const _VERSION = (__webpack_require__(/*! ./../../../VERSION-FILE */ "./VERSION-FILE")["default"]);
const GLTF2_EXPORT_GLTF = 'glTF';
const GLTF2_EXPORT_GLB = 'glTF-Binary';
const GLTF2_EXPORT_DRACO = 'glTF-Draco';
const GLTF2_EXPORT_EMBEDDED = 'glTF-Embedded';
const GLTF2_EXPORT_NO_DOWNLOAD = 'No-Download';
/**
 * The glTF2 format Exporter class.
 */
class Gltf2Exporter {
    constructor() { }
    /**
     * Exports scene data in the rhodonite system in glTF2 format.
     * @param filename the target output path
     * @param option a option config
     */
    static async export(filename, option = {
        entities: undefined,
        type: GLTF2_EXPORT_GLB,
    }) {
        const { collectedEntities, topLevelEntities } = this.__collectEntities(option);
        const { json, fileName } = this.__createJsonBase(filename);
        this.__createBufferViewsAndAccessors(json, collectedEntities);
        this.__createNodes(json, collectedEntities, topLevelEntities);
        await this.__createMaterials(json, collectedEntities, option);
        (0, _Gltf2ExporterEffekseer__WEBPACK_IMPORTED_MODULE_9__.createEffekseer)(json, collectedEntities);
        const arraybuffer = this.__createBinary(json);
        this.__deleteEmptyArrays(json);
        const glbArrayBuffer = generateGlbArrayBuffer(json, arraybuffer);
        if (option.type === GLTF2_EXPORT_GLB) {
            this.__downloadGlb(json, fileName, glbArrayBuffer);
        }
        else if (option.type === GLTF2_EXPORT_GLTF) {
            this.__downloadGltf(json, fileName, arraybuffer);
        }
        return glbArrayBuffer;
    }
    static __deleteEmptyArrays(json) {
        if (json.accessors.length === 0) {
            delete json.accessors;
        }
        if (json.bufferViews.length === 0) {
            delete json.bufferViews;
        }
        if (json.materials.length === 0) {
            delete json.materials;
        }
        if (json.meshes.length === 0) {
            delete json.meshes;
        }
        if (json.skins.length === 0) {
            delete json.skins;
        }
        if (json.textures.length === 0) {
            delete json.textures;
        }
        if (json.images.length === 0) {
            delete json.images;
        }
        if (json.animations.length === 0) {
            delete json.animations;
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(json.extensionsUsed) && json.extensionsUsed.length === 0) {
            delete json.extensionsUsed;
        }
        if (json.cameras.length === 0) {
            delete json.cameras;
        }
        delete json.extras;
    }
    /**
     * collect target entities. This exporter includes their descendants for the output.
     * @param option an option config
     * @returns target entities
     */
    static __collectEntities(option) {
        const checkPassOrNotWithTags = (entity) => {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option) && _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option.excludeTags)) {
                for (const tag of option.excludeTags) {
                    if (entity.matchTag(tag.tag, tag.value)) {
                        return false; // exludes
                    }
                }
                if (entity.matchTag('Being', 'gizmo')) {
                    return true;
                }
            }
            return true;
        };
        const excludeWithTags = (entity) => {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option) && _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option.excludeTags)) {
                for (const tag of option.excludeTags) {
                    if (entity.matchTag(tag.tag, tag.value)) {
                        return [];
                    }
                }
            }
            return [entity];
        };
        const collectDescendants = (entity, root) => {
            const sg = entity.getSceneGraph();
            if (sg.children.length > 0) {
                const array = root
                    ? []
                    : excludeWithTags(entity);
                for (let i = 0; i < sg.children.length; i++) {
                    const child = sg.children[i];
                    Array.prototype.push.apply(array, collectDescendants(child.entity, false));
                }
                return array;
            }
            else {
                return root ? [] : excludeWithTags(entity);
            }
        };
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option) &&
            _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(option.entities) &&
            option.entities.length > 0) {
            const collectedDescendants = option.entities.flatMap(entity => collectDescendants(entity, true));
            let topLevelEntities = [];
            option.entities.forEach(entity => {
                // if (collectedDescendants.indexOf(entity) === -1) {
                if (collectedDescendants.indexOf(entity) === -1 &&
                    checkPassOrNotWithTags(entity)) {
                    topLevelEntities.push(entity);
                }
            });
            let collectedEntities = option.entities.concat();
            Array.prototype.push.apply(collectedEntities, collectedDescendants);
            collectedEntities = [...new Set(collectedEntities)];
            if (topLevelEntities.length === 0) {
                topLevelEntities = collectedEntities;
            }
            return { collectedEntities, topLevelEntities };
        }
        let collectedEntities = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository._getEntities();
        collectedEntities = collectedEntities.filter(entity => checkPassOrNotWithTags(entity));
        let topLevelEntities = _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_8__.SceneGraphComponent.getTopLevelComponents().flatMap(c => c.entity);
        topLevelEntities = topLevelEntities.filter(entity => checkPassOrNotWithTags(entity));
        collectedEntities = collectedEntities.flatMap(entity => collectDescendants(entity, true));
        Array.prototype.push.apply(collectedEntities, topLevelEntities);
        collectedEntities = [...new Set(collectedEntities)];
        return { collectedEntities, topLevelEntities };
    }
    /**
     * create the base of glTF2 JSON
     * @param filename target output path
     * @returns the json and fileName in a object
     */
    static __createJsonBase(filename) {
        const fileName = filename ? filename : 'Rhodonite_' + new Date().getTime();
        const json = {
            asset: {
                version: '2.0',
                generator: `Rhodonite (${_VERSION.version})`,
            },
            buffers: [{ uri: fileName + '.bin', byteLength: 0 }],
            bufferViews: [],
            accessors: [],
            animations: [],
            meshes: [],
            skins: [],
            materials: [
                {
                    pbrMetallicRoughness: {
                        baseColorFactor: [1.0, 1.0, 1.0, 1.0],
                    },
                },
            ],
            textures: [],
            images: [],
            extensionsUsed: [],
            extensions: {},
            extras: {
                rnSkins: [],
                bufferViewByteLengthAccumulatedArray: [],
                // bufferViewByteLengthAccumulatedArray[0] for buffer 0
                // bufferViewByteLengthAccumulatedArray[1] for buffer 1
                // ...
            },
            cameras: [],
            samplers: [],
        };
        return { json, fileName };
    }
    /**
     * create Gltf2BufferViews and Gltf2Accessors for the output glTF2 JSON
     * @param json
     * @param entities
     */
    static __createBufferViewsAndAccessors(json, entities) {
        const existingUniqueRnBuffers = [];
        const existingUniqueRnBufferViews = [];
        const existingUniqueRnAccessors = [];
        __createBufferViewsAndAccessorsOfMesh(json, entities, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors);
        __createBufferViewsAndAccessorsOfAnimation(json, entities);
        __createBufferViewsAndAccessorsOfSkin(json, entities, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors);
    }
    /**
     * create Gltf2Nodes for the output glTF2 JSON
     * @param json a glTF2 JSON
     * @param entities target entities
     * @param indicesOfGltfMeshes the indices of Gltf2Meshes
     */
    static __createNodes(json, entities, topLevelEntities) {
        json.nodes = [];
        json.scenes = [{ nodes: [] }];
        const scene = json.scenes[0];
        for (let i = 0; i < entities.length; i++) {
            const entity = entities[i];
            entity.gltfNodeIndex = i;
        }
        let meshCount = 0;
        for (let i = 0; i < entities.length; i++) {
            const entity = entities[i];
            // node ids of the output glTF2 data will be the indices of entities (specified target entities)
            json.nodes[i] = {};
            const node = json.nodes[i];
            // node.name
            node.name = entity.uniqueName;
            // node.children
            const sceneGraphComponent = entity.getSceneGraph();
            const children = sceneGraphComponent.children;
            if (children.length > 0) {
                node.children = [];
                for (let j = 0; j < children.length; j++) {
                    const child = children[j];
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(child.entity.gltfNodeIndex)) {
                        node.children.push(child.entity.gltfNodeIndex);
                    }
                }
            }
            // matrix
            const transform = entity.getTransform();
            node.rotation = [
                transform.quaternionInner.x,
                transform.quaternionInner.y,
                transform.quaternionInner.z,
                transform.quaternionInner.w,
            ];
            node.scale = [
                transform.scaleInner.x,
                transform.scaleInner.y,
                transform.scaleInner.z,
            ];
            node.translation = [
                transform.translateInner.x,
                transform.translateInner.y,
                transform.translateInner.z,
            ];
            // mesh
            const meshComponent = entity.tryToGetMesh();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(meshComponent) && _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(meshComponent.mesh)) {
                node.mesh = meshCount++;
            }
            // BlendShape
            const blendShapeComponent = entity.tryToGetBlendShape();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(blendShapeComponent)) {
                const weights = blendShapeComponent.weights;
                if (weights.length > 0) {
                    node.weights = weights;
                }
            }
            // skin
            const skinComponent = entity.tryToGetSkeletal();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(skinComponent)) {
                const entityIdx = json.extras.rnSkins.indexOf(skinComponent.entity);
                if (entityIdx >= 0) {
                    node.skin = entityIdx;
                }
            }
            // camera
            const cameraComponent = entity.tryToGetCamera();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(cameraComponent)) {
                let glTF2Camera;
                if (cameraComponent.type === _definitions__WEBPACK_IMPORTED_MODULE_11__.CameraType.Perspective) {
                    const originalAspect = cameraComponent.getTagValue('OriginalAspect');
                    glTF2Camera = {
                        name: cameraComponent.entity.uniqueName,
                        type: 'perspective',
                        perspective: {
                            aspectRatio: _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(originalAspect) ? originalAspect : cameraComponent.aspect,
                            yfov: _math__WEBPACK_IMPORTED_MODULE_12__.MathUtil.degreeToRadian(cameraComponent.fovy),
                            znear: cameraComponent.zNear,
                            zfar: cameraComponent.zFar,
                        }
                    };
                }
                else if (cameraComponent.type === _definitions__WEBPACK_IMPORTED_MODULE_11__.CameraType.Orthographic) {
                    glTF2Camera = {
                        name: cameraComponent.entity.uniqueName,
                        type: 'orthographic',
                        orthographic: {
                            xmag: cameraComponent.xMag,
                            ymag: cameraComponent.yMag,
                            znear: cameraComponent.zNear,
                            zfar: cameraComponent.zFar,
                        }
                    };
                }
                json.cameras.push(glTF2Camera);
                node.camera = json.cameras.length - 1;
            }
        }
        // If the entity has no parent, it must be a top level entity in the scene graph.
        topLevelEntities.forEach((entity, i) => {
            const idx = entities.indexOf(entity);
            if (idx >= 0) {
                scene.nodes.push(idx);
            }
        });
    }
    /**
     * create Gltf2Materials and set them to Gltf2Primitives for the output glTF2 JSON
     * @param json a glTF2 JSON
     * @param entities all target entities
     */
    static async __createMaterials(json, entities, option) {
        let countMesh = 0;
        const promises = [];
        json.extras.bufferViewByteLengthAccumulatedArray.push(0);
        const bufferIdx = json.extras.bufferViewByteLengthAccumulatedArray.length - 1;
        for (let i = 0; i < entities.length; i++) {
            const entity = entities[i];
            const meshComponent = entity.tryToGetMesh();
            if (meshComponent && meshComponent.mesh) {
                const gltf2Mesh = json.meshes[countMesh++];
                const primitiveCount = meshComponent.mesh.getPrimitiveNumber();
                for (let j = 0; j < primitiveCount; j++) {
                    const rnPrimitive = meshComponent.mesh.getPrimitiveAt(j);
                    const primitive = gltf2Mesh.primitives[j];
                    const rnMaterial = rnPrimitive.material;
                    const material = {
                        pbrMetallicRoughness: {
                            metallicFactor: 1.0,
                            roughnessFactor: 1.0,
                        },
                    };
                    let colorParam;
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(rnMaterial)) {
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is["false"](rnMaterial.isLighting)) {
                            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(material.extensions)) {
                                material.extensions = {};
                            }
                            material.extensions.KHR_materials_unlit = {};
                            if (json.extensionsUsed.indexOf('KHR_materials_unlit') < 0) {
                                json.extensionsUsed.push('KHR_materials_unlit');
                            }
                        }
                        colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.BaseColorFactor);
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(colorParam)) {
                            colorParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.DiffuseColorFactor);
                            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(colorParam)) {
                                colorParam = _math_Vector4__WEBPACK_IMPORTED_MODULE_10__.Vector4.fromCopy4(1, 1, 1, 1);
                            }
                        }
                        else {
                            material.pbrMetallicRoughness.metallicFactor =
                                rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.MetallicRoughnessFactor).x;
                            material.pbrMetallicRoughness.roughnessFactor =
                                rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.MetallicRoughnessFactor).y;
                        }
                        material.pbrMetallicRoughness.baseColorFactor =
                            Array.prototype.slice.call(colorParam._v);
                        material.alphaMode = rnMaterial.alphaMode.toGltfString();
                        const existedImages = [];
                        const processTexture = (rnTexture) => {
                            if (rnTexture && rnTexture.width > 1 && rnTexture.height > 1) {
                                let imageIndex = json.images.length;
                                let match = false;
                                for (let k = 0; k < json.images.length; k++) {
                                    const image = json.images[k];
                                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(image.rnTextureUID) &&
                                        image.rnTextureUID === rnTexture.textureUID) {
                                        imageIndex = k;
                                        match = true;
                                    }
                                }
                                // Sampler
                                let samplerIdx = -1;
                                {
                                    const gltf2TextureSampler = {
                                        magFilter: rnTexture.magFilter.index,
                                        minFilter: rnTexture.minFilter.index,
                                        wrapS: rnTexture.wrapS.index,
                                        wrapT: rnTexture.wrapT.index,
                                    };
                                    samplerIdx = json.samplers.findIndex(sampler => {
                                        return (0, _types_glTF2__WEBPACK_IMPORTED_MODULE_3__.isSameGlTF2TextureSampler)(gltf2TextureSampler, sampler);
                                    });
                                    if (samplerIdx === -1) {
                                        json.samplers.push(gltf2TextureSampler);
                                        samplerIdx = json.samplers.length - 1;
                                    }
                                }
                                if (!match) {
                                    // Image
                                    const glTF2ImageEx = {
                                        uri: rnTexture.name,
                                    };
                                    glTF2ImageEx.rnTextureUID = rnTexture.textureUID;
                                    if (existedImages.indexOf(rnTexture.name) !== -1) {
                                        glTF2ImageEx.uri += '_' + rnTexture.textureUID;
                                    }
                                    existedImages.push(glTF2ImageEx.uri);
                                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(glTF2ImageEx.uri.match(/\.(png)/))) {
                                        glTF2ImageEx.uri += '.png';
                                    }
                                    const htmlCanvasElement = rnTexture.htmlCanvasElement;
                                    if (htmlCanvasElement) {
                                        const promise = new Promise((resolve, rejected) => {
                                            htmlCanvasElement.toBlob(blob => {
                                                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(blob)) {
                                                    handleTextureImage(json, bufferIdx, blob, option, glTF2ImageEx, resolve, rejected);
                                                }
                                                else {
                                                    throw Error('canvas to blob error!');
                                                }
                                            });
                                        });
                                        promises.push(promise);
                                    }
                                    json.images.push(glTF2ImageEx);
                                }
                                const gltf2Texture = {
                                    sampler: samplerIdx,
                                    source: imageIndex,
                                };
                                const textureIdx = json.textures.indexOf(gltf2Texture);
                                if (textureIdx === -1) {
                                    json.textures.push(gltf2Texture);
                                }
                                return json.textures.indexOf(gltf2Texture);
                            }
                            return void 0;
                        };
                        let textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.BaseColorTexture);
                        let rnTexture;
                        let textureIndex;
                        if (textureParam != null) {
                            rnTexture = textureParam[1];
                            textureIndex = processTexture(rnTexture);
                            if (textureIndex != null) {
                                material.pbrMetallicRoughness.baseColorTexture = {
                                    index: textureIndex,
                                };
                            }
                        }
                        else {
                            textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.DiffuseColorTexture);
                            if (textureParam != null) {
                                const rnTexture = textureParam[1];
                                const textureIndex = processTexture(rnTexture);
                                if (textureIndex != null) {
                                    material.pbrMetallicRoughness.diffuseColorTexture = {
                                        index: textureIndex,
                                    };
                                }
                            }
                        }
                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.MetallicRoughnessTexture);
                        if (textureParam) {
                            rnTexture = textureParam[1];
                            textureIndex = processTexture(rnTexture);
                            if (textureIndex != null) {
                                material.pbrMetallicRoughness.metallicRoughnessTexture = {
                                    index: textureIndex,
                                };
                            }
                        }
                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.NormalTexture);
                        if (textureParam) {
                            rnTexture = textureParam[1];
                            textureIndex = processTexture(rnTexture);
                            if (textureIndex != null) {
                                material.normalTexture = { index: textureIndex };
                            }
                        }
                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.OcclusionTexture);
                        if (textureParam) {
                            rnTexture = textureParam[1];
                            textureIndex = processTexture(rnTexture);
                            if (textureIndex != null) {
                                material.occlusionTexture = { index: textureIndex };
                            }
                        }
                        textureParam = rnMaterial.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemantics.EmissiveTexture);
                        if (textureParam) {
                            rnTexture = textureParam[1];
                            textureIndex = processTexture(rnTexture);
                            if (textureIndex != null) {
                                material.emissiveTexture = { index: textureIndex };
                            }
                        }
                    }
                    const imageIdx = json.materials.indexOf(material);
                    if (imageIdx === -1) {
                        json.materials.push(material);
                    }
                    primitive.material = json.materials.indexOf(material);
                }
            }
        }
        return Promise.all(promises);
    }
    /**
     * create the arraybuffer of the glTF2 .bin file and write all accessors data to the arraybuffer
     * @param json a glTF2 JSON
     * @returns A arraybuffer
     */
    static __createBinary(json) {
        // write all data of accessors to the DataView (total data area)
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.undefined(json.accessors) || _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.undefined(json.bufferViews)) {
            return new ArrayBuffer(0);
        }
        // calc total sum of BufferViews in multiple Buffers
        const byteLengthOfUniteBuffer = json.extras.bufferViewByteLengthAccumulatedArray.reduce((sum, val) => sum + val);
        if (byteLengthOfUniteBuffer > 0) {
            const buffer = json.buffers[0];
            buffer.byteLength =
                byteLengthOfUniteBuffer +
                    _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.calcPaddingBytes(byteLengthOfUniteBuffer, 4);
        }
        // create the ArrayBuffer of unite Buffer (consist of multiple Buffers)
        const arrayBuffer = new ArrayBuffer(json.buffers[0].byteLength);
        // copy BufferViews in multiple Buffer to the Unite Buffer
        let lastCopiedByteLengthOfBufferView = 0;
        for (let i = 0; i < json.bufferViews.length; i++) {
            const bufferView = json.bufferViews[i];
            const uint8ArrayOfBufferView = bufferView.extras.uint8Array;
            delete bufferView.extras;
            const distByteOffset = lastCopiedByteLengthOfBufferView;
            _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.copyArrayBufferWithPadding({
                src: uint8ArrayOfBufferView.buffer,
                dist: arrayBuffer,
                srcByteOffset: uint8ArrayOfBufferView.byteOffset,
                copyByteLength: uint8ArrayOfBufferView.byteLength,
                distByteOffset,
            });
            lastCopiedByteLengthOfBufferView += _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.addPaddingBytes(uint8ArrayOfBufferView.byteLength, 4);
            bufferView.byteOffset = distByteOffset;
            bufferView.buffer = 0; // rewrite buffer index to 0 (The Unite Buffer)
        }
        return arrayBuffer;
    }
    /**
     * download the glTF2 files
     * @param json a glTF2 JSON
     * @param filename target output path
     * @param arraybuffer an ArrayBuffer of the .bin file
     */
    static __downloadGlb(json, filename, arraybuffer) {
        {
            const a = document.createElement('a');
            a.download = filename + '.glb';
            const blob = new Blob([arraybuffer], { type: 'octet/stream' });
            const url = URL.createObjectURL(blob);
            a.href = url;
            const e = new MouseEvent('click');
            a.dispatchEvent(e);
        }
    }
    exportGlbAsArrayBuffer() {
    }
    /**
     * download the glTF2 files
     * @param json a glTF2 JSON
     * @param filename target output path
     * @param arraybuffer an ArrayBuffer of the .bin file
     */
    static __downloadGltf(json, filename, arraybuffer) {
        {
            // .gltf file
            const a = document.createElement('a');
            a.download = filename + '.gltf';
            const str = JSON.stringify(json, null, 2);
            a.href = 'data:application/octet-stream,' + encodeURIComponent(str);
            const e = new MouseEvent('click');
            a.dispatchEvent(e);
        }
        {
            // .bin file
            const a = document.createElement('a');
            a.download = filename + '.bin';
            const blob = new Blob([arraybuffer], { type: 'octet/stream' });
            const url = URL.createObjectURL(blob);
            a.href = url;
            const e = new MouseEvent('click');
            a.dispatchEvent(e);
        }
    }
}
function generateGlbArrayBuffer(json, arraybuffer) {
    const headerBytes = 12; // 12byte-header
    // .glb file
    delete json.buffers[0].uri;
    let jsonStr = JSON.stringify(json, null, 2);
    let jsonArrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.stringToBuffer(jsonStr);
    const paddingBytes = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.calcPaddingBytes(jsonArrayBuffer.byteLength, 4);
    if (paddingBytes > 0) {
        for (let i = 0; i < paddingBytes; i++) {
            jsonStr += ' ';
        }
        jsonArrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.stringToBuffer(jsonStr);
    }
    const jsonChunkLength = jsonArrayBuffer.byteLength;
    const headerAndChunk0 = headerBytes + 4 + 4 + jsonChunkLength; // Chunk-0
    const totalBytes = headerAndChunk0 + 4 + 4 + arraybuffer.byteLength; // Chunk-1
    const glbArrayBuffer = new ArrayBuffer(totalBytes);
    const dataView = new DataView(glbArrayBuffer);
    dataView.setUint32(0, 0x46546c67, true);
    dataView.setUint32(4, 2, true);
    dataView.setUint32(8, totalBytes, true);
    dataView.setUint32(12, jsonArrayBuffer.byteLength, true);
    dataView.setUint32(16, 0x4e4f534a, true);
    _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.copyArrayBufferAs4Bytes({
        src: jsonArrayBuffer,
        dist: glbArrayBuffer,
        srcByteOffset: 0,
        copyByteLength: jsonArrayBuffer.byteLength,
        distByteOffset: 20,
    });
    _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.copyArrayBufferAs4Bytes({
        src: arraybuffer,
        dist: glbArrayBuffer,
        srcByteOffset: 0,
        copyByteLength: arraybuffer.byteLength,
        distByteOffset: 20 + jsonChunkLength + 8,
    });
    dataView.setUint32(headerAndChunk0, arraybuffer.byteLength, true);
    dataView.setUint32(headerAndChunk0 + 4, 0x004e4942, true);
    return glbArrayBuffer;
}
/**
 * create Gltf2Skins
 * @param json a glTF2 JSON
 * @param entities all target entities
 */
function __createBufferViewsAndAccessorsOfSkin(json, entities, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors) {
    for (let i = 0; i < entities.length; i++) {
        const entity = entities[i];
        const skeletalComponent = entity.tryToGetSkeletal();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(skeletalComponent)) {
            continue;
        }
        json.extras.rnSkins.push(skeletalComponent.entity);
        const jointSceneComponentsOfTheEntity = skeletalComponent.getJoints();
        const jointIndicesOfTheEntity = [];
        for (const jointSceneComponent of jointSceneComponentsOfTheEntity) {
            entities.forEach((entityObj, j) => {
                if (jointSceneComponent.entity === entityObj) {
                    jointIndicesOfTheEntity.push(j);
                }
            });
        }
        const inverseBindMatRnAccessor = skeletalComponent.getInverseBindMatricesAccessor();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(inverseBindMatRnAccessor)) {
            createOrReuseGltf2BufferView(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, inverseBindMatRnAccessor.bufferView);
            createOrReuseGltf2Accessor(json, json.bufferViews.length - 1, existingUniqueRnAccessors, inverseBindMatRnAccessor);
        }
        const topOfJointsSkeletonSceneComponent = skeletalComponent.topOfJointsHierarchy;
        const bindShapeMatrix = skeletalComponent._bindShapeMatrix;
        let skeletalIdx = -1;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(topOfJointsSkeletonSceneComponent)) {
            const skeletalEntity = topOfJointsSkeletonSceneComponent.entity;
            skeletalIdx = entities.indexOf(skeletalEntity);
        }
        else {
            skeletalIdx = jointIndicesOfTheEntity[0];
        }
        const skinJson = {
            joints: jointIndicesOfTheEntity,
            inverseBindMatrices: json.accessors.length - 1,
            skeleton: skeletalIdx >= 0 ? skeletalIdx : undefined,
            bindShapeMatrix: bindShapeMatrix === null || bindShapeMatrix === void 0 ? void 0 : bindShapeMatrix.flattenAsArray(),
        };
        json.skins.push(skinJson);
    }
}
/**
 * create BufferViews and Accessors of mesh
 * @param json
 * @param entities
 * @param existingUniqueRnBuffers
 * @param existingUniqueRnBufferViews
 * @param existingUniqueRnAccessors
 * @returns
 */
function __createBufferViewsAndAccessorsOfMesh(json, entities, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors) {
    for (let i = 0; i < entities.length; i++) {
        const entity = entities[i];
        const meshComponent = entity.tryToGetMesh();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(meshComponent) && meshComponent.mesh) {
            const mesh = { primitives: [] };
            const primitiveCount = meshComponent.mesh.getPrimitiveNumber();
            for (let j = 0; j < primitiveCount; j++) {
                const rnPrimitive = meshComponent.mesh.getPrimitiveAt(j);
                const primitive = {
                    attributes: {},
                    mode: rnPrimitive.primitiveMode.index,
                };
                // Vertex Indices
                // For indices accessor
                const rnIndicesAccessor = rnPrimitive.indicesAccessor;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(rnIndicesAccessor)) {
                    const rnBufferView = rnIndicesAccessor.bufferView;
                    const gltf2BufferView = createOrReuseGltf2BufferView(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, rnBufferView, _types_WebGLConstants__WEBPACK_IMPORTED_MODULE_6__.GL_ELEMENT_ARRAY_BUFFER);
                    const gltf2Accessor = createOrReuseGltf2Accessor(json, json.bufferViews.indexOf(gltf2BufferView), existingUniqueRnAccessors, rnIndicesAccessor);
                    const accessorIdx = json.accessors.indexOf(gltf2Accessor);
                    primitive.indices = accessorIdx;
                }
                // Vertex Attributes
                // For each attribute accessor
                const attributeAccessors = rnPrimitive.attributeAccessors;
                for (let j = 0; j < attributeAccessors.length; j++) {
                    const attributeJoinedString = rnPrimitive.attributeSemantics[j];
                    const attributeName = attributeJoinedString.split('.')[0];
                    if (attributeName === 'BARY_CENTRIC_COORD') {
                        continue;
                    }
                    // create a Gltf2BufferView
                    const rnAttributeAccessor = attributeAccessors[j];
                    const rnBufferView = rnAttributeAccessor.bufferView;
                    const gltf2BufferView = createOrReuseGltf2BufferViewForVertexAttributeBuffer(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, rnBufferView, rnAttributeAccessor);
                    const gltf2Accessor = createOrReuseGltf2Accessor(json, json.bufferViews.indexOf(gltf2BufferView), existingUniqueRnAccessors, rnAttributeAccessor);
                    const accessorIdx = json.accessors.indexOf(gltf2Accessor);
                    primitive.attributes[attributeName] = accessorIdx;
                }
                // BlendShape
                setupBlandShapeData(entity, rnPrimitive, primitive, json, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors);
                mesh.primitives[j] = primitive;
            }
            json.meshes.push(mesh);
        }
    }
}
function setupBlandShapeData(entity, rnPrimitive, primitive, json, existingUniqueRnBuffers, existingUniqueRnBufferViews, existingUniqueRnAccessors) {
    const blendShapeComponent = entity.tryToGetBlendShape();
    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(blendShapeComponent)) {
        const targets = rnPrimitive.getBlendShapeTargets();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(primitive.targets)) {
            primitive.targets = [];
        }
        for (const target of targets) {
            const targetJson = {};
            for (const [attributeName, rnAccessor] of target.entries()) {
                const gltf2BufferView = createOrReuseGltf2BufferView(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, rnAccessor.bufferView, _types_WebGLConstants__WEBPACK_IMPORTED_MODULE_6__.GL_ARRAY_BUFFER);
                const gltf2Accessor = createOrReuseGltf2Accessor(json, json.bufferViews.indexOf(gltf2BufferView), existingUniqueRnAccessors, rnAccessor);
                const accessorIdx = json.accessors.indexOf(gltf2Accessor);
                const attributeJoinedString = attributeName;
                const attribute = attributeJoinedString.split('.')[0];
                targetJson[attribute] = accessorIdx;
            }
            primitive.targets.push(targetJson);
        }
    }
}
/**
 * create BufferViews and Accessors of animation
 * @param json
 * @param entities
 */
function __createBufferViewsAndAccessorsOfAnimation(json, entities) {
    let sumOfBufferViewByteLengthAccumulated = 0;
    const bufferIdx = json.extras.bufferViewByteLengthAccumulatedArray.length;
    for (let i = 0; i < entities.length; i++) {
        const entity = entities[i];
        const animationComponent = entity.tryToGetAnimation();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(animationComponent)) {
            const trackNames = animationComponent.getAnimationTrackNames();
            for (const trackName of trackNames) {
                // AnimationTrack (Gltf2Animation)
                const animation = {
                    channels: [],
                    samplers: [],
                };
                json.animations.push(animation);
                let samplerIdx = 0;
                // Rhodonite AnimationTrack is corresponding to Gltf2Animation
                const rnAnimationTrack = animationComponent.getAnimationChannelsOfTrack(trackName);
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(rnAnimationTrack)) {
                    const rnChannels = rnAnimationTrack.values();
                    for (const rnChannel of rnChannels) {
                        // create and register Gltf2BufferView and Gltf2Accessor
                        //   and set Input animation data as Uint8Array to the Gltf2Accessor
                        const { inputAccessorIdx, inputBufferViewByteLengthAccumulated } = createGltf2BufferViewAndGltf2AccessorForInput(json, rnChannel, bufferIdx, sumOfBufferViewByteLengthAccumulated);
                        sumOfBufferViewByteLengthAccumulated +=
                            inputBufferViewByteLengthAccumulated;
                        // create and register Gltf2BufferView and Gltf2Accessor
                        //   and set Output animation data as Uint8Array to the Gltf2Accessor
                        const { outputAccessorIdx, outputBufferViewByteLengthAccumulated } = createGltf2BufferViewAndGltf2AccessorForOutput(json, rnChannel, bufferIdx, sumOfBufferViewByteLengthAccumulated);
                        sumOfBufferViewByteLengthAccumulated +=
                            outputBufferViewByteLengthAccumulated;
                        // Create Gltf2AnimationChannel
                        samplerIdx = createGltf2AnimationChannel(rnChannel, samplerIdx, animation, i);
                        // Create Gltf2AnimationSampler
                        createGltf2AnimationSampler(inputAccessorIdx, outputAccessorIdx, rnChannel, animation);
                    }
                }
            }
        }
    }
    json.extras.bufferViewByteLengthAccumulatedArray.push(sumOfBufferViewByteLengthAccumulated);
}
function calcAccessorIdxToSet(existingUniqueRnAccessors, rnAccessor) {
    // let accessorIdxToSet = -1;
    const accessorIdx = existingUniqueRnAccessors.findIndex(accessor => {
        return accessor.isSame(rnAccessor);
    });
    // if (accessorIdx !== -1) {
    //   // if the Rhodonite RnAccessor is in existingUniqueAccessors already,
    //   //   reuse the corresponding Gltf2Accessor
    //   accessorIdxToSet = accessorIdx;
    // } else {
    //   // if not, create a Gltf2Accessor and put it into existingUniqueAccessors
    //   // if the accessor is new one...
    //   accessorIdxToSet = existingUniqueRnAccessors.length;
    // }
    return accessorIdx;
}
function createOrReuseGltf2BufferViewForVertexAttributeBuffer(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, rnBufferView, rnAccessor) {
    const bufferViewIdx = findBufferViewIdx(existingUniqueRnBufferViews, rnBufferView);
    if (bufferViewIdx === -1) {
        const bufferIdxToSet = calcBufferIdxToSet(existingUniqueRnBuffers, rnBufferView.buffer);
        const gltf2BufferView = {
            buffer: bufferIdxToSet,
            byteLength: rnBufferView.byteLength,
            byteOffset: rnBufferView.byteOffsetInBuffer,
            extras: {
                uint8Array: rnBufferView.getUint8Array(),
            },
        };
        gltf2BufferView.target = _types_WebGLConstants__WEBPACK_IMPORTED_MODULE_6__.GL_ARRAY_BUFFER;
        json.extras.bufferViewByteLengthAccumulatedArray[bufferIdxToSet] =
            accumulateBufferViewByteLength(json.extras.bufferViewByteLengthAccumulatedArray, bufferIdxToSet, gltf2BufferView);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(gltf2BufferView.target)) {
            gltf2BufferView.byteStride = rnAccessor.elementSizeInBytes;
        }
        existingUniqueRnBufferViews.push(rnBufferView);
        json.bufferViews.push(gltf2BufferView);
        // const {fixedBufferViewByteLength, fixedBufferViewByteOffset} =
        //   calcBufferViewByteLengthAndByteOffset({
        //     accessorByteOffset: rnAccessor.byteOffsetInBufferView,
        //     accessorCount: rnAccessor.elementCount,
        //     bufferViewByteOffset: gltf2BufferView.byteOffset,
        //     bufferViewByteStride: gltf2BufferView.byteStride!,
        //     sizeOfComponent: rnAccessor.componentType.getSizeInBytes(),
        //     numberOfComponents: rnAccessor.compositionType.getNumberOfComponents(),
        //   });
        // gltf2BufferView.byteLength = fixedBufferViewByteLength;
        return gltf2BufferView;
    }
    const gltf2BufferView = json.bufferViews[bufferViewIdx];
    return gltf2BufferView;
}
function findBufferViewIdx(existingUniqueRnBufferViews, rnBufferView) {
    const bufferViewIdx = existingUniqueRnBufferViews.findIndex(bufferView => bufferView.isSame(rnBufferView));
    return bufferViewIdx;
}
function calcBufferIdxToSet(existingUniqueRnBuffers, rnBuffer) {
    if (existingUniqueRnBuffers.length === 0) {
        existingUniqueRnBuffers.push(rnBuffer);
    }
    const bufferIdx = existingUniqueRnBuffers.findIndex(buffer => buffer.isSame(rnBuffer));
    const bufferIdxToSet = bufferIdx === -1 ? existingUniqueRnBuffers.length : bufferIdx;
    if (bufferIdx === -1) {
        existingUniqueRnBuffers.push(rnBuffer);
    }
    return bufferIdxToSet;
}
function accumulateBufferViewByteLength(bufferViewByteLengthAccumulatedArray, bufferIdxToSet, gltf2BufferView) {
    const bufferViewLengthAligned = _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(bufferViewByteLengthAccumulatedArray[bufferIdxToSet])
        ? bufferViewByteLengthAccumulatedArray[bufferIdxToSet] +
            _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.addPaddingBytes(gltf2BufferView.byteLength, 4)
        : _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.addPaddingBytes(gltf2BufferView.byteLength, 4);
    return bufferViewLengthAligned;
}
function convertToGltfAnimationPathName(path) {
    switch (path) {
        case 'translate':
            return 'translation';
        case 'quaternion':
            return 'rotation';
        case 'scale':
            return 'scale';
        case 'weights':
            return 'weights';
        default:
            throw new Error('Invalid Path Name');
    }
}
function createGltf2AnimationChannel(channel, samplerIdx, animation, entityIdx) {
    const pathName = channel.target.pathName;
    const channelJson = {
        sampler: samplerIdx++,
        target: {
            path: convertToGltfAnimationPathName(pathName),
            node: entityIdx,
        },
    };
    animation.channels.push(channelJson);
    return samplerIdx;
}
function createGltf2AnimationSampler(inputAccessorIdx, outputAccessorIdx, channel, animation) {
    const samplerJson = {
        input: inputAccessorIdx,
        output: outputAccessorIdx,
        interpolation: channel.sampler.interpolationMethod.GltfString,
    };
    animation.samplers.push(samplerJson);
}
function createGltf2BufferViewAndGltf2AccessorForInput(json, rnChannel, bufferIdx, bufferViewByteLengthAccumulated) {
    const componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.fromTypedArray(ArrayBuffer.isView(rnChannel.sampler.input)
        ? rnChannel.sampler.input
        : new Float32Array(rnChannel.sampler.input));
    const accessorCount = rnChannel.sampler.input.length;
    // create a Gltf2BufferView
    const gltf2BufferView = createGltf2BufferViewForAnimation({
        bufferIdx,
        bufferViewByteOffset: bufferViewByteLengthAccumulated,
        accessorByteOffset: 0,
        accessorCount,
        bufferViewByteStride: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float.getSizeInBytes(),
        componentType,
        compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__.CompositionType.Scalar,
        uint8Array: new Uint8Array(ArrayBuffer.isView(rnChannel.sampler.input)
            ? rnChannel.sampler.input.buffer
            : rnChannel.sampler.input),
    });
    json.bufferViews.push(gltf2BufferView);
    // create a Gltf2Accessor
    const gltf2Accessor = createGltf2AccessorForAnimation({
        bufferViewIdx: json.bufferViews.indexOf(gltf2BufferView),
        accessorByteOffset: 0,
        componentType,
        count: accessorCount,
        compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__.CompositionType.Scalar,
        min: [rnChannel.sampler.input[0]],
        max: [rnChannel.sampler.input[rnChannel.sampler.input.length - 1]],
    });
    json.accessors.push(gltf2Accessor);
    // register
    bufferViewByteLengthAccumulated = alignBufferViewByteLength(bufferViewByteLengthAccumulated, gltf2BufferView);
    const inputAccessorIdx = json.accessors.indexOf(gltf2Accessor);
    return {
        inputAccessorIdx,
        inputBufferViewByteLengthAccumulated: bufferViewByteLengthAccumulated,
    };
}
function createGltf2BufferViewAndGltf2AccessorForOutput(json, rnChannel, bufferIdx, bufferViewByteLengthAccumulated) {
    const componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.fromTypedArray(ArrayBuffer.isView(rnChannel.sampler.output)
        ? rnChannel.sampler.output
        : new Float32Array(rnChannel.sampler.output));
    const pathName = rnChannel.target.pathName;
    let compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__.CompositionType.toGltf2AnimationAccessorCompositionType(rnChannel.sampler.outputComponentN);
    let accessorCount = rnChannel.sampler.output.length / rnChannel.sampler.outputComponentN;
    if (pathName === 'weights') {
        compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__.CompositionType.Scalar;
        accessorCount = rnChannel.sampler.output.length;
    }
    // create a Gltf2BufferView
    const gltf2BufferView = createGltf2BufferViewForAnimation({
        bufferIdx,
        bufferViewByteOffset: bufferViewByteLengthAccumulated,
        accessorByteOffset: 0,
        accessorCount,
        bufferViewByteStride: componentType.getSizeInBytes() * rnChannel.sampler.outputComponentN,
        componentType,
        compositionType,
        uint8Array: new Uint8Array(ArrayBuffer.isView(rnChannel.sampler.output)
            ? rnChannel.sampler.output.buffer
            : rnChannel.sampler.output),
    });
    json.bufferViews.push(gltf2BufferView);
    // create a Gltf2Accessor
    const gltf2Accessor = createGltf2AccessorForAnimation({
        bufferViewIdx: json.bufferViews.indexOf(gltf2BufferView),
        accessorByteOffset: 0,
        componentType,
        count: accessorCount,
        compositionType,
    });
    json.accessors.push(gltf2Accessor);
    // register
    bufferViewByteLengthAccumulated = alignBufferViewByteLength(bufferViewByteLengthAccumulated, gltf2BufferView);
    const outputAccessorIdx = json.accessors.indexOf(gltf2Accessor);
    return {
        outputAccessorIdx,
        outputBufferViewByteLengthAccumulated: bufferViewByteLengthAccumulated,
    };
}
function alignBufferViewByteLength(bufferViewByteLengthAccumulated, bufferView) {
    bufferViewByteLengthAccumulated =
        bufferView.byteLength + _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.calcPaddingBytes(bufferView.byteLength, 4);
    return bufferViewByteLengthAccumulated;
}
/**
 * calc BufferView byte length
 *
 *
 *  See: https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#data-alignment
 * @param accessorByteOffset
 * @param accessorCount
 * @param effectiveByteStride
 * @param sizeOfComponent
 * @param numberOfComponents
 * @returns
 */
function calcBufferViewByteLengthAndByteOffset({ accessorByteOffset, accessorCount, bufferViewByteStride, bufferViewByteOffset, sizeOfComponent, numberOfComponents, }) {
    // When byteStride of the referenced bufferView is not defined,
    // it means that accessor elements are tightly packed,
    //   i.e., effective stride equals the size of the element.
    const effectiveByteStride = bufferViewByteStride === 0
        ? sizeOfComponent * numberOfComponents
        : bufferViewByteStride;
    // When byteStride is defined,
    //   it MUST be a multiple of the size of the accessors component type.
    if (bufferViewByteStride % sizeOfComponent !== 0) {
        throw Error('glTF2: When byteStride is defined, it MUST be a multiple of the size of the accessors component type.');
    }
    // MUST be 4 bytes aligned
    const effectiveByteStrideAligned = alignBufferViewByteStrideTo4Bytes(effectiveByteStride);
    // MUST be 4 bytes aligned
    const alignedAccessorByteOffset = alignAccessorByteOffsetTo4Bytes(accessorByteOffset);
    // calc BufferView byteLength as following,
    //
    //  Each accessor MUST fit its bufferView, i.e.,
    //  ```
    //  accessor.byteOffset + EFFECTIVE_BYTE_STRIDE * (accessor.count - 1) + SIZE_OF_COMPONENT * NUMBER_OF_COMPONENTS
    //  ```
    //   MUST be less than or equal to bufferView.length.
    const bufferViewByteLength = alignedAccessorByteOffset +
        effectiveByteStrideAligned * (accessorCount - 1) +
        sizeOfComponent * numberOfComponents;
    // The offset of an accessor into a bufferView (i.e., accessor.byteOffset)
    //   and the offset of an accessor into a buffer (i.e., accessor.byteOffset + bufferView.byteOffset)
    //     MUST be a multiple of the size of the accessors component type.
    const valByteLength = sizeOfComponent * numberOfComponents;
    const sumByteOffset = alignedAccessorByteOffset + bufferViewByteOffset;
    const paddingByte = valByteLength - (sumByteOffset % valByteLength);
    const fixedBufferViewByteOffset = bufferViewByteOffset + paddingByte;
    // MUST be 4 bytes aligned
    const alignedBufferViewByteOffset = alignAccessorByteOffsetTo4Bytes(fixedBufferViewByteOffset);
    const fixedBufferViewByteLength = bufferViewByteLength;
    return {
        fixedBufferViewByteLength,
        fixedBufferViewByteOffset: alignedBufferViewByteOffset,
    };
}
/**
 * fix the passed byteOffset to 4 bytes aligned
 * For performance and compatibility reasons, each element of a vertex attribute
 *   MUST be aligned to 4-byte boundaries inside a bufferView
 *     (i.e., accessor.byteOffset and bufferView.byteStride MUST be multiples of 4).
 *
 *  See: https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#data-alignment
 * @param byteOffset ByteOffset of Accessor, which is not algined yet
 * @returns algined byteOffset
 */
function alignAccessorByteOffsetTo4Bytes(byteOffset) {
    const alignSize = 4;
    if (byteOffset % 4 === 0) {
        return byteOffset;
    }
    return byteOffset + (alignSize - (byteOffset % alignSize));
}
/**
 * fix the passed byteOffset to 4 bytes aligned
 * For performance and compatibility reasons, each element of a vertex attribute
 *   MUST be aligned to 4-byte boundaries inside a bufferView
 *     (i.e., accessor.byteOffset and bufferView.byteStride MUST be multiples of 4).
 *
 *  See: https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#data-alignment
 * @param byteOffset ByteOffset of Accessor, which is not algined yet
 * @returns algined byteOffset
 */
function alignBufferViewByteStrideTo4Bytes(byteStride) {
    const alignSize = 4;
    if (byteStride % 4 === 0) {
        return byteStride;
    }
    const byteStrideAlgined = byteStride + (alignSize - (byteStride % alignSize));
    return byteStrideAlgined;
}
async function handleTextureImage(json, bufferIdx, blob, option, glTF2ImageEx, resolve, rejected) {
    if (option.type === GLTF2_EXPORT_GLTF) {
        setTimeout(() => {
            const a = document.createElement('a');
            const e = new MouseEvent('click');
            a.href = URL.createObjectURL(blob);
            a.download = glTF2ImageEx.uri;
            a.dispatchEvent(e);
            URL.revokeObjectURL(a.href);
        }, Math.random() * 5000);
        resolve();
    }
    else {
        const reader = new FileReader();
        reader.addEventListener('load', () => {
            const arrayBuffer = reader.result;
            const gltf2BufferView = createAndAddGltf2BufferView(json, bufferIdx, new Uint8ClampedArray(arrayBuffer));
            glTF2ImageEx.bufferView = json.bufferViews.indexOf(gltf2BufferView);
            glTF2ImageEx.mimeType = 'image/png';
            delete glTF2ImageEx.uri;
            resolve();
        });
        reader.addEventListener('error', () => {
            rejected(reader.error);
        });
        reader.readAsArrayBuffer(blob);
    }
}
function createAndAddGltf2BufferView(json, bufferIdx, uint8Array) {
    const bufferViewByteLengthAccumulated = json.extras.bufferViewByteLengthAccumulatedArray[bufferIdx];
    const gltfBufferViewEx = {
        buffer: bufferIdx,
        byteLength: uint8Array.byteLength,
        byteOffset: bufferViewByteLengthAccumulated,
        extras: {
            uint8Array,
        },
    };
    const nextBufferViewBytesLengthAccumulated = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.addPaddingBytes(gltfBufferViewEx.byteLength, 4) +
        bufferViewByteLengthAccumulated;
    json.bufferViews.push(gltfBufferViewEx);
    json.extras.bufferViewByteLengthAccumulatedArray[bufferIdx] =
        nextBufferViewBytesLengthAccumulated;
    return gltfBufferViewEx;
}
function createGltf2BufferViewForAnimation({ bufferIdx, bufferViewByteOffset, accessorByteOffset, accessorCount, bufferViewByteStride, componentType, compositionType, uint8Array, }) {
    const alignedAccessorByteOffset = alignAccessorByteOffsetTo4Bytes(accessorByteOffset);
    const { fixedBufferViewByteLength, fixedBufferViewByteOffset } = calcBufferViewByteLengthAndByteOffset({
        accessorByteOffset: alignedAccessorByteOffset,
        accessorCount: accessorCount,
        bufferViewByteStride,
        bufferViewByteOffset,
        sizeOfComponent: componentType.getSizeInBytes(),
        numberOfComponents: compositionType.getNumberOfComponents(),
    });
    const gltfBufferViewEx = {
        buffer: bufferIdx,
        byteLength: fixedBufferViewByteLength,
        byteOffset: fixedBufferViewByteOffset,
        byteStride: bufferViewByteStride,
        extras: {
            uint8Array,
        },
    };
    return gltfBufferViewEx;
}
function createGltf2AccessorForAnimation({ bufferViewIdx, accessorByteOffset, componentType, count, compositionType, min, max, }) {
    const alignedAccessorByteOffset = alignAccessorByteOffsetTo4Bytes(accessorByteOffset);
    const gltf2AccessorEx = {
        bufferView: bufferViewIdx,
        byteOffset: alignedAccessorByteOffset,
        componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.toGltf2AccessorComponentType(componentType),
        count,
        type: compositionType.str,
        min,
        max,
        extras: {},
    };
    return gltf2AccessorEx;
}
function createOrReuseGltf2BufferView(json, existingUniqueRnBuffers, existingUniqueRnBufferViews, rnBufferView, target) {
    const bufferViewIdx = findBufferViewIdx(existingUniqueRnBufferViews, rnBufferView);
    if (bufferViewIdx === -1) {
        const bufferIdxToSet = calcBufferIdxToSet(existingUniqueRnBuffers, rnBufferView.buffer);
        const gltf2BufferView = {
            buffer: bufferIdxToSet,
            byteLength: rnBufferView.byteLength,
            byteOffset: rnBufferView.byteOffsetInBuffer,
            extras: {
                uint8Array: rnBufferView.getUint8Array(),
            },
        };
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(target)) {
            gltf2BufferView.target = target;
        }
        json.extras.bufferViewByteLengthAccumulatedArray[bufferIdxToSet] =
            accumulateBufferViewByteLength(json.extras.bufferViewByteLengthAccumulatedArray, bufferIdxToSet, gltf2BufferView);
        existingUniqueRnBufferViews.push(rnBufferView);
        json.bufferViews.push(gltf2BufferView);
        return gltf2BufferView;
    }
    const gltf2BufferView = json.bufferViews[bufferViewIdx];
    return gltf2BufferView;
}
function createOrReuseGltf2Accessor(json, bufferViewIdxToSet, existingUniqueRnAccessors, rnAccessor) {
    const accessorIdx = calcAccessorIdxToSet(existingUniqueRnAccessors, rnAccessor);
    if (accessorIdx === -1) {
        // create a Gltf2Accessor
        rnAccessor.calcMinMax();
        const gltf2Accessor = {
            bufferView: bufferViewIdxToSet,
            byteOffset: rnAccessor.byteOffsetInBufferView,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.toGltf2AccessorComponentType(rnAccessor.componentType),
            count: rnAccessor.elementCount,
            type: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_7__.CompositionType.toGltf2AccessorCompositionTypeString(rnAccessor.compositionType.getNumberOfComponents()),
            extras: {
                uint8Array: undefined,
            },
        };
        if (rnAccessor.compositionType.getNumberOfComponents() <= 4) {
            gltf2Accessor.max = rnAccessor.max;
            gltf2Accessor.min = rnAccessor.min;
        }
        existingUniqueRnAccessors.push(rnAccessor);
        json.accessors.push(gltf2Accessor);
        return gltf2Accessor;
    }
    const gltf2Accessor = json.accessors[accessorIdx];
    return gltf2Accessor;
}


/***/ }),

/***/ "./src/foundation/exporter/Gltf2ExporterEffekseer.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/exporter/Gltf2ExporterEffekseer.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createEffekseer": () => (/* binding */ createEffekseer)
/* harmony export */ });
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Gltf2Exporter */ "./src/foundation/exporter/Gltf2Exporter.ts");



function createEffekseer(json, entities) {
    let effekseerExists = false;
    const bufferIdx = json.extras.bufferViewByteLengthAccumulatedArray.length - 1;
    const effects = [];
    for (let i = 0; i < entities.length; i++) {
        const entity = entities[i];
        const effekseerComponent = entity.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_0__.WellKnownComponentTIDs.EffekseerComponentTID);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(effekseerComponent)) {
            effekseerExists = true;
            const effekseer = {
                node: i,
                name: effekseerComponent.uniqueName,
            };
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(effekseerComponent.arrayBuffer)) {
                const gltf2BufferView = (0, _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_2__.createAndAddGltf2BufferView)(json, bufferIdx, new Uint8Array(effekseerComponent.arrayBuffer));
                effekseer.bufferView = json.bufferViews.indexOf(gltf2BufferView);
            }
            else if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(effekseerComponent.uri)) {
                effekseer.uri = effekseerComponent.uri;
            }
            else {
                console.error('no real effect data.');
            }
            effects.push(effekseer);
        }
    }
    if (effekseerExists) {
        json.extensions.RHODONITE_effekseer = {
            effects: effects,
        };
        json.extensionsUsed.push('RHODONITE_effekseer');
    }
}


/***/ }),

/***/ "./src/foundation/exporter/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/exporter/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GLTF2_EXPORT_DRACO": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_DRACO),
/* harmony export */   "GLTF2_EXPORT_EMBEDDED": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_EMBEDDED),
/* harmony export */   "GLTF2_EXPORT_GLB": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_GLB),
/* harmony export */   "GLTF2_EXPORT_GLTF": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_GLTF),
/* harmony export */   "GLTF2_EXPORT_NO_DOWNLOAD": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_NO_DOWNLOAD),
/* harmony export */   "Gltf2Exporter": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.Gltf2Exporter),
/* harmony export */   "createAndAddGltf2BufferView": () => (/* reexport safe */ _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__.createAndAddGltf2BufferView),
/* harmony export */   "createEffekseer": () => (/* reexport safe */ _Gltf2ExporterEffekseer__WEBPACK_IMPORTED_MODULE_1__.createEffekseer)
/* harmony export */ });
/* harmony import */ var _Gltf2Exporter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Gltf2Exporter */ "./src/foundation/exporter/Gltf2Exporter.ts");
/* harmony import */ var _Gltf2ExporterEffekseer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Gltf2ExporterEffekseer */ "./src/foundation/exporter/Gltf2ExporterEffekseer.ts");




/***/ }),

/***/ "./src/foundation/geometry/ComplexVertexAttribute.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/geometry/ComplexVertexAttribute.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ComplexVertexAttribute": () => (/* binding */ ComplexVertexAttribute)
/* harmony export */ });
class ComplexVertexAttribute {
    constructor(semanticAttribute, attributes) {
        this.__components = [];
        this.__offsets = [];
        this.__semantic = semanticAttribute;
        this.__offsets = [];
        this.__components = [];
        for (const [joinedString, accessor] of attributes) {
            const split = joinedString.split(',');
            for (let i = 0; i < split.length; i++) {
                const attributeComponentName = split[i];
                if (attributeComponentName === semanticAttribute.X) {
                    this.__offsets[0] = i;
                    this.__components[0] = accessor;
                }
                if (attributeComponentName === semanticAttribute.Y) {
                    this.__offsets[1] = i;
                    this.__components[1] = accessor;
                }
                if (attributeComponentName === semanticAttribute.Z) {
                    this.__offsets[2] = i;
                    this.__components[2] = accessor;
                }
                if (attributeComponentName === semanticAttribute.W) {
                    this.__offsets[3] = i;
                    this.__components[3] = accessor;
                }
            }
        }
    }
    get semantic() {
        return this.__semantic;
    }
    getScalarAsArray(i, option) {
        return [this.__components[0].getScalarAt(i, this.__offsets[0], option)];
    }
    getVec2AsArray(i, option) {
        return [
            this.__components[0].getScalarAt(i, this.__offsets[0], option),
            this.__components[1].getScalarAt(i, this.__offsets[1], option),
        ];
    }
    getVec3AsArray(i, option) {
        return [
            this.__components[0].getScalarAt(i, this.__offsets[0], option),
            this.__components[1].getScalarAt(i, this.__offsets[1], option),
            this.__components[2].getScalarAt(i, this.__offsets[2], option),
        ];
    }
    getVec4AsArray(i, option) {
        return [
            this.__components[0].getScalarAt(i, this.__offsets[0], option),
            this.__components[1].getScalarAt(i, this.__offsets[1], option),
            this.__components[2].getScalarAt(i, this.__offsets[2], option),
            this.__components[3].getScalarAt(i, this.__offsets[3], option),
        ];
    }
}


/***/ }),

/***/ "./src/foundation/geometry/Frustum.ts":
/*!********************************************!*\
  !*** ./src/foundation/geometry/Frustum.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Frustum": () => (/* binding */ Frustum)
/* harmony export */ });
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/Visibility */ "./src/foundation/definitions/Visibility.ts");





/**
 * The view frustum class.
 */
class Frustum {
    constructor() {
        this.top = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.bottom = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.right = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.left = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.zNear = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.zFar = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_2__.MutableVector4.zero();
        this.__updated = false;
        this.__vp = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_1__.MutableMatrix44.zero();
    }
    /**
     * Updates this view frustum data from the view and projection matrices.
     * @param viewMatrix The view matrix.
     * @param projectionMatrix The projection matrix.
     */
    update(viewMatrix, projectionMatrix) {
        _math_Matrix44__WEBPACK_IMPORTED_MODULE_0__.Matrix44.multiplyTo(projectionMatrix, viewMatrix, this.__vp);
        this.zNear.x = this.__vp.m20 + this.__vp.m30;
        this.zNear.y = this.__vp.m21 + this.__vp.m31;
        this.zNear.z = this.__vp.m22 + this.__vp.m32;
        this.zNear.w = this.__vp.m23 + this.__vp.m33;
        this.zNear.normalize3();
        this.zFar.x = -this.__vp.m20 + this.__vp.m30;
        this.zFar.y = -this.__vp.m21 + this.__vp.m31;
        this.zFar.z = -this.__vp.m22 + this.__vp.m32;
        this.zFar.w = -this.__vp.m23 + this.__vp.m33;
        this.zFar.normalize3();
        this.bottom.x = this.__vp.m10 + this.__vp.m30;
        this.bottom.y = this.__vp.m11 + this.__vp.m31;
        this.bottom.z = this.__vp.m12 + this.__vp.m32;
        this.bottom.w = this.__vp.m13 + this.__vp.m33;
        this.bottom.normalize3();
        this.top.x = -this.__vp.m10 + this.__vp.m30;
        this.top.y = -this.__vp.m11 + this.__vp.m31;
        this.top.z = -this.__vp.m12 + this.__vp.m32;
        this.top.w = -this.__vp.m13 + this.__vp.m33;
        this.top.normalize3();
        this.left.x = this.__vp.m00 + this.__vp.m30;
        this.left.y = this.__vp.m01 + this.__vp.m31;
        this.left.z = this.__vp.m02 + this.__vp.m32;
        this.left.w = this.__vp.m03 + this.__vp.m33;
        this.left.normalize3();
        this.right.x = -this.__vp.m00 + this.__vp.m30;
        this.right.y = -this.__vp.m01 + this.__vp.m31;
        this.right.z = -this.__vp.m02 + this.__vp.m32;
        this.right.w = -this.__vp.m03 + this.__vp.m33;
        this.right.normalize3();
    }
    /**
     * Do clipping test (Inside / outside / neutral) of the plane of the view frustum.
     * @param plane The plane of the view frustum.
     * @param point The point to test.
     * @param bias The bias value.
     */
    clipping(plane, point, bias) {
        const dot = _math_Vector3__WEBPACK_IMPORTED_MODULE_3__.Vector3.dot(plane, point);
        const d = dot + plane.w;
        if (d + bias < 0) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible; // outside completely
        }
        else if (d - bias > 0) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible; // inside completely
        }
        else {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Neutral; // neutral
        }
    }
    /**
     * Do culling test (Inside / outside / neutral) of the entity against to the view frustum.
     * @param sg The SceneGraphComponent object of the entity.
     */
    culling(sg) {
        const aabb = sg.worldAABB;
        const center = aabb.centerPoint;
        const centerToCorner = aabb.lengthCenterToCorner;
        const right = this.clipping(this.right, center, centerToCorner);
        const left = this.clipping(this.left, center, centerToCorner);
        if ((right === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible && left === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible) ||
            (right === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible && left === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible)) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible;
        }
        const zNear = this.clipping(this.zNear, center, centerToCorner);
        const zFar = this.clipping(this.zFar, center, centerToCorner);
        if ((zNear === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible && zFar === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible) ||
            (zNear === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible && zFar === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible)) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible;
        }
        const top = this.clipping(this.top, center, centerToCorner);
        const bottom = this.clipping(this.bottom, center, centerToCorner);
        if ((top === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible && bottom === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible) ||
            (top === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible && bottom === _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible)) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Invisible;
        }
        const sum = top.index +
            bottom.index +
            right.index +
            left.index +
            zNear.index +
            zFar.index;
        if (sum === 6) {
            return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Visible;
        }
        return _definitions_Visibility__WEBPACK_IMPORTED_MODULE_4__.Visibility.Neutral;
    }
}


/***/ }),

/***/ "./src/foundation/geometry/ISemanticVertexAttribute.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/geometry/ISemanticVertexAttribute.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/geometry/Mesh.ts":
/*!*****************************************!*\
  !*** ./src/foundation/geometry/Mesh.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Mesh": () => (/* binding */ Mesh)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/AABB */ "./src/foundation/math/AABB.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _core_Entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/Entity */ "./src/foundation/core/Entity.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");












/**
 * The Mesh class.
 * This mesh object has primitives (geometries) or a reference of 'original mesh'.
 * If the latter, this mesh object is an 'instanced mesh', which has no primitives.
 * Instanced meshes refer original mesh's primitives when drawing.
 */
class Mesh {
    /**
     * Constructor
     */
    constructor() {
        this.__instanceIdx = 0;
        this.__primitives = [];
        this.__opaquePrimitives = [];
        this.__transparentPrimitives = [];
        this.__morphPrimitives = [];
        this.weights = [];
        this.__localAABB = new _math_AABB__WEBPACK_IMPORTED_MODULE_7__.AABB();
        this.__vaoUids = [];
        this.__variationVBOUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__instances = [];
        this._attachedEntityUID = _core_Entity__WEBPACK_IMPORTED_MODULE_9__.Entity.invalidEntityUID;
        this.__instancesDirty = true;
        this.__latestPrimitivePositionAccessorVersion = 0;
        this.__weakRefMeshEntity = new WeakMap();
        /**
         * Specification of when calculate the tangent of a vertex to apply Normal texture (for pbr/MToon shader)
         * 0: Not calculate tangent (not apply normal texture)
         * 1: (default) Use original tangent in a vertex, if a vertex has tangent attribute. If a vertex does not have it, calculate a tangent in a shader.
         * 2: Use original tangent in a vertex, if a vertex has tangent attribute. If a vertex does not have it, precalculate a tangent in the javascript.
         * 3: Calculate all tangent in a shader.
         * 4: Precalculate all tangent in the javascript
         */
        this.tangentCalculationMode = 1;
        this.__hasFaceNormal = false;
        this.__meshUID = ++Mesh.__mesh_uid_count;
    }
    ///
    ///
    /// Public Members
    ///
    ///
    getVaoUids(index) {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.getVaoUids(index);
        }
        else {
            return this.__vaoUids[index];
        }
    }
    getVaoUidsByPrimitiveUid(primitiveUid) {
        const index = this.__primitives.findIndex(primitive => primitive.primitiveUid === primitiveUid);
        if (this.isInstanceMesh()) {
            return this.__instanceOf.getVaoUids(index);
        }
        else {
            return this.__vaoUids[index];
        }
    }
    get meshEntity() {
        return this.__weakRefMeshEntity.get(this);
    }
    _belongToMeshComponent(meshComponent) {
        this.__weakRefMeshEntity.set(this, meshComponent.entity);
    }
    /**
     * Adds primitive.
     * @param primitive The primitive object.
     */
    addPrimitive(primitive) {
        primitive._belongToMesh(this);
        if (this.isInstanceMesh()) {
            // De-instancing
            this.__instanceOf.__instances = this.__instanceOf.__instances.filter(mesh => mesh !== this);
            this.__instanceOf = void 0;
            this.__instanceIdx = 0;
            // this.__primitives will initialize in this.__setPrimitives
            this.__opaquePrimitives = this.__opaquePrimitives.slice();
            this.__transparentPrimitives = this.__transparentPrimitives.slice();
            this.__morphPrimitives = this.__morphPrimitives.slice();
        }
        if (primitive.material == null || !primitive.material.isBlend()) {
            this.__opaquePrimitives.push(primitive);
        }
        else {
            this.__transparentPrimitives.push(primitive);
        }
        this.__setPrimitives(this.__opaquePrimitives.concat(this.__transparentPrimitives));
        Mesh.__originalMeshes.push(this);
    }
    __setPrimitives(primitives) {
        this.__primitives = primitives;
        for (const instanceMesh of this.__instances) {
            instanceMesh.__primitives = this.__primitives;
            instanceMesh.__opaquePrimitives = this.__opaquePrimitives;
            instanceMesh.__transparentPrimitives = this.__transparentPrimitives;
            instanceMesh.__morphPrimitives = this.__morphPrimitives;
        }
    }
    /**
     * Sets mesh.
     * @param mesh The mesh.
     */
    setOriginalMesh(mesh) {
        if (mesh.isInstanceMesh()) {
            console.error("Don't set InstanceMesh.");
            return false;
        }
        this.__primitives = mesh.__primitives;
        this.__opaquePrimitives = mesh.__opaquePrimitives;
        this.__transparentPrimitives = mesh.__transparentPrimitives;
        this.__morphPrimitives = mesh.__morphPrimitives;
        this.__instanceOf = mesh;
        mesh._addMeshToInstanceArray(this);
        this.__instanceIdx = mesh.instanceIndex + 1;
        // Remove this from original mesh list
        Mesh.__originalMeshes = Mesh.__originalMeshes.filter(mesh => mesh !== this);
        return true;
    }
    /**
     * Gets true if these primitives are all 'Blend' type
     */
    isAllBlend() {
        if (this.__transparentPrimitives.length > 0 &&
            this.__opaquePrimitives.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Gets true if some primitives are 'Blend' type
     */
    isBlendPartially() {
        if (this.__transparentPrimitives.length > 0 &&
            this.__opaquePrimitives.length > 0) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * Gets true if these primitives are all 'Opaque' type
     */
    isOpaque() {
        if (this.__transparentPrimitives.length === 0 &&
            this.__opaquePrimitives.length > 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isFirstOpaquePrimitiveAt(index) {
        if (this.isFirstOpaquePrimitiveAt(index)) {
            return this.__instanceOf.isFirstOpaquePrimitiveAt(index);
        }
        else {
            if (this.__opaquePrimitives.length > 0) {
                if (index === 0) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        }
    }
    isFirstTransparentPrimitiveAt(index) {
        if (this.isFirstOpaquePrimitiveAt(index)) {
            return this.__instanceOf.isFirstTransparentPrimitiveAt(index);
        }
        else {
            if (this.__transparentPrimitives.length > 0) {
                if (this.__opaquePrimitives.length === index) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        }
    }
    getPrimitiveAt(i) {
        // if (this.weights.length > 0) {
        // return this.__morphPrimitives[i];
        // } else {
        return this.__primitives[i];
        // }
    }
    getPrimitiveNumber() {
        return this.__primitives.length;
    }
    isInstanceMesh() {
        if (this.__instanceOf != null) {
            return true;
        }
        else {
            return false;
        }
    }
    isOriginalMesh() {
        return !this.isInstanceMesh();
    }
    /**
     * @private
     * @returns true: updated, false: not changed (not dirty)
     */
    updateVariationVBO() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.updateVariationVBO();
        }
        else {
            if (!this.__instancesDirty) {
                return false;
            }
            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
            if (this.__variationVBOUid !==
                _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
                webglResourceRepository.deleteVertexBuffer(this.__variationVBOUid);
            }
            const instanceNum = this.__instances.length;
            const entityUIDs = new Float32Array(instanceNum + 1); // instances and original
            entityUIDs[0] = this._attachedEntityUID;
            for (let i = 0; i < instanceNum; i++) {
                entityUIDs[i + 1] = this.__instances[i]._attachedEntityUID;
            }
            this.__variationVBOUid =
                webglResourceRepository.createVertexBufferFromTypedArray(entityUIDs);
            this.__instancesDirty = false;
            return true;
        }
    }
    ///
    /// Public WebGL-related Methods
    ///
    /**
     * @private
     * @returns true: updated, false: not changed (not dirty)
     */
    deleteVariationVBO() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.deleteVariationVBO();
        }
        else {
            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
            if (this.__variationVBOUid !==
                _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
                webglResourceRepository.deleteVertexBuffer(this.__variationVBOUid);
                this.__variationVBOUid =
                    _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
                this.__instancesDirty = true;
                return true;
            }
        }
        return false;
    }
    updateVAO() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.updateVAO();
        }
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        // create and update VAO
        for (let i = 0; i < this.__primitives.length; i++) {
            const primitive = this.__primitives[i];
            const vertexHandles = primitive.vertexHandles;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.undefined(vertexHandles)) {
                console.warn('Need to create 3DAPIVertexData before update VAO');
                continue;
            }
            if (isNaN(this.__vaoUids[i]) ||
                this.__vaoUids[i] === _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid ||
                vertexHandles.vaoHandle ===
                    _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
                this.__vaoUids[i] = webglResourceRepository.createVertexArray();
                vertexHandles.vaoHandle = this.__vaoUids[i];
            }
            webglResourceRepository.setVertexDataToPipeline(vertexHandles, primitive, this.__variationVBOUid);
        }
        // remove useless VAO
        for (let i = this.__primitives.length; i < this.__vaoUids.length; i++) {
            if (this.__vaoUids[i]) {
                webglResourceRepository.deleteVertexArray(this.__vaoUids[i]);
                this.__vaoUids[i] = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
            }
        }
    }
    deleteVAO() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.updateVAO();
        }
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        for (let i = 0; i < this.__vaoUids.length; i++) {
            webglResourceRepository.deleteVertexArray(this.__vaoUids[i]);
            this.__vaoUids[i] = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        }
    }
    castRay(srcPointInLocal, directionInLocal, dotThreshold = 0) {
        var _a;
        let finalShortestIntersectedPosVec3;
        let finalShortestT = Number.MAX_VALUE;
        let u = 0;
        let v = 0;
        for (const primitive of this.__primitives) {
            const result = primitive.castRay(srcPointInLocal, directionInLocal, true, true, dotThreshold, this.__hasFaceNormal);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.defined(result.data) && ((_a = result.data) === null || _a === void 0 ? void 0 : _a.t) < finalShortestT) {
                finalShortestT = result.data.t;
                finalShortestIntersectedPosVec3 = result.data.position;
                u = result.data.u;
                v = result.data.v;
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.defined(finalShortestIntersectedPosVec3)) {
            return {
                result: true,
                data: {
                    t: finalShortestT,
                    u,
                    v,
                    position: finalShortestIntersectedPosVec3,
                },
            };
        }
        else {
            return {
                result: false,
            };
        }
    }
    ///
    ///
    /// Accessors
    ///
    ///
    get primitives() {
        return Array.from(this.__primitives);
    }
    get meshUID() {
        return this.__meshUID;
    }
    get instanceCountIncludeOriginal() {
        return this.__instances.length + 1;
    }
    /**
     * @private
     */
    get _variationVBOUid() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf._variationVBOUid;
        }
        else {
            return this.__variationVBOUid;
        }
    }
    /**
     * Gets AABB in local space.
     */
    get AABB() {
        if (this.isInstanceMesh()) {
            return this.__instanceOf.AABB;
        }
        for (const primitive of this.__primitives) {
            if (primitive.positionAccessorVersion !==
                this.__latestPrimitivePositionAccessorVersion) {
                this.__localAABB.initialize();
                this.__latestPrimitivePositionAccessorVersion =
                    primitive.positionAccessorVersion;
                break;
            }
        }
        if (this.__localAABB.isVanilla()) {
            for (const primitive of this.__primitives) {
                this.__localAABB.mergeAABB(primitive.AABB);
            }
        }
        return this.__localAABB;
    }
    get instanceIndex() {
        return this.__instanceIdx;
    }
    ///
    ///
    // Friend Members
    ///
    ///
    /**
     * @private
     * Adds the other mesh to this mesh as instanced meshes.
     * @param mesh The other mesh.
     */
    _addMeshToInstanceArray(mesh) {
        this.__instances.push(mesh);
        this.__instancesDirty = true;
    }
    ///
    ///
    /// Private Members
    ///
    ///
    __calcMorphPrimitives() {
        if (this.weights.length === 0 || this.isInstanceMesh()) {
            return;
        }
        for (let i = 0; i < this.__primitives.length; i++) {
            const morphPrimitive = this.__morphPrimitives[i];
            const primitive = this.__primitives[i];
            const target0Attributes = primitive.targets[0];
            target0Attributes.forEach((accessor, semantic) => {
                const morphAccessor = morphPrimitive.getAttribute(semantic);
                const elementCount = morphAccessor.elementCount;
                for (let j = 0; j < elementCount; j++) {
                    morphAccessor.setElementFromSameCompositionAccessor(j, primitive.getAttribute(semantic));
                }
            });
            // primitive.targets.forEach((targetAttributes, k)=>{
            //   targetAttributes.forEach((accessor, semantic) => {
            //     const morphAccessor = morphPrimitive.getAttribute(semantic)!;
            //     const elementCount = morphAccessor.elementCount;
            //     for (let j = 0; j < elementCount; j++) {
            //       morphAccessor.addElementFromSameCompositionAccessor(j, accessor, this.weights[k]);
            //     }
            //   });
            // });
        }
    }
    /**
     * @private
     */
    _calcTangents() {
        if (!this.__usePreCalculatedTangent()) {
            return;
        }
        for (const primitive of this.__primitives) {
            const tangentIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Tangent.XYZ);
            if (tangentIdx !== -1 && this.tangentCalculationMode === 2) {
                continue;
            }
            const texcoordIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Texcoord0.XY);
            const normalIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Normal.XYZ);
            if (texcoordIdx !== -1 && normalIdx !== -1) {
                const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ);
                const positionAccessor = primitive.attributeAccessors[positionIdx];
                const texcoordAccessor = primitive.attributeAccessors[texcoordIdx];
                const normalAccessor = primitive.attributeAccessors[normalIdx];
                const indicesAccessor = primitive.indicesAccessor;
                let incrementNum = 3; // PrimitiveMode.Triangles
                if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.TriangleStrip ||
                    primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.TriangleFan) {
                    incrementNum = 1;
                }
                const vertexNum = primitive.getVertexCountAsIndicesBased();
                const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_2__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_3__.BufferUse.CPUGeneric);
                const tangentAttributeByteSize = (positionAccessor.byteLength * 4) / 3;
                const tangentBufferView = buffer.takeBufferView({
                    byteLengthToNeed: tangentAttributeByteSize,
                    byteStride: 0,
                }).unwrapForce();
                const tangentAccessor = tangentBufferView.takeAccessor({
                    compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.Vec4,
                    componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                    count: positionAccessor.elementCount,
                }).unwrapForce();
                for (let i = 0; i < vertexNum - 2; i += incrementNum) {
                    const pos0 = positionAccessor.getVec3(i, { indicesAccessor });
                    const pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor });
                    const pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor });
                    const uv0 = texcoordAccessor.getVec2(i, { indicesAccessor });
                    const uv1 = texcoordAccessor.getVec2(i + 1, { indicesAccessor });
                    const uv2 = texcoordAccessor.getVec2(i + 2, { indicesAccessor });
                    const norm0 = normalAccessor.getVec3(i, { indicesAccessor });
                    this.__calcTangentFor3Vertices(i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, tangentAccessor, indicesAccessor);
                }
                primitive.setVertexAttribute(tangentAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Tangent.XYZ);
            }
        }
    }
    /**
     * @private
     */
    __calcTangentFor3Vertices(i, pos0, pos1, pos2, uv0, uv1, uv2, norm0, tangentAccessor, indicesAccessor) {
        const tan0Vec3 = this.__calcTangentPerVertex(pos0, pos1, pos2, uv0, uv1, uv2, norm0, Mesh.__tmpReturnVec3_0);
        const tan1Vec3 = this.__calcTangentPerVertex(pos1, pos2, pos0, uv1, uv2, uv0, norm0, Mesh.__tmpReturnVec3_1);
        const tan2Vec3 = this.__calcTangentPerVertex(pos2, pos0, pos1, uv2, uv0, uv1, norm0, Mesh.__tmpReturnVec3_2);
        tangentAccessor.setVec4(i, tan0Vec3.x, tan0Vec3.y, tan0Vec3.z, 1, {
            indicesAccessor,
        });
        tangentAccessor.setVec4(i + 1, tan1Vec3.x, tan1Vec3.y, tan1Vec3.z, 1, {
            indicesAccessor,
        });
        tangentAccessor.setVec4(i + 2, tan2Vec3.x, tan2Vec3.y, tan2Vec3.z, 1, {
            indicesAccessor,
        });
    }
    __calcTangentPerVertex(pos0Vec3, pos1Vec3, pos2Vec3, uv0Vec2, uv1Vec2, uv2Vec2, norm0Vec3, returnVec3) {
        const cp0 = [
            Mesh.__tmpVec3_0.setComponents(pos0Vec3.x, uv0Vec2.x, uv0Vec2.y),
            Mesh.__tmpVec3_1.setComponents(pos0Vec3.y, uv0Vec2.x, uv0Vec2.y),
            Mesh.__tmpVec3_2.setComponents(pos0Vec3.z, uv0Vec2.x, uv0Vec2.y),
        ];
        const cp1 = [
            Mesh.__tmpVec3_3.setComponents(pos1Vec3.x, uv1Vec2.x, uv1Vec2.y),
            Mesh.__tmpVec3_4.setComponents(pos1Vec3.y, uv1Vec2.x, uv1Vec2.y),
            Mesh.__tmpVec3_5.setComponents(pos1Vec3.z, uv1Vec2.x, uv1Vec2.y),
        ];
        const cp2 = [
            Mesh.__tmpVec3_6.setComponents(pos2Vec3.x, uv2Vec2.x, uv2Vec2.y),
            Mesh.__tmpVec3_7.setComponents(pos2Vec3.y, uv2Vec2.x, uv2Vec2.y),
            Mesh.__tmpVec3_8.setComponents(pos2Vec3.z, uv2Vec2.x, uv2Vec2.y),
        ];
        const u = [];
        for (let i = 0; i < 3; i++) {
            const v1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(cp1[i], cp0[i], Mesh.__tmpVec3_9);
            const v2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(cp2[i], cp1[i], Mesh.__tmpVec3_10);
            const abc = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.crossTo(v1, v2, Mesh.__tmpVec3_11);
            const validate = Math.abs(abc.x) < Number.EPSILON;
            if (validate) {
                console.assert(validate, 'Polygons or polygons on UV are degenerate!');
                return _math_Vector3__WEBPACK_IMPORTED_MODULE_6__.Vector3.fromCopyArray([0, 0, 0]);
            }
            u[i] = -abc.y / abc.x;
            -abc.z / abc.x;
        }
        if (u[0] * u[0] + u[1] * u[1] + u[2] * u[2] < Number.EPSILON) {
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.crossTo(norm0Vec3, pos1Vec3, returnVec3);
            return returnVec3.normalize();
        }
        return returnVec3.setComponents(u[0], u[1], u[2]).normalize();
    }
    __usePreCalculatedTangent() {
        if (this.tangentCalculationMode === 0 ||
            this.tangentCalculationMode === 1 ||
            this.tangentCalculationMode === 3 ||
            this.isInstanceMesh()) {
            return false;
        }
        else {
            return true;
        }
    }
    /**
     * @private
     */
    _calcBaryCentricCoord() {
        if (this.isInstanceMesh()) {
            return;
        }
        for (const primitive of this.__primitives) {
            const BaryCentricCoordId = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.BaryCentricCoord.XYZ);
            if (BaryCentricCoordId !== -1) {
                return;
            }
            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_2__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_3__.BufferUse.CPUGeneric);
            const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ);
            const positionAccessor = primitive.attributeAccessors[positionIdx];
            const vertexNum = positionAccessor.elementCount;
            const num = vertexNum;
            const baryCentricCoordAttributeByteSize = num * 4 /* vec4 */ * 4; /* bytes */
            const baryCentricCoordBufferView = buffer.takeBufferView({
                byteLengthToNeed: baryCentricCoordAttributeByteSize,
                byteStride: 0,
            }).unwrapForce();
            const baryCentricCoordAccessor = baryCentricCoordBufferView.takeAccessor({
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                count: num,
            }).unwrapForce();
            for (let ver_i = 0; ver_i < num; ver_i++) {
                baryCentricCoordAccessor.setVec4(ver_i, ver_i % 3 === 0 ? 1 : 0, // 1 0 0  1 0 0  1 0 0,
                ver_i % 3 === 1 ? 1 : 0, // 0 1 0  0 1 0  0 1 0,
                ver_i % 3 === 2 ? 1 : 0, // 0 0 1  0 0 1  0 0 1,
                ver_i, {});
            }
            primitive.setVertexAttribute(baryCentricCoordAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.BaryCentricCoord.XYZ);
        }
    }
    /**
     * @private
     */
    _calcFaceNormalsIfNonNormal() {
        if (this.isInstanceMesh()) {
            return;
        }
        for (const primitive of this.__primitives) {
            const normalIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Normal.XYZ);
            if (normalIdx !== -1) {
                return;
            }
            this.__hasFaceNormal = true;
            const positionIdx = primitive.attributeSemantics.indexOf(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ);
            const positionAccessor = primitive.attributeAccessors[positionIdx];
            const indicesAccessor = primitive.indicesAccessor;
            let incrementNum = 3; // PrimitiveMode.Triangles
            if (primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.TriangleStrip ||
                primitive.primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.TriangleFan) {
                incrementNum = 1;
            }
            const vertexNum = primitive.getVertexCountAsIndicesBased();
            const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_2__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_3__.BufferUse.CPUGeneric);
            const normalAttributeByteSize = positionAccessor.byteLength;
            const normalBufferView = buffer.takeBufferView({
                byteLengthToNeed: normalAttributeByteSize,
                byteStride: 0,
            }).unwrapForce();
            const normalAccessor = normalBufferView.takeAccessor({
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.Vec3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                count: positionAccessor.elementCount,
            }).unwrapForce();
            for (let i = 0; i < vertexNum - 2; i += incrementNum) {
                const pos0 = positionAccessor.getVec3(i, { indicesAccessor });
                const pos1 = positionAccessor.getVec3(i + 1, { indicesAccessor });
                const pos2 = positionAccessor.getVec3(i + 2, { indicesAccessor });
                this.__calcFaceNormalFor3Vertices(i, pos0, pos1, pos2, normalAccessor, indicesAccessor);
            }
            primitive.setVertexAttribute(normalAccessor, _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Normal.XYZ);
        }
    }
    __calcFaceNormalFor3Vertices(i, pos0, pos1, pos2, normalAccessor, indicesAccessor) {
        // Calc normal
        const ax = pos1.x - pos0.x;
        const ay = pos1.y - pos0.y;
        const az = pos1.z - pos0.z;
        const bx = pos2.x - pos0.x;
        const by = pos2.y - pos0.y;
        const bz = pos2.z - pos0.z;
        let nx = ay * bz - az * by; // cross product
        let ny = az * bx - ax * bz;
        let nz = ax * by - ay * bx;
        let da = Math.hypot(nx, ny, nz); // normalize
        if (da <= 1e-6) {
            da = 0.0001;
        }
        da = 1.0 / da;
        nx *= da;
        ny *= da;
        nz *= da;
        normalAccessor.setVec3(i, nx, ny, nz, { indicesAccessor });
        normalAccessor.setVec3(i + 1, nx, ny, nz, { indicesAccessor });
        normalAccessor.setVec3(i + 2, nx, ny, nz, { indicesAccessor });
    }
    getPrimitiveIndexInMesh(primitive) {
        return this.primitives.indexOf(primitive);
    }
}
Mesh.invalidateMeshUID = -1;
Mesh.__mesh_uid_count = Mesh.invalidateMeshUID;
Mesh.__originalMeshes = [];
Mesh.__tmpVec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_4 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_5 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_6 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_7 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_8 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_9 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_10 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpVec3_11 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpReturnVec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpReturnVec3_1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
Mesh.__tmpReturnVec3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();


/***/ }),

/***/ "./src/foundation/geometry/Primitive.ts":
/*!**********************************************!*\
  !*** ./src/foundation/geometry/Primitive.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Primitive": () => (/* binding */ Primitive)
/* harmony export */ });
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_AABB__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/AABB */ "./src/foundation/math/AABB.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _types_GeometryTypes__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./types/GeometryTypes */ "./src/foundation/geometry/types/GeometryTypes.ts");
/* harmony import */ var _misc_WeakOption__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../misc/WeakOption */ "./src/foundation/misc/WeakOption.ts");
/* harmony import */ var _misc_Option__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../misc/Option */ "./src/foundation/misc/Option.ts");















class Primitive extends _core_RnObject__WEBPACK_IMPORTED_MODULE_2__.RnObject {
    constructor() {
        super();
        this.__mode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Unknown;
        this.__material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__.MaterialHelper.createEmptyMaterial();
        this._prevMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__.MaterialHelper.createEmptyMaterial();
        this.__attributes = new Map();
        this.__oIndices = new _misc_Option__WEBPACK_IMPORTED_MODULE_14__.None();
        this.__primitiveUid = -1; // start ID from zero
        this.__aabb = new _math_AABB__WEBPACK_IMPORTED_MODULE_6__.AABB();
        this.__targets = [];
        this.__latestPositionAccessorVersion = 0;
        this.__woMesh = new _misc_WeakOption__WEBPACK_IMPORTED_MODULE_13__.WeakNone();
        this._sortkey = 0;
        this._viewDepth = 0;
    }
    set material(mat) {
        this.__material = mat;
        this.setSortKey(_types_GeometryTypes__WEBPACK_IMPORTED_MODULE_12__.PrimitiveSortKey_BitOffset_Material, mat.materialTID);
        this.setSortKey(_types_GeometryTypes__WEBPACK_IMPORTED_MODULE_12__.PrimitiveSortKey_BitOffset_TranslucencyType, mat.alphaMode.index);
        mat._addBelongPrimitive(this);
    }
    get material() {
        return this.__material;
    }
    setSortKey(offset, value) {
        const offsetValue = value << offset;
        this._sortkey |= offsetValue;
    }
    /**
     * belong to mesh (weak reference)
     * @param mesh
     */
    _belongToMesh(mesh) {
        // this.setSortKey(PrimitiveSortKey_BitOffset_Mesh, mesh.meshUID);
        this.__woMesh = new _misc_WeakOption__WEBPACK_IMPORTED_MODULE_13__.WeakSome(this, mesh);
    }
    get mesh() {
        return this.__woMesh.unwrapOrUndefined(this);
    }
    _backupMaterial() {
        this._prevMaterial = this.__material;
    }
    _restoreMaterial() {
        this.__material = this._prevMaterial;
    }
    static getPrimitive(primitiveUid) {
        return this.__primitives[primitiveUid];
    }
    setData(attributes, mode, material, indicesAccessor) {
        this.__oIndices = new _misc_Option__WEBPACK_IMPORTED_MODULE_14__.Option(indicesAccessor);
        this.__attributes = attributes;
        if (material != null) {
            this.material = material;
        }
        else {
            this.material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_7__.MaterialHelper.createClassicUberMaterial({
                isSkinning: true,
                isLighting: true,
            });
        }
        this.__mode = mode;
        this.setSortKey(_types_GeometryTypes__WEBPACK_IMPORTED_MODULE_12__.PrimitiveSortKey_BitOffset_PrimitiveType, mode.index);
        this.__primitiveUid = Primitive.__primitiveCount++;
        Primitive.__primitives[this.__primitiveUid] = this;
    }
    static get maxPrimitiveCount() {
        return 500;
    }
    static get headerAccessor() {
        return this.__headerAccessor;
    }
    copyVertexData({ attributes, attributeSemantics, primitiveMode, indices, material, }) {
        let sumOfAttributesByteSize = 0;
        attributes.forEach(attribute => {
            sumOfAttributesByteSize += attribute.byteLength;
        });
        let bufferSize = sumOfAttributesByteSize;
        if (indices != null) {
            bufferSize += indices.byteLength;
        }
        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__.MemoryManager.getInstance().createBufferOnDemand(bufferSize, this, 4);
        let indicesComponentType;
        let indicesBufferView;
        let indicesAccessor;
        if (indices != null) {
            indicesComponentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.fromTypedArray(indices);
            indicesBufferView = buffer
                .takeBufferView({
                byteLengthToNeed: indices.byteLength,
                byteStride: 0,
            })
                .unwrapForce();
            indicesAccessor = indicesBufferView
                .takeAccessor({
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.Scalar,
                componentType: indicesComponentType,
                count: indices.byteLength / indicesComponentType.getSizeInBytes(),
            })
                .unwrapForce();
            // copy indices
            for (let i = 0; i < indices.byteLength / indicesAccessor.componentSizeInBytes; i++) {
                indicesAccessor.setScalar(i, indices[i], {});
            }
        }
        const attributesBufferView = buffer
            .takeBufferView({
            byteLengthToNeed: sumOfAttributesByteSize,
            byteStride: 0,
        })
            .unwrapForce();
        const attributeAccessors = [];
        const attributeComponentTypes = [];
        attributes.forEach((typedArray, i) => {
            const compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.vectorFrom(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.toVectorComponentN(attributeSemantics[i]));
            attributeComponentTypes[i] = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.fromTypedArray(attributes[i]);
            const accessor = attributesBufferView
                .takeAccessor({
                compositionType,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.fromTypedArray(attributes[i]),
                count: typedArray.byteLength /
                    compositionType.getNumberOfComponents() /
                    attributeComponentTypes[i].getSizeInBytes(),
            })
                .unwrapForce();
            accessor.copyFromTypedArray(typedArray);
            attributeAccessors.push(accessor);
        });
        const attributeMap = new Map();
        for (let i = 0; i < attributeSemantics.length; i++) {
            const attributeSemantic = attributeSemantics[i];
            attributeMap.set(attributeSemantic, attributeAccessors[i]);
        }
        this.setData(attributeMap, primitiveMode, material, indicesAccessor);
    }
    static createPrimitive(desc) {
        const primitive = new Primitive();
        primitive.copyVertexData(desc);
        return primitive;
    }
    get indicesAccessor() {
        return this.__oIndices.unwrapOrUndefined();
    }
    getVertexCountAsIndicesBased() {
        if (this.indicesAccessor) {
            return this.indicesAccessor.elementCount;
        }
        else {
            return this.getVertexCountAsVerticesBased();
        }
    }
    getVertexCountAsVerticesBased() {
        for (const accessor of this.__attributes.values()) {
            return accessor.elementCount;
        }
        return 0;
    }
    getTriangleCountAsIndicesBased() {
        if (this.indicesAccessor) {
            switch (this.__mode) {
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Triangles:
                    return this.indicesAccessor.elementCount / 3;
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.TriangleStrip:
                    return this.indicesAccessor.elementCount - 2;
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.TriangleFan:
                    return this.indicesAccessor.elementCount - 2;
                default:
                    return 0;
            }
        }
        else {
            return this.getTriangleCountAsVerticesBased();
        }
    }
    getTriangleCountAsVerticesBased() {
        for (const accessor of this.__attributes.values()) {
            switch (this.__mode) {
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Triangles:
                    return accessor.elementCount / 3;
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.TriangleStrip:
                    return accessor.elementCount - 2;
                case _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.TriangleFan:
                    return accessor.elementCount - 2;
                default:
                    return 0;
            }
        }
        return 0;
    }
    hasIndices() {
        return this.__oIndices.has();
    }
    get attributeAccessors() {
        const accessors = [];
        this.__attributes.forEach((accessor, semantic) => {
            accessors.push(accessor);
        });
        return accessors;
    }
    getAttribute(semantic) {
        return this.__attributes.get(semantic);
    }
    get attributeSemantics() {
        const semantics = [];
        this.__attributes.forEach((accessor, semantic) => {
            semantics.push(semantic);
        });
        return semantics;
    }
    get attributeEntries() {
        return this.__attributes.entries();
    }
    get attributeCompositionTypes() {
        const types = [];
        this.__attributes.forEach((accessor, semantic) => {
            types.push(accessor.compositionType);
        });
        return types;
    }
    get attributeComponentTypes() {
        const types = [];
        this.__attributes.forEach((accessor, semantic) => {
            types.push(accessor.componentType);
        });
        return types;
    }
    get primitiveMode() {
        return this.__mode;
    }
    get primitiveUid() {
        return this.__primitiveUid;
    }
    get positionAccessorVersion() {
        if (this.__cachePositionAccessor != null) {
            return this.__cachePositionAccessor.version;
        }
        else {
            const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ);
            if (positionAccessor != null) {
                this.__cachePositionAccessor = positionAccessor;
                return positionAccessor.version;
            }
            else {
                return undefined;
            }
        }
    }
    get AABB() {
        if (this.__aabb.isVanilla() ||
            this.positionAccessorVersion !== this.__latestPositionAccessorVersion) {
            const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ);
            positionAccessor.calcMinMax();
            const min = positionAccessor.min;
            this.__aabb.minPoint = Primitive.__tmpVec3_0.setComponents(min[0], min[1], min[2]);
            const max = positionAccessor.max;
            this.__aabb.maxPoint = Primitive.__tmpVec3_0.setComponents(max[0], max[1], max[2]);
            this.__latestPositionAccessorVersion = positionAccessor.version;
        }
        return this.__aabb;
    }
    setVertexAttribute(accessor, vertexSemantic) {
        this.__attributes.set(vertexSemantic, accessor);
    }
    removeIndices() {
        this.__oIndices = new _misc_Option__WEBPACK_IMPORTED_MODULE_14__.None();
    }
    setIndices(accessor) {
        this.__oIndices = new _misc_Option__WEBPACK_IMPORTED_MODULE_14__.Some(accessor);
    }
    setBlendShapeTargets(targets) {
        this.__targets = targets;
    }
    getBlendShapeTargets() {
        return this.__targets.concat();
    }
    get targets() {
        return this.__targets;
    }
    isBlend() {
        if (this.material == null || !this.material.isBlend()) {
            return false;
        }
        else {
            return true;
        }
    }
    isOpaque() {
        return !this.isBlend();
    }
    create3DAPIVertexData() {
        if (this.__vertexHandles != null) {
            return false;
        }
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.__vertexHandles =
            webglResourceRepository.createVertexBufferAndIndexBuffer(this);
        return true;
    }
    update3DAPIVertexData() {
        const vertexHandles = this.__vertexHandles;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(this.__vertexHandles)) {
            return false;
        }
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.updateVertexBufferAndIndexBuffer(this, vertexHandles);
        return true;
    }
    delete3DAPIVertexData() {
        if (this.__vertexHandles == null) {
            return false;
        }
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.deleteVertexDataResources(this.__vertexHandles);
        this.__vertexHandles = undefined;
        return true;
    }
    get vertexHandles() {
        return this.__vertexHandles;
    }
    castRay(origVec3, dirVec3, isFrontFacePickable, isBackFacePickable, dotThreshold, hasFaceNormal) {
        let currentShortestT = Number.MAX_VALUE;
        let incrementNum = 3; // gl.TRIANGLES
        if (this.__mode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.TriangleStrip) {
            // gl.TRIANGLE_STRIP
            incrementNum = 1;
        }
        else if (this.__mode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Points) {
            return {
                result: false,
            };
        }
        let u = 0;
        let v = 0;
        if (this.hasIndices()) {
            const indices = this.__oIndices.unwrapForce();
            for (let i = 0; i < indices.elementCount - 2; i++) {
                const j = i * incrementNum;
                if (j + 2 > indices.elementCount - 1) {
                    // gl.TRIANGLES
                    break;
                }
                const pos0IndexBase = indices.getScalar(j, {});
                const pos1IndexBase = indices.getScalar(j + 1, {});
                const pos2IndexBase = indices.getScalar(j + 2, {});
                const result = this.__castRayInnerTomasMoller(origVec3, dirVec3, i, pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold, hasFaceNormal);
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is["false"](result) || _misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.not.exist(result.data)) {
                    continue;
                }
                else {
                    if (result.data.t < currentShortestT) {
                        currentShortestT = result.data.t;
                        u = result.data.u;
                        v = result.data.v;
                    }
                }
            }
        }
        else {
            let elementCount = 0;
            for (const accessor of this.__attributes.values()) {
                elementCount = accessor.elementCount;
                break;
            }
            for (let i = 0; i < elementCount; i += incrementNum) {
                const pos0IndexBase = i;
                const pos1IndexBase = i + 1;
                const pos2IndexBase = i + 2;
                const result = this.__castRayInnerTomasMoller(origVec3, dirVec3, i, pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold, hasFaceNormal);
                if (result.result && _misc_Is__WEBPACK_IMPORTED_MODULE_11__.Is.defined(result.data)) {
                    const t = result.data.t;
                    if (t < currentShortestT) {
                        currentShortestT = t;
                        u = result.data.u;
                        v = result.data.v;
                    }
                }
            }
        }
        if (currentShortestT === Number.MAX_VALUE) {
            return {
                result: false,
            };
        }
        else {
            const currentShortestIntersectedPosVec3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.fromCopy3(dirVec3.x * currentShortestT + origVec3.x, dirVec3.y * currentShortestT + origVec3.y, dirVec3.z * currentShortestT + origVec3.z);
            return {
                result: true,
                data: {
                    t: currentShortestT,
                    u,
                    v,
                    position: currentShortestIntersectedPosVec3,
                },
            };
        }
    }
    __castRayInnerTomasMoller(origVec3, dirVec3, i, pos0IndexBase, pos1IndexBase, pos2IndexBase, isFrontFacePickable, isBackFacePickable, dotThreshold, hasFaceNormal) {
        if (hasFaceNormal) {
            const normalAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Normal.XYZ);
            if (normalAccessor) {
                const normal = normalAccessor.getVec3(i, {});
                if (normal.dot(dirVec3) < dotThreshold && !isFrontFacePickable) {
                    return {
                        result: false,
                    };
                }
                if (normal.dot(dirVec3) > -dotThreshold && !isBackFacePickable) {
                    return {
                        result: false,
                    };
                }
            }
        }
        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ);
        const pos0Vec3 = positionAccessor.getVec3(pos0IndexBase, {});
        const pos1Vec3 = positionAccessor.getVec3(pos1IndexBase, {});
        const pos2Vec3 = positionAccessor.getVec3(pos2IndexBase, {});
        const e1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
        const e2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
        const pvec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
        const tvec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
        const qvec = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();
        let u = 0, v = 0;
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(pos1Vec3, pos0Vec3, e1);
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(pos2Vec3, pos0Vec3, e2);
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.crossTo(dirVec3, e2, pvec);
        const det = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(e1, pvec);
        if (det > 0.0001) {
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(origVec3, pos0Vec3, tvec);
            u = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(tvec, pvec);
            if (u < 0.0 || u > det) {
                return {
                    result: false,
                };
            }
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.crossTo(tvec, e1, qvec);
            v = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(dirVec3, qvec);
            if (v < 0.0 || u + v > det) {
                return {
                    result: false,
                };
            }
        }
        else if (det < -0.0001) {
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.subtractTo(origVec3, pos0Vec3, tvec);
            u = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(tvec, pvec);
            if (u > 0.0 || u < det) {
                return {
                    result: false,
                };
            }
            _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.crossTo(tvec, e1, qvec);
            v = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(dirVec3, qvec);
            if (v > 0.0 || u + v < det) {
                return {
                    result: false,
                };
            }
        }
        else {
            return {
                result: false,
            };
        }
        const inv_det = 1.0 / det;
        let t = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.dot(e2, qvec);
        t *= inv_det;
        u *= inv_det;
        v *= inv_det;
        return {
            result: true,
            data: {
                t,
                u,
                v,
            },
        };
    }
    __calcNormalFromUV(pos0IndexBase, pos1IndexBase, pos2IndexBase, u, v) {
        const fDat = 1.0 - u - v;
        const positionAccessor = this.__attributes.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ);
        const pos0Vec3 = positionAccessor.getVec3(pos0IndexBase, {});
        const pos1Vec3 = positionAccessor.getVec3(pos1IndexBase, {});
        const pos2Vec3 = positionAccessor.getVec3(pos2IndexBase, {});
        const pos0 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.multiply(pos0Vec3, fDat);
        const pos1 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.multiply(pos1Vec3, u);
        const pos2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.multiply(pos2Vec3, v);
        const intersectedPosVec3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero()
            .add(pos0)
            .add(pos1)
            .add(pos2);
        return intersectedPosVec3;
    }
}
Primitive.__primitiveCount = 0;
Primitive.__primitives = [];
Primitive.__tmpVec3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.zero();


/***/ }),

/***/ "./src/foundation/geometry/SimpleVertexAttribute.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/geometry/SimpleVertexAttribute.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SimpleVertexAttribute": () => (/* binding */ SimpleVertexAttribute)
/* harmony export */ });
class SimpleVertexAttribute {
    constructor(semanticAttribute, accessor) {
        this.__semantic = semanticAttribute;
        this.__accessor = accessor;
    }
    get semantic() {
        return this.__semantic;
    }
    getScalarAsArray(i, option) {
        return [this.__accessor.getScalar(i, option)];
    }
    getVec2AsArray(i, option) {
        return this.__accessor.getVec2AsArray(i, option);
    }
    getVec3AsArray(i, option) {
        return this.__accessor.getVec3AsArray(i, option);
    }
    getVec4AsArray(i, option) {
        return this.__accessor.getVec4AsArray(i, option);
    }
}


/***/ }),

/***/ "./src/foundation/geometry/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/geometry/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Axis": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Axis),
/* harmony export */   "ComplexVertexAttribute": () => (/* reexport safe */ _ComplexVertexAttribute__WEBPACK_IMPORTED_MODULE_2__.ComplexVertexAttribute),
/* harmony export */   "Cube": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Cube),
/* harmony export */   "Frustum": () => (/* reexport safe */ _Frustum__WEBPACK_IMPORTED_MODULE_3__.Frustum),
/* harmony export */   "Grid": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Grid),
/* harmony export */   "IShape": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.IShape),
/* harmony export */   "Joint": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Joint),
/* harmony export */   "Line": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Line),
/* harmony export */   "Mesh": () => (/* reexport safe */ _Mesh__WEBPACK_IMPORTED_MODULE_5__.Mesh),
/* harmony export */   "Plane": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Plane),
/* harmony export */   "Primitive": () => (/* reexport safe */ _Primitive__WEBPACK_IMPORTED_MODULE_6__.Primitive),
/* harmony export */   "PrimitiveSortKey_BitLength_Depth": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitLength_Depth),
/* harmony export */   "PrimitiveSortKey_BitLength_Material": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitLength_Material),
/* harmony export */   "PrimitiveSortKey_BitLength_PrimitiveType": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitLength_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitLength_TranslucencyType": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitLength_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_Material": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitOffset_Material),
/* harmony export */   "PrimitiveSortKey_BitOffset_PrimitiveType": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitOffset_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitOffset_TranslucencyType": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitOffset_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_ViewportLayer": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_1__.PrimitiveSortKey_BitOffset_ViewportLayer),
/* harmony export */   "SimpleVertexAttribute": () => (/* reexport safe */ _SimpleVertexAttribute__WEBPACK_IMPORTED_MODULE_7__.SimpleVertexAttribute),
/* harmony export */   "Sphere": () => (/* reexport safe */ _shapes_index__WEBPACK_IMPORTED_MODULE_0__.Sphere)
/* harmony export */ });
/* harmony import */ var _shapes_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shapes/index */ "./src/foundation/geometry/shapes/index.ts");
/* harmony import */ var _types_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types/index */ "./src/foundation/geometry/types/index.ts");
/* harmony import */ var _ComplexVertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ComplexVertexAttribute */ "./src/foundation/geometry/ComplexVertexAttribute.ts");
/* harmony import */ var _Frustum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Frustum */ "./src/foundation/geometry/Frustum.ts");
/* harmony import */ __webpack_require__(/*! ./ISemanticVertexAttribute */ "./src/foundation/geometry/ISemanticVertexAttribute.ts");
/* harmony import */ var _Mesh__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _SimpleVertexAttribute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SimpleVertexAttribute */ "./src/foundation/geometry/SimpleVertexAttribute.ts");










/***/ }),

/***/ "./src/foundation/geometry/shapes/Axis.ts":
/*!************************************************!*\
  !*** ./src/foundation/geometry/shapes/Axis.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Axis": () => (/* binding */ Axis)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _shapes_IShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shapes/IShape */ "./src/foundation/geometry/shapes/IShape.ts");



/**
 * the Axis class
 */
class Axis extends _shapes_IShape__WEBPACK_IMPORTED_MODULE_2__.IShape {
    /**
     * Generates a axis object
     * @param desc a descriptor object of a Axis
     */
    generate(desc) {
        // prettier-ignore
        const positions = [
            // X axis
            0, 0, 0,
            desc.length, 0, 0,
            // Y axis
            0, 0, 0,
            0, desc.length, 0,
            // Z axis
            0, 0, 0,
            0, 0, desc.length,
        ];
        // prettier-ignore
        const colors = [
            // X axis as Red
            1, 0, 0,
            1, 0, 0,
            // Y axis as Green
            0, 1, 0,
            0, 1, 0,
            // Z axis as Blue
            0, 0, 1,
            0, 0, 1,
        ];
        const attributes = [new Float32Array(positions), new Float32Array(colors)];
        // Check Size
        const attributeSemantics = [
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Color0.XYZ,
        ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Lines,
            material: desc === null || desc === void 0 ? void 0 : desc.material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Cube.ts":
/*!************************************************!*\
  !*** ./src/foundation/geometry/shapes/Cube.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cube": () => (/* binding */ Cube)
/* harmony export */ });
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Primitive */ "./src/foundation/geometry/Primitive.ts");




/**
 * The Cube Primitive class
 */
class Cube extends _Primitive__WEBPACK_IMPORTED_MODULE_3__.Primitive {
    /**
     * Generates a cube object
     * @param desc a descriptor object of a Cube
     */
    generate(desc) {
        // prettier-ignore
        const indices = [
            3, 1, 0, 2, 1, 3,
            4, 5, 7, 7, 5, 6,
            8, 9, 11, 11, 9, 10,
            15, 13, 12, 14, 13, 15,
            19, 17, 16, 18, 17, 19,
            20, 21, 23, 23, 21, 22
        ];
        // prettier-ignore
        const positions = [
            // upper
            -desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            -desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            // lower
            -desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            -desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            // front
            -desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            -desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            // back
            -desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
            -desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
            // right
            desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
            // left
            -desc.widthVector.x, -desc.widthVector.y, -desc.widthVector.z,
            -desc.widthVector.x, -desc.widthVector.y, desc.widthVector.z,
            -desc.widthVector.x, desc.widthVector.y, desc.widthVector.z,
            -desc.widthVector.x, desc.widthVector.y, -desc.widthVector.z,
        ];
        // prettier-ignore
        const colors = _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(desc.color) ? [] : [
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
            desc.color.r, desc.color.g, desc.color.b, desc.color.a,
        ];
        // prettier-ignore
        const texcoords = [
            // upper
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
            // lower
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
            // front
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
            // back
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
            // right
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
            // left
            0.0, 0.0,
            1.0, 0.0,
            1.0, 1.0,
            0.0, 1.0,
        ];
        // prettier-ignore
        const normals = [
            // upper
            0, 1, 0,
            0, 1, 0,
            0, 1, 0,
            0, 1, 0,
            // lower
            0, -1, 0,
            0, -1, 0,
            0, -1, 0,
            0, -1, 0,
            // front
            0, 0, 1,
            0, 0, 1,
            0, 0, 1,
            0, 0, 1,
            // back
            0, 0, -1,
            0, 0, -1,
            0, 0, -1,
            0, 0, -1,
            // right
            1, 0, 0,
            1, 0, 0,
            1, 0, 0,
            1, 0, 0,
            // left
            -1, 0, 0,
            -1, 0, 0,
            -1, 0, 0,
            -1, 0, 0,
        ];
        /// Check Size ///
        const attributeSemantics = [
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Normal.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Texcoord0.XY,
        ];
        const attributes = [
            new Float32Array(positions),
            new Float32Array(normals),
            new Float32Array(texcoords),
        ];
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(desc.color)) {
            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Color0.XYZ);
            attributes.push(new Float32Array(colors));
        }
        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Triangles;
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode,
            indices: new Uint16Array(indices),
            material: desc === null || desc === void 0 ? void 0 : desc.material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Grid.ts":
/*!************************************************!*\
  !*** ./src/foundation/geometry/shapes/Grid.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Grid": () => (/* binding */ Grid)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");



/**
 * the Grid class
 */
class Grid extends _IShape__WEBPACK_IMPORTED_MODULE_2__.IShape {
    /**
     * Generates a grid object
     * @param desc a descriptor object of a Grid
     */
    generate(desc) {
        const positions = [];
        for (let i = 0; i < desc.division * 2 + 3; i++) {
            const start = -desc.length;
            const oneUnitLength = desc.length / (desc.division + 1);
            // XZ grid
            if (desc.isXZ) {
                positions.push(-desc.length, 0, start + oneUnitLength * i);
                positions.push(desc.length, 0, start + oneUnitLength * i);
                positions.push(start + oneUnitLength * i, 0, -desc.length);
                positions.push(start + oneUnitLength * i, 0, desc.length);
            }
            // XY grid
            if (desc.isXY) {
                positions.push(-desc.length, start + oneUnitLength * i, 0);
                positions.push(desc.length, start + oneUnitLength * i, 0);
                positions.push(start + oneUnitLength * i, -desc.length, 0);
                positions.push(start + oneUnitLength * i, desc.length, 0);
            }
            // YZ grid
            if (desc.isYZ) {
                positions.push(0, -desc.length, start + oneUnitLength * i);
                positions.push(0, desc.length, start + oneUnitLength * i);
                positions.push(0, start + oneUnitLength * i, -desc.length);
                positions.push(0, start + oneUnitLength * i, desc.length);
            }
        }
        const attributes = [new Float32Array(positions)];
        // Index Buffer
        // Check Size
        const attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Lines,
            material: desc === null || desc === void 0 ? void 0 : desc.material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/IShape.ts":
/*!**************************************************!*\
  !*** ./src/foundation/geometry/shapes/IShape.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IShape": () => (/* binding */ IShape)
/* harmony export */ });
/* harmony import */ var _Primitive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Primitive */ "./src/foundation/geometry/Primitive.ts");

class IShape extends _Primitive__WEBPACK_IMPORTED_MODULE_0__.Primitive {
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Joint.ts":
/*!*************************************************!*\
  !*** ./src/foundation/geometry/shapes/Joint.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Joint": () => (/* binding */ Joint)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");




/**
 * the Joint class
 */
class Joint extends _IShape__WEBPACK_IMPORTED_MODULE_3__.IShape {
    constructor() {
        super(...arguments);
        this.__worldPositionOfThisJoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 0, 1]);
        this.__worldPositionOfParentJoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 0, 0]);
        this.__width = 1;
    }
    /**
     * Generates a joint object
     */
    generate(desc) {
        const length = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.lengthBtw(this.__worldPositionOfThisJoint, this.__worldPositionOfParentJoint);
        const arrowWidth = this.__width;
        const arrowheadLength = length / 7.5;
        const arrowStickLength = length - arrowheadLength;
        const deltaVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(this.__worldPositionOfParentJoint, this.__worldPositionOfThisJoint);
        let directionToParent = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 1, 0]);
        if (!deltaVec.isEqual(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero())) {
            directionToParent = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(this.__worldPositionOfParentJoint, this.__worldPositionOfThisJoint));
        }
        const arrowStickPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(this.__worldPositionOfThisJoint, _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(directionToParent, arrowStickLength));
        let dummyVector = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 1, 0]);
        let dummyVector2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, -1, 0]);
        if (Math.abs(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.dot(directionToParent, dummyVector)) > 0.4) {
            dummyVector = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([1, 0, 0]);
            dummyVector2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([-1, 0, 0]);
        }
        if (Math.abs(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.dot(directionToParent, dummyVector)) > 0.4) {
            dummyVector = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 0, 1]);
            dummyVector2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray3([0, 0, -1]);
        }
        const crossVector = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.cross(directionToParent, dummyVector)), arrowWidth);
        const crossVector2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.cross(directionToParent, crossVector)), arrowWidth);
        const crossVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.cross(directionToParent, dummyVector2)), arrowWidth);
        const crossVector4 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.cross(directionToParent, crossVector3)), arrowWidth);
        const crossPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(arrowStickPosition, crossVector);
        const crossPosition2 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(arrowStickPosition, crossVector2);
        const crossPosition3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(arrowStickPosition, crossVector3);
        const crossPosition4 = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(arrowStickPosition, crossVector4);
        const pos = [];
        // Long Pyramid
        pos.push(this.__worldPositionOfThisJoint);
        pos.push(crossPosition);
        pos.push(this.__worldPositionOfThisJoint);
        pos.push(crossPosition2);
        pos.push(this.__worldPositionOfThisJoint);
        pos.push(crossPosition3);
        pos.push(this.__worldPositionOfThisJoint);
        pos.push(crossPosition4);
        // Plane
        pos.push(crossPosition);
        pos.push(crossPosition2);
        pos.push(crossPosition2);
        pos.push(crossPosition3);
        pos.push(crossPosition3);
        pos.push(crossPosition4);
        pos.push(crossPosition4);
        pos.push(crossPosition);
        // Short Pyramid
        pos.push(this.__worldPositionOfParentJoint);
        pos.push(crossPosition);
        pos.push(this.__worldPositionOfParentJoint);
        pos.push(crossPosition2);
        pos.push(this.__worldPositionOfParentJoint);
        pos.push(crossPosition3);
        pos.push(this.__worldPositionOfParentJoint);
        pos.push(crossPosition4);
        const positions = [];
        pos.map(vec => {
            Array.prototype.push.apply(positions, vec.flattenAsArray());
        });
        const attributes = [new Float32Array(positions)];
        // Check Size
        const attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__.VertexAttribute.Position.XYZ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Lines,
            material: desc === null || desc === void 0 ? void 0 : desc.material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Line.ts":
/*!************************************************!*\
  !*** ./src/foundation/geometry/shapes/Line.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Line": () => (/* binding */ Line)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");



/**
 * the Line class
 */
class Line extends _IShape__WEBPACK_IMPORTED_MODULE_2__.IShape {
    /**
     * Generates a line object
     * @param desc a descriptor object of a Line
     */
    generate({ startPos, endPos, hasTerminalMark, material, }) {
        const positions = [];
        positions.push(...startPos.flattenAsArray());
        positions.push(...endPos.flattenAsArray());
        if (hasTerminalMark) {
            const length = startPos.lengthTo(endPos);
            const markSize = length * 0.1;
            positions.push(startPos.x - markSize, startPos.y, startPos.z);
            positions.push(startPos.x + markSize, startPos.y, startPos.z);
            positions.push(startPos.x, startPos.y, startPos.z - markSize);
            positions.push(startPos.x, startPos.y, startPos.z + markSize);
            positions.push(endPos.x - markSize, endPos.y, endPos.z);
            positions.push(endPos.x + markSize, endPos.y, endPos.z);
            positions.push(endPos.x, endPos.y, endPos.z - markSize);
            positions.push(endPos.x, endPos.y, endPos.z + markSize);
        }
        const attributes = [new Float32Array(positions)];
        // Check Size
        const attributeSemantics = [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Lines,
            material: material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Plane.ts":
/*!*************************************************!*\
  !*** ./src/foundation/geometry/shapes/Plane.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Plane": () => (/* binding */ Plane)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");



/**
 * Plane class
 *
 */
class Plane extends _IShape__WEBPACK_IMPORTED_MODULE_2__.IShape {
    /**
     * Generates a plane object
     * @param desc a descriptor object of a Plane
     */
    generate(desc) {
        const positions = [];
        for (let i = 0; i <= desc.vSpan; i++) {
            for (let j = 0; j <= desc.uSpan; j++) {
                positions.push((j / desc.uSpan - 1 / 2) * desc.width);
                positions.push(0);
                positions.push((i / desc.vSpan - 1 / 2) * desc.height);
            }
        }
        const indices = [];
        for (let i = 0; i < desc.vSpan; i++) {
            let degenerate_left_index = 0;
            let degenerate_right_index = 0;
            for (let j = 0; j <= desc.uSpan; j++) {
                indices.push(i * (desc.uSpan + 1) + j);
                indices.push((i + 1) * (desc.uSpan + 1) + j);
                if (j === 0) {
                    degenerate_left_index = (i + 1) * (desc.uSpan + 1) + j;
                }
                else if (j === desc.uSpan) {
                    degenerate_right_index = (i + 1) * (desc.uSpan + 1) + j;
                }
            }
            indices.push(degenerate_right_index);
            indices.push(degenerate_left_index);
        }
        const normals = [];
        for (let i = 0; i <= desc.vSpan; i++) {
            for (let j = 0; j <= desc.uSpan; j++) {
                normals.push(0);
                normals.push(1);
                normals.push(0);
            }
        }
        const texcoords = [];
        for (let i = 0; i <= desc.vSpan; i++) {
            const i_ = desc.flipTextureCoordinateY ? i : desc.vSpan - i;
            for (let j = 0; j <= desc.uSpan; j++) {
                if (desc.isUVRepeat) {
                    texcoords.push(j);
                    texcoords.push(i_);
                }
                else {
                    texcoords.push(j / desc.uSpan);
                    texcoords.push(i_ / desc.vSpan);
                }
            }
        }
        // Check Size
        const attributeSemantics = [
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Normal.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Texcoord0.XY,
        ];
        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.TriangleStrip;
        const attributes = [
            new Float32Array(positions),
            new Float32Array(normals),
            new Float32Array(texcoords),
        ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode,
            indices: new Uint16Array(indices),
            material: desc === null || desc === void 0 ? void 0 : desc.material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/Sphere.ts":
/*!**************************************************!*\
  !*** ./src/foundation/geometry/shapes/Sphere.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sphere": () => (/* binding */ Sphere)
/* harmony export */ });
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");




/**
 * Sphere class
 */
class Sphere extends _IShape__WEBPACK_IMPORTED_MODULE_3__.IShape {
    constructor() {
        super();
    }
    generate({ radius, widthSegments, heightSegments, material, }) {
        const positions = [];
        const texcoords = [];
        const normals = [];
        if (Math.abs(radius) < Number.EPSILON) {
            console.warn('The argument radius is zero / nearly zero. Rn will take the radius as 0.001 for safety. Check your code.');
            radius = 0.001;
        }
        const shiftValue = 0.00001; // for avoid Singular point
        for (let latNumber = 0; latNumber <= heightSegments; latNumber++) {
            const theta = (latNumber * Math.PI) / heightSegments + shiftValue;
            const sinTheta = Math.sin(theta);
            const cosTheta = Math.cos(theta);
            for (let longNumber = 0; longNumber <= widthSegments; longNumber++) {
                const phi = (longNumber * 2 * Math.PI) / widthSegments;
                const sinPhi = Math.sin(phi);
                const cosPhi = Math.cos(phi);
                const x = radius * cosPhi * sinTheta;
                const y = radius * cosTheta;
                const z = radius * sinPhi * sinTheta;
                const position = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([x, y, z]);
                positions.push(x);
                positions.push(y);
                positions.push(z);
                const u = 1 - longNumber / widthSegments;
                const v = latNumber / heightSegments;
                texcoords.push(u);
                texcoords.push(v);
                const normal = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.normalize(position);
                normals.push(normal.x);
                normals.push(normal.y);
                normals.push(normal.z);
            }
        }
        // first    first+1
        //    +-------+
        //    |     / |
        //    |   /   |
        //    | /     |
        //    +-------+
        // second   second+1
        //
        const indices = [];
        for (let latNumber = 0; latNumber < heightSegments; latNumber++) {
            for (let longNumber = 0; longNumber < widthSegments; longNumber++) {
                const first = latNumber * (widthSegments + 1) + longNumber;
                const second = first + widthSegments + 1;
                indices.push(first + 1);
                indices.push(second);
                indices.push(first);
                indices.push(first + 1);
                indices.push(second + 1);
                indices.push(second);
            }
        }
        const attributeSemantics = [
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Position.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Normal.XYZ,
            _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute.Texcoord0.XY,
        ];
        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Triangles;
        const attributes = [
            new Float32Array(positions),
            new Float32Array(normals),
            new Float32Array(texcoords),
        ];
        this.copyVertexData({
            attributes,
            attributeSemantics,
            primitiveMode,
            indices: new Uint16Array(indices),
            material,
        });
    }
}


/***/ }),

/***/ "./src/foundation/geometry/shapes/index.ts":
/*!*************************************************!*\
  !*** ./src/foundation/geometry/shapes/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Axis": () => (/* reexport safe */ _Axis__WEBPACK_IMPORTED_MODULE_0__.Axis),
/* harmony export */   "Cube": () => (/* reexport safe */ _Cube__WEBPACK_IMPORTED_MODULE_1__.Cube),
/* harmony export */   "Grid": () => (/* reexport safe */ _Grid__WEBPACK_IMPORTED_MODULE_2__.Grid),
/* harmony export */   "IShape": () => (/* reexport safe */ _IShape__WEBPACK_IMPORTED_MODULE_3__.IShape),
/* harmony export */   "Joint": () => (/* reexport safe */ _Joint__WEBPACK_IMPORTED_MODULE_4__.Joint),
/* harmony export */   "Line": () => (/* reexport safe */ _Line__WEBPACK_IMPORTED_MODULE_5__.Line),
/* harmony export */   "Plane": () => (/* reexport safe */ _Plane__WEBPACK_IMPORTED_MODULE_6__.Plane),
/* harmony export */   "Sphere": () => (/* reexport safe */ _Sphere__WEBPACK_IMPORTED_MODULE_7__.Sphere)
/* harmony export */ });
/* harmony import */ var _Axis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Axis */ "./src/foundation/geometry/shapes/Axis.ts");
/* harmony import */ var _Cube__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Cube */ "./src/foundation/geometry/shapes/Cube.ts");
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Grid */ "./src/foundation/geometry/shapes/Grid.ts");
/* harmony import */ var _IShape__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IShape */ "./src/foundation/geometry/shapes/IShape.ts");
/* harmony import */ var _Joint__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Joint */ "./src/foundation/geometry/shapes/Joint.ts");
/* harmony import */ var _Line__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Line */ "./src/foundation/geometry/shapes/Line.ts");
/* harmony import */ var _Plane__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Plane */ "./src/foundation/geometry/shapes/Plane.ts");
/* harmony import */ var _Sphere__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Sphere */ "./src/foundation/geometry/shapes/Sphere.ts");










/***/ }),

/***/ "./src/foundation/geometry/types/GeometryTypes.ts":
/*!********************************************************!*\
  !*** ./src/foundation/geometry/types/GeometryTypes.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PrimitiveSortKey_BitLength_Depth": () => (/* binding */ PrimitiveSortKey_BitLength_Depth),
/* harmony export */   "PrimitiveSortKey_BitLength_Material": () => (/* binding */ PrimitiveSortKey_BitLength_Material),
/* harmony export */   "PrimitiveSortKey_BitLength_PrimitiveType": () => (/* binding */ PrimitiveSortKey_BitLength_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitLength_TranslucencyType": () => (/* binding */ PrimitiveSortKey_BitLength_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_Material": () => (/* binding */ PrimitiveSortKey_BitOffset_Material),
/* harmony export */   "PrimitiveSortKey_BitOffset_PrimitiveType": () => (/* binding */ PrimitiveSortKey_BitOffset_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitOffset_TranslucencyType": () => (/* binding */ PrimitiveSortKey_BitOffset_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_ViewportLayer": () => (/* binding */ PrimitiveSortKey_BitOffset_ViewportLayer)
/* harmony export */ });
const PrimitiveSortKey_BitLength_PrimitiveType = 3;
const PrimitiveSortKey_BitLength_Material = 10;
const PrimitiveSortKey_BitLength_TranslucencyType = 2;
const PrimitiveSortKey_BitOffset_PrimitiveType = 0;
const PrimitiveSortKey_BitOffset_Material = PrimitiveSortKey_BitLength_PrimitiveType;
const PrimitiveSortKey_BitOffset_TranslucencyType = PrimitiveSortKey_BitLength_PrimitiveType +
    PrimitiveSortKey_BitLength_Material;
const PrimitiveSortKey_BitOffset_ViewportLayer = PrimitiveSortKey_BitLength_PrimitiveType +
    PrimitiveSortKey_BitLength_Material +
    PrimitiveSortKey_BitLength_TranslucencyType;
const PrimitiveSortKey_BitLength_Depth = 32;


/***/ }),

/***/ "./src/foundation/geometry/types/index.ts":
/*!************************************************!*\
  !*** ./src/foundation/geometry/types/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PrimitiveSortKey_BitLength_Depth": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_Depth),
/* harmony export */   "PrimitiveSortKey_BitLength_Material": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_Material),
/* harmony export */   "PrimitiveSortKey_BitLength_PrimitiveType": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitLength_TranslucencyType": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_Material": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_Material),
/* harmony export */   "PrimitiveSortKey_BitOffset_PrimitiveType": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitOffset_TranslucencyType": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_ViewportLayer": () => (/* reexport safe */ _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_ViewportLayer)
/* harmony export */ });
/* harmony import */ var _GeometryTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeometryTypes */ "./src/foundation/geometry/types/GeometryTypes.ts");



/***/ }),

/***/ "./src/foundation/gizmos/AABBGizmo.ts":
/*!********************************************!*\
  !*** ./src/foundation/gizmos/AABBGizmo.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABBGizmo": () => (/* binding */ AABBGizmo)
/* harmony export */ });
/* harmony import */ var _Gizmo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Gizmo */ "./src/foundation/gizmos/Gizmo.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");







/**
 * AABB Gizmo class
 */
class AABBGizmo extends _Gizmo__WEBPACK_IMPORTED_MODULE_0__.Gizmo {
    /**
     * Constructor
     * @param target the object which this gizmo belong to
     */
    constructor(target) {
        super(target);
    }
    ///
    ///
    /// Accessors
    ///
    ///
    get isSetup() {
        if (this.__topEntity != null) {
            return true;
        }
        else {
            return false;
        }
    }
    ///
    ///
    /// Friends Members
    ///
    ///
    /**
     * @private
     * setup entities of Gizmo if not done yet
     */
    _setup() {
        if (this.__toSkipSetup()) {
            return;
        }
        this.__topEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_6__.EntityHelper.createMeshEntity();
        this.__topEntity.tryToSetUniqueName(`AABBGizmo_of_${this.__target.uniqueName}`, true);
        this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix =
            true;
        this.__target
            .getSceneGraph()
            ._addGizmoChild(this.__topEntity.getSceneGraph());
        const meshComponent = this.__topEntity.tryToGetMesh();
        AABBGizmo.__mesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_5__.Mesh();
        AABBGizmo.__mesh.addPrimitive(AABBGizmo.generatePrimitive());
        meshComponent.setMesh(AABBGizmo.__mesh);
        this.setGizmoTag();
    }
    /**
     * generate the primitive of the gizmo
     * @returns a primitive of the gizmo
     */
    static generatePrimitive() {
        const indices = new Uint32Array([
            // XY Plane on -Z
            0, 1, 1, 2, 2, 3, 3, 0,
            // XY Plane on +Z
            4, 5, 5, 6, 6, 7, 7, 4,
            // YZ Plane on -X
            0, 3, 3, 7, 7, 4, 4, 0,
            // YZ Plane on +X
            1, 2, 2, 6, 6, 5, 5, 1,
            // XZ Plane on -Y
            0, 1, 1, 5, 5, 4, 4, 0,
            // XZ Plane on +Y
            3, 2, 2, 6, 6, 7, 7, 3,
        ]);
        const length = 1;
        const positions = new Float32Array([
            /// -Z
            // 0
            -length,
            -length,
            -length,
            // 1
            length,
            -length,
            -length,
            // 2
            length,
            length,
            -length,
            // 3
            -length,
            length,
            -length,
            /// +Z
            // 4
            -length,
            -length,
            length,
            // 5
            length,
            -length,
            length,
            // 6
            length,
            length,
            length,
            // 7
            -length,
            length,
            length,
        ]);
        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_3__.Primitive.createPrimitive({
            indices: indices,
            attributeSemantics: [_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__.VertexAttribute.Position.XYZ],
            attributes: [positions],
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_1__.PrimitiveMode.Lines,
        });
        return primitive;
    }
    /**
     * @private
     * update the transform and etc of the gizmo
     */
    _update() {
        if (this.__topEntity == null) {
            return;
        }
        const sg = this.__target.getSceneGraph();
        const aabb = sg.worldAABB;
        this.__topEntity.getTransform().translate = aabb.centerPoint;
        this.__topEntity.getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.fromCopyArray([
            aabb.sizeX / 2,
            aabb.sizeY / 2,
            aabb.sizeZ / 2,
        ]);
    }
}


/***/ }),

/***/ "./src/foundation/gizmos/Gizmo.ts":
/*!****************************************!*\
  !*** ./src/foundation/gizmos/Gizmo.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Gizmo": () => (/* binding */ Gizmo)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");


/**
 * Abstract Gizmo class
 */
class Gizmo extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    /**
     * Constructor
     * @param entity the object which this gizmo belong to
     */
    constructor(target) {
        super();
        this.__isVisible = false;
        this.__target = target;
        this.setGizmoTag();
    }
    ///
    ///
    /// Accessors
    ///
    ///
    set isVisible(flg) {
        this.__setVisible(flg);
    }
    get isVisible() {
        return this.__isVisible;
    }
    __setVisible(flg) {
        this.__isVisible = flg;
        if (this.__topEntity) {
            this.__topEntity.getSceneGraph().setVisibilityRecursively(flg);
        }
    }
    __toSkipSetup() {
        if (this.isSetup) {
            return true;
        }
        if (this.__target.matchTag('Being', 'gizmo')) {
            return true;
        }
        return false;
    }
    setGizmoTag() {
        if (this.__topEntity) {
            this.__topEntity.tryToSetTag({ tag: 'Being', value: 'gizmo' });
            this.__topEntity.tryToSetTag({ tag: 'Gizmo', value: 'top' });
            const sceneGraphs = _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__.SceneGraphComponent.flattenHierarchy(this.__topEntity.getSceneGraph(), false);
            for (const sg of sceneGraphs) {
                sg.entity.tryToSetTag({ tag: 'Being', value: 'gizmo' });
            }
            this.__topEntity.tryToSetTag({
                tag: 'type',
                value: 'background-assets',
            });
        }
    }
}


/***/ }),

/***/ "./src/foundation/gizmos/LocatorGizmo.ts":
/*!***********************************************!*\
  !*** ./src/foundation/gizmos/LocatorGizmo.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LocatorGizmo": () => (/* binding */ LocatorGizmo)
/* harmony export */ });
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _Gizmo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Gizmo */ "./src/foundation/gizmos/Gizmo.ts");







/**
 * Locator Gizmo class
 */
class LocatorGizmo extends _Gizmo__WEBPACK_IMPORTED_MODULE_6__.Gizmo {
    /**
     * Constructor
     * @param target the object which this gizmo belong to
     */
    constructor(target) {
        super(target);
    }
    ///
    ///
    /// Accessors
    ///
    ///
    get isSetup() {
        if (this.__topEntity != null) {
            return true;
        }
        else {
            return false;
        }
    }
    set length(val) {
        LocatorGizmo.__length = val;
    }
    get length() {
        return LocatorGizmo.__length;
    }
    ///
    ///
    /// Friends Members
    ///
    ///
    /**
     * @private
     * setup entities of Gizmo if not done yet
     */
    _setup() {
        if (this.__toSkipSetup()) {
            return;
        }
        this.__topEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_4__.EntityHelper.createMeshEntity();
        this.__topEntity.tryToSetUniqueName(`LocatorGizmo_of_${this.__target.uniqueName}`, true);
        this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix =
            true;
        this.__target
            .getSceneGraph()
            ._addGizmoChild(this.__topEntity.getSceneGraph());
        const sceneGraphComponent = this.__topEntity.tryToGetMesh();
        LocatorGizmo.__mesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_2__.Mesh();
        LocatorGizmo.__mesh.addPrimitive(LocatorGizmo.__generatePrimitive());
        sceneGraphComponent.setMesh(LocatorGizmo.__mesh);
        this.setGizmoTag();
    }
    /**
     * @private
     * update the transform and etc of the gizmo
     */
    _update() {
        if (this.__topEntity == null) {
            return;
        }
        const sg = this.__target.getSceneGraph();
        const aabb = sg.worldAABB;
        this.__topEntity.getTransform().translate = aabb.centerPoint;
        this.__topEntity.getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([
            Math.min(1, aabb.isVanilla() ? 1 : aabb.sizeX / 2),
            Math.min(1, aabb.isVanilla() ? 1 : aabb.sizeY / 2),
            Math.min(1, aabb.isVanilla() ? 1 : aabb.sizeZ / 2),
        ]);
    }
    ///
    ///
    /// Private Static Members
    ///
    ///
    static __generatePrimitive() {
        const positions = new Float32Array([
            // X axis
            0,
            0,
            0,
            this.__length,
            0,
            0,
            // Y axis
            0,
            0,
            0,
            0,
            this.__length,
            0,
            // Z axis
            0,
            0,
            0,
            0,
            0,
            this.__length,
        ]);
        const color = new Float32Array([
            // X axis as Red
            1, 0, 0, 1, 0, 0,
            // Y axis as Green
            0, 1, 0, 0, 1, 0,
            // Z axis as Blue
            0, 0, 1, 0, 0, 1,
        ]);
        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_3__.Primitive.createPrimitive({
            attributeSemantics: [
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Position.XYZ,
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Color0.XYZ,
            ],
            attributes: [positions, color],
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode.Lines,
        });
        return primitive;
    }
}
LocatorGizmo.__length = 1;


/***/ }),

/***/ "./src/foundation/gizmos/ScaleGizmo.ts":
/*!*********************************************!*\
  !*** ./src/foundation/gizmos/ScaleGizmo.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ScaleGizmo": () => (/* binding */ ScaleGizmo)
/* harmony export */ });
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geometry/shapes/Cube */ "./src/foundation/geometry/shapes/Cube.ts");
/* harmony import */ var _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../geometry/shapes/Plane */ "./src/foundation/geometry/shapes/Plane.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/Matrix33 */ "./src/foundation/math/Matrix33.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _system_InputManager__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../system/InputManager */ "./src/foundation/system/InputManager.ts");
/* harmony import */ var _Gizmo__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./Gizmo */ "./src/foundation/gizmos/Gizmo.ts");
























/**
 * Translation Gizmo class
 */
class ScaleGizmo extends _Gizmo__WEBPACK_IMPORTED_MODULE_23__.Gizmo {
    /**
     * Constructor
     * @param target the object which this gizmo belong to
     */
    constructor(target) {
        super(target);
        this.__onPointerDownFunc = this.__onPointerDown.bind(this);
        this.__onPointerMoveFunc = this.__onPointerMove.bind(this);
        this.__onPointerUpFunc = this.__onPointerUp.bind(this);
    }
    ///
    ///
    /// Accessors
    ///
    ///
    get isSetup() {
        if (this.__topEntity != null) {
            return true;
        }
        else {
            return false;
        }
    }
    set length(val) {
        ScaleGizmo.__length = val;
    }
    get length() {
        return ScaleGizmo.__length;
    }
    set isVisible(flg) {
        if (this.__isVisible === false && flg === true) {
            let eventTargetDom = window;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.exist(_core_Config__WEBPACK_IMPORTED_MODULE_2__.Config.eventTargetDom)) {
                eventTargetDom = _core_Config__WEBPACK_IMPORTED_MODULE_2__.Config.eventTargetDom;
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.register(_system_InputManager__WEBPACK_IMPORTED_MODULE_22__.INPUT_HANDLING_STATE_GIZMO_SCALE, [
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.getEvent)('start'),
                    handler: this.__onPointerDownFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.getEvent)('move'),
                    handler: this.__onPointerMoveFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.getEvent)('end'),
                    handler: this.__onPointerUpFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: 'pointerleave',
                    handler: this.__onPointerUpFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
            ]);
            this.__topEntity.getSceneGraph().addChild(ScaleGizmo.__groupEntity.getSceneGraph());
            ScaleGizmo.__latestTargetEntity = this.__target;
            if (ScaleGizmo.__space === 'local') {
                ScaleGizmo.__groupEntity.getTransform().quaternion =
                    this.__target.getTransform().quaternion;
            }
            else if (ScaleGizmo.__space === 'world') {
                ScaleGizmo.__groupEntity.getTransform().quaternion =
                    _math_Quaternion__WEBPACK_IMPORTED_MODULE_17__.Quaternion.fromCopy4(0, 0, 0, 1);
            }
        }
        if (this.__isVisible === true && flg === false) {
            _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.unregister(_system_InputManager__WEBPACK_IMPORTED_MODULE_22__.INPUT_HANDLING_STATE_GIZMO_SCALE);
            ScaleGizmo.__deltaPoint = this.__target.getTransform().scale;
            ScaleGizmo.__pickStatedPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.zero();
            ScaleGizmo.__isPointerDown = false;
            ScaleGizmo.__targetScaleBackup = this.__target.getTransform().scale;
            ScaleGizmo.__activeAxis = 'none';
        }
        _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.setActive(_system_InputManager__WEBPACK_IMPORTED_MODULE_22__.INPUT_HANDLING_STATE_GIZMO_SCALE, flg);
        this.__setVisible(flg);
        ScaleGizmo.__xyPlaneEntity.getSceneGraph().isVisible = false;
        ScaleGizmo.__yzPlaneEntity.getSceneGraph().isVisible = false;
        ScaleGizmo.__zxPlaneEntity.getSceneGraph().isVisible = false;
    }
    setSpace(space) {
        ScaleGizmo.__space = space;
        if (this.__isVisible) {
            this.isVisible = false;
            this.isVisible = true;
        }
    }
    get isVisible() {
        return this.__isVisible;
    }
    ///
    ///
    /// Friends Members
    ///
    ///
    /**
     * @private
     * setup entities of Gizmo if not done yet
     */
    _setup() {
        if (this.__toSkipSetup()) {
            return;
        }
        this.__topEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createGroupEntity();
        this.__topEntity.tryToSetUniqueName(`ScaleGizmo_of_${this.__target.uniqueName}`, true);
        this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix =
            true;
        // add this topEntity to the target as gizmo
        this.__target
            .getSceneGraph()
            ._addGizmoChild(this.__topEntity.getSceneGraph());
        // setup the mesh
        // x
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__xCubeEntity)) {
            this.xMesh();
            this.xEdgeMesh();
        }
        // y
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__yCubeEntity)) {
            this.yMesh();
            this.yEdgeMesh();
        }
        // z
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__zCubeEntity)) {
            this.zMesh();
            this.zEdgeMesh();
        }
        // xy Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__xyPlaneEntity)) {
            this.xyPlane();
        }
        // yz Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__yzPlaneEntity)) {
            this.yzPlane();
        }
        // zx Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__zxPlaneEntity)) {
            this.zxPlane();
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is.not.exist(ScaleGizmo.__groupEntity)) {
            ScaleGizmo.__groupEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createGroupEntity();
        }
        this.__topEntity.getSceneGraph().addChild(ScaleGizmo.__groupEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__xCubeEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__yCubeEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__zCubeEntity.getSceneGraph());
        // ScaleGizmo.__groupEntity
        //   .getSceneGraph()
        //   .addChild(ScaleGizmo.__xEdgeCubeEntity.getSceneGraph());
        // ScaleGizmo.__groupEntity
        //   .getSceneGraph()
        //   .addChild(ScaleGizmo.__yEdgeCubeEntity.getSceneGraph());
        // ScaleGizmo.__groupEntity
        //   .getSceneGraph()
        //   .addChild(ScaleGizmo.__zEdgeCubeEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__xyPlaneEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__yzPlaneEntity.getSceneGraph());
        ScaleGizmo.__groupEntity
            .getSceneGraph()
            .addChild(ScaleGizmo.__zxPlaneEntity.getSceneGraph());
        ScaleGizmo.__latestTargetEntity = this.__target;
        this.setGizmoTag();
    }
    zxPlane() {
        ScaleGizmo.__zxPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_zxPlane', true);
        ScaleGizmo.__zxPlaneEntity.getSceneGraph().isVisible = false;
        // TranslationGizmo.__zxPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
        // TranslationGizmo.__zxPlaneEntity.getTransform().rotate =
        // Vector3.fromCopy3(90, 0, 0);
        ScaleGizmo.__zxPlaneMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__zxPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([0, 0.5, 0, 0]));
        ScaleGizmo.__zxPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
        ScaleGizmo.__zxPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__zxPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
        ScaleGizmo.__zxPlanePrimitive.generate({
            width: 100000,
            height: 100000,
            uSpan: 1,
            vSpan: 1,
            isUVRepeat: true,
            flipTextureCoordinateY: false,
            material: ScaleGizmo.__zxPlaneMaterial,
        });
        ScaleGizmo.__zxPlaneMesh.addPrimitive(ScaleGizmo.__zxPlanePrimitive);
        ScaleGizmo.__zxPlaneEntity.getMesh().setMesh(ScaleGizmo.__zxPlaneMesh);
    }
    yzPlane() {
        ScaleGizmo.__yzPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_yzPlane', true);
        ScaleGizmo.__yzPlaneEntity.getSceneGraph().isVisible = false;
        // TranslationGizmo.__yzPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
        ScaleGizmo.__yzPlaneEntity.getTransform().rotate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0, 0, _math_MathUtil__WEBPACK_IMPORTED_MODULE_13__.MathUtil.degreeToRadian(90));
        ScaleGizmo.__yzPlaneMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__yzPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
        ScaleGizmo.__yzPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([0.5, 0, 0, 0]));
        ScaleGizmo.__yzPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__yzPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
        ScaleGizmo.__yzPlanePrimitive.generate({
            width: 100000,
            height: 100000,
            uSpan: 1,
            vSpan: 1,
            isUVRepeat: true,
            flipTextureCoordinateY: false,
            material: ScaleGizmo.__yzPlaneMaterial,
        });
        ScaleGizmo.__yzPlaneMesh.addPrimitive(ScaleGizmo.__yzPlanePrimitive);
        ScaleGizmo.__yzPlaneEntity.getMesh().setMesh(ScaleGizmo.__yzPlaneMesh);
    }
    xyPlane() {
        ScaleGizmo.__xyPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_xyPlane', true);
        ScaleGizmo.__xyPlaneEntity.getSceneGraph().isVisible = false;
        // TranslationGizmo.__xyPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
        ScaleGizmo.__xyPlaneEntity.getTransform().rotate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(_math_MathUtil__WEBPACK_IMPORTED_MODULE_13__.MathUtil.degreeToRadian(90), 0, 0);
        ScaleGizmo.__xyPlaneMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__xyPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
        ScaleGizmo.__xyPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([0, 0, 0.5, 0]));
        ScaleGizmo.__xyPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__xyPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
        ScaleGizmo.__xyPlanePrimitive.generate({
            width: 100000,
            height: 100000,
            uSpan: 1,
            vSpan: 1,
            isUVRepeat: true,
            flipTextureCoordinateY: false,
            material: ScaleGizmo.__xyPlaneMaterial,
        });
        ScaleGizmo.__xyPlaneMesh.addPrimitive(ScaleGizmo.__xyPlanePrimitive);
        ScaleGizmo.__xyPlaneEntity.getMesh().setMesh(ScaleGizmo.__xyPlaneMesh);
    }
    zMesh() {
        ScaleGizmo.__zCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_zCube', true);
        ScaleGizmo.__zCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0, 0, 1);
        ScaleGizmo.__zCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__zCubeMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__zCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([0, 0, 1, 1]));
        ScaleGizmo.__zCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__zCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0.05, 0.05, 1),
            material: ScaleGizmo.__zCubeMaterial,
        });
        ScaleGizmo.__zCubeMesh.addPrimitive(ScaleGizmo.__zCubePrimitive);
        ScaleGizmo.__zCubeEntity.getMesh().setMesh(ScaleGizmo.__zCubeMesh);
    }
    yMesh() {
        ScaleGizmo.__yCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_yCube', true);
        ScaleGizmo.__yCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0, 1, 0);
        ScaleGizmo.__yCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__yCubeMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__yCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([0, 1, 0, 1]));
        ScaleGizmo.__yCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__yCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0.05, 1, 0.05),
            material: ScaleGizmo.__yCubeMaterial,
        });
        ScaleGizmo.__yCubeMesh.addPrimitive(ScaleGizmo.__yCubePrimitive);
        ScaleGizmo.__yCubeEntity.getMesh().setMesh(ScaleGizmo.__yCubeMesh);
    }
    xMesh() {
        ScaleGizmo.__xCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xCubeEntity.tryToSetUniqueName('ScaleGizmo_xCube', true);
        ScaleGizmo.__xCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(1, 0, 0);
        ScaleGizmo.__xCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__xCubeMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
        ScaleGizmo.__xCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopyArray4([1, 0, 0, 1]));
        ScaleGizmo.__xCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__xCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(1, 0.05, 0.05),
            material: ScaleGizmo.__xCubeMaterial,
        });
        ScaleGizmo.__xCubeMesh.addPrimitive(ScaleGizmo.__xCubePrimitive);
        ScaleGizmo.__xCubeEntity.getMesh().setMesh(ScaleGizmo.__xCubeMesh);
    }
    xEdgeMesh() {
        ScaleGizmo.__xEdgeCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__xEdgeCubeEntity.tryToSetUniqueName('ScaleGizmo_xEdgeCube', true);
        ScaleGizmo.__xEdgeCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(1, 0, 0);
        ScaleGizmo.__xEdgeCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__xEdgeCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__xEdgeCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0.1, 0.1, 0.1),
            material: ScaleGizmo.__xCubeMaterial,
        });
        ScaleGizmo.__xEdgeCubeMesh.addPrimitive(ScaleGizmo.__xEdgeCubePrimitive);
        ScaleGizmo.__xEdgeCubeEntity.getMesh().setMesh(ScaleGizmo.__xEdgeCubeMesh);
        ScaleGizmo.__xCubeEntity.addChild(ScaleGizmo.__xEdgeCubeEntity.getSceneGraph());
    }
    yEdgeMesh() {
        ScaleGizmo.__yEdgeCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__yEdgeCubeEntity.tryToSetUniqueName('ScaleGizmo_yEdgeCube', true);
        ScaleGizmo.__yEdgeCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0, 1, 0);
        ScaleGizmo.__yEdgeCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__yEdgeCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__yEdgeCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0.1, 0.1, 0.1),
            material: ScaleGizmo.__yCubeMaterial,
        });
        ScaleGizmo.__yEdgeCubeMesh.addPrimitive(ScaleGizmo.__yEdgeCubePrimitive);
        ScaleGizmo.__yEdgeCubeEntity.getMesh().setMesh(ScaleGizmo.__yEdgeCubeMesh);
        ScaleGizmo.__yCubeEntity.addChild(ScaleGizmo.__yEdgeCubeEntity.getSceneGraph());
    }
    zEdgeMesh() {
        ScaleGizmo.__zEdgeCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
        ScaleGizmo.__zEdgeCubeEntity.tryToSetUniqueName('ScaleGizmo_zEdgeCube', true);
        ScaleGizmo.__zEdgeCubeEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0, 0, 1);
        ScaleGizmo.__zEdgeCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
        ScaleGizmo.__zEdgeCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
        ScaleGizmo.__zEdgeCubePrimitive.generate({
            widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(0.1, 0.1, 0.1),
            material: ScaleGizmo.__zCubeMaterial,
        });
        ScaleGizmo.__zEdgeCubeMesh.addPrimitive(ScaleGizmo.__zEdgeCubePrimitive);
        ScaleGizmo.__zEdgeCubeEntity.getMesh().setMesh(ScaleGizmo.__zEdgeCubeMesh);
        ScaleGizmo.__zCubeEntity.addChild(ScaleGizmo.__zEdgeCubeEntity.getSceneGraph());
    }
    /**
     * @private
     * update the transform and etc of the gizmo
     */
    _update() {
        if (this.__topEntity == null) {
            return;
        }
        const sg = this.__target.getSceneGraph();
        const aabb = sg.worldAABB;
        this.__topEntity.getTransform().translate = aabb.centerPoint;
        const max = Math.max(aabb.sizeX, aabb.sizeY, aabb.sizeZ);
        this.__topEntity.getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopyArray([
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
        ]);
        if (ScaleGizmo.__isPointerDown) {
            if (ScaleGizmo.__latestTargetEntity === this.__target) {
                this.__target.getTransform().scale = ScaleGizmo.__deltaPoint.clone();
            }
        }
    }
    ///
    ///
    /// Private Static Members
    ///
    ///
    static __generatePrimitive() {
        const positions = new Float32Array([
            // X axis
            0,
            0,
            0,
            this.__length,
            0,
            0,
            // Y axis
            0,
            0,
            0,
            0,
            this.__length,
            0,
            // Z axis
            0,
            0,
            0,
            0,
            0,
            this.__length,
        ]);
        const color = new Float32Array([
            // X axis as Red
            1, 0, 0, 1, 0, 0,
            // Y axis as Green
            0, 1, 0, 0, 1, 0,
            // Z axis as Blue
            0, 0, 1, 0, 0, 1,
        ]);
        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__.Primitive.createPrimitive({
            attributeSemantics: [
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.Position.XYZ,
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.Color0.XYZ,
            ],
            attributes: [positions, color],
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__.PrimitiveMode.Lines,
        });
        return primitive;
    }
    __onPointerDown(evt) {
        evt.preventDefault();
        ScaleGizmo.__isPointerDown = true;
        ScaleGizmo.__originalX = evt.clientX;
        ScaleGizmo.__originalY = evt.clientY;
        // InputManager.enableCameraController();
        const worldMatrix = this.__target.getSceneGraph().worldMatrix.getRotate();
        const scaleVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.one(); //this.__target.getSceneGraph().worldMatrix.getScale();
        let rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.fromCopy9RowMajor(scaleVec.x * worldMatrix.m00, scaleVec.x * worldMatrix.m01, scaleVec.x * worldMatrix.m02, scaleVec.y * worldMatrix.m10, scaleVec.y * worldMatrix.m11, scaleVec.y * worldMatrix.m12, scaleVec.z * worldMatrix.m20, scaleVec.z * worldMatrix.m21, scaleVec.z * worldMatrix.m22);
        if (ScaleGizmo.__space === 'local') {
            rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.transpose(rotMat);
        }
        else if (ScaleGizmo.__space === 'world') {
            rotMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_16__.MutableMatrix33.identity();
        }
        const { xResult, yResult, zResult } = ScaleGizmo.castRay(evt);
        if (xResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(xResult.data);
            ScaleGizmo.__pickStatedPoint = rotMat.multiplyVector(xResult.data.position.clone());
            console.log('Down:' + ScaleGizmo.__pickStatedPoint.toStringApproximately());
            ScaleGizmo.__activeAxis = 'x';
        }
        if (yResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(yResult.data);
            ScaleGizmo.__pickStatedPoint = rotMat.multiplyVector(yResult.data.position.clone());
            console.log('Down:' + ScaleGizmo.__pickStatedPoint.toStringApproximately());
            ScaleGizmo.__activeAxis = 'y';
        }
        if (zResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(zResult.data);
            ScaleGizmo.__pickStatedPoint = rotMat.multiplyVector(zResult.data.position.clone());
            console.log('Down:' + ScaleGizmo.__pickStatedPoint.toStringApproximately());
            ScaleGizmo.__activeAxis = 'z';
        }
        if (ScaleGizmo.__latestTargetEntity === this.__target) {
            ScaleGizmo.__targetScaleBackup = this.__target.getTransform().scale;
        }
    }
    __onPointerMove(evt) {
        evt.preventDefault();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_20__.Is["false"](ScaleGizmo.__isPointerDown)) {
            return;
        }
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const worldMatrix = this.__target.getSceneGraph().worldMatrix.getRotate();
        const scaleVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.one(); //this.__target.getSceneGraph().worldMatrix.getScale();
        let rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.fromCopy9RowMajor(scaleVec.x * worldMatrix.m00, scaleVec.x * worldMatrix.m01, scaleVec.x * worldMatrix.m02, scaleVec.y * worldMatrix.m10, scaleVec.y * worldMatrix.m11, scaleVec.y * worldMatrix.m12, scaleVec.z * worldMatrix.m20, scaleVec.z * worldMatrix.m21, scaleVec.z * worldMatrix.m22);
        if (ScaleGizmo.__space === 'local') {
            rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.transpose(rotMat);
        }
        else if (ScaleGizmo.__space === 'world') {
            rotMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_16__.MutableMatrix33.identity();
        }
        let pickInMovingPoint = ScaleGizmo.__pickStatedPoint.clone();
        if (ScaleGizmo.__activeAxis === 'x') {
            const xResult = ScaleGizmo.__xyPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (xResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(xResult.data);
                const position = rotMat.multiplyVector(xResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(position.x, pickInMovingPoint.y, pickInMovingPoint.z);
                // pickInMovingPoint = Vector3.fromCopy3(xResult.data.position.x, pickInMovingPoint.y, pickInMovingPoint.z);
                console.log('Move:' + xResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.disableCameraController();
        }
        if (ScaleGizmo.__activeAxis === 'y') {
            const yResult = ScaleGizmo.__xyPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (yResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(yResult.data);
                const position = rotMat.multiplyVector(yResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(pickInMovingPoint.x, position.y, pickInMovingPoint.z);
                // pickInMovingPoint = Vector3.fromCopy3(pickInMovingPoint.x, yResult.data.position.y, pickInMovingPoint.z);
                console.log('Move:' + yResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.disableCameraController();
        }
        if (ScaleGizmo.__activeAxis === 'z') {
            const zResult = ScaleGizmo.__yzPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (zResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_21__.assertExist)(zResult.data);
                const position = rotMat.multiplyVector(zResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopy3(pickInMovingPoint.x, pickInMovingPoint.y, position.z);
                // pickInMovingPoint = Vector3.fromCopy3(pickInMovingPoint.x, pickInMovingPoint.y, zResult.data.position.z);
                console.log('Move:' + zResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.disableCameraController();
        }
        const sg = this.__target.getSceneGraph();
        const aabb = sg.worldAABB;
        const deltaVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.subtract(pickInMovingPoint, ScaleGizmo.__pickStatedPoint), 1 / aabb.lengthCenterToCorner);
        if (ScaleGizmo.__space === 'local') {
            ScaleGizmo.__deltaPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.add(ScaleGizmo.__targetScaleBackup, deltaVector3);
        }
        else if (ScaleGizmo.__space === 'world') {
            const worldMat = this.__target.getSceneGraph().worldMatrix;
            const existedScale = _math_Matrix44__WEBPACK_IMPORTED_MODULE_15__.Matrix44.multiply(worldMat, _math_Matrix44__WEBPACK_IMPORTED_MODULE_15__.Matrix44.scale(ScaleGizmo.__targetScaleBackup)).getScale();
            ScaleGizmo.__deltaPoint = _math_Matrix44__WEBPACK_IMPORTED_MODULE_15__.Matrix44.multiply(_math_Matrix44__WEBPACK_IMPORTED_MODULE_15__.Matrix44.invert(worldMat), _math_Matrix44__WEBPACK_IMPORTED_MODULE_15__.Matrix44.scale(_math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.add(deltaVector3, existedScale))).getScale();
        }
    }
    __onPointerUp(evt) {
        evt.preventDefault();
        ScaleGizmo.__isPointerDown = false;
        ScaleGizmo.__activeAxis = 'none';
        _system_InputManager__WEBPACK_IMPORTED_MODULE_22__.InputManager.enableCameraController();
        if (ScaleGizmo.__latestTargetEntity === this.__target) {
            ScaleGizmo.__targetScaleBackup = this.__target.getTransform().scale;
        }
    }
    static castRay2(evt) {
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const result = ScaleGizmo.__groupEntity
            .getSceneGraph()
            .castRayFromScreen(x, y, activeCamera, viewport, 0.0, []);
        return result;
    }
    static castRay(evt) {
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_19__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const xResult = ScaleGizmo.__xCubeEntity.getSceneGraph()
            .castRayFromScreen(x, y, activeCamera, viewport, 0.0);
        const yResult = ScaleGizmo.__yCubeEntity.getSceneGraph()
            .castRayFromScreen(x, y, activeCamera, viewport, 0.0);
        const zResult = ScaleGizmo.__zCubeEntity.getSceneGraph()
            .castRayFromScreen(x, y, activeCamera, viewport, 0.0);
        return { xResult, yResult, zResult };
    }
}
ScaleGizmo.__originalX = 0;
ScaleGizmo.__originalY = 0;
ScaleGizmo.__pickStatedPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.zero();
ScaleGizmo.__deltaPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.one();
ScaleGizmo.__targetScaleBackup = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.one();
ScaleGizmo.__isPointerDown = false;
ScaleGizmo.__activeAxis = 'none';
ScaleGizmo.__space = 'world';
ScaleGizmo.__length = 1;


/***/ }),

/***/ "./src/foundation/gizmos/TranslationGizmo.ts":
/*!***************************************************!*\
  !*** ./src/foundation/gizmos/TranslationGizmo.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationGizmo": () => (/* binding */ TranslationGizmo)
/* harmony export */ });
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geometry/shapes/Cube */ "./src/foundation/geometry/shapes/Cube.ts");
/* harmony import */ var _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../geometry/shapes/Plane */ "./src/foundation/geometry/shapes/Plane.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../math/Matrix33 */ "./src/foundation/math/Matrix33.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _system_InputManager__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../system/InputManager */ "./src/foundation/system/InputManager.ts");
/* harmony import */ var _Gizmo__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Gizmo */ "./src/foundation/gizmos/Gizmo.ts");























/**
 * Translation Gizmo class
 */
class TranslationGizmo extends _Gizmo__WEBPACK_IMPORTED_MODULE_22__.Gizmo {
    /**
     * Constructor
     * @param target the object which this gizmo belong to
     */
    constructor(target) {
        super(target);
        this.__onPointerDownFunc = this.__onPointerDown.bind(this);
        this.__onPointerMoveFunc = this.__onPointerMove.bind(this);
        this.__onPointerUpFunc = this.__onPointerUp.bind(this);
    }
    ///
    ///
    /// Accessors
    ///
    ///
    get isSetup() {
        if (this.__topEntity != null) {
            return true;
        }
        else {
            return false;
        }
    }
    set length(val) {
        TranslationGizmo.__length = val;
    }
    get length() {
        return TranslationGizmo.__length;
    }
    set isVisible(flg) {
        if (this.__isVisible === false && flg === true) {
            let eventTargetDom = window;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.exist(_core_Config__WEBPACK_IMPORTED_MODULE_2__.Config.eventTargetDom)) {
                eventTargetDom = _core_Config__WEBPACK_IMPORTED_MODULE_2__.Config.eventTargetDom;
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.register(_system_InputManager__WEBPACK_IMPORTED_MODULE_21__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION, [
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.getEvent)('start'),
                    handler: this.__onPointerDownFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.getEvent)('move'),
                    handler: this.__onPointerMoveFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: (0, _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.getEvent)('end'),
                    handler: this.__onPointerUpFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
                {
                    eventName: 'pointerleave',
                    handler: this.__onPointerUpFunc,
                    options: {},
                    classInstance: this,
                    eventTargetDom: eventTargetDom,
                },
            ]);
            this.__topEntity.getSceneGraph().addChild(TranslationGizmo.__groupEntity.getSceneGraph());
            TranslationGizmo.__latestTargetEntity = this.__target;
            if (TranslationGizmo.__space === 'local') {
                TranslationGizmo.__groupEntity.getTransform().quaternion =
                    this.__target.getTransform().quaternion;
            }
            else if (TranslationGizmo.__space === 'world') {
                TranslationGizmo.__groupEntity.getTransform().quaternion =
                    _math_Quaternion__WEBPACK_IMPORTED_MODULE_16__.Quaternion.fromCopy4(0, 0, 0, 1);
            }
        }
        if (this.__isVisible === true && flg === false) {
            _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.unregister(_system_InputManager__WEBPACK_IMPORTED_MODULE_21__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION);
            TranslationGizmo.__deltaPoint = this.__target.getTransform().translate;
            TranslationGizmo.__pickStatedPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.zero();
            TranslationGizmo.__isPointerDown = false;
            TranslationGizmo.__targetPointBackup =
                this.__target.getTransform().translate;
            TranslationGizmo.__activeAxis = 'none';
        }
        _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.setActive(_system_InputManager__WEBPACK_IMPORTED_MODULE_21__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION, flg);
        this.__setVisible(flg);
        TranslationGizmo.__xyPlaneEntity.getSceneGraph().isVisible = false;
        TranslationGizmo.__yzPlaneEntity.getSceneGraph().isVisible = false;
        TranslationGizmo.__zxPlaneEntity.getSceneGraph().isVisible = false;
    }
    setSpace(space) {
        TranslationGizmo.__space = space;
        if (this.__isVisible) {
            this.isVisible = false;
            this.isVisible = true;
        }
    }
    get isVisible() {
        return this.__isVisible;
    }
    ///
    ///
    /// Friends Members
    ///
    ///
    /**
     * @private
     * setup entities of Gizmo if not done yet
     */
    _setup() {
        if (this.__toSkipSetup()) {
            return;
        }
        this.__topEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createGroupEntity();
        this.__topEntity.tryToSetUniqueName(`TranslationGizmo_of_${this.__target.uniqueName}`, true);
        this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix =
            true;
        // add this topEntity to the target as gizmo
        this.__target
            .getSceneGraph()
            ._addGizmoChild(this.__topEntity.getSceneGraph());
        // setup the mesh
        // x
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__xCubeEntity)) {
            TranslationGizmo.__xCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_xCube', true);
            TranslationGizmo.__xCubeEntity.getTransform().translate =
                _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(1, 0, 0);
            TranslationGizmo.__xCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__xCubeMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__xCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([1, 0, 0, 1]));
            TranslationGizmo.__xCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
            TranslationGizmo.__xCubePrimitive.generate({
                widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(1, 0.05, 0.05),
                material: TranslationGizmo.__xCubeMaterial,
            });
            TranslationGizmo.__xCubeMesh.addPrimitive(TranslationGizmo.__xCubePrimitive);
            TranslationGizmo.__xCubeEntity
                .getMesh()
                .setMesh(TranslationGizmo.__xCubeMesh);
        }
        // y
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__yCubeEntity)) {
            TranslationGizmo.__yCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_yCube', true);
            TranslationGizmo.__yCubeEntity.getTransform().translate =
                _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(0, 1, 0);
            TranslationGizmo.__yCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__yCubeMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__yCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([0, 1, 0, 1]));
            TranslationGizmo.__yCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
            TranslationGizmo.__yCubePrimitive.generate({
                widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(0.05, 1, 0.05),
                material: TranslationGizmo.__yCubeMaterial,
            });
            TranslationGizmo.__yCubeMesh.addPrimitive(TranslationGizmo.__yCubePrimitive);
            TranslationGizmo.__yCubeEntity
                .getMesh()
                .setMesh(TranslationGizmo.__yCubeMesh);
        }
        // z
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__zCubeEntity)) {
            TranslationGizmo.__zCubeEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_zCube', true);
            TranslationGizmo.__zCubeEntity.getTransform().translate =
                _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(0, 0, 1);
            TranslationGizmo.__zCubeMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__zCubeMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__zCubeMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([0, 0, 1, 1]));
            TranslationGizmo.__zCubePrimitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_9__.Cube();
            TranslationGizmo.__zCubePrimitive.generate({
                widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(0.05, 0.05, 1),
                material: TranslationGizmo.__zCubeMaterial,
            });
            TranslationGizmo.__zCubeMesh.addPrimitive(TranslationGizmo.__zCubePrimitive);
            TranslationGizmo.__zCubeEntity
                .getMesh()
                .setMesh(TranslationGizmo.__zCubeMesh);
        }
        // xy Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__xyPlaneEntity)) {
            TranslationGizmo.__xyPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_xyPlane', true);
            TranslationGizmo.__xyPlaneEntity.getSceneGraph().isVisible = false;
            // TranslationGizmo.__xyPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
            TranslationGizmo.__xyPlaneEntity.getTransform().rotate =
                _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(_math_MathUtil__WEBPACK_IMPORTED_MODULE_13__.MathUtil.degreeToRadian(90), 0, 0);
            TranslationGizmo.__xyPlaneMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__xyPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
            TranslationGizmo.__xyPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([0, 0, 0.5, 0]));
            TranslationGizmo.__xyPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__xyPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
            TranslationGizmo.__xyPlanePrimitive.generate({
                width: 100000,
                height: 100000,
                uSpan: 1,
                vSpan: 1,
                isUVRepeat: true,
                flipTextureCoordinateY: false,
                material: TranslationGizmo.__xyPlaneMaterial,
            });
            TranslationGizmo.__xyPlaneMesh.addPrimitive(TranslationGizmo.__xyPlanePrimitive);
            TranslationGizmo.__xyPlaneEntity
                .getMesh()
                .setMesh(TranslationGizmo.__xyPlaneMesh);
        }
        // yz Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__yzPlaneEntity)) {
            TranslationGizmo.__yzPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_yzPlane', true);
            TranslationGizmo.__yzPlaneEntity.getSceneGraph().isVisible = false;
            // TranslationGizmo.__yzPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
            TranslationGizmo.__yzPlaneEntity.getTransform().rotate =
                _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(0, 0, _math_MathUtil__WEBPACK_IMPORTED_MODULE_13__.MathUtil.degreeToRadian(90));
            TranslationGizmo.__yzPlaneMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__yzPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
            TranslationGizmo.__yzPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([0.5, 0, 0, 0]));
            TranslationGizmo.__yzPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__yzPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
            TranslationGizmo.__yzPlanePrimitive.generate({
                width: 100000,
                height: 100000,
                uSpan: 1,
                vSpan: 1,
                isUVRepeat: true,
                flipTextureCoordinateY: false,
                material: TranslationGizmo.__yzPlaneMaterial,
            });
            TranslationGizmo.__yzPlaneMesh.addPrimitive(TranslationGizmo.__yzPlanePrimitive);
            TranslationGizmo.__yzPlaneEntity
                .getMesh()
                .setMesh(TranslationGizmo.__yzPlaneMesh);
        }
        // zx Plane
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__zxPlaneEntity)) {
            TranslationGizmo.__zxPlaneEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createMeshEntity();
            TranslationGizmo.__xCubeEntity.tryToSetUniqueName('TranslationGizmo_zxPlane', true);
            TranslationGizmo.__zxPlaneEntity.getSceneGraph().isVisible = false;
            // TranslationGizmo.__zxPlaneEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix = true;
            // TranslationGizmo.__zxPlaneEntity.getTransform().rotate =
            // Vector3.fromCopy3(90, 0, 0);
            TranslationGizmo.__zxPlaneMaterial =
                _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_12__.MaterialHelper.createClassicUberMaterial();
            TranslationGizmo.__zxPlaneMaterial.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopyArray4([0, 0.5, 0, 0]));
            TranslationGizmo.__zxPlaneMaterial.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_3__.AlphaMode.Translucent;
            TranslationGizmo.__zxPlaneMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_7__.Mesh();
            TranslationGizmo.__zxPlanePrimitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_10__.Plane();
            TranslationGizmo.__zxPlanePrimitive.generate({
                width: 100000,
                height: 100000,
                uSpan: 1,
                vSpan: 1,
                isUVRepeat: true,
                flipTextureCoordinateY: false,
                material: TranslationGizmo.__zxPlaneMaterial,
            });
            TranslationGizmo.__zxPlaneMesh.addPrimitive(TranslationGizmo.__zxPlanePrimitive);
            TranslationGizmo.__zxPlaneEntity
                .getMesh()
                .setMesh(TranslationGizmo.__zxPlaneMesh);
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(TranslationGizmo.__groupEntity)) {
            TranslationGizmo.__groupEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createGroupEntity();
        }
        this.__topEntity.getSceneGraph().addChild(TranslationGizmo.__groupEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__xCubeEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__yCubeEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__zCubeEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__xyPlaneEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__yzPlaneEntity.getSceneGraph());
        TranslationGizmo.__groupEntity
            .getSceneGraph()
            .addChild(TranslationGizmo.__zxPlaneEntity.getSceneGraph());
        TranslationGizmo.__latestTargetEntity = this.__target;
        this.setGizmoTag();
    }
    /**
     * @private
     * update the transform and etc of the gizmo
     */
    _update() {
        if (this.__topEntity == null) {
            return;
        }
        const sg = this.__target.getSceneGraph();
        const aabb = sg.worldAABB;
        this.__topEntity.getTransform().translate = aabb.centerPoint;
        const max = Math.max(aabb.sizeX, aabb.sizeY, aabb.sizeZ);
        this.__topEntity.getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopyArray([
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
            Math.min(1, aabb.isVanilla() ? 1 : max / 2),
        ]);
        if (TranslationGizmo.__isPointerDown) {
            if (TranslationGizmo.__latestTargetEntity === this.__target) {
                this.__target.getTransform().translate =
                    TranslationGizmo.__deltaPoint.clone();
            }
        }
    }
    ///
    ///
    /// Private Static Members
    ///
    ///
    static __generatePrimitive() {
        const positions = new Float32Array([
            // X axis
            0,
            0,
            0,
            this.__length,
            0,
            0,
            // Y axis
            0,
            0,
            0,
            0,
            this.__length,
            0,
            // Z axis
            0,
            0,
            0,
            0,
            0,
            this.__length,
        ]);
        const color = new Float32Array([
            // X axis as Red
            1, 0, 0, 1, 0, 0,
            // Y axis as Green
            0, 1, 0, 0, 1, 0,
            // Z axis as Blue
            0, 0, 1, 0, 0, 1,
        ]);
        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_8__.Primitive.createPrimitive({
            attributeSemantics: [
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.Position.XYZ,
                _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.Color0.XYZ,
            ],
            attributes: [positions, color],
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__.PrimitiveMode.Lines,
        });
        return primitive;
    }
    __onPointerDown(evt) {
        evt.preventDefault();
        TranslationGizmo.__isPointerDown = true;
        TranslationGizmo.__originalX = evt.clientX;
        TranslationGizmo.__originalY = evt.clientY;
        const worldMatrix = this.__target.getSceneGraph().worldMatrix.getRotate();
        const scaleVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.one(); //this.__target.getSceneGraph().worldMatrix.getScale();
        let rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.fromCopy9RowMajor(scaleVec.x * worldMatrix.m00, scaleVec.x * worldMatrix.m01, scaleVec.x * worldMatrix.m02, scaleVec.y * worldMatrix.m10, scaleVec.y * worldMatrix.m11, scaleVec.y * worldMatrix.m12, scaleVec.z * worldMatrix.m20, scaleVec.z * worldMatrix.m21, scaleVec.z * worldMatrix.m22);
        if (TranslationGizmo.__space === 'local') {
            rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.transpose(rotMat);
        }
        else if (TranslationGizmo.__space === 'world') {
            rotMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix33.identity();
        }
        const { xResult, yResult, zResult } = TranslationGizmo.castRay(evt);
        if (xResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(xResult.data);
            TranslationGizmo.__pickStatedPoint = rotMat.multiplyVector(xResult.data.position.clone());
            console.log('Down:' + TranslationGizmo.__pickStatedPoint.toStringApproximately());
            TranslationGizmo.__activeAxis = 'x';
        }
        if (yResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(yResult.data);
            TranslationGizmo.__pickStatedPoint = rotMat.multiplyVector(yResult.data.position.clone());
            console.log('Down:' + TranslationGizmo.__pickStatedPoint.toStringApproximately());
            TranslationGizmo.__activeAxis = 'y';
        }
        if (zResult.result) {
            (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(zResult.data);
            TranslationGizmo.__pickStatedPoint = rotMat.multiplyVector(zResult.data.position.clone());
            console.log('Down:' + TranslationGizmo.__pickStatedPoint.toStringApproximately());
            TranslationGizmo.__activeAxis = 'z';
        }
        if (TranslationGizmo.__latestTargetEntity === this.__target) {
            TranslationGizmo.__targetPointBackup =
                this.__target.getTransform().translate;
        }
    }
    __onPointerMove(evt) {
        evt.preventDefault();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is["false"](TranslationGizmo.__isPointerDown)) {
            return;
        }
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const worldMatrix = this.__target.getSceneGraph().worldMatrix.getRotate();
        const scaleVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.one(); //this.__target.getSceneGraph().worldMatrix.getScale();
        let rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.fromCopy9RowMajor(scaleVec.x * worldMatrix.m00, scaleVec.x * worldMatrix.m01, scaleVec.x * worldMatrix.m02, scaleVec.y * worldMatrix.m10, scaleVec.y * worldMatrix.m11, scaleVec.y * worldMatrix.m12, scaleVec.z * worldMatrix.m20, scaleVec.z * worldMatrix.m21, scaleVec.z * worldMatrix.m22);
        if (TranslationGizmo.__space === 'local') {
            rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.transpose(rotMat);
        }
        else if (TranslationGizmo.__space === 'world') {
            rotMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix33.identity();
        }
        let pickInMovingPoint = TranslationGizmo.__pickStatedPoint.clone();
        if (TranslationGizmo.__activeAxis === 'x') {
            const xResult = TranslationGizmo.__xyPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (xResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(xResult.data);
                const position = rotMat.multiplyVector(xResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(position.x, pickInMovingPoint.y, pickInMovingPoint.z);
                console.log('Move:' + xResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.disableCameraController();
        }
        if (TranslationGizmo.__activeAxis === 'y') {
            const yResult = TranslationGizmo.__xyPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (yResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(yResult.data);
                const position = rotMat.multiplyVector(yResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(pickInMovingPoint.x, position.y, pickInMovingPoint.z);
                console.log('Move:' + yResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.disableCameraController();
        }
        if (TranslationGizmo.__activeAxis === 'z') {
            const zResult = TranslationGizmo.__yzPlaneEntity
                .getMesh()
                .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
            if (zResult.result) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_20__.assertExist)(zResult.data);
                const position = rotMat.multiplyVector(zResult.data.position);
                pickInMovingPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.fromCopy3(pickInMovingPoint.x, pickInMovingPoint.y, position.z);
                console.log('Move:' + zResult.data.position.toStringApproximately());
            }
            _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.disableCameraController();
        }
        const deltaVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.subtract(pickInMovingPoint, TranslationGizmo.__pickStatedPoint);
        if (TranslationGizmo.__space === 'local') {
            const worldMatrix = this.__target.getSceneGraph().worldMatrix.getRotate();
            const scaleVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.one(); //this.__target.getSceneGraph().worldMatrix.getScale();
            const rotMat = _math_Matrix33__WEBPACK_IMPORTED_MODULE_14__.Matrix33.fromCopy9RowMajor(scaleVec.x * worldMatrix.m00, scaleVec.x * worldMatrix.m01, scaleVec.x * worldMatrix.m02, scaleVec.y * worldMatrix.m10, scaleVec.y * worldMatrix.m11, scaleVec.y * worldMatrix.m12, scaleVec.z * worldMatrix.m20, scaleVec.z * worldMatrix.m21, scaleVec.z * worldMatrix.m22);
            TranslationGizmo.__deltaPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.add(rotMat.multiplyVector(deltaVector3), TranslationGizmo.__targetPointBackup);
        }
        else if (TranslationGizmo.__space === 'world') {
            const deltaDeltaVector3 = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.add(TranslationGizmo.__targetPointBackup, deltaVector3);
            TranslationGizmo.__deltaPoint = deltaDeltaVector3;
        }
    }
    __onPointerUp(evt) {
        evt.preventDefault();
        TranslationGizmo.__isPointerDown = false;
        TranslationGizmo.__activeAxis = 'none';
        _system_InputManager__WEBPACK_IMPORTED_MODULE_21__.InputManager.enableCameraController();
        if (TranslationGizmo.__latestTargetEntity === this.__target) {
            TranslationGizmo.__targetPointBackup =
                this.__target.getTransform().translate;
        }
    }
    static castRay2(evt) {
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const result = TranslationGizmo.__groupEntity
            .getSceneGraph()
            .castRayFromScreen(x, y, activeCamera, viewport, 0.0, []);
        return result;
    }
    static castRay(evt) {
        const rect = evt.target.getBoundingClientRect();
        const width = evt.target.clientWidth;
        const height = evt.target.clientHeight;
        const x = evt.clientX - rect.left;
        const y = rect.height - (evt.clientY - rect.top);
        const viewport = _math_Vector4__WEBPACK_IMPORTED_MODULE_18__.Vector4.fromCopy4(0, 0, width, height);
        const activeCamera = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        const xResult = TranslationGizmo.__xCubeEntity
            .getMesh()
            .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
        const yResult = TranslationGizmo.__yCubeEntity
            .getMesh()
            .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
        const zResult = TranslationGizmo.__zCubeEntity
            .getMesh()
            .castRayFromScreenInWorld(x, y, activeCamera, viewport, 0.0);
        return { xResult, yResult, zResult };
    }
}
TranslationGizmo.__originalX = 0;
TranslationGizmo.__originalY = 0;
TranslationGizmo.__pickStatedPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.zero();
TranslationGizmo.__deltaPoint = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.zero();
TranslationGizmo.__targetPointBackup = _math_Vector3__WEBPACK_IMPORTED_MODULE_17__.Vector3.zero();
TranslationGizmo.__isPointerDown = false;
TranslationGizmo.__activeAxis = 'none';
TranslationGizmo.__space = 'world';
TranslationGizmo.__length = 1;


/***/ }),

/***/ "./src/foundation/gizmos/index.ts":
/*!****************************************!*\
  !*** ./src/foundation/gizmos/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABBGizmo": () => (/* reexport safe */ _AABBGizmo__WEBPACK_IMPORTED_MODULE_0__.AABBGizmo),
/* harmony export */   "Gizmo": () => (/* reexport safe */ _Gizmo__WEBPACK_IMPORTED_MODULE_1__.Gizmo),
/* harmony export */   "LocatorGizmo": () => (/* reexport safe */ _LocatorGizmo__WEBPACK_IMPORTED_MODULE_2__.LocatorGizmo),
/* harmony export */   "ScaleGizmo": () => (/* reexport safe */ _ScaleGizmo__WEBPACK_IMPORTED_MODULE_3__.ScaleGizmo),
/* harmony export */   "TranslationGizmo": () => (/* reexport safe */ _TranslationGizmo__WEBPACK_IMPORTED_MODULE_4__.TranslationGizmo)
/* harmony export */ });
/* harmony import */ var _AABBGizmo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AABBGizmo */ "./src/foundation/gizmos/AABBGizmo.ts");
/* harmony import */ var _Gizmo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Gizmo */ "./src/foundation/gizmos/Gizmo.ts");
/* harmony import */ var _LocatorGizmo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LocatorGizmo */ "./src/foundation/gizmos/LocatorGizmo.ts");
/* harmony import */ var _ScaleGizmo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ScaleGizmo */ "./src/foundation/gizmos/ScaleGizmo.ts");
/* harmony import */ var _TranslationGizmo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TranslationGizmo */ "./src/foundation/gizmos/TranslationGizmo.ts");







/***/ }),

/***/ "./src/foundation/helpers/EntityHelper.ts":
/*!************************************************!*\
  !*** ./src/foundation/helpers/EntityHelper.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EntityHelper": () => (/* binding */ EntityHelper)
/* harmony export */ });
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Transform/TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");
/* harmony import */ var _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _components_CameraController_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/CameraController/CameraControllerComponent */ "./src/foundation/components/CameraController/CameraControllerComponent.ts");
/* harmony import */ var _components_Skeletal_SkeletalComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/Skeletal/SkeletalComponent */ "./src/foundation/components/Skeletal/SkeletalComponent.ts");
/* harmony import */ var _components_Physics_PhysicsComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/Physics/PhysicsComponent */ "./src/foundation/components/Physics/PhysicsComponent.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/Light/LightComponent */ "./src/foundation/components/Light/LightComponent.ts");










function createTransformEntity() {
    const entity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.createEntity();
    const entity1 = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_1__.TransformComponent, entity);
    return entity1;
}
function createGroupEntity() {
    const entity = createTransformEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_2__.SceneGraphComponent, entity);
    return entityAddedComponent;
}
function createMeshEntity() {
    const entity = createGroupEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_3__.MeshComponent, entity);
    const entityAddedComponent2 = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_4__.MeshRendererComponent, entityAddedComponent);
    return entityAddedComponent2;
}
function createCameraEntity() {
    const entity = createGroupEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__.CameraComponent, entity);
    return entityAddedComponent;
}
function createCameraControllerEntity() {
    const entity = createCameraEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_CameraController_CameraControllerComponent__WEBPACK_IMPORTED_MODULE_5__.CameraControllerComponent, entity);
    return entityAddedComponent;
}
function createSkeletalEntity() {
    const entity = createGroupEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Skeletal_SkeletalComponent__WEBPACK_IMPORTED_MODULE_6__.SkeletalComponent, entity);
    return entityAddedComponent;
}
function createPhysicsEntity() {
    const entity = createGroupEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Physics_PhysicsComponent__WEBPACK_IMPORTED_MODULE_7__.PhysicsComponent, entity);
    return entityAddedComponent;
}
function createLightEntity() {
    const entity = createGroupEntity();
    const entityAddedComponent = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_9__.LightComponent, entity);
    return entityAddedComponent;
}
const EntityHelper = Object.freeze({
    createTransformEntity,
    createGroupEntity,
    createMeshEntity,
    createCameraEntity,
    createCameraControllerEntity,
    createSkeletalEntity,
    createLightEntity,
    createPhysicsEntity,
});


/***/ }),

/***/ "./src/foundation/helpers/MaterialHelper.ts":
/*!**************************************************!*\
  !*** ./src/foundation/helpers/MaterialHelper.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MaterialHelper": () => (/* binding */ MaterialHelper)
/* harmony export */ });
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../materials/core/Material */ "./src/foundation/materials/core/Material.ts");
/* harmony import */ __webpack_require__(/*! ../materials/contents/PbrShadingMaterialContent */ "./src/foundation/materials/contents/PbrShadingMaterialContent.ts");
/* harmony import */ var _materials_contents_DepthEncodeMaterialContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../materials/contents/DepthEncodeMaterialContent */ "./src/foundation/materials/contents/DepthEncodeMaterialContent.ts");
/* harmony import */ var _materials_contents_ShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../materials/contents/ShadowMapDecodeClassicMaterialContent */ "./src/foundation/materials/contents/ShadowMapDecodeClassicMaterialContent.ts");
/* harmony import */ var _materials_contents_EntityUIDOutputMaterialContent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../materials/contents/EntityUIDOutputMaterialContent */ "./src/foundation/materials/contents/EntityUIDOutputMaterialContent.ts");
/* harmony import */ var _materials_contents_MToonMaterialContent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../materials/contents/MToonMaterialContent */ "./src/foundation/materials/contents/MToonMaterialContent.ts");
/* harmony import */ var _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../materials/contents/CustomMaterialContent */ "./src/foundation/materials/contents/CustomMaterialContent.ts");
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _materials_contents_FurnaceTestMaterialContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../materials/contents/FurnaceTestMaterialContent */ "./src/foundation/materials/contents/FurnaceTestMaterialContent.ts");
/* harmony import */ var _materials_contents_GaussianBlurForEncodedDepthMaterialContent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../materials/contents/GaussianBlurForEncodedDepthMaterialContent */ "./src/foundation/materials/contents/GaussianBlurForEncodedDepthMaterialContent.ts");
/* harmony import */ var _materials_contents_GaussianBlurMaterialContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../materials/contents/GaussianBlurMaterialContent */ "./src/foundation/materials/contents/GaussianBlurMaterialContent.ts");
/* harmony import */ var _materials_contents_DetectHighLuminanceMaterialContent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../materials/contents/DetectHighLuminanceMaterialContent */ "./src/foundation/materials/contents/DetectHighLuminanceMaterialContent.ts");
/* harmony import */ var _materials_contents_SynthesizeHdrMaterialContent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../materials/contents/SynthesizeHdrMaterialContent */ "./src/foundation/materials/contents/SynthesizeHdrMaterialContent.ts");
/* harmony import */ var _materials_contents_ColorGradingUsingLUTsMaterialContent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../materials/contents/ColorGradingUsingLUTsMaterialContent */ "./src/foundation/materials/contents/ColorGradingUsingLUTsMaterialContent.ts");
/* harmony import */ var _materials_contents_MatCapMaterialContent__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../materials/contents/MatCapMaterialContent */ "./src/foundation/materials/contents/MatCapMaterialContent.ts");
/* harmony import */ var _materials_contents_VarianceShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../materials/contents/VarianceShadowMapDecodeClassicMaterialContent */ "./src/foundation/materials/contents/VarianceShadowMapDecodeClassicMaterialContent.ts");
/* harmony import */ var _materials_contents_PbrExtendedShadingMaterialContent__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../materials/contents/PbrExtendedShadingMaterialContent */ "./src/foundation/materials/contents/PbrExtendedShadingMaterialContent.ts");
/* harmony import */ var _materials_contents_ShaderityMaterialContent__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../materials/contents/ShaderityMaterialContent */ "./src/foundation/materials/contents/ShaderityMaterialContent.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _webgl_shaderity_shaders_ClassicSingleShader_ClassicSingleShader_vert__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.vert */ "./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_ClassicSingleShader_ClassicSingleShader_frag__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.frag */ "./src/webgl/shaderity_shaders/ClassicSingleShader/ClassicSingleShader.frag");
/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert */ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag */ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag");
/* harmony import */ var _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_vert__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert */ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_frag__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag */ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag");
/* harmony import */ var _webgl_shaderity_shaders_FXAA3QualityShader_FXAA3QualitySingleShader_vert__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.vert */ "./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_FXAA3QualityShader_FXAA3QualitySingleShader_frag__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.frag */ "./src/webgl/shaderity_shaders/FXAA3QualityShader/FXAA3QualitySingleShader.frag");
/* harmony import */ var _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_vert__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert */ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_frag__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag */ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag");



































function createMaterial(materialName, materialNode, maxInstancesNumber) {
    const isRegisteredMaterialType = _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__.Material.isRegisteredMaterialType(materialName);
    if (!isRegisteredMaterialType) {
        _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__.Material.registerMaterial(materialName, materialNode, maxInstancesNumber);
    }
    const material = _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__.Material.createMaterial(materialName, materialNode);
    return material;
}
function recreateMaterial(materialName, materialNode, maxInstancesNumber) {
    _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__.Material.forceRegisterMaterial(materialName, materialNode, maxInstancesNumber);
    const material = _materials_core_Material__WEBPACK_IMPORTED_MODULE_1__.Material.createMaterial(materialName, materialNode);
    return material;
}
function createEmptyMaterial() {
    const materialName = 'Empty';
    const material = createMaterial(materialName, undefined, _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType);
    material.tryToSetUniqueName('EmptyMaterial', true);
    return material;
}
function createPbrUberMaterial({ additionalName = '', isMorphing = true, isSkinning = true, isLighting = true, isClearCoat = false, isTransmission = false, isVolume = false, useTangentAttribute = false, useNormalTexture = true, alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType, } = {}) {
    const materialName = 'PbrUber' +
        `_${additionalName}_` +
        (isMorphing ? '+morphing' : '') +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting') +
        (isClearCoat ? '+clearcoat' : '') +
        (isTransmission ? '+transmission' : '') +
        (isVolume ? '+volume' : '') +
        (useTangentAttribute ? '+tangentAttribute' : '') +
        (useNormalTexture ? '' : '-normalTexture') +
        '_alpha_' +
        alphaMode.str.toLowerCase();
    let additionalShaderSemanticInfo = [];
    if (isMorphing) {
        additionalShaderSemanticInfo = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.DataTextureMorphOffsetPosition,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_21__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_22__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_23__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_24__.VectorN(new Int32Array(_core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MorphWeights,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_21__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_22__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_23__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_24__.VectorN(new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            },
        ];
    }
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: 'PbrUber',
        isSkinning,
        isLighting,
        isMorphing,
        isClearCoat,
        isTransmission,
        isVolume,
        alphaMode,
        useTangentAttribute,
        useNormalTexture,
        vertexShader: _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_27__["default"],
        pixelShader: _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_28__["default"],
        additionalShaderSemanticInfo,
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createClassicUberMaterial({ additionalName = '', isSkinning = true, isLighting = false, isMorphing = false, alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType, } = {}) {
    const materialName = 'ClassicUber' +
        `_${additionalName}_` +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting') +
        ' alpha_' +
        alphaMode.str.toLowerCase();
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: 'ClassicUber',
        isSkinning,
        isLighting,
        isMorphing,
        alphaMode,
        useTangentAttribute: false,
        useNormalTexture: true,
        vertexShader: _webgl_shaderity_shaders_ClassicSingleShader_ClassicSingleShader_vert__WEBPACK_IMPORTED_MODULE_25__["default"],
        pixelShader: _webgl_shaderity_shaders_ClassicSingleShader_ClassicSingleShader_frag__WEBPACK_IMPORTED_MODULE_26__["default"],
        additionalShaderSemanticInfo: [],
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createEnvConstantMaterial({ additionalName = '', maxInstancesNumber = 5, makeOutputSrgb = true, } = {}) {
    const materialName = 'EnvConstant' + `_${additionalName}`;
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: materialName,
        isSkinning: false,
        isLighting: false,
        isMorphing: false,
        alphaMode: _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque,
        useTangentAttribute: false,
        useNormalTexture: false,
        vertexShader: _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_vert__WEBPACK_IMPORTED_MODULE_29__["default"],
        pixelShader: _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_frag__WEBPACK_IMPORTED_MODULE_30__["default"],
        additionalShaderSemanticInfo: [],
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MakeOutputSrgb, makeOutputSrgb ? 1 : 0);
    return material;
}
function createFXAA3QualityMaterial({ additionalName = '', maxInstancesNumber = 1, } = {}) {
    const materialName = 'FXAA3Quality' + `_${additionalName}`;
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: materialName,
        isSkinning: false,
        isLighting: false,
        isMorphing: false,
        alphaMode: _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque,
        useTangentAttribute: false,
        useNormalTexture: true,
        vertexShader: _webgl_shaderity_shaders_FXAA3QualityShader_FXAA3QualitySingleShader_vert__WEBPACK_IMPORTED_MODULE_31__["default"],
        pixelShader: _webgl_shaderity_shaders_FXAA3QualityShader_FXAA3QualitySingleShader_frag__WEBPACK_IMPORTED_MODULE_32__["default"],
        additionalShaderSemanticInfo: [],
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createFurnaceTestMaterial({ additionalName = '', maxInstancesNumber = 1, } = {}) {
    const materialName = 'FurnaceTest' + `_${additionalName}`;
    const materialNode = new _materials_contents_FurnaceTestMaterialContent__WEBPACK_IMPORTED_MODULE_10__.FurnaceTestMaterialContent();
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createDepthEncodeMaterial({ additionalName = '', isSkinning = false, depthPow = 1.0, maxInstancesNumber = 10, } = {}) {
    const materialName = 'DepthEncode' + `_${additionalName}_` + (isSkinning ? '+skinning' : '');
    const materialNode = new _materials_contents_DepthEncodeMaterialContent__WEBPACK_IMPORTED_MODULE_3__.DepthEncodeMaterialContent(depthPow, {
        isSkinning,
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createShadowMapDecodeClassicSingleMaterial({ additionalName = '', isMorphing = false, isSkinning = false, isLighting = true, isDebugging = false, colorAttachmentsNumber = 0, maxInstancesNumber = 20, } = {}, depthEncodeRenderPass) {
    const materialName = 'ShadowMapDecodeClassic' +
        `_${additionalName}_` +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting');
    const materialNode = new _materials_contents_ShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_4__.ShadowMapDecodeClassicMaterialContent({
        isMorphing,
        isSkinning,
        isLighting,
        isDebugging,
        colorAttachmentsNumber,
    }, depthEncodeRenderPass);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createGaussianBlurForEncodedDepthMaterial({ additionalName = '', maxInstancesNumber = 10, } = {}) {
    const materialName = 'GaussianBlurForEncodedDepth' + `_${additionalName}`;
    const materialNode = new _materials_contents_GaussianBlurForEncodedDepthMaterialContent__WEBPACK_IMPORTED_MODULE_11__.GaussianBlurForEncodedDepthMaterialContent();
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createVarianceShadowMapDecodeClassicSingleMaterial({ additionalName = '', isMorphing = false, isSkinning = false, isDebugging = false, isLighting = true, colorAttachmentsNumberDepth = 0, colorAttachmentsNumberSquareDepth = 0, depthCameraComponent = undefined, maxInstancesNumber = 10, }, encodedDepthRenderPasses) {
    const materialName = 'VarianceShadowMapDecodeShading' +
        `_${additionalName}_` +
        (isMorphing ? '+morphing' : '') +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting') +
        (isDebugging ? '' : '+debugging');
    const materialNode = new _materials_contents_VarianceShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_17__.VarianceShadowMapDecodeClassicMaterialContent({
        isMorphing,
        isSkinning,
        isLighting,
        isDebugging,
        colorAttachmentsNumberDepth,
        colorAttachmentsNumberSquareDepth,
        depthCameraComponent,
    }, encodedDepthRenderPasses);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createDetectHighLuminanceMaterial({ additionalName = '', colorAttachmentsNumber = 0, maxInstancesNumber = 5, } = {}, HDRRenderPass) {
    const materialName = 'DetectHighLuminance' + `_${additionalName}_`;
    const materialNode = new _materials_contents_DetectHighLuminanceMaterialContent__WEBPACK_IMPORTED_MODULE_13__.DetectHighLuminanceMaterialContent(HDRRenderPass, colorAttachmentsNumber);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createGaussianBlurMaterial({ additionalName = '', maxInstancesNumber = 10, } = {}) {
    const materialName = 'GaussianBlur' + `_${additionalName}`;
    const materialNode = new _materials_contents_GaussianBlurMaterialContent__WEBPACK_IMPORTED_MODULE_12__.GaussianBlurMaterialContent();
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createSynthesizeHDRMaterial({ additionalName = '', targetRegionTexture, maxInstancesNumber = 1, }, synthesizeTextures) {
    const materialName = 'SynthesizeHDR' + `_${additionalName}`;
    const materialNode = new _materials_contents_SynthesizeHdrMaterialContent__WEBPACK_IMPORTED_MODULE_14__.SynthesizeHdrMaterialContent(synthesizeTextures, targetRegionTexture);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createColorGradingUsingLUTsMaterial({ additionalName = '', colorAttachmentsNumber = 0, uri, texture, maxInstancesNumber = 1, }, targetRenderPass) {
    const materialName = 'ColorGradingUsingLUTs' + `_${additionalName}`;
    const materialNode = new _materials_contents_ColorGradingUsingLUTsMaterialContent__WEBPACK_IMPORTED_MODULE_15__.ColorGradingUsingLUTsMaterialContent(targetRenderPass, colorAttachmentsNumber, uri, texture);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createGammaCorrectionMaterial({ additionalName = '', maxInstancesNumber = 1, } = {}) {
    const materialName = 'GammaCorrection' + `_${additionalName}`;
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: materialName,
        isSkinning: false,
        isLighting: false,
        isMorphing: false,
        alphaMode: _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque,
        useTangentAttribute: false,
        useNormalTexture: true,
        vertexShader: _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_vert__WEBPACK_IMPORTED_MODULE_33__["default"],
        pixelShader: _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_frag__WEBPACK_IMPORTED_MODULE_34__["default"],
        additionalShaderSemanticInfo: [],
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createMatCapMaterial({ additionalName = '', isSkinning = false, uri, texture, maxInstancesNumber = 10, }) {
    const materialName = 'MatCap' + `_${additionalName}` + (isSkinning ? '+skinning' : '');
    const materialNode = new _materials_contents_MatCapMaterialContent__WEBPACK_IMPORTED_MODULE_16__.MatCapMaterialContent(isSkinning, uri, texture);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createEntityUIDOutputMaterial({ additionalName = '', maxInstancesNumber = 10, } = {}) {
    const materialName = 'EntityUIDOutput' + `_${additionalName}`;
    const materialNode = new _materials_contents_EntityUIDOutputMaterialContent__WEBPACK_IMPORTED_MODULE_5__.EntityUIDOutputMaterialContent();
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function createMToonMaterial({ additionalName = '', isMorphing = false, isSkinning = false, isLighting = true, useTangentAttribute = false, isOutline = false, materialProperties, textures, debugMode, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType, makeOutputSrgb = true, }) {
    const materialName = 'MToon' +
        `_${additionalName}_` +
        (isMorphing ? '+morphing' : '') +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting') +
        (useTangentAttribute ? '+tangentAttribute' : '') +
        (isOutline ? '-outline' : '');
    const materialNode = new _materials_contents_MToonMaterialContent__WEBPACK_IMPORTED_MODULE_6__.MToonMaterialContent(isOutline, materialProperties, textures, isMorphing, isSkinning, isLighting, useTangentAttribute, debugMode, makeOutputSrgb);
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    materialNode.setMaterialParameters(material, isOutline);
    return material;
}
function createPbrExtendedUberMaterial(maxInstancesNumber) {
    const enables = { isMorphing: false, isSkinning: false, isLighting: true };
    const materialName = 'PbrExtendedShadingUber' +
        ('') +
        ('') +
        ('' );
    const materialNode = new _materials_contents_PbrExtendedShadingMaterialContent__WEBPACK_IMPORTED_MODULE_18__.PbrExtendedShadingMaterialContent({
        isMorphing: enables.isMorphing,
        isSkinning: enables.isSkinning,
        isLighting: enables.isLighting,
    });
    materialNode.isSingleOperation = true;
    const material = createMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
function recreateCustomMaterial(vertexShaderStr, pixelShaderStr, { additionalName = '', isSkinning = true, isLighting = false, isMorphing = false, alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_9__.AlphaMode.Opaque, maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType, } = {}) {
    const materialName = 'Custom' +
        `_${additionalName}_` +
        (isMorphing ? '+morphing' : '') +
        (isSkinning ? '+skinning' : '') +
        (isLighting ? '' : '-lighting') +
        ' alpha_' +
        alphaMode.str.toLowerCase();
    const materialNode = new _materials_contents_CustomMaterialContent__WEBPACK_IMPORTED_MODULE_7__.CustomMaterialContent({
        name: materialName,
        isSkinning,
        isLighting,
        isMorphing,
        alphaMode,
        useTangentAttribute: false,
        useNormalTexture: true,
        vertexShader: {
            code: vertexShaderStr,
            shaderStage: 'vertex',
            isFragmentShader: false,
        },
        pixelShader: {
            code: pixelShaderStr,
            shaderStage: 'fragment',
            isFragmentShader: true,
        },
        additionalShaderSemanticInfo: [],
    });
    materialNode.isSingleOperation = true;
    const material = recreateMaterial(materialName, materialNode, maxInstancesNumber);
    return material;
}
// create or update shaderity material
function recreateShaderityMaterial(vertexShaderityObj, pixelShaderityObj, { additionalName = '', maxInstancesNumber = _core_Config__WEBPACK_IMPORTED_MODULE_0__.Config.maxMaterialInstanceForEachType, } = {}) {
    const name = `Shaderity_${additionalName}`;
    const materialNode = new _materials_contents_ShaderityMaterialContent__WEBPACK_IMPORTED_MODULE_19__.ShaderityMaterialContent({
        name,
        vertexShaderityObj,
        pixelShaderityObj,
    });
    materialNode.isSingleOperation = true;
    const material = recreateMaterial(name, materialNode, maxInstancesNumber);
    return material;
}
function changeMaterial(entity, primitive, material) {
    const meshRendererComponent = entity.getMeshRenderer();
    primitive.material = material;
    meshRendererComponent.moveStageTo(_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_8__.ProcessStage.Load);
}
const MaterialHelper = Object.freeze({
    createMaterial,
    recreateMaterial,
    recreateCustomMaterial,
    recreateShaderityMaterial,
    createEmptyMaterial,
    createClassicUberMaterial,
    createPbrUberMaterial,
    createEnvConstantMaterial,
    createFXAA3QualityMaterial,
    createDepthEncodeMaterial,
    createShadowMapDecodeClassicSingleMaterial,
    createGammaCorrectionMaterial,
    createVarianceShadowMapDecodeClassicSingleMaterial,
    createEntityUIDOutputMaterial,
    createMToonMaterial,
    createFurnaceTestMaterial,
    createGaussianBlurForEncodedDepthMaterial,
    createDetectHighLuminanceMaterial,
    createGaussianBlurMaterial,
    createSynthesizeHDRMaterial,
    createColorGradingUsingLUTsMaterial,
    createMatCapMaterial,
    createPbrExtendedUberMaterial,
    changeMaterial,
});


/***/ }),

/***/ "./src/foundation/helpers/MeshHelper.ts":
/*!**********************************************!*\
  !*** ./src/foundation/helpers/MeshHelper.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MeshHelper": () => (/* binding */ MeshHelper)
/* harmony export */ });
/* harmony import */ var _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry/shapes/Plane */ "./src/foundation/geometry/shapes/Plane.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _geometry_shapes_Axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/shapes/Axis */ "./src/foundation/geometry/shapes/Axis.ts");
/* harmony import */ var _EntityHelper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _geometry_shapes_Line__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry/shapes/Line */ "./src/foundation/geometry/shapes/Line.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _geometry_shapes_Grid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geometry/shapes/Grid */ "./src/foundation/geometry/shapes/Grid.ts");
/* harmony import */ var _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../geometry/shapes/Cube */ "./src/foundation/geometry/shapes/Cube.ts");
/* harmony import */ var _geometry_shapes_Sphere__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/shapes/Sphere */ "./src/foundation/geometry/shapes/Sphere.ts");
/* harmony import */ var _geometry_shapes_Joint__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../geometry/shapes/Joint */ "./src/foundation/geometry/shapes/Joint.ts");










const createPlane = (desc = {
    width: 1,
    height: 1,
    uSpan: 1,
    vSpan: 1,
    isUVRepeat: false,
}) => {
    const primitive = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_0__.Plane();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createLine = (desc = {
    startPos: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopy3(0, 0, 0),
    endPos: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopy3(1, 0, 0),
    hasTerminalMark: true,
}) => {
    const primitive = new _geometry_shapes_Line__WEBPACK_IMPORTED_MODULE_4__.Line();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createGrid = (desc = {
    length: 1,
    division: 10,
    isXY: true,
    isXZ: true,
    isYZ: true,
}) => {
    const primitive = new _geometry_shapes_Grid__WEBPACK_IMPORTED_MODULE_6__.Grid();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createCube = (desc = {
    widthVector: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopy3(1, 1, 1),
}) => {
    const primitive = new _geometry_shapes_Cube__WEBPACK_IMPORTED_MODULE_7__.Cube();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createSphere = (desc = {
    radius: 1,
    widthSegments: 10,
    heightSegments: 10,
}) => {
    const primitive = new _geometry_shapes_Sphere__WEBPACK_IMPORTED_MODULE_8__.Sphere();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createJoint = (desc = {}) => {
    const primitive = new _geometry_shapes_Joint__WEBPACK_IMPORTED_MODULE_9__.Joint();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
const createAxis = (desc = {
    length: 1,
}) => {
    const primitive = new _geometry_shapes_Axis__WEBPACK_IMPORTED_MODULE_2__.Axis();
    primitive.generate(desc);
    const entity = createShape(primitive);
    return entity;
};
function createShape(primitive) {
    const entity = _EntityHelper__WEBPACK_IMPORTED_MODULE_3__.EntityHelper.createMeshEntity();
    const meshComponent = entity.getMesh();
    const mesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_1__.Mesh();
    mesh.addPrimitive(primitive);
    meshComponent.setMesh(mesh);
    return entity;
}
const MeshHelper = Object.freeze({
    createPlane,
    createLine,
    createGrid,
    createCube,
    createSphere,
    createJoint,
    createAxis,
    createShape,
});


/***/ }),

/***/ "./src/foundation/helpers/RenderableHelper.ts":
/*!****************************************************!*\
  !*** ./src/foundation/helpers/RenderableHelper.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderableHelper": () => (/* binding */ RenderableHelper)
/* harmony export */ });
/* harmony import */ var _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../renderer/FrameBuffer */ "./src/foundation/renderer/FrameBuffer.ts");
/* harmony import */ var _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../textures/RenderTargetTexture */ "./src/foundation/textures/RenderTargetTexture.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../textures/RenderBuffer */ "./src/foundation/textures/RenderBuffer.ts");






function createTexturesForRenderTarget(width, height, textureNum, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_4__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, createDepthBuffer = true, isMSAA = false, sampleCountMSAA = 4, }) {
    const frameBuffer = new _renderer_FrameBuffer__WEBPACK_IMPORTED_MODULE_0__.FrameBuffer();
    frameBuffer.create(width, height);
    for (let i = 0; i < textureNum; i++) {
        const renderTargetTexture = new _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_1__.RenderTargetTexture();
        renderTargetTexture.create({
            width,
            height,
            level,
            internalFormat,
            format,
            type,
            magFilter,
            minFilter,
            wrapS,
            wrapT,
        });
        frameBuffer.setColorAttachmentAt(i, renderTargetTexture);
    }
    if (createDepthBuffer) {
        const renderBuffer = new _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__.RenderBuffer();
        renderBuffer.create(width, height, _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Depth16, {
            isMSAA,
            sampleCountMSAA,
        });
        frameBuffer.setDepthAttachment(renderBuffer);
    }
    if (isMSAA) {
        const renderBuffer = new _textures_RenderBuffer__WEBPACK_IMPORTED_MODULE_5__.RenderBuffer();
        renderBuffer.create(width, height, _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, {
            isMSAA,
            sampleCountMSAA,
        });
        frameBuffer.setColorAttachmentAt(0, renderBuffer);
    }
    return frameBuffer;
}
/*
function createTexturesForRenderTarget(width: number, height:number, textureNum:number,
  {
    level = 0,
    internalFormat = TextureParameter.RGBA8,
    format = PixelFormat.RGBA,
    type = ComponentType.UnsignedByte,
    magFilter = TextureParameter.Linear,
    minFilter = TextureParameter.Linear,
    wrapS = TextureParameter.ClampToEdge,
    wrapT = TextureParameter.ClampToEdge
  }) {
  const frameBuffer = new FrameBuffer();
  frameBuffer.create(width, height);

  for (let i=0; i<textureNum; i++) {
    const renderTargetTexture = new RenderTargetTexture();
    renderTargetTexture.create({width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT});
    frameBuffer.setColorAttachmentAt(i, renderTargetTexture);
  }



  let format = gl.DEPTH_COMPONENT;
  let internalFormat = gl.DEPTH_COMPONENT;
  let type = gl.UNSIGNED_INT;
  if (GLBoost.isThisGLVersion_2(gl)) {
    type = gl.UNSIGNED_INT;
    format = gl.DEPTH_COMPONENT;
    internalFormat = gl.DEPTH_COMPONENT24;
  } else if (glem.extDepthTex) {
    type = glem.extDepthTex.UNSIGNED_INT_24_8_WEBGL;
    format = gl.DEPTH_STENCIL;
    internalFormat = gl.DEPTH_STENCIL;
  }

  const depthTexture = new RenderTargetTexture();
  depthTexture.create({width: width, height: height, level: 0, internalFormat: TextureParameter.Depth16, format: TextureParameter.Depth16,
     type: ComponentType.Float, magFilter: TextureParameter.Linear, minFilter: TextureParameter.Linear, wrapS: TextureParameter.ClampToEdge, wrapT: TextureParameter.ClampToEdge});

  frameBuffer.setDepthAttachment(depthTexture);

  return frameBuffer;
}
*/
const RenderableHelper = Object.freeze({ createTexturesForRenderTarget });


/***/ }),

/***/ "./src/foundation/helpers/index.ts":
/*!*****************************************!*\
  !*** ./src/foundation/helpers/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EntityHelper": () => (/* reexport safe */ _EntityHelper__WEBPACK_IMPORTED_MODULE_0__.EntityHelper),
/* harmony export */   "MaterialHelper": () => (/* reexport safe */ _MaterialHelper__WEBPACK_IMPORTED_MODULE_1__.MaterialHelper),
/* harmony export */   "MeshHelper": () => (/* reexport safe */ _MeshHelper__WEBPACK_IMPORTED_MODULE_2__.MeshHelper),
/* harmony export */   "RenderableHelper": () => (/* reexport safe */ _RenderableHelper__WEBPACK_IMPORTED_MODULE_3__.RenderableHelper)
/* harmony export */ });
/* harmony import */ var _EntityHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _MaterialHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _MeshHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MeshHelper */ "./src/foundation/helpers/MeshHelper.ts");
/* harmony import */ var _RenderableHelper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RenderableHelper */ "./src/foundation/helpers/RenderableHelper.ts");






/***/ }),

/***/ "./src/foundation/importer/AnimationAssigner.ts":
/*!******************************************************!*\
  !*** ./src/foundation/importer/AnimationAssigner.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationAssigner": () => (/* binding */ AnimationAssigner)
/* harmony export */ });
/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ModelConverter */ "./src/foundation/importer/ModelConverter.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _components_Animation_AnimationComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Animation/AnimationComponent */ "./src/foundation/components/Animation/AnimationComponent.ts");
/* harmony import */ var _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/AnimationInterpolation */ "./src/foundation/definitions/AnimationInterpolation.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");





class AnimationAssigner {
    constructor() { }
    assignAnimation(rootEntity, gltfModel, vrmModel, isSameSkeleton = false) {
        this.__setupAnimationForSameSkeleton(rootEntity, gltfModel, vrmModel, isSameSkeleton);
        return rootEntity;
    }
    /**
     * The static method to get singleton instance of this class.
     * @return The singleton instance of ModelConverter class
     */
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new AnimationAssigner();
        }
        return this.__instance;
    }
    __getCorrespondingEntity(rootEntity, gltfModel, vrmModel, nodeIndex, nodeName, isSameSkeleton) {
        if (isSameSkeleton) {
            const rnEntities = rootEntity.getTagValue('rnEntitiesByNames');
            const node = gltfModel.nodes[nodeIndex];
            const rnEntity = rnEntities.get(node.name);
            return rnEntity;
        }
        else {
            const humanBones = vrmModel.extensions.VRM.humanoid.humanBones;
            let humanoidBoneName;
            const srcMapNodeIdName = new Map();
            const srcMapNodeNameName = new Map();
            for (const bone of humanBones) {
                srcMapNodeIdName.set(bone.node, bone.bone);
                srcMapNodeNameName.set(bone.name, bone.bone);
            }
            if (nodeName != null) {
                humanoidBoneName = srcMapNodeNameName.get(nodeName);
                if (humanoidBoneName == null) {
                    humanoidBoneName = srcMapNodeIdName.get(nodeIndex);
                }
            }
            const dstMapNameNodeId = rootEntity.getTagValue('humanoid_map_name_nodeId');
            const dstBoneNodeId = dstMapNameNodeId.get(humanoidBoneName);
            if (dstBoneNodeId != null) {
                const rnEntities = rootEntity.getTagValue('rnEntities');
                return rnEntities[dstBoneNodeId];
            }
            else {
                return void 0;
            }
        }
    }
    __isHips(rootEntity, vrmModel, nodeIndex) {
        const humanBones = vrmModel.extensions.VRM.humanoid.humanBones;
        const srcMapNodeIdName = new Map();
        for (const bone of humanBones) {
            srcMapNodeIdName.set(bone.node, bone.bone);
        }
        rootEntity.getTagValue('humanoid_map_name_nodeId');
        const humanoidBoneName = srcMapNodeIdName.get(nodeIndex);
        if (humanoidBoneName === 'hips') {
            return true;
        }
        else {
            return false;
        }
    }
    __setupAnimationForSameSkeleton(rootEntity, gltfModel, vrmModel, isSameSkeleton) {
        var _a, _b, _c, _d;
        if (gltfModel.animations) {
            for (const animation of gltfModel.animations) {
                for (const sampler of animation.samplers) {
                    _ModelConverter__WEBPACK_IMPORTED_MODULE_0__.ModelConverter._readBinaryFromAccessorAndSetItToAccessorExtras(sampler.inputObject);
                    _ModelConverter__WEBPACK_IMPORTED_MODULE_0__.ModelConverter._readBinaryFromAccessorAndSetItToAccessorExtras(sampler.outputObject);
                }
            }
        }
        if (gltfModel.animations && gltfModel.animations.length > 0) {
            for (const animation of gltfModel.animations) {
                for (const channel of animation.channels) {
                    const animInputArray = (_b = (_a = channel.samplerObject) === null || _a === void 0 ? void 0 : _a.inputObject) === null || _b === void 0 ? void 0 : _b.extras.typedDataArray;
                    const animOutputArray = (_d = (_c = channel.samplerObject) === null || _c === void 0 ? void 0 : _c.outputObject) === null || _d === void 0 ? void 0 : _d.extras.typedDataArray;
                    const interpolation = channel.samplerObject.interpolation != null
                        ? channel.samplerObject.interpolation
                        : 'LINEAR';
                    let animationAttributeType = 'translate';
                    if (channel.target.path === 'translation') {
                        animationAttributeType = 'translate';
                    }
                    else if (channel.target.path === 'rotation') {
                        animationAttributeType = 'quaternion';
                    }
                    else {
                        animationAttributeType = channel.target.path;
                    }
                    const node = gltfModel.nodes[channel.target.node];
                    const rnEntity = this.__getCorrespondingEntity(rootEntity, gltfModel, vrmModel, channel.target.node, node.name, isSameSkeleton);
                    if (rnEntity) {
                        const newRnEntity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_components_Animation_AnimationComponent__WEBPACK_IMPORTED_MODULE_2__.AnimationComponent, rnEntity);
                        const animationComponent = newRnEntity.getAnimation();
                        if (animationAttributeType === 'quaternion') {
                            animationComponent.setAnimation(_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.exist(animation.name) ? animation.name : 'Untitled', animationAttributeType, animInputArray, animOutputArray, 4, // Quaternion
                            _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_3__.AnimationInterpolation.fromString(interpolation));
                        }
                        else if (animationAttributeType === 'translate' &&
                            this.__isHips(rootEntity, vrmModel, channel.target.node)) {
                            animationComponent.setAnimation(_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.exist(animation.name) ? animation.name : 'Untitled', animationAttributeType, animInputArray, animOutputArray, 3, // translate
                            _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_3__.AnimationInterpolation.fromString(interpolation));
                        }
                    }
                }
            }
        }
    }
}


/***/ }),

/***/ "./src/foundation/importer/DrcPointCloudImporter.ts":
/*!**********************************************************!*\
  !*** ./src/foundation/importer/DrcPointCloudImporter.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DrcPointCloudImporter": () => (/* binding */ DrcPointCloudImporter)
/* harmony export */ });
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/RnPromise */ "./src/foundation/misc/RnPromise.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");










/**
 * The draco Importer class.
 */
class DrcPointCloudImporter {
    constructor() { }
    /**
     * Import draco file of point cloud type
     * WEIGHTS_0 and JOINTS_0 attribute and all the mesh type and is not support yet.
     * @param uri - uri of drc file
     * @param options - options for loading process
     * @returns a glTF2 based JSON pre-processed
     */
    async importPointCloud(uri, options) {
        const basePath = uri.substring(0, uri.lastIndexOf('/')) + '/'; // location of model file as basePath
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        if (options && options.files) {
            for (const fileName in options.files) {
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                if (fileExtension === 'drc') {
                    return await this.__decodeDraco(options.files[fileName], defaultOptions, basePath, options).catch(err => {
                        console.log('this.__decodeDraco error', err);
                    });
                }
            }
        }
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        return await this.__decodeDraco(arrayBuffer, defaultOptions, basePath, options).catch(err => {
            console.log('this.__decodeDraco error', err);
        });
    }
    /**
     * Import the specified array buffer of draco file where the type must be point cloud.
     * WEIGHTS_0 and JOINTS_0 attribute and all the mesh type and is not support yet.
     * @param uri - uri of drc file
     * @param arrayBuffer - fetched array buffer of drc file
     * @param options - options for loading process
     * @returns a glTF2 based JSON pre-processed
     */
    importArrayBuffer(uri, arrayBuffer, options) {
        const basePath = uri.substring(0, uri.lastIndexOf('/')) + '/'; // location of model file as basePath
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        return this.__decodeDraco(arrayBuffer, defaultOptions, basePath, options).catch(err => {
            console.log('__loadFromArrayBuffer error', err);
        });
    }
    async __loadFromArrayBuffer(arrayBuffer, defaultOptions, basePath, options) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        const isLittleEndian = true;
        // Magic field
        const magic = dataView.getUint32(0, isLittleEndian);
        let result;
        // 0x46546C67 is 'glTF' in ASCII codes.
        if (magic !== 0x46546c67) {
            //const json = await response.json();
            const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(arrayBuffer);
            const json = JSON.parse(gotText);
            result = await this._loadAsTextJson(json, options, defaultOptions, basePath).catch(err => {
                console.log('this.__loadAsTextJson error', err);
            });
        }
        else {
            result = await this._loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, basePath).catch(err => {
                console.log('this.__loadAsBinaryJson error', err);
            });
        }
        return result;
    }
    _getOptions(defaultOptions, json, options) {
        if (json.asset && json.asset.extras && json.asset.extras.rnLoaderOptions) {
            for (const optionName in json.asset.extras.rnLoaderOptions) {
                defaultOptions[optionName] = json.asset.extras.rnLoaderOptions[optionName];
            }
        }
        for (const optionName in options) {
            defaultOptions[optionName] = options[optionName];
        }
        if (options &&
            options.loaderExtensionName &&
            typeof options.loaderExtensionName === 'string') {
            if (Rn[options.loaderExtensionName] != null) {
                defaultOptions.loaderExtension =
                    Rn[options.loaderExtensionName].getInstance();
            }
            else {
                console.error(`${options.loaderExtensionName} not found!`);
                defaultOptions.loaderExtension = void 0;
            }
        }
        return defaultOptions;
    }
    async _loadAsBinaryJson(dataView, isLittleEndian, arrayBuffer, options, defaultOptions, basePath) {
        const lengthOfJSonChunkData = dataView.getUint32(12, isLittleEndian);
        const chunkType = dataView.getUint32(16, isLittleEndian);
        // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)
        if (chunkType !== 0x4e4f534a) {
            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');
        }
        const uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);
        const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.uint8ArrayToString(uint8ArrayJSonContent);
        const gltfJson = JSON.parse(gotText);
        options = this._getOptions(defaultOptions, gltfJson, options);
        const uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData + 8);
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '2' };
        }
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        try {
            await this._loadInner(uint8array, basePath, gltfJson, options);
        }
        catch (err) {
            console.log('this._loadInner error in _loadAsBinaryJson', err);
        }
        return gltfJson;
    }
    async _loadAsTextJson(gltfJson, options, defaultOptions, basePath) {
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '2' };
        }
        options = this._getOptions(defaultOptions, gltfJson, options);
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        try {
            await this._loadInner(undefined, basePath, gltfJson, options);
        }
        catch (err) {
            console.log('this._loadInner error in _loadAsTextJson', err);
        }
        return gltfJson;
    }
    _loadInner(uint8array, basePath, gltfJson, options) {
        const promises = [];
        const resources = {
            shaders: [],
            buffers: [],
            images: [],
        };
        promises.push(this._loadResources(uint8array, basePath, gltfJson, options, resources));
        promises.push(new Promise((resolve, reject) => {
            this._loadJsonContent(gltfJson, options);
            resolve();
        }));
        return Promise.all(promises);
    }
    _loadJsonContent(gltfJson, options) {
        // Scene
        this._loadDependenciesOfScenes(gltfJson);
        // Node
        this._loadDependenciesOfNodes(gltfJson);
        // Mesh
        this._loadDependenciesOfMeshes(gltfJson);
        // Material
        this._loadDependenciesOfMaterials(gltfJson);
        // Texture
        this._loadDependenciesOfTextures(gltfJson);
        // Joint
        this._loadDependenciesOfJoints(gltfJson);
        // Animation
        this._loadDependenciesOfAnimations(gltfJson);
        // Accessor
        this._loadDependenciesOfAccessors(gltfJson);
        // BufferView
        this._loadDependenciesOfBufferViews(gltfJson);
        if (gltfJson.asset.extras === void 0) {
            gltfJson.asset.extras = {};
        }
    }
    _loadDependenciesOfScenes(gltfJson) {
        for (const scene of gltfJson.scenes) {
            for (const i in scene.nodes) {
                scene.nodesObjects[i] = gltfJson.nodes[scene.nodes[i]];
            }
        }
    }
    _loadDependenciesOfNodes(gltfJson) {
        for (const node of gltfJson.nodes) {
            // Hierarchy
            if (node.children) {
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.not.exist(node.childrenObjects)) {
                    node.childrenObjects = [];
                }
                for (const i in node.children) {
                    node.childrenObjects[i] = gltfJson.nodes[node.children[i]];
                }
            }
            // Mesh
            if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {
                node.meshObject = gltfJson.meshes[node.mesh];
            }
            // Skin
            if (node.skin !== void 0 && gltfJson.skins !== void 0) {
                node.skinObject = gltfJson.skins[node.skin];
                if (node.meshObject.extras === void 0) {
                    node.meshObject.extras = {};
                }
                node.meshObject.extras._skin = node.skin;
            }
            // Camera
            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {
                node.cameraObject = gltfJson.cameras[node.camera];
            }
            // Lights
            if (node.extensions !== void 0 &&
                gltfJson.extensions !== void 0 &&
                gltfJson.extensions.KHR_lights_punctual !== void 0) {
                node.extensions.KHR_lights_punctual.lightIndex =
                    node.extensions.KHR_lights_punctual.light;
                node.extensions.KHR_lights_punctual.light =
                    gltfJson.extensions.KHR_lights_punctual.lights[node.extensions.KHR_lights_punctual.lightIndex];
            }
        }
    }
    _loadDependenciesOfMeshes(gltfJson) {
        // Mesh
        for (const mesh of gltfJson.meshes) {
            for (const primitive of mesh.primitives) {
                if (primitive.material !== void 0) {
                    primitive.materialObject = gltfJson.materials[primitive.material];
                }
                for (const attributeName in primitive.attributes) {
                    const accessorId = primitive.attributes[attributeName];
                    const accessor = gltfJson.accessors[accessorId];
                    accessor.extras = {
                        toGetAsTypedArray: true,
                        attributeName: attributeName,
                    };
                    primitive.attributesObjects[attributeName] = accessor;
                }
                if (primitive.indices != null) {
                    primitive.indicesObject = gltfJson.accessors[primitive.indices];
                }
                if (primitive.targets != null) {
                    primitive.targetsObjects = [];
                    for (const target of primitive.targets) {
                        const attributes = {};
                        for (const attributeName in target) {
                            const targetShapeTargetAccessorId = target[attributeName];
                            if (targetShapeTargetAccessorId >= 0) {
                                const accessor = gltfJson.accessors[targetShapeTargetAccessorId];
                                accessor.extras = {
                                    toGetAsTypedArray: true,
                                    attributeName: attributeName,
                                };
                                attributes[attributeName] = accessor;
                            }
                        }
                        primitive.targetsObjects.push(attributes);
                    }
                }
            }
        }
    }
    _checkRnGltfLoaderOptionsExist(gltfModel) {
        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {
            return true;
        }
        else {
            return false;
        }
    }
    _loadDependenciesOfMaterials(gltfJson) {
        if (!gltfJson.textures)
            gltfJson.textures = [];
        // Material
        if (gltfJson.materials) {
            for (const material of gltfJson.materials) {
                if (material.pbrMetallicRoughness) {
                    const baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;
                    if (baseColorTexture !== void 0) {
                        baseColorTexture.texture =
                            gltfJson.textures[baseColorTexture.index];
                    }
                    const metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;
                    if (metallicRoughnessTexture !== void 0) {
                        metallicRoughnessTexture.texture =
                            gltfJson.textures[metallicRoughnessTexture.index];
                    }
                }
                const normalTexture = material.normalTexture;
                if (normalTexture !== void 0) {
                    normalTexture.texture = gltfJson.textures[normalTexture.index];
                }
                const occlusionTexture = material.occlusionTexture;
                if (occlusionTexture !== void 0) {
                    occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];
                }
                const emissiveTexture = material.emissiveTexture;
                if (emissiveTexture !== void 0) {
                    emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];
                }
                if (this._checkRnGltfLoaderOptionsExist(gltfJson) &&
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension &&
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures) {
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures(gltfJson, material);
                }
            }
        }
    }
    _loadDependenciesOfTextures(gltfJson) {
        // Texture
        if (gltfJson.textures) {
            for (const texture of gltfJson.textures) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_8__.ifDefinedThen)(v => {
                    texture.samplerObject = gltfJson.samplers[v];
                }, texture.sampler);
                if (texture.source !== void 0) {
                    texture.image = gltfJson.images[texture.source];
                }
            }
        }
    }
    _loadDependenciesOfJoints(gltfJson) {
        if (gltfJson.skins) {
            for (const skin of gltfJson.skins) {
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(skin.skeleton)) {
                    skin.skeletonObject = gltfJson.nodes[skin.skeleton];
                    (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_8__.ifDefinedThen)(v => (skin.inverseBindMatricesObject = gltfJson.accessors[v]), skin.inverseBindMatrices);
                    (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_8__.ifUndefinedThen)(() => (skin.skeletonObject = gltfJson.nodes[skin.joints[0]]), skin.skeleton);
                    skin.jointsObjects = [];
                    for (const jointIndex of skin.joints) {
                        skin.jointsObjects.push(gltfJson.nodes[jointIndex]);
                    }
                }
            }
        }
    }
    _loadDependenciesOfAnimations(gltfJson) {
        if (gltfJson.animations) {
            for (const animation of gltfJson.animations) {
                for (const channel of animation.channels) {
                    channel.samplerObject = animation.samplers[channel.sampler];
                    channel.target.nodeObject = gltfJson.nodes[channel.target.node];
                }
                for (const channel of animation.channels) {
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(channel.samplerObject)) {
                        channel.samplerObject.inputObject =
                            gltfJson.accessors[channel.samplerObject.input];
                        channel.samplerObject.outputObject =
                            gltfJson.accessors[channel.samplerObject.output];
                        if (channel.samplerObject.outputObject.extras === void 0) {
                            channel.samplerObject.outputObject.extras = {};
                        }
                        if (channel.target.path === 'rotation') {
                            channel.samplerObject.outputObject.extras.quaternionIfVec4 =
                                true;
                        }
                        if (channel.target.path === 'weights') {
                            const weightsArrayLength = channel.samplerObject.outputObject.count /
                                channel.samplerObject.inputObject.count;
                            channel.samplerObject.outputObject.extras.weightsArrayLength =
                                weightsArrayLength;
                        }
                    }
                }
            }
        }
    }
    _loadDependenciesOfAccessors(gltfJson) {
        // Accessor
        for (const accessor of gltfJson.accessors) {
            if (accessor.bufferView == null) {
                accessor.bufferView = 0;
            }
            accessor.bufferViewObject = gltfJson.bufferViews[accessor.bufferView];
            if (accessor.sparse != null) {
                const sparse = accessor.sparse;
                sparse.indices.bufferViewObject =
                    gltfJson.bufferViews[sparse.indices.bufferView];
                sparse.values.bufferViewObject =
                    gltfJson.bufferViews[sparse.values.bufferView];
            }
        }
    }
    _loadDependenciesOfBufferViews(gltfJson) {
        // BufferView
        for (const bufferView of gltfJson.bufferViews) {
            if (bufferView.buffer !== void 0) {
                bufferView.bufferObject = gltfJson.buffers[bufferView.buffer];
            }
        }
    }
    _mergeExtendedJson(gltfJson, extendedData) {
        let extendedJson = null;
        if (extendedData instanceof ArrayBuffer) {
            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(extendedData);
            extendedJson = JSON.parse(extendedJsonStr);
        }
        else if (typeof extendedData === 'string') {
            extendedJson = JSON.parse(extendedData);
        }
        else if (typeof extendedData === 'object') {
            extendedJson = extendedData;
        }
        Object.assign(gltfJson, extendedJson);
    }
    _loadResources(uint8Array, basePath, gltfJson, options, resources) {
        const promisesToLoadResources = [];
        // Shaders Async load
        // for (let _i in gltfJson.shaders) {
        //   const i = _i as any as number;
        //   resources.shaders[i] = {};
        //   let shaderJson = gltfJson.shaders[i];
        //   let shaderType = shaderJson.type;
        //   if (typeof shaderJson.extensions !== 'undefined' && typeof shaderJson.extensions.KHR_binary_glTF !== 'undefined') {
        //     resources.shaders[i].shaderText = this._accessBinaryAsShader(shaderJson.extensions.KHR_binary_glTF.bufferView, gltfJson, arrayBufferBinary);
        //     resources.shaders[i].shaderType = shaderType;
        //     continue;
        //   }
        //   let shaderUri = shaderJson.uri;
        //   if (options.files) {
        //     const splitted = shaderUri.split('/');
        //     const filename = splitted[splitted.length - 1];
        //     if (options.files[filename]) {
        //       const arrayBuffer = options.files[filename];
        //       resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);
        //       resources.shaders[i].shaderType = shaderType;
        //       continue;
        //     }
        //   }
        //   if (shaderUri.match(/^data:/)) {
        //     promisesToLoadResources.push(
        //       new Promise((resolve, rejected) => {
        //         let arrayBuffer = DataUtil.dataUriToArrayBuffer(shaderUri);
        //         resources.shaders[i].shaderText = DataUtil.arrayBufferToString(arrayBuffer);
        //         resources.shaders[i].shaderType = shaderType;
        //         resolve();
        //       })
        //     );
        //   } else {
        //     shaderUri = basePath + shaderUri;
        //     promisesToLoadResources.push(
        //       DataUtil.loadResourceAsync(shaderUri, false,
        //         (resolve:Function, response:any)=>{
        //           resources.shaders[i].shaderText = response;
        //           resources.shaders[i].shaderType = shaderType;
        //           resolve(gltfJson);
        //         },
        //         (reject:Function, error:any)=>{
        //         }
        //       )
        //     );
        //   }
        // }
        // Buffers Async load
        let rnpArrayBuffer;
        for (const i in gltfJson.buffers) {
            const bufferInfo = gltfJson.buffers[i];
            let splitted;
            let filename;
            if (bufferInfo.uri) {
                splitted = bufferInfo.uri.split('/');
                filename = splitted[splitted.length - 1];
            }
            if (typeof bufferInfo.uri === 'undefined') {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__.RnPromise((resolve, rejected) => {
                    resources.buffers[i] = uint8Array;
                    bufferInfo.buffer = uint8Array;
                    resolve(uint8Array);
                });
            }
            else if (bufferInfo.uri.match(/^data:application\/(.*);base64,/)) {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__.RnPromise((resolve, rejected) => {
                    const arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.dataUriToArrayBuffer(bufferInfo.uri);
                    resources.buffers[i] = new Uint8Array(arrayBuffer);
                    bufferInfo.buffer = new Uint8Array(arrayBuffer);
                    resolve(arrayBuffer);
                });
            }
            else if (options.files && options.files[filename]) {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__.RnPromise((resolve, rejected) => {
                    const arrayBuffer = options.files[filename];
                    resources.buffers[i] = new Uint8Array(arrayBuffer);
                    bufferInfo.buffer = new Uint8Array(arrayBuffer);
                    resolve(arrayBuffer);
                });
            }
            else {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_6__.RnPromise(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.loadResourceAsync(basePath + bufferInfo.uri, true, (resolve, response) => {
                    resources.buffers[i] = new Uint8Array(response);
                    bufferInfo.buffer = new Uint8Array(response);
                    resolve(response);
                }, (reject, error) => { }));
            }
            bufferInfo.bufferPromise = rnpArrayBuffer;
            promisesToLoadResources.push(rnpArrayBuffer);
        }
        // Textures Async load
        for (const _i in gltfJson.images) {
            const i = _i;
            const imageJson = gltfJson.images[i];
            //let imageJson = gltfJson.images[textureJson.source];
            //let samplerJson = gltfJson.samplers[textureJson.sampler];
            let imageUri;
            if (typeof imageJson.uri === 'undefined') {
                if (uint8Array == null) {
                    const bufferView = gltfJson.bufferViews[imageJson.bufferView];
                    bufferView.bufferObject.buffer;
                }
                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.bufferView, uint8Array);
                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(imageUint8Array, imageJson.mimeType);
            }
            else {
                const imageFileStr = imageJson.uri;
                const splitted = imageFileStr.split('/');
                const filename = splitted[splitted.length - 1];
                if (options.files && options.files[filename]) {
                    const arrayBuffer = options.files[filename];
                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), imageJson.mimeType);
                }
                else if (imageFileStr.match(/^data:/)) {
                    imageUri = imageFileStr;
                }
                else {
                    imageUri = basePath + imageFileStr;
                }
            }
            // if (options.extensionLoader && options.extensionLoader.setUVTransformToTexture) {
            //   options.extensionLoader.setUVTransformToTexture(texture, samplerJson);
            // }
            const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(imageUri, imageJson.mimeType).then(image => {
                image.crossOrigin = 'Anonymous';
                resources.images[i] = image;
                imageJson.image = image;
            });
            promisesToLoadResources.push(promise);
        }
        if (options.defaultTextures) {
            const basePath = options.defaultTextures.basePath;
            const textureInfos = options.defaultTextures.textureInfos;
            for (const textureInfo of textureInfos) {
                const fileName = textureInfo.fileName;
                const uri = basePath + fileName;
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getMimeTypeFromExtension(fileExtension);
                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(uri, mimeType).then(image => {
                    image.crossOrigin = 'Anonymous';
                    textureInfo.image = { image: image };
                });
                promisesToLoadResources.push(promise);
            }
        }
        return Promise.all(promisesToLoadResources).catch(err => {
            console.log('Promise.all error', err);
        });
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new DrcPointCloudImporter();
        }
        return this.__instance;
    }
    __decodeDraco(arrayBuffer, defaultOptions, basePath, options) {
        return this.__decodeBuffer(arrayBuffer).then((json) => {
            const gotText = JSON.stringify(json);
            const gltfJson = JSON.parse(gotText);
            return this._loadAsTextJson(gltfJson, options, defaultOptions, basePath).catch(err => {
                console.log('this.__loadAsTextJson error', err);
            });
        });
    }
    __decodeBuffer(arrayBuffer) {
        const draco = new DracoDecoderModule();
        const decoder = new draco.Decoder();
        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);
        if (dracoGeometry == null) {
            throw new Error('invalid dracoGeometry.');
        }
        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {
            throw new Error('invalid geometryType of drc file.');
        }
        const posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);
        if (posAttId === -1) {
            draco.destroy(decoder);
            draco.destroy(dracoGeometry);
            throw new Error('Draco: No position attribute found.');
        }
        const attributeNames = [
            'POSITION',
            'NORMAL',
            'COLOR',
            'TEX_COORD',
            'GENERIC',
        ];
        const numPoints = dracoGeometry.num_points();
        const attributeDataAll = [];
        const attributeComponents = [];
        let bufferLength = 0;
        for (let i = 0; i < attributeNames.length; i++) {
            const attId = decoder.GetAttributeId(dracoGeometry, draco[attributeNames[i]]);
            if (attId === -1) {
                attributeNames.splice(i, 1);
                i--;
                continue;
            }
            const attribute = decoder.GetAttribute(dracoGeometry, attId);
            const attributeData = new draco.DracoFloat32Array();
            decoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, attributeData);
            attributeDataAll[i] = attributeData;
            const numComponent = attribute.num_components();
            attributeComponents[i] = numComponent;
            if (attributeNames[i] === 'COLOR') {
                bufferLength += numPoints * 4;
            }
            else {
                bufferLength += numPoints * numComponent;
            }
        }
        const buffer = new Float32Array(bufferLength);
        for (let i = 0, currentBufferIndex = 0; i < attributeNames.length; i++) {
            if (attributeNames[i] === 'COLOR' && attributeComponents[i] === 3) {
                for (let j = 0; j < numPoints; currentBufferIndex += 4, j += 3) {
                    buffer[currentBufferIndex] = attributeDataAll[i].GetValue(j);
                    buffer[currentBufferIndex + 1] = attributeDataAll[i].GetValue(j + 1);
                    buffer[currentBufferIndex + 2] = attributeDataAll[i].GetValue(j + 2);
                    buffer[currentBufferIndex + 3] = 1.0; // alpha value
                }
            }
            else if (attributeNames[i] === 'TEX_COORD') {
                for (let j = 0; j < numPoints; currentBufferIndex += 2, j++) {
                    buffer[currentBufferIndex] = attributeDataAll[i].GetValue(2 * j);
                    buffer[currentBufferIndex + 1] =
                        1.0 - attributeDataAll[i].GetValue(2 * j + 1);
                }
            }
            else {
                for (let j = 0; j < numPoints * attributeComponents[i]; currentBufferIndex++, j++) {
                    buffer[currentBufferIndex] = attributeDataAll[i].GetValue(j);
                }
            }
            draco.destroy(attributeDataAll[i]);
        }
        draco.destroy(decoder);
        draco.destroy(dracoGeometry);
        return this.__decodedBufferToJSON(buffer, numPoints, attributeNames, attributeComponents);
    }
    async __decodedBufferToJSON(buffer, numPoints, attributeNames, attributeComponents) {
        const json = {
            asset: {
                version: '2.0',
            },
            extensionsUsed: ['KHR_materials_unlit'],
            extensionsRequired: ['KHR_materials_unlit'],
            nodes: [
                {
                    name: 'Node',
                    mesh: 0,
                },
            ],
            scenes: [
                {
                    nodes: [0],
                },
            ],
            materials: [
                {
                    name: 'point-cloud_material',
                    pbrMetallicRoughness: {
                        baseColorFactor: [1.0, 1.0, 1.0, 1.0],
                    },
                    extensions: {
                        KHR_materials_unlit: {},
                    },
                },
            ],
        };
        await this.__setBuffersToJSON(buffer, json);
        this.__setAccessorsAndBufferViewsToJSON(numPoints, attributeNames, attributeComponents, json);
        this.__setMeshesToJSON(attributeNames, json);
        return new Promise((resolve, reject) => {
            resolve(json);
        });
    }
    __setBuffersToJSON(buffer, json) {
        return this.__convertBufferToURI(buffer.buffer)
            .then(uri => {
            json['buffers'] = [
                {
                    name: 'input',
                    byteLength: buffer.byteLength,
                    uri: uri,
                },
            ];
        })
            .catch(err => {
            console.log('this.__convertBufferToURI error:', err);
        });
    }
    __convertBufferToURI(arrayBuffer) {
        return new Promise((resolve, reject) => {
            const blob = new Blob([arrayBuffer], { type: 'application/octet-stream' });
            const fr = new FileReader();
            fr.onload = () => {
                resolve(fr.result);
            };
            fr.onerror = () => {
                reject(fr.error);
            };
            fr.readAsDataURL(blob);
        });
    }
    __setAccessorsAndBufferViewsToJSON(numPoints, attributeNames, attributeComponents, json) {
        const accessors = [];
        const bufferViews = [];
        let byteOffsetOfBufferView = 0;
        for (let i = 0, indexOfBufferView = 0; i < attributeNames.length; indexOfBufferView++) {
            const numOfComponents = attributeComponents[i];
            let type;
            if (numOfComponents === 1) {
                type = 'SCALAR';
            }
            else {
                type = 'VEC' + numOfComponents;
            }
            let byteOffsetOfAccessor = 0;
            const attributeName = attributeNames[i];
            while (i < attributeNames.length) {
                accessors.push({
                    name: 'point-cloud_' + attributeName + '_' + i,
                    componentType: 5126,
                    count: numPoints,
                    type: type,
                    bufferView: indexOfBufferView,
                    byteOffset: byteOffsetOfAccessor,
                });
                if (attributeNames[i] === 'COLOR') {
                    byteOffsetOfAccessor += numPoints * 4 * 4;
                }
                else {
                    byteOffsetOfAccessor += numPoints * numOfComponents * 4;
                }
                i++;
                if (attributeName != attributeNames[i]) {
                    break;
                }
            }
            bufferViews[indexOfBufferView] = {
                name: 'bufferView_' + attributeName,
                buffer: 0,
                byteLength: byteOffsetOfAccessor,
                byteOffset: byteOffsetOfBufferView,
                byteStride: numOfComponents * 4,
                target: 34962, // gl.ARRAY_BUFFER
            };
            byteOffsetOfBufferView += byteOffsetOfAccessor;
        }
        json['accessors'] = accessors;
        json['bufferViews'] = bufferViews;
    }
    __setMeshesToJSON(attributeNames, json) {
        const attributes = {};
        for (let i = 0; i < attributeNames.length; i++) {
            if (attributeNames[i] === 'TEX_COORD') {
                attributes['TEXCOORD_0'] = i;
            }
            else if (attributeNames[i] === 'GENERIC') {
                attributes['TANGENT'] = i;
            }
            else {
                attributes[attributeNames[i]] = i;
            }
        }
        const mesh = {
            name: 'Node-Mesh',
            primitives: [
                {
                    mode: 0,
                    material: 0,
                    attributes: attributes,
                },
            ],
        };
        json['meshes'] = [mesh];
    }
    /**
     * Import Draco file of point cloud type.
     * WEIGHTS_0 and JOINTS_0 attribute and all the mesh type and is not support yet.
     * @param uri - uri of glTF file
     * @returns a primitive of Rhodonite object
     */
    async importPointCloudToPrimitive(uri) {
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        return this.__decodeDracoToPrimitive(arrayBuffer);
    }
    // tangent is not available
    __decodeDracoToPrimitive(arrayBuffer) {
        const draco = new DracoDecoderModule();
        const decoder = new draco.Decoder();
        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arrayBuffer);
        if (dracoGeometry == null) {
            throw new Error('invalid dracoGeometry.');
        }
        if (dracoGeometry.geometryType !== draco.POINT_CLOUD) {
            throw new Error('invalid geometryType of drc file.');
        }
        const attributeCompositionTypes = [];
        const attributeSemantics = [];
        const attributes = [];
        this.__getPositions(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);
        this.__getColors(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);
        this.__getNormals(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);
        this.__getTextureCoords(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes);
        const primitive = _geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__.Primitive.createPrimitive({
            attributeSemantics: attributeSemantics,
            attributes: attributes,
            material: _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_2__.MaterialHelper.createClassicUberMaterial({
                isSkinning: false,
                isLighting: true,
            }),
            primitiveMode: _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_4__.PrimitiveMode.Points,
        });
        draco.destroy(decoder);
        draco.destroy(dracoGeometry);
        return primitive;
    }
    __getGeometryFromDracoBuffer(draco, decoder, arrayBuffer) {
        const buffer = new draco.DecoderBuffer();
        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);
        const geometryType = decoder.GetEncodedGeometryType(buffer);
        let dracoGeometry;
        let decodingStatus;
        if (geometryType === draco.TRIANGULAR_MESH) {
            dracoGeometry = new draco.Mesh();
            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);
        }
        else if (geometryType === draco.POINT_CLOUD) {
            dracoGeometry = new draco.PointCloud();
            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);
        }
        else {
            const errorMsg = 'Unknown geometry type.';
            console.error(errorMsg);
        }
        dracoGeometry.geometryType = geometryType; // store
        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {
            let errorMsg = 'Decoding failed: ';
            errorMsg += decodingStatus.error_msg();
            console.error(errorMsg);
            draco.destroy(decoder);
            draco.destroy(dracoGeometry);
            return void 0;
        }
        draco.destroy(buffer);
        return dracoGeometry;
    }
    __getPositions(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {
        const posAttId = decoder.GetAttributeId(dracoGeometry, draco.POSITION);
        if (posAttId === -1) {
            draco.destroy(decoder);
            draco.destroy(dracoGeometry);
            throw new Error('Draco: No position attribute found.');
        }
        const posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);
        const posAttributeData = new draco.DracoFloat32Array();
        decoder.GetAttributeFloatForAllPoints(dracoGeometry, posAttribute, posAttributeData);
        const numPoints = dracoGeometry.num_points();
        const numVertices = numPoints * 3;
        const positions = new Float32Array(numVertices);
        for (let i = 0; i < numVertices; i += 1) {
            positions[i] = posAttributeData.GetValue(i); // XYZ XYZ
        }
        attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec3);
        attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__.VertexAttribute.Position.XYZ);
        attributes.push(positions);
        draco.destroy(posAttributeData);
        return positions;
    }
    __getColors(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {
        // Get color attributes if exists.
        const colorAttId = decoder.GetAttributeId(dracoGeometry, draco.COLOR);
        if (colorAttId === -1) {
            return null;
        }
        else {
            //console.log('Loaded color attribute.');
            const colAttribute = decoder.GetAttribute(dracoGeometry, colorAttId);
            const colAttributeData = new draco.DracoFloat32Array();
            decoder.GetAttributeFloatForAllPoints(dracoGeometry, colAttribute, colAttributeData);
            const numPoints = dracoGeometry.num_points();
            const numComponents = colAttribute.num_components();
            const numVertices = numPoints * 4;
            const colors = new Float32Array(numVertices);
            for (let i = 0; i < numVertices; i += numComponents) {
                colors[i] = colAttributeData.GetValue(i);
                colors[i + 1] = colAttributeData.GetValue(i + 1);
                colors[i + 2] = colAttributeData.GetValue(i + 2);
                if (numComponents == 4) {
                    colors[i + 3] = colAttributeData.GetValue(i + 3);
                }
                else {
                    colors[i + 3] = 1.0;
                }
            }
            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec3);
            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__.VertexAttribute.Color0.XYZ);
            attributes.push(colors);
            draco.destroy(colAttributeData);
            return colors;
        }
    }
    __getNormals(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {
        // Get normal attributes if exists.
        const normalAttId = decoder.GetAttributeId(dracoGeometry, draco.NORMAL);
        if (normalAttId === -1) {
            return null;
        }
        else {
            //console.log('Loaded normal attribute.');
            const norAttribute = decoder.GetAttribute(dracoGeometry, normalAttId);
            const norAttributeData = new draco.DracoFloat32Array();
            decoder.GetAttributeFloatForAllPoints(dracoGeometry, norAttribute, norAttributeData);
            const numPoints = dracoGeometry.num_points();
            const numVertices = numPoints * 3;
            const normals = new Float32Array(numVertices);
            for (let i = 0; i < numVertices; i += 1) {
                normals[i] = norAttributeData.GetValue(i); // XYZ XYZ
            }
            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec3);
            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__.VertexAttribute.Normal.XYZ);
            attributes.push(normals);
            draco.destroy(norAttributeData);
            return normals;
        }
    }
    __getTextureCoords(draco, decoder, dracoGeometry, attributeCompositionTypes, attributeSemantics, attributes) {
        // Get texture coordinate attributes if exists.
        const texCoordAttId = decoder.GetAttributeId(dracoGeometry, draco.TEX_COORD);
        if (texCoordAttId === -1) {
            return null;
        }
        else {
            const texCoordAttribute = decoder.GetAttribute(dracoGeometry, texCoordAttId);
            const texCoordAttributeData = new draco.DracoFloat32Array();
            decoder.GetAttributeFloatForAllPoints(dracoGeometry, texCoordAttribute, texCoordAttributeData);
            const numPoints = dracoGeometry.num_points();
            const numVertices = numPoints * 2;
            const texCoords = new Float32Array(numVertices);
            for (let i = 0; i < numVertices; i += 1) {
                texCoords[i] = texCoordAttributeData.GetValue(i); // XYZ XYZ
            }
            attributeCompositionTypes.push(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Vec2);
            attributeSemantics.push(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_5__.VertexAttribute.Texcoord0.XY);
            attributes.push(texCoords);
            draco.destroy(texCoordAttributeData);
            return texCoords;
        }
    }
}


/***/ }),

/***/ "./src/foundation/importer/FormatDetector.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/FormatDetector.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "detectFormatByArrayBuffers": () => (/* binding */ detectFormatByArrayBuffers),
/* harmony export */   "detectFormatByUri": () => (/* binding */ detectFormatByUri)
/* harmony export */ });
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../foundation/definitions/FileType */ "./src/foundation/definitions/FileType.ts");


function detectFormatByArrayBuffers(files) {
    for (const fileName in files) {
        const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
        if (fileExtension === 'gltf') {
            return _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__.FileType.Gltf;
        }
        else if (fileExtension === 'glb') {
            return _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__.FileType.GltfBinary;
        }
        else if (fileExtension === 'vrm') {
            return _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__.FileType.VRM;
        }
        else if (fileExtension === 'drc') {
            return _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__.FileType.Draco;
        }
    }
    return _foundation_definitions_FileType__WEBPACK_IMPORTED_MODULE_1__.FileType.Unknown;
}
function detectFormatByUri(uri) {
    const split = uri.split('.');
    const fileExtension = split[split.length - 1];
    if (fileExtension === 'efk') {
        return 'Effekseer';
    }
    else if (fileExtension === 'drc') {
        return 'Draco';
    }
    else if (fileExtension === 'vrm') {
        return 'VRM';
    }
    else if (fileExtension === 'gltf') {
        return 'glTF';
    }
    return 'Unknown';
    // // glTF
    // return DataUtil.loadResourceAsync(uri, true,
    //   (resolve: Function, response: any) => {
    //     const arrayBuffer = response;
    //     checkVersionOfGltf(arrayBuffer);
    //     console.warn('discard downloaded arrayBuffer');
    //   }, (rejects: any, status: any) => {
    //     console.log(status);
    //   }
    // );
}


/***/ }),

/***/ "./src/foundation/importer/Gltf1Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf1Importer.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Gltf1Importer": () => (/* binding */ Gltf1Importer)
/* harmony export */ });
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");


class Gltf1Importer {
    constructor() { }
    /**
     * the method to load glTF1 file.
     * @param uri - uri of glTF file
     * @param options - options for loading process
     * @returns a glTF2 based JSON pre-processed
     */
    static async import(uri, options) {
        var _a;
        if (options && options.files) {
            for (const fileName in options.files) {
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                if (fileExtension === 'gltf' || fileExtension === 'glb') {
                    return await this.importGltfOrGlbFromArrayBuffers(options.files[fileName], options.files, options, uri);
                }
            }
        }
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        return await this.importGltfOrGlbFromArrayBuffers(arrayBuffer, (_a = options === null || options === void 0 ? void 0 : options.files) !== null && _a !== void 0 ? _a : {}, options, uri);
    }
    static async importGltfOrGlbFromFile(uri, options) {
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        const glTFJson = await this.importGltfOrGlbFromArrayBuffers(arrayBuffer, {}, options, uri).catch(err => {
            console.log('this.__loadFromArrayBuffer error', err);
            return undefined;
        });
        return glTFJson;
    }
    /**
     * Import glTF1 array buffer.
     * @param arrayBuffer .gltf/.glb file in ArrayBuffer
     * @param otherFiles other resource files data in ArrayBuffers
     * @param options options for loading process (Optional)
     * @param uri .gltf file's uri (Optional)
     * @returns a glTF2 based JSON pre-processed
     */
    static async importGltfOrGlbFromArrayBuffers(arrayBuffer, otherFiles, options, uri) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        // Magic field
        const magic = dataView.getUint32(0, true);
        // 0x46546C67 is 'glTF' in ASCII codes.
        if (magic !== 0x46546c67) {
            //const json = await response.json();
            const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(arrayBuffer);
            const json = JSON.parse(gotText);
            const gltfJson = await this.importGltf(json, otherFiles, options, uri);
            return gltfJson;
        }
        else {
            const gltfJson = await this.importGlb(arrayBuffer, otherFiles, options);
            return gltfJson;
        }
    }
    static _getOptions(defaultOptions, json, options) {
        var _a, _b;
        if (((_b = (_a = json.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) != null) {
            for (const optionName in json.asset.extras.rnLoaderOptions) {
                defaultOptions[optionName] =
                    json.asset.extras.rnLoaderOptions[optionName];
            }
        }
        for (const optionName in options) {
            defaultOptions[optionName] = options[optionName];
        }
        if (options &&
            options.loaderExtensionName &&
            typeof options.loaderExtensionName === 'string') {
            if (Rn[options.loaderExtensionName] != null) {
                defaultOptions.loaderExtension =
                    Rn[options.loaderExtensionName].getInstance();
            }
            else {
                console.error(`${options.loaderExtensionName} not found!`);
                defaultOptions.loaderExtension = void 0;
            }
        }
        return defaultOptions;
    }
    static async importGlb(arrayBuffer, files, options) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        const gltfVer = dataView.getUint32(4, true);
        if (gltfVer !== 1) {
            throw new Error('invalid version field in this binary glTF file.');
        }
        const lengthOfJSonChunkData = dataView.getUint32(12, true);
        const chunkType = dataView.getUint32(16, true);
        // 0 means JSON format
        if (chunkType !== 0) {
            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');
        }
        const uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);
        const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.uint8ArrayToString(uint8ArrayJSonContent);
        const gltfJson = JSON.parse(gotText);
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        options = this._getOptions(defaultOptions, gltfJson, options);
        const uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData);
        if (gltfJson.asset === undefined) {
            gltfJson.asset = {};
        }
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '1' };
        }
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        const result = await this._loadInner(gltfJson, files, options, uint8array);
        return result[0][0];
    }
    static async importGltf(gltfJson, files, options, uri, callback) {
        const basePath = (uri === null || uri === void 0 ? void 0 : uri.substring(0, uri === null || uri === void 0 ? void 0 : uri.lastIndexOf('/'))) + '/'; // location of model file as basePath
        if (gltfJson.asset === undefined) {
            gltfJson.asset = {};
        }
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '1' };
        }
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        options = this._getOptions(defaultOptions, gltfJson, options);
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        const result = await this._loadInner(gltfJson, files, options, undefined, basePath);
        return result[0][0];
    }
    static _loadInner(gltfJson, files, options, uint8array, basePath) {
        const promises = [];
        promises.push(this._loadResources(uint8array, gltfJson, files, options, basePath));
        promises.push(new Promise(resolve => {
            this._loadJsonContent(gltfJson);
            resolve([]);
        }));
        return Promise.all(promises);
    }
    static _loadJsonContent(gltfJson) {
        this._convertToGltf2LikeStructure(gltfJson);
        // Scene
        this._loadDependenciesOfScenes(gltfJson);
        // Node
        this._loadDependenciesOfNodes(gltfJson);
        // Mesh
        this._loadDependenciesOfMeshes(gltfJson);
        // Material
        this._loadDependenciesOfMaterials(gltfJson);
        // Texture
        this._loadDependenciesOfTextures(gltfJson);
        // Joint
        this._loadDependenciesOfJoints(gltfJson);
        // Animation
        this._loadDependenciesOfAnimations(gltfJson);
        // Accessor
        this._loadDependenciesOfAccessors(gltfJson);
        // BufferView
        this._loadDependenciesOfBufferViews(gltfJson);
    }
    static _convertToGltf2LikeStructure(gltfJson) {
        gltfJson.bufferDic = gltfJson.buffers;
        this.__createProperty(gltfJson, gltfJson.bufferDic, 'buffers');
        gltfJson.sceneDic = gltfJson.scenes;
        this.__createProperty(gltfJson, gltfJson.sceneDic, 'scenes');
        gltfJson.meshDic = gltfJson.meshes;
        this.__createProperty(gltfJson, gltfJson.meshDic, 'meshes');
        {
            let count = 0;
            gltfJson.nodeDic = gltfJson.nodes;
            gltfJson.nodes = [];
            gltfJson.nodesIndices = [];
            for (const nodeName in gltfJson.nodeDic) {
                gltfJson.nodesIndices.push(count);
                const node = gltfJson.nodeDic[nodeName];
                node._index = count++;
                gltfJson.nodes.push(node);
            }
        }
        gltfJson.skinDic = gltfJson.skins;
        this.__createProperty(gltfJson, gltfJson.skinDic, 'skins');
        gltfJson.materialDic = gltfJson.materials;
        this.__createProperty(gltfJson, gltfJson.materialDic, 'materials');
        gltfJson.animationDic = gltfJson.animations;
        this.__createProperty(gltfJson, gltfJson.animationDic, 'animations');
        gltfJson.accessorDic = gltfJson.accessors;
        this.__createProperty(gltfJson, gltfJson.accessorDic, 'accessors');
        gltfJson.bufferViewDic = gltfJson.bufferViews;
        this.__createProperty(gltfJson, gltfJson.bufferViewDic, 'bufferViews');
        gltfJson.cameraDic = gltfJson.cameras;
        gltfJson.imageDic = gltfJson.images;
        gltfJson.samplerDic = gltfJson.samplers;
        gltfJson.shaderDic = gltfJson.shaders;
        gltfJson.textureDic = gltfJson.textures;
    }
    static __createProperty(gltfJson, gltfPropertyDic, gltfPropertyName) {
        if (gltfJson[gltfPropertyName] == null) {
            return;
        }
        const propertyNumber = Object.keys(gltfPropertyDic).length;
        const propertyArray = (gltfJson[gltfPropertyName] = new Array(propertyNumber));
        let i = 0;
        for (const propertyName in gltfPropertyDic) {
            propertyArray[i] = gltfPropertyDic[propertyName];
            i++;
        }
    }
    static _loadDependenciesOfScenes(gltfJson) {
        for (const sceneName in gltfJson.sceneDic) {
            const scene = gltfJson.sceneDic[sceneName];
            scene.nodeNames = scene.nodes;
            scene.nodes = [];
            scene.nodesObjects = [];
            for (const name of scene.nodeNames) {
                scene.nodesObjects.push(gltfJson.nodeDic[name]);
                // calc index of 'name' in gltfJson.nodeDic enumerate
                let count = 0;
                for (const nodeName in gltfJson.nodeDic) {
                    if (nodeName === name) {
                        break;
                    }
                    count++;
                }
                scene.nodes.push(count);
            }
        }
    }
    static _loadDependenciesOfNodes(gltfJson) {
        for (const node of gltfJson.nodes) {
            //const node = (gltfJson.nodeDic as any)[nodeName];
            // Hierarchy
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(node.children)) {
                node.childrenNames = node.children.concat();
                node.children = [];
                node.childrenIndices = [];
                for (const name of node.childrenNames) {
                    const childNode = gltfJson.nodeDic[name];
                    node.children.push(childNode);
                    node.childrenIndices.push(childNode._index);
                }
            }
            // Mesh
            if (node.meshes !== void 0 && gltfJson.meshes !== void 0) {
                node.meshNames = node.meshes;
                node.meshes = [];
                for (const name of node.meshNames) {
                    node.meshes.push(gltfJson.meshDic[name]);
                }
                node.meshObject = node.meshes[1];
                if (node.meshes == null || node.meshes.length === 0) {
                    node.meshObject = node.meshes[0];
                }
                else {
                    const mergedMesh = {
                        name: '',
                        primitives: [],
                    };
                    for (let i = 0; i < node.meshes.length; i++) {
                        mergedMesh.name += '_' + node.meshes[i].name;
                        Array.prototype.push.apply(mergedMesh.primitives, node.meshes[i].primitives);
                    }
                    mergedMesh.name += '_merged';
                    node.meshObject = mergedMesh;
                    node.meshes = void 0;
                    gltfJson.meshes.push(node.meshObject);
                }
                node.mesh = gltfJson.meshes.indexOf(node.meshObject);
            }
            // Skin
            if (node.skin !== void 0 && gltfJson.skins !== void 0) {
                if (typeof node.skin === 'string') {
                    node.skinName = node.skin;
                    node.skin = gltfJson.skinDic[node.skinName];
                }
                // if (node.mesh.extras === void 0) {
                //   node.mesh.extras = {};
                // }
                //node.mesh.extras._skin = node.skin;
            }
            // Camera
            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {
                node.cameraName = node.camera;
                node.camera = gltfJson.cameraDic[node.cameraName];
            }
        }
    }
    static _loadDependenciesOfMeshes(gltfJson) {
        // Mesh
        for (const meshName in gltfJson.meshDic) {
            const mesh = gltfJson.meshDic[meshName];
            for (const primitive of mesh.primitives) {
                if (primitive.material !== void 0) {
                    primitive.materialName = primitive.material;
                    primitive.materialObject =
                        gltfJson.materialDic[primitive.materialName];
                    primitive.material = gltfJson.materials.indexOf(primitive.materialObject);
                }
                primitive.attributesNames = Object.assign({}, primitive.attributes);
                primitive.attributes = [];
                primitive.attributesObjects = {};
                for (let attributeName in primitive.attributesNames) {
                    if (primitive.attributesNames[attributeName] != null) {
                        const accessorName = primitive.attributesNames[attributeName];
                        const accessor = gltfJson.accessorDic[accessorName];
                        if (attributeName === 'JOINT') {
                            attributeName = 'JOINTS_0';
                            delete primitive.attributes['JOINT'];
                        }
                        else if (attributeName === 'WEIGHT') {
                            attributeName = 'WEIGHTS_0';
                            delete primitive.attributes['WEIGHT'];
                        }
                        accessor.extras = {
                            toGetAsTypedArray: true,
                            attributeName: attributeName,
                        };
                        primitive.attributesObjects[attributeName] = accessor;
                    }
                }
                if (primitive.indices !== void 0) {
                    primitive.indicesName = primitive.indices;
                    primitive.indicesObject = gltfJson.accessorDic[primitive.indicesName];
                    primitive.indices = gltfJson.accessors.indexOf(primitive.indicesObject);
                }
            }
        }
    }
    static _isKHRMaterialsCommon(materialJson) {
        if (typeof materialJson.extensions !== 'undefined' &&
            typeof materialJson.extensions.KHR_materials_common !== 'undefined') {
            return true;
        }
        else {
            return false;
        }
    }
    static _loadDependenciesOfMaterials(gltfJson) {
        // Material
        if (gltfJson.materials) {
            for (const materialStr in gltfJson.materials) {
                let material = gltfJson.materials[materialStr];
                const origMaterial = material;
                if (this._isKHRMaterialsCommon(material)) {
                    material = material.extensions.KHR_materials_common;
                }
                const setParameters = (values, isParameter) => {
                    for (const valueName in values) {
                        let value = null;
                        if (isParameter) {
                            value = values[valueName].value;
                            if (typeof value === 'undefined') {
                                continue;
                            }
                        }
                        else {
                            value = values[valueName];
                        }
                        if (typeof value === 'string') {
                            const textureStr = value;
                            if (valueName === 'diffuse' ||
                                (material.technique === 'CONSTANT' && valueName === 'ambient')) {
                                origMaterial.diffuseColorTexture = {};
                                origMaterial.diffuseColorTexture.texture = gltfJson.textures[value];
                            }
                            else if (valueName === 'emission' &&
                                textureStr.match(/_normal$/)) {
                                origMaterial.emissionTexture = {};
                                origMaterial.emissionTexture.texture = gltfJson.textures[value];
                            }
                            origMaterial.extras = {};
                            origMaterial.extras.technique = material.technique;
                        }
                        else {
                            if (valueName === 'diffuse') {
                                origMaterial.diffuseColorFactor = value;
                            }
                        }
                    }
                };
                setParameters(material.values, false);
                if (material.technique && gltfJson.techniques) {
                    if (typeof gltfJson.techniques[material.technique] !== 'undefined') {
                        setParameters(gltfJson.techniques[material.technique].parameters, true);
                    }
                }
            }
        }
    }
    static _loadDependenciesOfTextures(gltfJson) {
        // Texture
        if (gltfJson.textures) {
            for (const textureName in gltfJson.textureDic) {
                const texture = gltfJson.textureDic[textureName];
                if (texture.sampler !== void 0) {
                    texture.samplerName = texture.sampler;
                    texture.samplerObject = gltfJson.samplerDic[texture.samplerName];
                }
                if (texture.source !== void 0) {
                    texture.sourceName = texture.source;
                    texture.image = gltfJson.imageDic[texture.sourceName];
                }
            }
        }
    }
    static _loadDependenciesOfJoints(gltfJson) {
        if (gltfJson.skins) {
            for (const skinName in gltfJson.skinDic) {
                const skin = gltfJson.skinDic[skinName];
                skin.joints = [];
                skin.jointsIndices = [];
                for (const jointName of skin.jointNames) {
                    const joint = gltfJson.nodeDic[jointName];
                    skin.joints.push(joint);
                    skin.jointsIndices.push(joint._index);
                }
                skin.skeletonNames = skin.skeletons;
                if (skin.skeletonNames) {
                    for (const name of skin.skeletonNames) {
                        skin.skeleton = skin.skeletons.push(gltfJson.nodeDic[name]);
                    }
                }
                else {
                    skin.skeleton = skin.joints[0];
                }
                skin.skeletonIndex = skin.skeleton._index;
                skin.inverseBindMatricesName = skin.inverseBindMatrices;
                skin.inverseBindMatrices = gltfJson.accessorDic[skin.inverseBindMatricesName];
                skin.joints_tmp = skin.joints;
                skin.joints = [];
                for (const joint of skin.joints_tmp) {
                    skin.joints.push(gltfJson.nodeDic[joint.name]);
                }
                skin.joints_tmp = void 0;
            }
        }
    }
    static _loadDependenciesOfAnimations(gltfJson) {
        if (gltfJson.animations) {
            for (const animationName in gltfJson.animationDic) {
                const animation = gltfJson.animationDic[animationName];
                const samplerDic = animation.samplers;
                animation.samplers = [];
                for (const channel of animation.channels) {
                    channel.samplerObject = samplerDic[channel.sampler];
                    channel.target.nodeObject =
                        gltfJson.nodeDic[channel.target.id];
                    channel.samplerObject.inputObject =
                        gltfJson.accessorDic[animation.parameters['TIME']];
                    channel.samplerObject.outputObject =
                        gltfJson.accessorDic[animation.parameters[channel.target.path]];
                    animation.samplers.push(channel.samplerObject);
                    if (channel.target.path === 'rotation') {
                        if (channel.samplerObject.outputObject.extras === void 0) {
                            channel.samplerObject.outputObject.extras = {};
                        }
                        channel.samplerObject.outputObject.extras.quaternionIfVec4 =
                            true;
                    }
                }
            }
        }
    }
    static _loadDependenciesOfAccessors(gltfJson) {
        // Accessor
        for (const accessorName in gltfJson.accessorDic) {
            const accessor = gltfJson.accessorDic[accessorName];
            if (accessor.bufferView !== void 0) {
                accessor.bufferViewName = accessor.bufferView;
                accessor.bufferViewObject =
                    gltfJson.bufferViewDic[accessor.bufferViewName];
            }
        }
    }
    static _loadDependenciesOfBufferViews(gltfJson) {
        // BufferView
        for (const bufferViewName in gltfJson.bufferViewDic) {
            const bufferView = gltfJson.bufferViewDic[bufferViewName];
            if (bufferView.buffer !== void 0) {
                bufferView.bufferName = bufferView.buffer;
                bufferView.bufferObject = gltfJson.bufferDic[bufferView.bufferName];
                let bufferIdx = 0;
                for (const bufferName in gltfJson.bufferDic) {
                    if (bufferName === bufferView.bufferName) {
                        bufferView.buffer = bufferIdx;
                    }
                    bufferIdx++;
                }
            }
        }
    }
    static _mergeExtendedJson(gltfJson, extendedData) {
        let extendedJson = null;
        if (extendedData instanceof ArrayBuffer) {
            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(extendedData);
            extendedJson = JSON.parse(extendedJsonStr);
        }
        else if (typeof extendedData === 'string') {
            extendedJson = JSON.parse(extendedData);
        }
        else if (typeof extendedData === 'object') {
            extendedJson = extendedData;
        }
        Object.assign(gltfJson, extendedJson);
    }
    static _loadResources(uint8Array, gltfJson, files, options, basePath) {
        var _a;
        const promisesToLoadResources = [];
        // Buffers Async load
        for (const i in gltfJson.buffers) {
            const bufferInfo = gltfJson.buffers[i];
            let filename = '';
            if (bufferInfo.uri) {
                const splitUri = bufferInfo.uri.split('/');
                filename = splitUri[splitUri.length - 1];
            }
            if (typeof bufferInfo.uri === 'undefined') {
                promisesToLoadResources.push(new Promise(resolve => {
                    bufferInfo.buffer = uint8Array;
                    resolve(gltfJson);
                }));
            }
            else if (bufferInfo.uri === '' || bufferInfo.uri === 'data:,') {
                promisesToLoadResources.push(new Promise(resolve => {
                    bufferInfo.buffer = uint8Array;
                    resolve(gltfJson);
                }));
            }
            else if (bufferInfo.uri.match(/^data:application\/(.*);base64,/)) {
                promisesToLoadResources.push(new Promise(resolve => {
                    const arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.dataUriToArrayBuffer(bufferInfo.uri);
                    bufferInfo.buffer = new Uint8Array(arrayBuffer);
                    resolve(gltfJson);
                }));
            }
            else if (files && this.__containsFileName(files, filename)) {
                promisesToLoadResources.push(new Promise(resolve => {
                    const fullPath = this.__getFullPathOfFileName(files, filename);
                    const arrayBuffer = files[fullPath];
                    bufferInfo.buffer = new Uint8Array(arrayBuffer);
                    resolve(gltfJson);
                }));
            }
            else {
                // Need to async load other files
                promisesToLoadResources.push(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.loadResourceAsync(basePath + bufferInfo.uri, true, (resolve, response) => {
                    bufferInfo.buffer = new Uint8Array(response);
                    resolve(gltfJson);
                }, (reject, error) => {
                    reject('HTTP Error Status:' + error);
                }));
            }
        }
        // Textures Async load
        for (const imageJson of (_a = gltfJson.images) !== null && _a !== void 0 ? _a : []) {
            let imageUri;
            if (typeof imageJson.extensions !== 'undefined' &&
                typeof imageJson.extensions.KHR_binary_glTF !== 'undefined') {
                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.extensions.KHR_binary_glTF.bufferView, uint8Array);
                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(imageUint8Array, imageJson.extensions.KHR_binary_glTF.mimeType);
            }
            else if (typeof imageJson.uri === 'undefined') {
                const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, imageJson.bufferView, uint8Array);
                imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(imageUint8Array, imageJson.mimeType);
            }
            else {
                const imageFileStr = imageJson.uri;
                const splitUri = imageFileStr.split('/');
                const filename = splitUri[splitUri.length - 1];
                if (files && this.__containsFileName(files, filename)) {
                    const fullPath = this.__getFullPathOfFileName(files, filename);
                    const arrayBuffer = files[fullPath];
                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), imageJson.mimeType);
                }
                else if (imageFileStr.match(/^data:/)) {
                    imageUri = imageFileStr;
                }
                else {
                    imageUri = basePath + imageFileStr;
                }
            }
            promisesToLoadResources.push(this.__loadImageUri(imageUri, imageJson, files));
        }
        if (options.defaultTextures) {
            const basePath = options.defaultTextures.basePath;
            const textureInfos = options.defaultTextures.textureInfos;
            for (const textureInfo of textureInfos) {
                const fileName = textureInfo.fileName;
                const uri = basePath + fileName;
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getMimeTypeFromExtension(fileExtension);
                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(uri, mimeType).then(image => {
                    image.crossOrigin = 'Anonymous';
                    textureInfo.image = { image: image };
                });
                promisesToLoadResources.push(promise);
            }
        }
        return Promise.all(promisesToLoadResources);
    }
    static __containsFileName(optionsFiles, filename) {
        for (const key in optionsFiles) {
            const split = key.split('/');
            const last = split[split.length - 1];
            if (last === filename) {
                return true;
            }
        }
        return false;
    }
    static __getFullPathOfFileName(optionsFiles, filename) {
        for (const key in optionsFiles) {
            const split = key.split('/');
            const last = split[split.length - 1];
            if (last === filename) {
                return key;
            }
        }
        return undefined;
    }
    static __loadImageUri(imageUri, imageJson, files) {
        var _a, _b;
        let loadImagePromise;
        if (imageUri.match(/basis$/)) {
            // load basis file from uri
            loadImagePromise = new Promise(resolve => {
                fetch(imageUri, { mode: 'cors' }).then(response => {
                    response.arrayBuffer().then(buffer => {
                        const uint8Array = new Uint8Array(buffer);
                        imageJson.basis = uint8Array;
                        resolve();
                    });
                });
            });
        }
        else if ((_a = imageJson.uri) === null || _a === void 0 ? void 0 : _a.match(/basis$/)) {
            // find basis file from files option
            loadImagePromise = new Promise(resolve => {
                imageJson.basis = new Uint8Array(files[imageJson.uri]);
                resolve();
            });
        }
        else if (imageUri.match(/ktx2$/) ||
            (imageJson.bufferView != null && imageJson.mimeType === 'image/ktx2')) {
            // load ktx2 file from uri or bufferView
            loadImagePromise = new Promise(resolve => {
                fetch(imageUri, { mode: 'cors' }).then(response => {
                    response.arrayBuffer().then(buffer => {
                        const uint8Array = new Uint8Array(buffer);
                        imageJson.ktx2 = uint8Array;
                        resolve();
                    });
                });
            });
        }
        else if ((_b = imageJson.uri) === null || _b === void 0 ? void 0 : _b.match(/ktx2$/)) {
            // find ktx2 file from files option
            loadImagePromise = new Promise(resolve => {
                imageJson.ktx2 = new Uint8Array(files[imageJson.uri]);
                resolve();
            });
        }
        else {
            loadImagePromise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(imageUri, imageJson.mimeType).then(image => {
                image.crossOrigin = 'Anonymous';
                imageJson.image = image;
            });
        }
        return loadImagePromise;
    }
}


/***/ }),

/***/ "./src/foundation/importer/Gltf2Importer.ts":
/*!**************************************************!*\
  !*** ./src/foundation/importer/Gltf2Importer.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Gltf2Importer": () => (/* binding */ Gltf2Importer)
/* harmony export */ });
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/RnPromise */ "./src/foundation/misc/RnPromise.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");




/**
 * The glTF2 Importer class.
 */
class Gltf2Importer {
    constructor() { }
    /**
     * Import glTF2 file
     * @param uri - uri of glTF file
     * @param options - options for loading process
     * @returns a glTF2 based JSON pre-processed
     */
    static async import(uri, options) {
        var _a;
        if (options && options.files) {
            for (const fileName in options.files) {
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                if (fileExtension === 'gltf' || fileExtension === 'glb') {
                    return await this.importGltfOrGlbFromArrayBuffers(options.files[fileName], options.files, options, uri).catch(err => {
                        console.log('this.__loadFromArrayBuffer error', err);
                        return undefined;
                    });
                }
            }
        }
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        const glTFJson = await this.importGltfOrGlbFromArrayBuffers(arrayBuffer, (_a = options === null || options === void 0 ? void 0 : options.files) !== null && _a !== void 0 ? _a : {}, options, uri).catch(err => {
            console.log('this.__loadFromArrayBuffer error', err);
            return undefined;
        });
        return glTFJson;
    }
    static async importGltfOrGlbFromFile(uri, options) {
        const arrayBuffer = await _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.fetchArrayBuffer(uri);
        const glTFJson = await this.importGltfOrGlbFromArrayBuffers(arrayBuffer, {}, options, uri).catch(err => {
            console.log('this.__loadFromArrayBuffer error', err);
        });
        return glTFJson;
    }
    /**
     * Import glTF2 array buffer.
     * @param arrayBuffer .gltf/.glb file in ArrayBuffer
     * @param otherFiles other resource files data in ArrayBuffers
     * @param options options for loading process (Optional)
     * @param uri .gltf file's uri (Optional)
     * @returns a glTF2 based JSON pre-processed
     */
    static async importGltfOrGlbFromArrayBuffers(arrayBuffer, otherFiles, options, uri) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        // Magic field
        const magic = dataView.getUint32(0, true);
        // 0x46546C67 is 'glTF' in ASCII codes.
        if (magic !== 0x46546c67) {
            //const json = await response.json();
            const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(arrayBuffer);
            const json = JSON.parse(gotText);
            const gltfJson = await this.importGltf(json, otherFiles, options, uri).catch(err => {
                console.log('this.__loadAsTextJson error', err);
                return undefined;
            });
            return gltfJson;
        }
        else {
            const gltfJson = await this.importGlb(arrayBuffer, otherFiles, options).catch(err => {
                console.log('this.__loadAsBinaryJson error', err);
                return undefined;
            });
            return gltfJson;
        }
    }
    static _getOptions(defaultOptions, json, options) {
        var _a, _b;
        if (((_b = (_a = json.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) != null) {
            for (const optionName in json.asset.extras.rnLoaderOptions) {
                defaultOptions[optionName] = json.asset.extras
                    .rnLoaderOptions[optionName];
            }
        }
        for (const optionName in options) {
            defaultOptions[optionName] = options[optionName];
        }
        if (options &&
            options.loaderExtensionName &&
            typeof options.loaderExtensionName === 'string') {
            if (Rn[options.loaderExtensionName] != null) {
                defaultOptions.loaderExtension =
                    Rn[options.loaderExtensionName].getInstance();
            }
            else {
                console.error(`${options.loaderExtensionName} not found!`);
                defaultOptions.loaderExtension = void 0;
            }
        }
        return defaultOptions;
    }
    static async importGlb(arrayBuffer, files, options) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        const gltfVer = dataView.getUint32(4, true);
        if (gltfVer !== 2) {
            throw new Error('invalid version field in this binary glTF file.');
        }
        const lengthOfJSonChunkData = dataView.getUint32(12, true);
        const chunkType = dataView.getUint32(16, true);
        // 0x4E4F534A means JSON format (0x4E4F534A is 'JSON' in ASCII codes)
        if (chunkType !== 0x4e4f534a) {
            throw new Error('invalid chunkType of chunk0 in this binary glTF file.');
        }
        const uint8ArrayJSonContent = new Uint8Array(arrayBuffer, 20, lengthOfJSonChunkData);
        const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.uint8ArrayToString(uint8ArrayJSonContent);
        const gltfJson = JSON.parse(gotText);
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        options = this._getOptions(defaultOptions, gltfJson, options);
        const uint8array = new Uint8Array(arrayBuffer, 20 + lengthOfJSonChunkData + 8);
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '2' };
        }
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        try {
            await this._loadInner(gltfJson, files, options, uint8array);
        }
        catch (err) {
            console.log('this._loadInner error in _loadAsBinaryJson', err);
        }
        return gltfJson;
    }
    static async importGltf(gltfJson, fileArrayBuffers, options, uri, callback) {
        const basePath = (uri === null || uri === void 0 ? void 0 : uri.substring(0, uri === null || uri === void 0 ? void 0 : uri.lastIndexOf('/'))) + '/'; // location of model file as basePath
        if (gltfJson.asset.extras === undefined) {
            gltfJson.asset.extras = { fileType: 'glTF', version: '2' };
        }
        const defaultOptions = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createDefaultGltfOptions();
        options = this._getOptions(defaultOptions, gltfJson, options);
        this._mergeExtendedJson(gltfJson, options.extendedJson);
        gltfJson.asset.extras.rnLoaderOptions = options;
        try {
            await this._loadInner(gltfJson, fileArrayBuffers, options, undefined, basePath, callback);
        }
        catch (err) {
            console.log('this._loadInner error in _loadAsTextJson', err);
        }
        return gltfJson;
    }
    static _loadInner(gltfJson, files, options, uint8array, basePath, callback) {
        const promises = [];
        // Load resources to above resources object.
        promises.push(this._loadResources(uint8array, gltfJson, files, options, basePath, callback));
        // Parse glTF JSON
        promises.push(new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
            this._loadJsonContent(gltfJson);
            resolve();
        }));
        return _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise.all(promises);
    }
    static _loadJsonContent(gltfJson) {
        // Scene
        this._loadDependenciesOfScenes(gltfJson);
        // Node
        this._loadDependenciesOfNodes(gltfJson);
        // Mesh
        this._loadDependenciesOfMeshes(gltfJson);
        // Material
        this._loadDependenciesOfMaterials(gltfJson);
        // Texture
        this._loadDependenciesOfTextures(gltfJson);
        // Joint
        this._loadDependenciesOfJoints(gltfJson);
        // Animation
        this._loadDependenciesOfAnimations(gltfJson);
        // Accessor
        this._loadDependenciesOfAccessors(gltfJson);
        // BufferView
        this._loadDependenciesOfBufferViews(gltfJson);
        if (gltfJson.asset.extras === void 0) {
            gltfJson.asset.extras = {};
        }
    }
    static _loadDependenciesOfScenes(gltfJson) {
        for (const scene of gltfJson.scenes) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.undefined(scene.nodesObjects)) {
                scene.nodesObjects = [];
            }
            for (const i of scene.nodes) {
                scene.nodesObjects[i] = gltfJson.nodes[scene.nodes[i]];
            }
        }
    }
    static _loadDependenciesOfNodes(gltfJson) {
        var _a, _b;
        for (const node of gltfJson.nodes) {
            // Hierarchy
            node.childrenObjects = (_a = node.childrenObjects) !== null && _a !== void 0 ? _a : [];
            if (node.children) {
                for (const i of node.children) {
                    node.childrenObjects[i] = gltfJson.nodes[i];
                }
            }
            // Mesh
            if (node.mesh !== void 0 && gltfJson.meshes !== void 0) {
                node.meshObject = gltfJson.meshes[node.mesh];
            }
            // Skin
            if (node.skin !== void 0 && gltfJson.skins !== void 0) {
                node.skinObject = gltfJson.skins[node.skin];
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(node.skinObject)) {
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist((_b = node.meshObject) === null || _b === void 0 ? void 0 : _b.extras)) {
                        node.meshObject.extras = {};
                    }
                    node.meshObject.extras._skin = node.skin;
                }
            }
            // Camera
            if (node.camera !== void 0 && gltfJson.cameras !== void 0) {
                node.cameraObject = gltfJson.cameras[node.camera];
            }
            // Lights
            if (node.extensions !== void 0 &&
                gltfJson.extensions !== void 0 &&
                gltfJson.extensions.KHR_lights_punctual !== void 0) {
                node.extensions.KHR_lights_punctual.lightIndex =
                    node.extensions.KHR_lights_punctual.light;
                node.extensions.KHR_lights_punctual.light =
                    gltfJson.extensions.KHR_lights_punctual.lights[node.extensions.KHR_lights_punctual.lightIndex];
            }
        }
    }
    static _loadDependenciesOfMeshes(gltfJson) {
        // Mesh
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(gltfJson.meshes)) {
            return;
        }
        for (const mesh of gltfJson.meshes) {
            for (const primitive of mesh.primitives) {
                if (primitive.material !== void 0) {
                    primitive.materialObject = gltfJson.materials[primitive.material];
                }
                primitive.attributesObjects = {};
                for (const attributeName in primitive.attributes) {
                    const accessorId = primitive.attributes[attributeName];
                    const accessor = gltfJson.accessors[accessorId];
                    accessor.extras = {
                        toGetAsTypedArray: true,
                        attributeName: attributeName,
                    };
                    primitive.attributesObjects[attributeName] = accessor;
                }
                if (primitive.indices != null) {
                    primitive.indicesObject = gltfJson.accessors[primitive.indices];
                }
                if (primitive.targets != null) {
                    primitive.targetsObjects = [];
                    for (const target of primitive.targets) {
                        const attributes = {};
                        for (const attributeName in target) {
                            const targetShapeTargetAccessorId = target[attributeName];
                            if (targetShapeTargetAccessorId >= 0) {
                                const accessor = gltfJson.accessors[targetShapeTargetAccessorId];
                                accessor.extras = {
                                    toGetAsTypedArray: true,
                                    attributeName: attributeName,
                                };
                                attributes[attributeName] = accessor;
                            }
                        }
                        primitive.targetsObjects.push(attributes);
                    }
                }
            }
        }
    }
    static _checkRnGltfLoaderOptionsExist(gltfModel) {
        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {
            return true;
        }
        else {
            return false;
        }
    }
    static _loadDependenciesOfMaterials(gltfJson) {
        if (!gltfJson.textures)
            gltfJson.textures = [];
        // Material
        if (gltfJson.materials) {
            for (const material of gltfJson.materials) {
                if (material.pbrMetallicRoughness) {
                    const baseColorTexture = material.pbrMetallicRoughness.baseColorTexture;
                    if (baseColorTexture !== void 0) {
                        baseColorTexture.texture =
                            gltfJson.textures[baseColorTexture.index];
                    }
                    const metallicRoughnessTexture = material.pbrMetallicRoughness.metallicRoughnessTexture;
                    if (metallicRoughnessTexture !== void 0) {
                        metallicRoughnessTexture.texture =
                            gltfJson.textures[metallicRoughnessTexture.index];
                    }
                }
                const normalTexture = material.normalTexture;
                if (normalTexture !== void 0) {
                    normalTexture.texture = gltfJson.textures[normalTexture.index];
                }
                const occlusionTexture = material.occlusionTexture;
                if (occlusionTexture !== void 0) {
                    occlusionTexture.texture = gltfJson.textures[occlusionTexture.index];
                }
                const emissiveTexture = material.emissiveTexture;
                if (emissiveTexture !== void 0) {
                    emissiveTexture.texture = gltfJson.textures[emissiveTexture.index];
                }
                if (this._checkRnGltfLoaderOptionsExist(gltfJson) &&
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension &&
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures) {
                    gltfJson.asset.extras.rnLoaderOptions.loaderExtension.setTextures(gltfJson, material);
                }
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(material.extensions)) {
                    const extensions = material.extensions;
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(extensions.KHR_materials_clearcoat)) {
                        const clearcoatTexture = extensions.KHR_materials_clearcoat.clearcoatTexture;
                        if (clearcoatTexture !== void 0) {
                            clearcoatTexture.texture =
                                gltfJson.textures[clearcoatTexture.index];
                        }
                        const clearcoatRoughnessTexture = extensions.KHR_materials_clearcoat.clearcoatRoughnessTexture;
                        if (clearcoatRoughnessTexture !== void 0) {
                            clearcoatRoughnessTexture.texture =
                                gltfJson.textures[clearcoatRoughnessTexture.index];
                        }
                        const clearcoatNormalTexture = extensions.KHR_materials_clearcoat.clearcoatNormalTexture;
                        if (clearcoatNormalTexture !== void 0) {
                            clearcoatNormalTexture.texture =
                                gltfJson.textures[clearcoatNormalTexture.index];
                        }
                    }
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(extensions.KHR_materials_transmission)) {
                        const transmissionTexture = extensions.KHR_materials_transmission.transmissionTexture;
                        if (transmissionTexture !== void 0) {
                            transmissionTexture.texture =
                                gltfJson.textures[transmissionTexture.index];
                        }
                    }
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(extensions.KHR_materials_volume)) {
                        const thicknessTexture = extensions.KHR_materials_volume.thicknessTexture;
                        if (thicknessTexture !== void 0) {
                            thicknessTexture.texture =
                                gltfJson.textures[thicknessTexture.index];
                        }
                    }
                }
            }
        }
    }
    static _loadDependenciesOfTextures(gltfJson) {
        var _a, _b;
        // Texture
        if (gltfJson.textures) {
            for (const texture of gltfJson.textures) {
                (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_3__.ifDefinedThen)(v => (texture.samplerObject = gltfJson.samplers[v]), texture.sampler);
                if (((_b = (_a = texture.extensions) === null || _a === void 0 ? void 0 : _a.KHR_texture_basisu) === null || _b === void 0 ? void 0 : _b.source) != null) {
                    texture.extensions.KHR_texture_basisu.fallbackSourceIndex =
                        texture.source;
                    texture.source = texture.extensions.KHR_texture_basisu
                        .source;
                    texture.image = gltfJson.images[texture.source];
                }
                else if (texture.source !== void 0) {
                    texture.image = gltfJson.images[texture.source];
                }
            }
        }
    }
    static _loadDependenciesOfJoints(gltfJson) {
        if (gltfJson.skins) {
            for (const skin of gltfJson.skins) {
                skin.skeletonObject = gltfJson.nodes[skin.skeleton];
                skin.inverseBindMatricesObject =
                    gltfJson.accessors[skin.inverseBindMatrices];
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(skin.skeleton)) {
                    skin.skeleton = skin.joints[0];
                    skin.skeletonObject = gltfJson.nodes[skin.skeleton];
                }
                skin.jointsObjects = [];
                for (const jointIndex of skin.joints) {
                    skin.jointsObjects.push(gltfJson.nodes[jointIndex]);
                }
            }
        }
    }
    static _loadDependenciesOfAnimations(gltfJson) {
        if (gltfJson.animations) {
            for (const animation of gltfJson.animations) {
                for (const channel of animation.channels) {
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(channel.sampler)) {
                        channel.samplerObject = animation.samplers[channel.sampler];
                        channel.target.nodeObject = gltfJson.nodes[channel.target.node];
                        channel.samplerObject.inputObject =
                            gltfJson.accessors[channel.samplerObject.input];
                        channel.samplerObject.outputObject =
                            gltfJson.accessors[channel.samplerObject.output];
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.undefined(channel.samplerObject.outputObject.extras)) {
                            channel.samplerObject.outputObject.extras = {};
                        }
                        if (channel.target.path === 'weights') {
                            let weightsArrayLength = channel.samplerObject.outputObject.count /
                                channel.samplerObject.inputObject.count;
                            if (channel.samplerObject.interpolation === 'CUBICSPLINE') {
                                // divided by 3, because in glTF CUBICSPLINE interpolation,
                                //   tangents (ak, bk) and values (vk) are grouped
                                //       within keyframes: a1,a2,an,v1,v2,vn,b1,b2,bn
                                weightsArrayLength =
                                    channel.samplerObject.outputObject.count /
                                        channel.samplerObject.inputObject.count /
                                        3;
                            }
                            channel.samplerObject.outputObject.extras.weightsArrayLength =
                                weightsArrayLength;
                        }
                        if (channel.target.path === 'rotation') {
                            channel.samplerObject.outputObject.extras.quaternionIfVec4 =
                                true;
                        }
                    }
                }
            }
        }
    }
    static _loadDependenciesOfAccessors(gltfJson) {
        // Accessor
        for (const accessor of gltfJson.accessors) {
            if (accessor.bufferView == null) {
                accessor.bufferView = 0;
            }
            accessor.bufferViewObject = gltfJson.bufferViews[accessor.bufferView];
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(accessor.sparse)) {
                const sparse = accessor.sparse;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(sparse) &&
                    _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(sparse.indices) &&
                    _misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.exist(sparse.values)) {
                    sparse.indices.bufferViewObject =
                        gltfJson.bufferViews[sparse.indices.bufferView];
                    sparse.values.bufferViewObject =
                        gltfJson.bufferViews[sparse.values.bufferView];
                }
            }
        }
    }
    static _loadDependenciesOfBufferViews(gltfJson) {
        // BufferView
        for (const bufferView of gltfJson.bufferViews) {
            if (bufferView.buffer !== void 0) {
                bufferView.bufferObject = gltfJson.buffers[bufferView.buffer];
            }
        }
    }
    static _mergeExtendedJson(gltfJson, extendedData) {
        let extendedJson = null;
        if (extendedData instanceof ArrayBuffer) {
            const extendedJsonStr = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.arrayBufferToString(extendedData);
            extendedJson = JSON.parse(extendedJsonStr);
        }
        else if (typeof extendedData === 'string') {
            extendedJson = JSON.parse(extendedData);
        }
        else if (typeof extendedData === 'object') {
            extendedJson = extendedData;
        }
        Object.assign(gltfJson, extendedJson);
    }
    static _loadResources(uint8Array, gltfJson, files, options, basePath, callback) {
        var _a;
        const promisesToLoadResources = [];
        // Buffers Async load
        let rnpArrayBuffer;
        for (const rnm2Buffer of gltfJson.buffers) {
            let filename = '';
            if (rnm2Buffer.uri) {
                const splitUri = rnm2Buffer.uri.split('/');
                filename = splitUri[splitUri.length - 1];
            }
            if (typeof rnm2Buffer.uri === 'undefined') {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                    rnm2Buffer.buffer = uint8Array;
                    resolve(uint8Array);
                });
            }
            else if (rnm2Buffer.uri.match(/^data:application\/(.*);base64,/)) {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                    const arrayBuffer = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.dataUriToArrayBuffer(rnm2Buffer.uri);
                    rnm2Buffer.buffer = new Uint8Array(arrayBuffer);
                    resolve(arrayBuffer);
                });
            }
            else if (files && this.__containsFileName(files, filename)) {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                    const fullPath = this.__getFullPathOfFileName(files, filename);
                    const arrayBuffer = files[fullPath];
                    rnm2Buffer.buffer = new Uint8Array(arrayBuffer);
                    resolve(arrayBuffer);
                });
            }
            else {
                rnpArrayBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(_misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.loadResourceAsync(basePath + rnm2Buffer.uri, true, (resolve, response) => {
                    rnm2Buffer.buffer = new Uint8Array(response);
                    resolve(response);
                }, (reject, error) => {
                    reject('HTTP Error Status:' + error);
                }));
            }
            rnm2Buffer.bufferPromise = rnpArrayBuffer;
            promisesToLoadResources.push(rnpArrayBuffer);
        }
        // Textures Async load
        for (const rnm2Image of (_a = gltfJson.images) !== null && _a !== void 0 ? _a : []) {
            if (rnm2Image.uri == null) {
                if (uint8Array == null) {
                    // Load Texture from gltfJson.buffer
                    const rnm2BufferView = gltfJson.bufferViews[rnm2Image.bufferView];
                    const bufferInfo = rnm2BufferView.bufferObject;
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_2__.Is.not.exist(bufferInfo)) {
                        console.error('gltf2BufferView.bufferObject not found');
                        continue;
                    }
                    const bufferPromise = bufferInfo.bufferPromise;
                    const loadImageAfterLoadingBuffer = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                        bufferPromise.then((arraybuffer) => {
                            const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, rnm2Image.bufferView, arraybuffer);
                            const imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(imageUint8Array, rnm2Image.mimeType);
                            this.__loadImageUri(imageUri, rnm2Image, files).then(() => {
                                resolve(arraybuffer);
                            });
                        });
                    });
                    const bufferPromiseIndex = promisesToLoadResources.indexOf(bufferPromise);
                    promisesToLoadResources[bufferPromiseIndex] =
                        loadImageAfterLoadingBuffer;
                    bufferInfo.bufferPromise = loadImageAfterLoadingBuffer;
                }
                else {
                    const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, rnm2Image.bufferView, uint8Array);
                    const imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(imageUint8Array, rnm2Image.mimeType);
                    promisesToLoadResources.push(this.__loadImageUri(imageUri, rnm2Image, files));
                }
            }
            else {
                // Load Texture from URI
                const imageFileStr = rnm2Image.uri;
                const splitUri = imageFileStr.split('/');
                const filename = splitUri[splitUri.length - 1];
                let imageUri;
                if (files && this.__containsFileName(files, filename)) {
                    const fullPath = this.__getFullPathOfFileName(files, filename);
                    const arrayBuffer = files[fullPath];
                    imageUri = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createBlobImageUriFromUint8Array(new Uint8Array(arrayBuffer), rnm2Image.mimeType);
                }
                else if (imageFileStr.match(/^data:/)) {
                    imageUri = imageFileStr;
                }
                else {
                    imageUri = basePath + imageFileStr;
                }
                promisesToLoadResources.push(this.__loadImageUri(imageUri, rnm2Image, files));
            }
        }
        if (options.defaultTextures) {
            const basePath = options.defaultTextures.basePath;
            const textureInfos = options.defaultTextures.textureInfos;
            for (const textureInfo of textureInfos) {
                const fileName = textureInfo.fileName;
                const uri = basePath + fileName;
                const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getExtension(fileName);
                const mimeType = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.getMimeTypeFromExtension(fileExtension);
                const promise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(uri, mimeType).then(image => {
                    image.crossOrigin = 'Anonymous';
                    textureInfo.image = { image: image };
                });
                promisesToLoadResources.push(promise);
            }
        }
        return _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise.all(promisesToLoadResources, callback).catch((err) => {
            console.log('Promise.all error', err);
        });
    }
    static __containsFileName(optionsFiles, filename) {
        for (const key in optionsFiles) {
            const split = key.split('/');
            const last = split[split.length - 1];
            if (last === filename) {
                return true;
            }
        }
        return false;
    }
    static __getFullPathOfFileName(optionsFiles, filename) {
        for (const key in optionsFiles) {
            const split = key.split('/');
            const last = split[split.length - 1];
            if (last === filename) {
                return key;
            }
        }
        return undefined;
    }
    static __loadImageUri(imageUri, imageJson, files) {
        var _a, _b;
        let loadImagePromise;
        if (imageUri.match(/basis$/)) {
            // load basis file from uri
            loadImagePromise = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                fetch(imageUri, { mode: 'cors' }).then(response => {
                    response.arrayBuffer().then(buffer => {
                        const uint8Array = new Uint8Array(buffer);
                        imageJson.basis = uint8Array;
                        resolve();
                    });
                });
            });
        }
        else if ((_a = imageJson.uri) === null || _a === void 0 ? void 0 : _a.match(/basis$/)) {
            // find basis file from files option
            loadImagePromise = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                imageJson.basis = new Uint8Array(files[imageJson.uri]);
                resolve();
            });
        }
        else if (imageUri.match(/\.ktx2$/) ||
            imageUri.match(/^data:image\/ktx2/) ||
            (imageJson.bufferView != null && imageJson.mimeType === 'image/ktx2')) {
            // load ktx2 file from uri(ktx2 file or data uri) or bufferView
            loadImagePromise = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                fetch(imageUri, { mode: 'cors' }).then(response => {
                    response.arrayBuffer().then(buffer => {
                        const uint8Array = new Uint8Array(buffer);
                        imageJson.ktx2 = uint8Array;
                        resolve();
                    });
                });
            });
        }
        else if ((_b = imageJson.uri) === null || _b === void 0 ? void 0 : _b.match(/ktx2$/)) {
            // find ktx2 file from files option
            loadImagePromise = new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_1__.RnPromise(resolve => {
                imageJson.ktx2 = new Uint8Array(files[imageJson.uri]);
                resolve();
            });
        }
        else {
            loadImagePromise = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_0__.DataUtil.createImageFromUri(imageUri, imageJson.mimeType).then(image => {
                image.crossOrigin = 'Anonymous';
                imageJson.image = image;
            });
        }
        return loadImagePromise;
    }
}


/***/ }),

/***/ "./src/foundation/importer/GltfImporter.ts":
/*!*************************************************!*\
  !*** ./src/foundation/importer/GltfImporter.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GltfImporter": () => (/* binding */ GltfImporter)
/* harmony export */ });
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _FormatDetector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FormatDetector */ "./src/foundation/importer/FormatDetector.ts");
/* harmony import */ var _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Gltf2Importer */ "./src/foundation/importer/Gltf2Importer.ts");
/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModelConverter */ "./src/foundation/importer/ModelConverter.ts");
/* harmony import */ var _components_Physics_PhysicsComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Physics/PhysicsComponent */ "./src/foundation/components/Physics/PhysicsComponent.ts");
/* harmony import */ var _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../physics/SphereCollider */ "./src/foundation/physics/SphereCollider.ts");
/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../textures/Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../physics/VRMColliderGroup */ "./src/foundation/physics/VRMColliderGroup.ts");
/* harmony import */ var _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../physics/VRMSpringBoneGroup */ "./src/foundation/physics/VRMSpringBoneGroup.ts");
/* harmony import */ var _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../physics/VRMSpringBonePhysicsStrategy */ "./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts");
/* harmony import */ var _Gltf1Importer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Gltf1Importer */ "./src/foundation/importer/Gltf1Importer.ts");
/* harmony import */ var _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./DrcPointCloudImporter */ "./src/foundation/importer/DrcPointCloudImporter.ts");
/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../renderer/Expression */ "./src/foundation/renderer/Expression.ts");
/* harmony import */ var _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../renderer/RenderPass */ "./src/foundation/renderer/RenderPass.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../definitions/FileType */ "./src/foundation/definitions/FileType.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_RnPromise__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../misc/RnPromise */ "./src/foundation/misc/RnPromise.ts");



















/**
 * Importer class which can import GLTF and VRM.
 */
class GltfImporter {
    constructor() { }
    /**
     * For VRM file only
     * Generate JSON.
     */
    static async importJsonOfVRM(uri, options) {
        options = this._getOptions(options);
        const gltfModel = await _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__.Gltf2Importer["import"](uri, options);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_17__.Is.not.exist(gltfModel)) {
            return undefined;
        }
        this._readVRMHumanoidInfo(gltfModel);
        return gltfModel;
    }
    /**
     * Import GLTF or VRM file.
     * @param uris uri or array of uri of glTF file
     * @param options options for loading process where the files property is ignored
     * @returns gltf expression where:
     *            renderPasses[0]: model entities
     *            renderPasses[1]: model outlines
     */
    static async import(uris, options, callback) {
        if (!Array.isArray(uris)) {
            uris = typeof uris === 'string' ? [uris] : [];
        }
        options = this.__initOptions(options);
        const renderPasses = await this.__importMultipleModelsFromUri(uris, options, callback);
        if (options && options.cameraComponent) {
            for (const renderPass of renderPasses) {
                renderPass.cameraComponent = options.cameraComponent;
            }
        }
        const expression = this.__setRenderPassesToExpression(renderPasses, options);
        return expression;
    }
    /**
     * Import GLTF or VRM file.
     * @param uris uri or array of uri of glTF file
     * @param options options for loading process where if you use files option, key name of files must be uri of the value array buffer
     * @returns gltf expression where:
     *            renderPasses[0]: model entities
     *            renderPasses[1]: model outlines
     */
    static async importFromArrayBuffers(files, options, callback) {
        options = this.__initOptions(options);
        const renderPasses = await this.__importMultipleModelsFromArrayBuffers(files, options, callback);
        if (options && options.cameraComponent) {
            for (const renderPass of renderPasses) {
                renderPass.cameraComponent = options.cameraComponent;
            }
        }
        return this.__setRenderPassesToExpression(renderPasses, options);
    }
    static __initOptions(options) {
        if (options == null) {
            options = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__.DataUtil.createDefaultGltfOptions();
        }
        else {
            if (options.files == null) {
                options.files = {};
            }
            for (const file in options.files) {
                if (file.match(/.*\.vrm$/) == null) {
                    continue;
                }
                const fileName = file.split('.vrm')[0];
                if (fileName) {
                    const arraybuffer = options.files[file];
                    options.files[fileName + '.glb'] = arraybuffer;
                    delete options.files[file];
                }
            }
            if (Array.isArray(options.defaultMaterialHelperArgumentArray) === false) {
                options.defaultMaterialHelperArgumentArray = [{}];
            }
            else {
                // avoid needless processing
                if (options.defaultMaterialHelperArgumentArray[0].isMorphing === false) {
                    options.maxMorphTargetNumber = 0;
                }
            }
        }
        return options;
    }
    static __setRenderPassesToExpression(renderPasses, options) {
        var _a;
        const expression = (_a = options.expression) !== null && _a !== void 0 ? _a : new _renderer_Expression__WEBPACK_IMPORTED_MODULE_13__.Expression();
        if (expression.renderPasses !== renderPasses) {
            expression.clearRenderPasses();
            expression.addRenderPasses(renderPasses);
        }
        return expression;
    }
    static __importMultipleModelsFromUri(uris, options, callback) {
        var _a;
        const importPromises = [];
        const renderPasses = ((_a = options.expression) === null || _a === void 0 ? void 0 : _a.renderPasses) || [];
        if (renderPasses.length === 0) {
            renderPasses.push(new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__.RenderPass());
        }
        for (const uri of uris) {
            // import the glTF file from uri of uris array
            if (uri !== '' && options.files[uri] == null) {
                importPromises.push(this.__importToRenderPassesFromUriPromise(uri, renderPasses, options));
            }
        }
        return _misc_RnPromise__WEBPACK_IMPORTED_MODULE_18__.RnPromise.all(importPromises, callback).then(() => {
            return renderPasses;
        });
    }
    static __importMultipleModelsFromArrayBuffers(files, options, callback) {
        var _a;
        const importPromises = [];
        const renderPasses = ((_a = options.expression) === null || _a === void 0 ? void 0 : _a.renderPasses) || [];
        if (renderPasses.length === 0) {
            renderPasses.push(new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__.RenderPass());
        }
        for (const fileName in files) {
            // filename is uri
            const fileExtension = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__.DataUtil.getExtension(fileName);
            if (this.__isValidExtension(fileExtension)) {
                importPromises.push(this.__importToRenderPassesFromArrayBufferPromise(fileName, renderPasses, options, fileName, callback));
            }
        }
        return _misc_RnPromise__WEBPACK_IMPORTED_MODULE_18__.RnPromise.all(importPromises).then(() => {
            return renderPasses;
        });
    }
    static __isValidExtension(fileExtension) {
        if (fileExtension === 'gltf' ||
            fileExtension === 'glb' ||
            fileExtension === 'vrm' ||
            fileExtension === 'drc') {
            return true;
        }
        else {
            return false;
        }
    }
    static __importToRenderPassesFromUriPromise(uri, renderPasses, options) {
        return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__.DataUtil.fetchArrayBuffer(uri).then((arrayBuffer) => {
            options.files[uri] = arrayBuffer;
            return this.__importToRenderPassesFromArrayBufferPromise(uri, renderPasses, options, uri);
        });
    }
    static __isGlb(arrayBuffer) {
        const dataView = new DataView(arrayBuffer, 0, 20);
        const isLittleEndian = true;
        // Magic field
        const magic = dataView.getUint32(0, isLittleEndian);
        // The 0x46546C67 means 'glTF' string in glb files.
        if (magic === 0x46546c67) {
            return true;
        }
        else {
            return false;
        }
    }
    static __getGlbVersion(glbArrayBuffer) {
        const dataView = new DataView(glbArrayBuffer, 0, 20);
        const isLittleEndian = true;
        const glbVer = dataView.getUint32(4, isLittleEndian);
        return glbVer;
    }
    static __getGltfVersion(gltfJson) {
        var _a, _b;
        if (((_b = (_a = gltfJson.asset) === null || _a === void 0 ? void 0 : _a.version) === null || _b === void 0 ? void 0 : _b.charAt(0)) === '2') {
            return 2;
        }
        else {
            return 1;
        }
    }
    static __importToRenderPassesFromArrayBufferPromise(fileName, renderPasses, options, uri, callback) {
        const optionalFileType = options.fileType;
        const fileType = this.__getFileTypeFromFilePromise(fileName, options, optionalFileType);
        return new _misc_RnPromise__WEBPACK_IMPORTED_MODULE_18__.RnPromise((resolve, reject) => {
            const fileArrayBuffer = options.files[fileName];
            options.isImportVRM = false;
            let glTFVer = 0; // 0: not glTF, 1: glTF1, 2: glTF2
            switch (fileType) {
                case _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__.FileType.Gltf:
                    {
                        const gotText = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__.DataUtil.arrayBufferToString(fileArrayBuffer);
                        const json = JSON.parse(gotText);
                        glTFVer = this.__getGltfVersion(json);
                        let importer;
                        if (glTFVer === 1) {
                            importer = _Gltf1Importer__WEBPACK_IMPORTED_MODULE_11__.Gltf1Importer;
                        }
                        else {
                            importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__.Gltf2Importer;
                        }
                        importer
                            .importGltf(json, options.files, options, fileName, callback)
                            .then(gltfModel => {
                            const rootGroup = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(gltfModel);
                            renderPasses[0].addEntities([rootGroup]);
                            resolve();
                        });
                    }
                    break;
                case _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__.FileType.GltfBinary:
                    {
                        glTFVer = this.__getGlbVersion(fileArrayBuffer);
                        let importer;
                        if (glTFVer === 1) {
                            importer = _Gltf1Importer__WEBPACK_IMPORTED_MODULE_11__.Gltf1Importer;
                        }
                        else {
                            importer = _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__.Gltf2Importer;
                        }
                        importer
                            .importGlb(fileArrayBuffer, options.files, options)
                            .then(gltfModel => {
                            const rootGroup = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(gltfModel);
                            renderPasses[0].addEntities([rootGroup]);
                            resolve();
                        });
                    }
                    break;
                case _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__.FileType.Draco:
                    {
                        const importer = _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_12__.DrcPointCloudImporter.getInstance();
                        importer
                            .importArrayBuffer(uri, fileArrayBuffer, options)
                            .then(gltfModel => {
                            if (gltfModel == null) {
                                console.error('importArrayBuffer error is occurred');
                                reject();
                            }
                            else {
                                const rootGroup = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(gltfModel);
                                renderPasses[0].addEntities([rootGroup]);
                                resolve();
                            }
                        });
                    }
                    break;
                case _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__.FileType.VRM:
                    options.isImportVRM = true;
                    this.__importVRM(uri, fileArrayBuffer, renderPasses, options).then(() => {
                        resolve();
                    });
                    break;
                default:
                    console.error('detect invalid format');
                    reject();
            }
        });
    }
    static __getFileTypeFromFilePromise(fileName, options, optionalFileType) {
        if (optionalFileType != null) {
            return _definitions_FileType__WEBPACK_IMPORTED_MODULE_16__.FileType.fromString(optionalFileType);
        }
        else {
            const fileType = (0, _FormatDetector__WEBPACK_IMPORTED_MODULE_1__.detectFormatByArrayBuffers)({
                [fileName]: options.files[fileName],
            });
            return fileType;
        }
    }
    static __importVRM(uri, file, renderPasses, options) {
        return _Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__.Gltf2Importer.importGltfOrGlbFromArrayBuffers(file, options.files, options).then(gltfModel_ => {
            var _a, _b, _c, _d, _e;
            const gltfModel = gltfModel_;
            const defaultMaterialHelperArgumentArray = (_b = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) === null || _b === void 0 ? void 0 : _b.defaultMaterialHelperArgumentArray;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_17__.Is.exist(defaultMaterialHelperArgumentArray)) {
                defaultMaterialHelperArgumentArray[0].textures =
                    (_c = defaultMaterialHelperArgumentArray[0].textures) !== null && _c !== void 0 ? _c : this._createTextures(gltfModel);
                defaultMaterialHelperArgumentArray[0].isLighting =
                    (_d = defaultMaterialHelperArgumentArray[0].isLighting) !== null && _d !== void 0 ? _d : true;
                this._initializeMaterialProperties(gltfModel, defaultMaterialHelperArgumentArray[0].textures.length);
            }
            let rootGroup;
            const existOutline = this._existOutlineMaterial(gltfModel.extensions.VRM);
            if (existOutline) {
                renderPasses[1] = (_e = renderPasses[1]) !== null && _e !== void 0 ? _e : new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_14__.RenderPass();
                const renderPassOutline = renderPasses[1];
                renderPassOutline.toClearColorBuffer = false;
                renderPassOutline.toClearDepthBuffer = false;
                gltfModel.extensions.VRM.rnExtension = {
                    renderPassOutline: renderPassOutline,
                };
                rootGroup = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(gltfModel);
                renderPassOutline.addEntities([rootGroup]);
            }
            else {
                rootGroup = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(gltfModel);
            }
            const renderPassMain = renderPasses[0];
            renderPassMain.addEntities([rootGroup]);
            this._readSpringBone(rootGroup, gltfModel);
            this._readVRMHumanoidInfo(gltfModel, rootGroup);
        });
    }
    static _getOptions(options) {
        if (options != null) {
            for (const file in options.files) {
                const fileName = file.split('.vrm')[0];
                if (fileName) {
                    const arraybuffer = options.files[file];
                    options.files[fileName + '.glb'] = arraybuffer;
                    delete options.files[file];
                }
            }
            //set default values
            options.isImportVRM = true;
            if (options.defaultMaterialHelperArgumentArray == null) {
                options.defaultMaterialHelperArgumentArray = [{}];
            }
            if (!options.defaultMaterialHelperArgumentArray[0].isMorphing) {
                options.maxMorphTargetNumber = 0;
            }
        }
        else {
            options = {
                files: {},
                loaderExtension: undefined,
                defaultMaterialHelperName: undefined,
                defaultMaterialHelperArgumentArray: [
                    { isLighting: true, isMorphing: true, isSkinning: true },
                ],
                statesOfElements: [
                    {
                        targets: [],
                        states: {
                            enable: [],
                            functions: {},
                        },
                        isTransparent: true,
                        opacity: 1.0,
                        isTextureImageToLoadPreMultipliedAlpha: false,
                    },
                ],
                isImportVRM: true,
            };
        }
        return options;
    }
    static _readVRMHumanoidInfo(gltfModel, rootEntity) {
        const humanBones = gltfModel.extensions.VRM.humanoid.humanBones;
        const mapNameNodeId = new Map();
        // const mapNameNodeName: Map<string, string> = new Map();
        for (const bone of humanBones) {
            mapNameNodeId.set(bone.bone, bone.node);
            const boneNode = gltfModel.nodes[bone.node];
            bone.name = boneNode.name;
        }
        if (rootEntity != null) {
            rootEntity.tryToSetTag({
                tag: 'humanoid_map_name_nodeId',
                value: mapNameNodeId,
            });
        }
        // rootEntity.tryToSetTag({
        //   tag: 'humanoid_map_name_nodeName',
        //   value: mapNameNodeName
        // });
    }
    static _readSpringBone(rootEntity, gltfModel) {
        const boneGroups = [];
        for (const boneGroup of gltfModel.extensions.VRM.secondaryAnimation
            .boneGroups) {
            const vrmSpringBoneGroup = new _physics_VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_9__.VRMSpringBoneGroup();
            vrmSpringBoneGroup.tryToSetUniqueName(boneGroup.comment, true);
            vrmSpringBoneGroup.dragForce = boneGroup.dragForce;
            vrmSpringBoneGroup.stiffnessForce = boneGroup.stiffiness;
            vrmSpringBoneGroup.gravityPower = boneGroup.gravityPower;
            vrmSpringBoneGroup.gravityDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__.Vector3.fromCopyArray([
                boneGroup.gravityDir.x,
                boneGroup.gravityDir.y,
                boneGroup.gravityDir.z,
            ]);
            vrmSpringBoneGroup.colliderGroupIndices = boneGroup.colliderGroups;
            vrmSpringBoneGroup.hitRadius = boneGroup.hitRadius;
            for (const idxOfArray in boneGroup.bones) {
                const boneNodeIndex = boneGroup.bones[idxOfArray];
                const entity = gltfModel.asset.extras.rnEntities[boneNodeIndex];
                vrmSpringBoneGroup.rootBones.push(entity.getSceneGraph());
                // const boneNodeIndex = boneGroup.bones[idxOfArray];
                // const entity = gltfModel.asset.extras!.rnEntities![boneNodeIndex];
                // entityRepository.addComponentToEntity(PhysicsComponent, entity.entityUID);
            }
            boneGroups.push(vrmSpringBoneGroup);
        }
        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__.VRMSpringBonePhysicsStrategy.setBoneGroups(boneGroups);
        for (const boneGroup of boneGroups) {
            for (const sg of boneGroup.rootBones) {
                this.addPhysicsComponentRecursively(_core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository, sg);
            }
        }
        for (const colliderGroupIdx in gltfModel.extensions.VRM.secondaryAnimation
            .colliderGroups) {
            const colliderGroup = gltfModel.extensions.VRM.secondaryAnimation.colliderGroups[colliderGroupIdx];
            const vrmColliderGroup = new _physics_VRMColliderGroup__WEBPACK_IMPORTED_MODULE_8__.VRMColliderGroup();
            const colliders = [];
            for (const collider of colliderGroup.colliders) {
                const sphereCollider = new _physics_SphereCollider__WEBPACK_IMPORTED_MODULE_5__.SphereCollider();
                sphereCollider.position = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__.Vector3.fromCopyArray([
                    collider.offset.x,
                    collider.offset.y,
                    collider.offset.z,
                ]);
                sphereCollider.radius = collider.radius;
                colliders.push(sphereCollider);
            }
            vrmColliderGroup.colliders = colliders;
            const baseSg = gltfModel.asset.extras.rnEntities[colliderGroup.node].getSceneGraph();
            vrmColliderGroup.baseSceneGraph = baseSg;
            _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__.VRMSpringBonePhysicsStrategy.addColliderGroup(parseInt(colliderGroupIdx), vrmColliderGroup);
        }
    }
    static addPhysicsComponentRecursively(entityRepository, sg) {
        const entity = sg.entity;
        _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Physics_PhysicsComponent__WEBPACK_IMPORTED_MODULE_4__.PhysicsComponent, entity);
        _physics_VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_10__.VRMSpringBonePhysicsStrategy.initialize(sg);
        if (sg.children.length > 0) {
            for (const child of sg.children) {
                this.addPhysicsComponentRecursively(entityRepository, child);
            }
        }
    }
    static _createTextures(gltfModel) {
        if (!gltfModel.textures)
            gltfModel.textures = [];
        const gltfTextures = gltfModel.textures;
        const rnTextures = [];
        for (let i = 0; i < gltfTextures.length; i++) {
            const rnTexture = _ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter._createTexture(gltfTextures[i], gltfModel);
            rnTextures[i] = rnTexture;
        }
        const dummyWhiteTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_6__.Texture();
        dummyWhiteTexture.generate1x1TextureFrom();
        rnTextures.push(dummyWhiteTexture);
        const dummyBlackTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_6__.Texture();
        dummyBlackTexture.generate1x1TextureFrom('rgba(0, 0, 0, 1)');
        rnTextures.push(dummyBlackTexture);
        return rnTextures;
    }
    static _existOutlineMaterial(extensionsVRM) {
        const materialProperties = extensionsVRM.materialProperties;
        if (materialProperties != null) {
            for (const materialProperty of materialProperties) {
                if (materialProperty.floatProperties._OutlineWidthMode !== 0) {
                    return true;
                }
            }
        }
        return false;
    }
    static _initializeMaterialProperties(gltfModel, texturesLength) {
        const materialProperties = gltfModel.extensions.VRM.materialProperties;
        for (const materialProperty of materialProperties) {
            if (materialProperty.shader === 'VRM/MToon') {
                this.__initializeMToonMaterialProperties(gltfModel, texturesLength);
                break;
            }
        }
    }
    static __initializeMToonMaterialProperties(gltfModel, texturesLength) {
        const materialProperties = gltfModel.extensions.VRM.materialProperties;
        const dummyWhiteTextureNumber = texturesLength - 2;
        const dummyBlackTextureNumber = texturesLength - 1;
        for (let i = 0; i < materialProperties.length; i++) {
            const floatProperties = materialProperties[i].floatProperties;
            this.__initializeForUndefinedProperty(floatProperties, '_BlendMode', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_BumpScale', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_CullMode', 2.0);
            this.__initializeForUndefinedProperty(floatProperties, '_Cutoff', 0.5);
            this.__initializeForUndefinedProperty(floatProperties, '_DebugMode', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_DstBlend', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_IndirectLightIntensity', 0.1);
            this.__initializeForUndefinedProperty(floatProperties, '_LightColorAttenuation', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineColorMode', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineCullMode', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineLightingMix', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineScaledMaxDistance', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineWidth', 0.5);
            this.__initializeForUndefinedProperty(floatProperties, '_OutlineWidthMode', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_ReceiveShadowRate', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_RimFresnelPower', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_RimLift', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_RimLightingMix', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_ShadeShift', 0.0);
            this.__initializeForUndefinedProperty(floatProperties, '_ShadeToony', 0.9);
            this.__initializeForUndefinedProperty(floatProperties, '_ShadingGradeRate', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_SrcBlend', 1.0);
            this.__initializeForUndefinedProperty(floatProperties, '_ZWrite', 1.0);
            // this.__initializeForUndefinedProperty(floatProperties,"_UvAnimScrollX", 0.0);
            // this.__initializeForUndefinedProperty(floatProperties,"_UvAnimScrollY", 0.0);
            // this.__initializeForUndefinedProperty(floatProperties,"_UvAnimRotation", 0.0);
            const vectorProperties = materialProperties[i].vectorProperties;
            this.__initializeForUndefinedProperty(vectorProperties, '_Color', [1, 1, 1, 1]);
            this.__initializeForUndefinedProperty(vectorProperties, '_EmissionColor', [0, 0, 0]);
            this.__initializeForUndefinedProperty(vectorProperties, '_OutlineColor', [0, 0, 0, 1]);
            this.__initializeForUndefinedProperty(vectorProperties, '_ShadeColor', [0.97, 0.81, 0.86, 1]);
            this.__initializeForUndefinedProperty(vectorProperties, '_RimColor', [0, 0, 0]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_BumpMap", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_EmissionMap", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_MainTex", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_OutlineWidthTexture", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_ReceiveShadowTexture", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_ShadeTexture", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_ShadingGradeTexture", [0, 0, 1, 1]);
            // this.__initializeForUndefinedProperty(vectorProperties, "_SphereAdd", [0, 0, 1, 1]);
            // set num of texture array
            const textureProperties = materialProperties[i].textureProperties;
            this.__initializeForUndefinedProperty(textureProperties, '_BumpMap', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_EmissionMap', dummyBlackTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_MainTex', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_OutlineWidthTexture', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_ReceiveShadowTexture', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_RimTexture', dummyBlackTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_ShadeTexture', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_ShadingGradeTexture', dummyWhiteTextureNumber);
            this.__initializeForUndefinedProperty(textureProperties, '_SphereAdd', dummyBlackTextureNumber);
            // this.__initializeForUndefinedProperty(textureProperties, "_UvAnimMaskTexture", dummyWhiteTextureNumber);
        }
    }
    static __initializeForUndefinedProperty(object, propertyName, initialValue) {
        if (object[propertyName] == null)
            object[propertyName] = initialValue;
    }
}


/***/ }),

/***/ "./src/foundation/importer/ILoaderExtension.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/importer/ILoaderExtension.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/importer/ModelConverter.ts":
/*!***************************************************!*\
  !*** ./src/foundation/importer/ModelConverter.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ModelConverter": () => (/* binding */ ModelConverter)
/* harmony export */ });
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _geometry_Primitive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _memory_Buffer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../memory/Buffer */ "./src/foundation/memory/Buffer.ts");
/* harmony import */ var _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../definitions/PrimitiveMode */ "./src/foundation/definitions/PrimitiveMode.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../definitions/CameraType */ "./src/foundation/definitions/CameraType.ts");
/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../textures/Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _components_Animation_AnimationComponent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/Animation/AnimationComponent */ "./src/foundation/components/Animation/AnimationComponent.ts");
/* harmony import */ var _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../definitions/AnimationInterpolation */ "./src/foundation/definitions/AnimationInterpolation.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _components_Skeletal_SkeletalComponent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../components/Skeletal/SkeletalComponent */ "./src/foundation/components/Skeletal/SkeletalComponent.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../math/Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../definitions/ShadingModel */ "./src/foundation/definitions/ShadingModel.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _definitions_LightType__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../definitions/LightType */ "./src/foundation/definitions/LightType.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _types_glTF2__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../types/glTF2 */ "./src/types/glTF2.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _components_BlendShape_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../components/BlendShape/BlendShapeComponent */ "./src/foundation/components/BlendShape/BlendShapeComponent.ts");
/* harmony import */ var _components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../components/Light/LightComponent */ "./src/foundation/components/Light/LightComponent.ts");
/* harmony import */ var _RhodoniteImportExtension__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./RhodoniteImportExtension */ "./src/foundation/importer/RhodoniteImportExtension.ts");
/* harmony import */ var _cjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../cjs */ "./src/cjs.ts");








































/**
 * A converter class from glTF2 model to Rhodonite Native data
 */
class ModelConverter {
    constructor() { }
    static _getDefaultShader(options) {
        const defaultShader = null;
        // if (options && typeof options.defaultShaderClass !== "undefined") {
        //   if (typeof options.defaultShaderClass === "string") {
        //     defaultShader = GLBoost[options.defaultShaderClass];
        //   } else {
        //     defaultShader = options.defaultShaderClass;
        //   }
        // }
        return defaultShader;
    }
    static __generateGroupEntity(gltfModel) {
        const entity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_35__.EntityHelper.createGroupEntity();
        this.addTags(entity, gltfModel);
        return entity;
    }
    static addTags(entity, gltfModel) {
        entity.tryToSetTag({
            tag: 'SourceType',
            value: gltfModel.asset.extras.fileType,
        });
        entity.tryToSetTag({
            tag: 'SourceTypeVersion',
            value: gltfModel.asset.extras.version,
        });
    }
    static __generateMeshEntity(gltfModel) {
        const entity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_35__.EntityHelper.createMeshEntity();
        this.addTags(entity, gltfModel);
        return entity;
    }
    static __generateCameraEntity(gltfModel) {
        const entity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_35__.EntityHelper.createCameraEntity();
        this.addTags(entity, gltfModel);
        return entity;
    }
    static __generateLightEntity(gltfModel) {
        const entity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_35__.EntityHelper.createLightEntity();
        this.addTags(entity, gltfModel);
        return entity;
    }
    static convertToRhodoniteObject(gltfModel) {
        var _a;
        gltfModel.asset.extras.rnMeshesAtGltMeshIdx = [];
        const rnBuffers = this.createRnBuffer(gltfModel);
        gltfModel.asset.extras.rnMaterials = {};
        // Mesh, Camera, Group, ...
        const { rnEntities, rnEntitiesByNames } = this.__setupObjects(gltfModel, rnBuffers);
        gltfModel.asset.extras.rnEntities = rnEntities;
        // Transform
        this._setupTransform(gltfModel, rnEntities);
        // Skeleton
        this._setupSkeleton(gltfModel, rnEntities, rnBuffers);
        // Hierarchy
        this._setupHierarchy(gltfModel, rnEntities);
        // Camera
        //this._setupCamera(gltfModel, groups);
        // Animation
        this._setupAnimation(gltfModel, rnEntities);
        // Root Group
        const rootGroup = this.__generateGroupEntity(gltfModel);
        rootGroup.tryToSetUniqueName('FileRoot', true);
        rootGroup.tryToSetTag({ tag: 'ObjectType', value: 'top' });
        if (gltfModel.scenes[0].nodes) {
            for (const nodesIndex of gltfModel.scenes[0].nodes) {
                const sg = rnEntities[nodesIndex].getSceneGraph();
                rootGroup.getSceneGraph().addChild(sg);
            }
        }
        if (gltfModel.asset.extras && gltfModel.asset.extras.rnLoaderOptions) {
            const options = gltfModel.asset.extras.rnLoaderOptions;
            if (options &&
                options.loaderExtension &&
                ((_a = options === null || options === void 0 ? void 0 : options.loaderExtension) === null || _a === void 0 ? void 0 : _a.loadExtensionInfoAndSetToRootGroup)) {
                options.loaderExtension.loadExtensionInfoAndSetToRootGroup(rootGroup, gltfModel);
            }
            if (options &&
                options.expression) {
                options.expression.tryToSetTag({
                    tag: 'gltfModel',
                    value: gltfModel,
                });
            }
        }
        // rootGroup.allMeshes = rootGroup.searchElementsByType(M_Mesh);
        rootGroup.tryToSetTag({ tag: 'rnEntities', value: rnEntities });
        rootGroup.tryToSetTag({ tag: 'rnEntitiesByNames', value: rnEntitiesByNames });
        rootGroup.tryToSetTag({ tag: 'gltfModel', value: gltfModel });
        // Effekseer
        _RhodoniteImportExtension__WEBPACK_IMPORTED_MODULE_38__.RhodoniteImportExtension.importEffect(gltfModel, rootGroup);
        return rootGroup;
    }
    static _setupCamera(gltfModel) { }
    static createRnBuffer(gltfModel) {
        const rnBuffers = [];
        for (const buffer of gltfModel.buffers) {
            const rnBuffer = new _memory_Buffer__WEBPACK_IMPORTED_MODULE_6__.Buffer({
                byteLength: buffer.byteLength,
                buffer: buffer.buffer,
                name: `gltf2Buffer_0_(${buffer.uri})`,
                byteAlign: 4,
            });
            rnBuffers.push(rnBuffer);
        }
        return rnBuffers;
    }
    static _setupTransform(gltfModel, groups) {
        for (const node_i in gltfModel.nodes) {
            const group = groups[node_i];
            const nodeJson = gltfModel.nodes[node_i];
            const groupTransform = group.getTransform();
            if (nodeJson.translation) {
                groupTransform.translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([
                    nodeJson.translation[0],
                    nodeJson.translation[1],
                    nodeJson.translation[2],
                ]);
            }
            if (nodeJson.scale) {
                groupTransform.scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([
                    nodeJson.scale[0],
                    nodeJson.scale[1],
                    nodeJson.scale[2],
                ]);
            }
            if (nodeJson.rotation) {
                groupTransform.quaternion = _math_Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.fromCopy4(nodeJson.rotation[0], nodeJson.rotation[1], nodeJson.rotation[2], nodeJson.rotation[3]);
            }
            if (nodeJson.matrix) {
                groupTransform.matrix = _math_Matrix44__WEBPACK_IMPORTED_MODULE_4__.Matrix44.fromCopyArrayColumnMajor(nodeJson.matrix);
            }
        }
    }
    static _setupHierarchy(gltfModel, rnEntities) {
        const groupSceneComponents = rnEntities.map(group => {
            return group.getSceneGraph();
        });
        for (const node_i in gltfModel.nodes) {
            const parentNode_i = parseInt(node_i);
            const glTF2ParentNode = gltfModel.nodes[parentNode_i];
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(glTF2ParentNode.children)) {
                const rnParentSceneGraphComponent = groupSceneComponents[parentNode_i];
                for (const childNode_i of glTF2ParentNode.children) {
                    const rnChildSceneGraphComponent = groupSceneComponents[childNode_i];
                    rnParentSceneGraphComponent.addChild(rnChildSceneGraphComponent);
                }
            }
        }
    }
    /**
     * @private
     */
    static _setupAnimation(gltfModel, rnEntities) {
        var _a;
        if (gltfModel.animations) {
            for (const animation of gltfModel.animations) {
                for (const sampler of animation.samplers) {
                    this._readBinaryFromAccessorAndSetItToAccessorExtras(sampler.inputObject);
                    this._readBinaryFromAccessorAndSetItToAccessorExtras(sampler.outputObject);
                }
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(gltfModel.animations) && gltfModel.animations.length > 0) {
            for (const animation of gltfModel.animations) {
                for (const channel of animation.channels) {
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(channel.samplerObject)) {
                        const animInputArray = channel.samplerObject.inputObject.extras.typedDataArray;
                        const animOutputArray = channel.samplerObject.outputObject.extras.typedDataArray;
                        const interpolation = (_a = channel.samplerObject.interpolation) !== null && _a !== void 0 ? _a : 'LINEAR';
                        let animationAttributeType = 'undefined';
                        if (channel.target.path === 'translation') {
                            animationAttributeType = 'translate';
                        }
                        else if (channel.target.path === 'rotation') {
                            animationAttributeType = 'quaternion';
                        }
                        else {
                            animationAttributeType = channel.target
                                .path;
                        }
                        const rnEntity = rnEntities[channel.target.node];
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(rnEntity)) {
                            let animationComponent = rnEntity.tryToGetAnimation();
                            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.not.exist(animationComponent)) {
                                const newRnEntity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Animation_AnimationComponent__WEBPACK_IMPORTED_MODULE_14__.AnimationComponent, rnEntity);
                                animationComponent = newRnEntity.getAnimation();
                            }
                            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(animationComponent)) {
                                const outputComponentN = channel.samplerObject.outputObject.extras.componentN;
                                animationComponent.setAnimation(_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(animation.name)
                                    ? animation.name
                                    : 'Untitled_Animation', animationAttributeType, animInputArray, animOutputArray, outputComponentN, _definitions_AnimationInterpolation__WEBPACK_IMPORTED_MODULE_15__.AnimationInterpolation.fromString(interpolation));
                            }
                        }
                    }
                }
            }
        }
    }
    static _setupSkeleton(gltfModel, rnEntities, rnBuffers) {
        if (gltfModel.skins == null) {
            return;
        }
        for (const node_i in gltfModel.nodes) {
            const node = gltfModel.nodes[node_i];
            const sg = rnEntities[node_i].getSceneGraph();
            let skeletalComponent;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(node.skinObject)) {
                const rnEntity = rnEntities[node_i];
                const newRnEntity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_Skeletal_SkeletalComponent__WEBPACK_IMPORTED_MODULE_17__.SkeletalComponent, rnEntity);
                skeletalComponent = newRnEntity.getSkeletal();
                skeletalComponent._jointIndices = node.skinObject.joints;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(node.skinObject.bindShapeMatrix)) {
                    skeletalComponent._bindShapeMatrix =
                        _math_Matrix44__WEBPACK_IMPORTED_MODULE_4__.Matrix44.fromCopyArrayColumnMajor(node.skinObject.bindShapeMatrix);
                }
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(node.skinObject.skeleton)) {
                    sg.isRootJoint = true;
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(node.mesh)) {
                        const joints = [];
                        for (const i of node.skinObject.joints) {
                            joints.push(rnEntities[i].getSceneGraph());
                        }
                        skeletalComponent.setJoints(joints);
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(node.skinObject.skeleton)) {
                            skeletalComponent.topOfJointsHierarchy =
                                rnEntities[node.skinObject.skeleton].getSceneGraph();
                        }
                        else {
                            skeletalComponent.topOfJointsHierarchy = joints[0];
                        }
                    }
                }
                for (const joint_i of node.skinObject.joints) {
                    const sg = rnEntities[joint_i].getSceneGraph();
                    sg.jointIndex = joint_i;
                }
                const inverseBindMatAccessor = node.skinObject.inverseBindMatricesObject;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(inverseBindMatAccessor)) {
                    const rnBufferOfInverseBindMatAccessor = this.__getRnBufferViewAndRnAccessor(inverseBindMatAccessor, rnBuffers[inverseBindMatAccessor.bufferViewObject.buffer]);
                    skeletalComponent.setInverseBindMatricesAccessor(rnBufferOfInverseBindMatAccessor);
                }
            }
        }
    }
    static __setupObjects(gltfModel, rnBuffers) {
        var _a, _b, _c, _d, _e;
        const rnEntities = [];
        const rnEntitiesByNames = new Map();
        for (const node_i in gltfModel.nodes) {
            const node = gltfModel.nodes[parseInt(node_i)];
            let entity;
            if (node.mesh != null) {
                const meshIdx = node.mesh;
                const meshEntity = this.__setupMesh(node, node.meshObject, meshIdx, rnBuffers, gltfModel);
                if (node.name) {
                    meshEntity.tryToSetUniqueName(node.name, true);
                }
                if ((_a = node.meshObject) === null || _a === void 0 ? void 0 : _a.name) {
                    const meshComponent = meshEntity.getComponent(_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_1__.MeshComponent);
                    meshComponent.tryToSetUniqueName(node.meshObject.name, true);
                }
                entity = meshEntity;
            }
            else if (node.cameraObject != null) {
                const cameraEntity = this.__setupCamera(node.cameraObject, gltfModel);
                if (node.name) {
                    cameraEntity.tryToSetUniqueName(node.name, true);
                }
                entity = cameraEntity;
            }
            else if ((_b = node.extensions) === null || _b === void 0 ? void 0 : _b.KHR_lights_punctual) {
                const lightEntity = this.__setupLight(node.extensions.KHR_lights_punctual.light, gltfModel);
                entity = lightEntity;
            }
            else {
                const group = this.__generateGroupEntity(gltfModel);
                if (node.name) {
                    group.tryToSetUniqueName(node.name, true);
                }
                entity = group;
            }
            if (this.__isMorphing(node, gltfModel)) {
                let weights = [];
                if (node.weights) {
                    weights = node.weights;
                }
                else if ((_c = node.meshObject) === null || _c === void 0 ? void 0 : _c.weights) {
                    weights = node.meshObject.weights;
                }
                entity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_0__.EntityRepository.addComponentToEntity(_components_BlendShape_BlendShapeComponent__WEBPACK_IMPORTED_MODULE_36__.BlendShapeComponent, entity);
                const blendShapeComponent = entity.getBlendShape();
                blendShapeComponent.weights = weights;
                if ((_e = (_d = node.meshObject) === null || _d === void 0 ? void 0 : _d.primitives[0].extras) === null || _e === void 0 ? void 0 : _e.targetNames) {
                    blendShapeComponent.targetNames =
                        node.meshObject.primitives[0].extras.targetNames;
                }
            }
            entity.tryToSetTag({ tag: _types_glTF2__WEBPACK_IMPORTED_MODULE_34__.TagGltf2NodeIndex, value: node_i });
            rnEntities.push(entity);
            rnEntitiesByNames.set(node.name, entity);
        }
        return { rnEntities, rnEntitiesByNames };
    }
    static __isMorphing(node, gltfModel) {
        var _a, _b, _c;
        const argument = (_b = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) === null || _b === void 0 ? void 0 : _b.defaultMaterialHelperArgumentArray[0];
        if ((argument === null || argument === void 0 ? void 0 : argument.isMorphing) === false) {
            return false;
        }
        else {
            return ((_c = node.meshObject) === null || _c === void 0 ? void 0 : _c.primitives[0].targets) != null;
        }
    }
    static __setupLight(light, gltfModel) {
        const lightEntity = this.__generateLightEntity(gltfModel);
        const lightComponent = lightEntity.getComponent(_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_37__.LightComponent);
        if (light.name != null) {
            lightComponent.tryToSetUniqueName(light.name, true);
            lightComponent.type = _definitions_LightType__WEBPACK_IMPORTED_MODULE_25__.LightType.fromString(light.type);
            let color = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray3([1, 1, 1]);
            let intensity = 1;
            if (light.color != null) {
                color = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray3(light.color);
            }
            if (light.intensity != null) {
                intensity = light.intensity;
            }
            lightComponent.intensity = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.multiply(color, intensity);
            if (light.range != null) {
                lightComponent.range = light.range;
            }
        }
        return lightEntity;
    }
    static __setupCamera(camera, gltfModel) {
        const cameraEntity = this.__generateCameraEntity(gltfModel);
        const cameraComponent = cameraEntity.getCamera();
        cameraComponent.direction = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([0, 0, -1]);
        if (gltfModel.asset &&
            gltfModel.asset.LastSaved_ApplicationVendor) {
            // For an old exporter compatibility
            cameraComponent.direction = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([1, 0, 0]);
            cameraComponent.directionInner = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([1, 0, 0]);
        }
        cameraComponent.up = _math_Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([0, 1, 0]);
        cameraComponent.type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_11__.CameraType.fromString(camera.type);
        if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_11__.CameraType.Perspective) {
            cameraComponent.aspect = camera.perspective.aspectRatio
                ? camera.perspective.aspectRatio
                : 1;
            cameraComponent.setFovyAndChangeFocalLength(_math_MathUtil__WEBPACK_IMPORTED_MODULE_16__.MathUtil.radianToDegree(camera.perspective.yfov));
            cameraComponent.zNear = camera.perspective.znear;
            cameraComponent.zFar = camera.perspective.zfar
                ? camera.perspective.zfar
                : 100000;
        }
        else if (cameraComponent.type === _definitions_CameraType__WEBPACK_IMPORTED_MODULE_11__.CameraType.Orthographic) {
            cameraComponent.xMag = camera.orthographic.xmag;
            cameraComponent.yMag = camera.orthographic.ymag;
            cameraComponent.zNear = camera.orthographic.znear;
            cameraComponent.zFar = camera.orthographic.zfar;
        }
        cameraComponent.tryToSetTag({
            tag: 'OriginalAspect',
            value: cameraComponent.aspect,
        });
        return cameraEntity;
    }
    static __setupMesh(node, mesh, meshIndex, rnBuffers, gltfModel) {
        var _a;
        const meshEntity = this.__generateMeshEntity(gltfModel);
        const existingRnMesh = gltfModel.asset.extras.rnMeshesAtGltMeshIdx[meshIndex];
        let rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__.PrimitiveMode.Triangles;
        const meshComponent = meshEntity.getMesh();
        const rnMesh = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_23__.Mesh();
        // set flag to rnMesh with options
        const rnLoaderOptions = gltfModel.asset.extras.rnLoaderOptions;
        if ((rnLoaderOptions === null || rnLoaderOptions === void 0 ? void 0 : rnLoaderOptions.tangentCalculationMode) != null) {
            rnMesh.tangentCalculationMode = rnLoaderOptions.tangentCalculationMode;
        }
        let originalRnMesh = rnMesh;
        if (existingRnMesh != null) {
            rnMesh.setOriginalMesh(existingRnMesh);
            originalRnMesh = existingRnMesh;
        }
        else {
            for (const i in mesh.primitives) {
                const primitive = mesh.primitives[i];
                if (primitive.mode != null) {
                    rnPrimitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__.PrimitiveMode.from(primitive.mode);
                }
                const rnPrimitive = new _geometry_Primitive__WEBPACK_IMPORTED_MODULE_5__.Primitive();
                const material = this.__setupMaterial(rnPrimitive, node, gltfModel, primitive, primitive.materialObject);
                if (material.isEmptyMaterial() === false) {
                    ModelConverter.setDefaultTextures(material, gltfModel);
                }
                // indices
                let indicesRnAccessor;
                const map = new Map();
                if ((_a = primitive.extensions) === null || _a === void 0 ? void 0 : _a.KHR_draco_mesh_compression) {
                    indicesRnAccessor = this.__decodeDraco(primitive, rnBuffers, gltfModel, map);
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.not.exist(indicesRnAccessor)) {
                        break;
                    }
                }
                else {
                    // attributes
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(primitive.indices)) {
                        indicesRnAccessor = this.__getRnBufferViewAndRnAccessor(primitive.indicesObject, rnBuffers[primitive.indicesObject.bufferViewObject.buffer]);
                    }
                    const rnBufferViewMap = new Map();
                    for (const attributeName in primitive.attributesObjects) {
                        const rnm2attribute = primitive.attributesObjects[attributeName];
                        const rnBuffer = rnBuffers[rnm2attribute.bufferViewObject.buffer];
                        let rnBufferView;
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(rnm2attribute.bufferView)) {
                            rnBufferView = rnBufferViewMap.get(rnm2attribute.bufferView);
                            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.not.exist(rnBufferView)) {
                                rnBufferView = this.__getRnBufferView(rnm2attribute.bufferViewObject, rnBuffer);
                                rnBufferViewMap.set(rnm2attribute.bufferView, rnBufferView);
                            }
                        }
                        else {
                            rnBufferView = rnBuffer
                                .takeBufferView({
                                byteLengthToNeed: 0,
                                byteStride: 0,
                            })
                                .unwrapForce();
                        }
                        const attributeRnAccessor = this.__getRnAccessor(rnm2attribute, rnBufferView).unwrapForce();
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(rnm2attribute.sparse)) {
                            this.setSparseAccessor(rnm2attribute, attributeRnAccessor);
                        }
                        const joinedString = _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.toVertexAttributeSemanticJoinedStringAsGltfStyle(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.fromString(rnm2attribute.extras.attributeName));
                        map.set(joinedString, attributeRnAccessor);
                    }
                }
                rnPrimitive.setData(map, rnPrimitiveMode, material, indicesRnAccessor);
                // morph targets
                if (primitive.targets != null) {
                    // set default number
                    let maxMorphTargetNumber = _core_Config__WEBPACK_IMPORTED_MODULE_26__.Config.maxMorphTargetNumber;
                    if ((rnLoaderOptions === null || rnLoaderOptions === void 0 ? void 0 : rnLoaderOptions.maxMorphTargetNumber) != null) {
                        maxMorphTargetNumber = rnLoaderOptions.maxMorphTargetNumber;
                    }
                    const targets = [];
                    for (let i = 0; i < primitive.targetsObjects.length; i++) {
                        if (i >= maxMorphTargetNumber) {
                            break;
                        }
                        const target = primitive.targetsObjects[i];
                        const targetMap = new Map();
                        for (const attributeName in target) {
                            const attributeAccessor = target[attributeName];
                            const attributeRnAccessor = this.__getRnBufferViewAndRnAccessor(attributeAccessor, rnBuffers[attributeAccessor.bufferViewObject.buffer]);
                            const attributeRnAccessorInGPUVertexData = this.__copyRnAccessorAndBufferView(attributeRnAccessor);
                            const vertexAttribute = _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.fromString(attributeName);
                            const joinedString = _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.toVertexAttributeSemanticJoinedStringAsGltfStyle(vertexAttribute);
                            targetMap.set(joinedString, attributeRnAccessorInGPUVertexData);
                        }
                        targets.push(targetMap);
                    }
                    rnPrimitive.setBlendShapeTargets(targets);
                }
                rnMesh.addPrimitive(rnPrimitive);
            }
            if (mesh.weights) {
                rnMesh.weights = mesh.weights;
            }
        }
        meshComponent.setMesh(rnMesh);
        gltfModel.asset.extras.rnMeshesAtGltMeshIdx[meshIndex] =
            originalRnMesh;
        return meshEntity;
    }
    static setSparseAccessor(accessor, rnAccessor) {
        var _a, _b, _c, _d;
        const uint8Array = accessor.bufferViewObject.bufferObject.buffer;
        const count = accessor.sparse.count;
        // indices
        const accessorIndices = accessor.sparse.indices;
        const bufferViewIndices = accessorIndices.bufferViewObject;
        const byteOffsetIndices = ((_a = bufferViewIndices.byteOffset) !== null && _a !== void 0 ? _a : 0) + ((_b = accessorIndices.byteOffset) !== null && _b !== void 0 ? _b : 0);
        const componentBytesIndices = this._checkBytesPerComponent(accessorIndices);
        const byteLengthIndices = componentBytesIndices * count; // index is scalar
        const dataViewIndices = new DataView(uint8Array.buffer, byteOffsetIndices + uint8Array.byteOffset, byteLengthIndices);
        const dataViewMethodIndices = this._checkDataViewMethod(accessorIndices);
        // sparse values
        const accessorValues = accessor.sparse.values;
        const bufferViewValues = accessorValues.bufferViewObject;
        const byteOffsetValues = ((_c = bufferViewValues.byteOffset) !== null && _c !== void 0 ? _c : 0) + ((_d = accessorValues.byteOffset) !== null && _d !== void 0 ? _d : 0);
        const componentBytesValues = this._checkBytesPerComponent(accessor);
        const componentNValues = this._checkComponentNumber(accessor);
        const byteLengthValues = componentBytesValues * componentNValues * count;
        const dataViewValues = new DataView(uint8Array.buffer, byteOffsetValues + uint8Array.byteOffset, byteLengthValues);
        const dataViewMethodValues = this._checkDataViewMethod(accessor);
        // set sparse values
        const typedArray = rnAccessor.getTypedArray();
        const littleEndian = true;
        for (let i = 0; i < count; i++) {
            const index = dataViewIndices[dataViewMethodIndices](componentBytesIndices * i, littleEndian);
            for (let j = 0; j < componentNValues; j++) {
                const value = dataViewValues[dataViewMethodValues](componentBytesValues * componentNValues * i +
                    componentBytesValues * j, littleEndian);
                typedArray[index * componentNValues + j] = value;
            }
        }
    }
    static setDefaultTextures(material, gltfModel) {
        var _a, _b, _c, _d, _e, _f, _g;
        if (((_b = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) === null || _b === void 0 ? void 0 : _b.defaultTextures) == null) {
            return;
        }
        const options = gltfModel.asset.extras.rnLoaderOptions;
        const defaultTextures = gltfModel.asset.extras.rnLoaderOptions.defaultTextures;
        const basePath = defaultTextures.basePath;
        const textureInfos = defaultTextures.textureInfos;
        for (const textureInfo of textureInfos) {
            const rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_12__.Texture();
            //options
            if (textureInfo.shaderSemantics === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorTexture ||
                textureInfo.shaderSemantics === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.DiffuseColorTexture) {
                rnTexture.autoDetectTransparency =
                    options.autoDetectTextureTransparency === true;
            }
            rnTexture.autoResize = options.autoResizeTexture === true;
            const textureOption = {
                magFilter: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_c = textureInfo.sampler) === null || _c === void 0 ? void 0 : _c.magFilter)
                    ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(textureInfo.sampler.magFilter)
                    : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Linear,
                minFilter: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_d = textureInfo.sampler) === null || _d === void 0 ? void 0 : _d.minFilter)
                    ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(textureInfo.sampler.minFilter)
                    : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Linear,
                wrapS: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_e = textureInfo.sampler) === null || _e === void 0 ? void 0 : _e.wrapS)
                    ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(textureInfo.sampler.wrapS)
                    : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Repeat,
                wrapT: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_f = textureInfo.sampler) === null || _f === void 0 ? void 0 : _f.wrapT)
                    ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(textureInfo.sampler.wrapT)
                    : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Repeat,
            };
            const fileName = textureInfo.fileName;
            const uri = basePath + fileName;
            rnTexture.name = uri;
            const image = textureInfo.image;
            if ((image === null || image === void 0 ? void 0 : image.image) != null) {
                const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_31__.CGAPIResourceRepository.getWebGLResourceRepository();
                const isWebGL1 = !((_g = webglResourceRepository.currentWebGLContextWrapper) === null || _g === void 0 ? void 0 : _g.isWebGL2);
                if (isWebGL1 &&
                    !this.__sizeIsPowerOfTwo(image.image) &&
                    this.__needResizeToPowerOfTwoOnWebGl1(textureOption)) {
                    rnTexture.autoResize = true;
                }
                rnTexture.generateTextureFromImage(image.image, textureOption);
            }
            else if ((image === null || image === void 0 ? void 0 : image.basis) != null) {
                rnTexture.generateTextureFromBasis(image.basis, textureOption);
            }
            else if ((image === null || image === void 0 ? void 0 : image.ktx2) != null) {
                rnTexture.generateTextureFromKTX2(image.ktx2, textureOption);
            }
            else {
                console.warn('default image not found');
                continue;
            }
            const shaderSemantics = textureInfo.shaderSemantics;
            material.setTextureParameter(shaderSemantics, rnTexture);
        }
    }
    static __setVRMMaterial(rnPrimitive, node, gltfModel, primitive, materialJson, rnLoaderOptions) {
        const VRMProperties = gltfModel.extensions.VRM;
        const materialProperties = gltfModel.extensions.VRM.materialProperties[primitive.material];
        const shaderName = materialProperties.shader;
        if (shaderName === 'VRM/MToon') {
            // argument
            const defaultMaterialHelperArgument = rnLoaderOptions.defaultMaterialHelperArgumentArray[0];
            const additionalName = defaultMaterialHelperArgument.additionalName;
            const isMorphing = this.__isMorphing(node, gltfModel);
            const isSkinning = this.__isSkinning(node, gltfModel);
            const isLighting = this.__isLighting(gltfModel, materialJson);
            const useTangentAttribute = this.__useTangentAttribute(gltfModel, primitive);
            const textures = defaultMaterialHelperArgument.textures;
            const debugMode = defaultMaterialHelperArgument.debugMode;
            const maxInstancesNumber = defaultMaterialHelperArgument.maxInstancesNumber;
            const makeOutputSrgb = this.__makeOutputSrgb(gltfModel);
            // outline
            let renderPassOutline;
            const rnExtension = VRMProperties.rnExtension;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(rnExtension)) {
                renderPassOutline = rnExtension.renderPassOutline;
                renderPassOutline.isVrRendering = true;
            }
            //exist outline
            if (renderPassOutline != null) {
                let outlineMaterial;
                if (materialProperties.floatProperties._OutlineWidthMode !== 0) {
                    outlineMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createMToonMaterial({
                        additionalName,
                        isMorphing,
                        isSkinning,
                        isLighting,
                        useTangentAttribute,
                        isOutline: true,
                        materialProperties,
                        textures,
                        debugMode,
                        maxInstancesNumber,
                        makeOutputSrgb,
                    });
                }
                else {
                    outlineMaterial = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createEmptyMaterial();
                }
                renderPassOutline.setMaterialForPrimitive(outlineMaterial, rnPrimitive);
            }
            const material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createMToonMaterial({
                additionalName,
                isMorphing,
                isSkinning,
                isLighting,
                useTangentAttribute,
                isOutline: false,
                materialProperties,
                textures,
                debugMode,
                maxInstancesNumber,
                makeOutputSrgb,
            });
            return material;
        }
        else if (rnLoaderOptions.defaultMaterialHelperArgumentArray[0].isOutline) {
            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createEmptyMaterial();
        }
        // use another material
        return undefined;
    }
    static __generateAppropriateMaterial(rnPrimitive, node, gltfModel, primitive, materialJson) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
        if (((_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) != null) {
            const rnLoaderOptions = gltfModel.asset.extras.rnLoaderOptions;
            if (((_b = rnLoaderOptions === null || rnLoaderOptions === void 0 ? void 0 : rnLoaderOptions.loaderExtension) === null || _b === void 0 ? void 0 : _b.isNeededToUseThisMaterial) != null &&
                rnLoaderOptions.loaderExtension.isNeededToUseThisMaterial(gltfModel)) {
                const loaderExtension = (_d = (_c = gltfModel.asset.extras) === null || _c === void 0 ? void 0 : _c.rnLoaderOptions) === null || _d === void 0 ? void 0 : _d.loaderExtension;
                if ((loaderExtension === null || loaderExtension === void 0 ? void 0 : loaderExtension.generateMaterial) != null) {
                    return loaderExtension.generateMaterial(materialJson);
                }
            }
            if (rnLoaderOptions.isImportVRM) {
                const material = this.__setVRMMaterial(rnPrimitive, node, gltfModel, primitive, materialJson, rnLoaderOptions);
                if (material != null)
                    return material;
            }
            const materialHelperName = rnLoaderOptions.defaultMaterialHelperName;
            if (materialHelperName != null) {
                return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper[materialHelperName](...rnLoaderOptions.defaultMaterialHelperArgumentArray);
            }
        }
        let maxMaterialInstanceNumber = _core_Config__WEBPACK_IMPORTED_MODULE_26__.Config.maxMaterialInstanceForEachType;
        if (gltfModel.meshes.length > _core_Config__WEBPACK_IMPORTED_MODULE_26__.Config.maxMaterialInstanceForEachType) {
            maxMaterialInstanceNumber =
                gltfModel.meshes.length +
                    Math.floor(_core_Config__WEBPACK_IMPORTED_MODULE_26__.Config.maxMaterialInstanceForEachType / 2);
        }
        const isMorphing = this.__isMorphing(node, gltfModel);
        const isSkinning = this.__isSkinning(node, gltfModel);
        const isLighting = this.__isLighting(gltfModel, materialJson);
        let alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__.AlphaMode.fromGlTFString((materialJson === null || materialJson === void 0 ? void 0 : materialJson.alphaMode) || 'OPAQUE');
        alphaMode = _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_e = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _e === void 0 ? void 0 : _e.KHR_materials_transmission)
            ? _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__.AlphaMode.Translucent
            : alphaMode;
        const additionalName = node.skin != null ? `skin${(_g = (_f = node.skin) !== null && _f !== void 0 ? _f : node.skinName) !== null && _g !== void 0 ? _g : ''}` : void 0;
        if (parseFloat((_h = gltfModel.asset) === null || _h === void 0 ? void 0 : _h.version) >= 2) {
            const useTangentAttribute = this.__useTangentAttribute(gltfModel, primitive);
            const useNormalTexture = this.__useNormalTexture(gltfModel);
            const makeOutputSrgb = this.__makeOutputSrgb(gltfModel);
            const material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createPbrUberMaterial({
                isMorphing,
                isSkinning,
                isLighting,
                isClearCoat: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_j = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _j === void 0 ? void 0 : _j.KHR_materials_clearcoat),
                isTransmission: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_k = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _k === void 0 ? void 0 : _k.KHR_materials_transmission),
                isVolume: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_l = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _l === void 0 ? void 0 : _l.KHR_materials_volume),
                alphaMode,
                useTangentAttribute,
                useNormalTexture,
                additionalName: additionalName,
                maxInstancesNumber: maxMaterialInstanceNumber,
            });
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(makeOutputSrgb)) {
                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MakeOutputSrgb, makeOutputSrgb);
            }
            return material;
        }
        else {
            return _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createClassicUberMaterial({
                isSkinning,
                isLighting,
                alphaMode,
                additionalName: additionalName,
                maxInstancesNumber: maxMaterialInstanceNumber,
            });
        }
    }
    static __isLighting(gltfModel, materialJson) {
        var _a, _b, _c, _d;
        const argument = (_c = (_b = (_a = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) === null || _c === void 0 ? void 0 : _c.defaultMaterialHelperArgumentArray[0];
        if ((argument === null || argument === void 0 ? void 0 : argument.isLighting) != null) {
            return argument.isLighting;
        }
        else {
            return ((_d = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _d === void 0 ? void 0 : _d.KHR_materials_unlit) != null
                ? false
                : true;
        }
    }
    static __isSkinning(node, gltfModel) {
        var _a, _b, _c;
        const argument = (_c = (_b = (_a = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) === null || _c === void 0 ? void 0 : _c.defaultMaterialHelperArgumentArray[0];
        if ((argument === null || argument === void 0 ? void 0 : argument.isSkinning) === false) {
            return false;
        }
        else {
            return node.skin != null;
        }
    }
    static __useTangentAttribute(gltfModel, primitive) {
        var _a, _b, _c;
        const tangentCalculationMode = (_c = (_b = (_a = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) === null || _c === void 0 ? void 0 : _c.tangentCalculationMode;
        switch (tangentCalculationMode) {
            case 0: // do not use normal map
                return false;
            case 1: // tangent attribute + calculated tangent in shader
                break;
            case 2: // tangent attribute + pre-calculated tangent
                return true;
            case 3: // force calc in shader
                return false;
            case 4: // force pre-calc
                return true;
        }
        for (const attribute in primitive.attributes) {
            if (attribute === 'TANGENT') {
                return true;
            }
        }
        return false;
    }
    static __useNormalTexture(gltfModel) {
        var _a, _b, _c, _d, _e, _f;
        const argument = (_c = (_b = (_a = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) === null || _c === void 0 ? void 0 : _c.defaultMaterialHelperArgumentArray[0];
        if ((argument === null || argument === void 0 ? void 0 : argument.useNormalTexture) === false) {
            return false;
        }
        else {
            return (((_f = (_e = (_d = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _d === void 0 ? void 0 : _d.extras) === null || _e === void 0 ? void 0 : _e.rnLoaderOptions) === null || _f === void 0 ? void 0 : _f.tangentCalculationMode) !== 0);
        }
    }
    static __makeOutputSrgb(gltfModel) {
        var _a, _b, _c;
        const argument = (_c = (_b = (_a = gltfModel === null || gltfModel === void 0 ? void 0 : gltfModel.asset) === null || _a === void 0 ? void 0 : _a.extras) === null || _b === void 0 ? void 0 : _b.rnLoaderOptions) === null || _c === void 0 ? void 0 : _c.defaultMaterialHelperArgumentArray[0];
        return argument === null || argument === void 0 ? void 0 : argument.makeOutputSrgb;
    }
    static __getMaterialHash(node, gltfModel, primitive, materialJson) {
        return (primitive.material +
            '_isSkinning_' +
            this.__isSkinning(node, gltfModel) +
            '_isMorphing_' +
            this.__isMorphing(node, gltfModel) +
            '_isLighting_' +
            this.__isLighting(gltfModel, materialJson) +
            '_useTangentAttribute_' +
            this.__useTangentAttribute(gltfModel, primitive));
    }
    static __setupMaterial(rnPrimitive, node, gltfModel, primitive, materialJson) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
        const materialHash = this.__getMaterialHash(node, gltfModel, primitive, materialJson);
        let material = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnMaterials[materialHash];
        if (material != null) {
            return material;
        }
        else {
            const newMaterial = this.__generateAppropriateMaterial(rnPrimitive, node, gltfModel, primitive, materialJson);
            gltfModel.asset.extras.rnMaterials[materialHash] = newMaterial;
            material = newMaterial;
        }
        // avoid unexpected initialization
        if (!this.__needParameterInitialization(materialJson, material.materialTypeName))
            return material;
        const options = gltfModel.asset.extras.rnLoaderOptions;
        const pbrMetallicRoughness = materialJson.pbrMetallicRoughness;
        if (pbrMetallicRoughness != null) {
            // BaseColor Factor
            setupPbrMetallicRoughness(pbrMetallicRoughness, material, gltfModel, options, materialJson);
        }
        else {
            let param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Phong.index;
            if ((_b = materialJson.extras) === null || _b === void 0 ? void 0 : _b.technique) {
                switch (materialJson.extras.technique) {
                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Constant.str:
                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Constant.index;
                        break;
                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Lambert.str:
                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Lambert.index;
                        break;
                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.BlinnPhong.str:
                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.BlinnPhong.index;
                        break;
                    case _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Phong.str:
                        param = _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_22__.ShadingModel.Phong.index;
                        break;
                }
                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ShadingModel, _math_Scalar__WEBPACK_IMPORTED_MODULE_29__.Scalar.fromCopyNumber(param));
            }
        }
        const emissiveTexture = materialJson.emissiveTexture;
        if (emissiveTexture != null) {
            const rnTexture = ModelConverter._createTexture(emissiveTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.EmissiveTexture, rnTexture);
            if (parseFloat((_c = gltfModel.asset) === null || _c === void 0 ? void 0 : _c.version) >= 2 &&
                emissiveTexture.texCoord != null) {
                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.EmissiveTexcoordIndex, emissiveTexture.texCoord);
            }
        }
        let alphaMode = materialJson.alphaMode;
        if (options === null || options === void 0 ? void 0 : options.alphaMode) {
            alphaMode = options.alphaMode;
        }
        if (alphaMode != null) {
            material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__.AlphaMode.fromGlTFString(alphaMode);
            // set alpha threshold except for VRM
            if (material.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__.AlphaMode.Mask &&
                !((_e = (_d = gltfModel.asset.extras) === null || _d === void 0 ? void 0 : _d.rnLoaderOptions) === null || _e === void 0 ? void 0 : _e.isImportVRM)) {
                material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.AlphaCutoff, _math_Scalar__WEBPACK_IMPORTED_MODULE_29__.Scalar.fromCopyNumber((_f = materialJson.alphaCutoff) !== null && _f !== void 0 ? _f : 0.5));
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_g = materialJson.extensions) === null || _g === void 0 ? void 0 : _g.KHR_materials_transmission)) {
            material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_18__.AlphaMode.Translucent;
        }
        const doubleSided = materialJson.doubleSided;
        if (doubleSided != null) {
            material.cullFace = !doubleSided;
        }
        // For glTF1.0
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(materialJson.diffuseColorTexture)) {
            const diffuseColorTexture = materialJson
                .diffuseColorTexture;
            const rnTexture = ModelConverter._createTexture(diffuseColorTexture, gltfModel, {
                autoDetectTransparency: options === null || options === void 0 ? void 0 : options.autoDetectTextureTransparency,
            });
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.DiffuseColorTexture, rnTexture);
            if (this._checkRnGltfLoaderOptionsExist(gltfModel) &&
                ((_j = (_h = gltfModel.asset.extras) === null || _h === void 0 ? void 0 : _h.rnLoaderOptions) === null || _j === void 0 ? void 0 : _j.loaderExtension)) {
                const loaderExtension = gltfModel.asset.extras.rnLoaderOptions
                    .loaderExtension;
                if (loaderExtension.setUVTransformToTexture) {
                    loaderExtension.setUVTransformToTexture(material, diffuseColorTexture.samplerObject);
                }
            }
        }
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(materialJson.diffuseColorFactor)) {
            const diffuseColorFactor = materialJson.diffuseColorFactor;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.DiffuseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_13__.Vector4.fromCopyArray4(diffuseColorFactor));
        }
        const normalTexture = materialJson.normalTexture;
        if (normalTexture != null) {
            const rnTexture = ModelConverter._createTexture(normalTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.NormalTexture, rnTexture);
            if (parseFloat((_k = gltfModel.asset) === null || _k === void 0 ? void 0 : _k.version) >= 2) {
                if (normalTexture.texCoord != null) {
                    material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.NormalTexcoordIndex, normalTexture.texCoord);
                }
                if (normalTexture.scale != null) {
                    material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.NormalScale, normalTexture.scale);
                }
            }
        }
        ModelConverter._setupTextureTransform(normalTexture, material, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.NormalTextureTransform, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.NormalTextureRotation);
        // ModelConverter._setupTextureTransform(normalTexture, material, 'normalTextureTransform', 'normalTextureRotation')
        // For Extension
        if (this._checkRnGltfLoaderOptionsExist(gltfModel)) {
            const loaderExtension = (_m = (_l = gltfModel.asset.extras) === null || _l === void 0 ? void 0 : _l.rnLoaderOptions) === null || _m === void 0 ? void 0 : _m.loaderExtension;
            if ((loaderExtension === null || loaderExtension === void 0 ? void 0 : loaderExtension.setupMaterial) != null) {
                loaderExtension.setupMaterial(gltfModel, materialJson, material);
            }
        }
        return material;
    }
    static _createTexture(texture, gltfModel, { autoDetectTransparency = false } = {}) {
        var _a, _b, _c, _d, _e, _f, _g;
        const options = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions;
        const rnTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_12__.Texture();
        rnTexture.autoDetectTransparency = autoDetectTransparency;
        rnTexture.autoResize = (options === null || options === void 0 ? void 0 : options.autoResizeTexture) === true;
        const textureOption = {
            magFilter: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_b = texture.samplerObject) === null || _b === void 0 ? void 0 : _b.magFilter)
                ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(texture.samplerObject.magFilter)
                : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Linear,
            minFilter: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_c = texture.samplerObject) === null || _c === void 0 ? void 0 : _c.minFilter)
                ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(texture.samplerObject.minFilter)
                : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Linear,
            wrapS: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_d = texture.samplerObject) === null || _d === void 0 ? void 0 : _d.wrapS)
                ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(texture.samplerObject.wrapS)
                : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Repeat,
            wrapT: _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_e = texture.samplerObject) === null || _e === void 0 ? void 0 : _e.wrapT)
                ? _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.from(texture.samplerObject.wrapT)
                : _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Repeat,
        };
        const image = texture.image;
        if (image.image) {
            const imageElem = image.image;
            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_31__.CGAPIResourceRepository.getWebGLResourceRepository();
            const isWebGL1 = !((_f = webglResourceRepository.currentWebGLContextWrapper) === null || _f === void 0 ? void 0 : _f.isWebGL2);
            if (isWebGL1 &&
                !this.__sizeIsPowerOfTwo(imageElem) &&
                this.__needResizeToPowerOfTwoOnWebGl1(textureOption)) {
                rnTexture.autoResize = true;
            }
            rnTexture.generateTextureFromImage(imageElem, textureOption);
        }
        else if (image.basis) {
            rnTexture.generateTextureFromBasis(image.basis, textureOption);
        }
        else if (image.ktx2) {
            rnTexture.generateTextureFromKTX2(image.ktx2, textureOption);
        }
        if (image.uri) {
            rnTexture.name = image.uri;
        }
        else {
            const ext = (_g = image.mimeType) === null || _g === void 0 ? void 0 : _g.split('/')[1];
            rnTexture.name = image.name + `.${ext}`;
        }
        return rnTexture;
    }
    static __needResizeToPowerOfTwoOnWebGl1(textureOption) {
        if (textureOption.wrapS !== _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.ClampToEdge ||
            textureOption.wrapT !== _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.ClampToEdge ||
            (textureOption.minFilter !== _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Linear &&
                textureOption.minFilter !== _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_30__.TextureParameter.Nearest)) {
            return true;
        }
        return false;
    }
    static __sizeIsPowerOfTwo(image) {
        const width = image.width;
        const height = image.height;
        if ((width & (width - 1)) === 0 && (height & (height - 1)) === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    static __needParameterInitialization(materialJson, materialTypeName) {
        if (materialJson == null)
            return false;
        if (materialTypeName.match(/PbrUber/) != null ||
            materialTypeName.match(/ClassicUber/) != null) {
            return true;
        }
        else {
            return false;
        }
    }
    static _checkRnGltfLoaderOptionsExist(gltfModel) {
        var _a;
        if ((_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) {
            return true;
        }
        else {
            return false;
        }
    }
    static __rewrapWithTypedArray(typedArrayClass, uint8Array, byteOffset, length) {
        return new typedArrayClass(uint8Array.buffer, byteOffset + uint8Array.byteOffset, length);
    }
    static _checkBytesPerComponent(accessor) {
        let bytesPerComponent = 0;
        switch (accessor.componentType) {
            case 5120: // gl.BYTE
                bytesPerComponent = 1;
                break;
            case 5121: // gl.UNSIGNED_BYTE
                bytesPerComponent = 1;
                break;
            case 5122: // gl.SHORT
                bytesPerComponent = 2;
                break;
            case 5123: // gl.UNSIGNED_SHORT
                bytesPerComponent = 2;
                break;
            case 5124: // gl.INT
                bytesPerComponent = 4;
                break;
            case 5125: // gl.UNSIGNED_INT
                bytesPerComponent = 4;
                break;
            case 5126: // gl.FLOAT
                bytesPerComponent = 4;
                break;
        }
        return bytesPerComponent;
    }
    static _checkComponentNumber(accessor) {
        let componentN = 0;
        switch (accessor.type) {
            case 'SCALAR':
                componentN = 1;
                break;
            case 'VEC2':
                componentN = 2;
                break;
            case 'VEC3':
                componentN = 3;
                break;
            case 'VEC4':
                componentN = 4;
                break;
            case 'MAT4':
                componentN = 16;
                break;
        }
        return componentN;
    }
    static _checkDataViewMethod(accessor) {
        let dataViewMethod = '';
        switch (accessor.componentType) {
            case 5120: // gl.BYTE
                dataViewMethod = 'getInt8';
                break;
            case 5121: // gl.UNSIGNED_BYTE
                dataViewMethod = 'getUint8';
                break;
            case 5122: // gl.SHORT
                dataViewMethod = 'getInt16';
                break;
            case 5123: // gl.UNSIGNED_SHORT
                dataViewMethod = 'getUint16';
                break;
            case 5124: // gl.INT
                dataViewMethod = 'getInt32';
                break;
            case 5125: // gl.UNSIGNED_INT
                dataViewMethod = 'getUint32';
                break;
            case 5126: // gl.FLOAT
                dataViewMethod = 'getFloat32';
                break;
        }
        return dataViewMethod;
    }
    static _isSystemLittleEndian() {
        return !!new Uint8Array(new Uint16Array([0x00ff]).buffer)[0];
    }
    static _readBinaryFromAccessorAndSetItToAccessorExtras(accessor) {
        var _a, _b, _c;
        const bufferView = accessor.bufferViewObject;
        const byteOffsetFromBuffer = ((_a = bufferView.byteOffset) !== null && _a !== void 0 ? _a : 0) + ((_b = accessor.byteOffset) !== null && _b !== void 0 ? _b : 0);
        const buffer = bufferView.bufferObject;
        const uint8Array = buffer.buffer;
        const componentN = this._checkComponentNumber(accessor);
        const componentBytes = this._checkBytesPerComponent(accessor);
        const dataViewMethod = this._checkDataViewMethod(accessor);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.not.exist(accessor.extras)) {
            accessor.extras = {
                attributeName: '',
                toGetAsTypedArray: true,
                typedDataArray: new Float32Array(),
                componentN: 0,
                componentBytes: 4,
                dataViewMethod: '',
            };
        }
        // for weights animation accessor, set componentN as weightsArrayLength
        accessor.extras.componentN = _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist((_c = accessor.extras) === null || _c === void 0 ? void 0 : _c.weightsArrayLength)
            ? accessor.extras.weightsArrayLength
            : componentN;
        accessor.extras.componentBytes = componentBytes;
        accessor.extras.dataViewMethod = dataViewMethod;
        const byteLength = componentBytes * componentN * accessor.count;
        let float32Array = new Float32Array();
        const numberArray = [];
        if (ModelConverter._isSystemLittleEndian()) {
            // If this platform is Little Endian System,
            //   the uint8array can
            let typedDataArray = new Float32Array();
            if (dataViewMethod === 'getFloat32') {
                typedDataArray = this.__rewrapWithTypedArray(Float32Array, uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getInt8') {
                typedDataArray = new Int8Array(uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getUint8') {
                typedDataArray = new Uint8Array(uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getInt16') {
                typedDataArray = this.__rewrapWithTypedArray(Int16Array, uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getUint16') {
                typedDataArray = this.__rewrapWithTypedArray(Uint16Array, uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getInt32') {
                typedDataArray = this.__rewrapWithTypedArray(Int32Array, uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            else if (dataViewMethod === 'getUint32') {
                typedDataArray = this.__rewrapWithTypedArray(Uint32Array, uint8Array, byteOffsetFromBuffer, byteLength / componentBytes);
            }
            float32Array = this.__normalizeTypedArrayToFloat32Array(dataViewMethod, typedDataArray);
        }
        else {
            // for BigEndian process
            const dataView = new DataView(uint8Array.buffer, byteOffsetFromBuffer + uint8Array.byteOffset, byteLength);
            const byteDelta = componentBytes * componentN;
            const littleEndian = true;
            for (let pos = 0; pos < byteLength; pos += byteDelta) {
                switch (accessor.type) {
                    case 'SCALAR':
                        numberArray.push(dataView[dataViewMethod](pos, littleEndian));
                        break;
                    case 'VEC2':
                        numberArray.push(dataView[dataViewMethod](pos, littleEndian));
                        numberArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));
                        break;
                    case 'VEC3':
                        numberArray.push(dataView[dataViewMethod](pos, littleEndian));
                        numberArray.push(dataView[dataViewMethod](pos + componentBytes, littleEndian));
                        numberArray.push(dataView[dataViewMethod](pos + componentBytes * 2, littleEndian));
                        break;
                    case 'VEC4':
                        for (let i = 0; i < 4; i++) {
                            numberArray.push(dataView[dataViewMethod](pos + componentBytes * i, littleEndian));
                        }
                        break;
                    case 'MAT4':
                        for (let i = 0; i < 16; i++) {
                            numberArray.push(dataView[dataViewMethod](pos + componentBytes * i, littleEndian));
                        }
                        break;
                }
            }
            float32Array = this.__normalizeTypedArrayToFloat32Array(dataViewMethod, numberArray);
        }
        accessor.extras.typedDataArray = float32Array;
        return float32Array;
    }
    /**
     * normalize values of TypedArray to Float32Array
     * See: the last part of 3.11.Animation at https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#animations
     * @param dataViewMethod
     * @param numberArray
     * @returns
     */
    static __normalizeTypedArrayToFloat32Array(dataViewMethod, numberArray) {
        if (dataViewMethod === 'getInt8') {
            return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_33__.DataUtil.normalizedInt8ArrayToFloat32Array(numberArray);
        }
        else if (dataViewMethod === 'getUint8') {
            return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_33__.DataUtil.normalizedUint8ArrayToFloat32Array(numberArray);
        }
        else if (dataViewMethod === 'getInt16') {
            return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_33__.DataUtil.normalizedInt16ArrayToFloat32Array(numberArray);
        }
        else if (dataViewMethod === 'getUint16') {
            return _misc_DataUtil__WEBPACK_IMPORTED_MODULE_33__.DataUtil.normalizedUint16ArrayToFloat32Array(numberArray);
        }
        else if (dataViewMethod === 'getInt32') {
            // typedDataArray = new Int32Array(numberArray);
            console.error('Not considered');
            return new Float32Array();
        }
        else if (dataViewMethod === 'getUint32') {
            // typedDataArray = new Uint32Array(numberArray);
            console.error('Not considered');
            return new Float32Array();
        }
        else if (dataViewMethod === 'getFloat32') {
            return new Float32Array(numberArray);
        }
        else {
            console.error('Not considered');
            return new Float32Array();
        }
    }
    static __addOffsetToIndices(meshComponent) {
        const primitiveNumber = meshComponent.mesh.getPrimitiveNumber();
        let offsetSum = 0;
        for (let i = 0; i < primitiveNumber; i++) {
            const primitive = meshComponent.mesh.getPrimitiveAt(i);
            const indicesAccessor = primitive.indicesAccessor;
            if (indicesAccessor) {
                const elementNumber = indicesAccessor.elementCount;
                for (let j = 0; j < elementNumber; j++) {
                    const index = indicesAccessor.getScalar(j, {});
                    indicesAccessor.setScalar(j, index + offsetSum, {});
                }
                offsetSum += elementNumber;
            }
        }
    }
    /**
     * Take a Rn.Accessor from the Rn.Buffer
     *  from the information of the Gltf2Buffer, Gltf2BufferView, and Gltf2Accessor.
     * @param accessor
     * @param rnBuffer
     * @returns
     */
    static __getRnAccessor(accessor, rnBufferView) {
        var _a;
        const rnAccessor = rnBufferView.takeAccessorWithByteOffset({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.fromString(accessor.type),
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__.ComponentType.from(accessor.componentType),
            count: accessor.count,
            byteOffsetInBufferView: (_a = accessor.byteOffset) !== null && _a !== void 0 ? _a : 0,
            byteStride: accessor.byteStride,
            max: accessor.max,
            min: accessor.min,
            normalized: accessor.normalized,
        });
        return rnAccessor;
    }
    /**
     * Take a Rn.BufferView and a Rn.Accessor from the Rn.Buffer
     *  from the information of the Gltf2Buffer, Gltf2BufferView, and Gltf2Accessor.
     * @param accessor
     * @param rnBuffer
     * @returns
     */
    static __getRnBufferViewAndRnAccessor(accessor, rnBuffer) {
        var _a, _b, _c;
        const gltfBufferView = accessor.bufferViewObject;
        const rnBufferView = rnBuffer
            .takeBufferViewWithByteOffset({
            byteLengthToNeed: gltfBufferView.byteLength,
            byteStride: (_a = gltfBufferView.byteStride) !== null && _a !== void 0 ? _a : 0,
            byteOffset: (_b = gltfBufferView.byteOffset) !== null && _b !== void 0 ? _b : 0,
        })
            .unwrapForce();
        const rnAccessor = rnBufferView
            .takeAccessorWithByteOffset({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.fromString(accessor.type),
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__.ComponentType.from(accessor.componentType),
            count: accessor.count,
            byteOffsetInBufferView: (_c = accessor.byteOffset) !== null && _c !== void 0 ? _c : 0,
            byteStride: accessor.byteStride,
            max: accessor.max,
            min: accessor.min,
            normalized: accessor.normalized,
        })
            .unwrapForce();
        return rnAccessor;
    }
    static __copyRnAccessorAndBufferView(srcRnAccessor) {
        const byteSize = srcRnAccessor.elementCount * 3 /* vec4 */ * 4; /* bytes */
        const dstRnBuffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_28__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_27__.BufferUse.GPUVertexData);
        const dstRnBufferView = dstRnBuffer
            .takeBufferView({
            byteLengthToNeed: byteSize,
            byteStride: 3 /* vec4 */ * 4 /* bytes */,
        })
            .unwrapForce();
        const dstRnAccessor = dstRnBufferView
            .takeAccessor({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.Vec3,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__.ComponentType.Float,
            count: srcRnAccessor.elementCount,
            max: srcRnAccessor.max,
            min: srcRnAccessor.min,
            normalized: srcRnAccessor.normalized,
        })
            .unwrapForce();
        dstRnAccessor.copyBuffer(srcRnAccessor);
        return dstRnAccessor;
    }
    static __takeRnBufferViewAndRnAccessorForDraco(accessor, numOfAttributes, compositionNum, rnBuffer) {
        var _a;
        const rnBufferView = rnBuffer
            .takeBufferView({
            byteLengthToNeed: numOfAttributes * compositionNum * 4,
            byteStride: 0,
        })
            .unwrapForce();
        const rnAccessor = rnBufferView
            .takeAccessorWithByteOffset({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.fromString(accessor.type),
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_9__.ComponentType.from(accessor.componentType),
            count: numOfAttributes,
            byteStride: accessor.byteStride,
            byteOffsetInBufferView: (_a = accessor.byteOffset) !== null && _a !== void 0 ? _a : 0,
            max: accessor.max,
            min: accessor.min,
            normalized: accessor.normalized,
        })
            .unwrapForce();
        return rnAccessor;
    }
    static __getRnBufferView(rnm2bufferView, rnBuffer) {
        var _a, _b;
        const rnBufferView = rnBuffer
            .takeBufferViewWithByteOffset({
            byteLengthToNeed: rnm2bufferView.byteLength,
            byteStride: (_a = rnm2bufferView.byteStride) !== null && _a !== void 0 ? _a : 0,
            byteOffset: (_b = rnm2bufferView.byteOffset) !== null && _b !== void 0 ? _b : 0,
        })
            .unwrapForce();
        return rnBufferView;
    }
    static __getGeometryFromDracoBuffer(draco, decoder, arrayBuffer) {
        const buffer = new draco.DecoderBuffer();
        buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);
        const geometryType = decoder.GetEncodedGeometryType(buffer);
        let dracoGeometry;
        let decodingStatus;
        if (geometryType === draco.TRIANGULAR_MESH) {
            dracoGeometry = new draco.Mesh();
            decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);
        }
        else if (geometryType === draco.POINT_CLOUD) {
            dracoGeometry = new draco.PointCloud();
            decodingStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);
        }
        else {
            const errorMsg = 'Unknown geometry type.';
            console.error(errorMsg);
        }
        dracoGeometry.geometryType = geometryType; // store
        if (!decodingStatus.ok() || dracoGeometry.ptr === 0) {
            let errorMsg = 'Decoding failed: ';
            errorMsg += decodingStatus.error_msg();
            console.error(errorMsg);
            draco.destroy(decoder);
            draco.destroy(dracoGeometry);
            return void 0;
        }
        draco.destroy(buffer);
        return dracoGeometry;
    }
    static __getIndicesFromDraco(draco, decoder, dracoGeometry, triangleStripDrawMode) {
        // For mesh, we need to generate the faces.
        const geometryType = dracoGeometry.geometryType;
        if (geometryType !== draco.TRIANGULAR_MESH) {
            return void 0;
        }
        let indices;
        if (triangleStripDrawMode) {
            const stripsArray = new draco.DracoInt32Array();
            decoder.GetTriangleStripsFromMesh(dracoGeometry, stripsArray);
            indices = new Uint32Array(stripsArray.size());
            for (let i = 0; i < stripsArray.size(); ++i) {
                indices[i] = stripsArray.GetValue(i);
            }
            draco.destroy(stripsArray);
        }
        else {
            // TRIANGLES
            const numFaces = dracoGeometry.num_faces();
            const numIndices = numFaces * 3;
            indices = new Uint32Array(numIndices);
            const ia = new draco.DracoInt32Array();
            for (let i = 0; i < numFaces; ++i) {
                decoder.GetFaceFromMesh(dracoGeometry, i, ia);
                const index = i * 3;
                indices[index] = ia.GetValue(0);
                indices[index + 1] = ia.GetValue(1);
                indices[index + 2] = ia.GetValue(2);
            }
            draco.destroy(ia);
        }
        return indices;
    }
    static __decodeDraco(primitive, rnBuffers, gltfModel, map) {
        const bufferView = gltfModel.bufferViews[primitive.extensions.KHR_draco_mesh_compression.bufferView];
        const rnBufferView = this.__getRnBufferView(bufferView, rnBuffers[bufferView.buffer]);
        const arraybufferOfBufferView = new Uint8Array(rnBufferView.getUint8Array())
            .buffer;
        const draco = new DracoDecoderModule();
        const decoder = new draco.Decoder();
        const dracoGeometry = this.__getGeometryFromDracoBuffer(draco, decoder, arraybufferOfBufferView);
        if (dracoGeometry == null) {
            draco.destroy(dracoGeometry);
            draco.destroy(decoder);
            return void 0;
        }
        const numPoints = dracoGeometry.num_points();
        const rnBufferForDraco = this.__createBufferForDecompressedData(primitive, numPoints);
        // decode indices
        const primitiveMode = _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__.PrimitiveMode.from(primitive.mode);
        let isTriangleStrip = false;
        if (primitiveMode === _definitions_PrimitiveMode__WEBPACK_IMPORTED_MODULE_7__.PrimitiveMode.TriangleStrip) {
            isTriangleStrip = true;
        }
        const indices = this.__getIndicesFromDraco(draco, decoder, dracoGeometry, isTriangleStrip);
        const indicesRnAccessor = this.__takeRnBufferViewAndRnAccessorForDraco(primitive.indicesObject, indices.length, 1, rnBufferForDraco);
        for (let i = 0; i < indices.length; i++) {
            indicesRnAccessor.setScalar(i, indices[i], {});
        }
        // decode attributes
        for (const attributeName in primitive.attributes) {
            const dracoAttributeId = primitive.extensions.KHR_draco_mesh_compression.attributes[attributeName];
            const attributeGltf2Accessor = primitive.attributesObjects[attributeName];
            let attributeRnAccessor = undefined;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.not.exist(dracoAttributeId)) {
                // non-encoded data
                attributeRnAccessor = this.__getRnBufferViewAndRnAccessor(attributeGltf2Accessor, rnBuffers[attributeGltf2Accessor.bufferViewObject.buffer]);
            }
            else {
                // encoded data
                const compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.fromString(attributeGltf2Accessor.type).getNumberOfComponents();
                attributeRnAccessor = this.__takeRnBufferViewAndRnAccessorForDraco(attributeGltf2Accessor, numPoints, compositionNum, rnBufferForDraco);
                const dracoAttributePointer = decoder.GetAttributeByUniqueId(dracoGeometry, dracoAttributeId);
                const decompressedAttributeData = new draco.DracoFloat32Array();
                decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttributePointer, decompressedAttributeData);
                for (let i = 0; i < numPoints; i++) {
                    if (compositionNum === 1) {
                        attributeRnAccessor.setScalar(i, decompressedAttributeData.GetValue(i * compositionNum), {});
                    }
                    else if (compositionNum === 2) {
                        attributeRnAccessor.setVec2(i, decompressedAttributeData.GetValue(i * compositionNum), decompressedAttributeData.GetValue(i * compositionNum + 1), {});
                    }
                    else if (compositionNum === 3) {
                        attributeRnAccessor.setVec3(i, decompressedAttributeData.GetValue(i * compositionNum), decompressedAttributeData.GetValue(i * compositionNum + 1), decompressedAttributeData.GetValue(i * compositionNum + 2), {});
                    }
                    else if (compositionNum === 4) {
                        attributeRnAccessor.setVec4(i, decompressedAttributeData.GetValue(i * compositionNum), decompressedAttributeData.GetValue(i * compositionNum + 1), decompressedAttributeData.GetValue(i * compositionNum + 2), decompressedAttributeData.GetValue(i * compositionNum + 3), {});
                    }
                }
                draco.destroy(decompressedAttributeData);
            }
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(attributeGltf2Accessor.sparse)) {
                this.setSparseAccessor(attributeGltf2Accessor, attributeRnAccessor);
            }
            const joinedString = _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.toVertexAttributeSemanticJoinedStringAsGltfStyle(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_10__.VertexAttribute.fromString(attributeGltf2Accessor.extras.attributeName));
            map.set(joinedString, attributeRnAccessor);
        }
        draco.destroy(dracoGeometry);
        draco.destroy(decoder);
        return indicesRnAccessor;
    }
    static _setupTextureTransform(textureJson, rnMaterial, textureTransformShaderSemantic, textureRotationShaderSemantic) {
        var _a;
        if ((_a = textureJson === null || textureJson === void 0 ? void 0 : textureJson.extensions) === null || _a === void 0 ? void 0 : _a.KHR_texture_transform) {
            const transform = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_24__.MutableVector4.fromCopyArray([1.0, 1.0, 0.0, 0.0]);
            let rotation = 0;
            const transformJson = textureJson.extensions.KHR_texture_transform;
            if (transformJson.scale != null) {
                transform.x = transformJson.scale[0];
                transform.y = transformJson.scale[1];
            }
            if (transformJson.offset != null) {
                transform.z = transformJson.offset[0];
                transform.w = transformJson.offset[1];
            }
            if (transformJson.rotation != null) {
                rotation = transformJson.rotation;
            }
            rnMaterial.setParameter(textureTransformShaderSemantic, transform);
            rnMaterial.setParameter(textureRotationShaderSemantic, rotation);
        }
    }
    static __createBufferForDecompressedData(primitive, numPoints) {
        let byteLengthOfBufferForDraco = 0;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(primitive.indices)) {
            const count = primitive.indicesObject.count;
            byteLengthOfBufferForDraco += count * 4;
        }
        const drcAttributes = primitive.extensions.KHR_draco_mesh_compression.attributes;
        for (const attributeName in primitive.attributes) {
            if (drcAttributes[attributeName] == null) {
                // non-encoded data
                continue;
            }
            const accessor = primitive.attributesObjects[attributeName];
            const compositionNum = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_8__.CompositionType.fromString(accessor.type).getNumberOfComponents();
            const attributeByteLength = numPoints * compositionNum * 4;
            byteLengthOfBufferForDraco += attributeByteLength;
        }
        return new _memory_Buffer__WEBPACK_IMPORTED_MODULE_6__.Buffer({
            byteLength: byteLengthOfBufferForDraco,
            buffer: new ArrayBuffer(byteLengthOfBufferForDraco),
            name: 'Draco',
            byteAlign: 4,
        });
    }
}
function setupPbrMetallicRoughness(pbrMetallicRoughness, material, gltfModel, options, materialJson) {
    const baseColorFactor = pbrMetallicRoughness.baseColorFactor;
    if (baseColorFactor != null) {
        material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorFactor, _math_Vector4__WEBPACK_IMPORTED_MODULE_13__.Vector4.fromCopyArray4(baseColorFactor));
    }
    // BaseColor Texture
    const baseColorTexture = pbrMetallicRoughness.baseColorTexture;
    if (baseColorTexture != null) {
        const rnTexture = ModelConverter._createTexture(baseColorTexture.texture, gltfModel, {
            autoDetectTransparency: options === null || options === void 0 ? void 0 : options.autoDetectTextureTransparency,
        });
        material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorTexture, rnTexture);
        if (baseColorTexture.texCoord != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorTexcoordIndex, baseColorTexture.texCoord);
        }
    }
    // Ambient Occlusion Texture
    const occlusionTexture = materialJson.occlusionTexture;
    if (occlusionTexture != null) {
        const rnTexture = ModelConverter._createTexture(occlusionTexture.texture, gltfModel);
        material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.OcclusionTexture, rnTexture);
        if (occlusionTexture.texCoord != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.OcclusionTexcoordIndex, occlusionTexture.texCoord);
        }
        if (occlusionTexture.strength != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.OcclusionStrength, occlusionTexture.strength);
        }
    }
    // Metallic Factor
    let metallicFactor = pbrMetallicRoughness.metallicFactor;
    metallicFactor = metallicFactor !== null && metallicFactor !== void 0 ? metallicFactor : 1;
    let roughnessFactor = pbrMetallicRoughness.roughnessFactor;
    roughnessFactor = roughnessFactor !== null && roughnessFactor !== void 0 ? roughnessFactor : 1;
    material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MetallicRoughnessFactor, _math_Vector2__WEBPACK_IMPORTED_MODULE_21__.Vector2.fromCopyArray2([metallicFactor, roughnessFactor]));
    // Metallic roughness texture
    const metallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;
    if (metallicRoughnessTexture != null) {
        const rnTexture = ModelConverter._createTexture(metallicRoughnessTexture.texture, gltfModel);
        material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MetallicRoughnessTexture, rnTexture);
        if (metallicRoughnessTexture.texCoord != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MetallicRoughnessTexcoordIndex, metallicRoughnessTexture.texCoord);
        }
    }
    // ClearCoat
    setup_KHR_materials_clearcoat(materialJson, material, gltfModel);
    // Transmission
    const transmission = setup_KHR_materials_transmission(materialJson, material, gltfModel);
    if (!options.transmission) {
        options.transmission = transmission;
    }
    setup_KHR_materials_volume(materialJson, material, gltfModel);
    // BaseColor TexCoord Transform
    setup_KHR_texture_transform(baseColorTexture, material, metallicRoughnessTexture);
}
function setup_KHR_materials_transmission(materialJson, material, gltfModel) {
    var _a;
    const KHR_materials_transmission = (_a = materialJson.extensions) === null || _a === void 0 ? void 0 : _a.KHR_materials_transmission;
    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_transmission)) {
        const transmissionFactor = _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_transmission.transmissionFactor)
            ? KHR_materials_transmission.transmissionFactor
            : 0.0;
        material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.TransmissionFactor, transmissionFactor);
        const transmissionTexture = KHR_materials_transmission.transmissionTexture;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(transmissionTexture)) {
            const rnTransmissionTexture = ModelConverter._createTexture(transmissionTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.TransmissionTexture, rnTransmissionTexture);
        }
        return true;
    }
    return false;
}
function setup_KHR_materials_clearcoat(materialJson, material, gltfModel) {
    var _a;
    const KHR_materials_clearcoat = (_a = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _a === void 0 ? void 0 : _a.KHR_materials_clearcoat;
    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_clearcoat)) {
        const clearCoatFactor = _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_clearcoat.clearcoatFactor)
            ? KHR_materials_clearcoat.clearcoatFactor
            : 0.0;
        material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ClearCoatFactor, clearCoatFactor);
        const clearCoatTexture = KHR_materials_clearcoat.clearcoatTexture;
        if (clearCoatTexture != null) {
            const rnClearCoatTexture = ModelConverter._createTexture(clearCoatTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ClearCoatTexture, rnClearCoatTexture);
        }
        const clearCoatRoughnessFactor = _misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_clearcoat.clearcoatRoughnessFactor)
            ? KHR_materials_clearcoat.clearcoatRoughnessFactor
            : 0.0;
        material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ClearCoatRoughnessFactor, clearCoatRoughnessFactor);
        const clearCoatRoughnessTexture = KHR_materials_clearcoat.clearcoatRoughnessTexture;
        if (clearCoatRoughnessTexture != null) {
            const rnClearCoatRoughnessTexture = ModelConverter._createTexture(clearCoatRoughnessTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ClearCoatRoughnessTexture, rnClearCoatRoughnessTexture);
        }
        const clearCoatNormalTexture = KHR_materials_clearcoat.clearcoatNormalTexture;
        if (clearCoatNormalTexture != null) {
            const rnClearCoatNormalTexture = ModelConverter._createTexture(clearCoatNormalTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ClearCoatNormalTexture, rnClearCoatNormalTexture);
        }
    }
}
function setup_KHR_materials_volume(materialJson, material, gltfModel) {
    var _a;
    const KHR_materials_volume = (_a = materialJson === null || materialJson === void 0 ? void 0 : materialJson.extensions) === null || _a === void 0 ? void 0 : _a.KHR_materials_volume;
    if (_misc_Is__WEBPACK_IMPORTED_MODULE_32__.Is.exist(KHR_materials_volume)) {
        const thicknessFactor = KHR_materials_volume.thicknessFactor
            ? KHR_materials_volume.thicknessFactor
            : 0.0;
        if (thicknessFactor != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ThicknessFactor, thicknessFactor);
        }
        const thicknessTexture = KHR_materials_volume.thicknessTexture;
        if (thicknessTexture != null) {
            const rnThicknessTexture = ModelConverter._createTexture(thicknessTexture.texture, gltfModel);
            material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.ThicknessTexture, rnThicknessTexture);
        }
        const attenuationDistance = KHR_materials_volume.attenuationDistance
            ? KHR_materials_volume.attenuationDistance
            : 0.0;
        if (attenuationDistance != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.AttenuationDistance, attenuationDistance);
        }
        const attenuationColor = KHR_materials_volume.attenuationColor
            ? _cjs__WEBPACK_IMPORTED_MODULE_39__["default"].Vector3.fromCopyArray3(KHR_materials_volume.attenuationColor)
            : _cjs__WEBPACK_IMPORTED_MODULE_39__["default"].Vector3.fromCopy3(1.0, 1.0, 1.0);
        if (attenuationColor != null) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.AttenuationColor, attenuationColor);
        }
    }
}
function setup_KHR_texture_transform(baseColorTexture, material, metallicRoughnessTexture) {
    ModelConverter._setupTextureTransform(baseColorTexture, material, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorTextureTransform, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.BaseColorTextureRotation);
    // Metallic Roughness Texcoord Transform
    ModelConverter._setupTextureTransform(metallicRoughnessTexture, material, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MetallicRoughnessTextureTransform, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_20__.ShaderSemantics.MetallicRoughnessTextureRotation);
}


/***/ }),

/***/ "./src/foundation/importer/RhodoniteImportExtension.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/importer/RhodoniteImportExtension.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RhodoniteImportExtension": () => (/* binding */ RhodoniteImportExtension)
/* harmony export */ });
/* harmony import */ var _effekseer_EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../effekseer/EffekseerComponent */ "./src/effekseer/EffekseerComponent.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");




class RhodoniteImportExtension {
    static importEffect(gltfJson, rootGroup) {
        const RHODONITE_effekseer = 'RHODONITE_effekseer';
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.not.exist(gltfJson.extensions) ||
            _misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.not.exist(gltfJson.extensions.RHODONITE_effekseer) ||
            gltfJson.extensionsUsed.findIndex(extension => {
                return RHODONITE_effekseer === extension;
            }) === -1) {
            return;
        }
        const entities = rootGroup.getTagValue('rnEntities');
        const effects = gltfJson.extensions.RHODONITE_effekseer
            .effects;
        for (const effect of effects) {
            const entity = entities[effect.node];
            const effekseerEntity = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_effekseer_EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__.EffekseerComponent, entity);
            const effekseerComponent = effekseerEntity.getEffekseer();
            effekseerComponent.playJustAfterLoaded = true;
            // effekseerComponent.randomSeed = 1;
            effekseerComponent.isLoop = true;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.exist(effect.bufferView)) {
                const rnm2Buffer = gltfJson.buffers[0];
                rnm2Buffer.bufferPromise.then((arrayBufferOfBuffer) => {
                    const imageUint8Array = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_2__.DataUtil.createUint8ArrayFromBufferViewInfo(gltfJson, effect.bufferView, arrayBufferOfBuffer);
                    effekseerComponent.arrayBuffer = imageUint8Array.buffer.slice(imageUint8Array.byteOffset, imageUint8Array.byteOffset + imageUint8Array.byteLength);
                    effekseerComponent.type = 'efkpkg';
                });
            }
            else if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.exist(effect.uri)) {
                effekseerComponent.uri = effect.uri;
                effekseerComponent.type = 'efk';
            }
            else {
                console.error('No real effect data.');
            }
            const Unzip = (__webpack_require__(/*! zlibjs/bin/unzip.min */ "./node_modules/zlibjs/bin/unzip.min.js").Zlib.Unzip);
            _effekseer_EffekseerComponent__WEBPACK_IMPORTED_MODULE_0__.EffekseerComponent.Unzip = Unzip;
        }
    }
}


/***/ }),

/***/ "./src/foundation/importer/VrmImporter.ts":
/*!************************************************!*\
  !*** ./src/foundation/importer/VrmImporter.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VrmImporter": () => (/* binding */ VrmImporter)
/* harmony export */ });
/* harmony import */ var _GltfImporter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GltfImporter */ "./src/foundation/importer/GltfImporter.ts");
/* harmony import */ var _Gltf2Importer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Gltf2Importer */ "./src/foundation/importer/Gltf2Importer.ts");
/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ModelConverter */ "./src/foundation/importer/ModelConverter.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");




/**
 * The VRM Importer class.
 * This class will be integrated into GltfImporter.
 */
class VrmImporter {
    constructor() { }
    /**
     * Import VRM file.
     */
    static async import(uri, options) {
        var _a, _b;
        options = _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._getOptions(options);
        const gltfModel = await _Gltf2Importer__WEBPACK_IMPORTED_MODULE_1__.Gltf2Importer["import"](uri, options);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.not.exist(gltfModel)) {
            return [];
        }
        const textures = _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._createTextures(gltfModel);
        const defaultMaterialHelperArgumentArray = (_b = (_a = gltfModel.asset.extras) === null || _a === void 0 ? void 0 : _a.rnLoaderOptions) === null || _b === void 0 ? void 0 : _b.defaultMaterialHelperArgumentArray;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.exist(defaultMaterialHelperArgumentArray)) {
            defaultMaterialHelperArgumentArray[0].textures = textures;
        }
        _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._initializeMaterialProperties(gltfModel, textures.length);
        // setup rootGroup
        let rootGroups;
        const rootGroupMain = _ModelConverter__WEBPACK_IMPORTED_MODULE_2__.ModelConverter.convertToRhodoniteObject(gltfModel);
        const existOutline = _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._existOutlineMaterial(gltfModel.extensions.VRM);
        if (existOutline) {
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_3__.Is.exist(defaultMaterialHelperArgumentArray)) {
                defaultMaterialHelperArgumentArray[0].isOutline = true;
            }
            const rootGroupOutline = _ModelConverter__WEBPACK_IMPORTED_MODULE_2__.ModelConverter.convertToRhodoniteObject(gltfModel);
            rootGroups = [rootGroupMain, rootGroupOutline];
        }
        else {
            rootGroups = [rootGroupMain];
        }
        _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._readSpringBone(rootGroupMain, gltfModel);
        _GltfImporter__WEBPACK_IMPORTED_MODULE_0__.GltfImporter._readVRMHumanoidInfo(gltfModel, rootGroupMain);
        return rootGroups;
    }
}


/***/ }),

/***/ "./src/foundation/importer/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/importer/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AnimationAssigner": () => (/* reexport safe */ _AnimationAssigner__WEBPACK_IMPORTED_MODULE_0__.AnimationAssigner),
/* harmony export */   "DrcPointCloudImporter": () => (/* reexport safe */ _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_1__.DrcPointCloudImporter),
/* harmony export */   "Gltf1Importer": () => (/* reexport safe */ _Gltf1Importer__WEBPACK_IMPORTED_MODULE_3__.Gltf1Importer),
/* harmony export */   "Gltf2Importer": () => (/* reexport safe */ _Gltf2Importer__WEBPACK_IMPORTED_MODULE_4__.Gltf2Importer),
/* harmony export */   "GltfImporter": () => (/* reexport safe */ _GltfImporter__WEBPACK_IMPORTED_MODULE_5__.GltfImporter),
/* harmony export */   "ModelConverter": () => (/* reexport safe */ _ModelConverter__WEBPACK_IMPORTED_MODULE_7__.ModelConverter),
/* harmony export */   "RhodoniteImportExtension": () => (/* reexport safe */ _RhodoniteImportExtension__WEBPACK_IMPORTED_MODULE_8__.RhodoniteImportExtension),
/* harmony export */   "VrmImporter": () => (/* reexport safe */ _VrmImporter__WEBPACK_IMPORTED_MODULE_9__.VrmImporter),
/* harmony export */   "detectFormatByArrayBuffers": () => (/* reexport safe */ _FormatDetector__WEBPACK_IMPORTED_MODULE_2__.detectFormatByArrayBuffers),
/* harmony export */   "detectFormatByUri": () => (/* reexport safe */ _FormatDetector__WEBPACK_IMPORTED_MODULE_2__.detectFormatByUri)
/* harmony export */ });
/* harmony import */ var _AnimationAssigner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AnimationAssigner */ "./src/foundation/importer/AnimationAssigner.ts");
/* harmony import */ var _DrcPointCloudImporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DrcPointCloudImporter */ "./src/foundation/importer/DrcPointCloudImporter.ts");
/* harmony import */ var _FormatDetector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FormatDetector */ "./src/foundation/importer/FormatDetector.ts");
/* harmony import */ var _Gltf1Importer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Gltf1Importer */ "./src/foundation/importer/Gltf1Importer.ts");
/* harmony import */ var _Gltf2Importer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Gltf2Importer */ "./src/foundation/importer/Gltf2Importer.ts");
/* harmony import */ var _GltfImporter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GltfImporter */ "./src/foundation/importer/GltfImporter.ts");
/* harmony import */ __webpack_require__(/*! ./ILoaderExtension */ "./src/foundation/importer/ILoaderExtension.ts");
/* harmony import */ var _ModelConverter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ModelConverter */ "./src/foundation/importer/ModelConverter.ts");
/* harmony import */ var _RhodoniteImportExtension__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RhodoniteImportExtension */ "./src/foundation/importer/RhodoniteImportExtension.ts");
/* harmony import */ var _VrmImporter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./VrmImporter */ "./src/foundation/importer/VrmImporter.ts");












/***/ }),

/***/ "./src/foundation/index.ts":
/*!*********************************!*\
  !*** ./src/foundation/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABB": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.AABB),
/* harmony export */   "AABBGizmo": () => (/* reexport safe */ _gizmos_index__WEBPACK_IMPORTED_MODULE_7__.AABBGizmo),
/* harmony export */   "AbstractArrayBufferBaseMathNumber": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.AbstractArrayBufferBaseMathNumber),
/* harmony export */   "AbstractCameraController": () => (/* reexport safe */ _cameras_index__WEBPACK_IMPORTED_MODULE_0__.AbstractCameraController),
/* harmony export */   "AbstractMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.AbstractMaterialContent),
/* harmony export */   "AbstractMatrix": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.AbstractMatrix),
/* harmony export */   "AbstractQuaternion": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.AbstractQuaternion),
/* harmony export */   "AbstractShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.AbstractShaderNode),
/* harmony export */   "AbstractTexture": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.AbstractTexture),
/* harmony export */   "AbstractVector": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.AbstractVector),
/* harmony export */   "Accessor": () => (/* reexport safe */ _memory_index__WEBPACK_IMPORTED_MODULE_12__.Accessor),
/* harmony export */   "AddShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.AddShaderNode),
/* harmony export */   "AlphaMode": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.AlphaMode),
/* harmony export */   "AnimationAssigner": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.AnimationAssigner),
/* harmony export */   "AnimationAttribute": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.AnimationAttribute),
/* harmony export */   "AnimationComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.AnimationComponent),
/* harmony export */   "AnimationInterpolation": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.AnimationInterpolation),
/* harmony export */   "AttributeNormalShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.AttributeNormalShaderNode),
/* harmony export */   "AttributePositionShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.AttributePositionShaderNode),
/* harmony export */   "Axis": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Axis),
/* harmony export */   "BasisCompressionType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.BasisCompressionType),
/* harmony export */   "BlendShapeComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.BlendShapeComponent),
/* harmony export */   "BlockBeginShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.BlockBeginShaderNode),
/* harmony export */   "BlockEndShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.BlockEndShaderNode),
/* harmony export */   "BoneDataType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.BoneDataType),
/* harmony export */   "Buffer": () => (/* reexport safe */ _memory_index__WEBPACK_IMPORTED_MODULE_12__.Buffer),
/* harmony export */   "BufferUse": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.BufferUse),
/* harmony export */   "BufferView": () => (/* reexport safe */ _memory_index__WEBPACK_IMPORTED_MODULE_12__.BufferView),
/* harmony export */   "CGAPIResourceRepository": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.CGAPIResourceRepository),
/* harmony export */   "Cache": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Cache),
/* harmony export */   "CameraComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.CameraComponent),
/* harmony export */   "CameraControllerComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.CameraControllerComponent),
/* harmony export */   "CameraControllerType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.CameraControllerType),
/* harmony export */   "CameraType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.CameraType),
/* harmony export */   "ColorGradingUsingLUTsMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ColorGradingUsingLUTsMaterialContent),
/* harmony export */   "ColorRgb": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ColorRgb),
/* harmony export */   "ColorRgba": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ColorRgba),
/* harmony export */   "ComplexVertexAttribute": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.ComplexVertexAttribute),
/* harmony export */   "Component": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.Component),
/* harmony export */   "ComponentRepository": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository),
/* harmony export */   "ComponentType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ComponentType),
/* harmony export */   "CompositionType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.CompositionType),
/* harmony export */   "CompressionTextureType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.CompressionTextureType),
/* harmony export */   "Config": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.Config),
/* harmony export */   "ConstRgbaBlack": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstRgbaBlack),
/* harmony export */   "ConstRgbaWhite": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstRgbaWhite),
/* harmony export */   "ConstVector2_0_0": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector2_0_0),
/* harmony export */   "ConstVector2_1_1": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector2_1_1),
/* harmony export */   "ConstVector3_0_0_0": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector3_0_0_0),
/* harmony export */   "ConstVector3_1_1_1": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector3_1_1_1),
/* harmony export */   "ConstVector4_0_0_0_0": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector4_0_0_0_0),
/* harmony export */   "ConstVector4_0_0_0_1": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector4_0_0_0_1),
/* harmony export */   "ConstVector4_1_1_1_1": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.ConstVector4_1_1_1_1),
/* harmony export */   "ConstantVariableShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ConstantVariableShaderNode),
/* harmony export */   "Cube": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Cube),
/* harmony export */   "CubeTexture": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.CubeTexture),
/* harmony export */   "CustomMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.CustomMaterialContent),
/* harmony export */   "DataUtil": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.DataUtil),
/* harmony export */   "DepthEncodeMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.DepthEncodeMaterialContent),
/* harmony export */   "DetectHighLuminanceMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.DetectHighLuminanceMaterialContent),
/* harmony export */   "DotProductShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.DotProductShaderNode),
/* harmony export */   "DrcPointCloudImporter": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.DrcPointCloudImporter),
/* harmony export */   "EVENT_CLICK": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_CLICK),
/* harmony export */   "EVENT_KEY_DOWN": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_KEY_DOWN),
/* harmony export */   "EVENT_KEY_PRESS": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_KEY_PRESS),
/* harmony export */   "EVENT_KEY_UP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_KEY_UP),
/* harmony export */   "EVENT_MOUSE_DOWN": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_DOWN),
/* harmony export */   "EVENT_MOUSE_ENTER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_ENTER),
/* harmony export */   "EVENT_MOUSE_LEAVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_LEAVE),
/* harmony export */   "EVENT_MOUSE_MOVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_MOVE),
/* harmony export */   "EVENT_MOUSE_OVER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_OVER),
/* harmony export */   "EVENT_MOUSE_UP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_UP),
/* harmony export */   "EVENT_MOUSE_WHEEL": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MOUSE_WHEEL),
/* harmony export */   "EVENT_MSPOINTER_DOWN": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MSPOINTER_DOWN),
/* harmony export */   "EVENT_MSPOINTER_MOVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MSPOINTER_MOVE),
/* harmony export */   "EVENT_MSPOINTER_UP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_MSPOINTER_UP),
/* harmony export */   "EVENT_ORIENTATION_CHANGE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_ORIENTATION_CHANGE),
/* harmony export */   "EVENT_POINTER_CANCEL": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_CANCEL),
/* harmony export */   "EVENT_POINTER_DOWN": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_DOWN),
/* harmony export */   "EVENT_POINTER_ENTER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_ENTER),
/* harmony export */   "EVENT_POINTER_LEAVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_LEAVE),
/* harmony export */   "EVENT_POINTER_MOVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_MOVE),
/* harmony export */   "EVENT_POINTER_OUT": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_OUT),
/* harmony export */   "EVENT_POINTER_OVER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_OVER),
/* harmony export */   "EVENT_POINTER_UP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_POINTER_UP),
/* harmony export */   "EVENT_RESIZE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_RESIZE),
/* harmony export */   "EVENT_TOUCH_CANCEL": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_CANCEL),
/* harmony export */   "EVENT_TOUCH_DOUBLE_TAP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_DOUBLE_TAP),
/* harmony export */   "EVENT_TOUCH_DRAG": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_DRAG),
/* harmony export */   "EVENT_TOUCH_END": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_END),
/* harmony export */   "EVENT_TOUCH_ENTER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_ENTER),
/* harmony export */   "EVENT_TOUCH_HOLD": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_HOLD),
/* harmony export */   "EVENT_TOUCH_LEAVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_LEAVE),
/* harmony export */   "EVENT_TOUCH_LONG_TAP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_LONG_TAP),
/* harmony export */   "EVENT_TOUCH_MOVE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_MOVE),
/* harmony export */   "EVENT_TOUCH_OUT": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_OUT),
/* harmony export */   "EVENT_TOUCH_OVER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_OVER),
/* harmony export */   "EVENT_TOUCH_PINCH": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_PINCH),
/* harmony export */   "EVENT_TOUCH_START": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_START),
/* harmony export */   "EVENT_TOUCH_SWIPE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_SWIPE),
/* harmony export */   "EVENT_TOUCH_TAP": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EVENT_TOUCH_TAP),
/* harmony export */   "Entity": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.Entity),
/* harmony export */   "EntityHelper": () => (/* reexport safe */ _helpers_index__WEBPACK_IMPORTED_MODULE_8__.EntityHelper),
/* harmony export */   "EntityRepository": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.EntityRepository),
/* harmony export */   "EntityUIDOutputMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.EntityUIDOutputMaterialContent),
/* harmony export */   "EnumClass": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.EnumClass),
/* harmony export */   "EnvConstantMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.EnvConstantMaterialContent),
/* harmony export */   "Err": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Err),
/* harmony export */   "EventPubSub": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.EventPubSub),
/* harmony export */   "Expression": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.Expression),
/* harmony export */   "FileType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.FileType),
/* harmony export */   "Finalizer": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Finalizer),
/* harmony export */   "ForwardRenderPipeline": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.ForwardRenderPipeline),
/* harmony export */   "Frame": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.Frame),
/* harmony export */   "FrameBuffer": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.FrameBuffer),
/* harmony export */   "Frustum": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Frustum),
/* harmony export */   "FurnaceTestMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.FurnaceTestMaterialContent),
/* harmony export */   "GLTF2_EXPORT_DRACO": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.GLTF2_EXPORT_DRACO),
/* harmony export */   "GLTF2_EXPORT_EMBEDDED": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.GLTF2_EXPORT_EMBEDDED),
/* harmony export */   "GLTF2_EXPORT_GLB": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.GLTF2_EXPORT_GLB),
/* harmony export */   "GLTF2_EXPORT_GLTF": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.GLTF2_EXPORT_GLTF),
/* harmony export */   "GLTF2_EXPORT_NO_DOWNLOAD": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.GLTF2_EXPORT_NO_DOWNLOAD),
/* harmony export */   "GammaCorrectionMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.GammaCorrectionMaterialContent),
/* harmony export */   "GaussianBlurForEncodedDepthMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.GaussianBlurForEncodedDepthMaterialContent),
/* harmony export */   "GaussianBlurMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.GaussianBlurMaterialContent),
/* harmony export */   "GetComponentFromEntities": () => (/* reexport safe */ _enhanced_js_objects_index__WEBPACK_IMPORTED_MODULE_4__.GetComponentFromEntities),
/* harmony export */   "Gizmo": () => (/* reexport safe */ _gizmos_index__WEBPACK_IMPORTED_MODULE_7__.Gizmo),
/* harmony export */   "GlobalDataRepository": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.GlobalDataRepository),
/* harmony export */   "Gltf1Importer": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.Gltf1Importer),
/* harmony export */   "Gltf2Exporter": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.Gltf2Exporter),
/* harmony export */   "Gltf2Importer": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.Gltf2Importer),
/* harmony export */   "GltfImporter": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.GltfImporter),
/* harmony export */   "GreaterShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.GreaterShaderNode),
/* harmony export */   "Grid": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Grid),
/* harmony export */   "HdriFormat": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.HdriFormat),
/* harmony export */   "INPUT_HANDLING_STATE_CAMERACONTROLLER": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.INPUT_HANDLING_STATE_CAMERACONTROLLER),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_SCALE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.INPUT_HANDLING_STATE_GIZMO_SCALE),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_TRNSLATION": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION),
/* harmony export */   "INPUT_HANDLING_STATE_NONE": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.INPUT_HANDLING_STATE_NONE),
/* harmony export */   "IShape": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.IShape),
/* harmony export */   "IdentityMatrix33": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.IdentityMatrix33),
/* harmony export */   "IdentityMatrix44": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.IdentityMatrix44),
/* harmony export */   "IfStatementShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.IfStatementShaderNode),
/* harmony export */   "ImageUtil": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ImageUtil),
/* harmony export */   "InputManager": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.InputManager),
/* harmony export */   "Is": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Is),
/* harmony export */   "IsObj": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.IsObj),
/* harmony export */   "Joint": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Joint),
/* harmony export */   "LightComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.LightComponent),
/* harmony export */   "LightType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.LightType),
/* harmony export */   "Line": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Line),
/* harmony export */   "LocatorGizmo": () => (/* reexport safe */ _gizmos_index__WEBPACK_IMPORTED_MODULE_7__.LocatorGizmo),
/* harmony export */   "LogQuaternion": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.LogQuaternion),
/* harmony export */   "MToonMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.MToonMaterialContent),
/* harmony export */   "MatCapMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.MatCapMaterialContent),
/* harmony export */   "Material": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.Material),
/* harmony export */   "MaterialHelper": () => (/* reexport safe */ _helpers_index__WEBPACK_IMPORTED_MODULE_8__.MaterialHelper),
/* harmony export */   "MathClassUtil": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MathClassUtil),
/* harmony export */   "MathUtil": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MathUtil),
/* harmony export */   "Matrix22": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Matrix22),
/* harmony export */   "Matrix33": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Matrix33),
/* harmony export */   "Matrix44": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Matrix44),
/* harmony export */   "MemoryManager": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.MemoryManager),
/* harmony export */   "Mesh": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Mesh),
/* harmony export */   "MeshComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.MeshComponent),
/* harmony export */   "MeshHelper": () => (/* reexport safe */ _helpers_index__WEBPACK_IMPORTED_MODULE_8__.MeshHelper),
/* harmony export */   "MeshRendererComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.MeshRendererComponent),
/* harmony export */   "MiscUtil": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.MiscUtil),
/* harmony export */   "ModelConverter": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.ModelConverter),
/* harmony export */   "ModuleManager": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.ModuleManager),
/* harmony export */   "MultiplyShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.MultiplyShaderNode),
/* harmony export */   "MutableColorRgb": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableColorRgb),
/* harmony export */   "MutableColorRgba": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableColorRgba),
/* harmony export */   "MutableMatrix22": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableMatrix22),
/* harmony export */   "MutableMatrix33": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableMatrix33),
/* harmony export */   "MutableMatrix44": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableMatrix44),
/* harmony export */   "MutableQuaternion": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableQuaternion),
/* harmony export */   "MutableScalar": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableScalar),
/* harmony export */   "MutableScalar_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableScalar_),
/* harmony export */   "MutableScalard": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableScalard),
/* harmony export */   "MutableVector2": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector2),
/* harmony export */   "MutableVector2_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector2_),
/* harmony export */   "MutableVector2d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector2d),
/* harmony export */   "MutableVector3": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector3),
/* harmony export */   "MutableVector3_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector3_),
/* harmony export */   "MutableVector3d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector3d),
/* harmony export */   "MutableVector4": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector4),
/* harmony export */   "MutableVector4_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector4_),
/* harmony export */   "MutableVector4d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.MutableVector4d),
/* harmony export */   "None": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.None),
/* harmony export */   "NormalMatrixShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.NormalMatrixShaderNode),
/* harmony export */   "NormalizeShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.NormalizeShaderNode),
/* harmony export */   "Ok": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Ok),
/* harmony export */   "Option": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Option),
/* harmony export */   "OrbitCameraController": () => (/* reexport safe */ _cameras_index__WEBPACK_IMPORTED_MODULE_0__.OrbitCameraController),
/* harmony export */   "OutColorShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.OutColorShaderNode),
/* harmony export */   "OutPositionShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.OutPositionShaderNode),
/* harmony export */   "PbrExtendedShadingMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.PbrExtendedShadingMaterialContent),
/* harmony export */   "PbrShadingMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.PbrShadingMaterialContent),
/* harmony export */   "PhysicsComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.PhysicsComponent),
/* harmony export */   "PixelFormat": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.PixelFormat),
/* harmony export */   "Plane": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Plane),
/* harmony export */   "Primitive": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Primitive),
/* harmony export */   "PrimitiveMode": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.PrimitiveMode),
/* harmony export */   "PrimitiveSortKey_BitLength_Depth": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitLength_Depth),
/* harmony export */   "PrimitiveSortKey_BitLength_Material": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitLength_Material),
/* harmony export */   "PrimitiveSortKey_BitLength_PrimitiveType": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitLength_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitLength_TranslucencyType": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitLength_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_Material": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitOffset_Material),
/* harmony export */   "PrimitiveSortKey_BitOffset_PrimitiveType": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitOffset_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitOffset_TranslucencyType": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitOffset_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_ViewportLayer": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.PrimitiveSortKey_BitOffset_ViewportLayer),
/* harmony export */   "ProcessApproach": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ProcessApproach),
/* harmony export */   "ProcessApproachClass": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ProcessApproachClass),
/* harmony export */   "ProcessStage": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ProcessStage),
/* harmony export */   "ProjectionMatrixShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ProjectionMatrixShaderNode),
/* harmony export */   "Quaternion": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Quaternion),
/* harmony export */   "RenderBuffer": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.RenderBuffer),
/* harmony export */   "RenderBufferTarget": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.RenderBufferTarget),
/* harmony export */   "RenderPass": () => (/* reexport safe */ _renderer_index__WEBPACK_IMPORTED_MODULE_15__.RenderPass),
/* harmony export */   "RenderTargetTexture": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.RenderTargetTexture),
/* harmony export */   "RenderableHelper": () => (/* reexport safe */ _helpers_index__WEBPACK_IMPORTED_MODULE_8__.RenderableHelper),
/* harmony export */   "RhodoniteImportExtension": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.RhodoniteImportExtension),
/* harmony export */   "RnException": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.RnException),
/* harmony export */   "RnObject": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.RnObject),
/* harmony export */   "RnPromise": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.RnPromise),
/* harmony export */   "Scalar": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Scalar),
/* harmony export */   "ScalarToVector4ShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ScalarToVector4ShaderNode),
/* harmony export */   "Scalar_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Scalar_),
/* harmony export */   "Scalard": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Scalard),
/* harmony export */   "ScaleGizmo": () => (/* reexport safe */ _gizmos_index__WEBPACK_IMPORTED_MODULE_7__.ScaleGizmo),
/* harmony export */   "SceneGraphComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.SceneGraphComponent),
/* harmony export */   "ShaderGraphResolver": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ShaderGraphResolver),
/* harmony export */   "ShaderNode": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderNode),
/* harmony export */   "ShaderSemantics": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics),
/* harmony export */   "ShaderSemanticsClass": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass),
/* harmony export */   "ShaderType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderType),
/* harmony export */   "ShaderVariableType": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderVariableType),
/* harmony export */   "ShaderVariableUpdateInterval": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShaderVariableUpdateInterval),
/* harmony export */   "ShaderityMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ShaderityMaterialContent),
/* harmony export */   "ShaderityUtility": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ShaderityUtility),
/* harmony export */   "ShadingModel": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShadingModel),
/* harmony export */   "ShadowMap": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.ShadowMap),
/* harmony export */   "ShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ShadowMapDecodeClassicMaterialContent),
/* harmony export */   "SimpleVertexAttribute": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.SimpleVertexAttribute),
/* harmony export */   "SkeletalComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.SkeletalComponent),
/* harmony export */   "Some": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Some),
/* harmony export */   "Sphere": () => (/* reexport safe */ _geometry_index__WEBPACK_IMPORTED_MODULE_6__.Sphere),
/* harmony export */   "SphereCollider": () => (/* reexport safe */ _physics_index__WEBPACK_IMPORTED_MODULE_14__.SphereCollider),
/* harmony export */   "SymbolWeakMap": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.SymbolWeakMap),
/* harmony export */   "SynthesizeHdrMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.SynthesizeHdrMaterialContent),
/* harmony export */   "System": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.System),
/* harmony export */   "Texture": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.Texture),
/* harmony export */   "TextureDataFloat": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.TextureDataFloat),
/* harmony export */   "TextureFetchMaterialNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.TextureFetchMaterialNode),
/* harmony export */   "TextureParameter": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.TextureParameter),
/* harmony export */   "Time": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.Time),
/* harmony export */   "TransformComponent": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.TransformComponent),
/* harmony export */   "TranslationGizmo": () => (/* reexport safe */ _gizmos_index__WEBPACK_IMPORTED_MODULE_7__.TranslationGizmo),
/* harmony export */   "UniformDataShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.UniformDataShaderNode),
/* harmony export */   "VRMColliderGroup": () => (/* reexport safe */ _physics_index__WEBPACK_IMPORTED_MODULE_14__.VRMColliderGroup),
/* harmony export */   "VRMSpringBoneGroup": () => (/* reexport safe */ _physics_index__WEBPACK_IMPORTED_MODULE_14__.VRMSpringBoneGroup),
/* harmony export */   "VRMSpringBonePhysicsStrategy": () => (/* reexport safe */ _physics_index__WEBPACK_IMPORTED_MODULE_14__.VRMSpringBonePhysicsStrategy),
/* harmony export */   "VarianceShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.VarianceShadowMapDecodeClassicMaterialContent),
/* harmony export */   "VaryingInVariableShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.VaryingInVariableShaderNode),
/* harmony export */   "VaryingOutVariableShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.VaryingOutVariableShaderNode),
/* harmony export */   "Vector2": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector2),
/* harmony export */   "Vector2_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector2_),
/* harmony export */   "Vector2d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector2d),
/* harmony export */   "Vector3": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector3),
/* harmony export */   "Vector3AndScalarToVector4ShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.Vector3AndScalarToVector4ShaderNode),
/* harmony export */   "Vector3_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector3_),
/* harmony export */   "Vector3d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector3d),
/* harmony export */   "Vector4": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector4),
/* harmony export */   "Vector4_": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector4_),
/* harmony export */   "Vector4d": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.Vector4d),
/* harmony export */   "VectorN": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.VectorN),
/* harmony export */   "VertexAttribute": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute),
/* harmony export */   "VertexAttributeClass": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.VertexAttributeClass),
/* harmony export */   "VideoTexture": () => (/* reexport safe */ _textures_index__WEBPACK_IMPORTED_MODULE_17__.VideoTexture),
/* harmony export */   "ViewMatrixShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.ViewMatrixShaderNode),
/* harmony export */   "Visibility": () => (/* reexport safe */ _definitions_index__WEBPACK_IMPORTED_MODULE_3__.Visibility),
/* harmony export */   "VrmImporter": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.VrmImporter),
/* harmony export */   "WalkThroughCameraController": () => (/* reexport safe */ _cameras_index__WEBPACK_IMPORTED_MODULE_0__.WalkThroughCameraController),
/* harmony export */   "WeakNone": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.WeakNone),
/* harmony export */   "WeakOption": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.WeakOption),
/* harmony export */   "WeakSome": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.WeakSome),
/* harmony export */   "WellKnownComponentTIDs": () => (/* reexport safe */ _components_index__WEBPACK_IMPORTED_MODULE_1__.WellKnownComponentTIDs),
/* harmony export */   "WireframeMaterialNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.WireframeMaterialNode),
/* harmony export */   "WorldMatrixShaderNode": () => (/* reexport safe */ _materials_index__WEBPACK_IMPORTED_MODULE_10__.WorldMatrixShaderNode),
/* harmony export */   "_from": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__._from),
/* harmony export */   "_fromString": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__._fromString),
/* harmony export */   "_fromStringCaseSensitively": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__._fromStringCaseSensitively),
/* harmony export */   "add2": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add2),
/* harmony export */   "add2_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add2_offset),
/* harmony export */   "add3": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add3),
/* harmony export */   "add3_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add3_offset),
/* harmony export */   "add4": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add4),
/* harmony export */   "add4_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.add4_offset),
/* harmony export */   "addLineNumberToCode": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.addLineNumberToCode),
/* harmony export */   "applyMixins": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_2__.applyMixins),
/* harmony export */   "array3_lerp_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.array3_lerp_offsetAsComposition),
/* harmony export */   "arrayN_lerp_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.arrayN_lerp_offsetAsComposition),
/* harmony export */   "assertExist": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.assertExist),
/* harmony export */   "createAndAddGltf2BufferView": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.createAndAddGltf2BufferView),
/* harmony export */   "createEffekseer": () => (/* reexport safe */ _exporter_index__WEBPACK_IMPORTED_MODULE_5__.createEffekseer),
/* harmony export */   "deepCopyUsingJsonStringify": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.deepCopyUsingJsonStringify),
/* harmony export */   "defaultValue": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.defaultValue),
/* harmony export */   "detectFormatByArrayBuffers": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.detectFormatByArrayBuffers),
/* harmony export */   "detectFormatByUri": () => (/* reexport safe */ _importer_index__WEBPACK_IMPORTED_MODULE_9__.detectFormatByUri),
/* harmony export */   "downloadArrayBuffer": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.downloadArrayBuffer),
/* harmony export */   "downloadTypedArray": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.downloadTypedArray),
/* harmony export */   "enhanceArray": () => (/* reexport safe */ _enhanced_js_objects_index__WEBPACK_IMPORTED_MODULE_4__.enhanceArray),
/* harmony export */   "get1": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get1),
/* harmony export */   "get1_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get1_offset),
/* harmony export */   "get1_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get1_offsetAsComposition),
/* harmony export */   "get2": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get2),
/* harmony export */   "get2_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get2_offset),
/* harmony export */   "get2_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get2_offsetAsComposition),
/* harmony export */   "get3": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get3),
/* harmony export */   "get3_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get3_offset),
/* harmony export */   "get3_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get3_offsetAsComposition),
/* harmony export */   "get4": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get4),
/* harmony export */   "get4_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get4_offset),
/* harmony export */   "get4_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.get4_offsetAsComposition),
/* harmony export */   "getEvent": () => (/* reexport safe */ _system_index__WEBPACK_IMPORTED_MODULE_16__.getEvent),
/* harmony export */   "getN_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.getN_offset),
/* harmony export */   "getN_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.getN_offsetAsComposition),
/* harmony export */   "greaterThan": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.greaterThan),
/* harmony export */   "ifDefinedThen": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifDefinedThen),
/* harmony export */   "ifDefinedThenWithReturn": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifDefinedThenWithReturn),
/* harmony export */   "ifExistsThen": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifExistsThen),
/* harmony export */   "ifExistsThenWithReturn": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifExistsThenWithReturn),
/* harmony export */   "ifNotExistsThen": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifNotExistsThen),
/* harmony export */   "ifNotExistsThenWithReturn": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifNotExistsThenWithReturn),
/* harmony export */   "ifUndefinedThen": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifUndefinedThen),
/* harmony export */   "ifUndefinedThenWithReturn": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.ifUndefinedThenWithReturn),
/* harmony export */   "lessThan": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.lessThan),
/* harmony export */   "mulArray3WithScalar_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.mulArray3WithScalar_offset),
/* harmony export */   "mulArray4WithScalar_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.mulArray4WithScalar_offset),
/* harmony export */   "mulArrayNWithScalar_offset": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.mulArrayNWithScalar_offset),
/* harmony export */   "mulThatAndThisToOutAsMat44_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.mulThatAndThisToOutAsMat44_offsetAsComposition),
/* harmony export */   "normalizeArray4": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.normalizeArray4),
/* harmony export */   "nullishToEmptyArray": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.nullishToEmptyArray),
/* harmony export */   "nullishToEmptyMap": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.nullishToEmptyMap),
/* harmony export */   "objectCachify": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.objectCachify),
/* harmony export */   "primitiveCachify1": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.primitiveCachify1),
/* harmony export */   "qlerp_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.qlerp_offsetAsComposition),
/* harmony export */   "scalar_lerp_offsetAsComposition": () => (/* reexport safe */ _math_index__WEBPACK_IMPORTED_MODULE_11__.scalar_lerp_offsetAsComposition),
/* harmony export */   "valueWithCompensation": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.valueWithCompensation),
/* harmony export */   "valueWithDefault": () => (/* reexport safe */ _misc_index__WEBPACK_IMPORTED_MODULE_13__.valueWithDefault)
/* harmony export */ });
/* harmony import */ var _cameras_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cameras/index */ "./src/foundation/cameras/index.ts");
/* harmony import */ var _components_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/index */ "./src/foundation/components/index.ts");
/* harmony import */ var _core_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/index */ "./src/foundation/core/index.ts");
/* harmony import */ var _definitions_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./definitions/index */ "./src/foundation/definitions/index.ts");
/* harmony import */ var _enhanced_js_objects_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enhanced_js_objects/index */ "./src/foundation/enhanced_js_objects/index.ts");
/* harmony import */ var _exporter_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./exporter/index */ "./src/foundation/exporter/index.ts");
/* harmony import */ var _geometry_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry/index */ "./src/foundation/geometry/index.ts");
/* harmony import */ var _gizmos_index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gizmos/index */ "./src/foundation/gizmos/index.ts");
/* harmony import */ var _helpers_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./helpers/index */ "./src/foundation/helpers/index.ts");
/* harmony import */ var _importer_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./importer/index */ "./src/foundation/importer/index.ts");
/* harmony import */ var _materials_index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./materials/index */ "./src/foundation/materials/index.ts");
/* harmony import */ var _math_index__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./math/index */ "./src/foundation/math/index.ts");
/* harmony import */ var _memory_index__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./memory/index */ "./src/foundation/memory/index.ts");
/* harmony import */ var _misc_index__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./misc/index */ "./src/foundation/misc/index.ts");
/* harmony import */ var _physics_index__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./physics/index */ "./src/foundation/physics/index.ts");
/* harmony import */ var _renderer_index__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./renderer/index */ "./src/foundation/renderer/index.ts");
/* harmony import */ var _system_index__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./system/index */ "./src/foundation/system/index.ts");
/* harmony import */ var _textures_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./textures/index */ "./src/foundation/textures/index.ts");




















/***/ }),

/***/ "./src/foundation/materials/contents/ColorGradingUsingLUTsMaterialContent.ts":
/*!***********************************************************************************!*\
  !*** ./src/foundation/materials/contents/ColorGradingUsingLUTsMaterialContent.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColorGradingUsingLUTsMaterialContent": () => (/* binding */ ColorGradingUsingLUTsMaterialContent)
/* harmony export */ });
/* harmony import */ var _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../textures/AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../textures/Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _webgl_shaderity_shaders_ColorGradingUsingLUTsShader_ColorGradingUsingLUTsShader_vert__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.vert */ "./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_ColorGradingUsingLUTsShader_ColorGradingUsingLUTsShader_frag__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.frag */ "./src/webgl/shaderity_shaders/ColorGradingUsingLUTsShader/ColorGradingUsingLUTsShader.frag");













class ColorGradingUsingLUTsMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_10__.AbstractMaterialContent {
    constructor(targetRenderPass, colorAttachmentsNumber, uri, texture) {
        super(null, 'colorGradingUsingLUTsShading', {}, _webgl_shaderity_shaders_ColorGradingUsingLUTsShader_ColorGradingUsingLUTsShader_vert__WEBPACK_IMPORTED_MODULE_11__["default"], _webgl_shaderity_shaders_ColorGradingUsingLUTsShader_ColorGradingUsingLUTsShader_frag__WEBPACK_IMPORTED_MODULE_12__["default"]);
        let targetTexture;
        const framebuffer = targetRenderPass.getFramebuffer();
        if (framebuffer != null &&
            framebuffer.colorAttachments[colorAttachmentsNumber] != null) {
            targetTexture = framebuffer.colorAttachments[colorAttachmentsNumber];
        }
        else {
            targetTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_10__.AbstractMaterialContent.__dummyBlackTexture;
            if (framebuffer != null) {
                console.warn('renderPass does not have framebuffer.colorAttachments[' +
                    colorAttachmentsNumber +
                    ']');
            }
            else {
                console.warn('renderPass does not have framebuffer');
            }
        }
        let lookupTableTexture;
        if (typeof uri === 'string') {
            lookupTableTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_8__.Texture();
            (async function (uri) {
                await lookupTableTexture.generateTextureFromUri(uri, {
                    minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.ClampToEdge,
                    wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.ClampToEdge,
                    type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.UnsignedByte,
                    anisotropy: false,
                });
            })(uri);
        }
        else if (texture instanceof _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture) {
            lookupTableTexture = texture;
        }
        else {
            console.warn('no LUT texture is specified');
            lookupTableTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_10__.AbstractMaterialContent.__dummyBlackTexture;
        }
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.BaseColorTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, targetTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: ColorGradingUsingLUTsMaterialContent.lookupTableTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [1, lookupTableTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}
ColorGradingUsingLUTsMaterialContent.lookupTableTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({
    str: 'lookupTableTexture',
});


/***/ }),

/***/ "./src/foundation/materials/contents/CustomMaterialContent.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/materials/contents/CustomMaterialContent.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CustomMaterialContent": () => (/* binding */ CustomMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/ShaderityUtility */ "./src/foundation/materials/core/ShaderityUtility.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");








class CustomMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor({ name, isMorphing, isSkinning, isLighting, isClearCoat, isTransmission, isVolume, alphaMode, useTangentAttribute, useNormalTexture, vertexShader, pixelShader, additionalShaderSemanticInfo, }) {
        super(null, name +
            (isMorphing ? '+morphing' : '') +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting') +
            (isClearCoat ? '+clearcoat' : '') +
            (isTransmission ? '+transmission' : '') +
            (isVolume ? '+volume' : '') +
            (useTangentAttribute ? '+tangentAttribute' : '') +
            ' alpha_' +
            alphaMode.str.toLowerCase(), { isMorphing, isSkinning, isLighting });
        // Shader Reflection
        const vertexShaderData = _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_6__.ShaderityUtility.getShaderDataReflection(vertexShader, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName));
        const pixelShaderData = _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_6__.ShaderityUtility.getShaderDataReflection(pixelShader, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName));
        this.__vertexShaderityObject = vertexShaderData.shaderityObject;
        this.__pixelShaderityObject = pixelShaderData.shaderityObject;
        const shaderSemanticsInfoArray = [];
        for (const vertexShaderSemanticsInfo of vertexShaderData.shaderSemanticsInfoArray) {
            vertexShaderSemanticsInfo.stage = _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_2__.ShaderType.VertexShader;
            shaderSemanticsInfoArray.push(vertexShaderSemanticsInfo);
        }
        for (const pixelShaderSemanticsInfo of pixelShaderData.shaderSemanticsInfoArray) {
            const foundShaderSemanticsInfo = shaderSemanticsInfoArray.find((vertexInfo) => {
                if (vertexInfo.semantic.str === pixelShaderSemanticsInfo.semantic.str) {
                    return true;
                }
                else {
                    return false;
                }
            });
            if (foundShaderSemanticsInfo) {
                foundShaderSemanticsInfo.stage = _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_2__.ShaderType.VertexAndPixelShader;
            }
            else {
                pixelShaderSemanticsInfo.stage = _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_2__.ShaderType.PixelShader;
                shaderSemanticsInfoArray.push(pixelShaderSemanticsInfo);
            }
        }
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
        }
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        if (isMorphing) {
            this.__definitions += '#define RN_IS_MORPHING\n';
        }
        if (isClearCoat) {
            this.__definitions += '#define RN_USE_CLEARCOAT\n';
        }
        if (isTransmission) {
            this.__definitions += '#define RN_USE_TRANSMISSION\n';
        }
        if (isVolume) {
            this.__definitions += '#define RN_USE_VOLUME\n';
        }
        if (useTangentAttribute) {
            this.__definitions += '#define RN_USE_TANGENT_ATTRIBUTE\n';
        }
        if (useNormalTexture) {
            this.__definitions += '#define RN_USE_NORMAL_TEXTURE\n';
        }
        this.__definitions += '#define RN_IS_ALPHAMODE_' + alphaMode.str + '\n';
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray.concat(additionalShaderSemanticInfo));
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            if (firstTime || args.isVr) {
                let cameraComponent = args.renderPass.cameraComponent;
                if (cameraComponent == null) {
                    cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_3__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_4__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_4__.CameraComponent.current);
                }
                this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
                this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            }
            if (firstTime) {
                // Lights
                this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
            }
            /// Skinning
            const skeletalComponent = args.entity.tryToGetSkeletal();
            this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        }
        // IBL Env map
        if (args.diffuseCube && args.diffuseCube.isTextureReady) {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture.str, firstTime, [5, args.diffuseCube]);
        }
        else {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture.str, firstTime, [5, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture]);
        }
        if (args.specularCube && args.specularCube.isTextureReady) {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture.str, firstTime, [6, args.specularCube]);
        }
        else {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture.str, firstTime, [6, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture]);
        }
        // IBL Parameters
        if (args.setUniform) {
            if (firstTime) {
                const { mipmapLevelNumber, meshRenderComponent, diffuseHdriType, specularHdriType, } = this.setupHdriParameters(args);
                this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter.str, firstTime, {
                    x: mipmapLevelNumber,
                    y: meshRenderComponent.diffuseCubeMapContribution,
                    z: meshRenderComponent.specularCubeMapContribution,
                    w: meshRenderComponent.rotationOfCubeMap,
                });
                this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat.str, firstTime, { x: diffuseHdriType, y: specularHdriType });
            }
        }
        else {
            const { mipmapLevelNumber, meshRenderComponent, diffuseHdriType, specularHdriType, } = this.setupHdriParameters(args);
            const tmp_vector4 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector4;
            tmp_vector4.x = mipmapLevelNumber;
            tmp_vector4.y = meshRenderComponent.diffuseCubeMapContribution;
            tmp_vector4.z = meshRenderComponent.specularCubeMapContribution;
            tmp_vector4.w = meshRenderComponent.rotationOfCubeMap;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter, tmp_vector4);
            const tmp_vector2 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector2;
            tmp_vector2.x = diffuseHdriType;
            tmp_vector2.y = specularHdriType;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat, tmp_vector2);
        }
        // Morph
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
        const width = args.glw.canvas.width;
        const height = args.glw.canvas.height;
        const backBufferTextureSize = CustomMaterialContent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BackBufferTextureSize, 0);
        backBufferTextureSize._v[0] = width;
        backBufferTextureSize._v[1] = height;
        shaderProgram._gl.uniform2fv(shaderProgram.backBufferTextureSize, backBufferTextureSize._v);
        const vrState = CustomMaterialContent.__globalDataRepository.getValue(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.VrState, 0);
        vrState._v[0] = args.isVr ? 1 : 0;
        vrState._v[1] = args.displayIdx;
        shaderProgram._gl.uniform2iv(shaderProgram.vrState, vrState._v);
    }
    setupHdriParameters(args) {
        let mipmapLevelNumber = 1;
        if (args.specularCube) {
            mipmapLevelNumber = args.specularCube.mipmapLevelNumber;
        }
        const meshRenderComponent = args.entity.getMeshRenderer();
        let diffuseHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_5__.HdriFormat.LDR_SRGB.index;
        let specularHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_5__.HdriFormat.LDR_SRGB.index;
        if (meshRenderComponent.diffuseCubeMap) {
            diffuseHdriType = meshRenderComponent.diffuseCubeMap.hdriFormat.index;
        }
        if (meshRenderComponent.specularCubeMap) {
            specularHdriType = meshRenderComponent.specularCubeMap.hdriFormat.index;
        }
        return {
            mipmapLevelNumber,
            meshRenderComponent,
            diffuseHdriType,
            specularHdriType,
        };
    }
}
CustomMaterialContent.__globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_7__.GlobalDataRepository.getInstance();


/***/ }),

/***/ "./src/foundation/materials/contents/DepthEncodeMaterialContent.ts":
/*!*************************************************************************!*\
  !*** ./src/foundation/materials/contents/DepthEncodeMaterialContent.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DepthEncodeMaterialContent": () => (/* binding */ DepthEncodeMaterialContent)
/* harmony export */ });
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _webgl_shaderity_shaders_DepthEncodeSingleShader_DepthEncodeSingleShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.vert */ "./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_DepthEncodeSingleShader_DepthEncodeSingleShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.frag */ "./src/webgl/shaderity_shaders/DepthEncodeSingleShader/DepthEncodeSingleShader.frag");












class DepthEncodeMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent {
    constructor(depthPow, { isSkinning }) {
        super(null, 'depthEncodeShading' + (isSkinning ? '+skinning' : ''), { isMorphing: false, isSkinning, isLighting: false }, _webgl_shaderity_shaders_DepthEncodeSingleShader_DepthEncodeSingleShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_DepthEncodeSingleShader_DepthEncodeSingleShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        this.__lastZNear = 0.0;
        this.__lastZFar = 0.0;
        const shaderSemanticsInfoArray = [
            {
                semantic: DepthEncodeMaterialContent.zNearInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(0.1),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: DepthEncodeMaterialContent.zFarInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(10000.0),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: DepthEncodeMaterialContent.isPointLight,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: DepthEncodeMaterialContent.depthPow,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(depthPow),
                min: 1,
                max: 2,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemantics.PointSize,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(30.0),
                min: 0,
                max: 100,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemantics.PointDistanceAttenuation,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec3,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: true,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_9__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
                min: 0,
                max: 1,
            },
        ];
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING';
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent.current);
        }
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            if (firstTime || this.__lastZNear !== cameraComponent.zNearInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zNearInner, cameraComponent.zNearInner);
                this.__lastZNear = cameraComponent.zNearInner;
            }
            if (this.__lastZFar !== cameraComponent.zFarInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zFarInner, cameraComponent.zFarInner);
                this.__lastZFar = cameraComponent.zFarInner;
            }
        }
        else {
            material.setParameter(DepthEncodeMaterialContent.zNearInner, cameraComponent.zNearInner);
            material.setParameter(DepthEncodeMaterialContent.zFarInner, cameraComponent.zFarInner);
        }
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
    }
}
DepthEncodeMaterialContent.zNearInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemanticsClass({ str: 'zNearInner' });
DepthEncodeMaterialContent.zFarInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemanticsClass({ str: 'zFarInner' });
DepthEncodeMaterialContent.isPointLight = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemanticsClass({ str: 'isPointLight' });
DepthEncodeMaterialContent.depthPow = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemanticsClass({ str: 'depthPow' });


/***/ }),

/***/ "./src/foundation/materials/contents/DetectHighLuminanceMaterialContent.ts":
/*!*********************************************************************************!*\
  !*** ./src/foundation/materials/contents/DetectHighLuminanceMaterialContent.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DetectHighLuminanceMaterialContent": () => (/* binding */ DetectHighLuminanceMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _webgl_shaderity_shaders_DetectHighLuminanceAndCorrectShader_DetectHighLuminanceAndCorrectShader_vert__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.vert */ "./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_DetectHighLuminanceAndCorrectShader_DetectHighLuminanceAndCorrectShader_frag__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.frag */ "./src/webgl/shaderity_shaders/DetectHighLuminanceAndCorrectShader/DetectHighLuminanceAndCorrectShader.frag");











class DetectHighLuminanceMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent {
    constructor(HDRRenderPass, colorAttachmentsNumber) {
        super(null, 'HighLuminanceDetectShading', {}, _webgl_shaderity_shaders_DetectHighLuminanceAndCorrectShader_DetectHighLuminanceAndCorrectShader_vert__WEBPACK_IMPORTED_MODULE_9__["default"], _webgl_shaderity_shaders_DetectHighLuminanceAndCorrectShader_DetectHighLuminanceAndCorrectShader_frag__WEBPACK_IMPORTED_MODULE_10__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: DetectHighLuminanceMaterialContent.LuminanceCriterion,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_4__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_7__.Scalar.fromCopyNumber(2),
                min: 0,
                max: Number.MAX_VALUE,
            },
            {
                semantic: DetectHighLuminanceMaterialContent.LuminanceReduce,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_4__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_7__.Scalar.fromCopyNumber(0.25),
                min: 0,
                max: 1,
            },
        ];
        let targetTexture;
        let framebufferWidth;
        const framebuffer = HDRRenderPass.getFramebuffer();
        if (framebuffer != null &&
            framebuffer.colorAttachments[colorAttachmentsNumber] != null) {
            targetTexture = framebuffer.colorAttachments[colorAttachmentsNumber];
            framebufferWidth = framebuffer.width;
        }
        else {
            targetTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent.__dummyBlackTexture;
            framebufferWidth = 1;
            if (framebuffer != null) {
                console.warn('renderPass does not have framebuffer.colorAttachments[' +
                    colorAttachmentsNumber +
                    ']');
            }
            else {
                console.warn('renderPass does not have framebuffer');
            }
        }
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.FramebufferWidth,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_4__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_7__.Scalar.fromCopyNumber(framebufferWidth),
            min: 0,
            max: Number.MAX_VALUE,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BaseColorTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_4__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [0, targetTexture],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        });
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}
DetectHighLuminanceMaterialContent.LuminanceCriterion = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'luminanceCriterion',
});
DetectHighLuminanceMaterialContent.LuminanceReduce = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'luminanceReduce',
});
DetectHighLuminanceMaterialContent.FramebufferWidth = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'framebufferWidth',
});


/***/ }),

/***/ "./src/foundation/materials/contents/EntityUIDOutputMaterialContent.ts":
/*!*****************************************************************************!*\
  !*** ./src/foundation/materials/contents/EntityUIDOutputMaterialContent.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EntityUIDOutputMaterialContent": () => (/* binding */ EntityUIDOutputMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _webgl_shaderity_shaders_EntityUIDOutputSingleShader_EntityUIDOutputSingleShader_vert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.vert */ "./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_EntityUIDOutputSingleShader_EntityUIDOutputSingleShader_frag__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.frag */ "./src/webgl/shaderity_shaders/EntityUIDOutputSingleShader/EntityUIDOutputSingleShader.frag");














class EntityUIDOutputMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor() {
        super(null, 'entityUidOutputShading' +
            ( '+skinning' ) +
            ( '-lighting'), { isMorphing: false, isSkinning: true, isLighting: false }, _webgl_shaderity_shaders_EntityUIDOutputSingleShader_EntityUIDOutputSingleShader_vert__WEBPACK_IMPORTED_MODULE_12__["default"], _webgl_shaderity_shaders_EntityUIDOutputSingleShader_EntityUIDOutputSingleShader_frag__WEBPACK_IMPORTED_MODULE_13__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.WorldMatrix,
                isComponentData: true,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.VertexShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_10__.MutableMatrix44.zero(),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalMatrix,
                isComponentData: true,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.VertexShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_11__.MutableMatrix33.zero(),
            },
            // {semantic: ShaderSemantics.ViewMatrix, isComponentData: true, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,
            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.FirstTimeOnly, initialValue: MutableMatrix44.zero() },
            // {semantic: ShaderSemantics.ProjectionMatrix, isComponentData: true, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,
            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.FirstTimeOnly, initialValue: MutableMatrix44.zero() },
            // {
            //   semantic: ShaderSemantics.ViewPosition,
            //   compositionType: CompositionType.Vec3,
            //   componentType: ComponentType.Float,
            //   stage: ShaderType.VertexShader,
            //   min: -Number.MAX_VALUE,
            //   max: Number.MAX_VALUE,
            //   isCustomSetting: true,
            //   updateInterval: ShaderVariableUpdateInterval.FirstTimeOnly,
            //   initialValue: Vector3.fromCopyArray([0, 0, 0]),
            //   soloDatum: true
            // },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointSize,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_6__.Scalar.fromCopyNumber(30.0),
                min: 0,
                max: 100,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointDistanceAttenuation,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: true,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_4__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
                min: 0,
                max: 1,
            },
        ];
        {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__.CameraComponent.current);
        }
        this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        // Lights
        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
    }
}


/***/ }),

/***/ "./src/foundation/materials/contents/EnvConstantMaterialContent.ts":
/*!*************************************************************************!*\
  !*** ./src/foundation/materials/contents/EnvConstantMaterialContent.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EnvConstantMaterialContent": () => (/* binding */ EnvConstantMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert */ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag */ "./src/webgl/shaderity_shaders/EnvConstantSingleShader/EnvConstantSingleShader.frag");












class EnvConstantMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor() {
        super(null, 'envConstantShading', {}, _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_EnvConstantSingleShader_EnvConstantSingleShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: EnvConstantMaterialContent.EnvHdriFormat,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_6__.Scalar.fromCopyNumber(0),
                min: 0,
                max: 5,
            },
            {
                semantic: EnvConstantMaterialContent.envRotation,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_6__.Scalar.fromCopyNumber(0),
                min: -Math.PI,
                max: Math.PI,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorFactor,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([1, 1, 1, 1]),
                min: 0,
                max: 2,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ColorEnvTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MakeOutputSrgb,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_6__.Scalar.fromCopyNumber(1),
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_7__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}
EnvConstantMaterialContent.envRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'envRotation' });
EnvConstantMaterialContent.EnvHdriFormat = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'envHdriFormat' });


/***/ }),

/***/ "./src/foundation/materials/contents/FurnaceTestMaterialContent.ts":
/*!*************************************************************************!*\
  !*** ./src/foundation/materials/contents/FurnaceTestMaterialContent.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FurnaceTestMaterialContent": () => (/* binding */ FurnaceTestMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _webgl_shaderity_shaders_FurnaceTestShader_FurnaceTestShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.vert */ "./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_FurnaceTestShader_FurnaceTestShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.frag */ "./src/webgl/shaderity_shaders/FurnaceTestShader/FurnaceTestShader.frag");












class FurnaceTestMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent {
    constructor() {
        super(null, 'FurnaceTestShading', {}, _webgl_shaderity_shaders_FurnaceTestShader_FurnaceTestShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_FurnaceTestShader_FurnaceTestShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: FurnaceTestMaterialContent.debugView,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_2__.Scalar.fromCopyNumber(0),
                min: 0,
                max: 1,
            },
            {
                semantic: FurnaceTestMaterialContent.disable_fresnel,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_2__.Scalar.fromCopyNumber(0),
                min: 0,
                max: 1,
            },
            {
                semantic: FurnaceTestMaterialContent.f0,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_2__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: FurnaceTestMaterialContent.g_type,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_2__.Scalar.fromCopyNumber(0),
                min: 0,
                max: 3,
            },
            {
                semantic: FurnaceTestMaterialContent.mode,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_2__.Scalar.fromCopyNumber(0),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.ScreenInfo,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec2,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_6__.Vector2.fromCopyArray2([0, 0]),
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.MetallicRoughnessFactor,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec2,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_6__.Vector2.fromCopyArray2([1, 1]),
                min: 0,
                max: 2,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.MetallicRoughnessTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_5__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [1, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.__dummyWhiteTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            if (firstTime) {
                /// Matrices
                let cameraComponent = args.renderPass.cameraComponent;
                if (cameraComponent == null) {
                    cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_8__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__.CameraComponent.current);
                }
                this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
                this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
                // Lights
                this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
            }
        }
    }
}
FurnaceTestMaterialContent.mode = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass({ str: 'mode' });
FurnaceTestMaterialContent.debugView = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass({ str: 'debugView' });
FurnaceTestMaterialContent.g_type = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass({ str: 'g_type' });
FurnaceTestMaterialContent.disable_fresnel = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass({ str: 'disable_fresnel' });
FurnaceTestMaterialContent.f0 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemanticsClass({ str: 'f0' });


/***/ }),

/***/ "./src/foundation/materials/contents/GammaCorrectionMaterialContent.ts":
/*!*****************************************************************************!*\
  !*** ./src/foundation/materials/contents/GammaCorrectionMaterialContent.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GammaCorrectionMaterialContent": () => (/* binding */ GammaCorrectionMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_vert__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert */ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_frag__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag */ "./src/webgl/shaderity_shaders/GammaCorrectionShader/GammaCorrectionShader.frag");










class GammaCorrectionMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor() {
        super(null, 'GammaCorrection', {}, _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_vert__WEBPACK_IMPORTED_MODULE_8__["default"], _webgl_shaderity_shaders_GammaCorrectionShader_GammaCorrectionShader_frag__WEBPACK_IMPORTED_MODULE_9__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BaseColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_4__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
                min: 0,
                max: 10,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_5__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_6__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}


/***/ }),

/***/ "./src/foundation/materials/contents/GaussianBlurForEncodedDepthMaterialContent.ts":
/*!*****************************************************************************************!*\
  !*** ./src/foundation/materials/contents/GaussianBlurForEncodedDepthMaterialContent.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GaussianBlurForEncodedDepthMaterialContent": () => (/* binding */ GaussianBlurForEncodedDepthMaterialContent)
/* harmony export */ });
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _webgl_shaderity_shaders_GaussianBlurForEncodedDepthShader_GaussianBlurForEncodedDepthShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.vert */ "./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_GaussianBlurForEncodedDepthShader_GaussianBlurForEncodedDepthShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.frag */ "./src/webgl/shaderity_shaders/GaussianBlurForEncodedDepthShader/GaussianBlurForEncodedDepthShader.frag");












class GaussianBlurForEncodedDepthMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent {
    /**
     * GaussianBlurForEncodedDepthNode applies a Gaussian blur to the result of
     * DepthEncodeMaterial. The blur is applied only in the vertical or horizontal
     * direction. The direction can be changed by setting IsHorizontal in
     * material.setParameter. To use this node, you need to set GaussianKernelSize
     * and GaussianRatio to the appropriate values using the material.setParameter
     * method and to set BaseColorTexture to the target texture using the
     * material.setTextureParameter method. The GaussianKernelSize must be between
     * 1 and 30. The GaussianRatio can be computed using the
     * MathUtil.computeGaussianDistributionRatioWhoseSumIsOne method.
     */
    constructor() {
        super(null, 'gaussianBlurForEncodedDepthShading', {}, _webgl_shaderity_shaders_GaussianBlurForEncodedDepthShader_GaussianBlurForEncodedDepthShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_GaussianBlurForEncodedDepthShader_GaussianBlurForEncodedDepthShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        this.frameBufferWidth = 0;
        const gaussianRatio = new Float32Array(30);
        gaussianRatio[0] = 1.0;
        const shaderSemanticsInfoArray = [
            {
                semantic: GaussianBlurForEncodedDepthMaterialContent.IsHorizontal,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: GaussianBlurForEncodedDepthMaterialContent.GaussianRatio,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.ScalarArray,
                arrayLength: 30,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(gaussianRatio),
                min: 0,
                max: 1,
                needUniformInFastest: true,
            },
            {
                semantic: GaussianBlurForEncodedDepthMaterialContent.GaussianKernelSize,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 1,
                max: 30,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.FramebufferWidth,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.BaseColorTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent.__dummyBlackTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        const baseColorTexture = material.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.BaseColorTexture)[1];
        if (baseColorTexture.width !== this.frameBufferWidth) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.FramebufferWidth, baseColorTexture.width);
            this.frameBufferWidth = baseColorTexture.width;
        }
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        else {
            shaderProgram._gl.uniform1fv(shaderProgram.gaussianRatio, material.getParameter(GaussianBlurForEncodedDepthMaterialContent.GaussianRatio)._v);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}
GaussianBlurForEncodedDepthMaterialContent.GaussianKernelSize = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({
    str: 'gaussianKernelSize',
});
GaussianBlurForEncodedDepthMaterialContent.GaussianRatio = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({ str: 'gaussianRatio' });
GaussianBlurForEncodedDepthMaterialContent.IsHorizontal = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({ str: 'isHorizontal' });


/***/ }),

/***/ "./src/foundation/materials/contents/GaussianBlurMaterialContent.ts":
/*!**************************************************************************!*\
  !*** ./src/foundation/materials/contents/GaussianBlurMaterialContent.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GaussianBlurMaterialContent": () => (/* binding */ GaussianBlurMaterialContent)
/* harmony export */ });
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _webgl_shaderity_shaders_GaussianBlurShader_GaussianBlurShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.vert */ "./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_GaussianBlurShader_GaussianBlurShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.frag */ "./src/webgl/shaderity_shaders/GaussianBlurShader/GaussianBlurShader.frag");












class GaussianBlurMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent {
    /**
     * GaussianBlurNode applies a Gaussian blur to a input texture. The blur is
     * applied only in the vertical or horizontal direction. The direction can
     * be changed by setting IsHorizontal in material.setParameter.
     * To use this node, you need to set GaussianKernelSize and GaussianRatio
     * to the appropriate values using the material.setParameter method and to
     * set BaseColorTexture to the target texture using the
     * material.setTextureParameter method. The GaussianKernelSize must be
     * between 1 and 30. The GaussianRatio can be computed using the
     * MathUtil.computeGaussianDistributionRatioWhoseSumIsOne method.
     */
    constructor() {
        super(null, 'GaussianBlurShading', {}, _webgl_shaderity_shaders_GaussianBlurShader_GaussianBlurShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_GaussianBlurShader_GaussianBlurShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        this.frameBufferWidth = 0;
        const gaussianRatio = new Float32Array(30);
        gaussianRatio[0] = 1.0;
        const shaderSemanticsInfoArray = [
            {
                semantic: GaussianBlurMaterialContent.IsHorizontal,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: GaussianBlurMaterialContent.GaussianRatio,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.ScalarArray,
                arrayLength: 30,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_9__.VectorN(gaussianRatio),
                min: 0,
                max: 1,
                needUniformInFastest: true,
            },
            {
                semantic: GaussianBlurMaterialContent.GaussianKernelSize,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 1,
                max: 30,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.FramebufferWidth,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_4__.Scalar.fromCopyNumber(1),
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.BaseColorTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_6__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_7__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_8__.AbstractMaterialContent.__dummyBlackTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        const baseColorTexture = material.getParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.BaseColorTexture)[1];
        if (baseColorTexture.width !== this.frameBufferWidth) {
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemantics.FramebufferWidth, baseColorTexture.width);
            this.frameBufferWidth = baseColorTexture.width;
        }
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        else {
            shaderProgram._gl.uniform1fv(shaderProgram.gaussianRatio, material.getParameter(GaussianBlurMaterialContent.GaussianRatio)._v);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
}
GaussianBlurMaterialContent.GaussianKernelSize = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({
    str: 'gaussianKernelSize',
});
GaussianBlurMaterialContent.GaussianRatio = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({ str: 'gaussianRatio' });
GaussianBlurMaterialContent.IsHorizontal = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_5__.ShaderSemanticsClass({ str: 'isHorizontal' });


/***/ }),

/***/ "./src/foundation/materials/contents/MToonMaterialContent.ts":
/*!*******************************************************************!*\
  !*** ./src/foundation/materials/contents/MToonMaterialContent.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MToonMaterialContent": () => (/* binding */ MToonMaterialContent)
/* harmony export */ });
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../webgl/WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _webgl_shaderity_shaders_MToonSingleShader_MToonSingleShader_vert__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.vert */ "./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_MToonSingleShader_MToonSingleShader_frag__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.frag */ "./src/webgl/shaderity_shaders/MToonSingleShader/MToonSingleShader.frag");


















class MToonMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent {
    constructor(isOutline, materialProperties, textures, isMorphing, isSkinning, isLighting, useTangentAttribute, debugMode, makeOutputSrgb) {
        super(null, 'MToonShading' +
            (isMorphing ? '+morphing' : '') +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting') +
            (useTangentAttribute ? '+tangentAttribute' : ''), { isMorphing: isMorphing, isSkinning: isSkinning, isLighting: isLighting }, _webgl_shaderity_shaders_MToonSingleShader_MToonSingleShader_vert__WEBPACK_IMPORTED_MODULE_16__["default"], _webgl_shaderity_shaders_MToonSingleShader_MToonSingleShader_frag__WEBPACK_IMPORTED_MODULE_17__["default"]);
        this.__OutlineWidthModeIsScreen = false;
        this.__floatProperties = {};
        this.__vectorProperties = {};
        this.__textureProperties = {};
        const shaderSemanticsInfoArray = [];
        if (materialProperties != null) {
            this.__floatProperties = materialProperties.floatProperties;
            this.__vectorProperties = materialProperties.vectorProperties;
            this.__textureProperties = materialProperties.textureProperties;
        }
        else {
            this.__floatProperties._BlendMode = 0.0;
            this.__floatProperties._BumpScale = 1.0;
            this.__floatProperties._CullMode = 2.0;
            this.__floatProperties._Cutoff = 0.5;
            this.__floatProperties._DebugMode = 0.0;
            this.__floatProperties._DstBlend = 0.0;
            this.__floatProperties._IndirectLightIntensity = 0.1;
            this.__floatProperties._LightColorAttenuation = 0.0;
            this.__floatProperties._OutlineColorMode = 0.0;
            this.__floatProperties._OutlineCullMode = 1.0;
            this.__floatProperties._OutlineLightingMix = 1.0;
            this.__floatProperties._OutlineScaledMaxDistance = 1.0;
            this.__floatProperties._OutlineWidth = 0.5;
            this.__floatProperties._OutlineWidthMode = 0.0;
            this.__floatProperties._ReceiveShadowRate = 1.0;
            this.__floatProperties._RimFresnelPower = 1.0;
            this.__floatProperties._RimLift = 0.0;
            this.__floatProperties._RimLightingMix = 0.0;
            this.__floatProperties._ShadeShift = 0.0;
            this.__floatProperties._ShadeToony = 0.9;
            this.__floatProperties._ShadingGradeRate = 1.0;
            this.__floatProperties._SrcBlend = 1.0;
            this.__floatProperties._ZWrite = 1.0;
            // this.__floatProperties._UvAnimScrollX = 0.0;
            // this.__floatProperties._UvAnimScrollY = 0.0;
            // this.__floatProperties._UvAnimRotation = 0.0;
            this.__vectorProperties._Color = [1, 1, 1, 1];
            this.__vectorProperties._EmissionColor = [0, 0, 0];
            this.__vectorProperties._OutlineColor = [0, 0, 0, 1];
            this.__vectorProperties._ShadeColor = [0.97, 0.81, 0.86, 1];
            this.__vectorProperties._RimColor = [0, 0, 0];
            // this.__vectorProperties._BumpMap = [0, 0, 1, 1];
            // this.__vectorProperties._EmissionMap = [0, 0, 1, 1];
            // this.__vectorProperties._MainTex = [0, 0, 1, 1];
            // this.__vectorProperties._OutlineWidthTexture = [0, 0, 1, 1];
            // this.__vectorProperties._ReceiveShadowTexture = [0, 0, 1, 1];
            // this.__vectorProperties._ShadeTexture = [0, 0, 1, 1];
            // this.__vectorProperties._ShadingGradeTexture = [0, 0, 1, 1];
            // this.__vectorProperties._SphereAdd = [0, 0, 1, 1];
            this.__textureProperties._BumpMap = 0;
            this.__textureProperties._EmissionMap = 1;
            this.__textureProperties._MainTex = 0;
            this.__textureProperties._OutlineWidthTexture = 0;
            this.__textureProperties._ReceiveShadowTexture = 0;
            this.__textureProperties._RimTexture = 1;
            this.__textureProperties._ShadeTexture = 0;
            this.__textureProperties._ShadingGradeTexture = 0;
            this.__textureProperties._SphereAdd = 1;
            // this.__textureProperties._UvAnimMaskTexture = 0;
            textures = [
                _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent.__dummyWhiteTexture,
                _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent.__dummyBlackTexture,
            ];
        }
        if (debugMode) {
            this.__floatProperties._DebugMode = debugMode;
        }
        // non-Texture
        shaderSemanticsInfoArray.push({
            semantic: MToonMaterialContent._Cutoff,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._Cutoff),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._Color,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec4,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_13__.Vector4.fromCopyArray(this.__vectorProperties._Color),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._ShadeColor,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray(this.__vectorProperties._ShadeColor),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._BumpScale,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._BumpScale),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._ReceiveShadowRate,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._ReceiveShadowRate),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._ShadingGradeRate,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._ShadingGradeRate),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._ShadeShift,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._ShadeShift),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._ShadeToony,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._ShadeToony),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._LightColorAttenuation,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._LightColorAttenuation),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._AmbientColor,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray([0.5785, 0.5785, 0.5785]),
            min: 0,
            max: 1,
        }, 
        // {
        //   semantic: MToonMaterialContent._IndirectLightIntensity, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,
        //   stage: ShaderType.PixelShader, isCustomSetting: false, updateInterval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,
        //   initialValue: Scalar.fromCopyNumber(this.floatPropertiesArray._IndirectLightIntensity), min: 0, max: 1
        // },
        {
            semantic: MToonMaterialContent._RimColor,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray(this.__vectorProperties._RimColor),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._RimLightingMix,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._RimLightingMix),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._RimFresnelPower,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._RimFresnelPower),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._RimLift,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._RimLift),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent.CameraUp,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: true,
            soloDatum: true,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray([0, 1, 0]),
            min: 0,
            max: 1,
        }, {
            semantic: MToonMaterialContent._EmissionColor,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray(this.__vectorProperties._EmissionColor),
            min: 0,
            max: 1,
        }, 
        // {
        //   semantic: MToonMaterialContent._UvAnimScrollX, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,
        //   stage: ShaderType.PixelShader, isCustomSetting: false, updateInterval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,
        //   initialValue: Scalar.fromCopyNumber(this.floatPropertiesArray._UvAnimScrollX), min: 0, max: 1
        // },
        // {
        //   semantic: MToonMaterialContent._UvAnimScrollY, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,
        //   stage: ShaderType.PixelShader, isCustomSetting: false, updateInterval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,
        //   initialValue:  Scalar.fromCopyNumber(this.floatPropertiesArray._UvAnimScrollY), min: 0, max: 1
        // },
        // {
        //   semantic: MToonMaterialContent._UvAnimRotation, componentType: ComponentType.Float, compositionType: CompositionType.Scalar,
        //   stage: ShaderType.PixelShader, isCustomSetting: false, updateInterval: ShaderVariableUpdateInterval.EveryTime, soloDatum: false,
        //   initialValue: Scalar.fromCopyNumber(this.floatPropertiesArray._UvAnimRotation), min: 0, max: 1
        // },
        {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.Wireframe,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray([0, 0, 1]),
            min: 0,
            max: 10,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.MakeOutputSrgb,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Bool,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            min: 0,
            max: 1,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(makeOutputSrgb ? 1 : 0),
        });
        // _DebugMode
        switch (this.__floatProperties._DebugMode) {
            case 1:
                this.__definitions += '#define RN_MTOON_DEBUG_NORMAL\n';
                break;
            case 2:
                this.__definitions += '#define RN_MTOON_DEBUG_LITSHADERATE\n';
                break;
        }
        if (isOutline) {
            this.__definitions += '#define RN_MTOON_IS_OUTLINE\n';
            // _OutlineWidthMode
            switch (this.__floatProperties._OutlineWidthMode) {
                case 0:
                    this.__definitions += '#define RN_MTOON_OUTLINE_NONE\n';
                    break;
                case 1:
                    this.__definitions += '#define RN_MTOON_OUTLINE_WIDTH_WORLD\n';
                    break;
                case 2:
                    this.__definitions += '#define RN_MTOON_OUTLINE_WIDTH_SCREEN\n';
                    this.__OutlineWidthModeIsScreen = true;
                    break;
            }
            // _OutlineColorMode
            switch (this.__floatProperties._OutlineColorMode) {
                case 0:
                    this.__definitions += '#define RN_MTOON_OUTLINE_COLOR_FIXED\n';
                    break;
                case 1:
                    this.__definitions += '#define RN_MTOON_OUTLINE_COLOR_MIXED\n';
                    break;
            }
            shaderSemanticsInfoArray.push({
                semantic: MToonMaterialContent._OutlineWidth,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._OutlineWidth),
                min: 0,
                max: 1,
            }, {
                semantic: MToonMaterialContent._OutlineScaledMaxDistance,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._OutlineScaledMaxDistance),
                min: 0,
                max: 1,
            }, {
                semantic: MToonMaterialContent._OutlineColor,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_12__.Vector3.fromCopyArray(this.__vectorProperties._OutlineColor),
                min: 0,
                max: 1,
            }, {
                semantic: MToonMaterialContent._OutlineLightingMix,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(this.__floatProperties._OutlineLightingMix),
                min: 0,
                max: 1,
            }, {
                semantic: MToonMaterialContent.Aspect,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(1.0),
                min: 0,
                max: 1,
            });
        }
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
        }
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        if (isMorphing) {
            this.__definitions += '#define RN_IS_MORPHING\n';
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.MorphTargetNumber,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_8__.Scalar.fromCopyNumber(0),
                min: 0,
                max: _core_Config__WEBPACK_IMPORTED_MODULE_7__.Config.maxVertexMorphNumberInShader,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.DataTextureMorphOffsetPosition,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_7__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_14__.VectorN(new Int32Array(_core_Config__WEBPACK_IMPORTED_MODULE_7__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.MorphWeights,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_7__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_14__.VectorN(new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_7__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            });
        }
        if (useTangentAttribute) {
            this.__definitions += '#define RN_USE_TANGENT_ATTRIBUTE\n';
        }
        // Texture
        this.__setTextures(textures, shaderSemanticsInfoArray, isOutline);
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    __setTextures(textures, shaderSemanticsInfoArray, isOutline) {
        shaderSemanticsInfoArray.push({
            semantic: MToonMaterialContent._MainTex,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [0, textures[this.__textureProperties._MainTex]],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._ShadeTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [1, textures[this.__textureProperties._ShadeTexture]],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._ReceiveShadowTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [
                2,
                textures[this.__textureProperties._ReceiveShadowTexture],
            ],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._ShadingGradeTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [
                3,
                textures[this.__textureProperties._ShadingGradeTexture],
            ],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._RimTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [4, textures[this.__textureProperties._RimTexture]],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._SphereAdd,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [5, textures[this.__textureProperties._SphereAdd]],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        }, {
            semantic: MToonMaterialContent._EmissionMap,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [6, textures[this.__textureProperties._EmissionMap]],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        });
        const glw = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_15__.WebGLResourceRepository.getInstance()
            .currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        const maxUsableTextureNumber = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
        const support10UnitsOfTextures = maxUsableTextureNumber > 9;
        if (support10UnitsOfTextures) {
            shaderSemanticsInfoArray.push({
                // number 7 of texture is the data Texture
                semantic: MToonMaterialContent._BumpMap,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [8, textures[this.__textureProperties._BumpMap]],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            }
            // {
            //   semantic: MToonMaterialContent._UvAnimMaskTexture, componentType: ComponentType.Int, compositionType: CompositionType.Texture2D,
            //   stage: ShaderType.PixelShader, isCustomSetting: false, updateInterval: ShaderVariableUpdateInterval.EveryTime,
            //   initialValue: [10, texturePropertiesArray._UvAnimMaskTexture], min: 0, max: Number.MAX_SAFE_INTEGER,
            // }
            );
            if (this.__textureProperties._BumpMap !== textures.length - 2) {
                //textures.length - 2 is dummyTexture
                this.__definitions += '#define RN_MTOON_HAS_BUMPMAP\n';
            }
            if (isOutline) {
                shaderSemanticsInfoArray.push({
                    semantic: MToonMaterialContent._OutlineWidthTexture,
                    componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int,
                    compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Texture2D,
                    stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader,
                    isCustomSetting: false,
                    updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_11__.ShaderVariableUpdateInterval.EveryTime,
                    initialValue: [
                        9,
                        textures[this.__textureProperties._OutlineWidthTexture],
                    ],
                    min: 0,
                    max: Number.MAX_SAFE_INTEGER,
                });
                if (this.__textureProperties._OutlineWidthTexture !==
                    textures.length - 2) {
                    //textures.length - 2 is dummyTexture
                    this.__definitions += '#define RN_MTOON_HAS_OUTLINE_WIDTH_TEXTURE\n';
                }
            }
        }
    }
    setMaterialParameters(material, isOutline) {
        if (MToonMaterialContent.usableBlendEquationModeAlpha == null) {
            MToonMaterialContent.__initializeUsableBlendEquationModeAlpha();
        }
        if (this.__floatProperties._BlendMode !== 0) {
            switch (this.__floatProperties._BlendMode) {
                case 1:
                    this.__definitions += '#define RN_ALPHATEST_ON\n';
                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Mask;
                    break;
                case 2:
                    this.__definitions += '#define RN_ALPHABLEND_ON\n';
                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent;
                    break;
                case 3:
                    this.__definitions += '#define RN_ALPHABLEND_ON\n';
                    material.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent;
                    break;
            }
            const blendEquationMode = 32774; // gl.FUNC_ADD
            const blendEquationModeAlpha = MToonMaterialContent.usableBlendEquationModeAlpha;
            const blendFuncSrcFactor = MToonMaterialContent.unityBlendEnumCorrespondence(this.__floatProperties._SrcBlend);
            const blendFuncDstFactor = MToonMaterialContent.unityBlendEnumCorrespondence(this.__floatProperties._DstBlend);
            material.setBlendEquationMode(blendEquationMode, blendEquationModeAlpha);
            material.setBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor);
        }
        if (isOutline) {
            switch (this.__floatProperties._OutlineCullMode) {
                case 0:
                    material.cullFace = false;
                    break;
                case 1:
                    material.cullFace = true;
                    material.cullFrontFaceCCW = false;
                    break;
                case 2:
                    material.cullFace = true;
                    material.cullFrontFaceCCW = true;
                    break;
            }
        }
        else {
            switch (this.__floatProperties._CullMode) {
                case 0:
                    material.cullFace = false;
                    break;
                case 1:
                    material.cullFace = true;
                    material.cullFrontFaceCCW = false;
                    break;
                case 2:
                    material.cullFace = true;
                    material.cullFrontFaceCCW = true;
                    break;
            }
        }
    }
    static __initializeUsableBlendEquationModeAlpha() {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContextAsWebGL2();
        if (glw.isWebGL2) {
            MToonMaterialContent.usableBlendEquationModeAlpha = gl.MAX;
        }
        else if (glw.webgl1ExtBM) {
            MToonMaterialContent.usableBlendEquationModeAlpha =
                glw.webgl1ExtBM.MAX_EXT;
        }
        else {
            MToonMaterialContent.usableBlendEquationModeAlpha = gl.FUNC_ADD;
        }
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_2__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_2__.CameraComponent.current);
        }
        if (args.setUniform) {
            /// Matrices
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            /// Skinning
            const skeletalComponent = args.entity.tryToGetSkeletal();
            this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
            // Lights
            this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
            shaderProgram._gl.uniform3fv(shaderProgram.cameraUp, cameraComponent.upInner._v);
            if (this.__OutlineWidthModeIsScreen) {
                shaderProgram._gl.uniform1f(shaderProgram.aspect, cameraComponent.aspect);
            }
        }
        else {
            material.setParameter(MToonMaterialContent.CameraUp, cameraComponent.upInner);
            if (this.__OutlineWidthModeIsScreen) {
                material.setParameter(MToonMaterialContent.Aspect, cameraComponent.aspect);
            }
        }
        // Morph
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
    }
    static unityBlendEnumCorrespondence(enumNumber) {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        let result = gl.ZERO;
        switch (enumNumber) {
            case 0:
                result = gl.ZERO;
                break;
            case 1:
                result = gl.ONE;
                break;
            case 2:
                result = gl.DST_COLOR;
                break;
            case 3:
                result = gl.SRC_COLOR;
                break;
            case 4:
                result = gl.ONE_MINUS_DST_COLOR;
                break;
            case 5:
                result = gl.SRC_ALPHA;
                break;
            case 6:
                result = gl.ONE_MINUS_SRC_COLOR;
                break;
            case 7:
                result = gl.DST_ALPHA;
                break;
            case 8:
                result = gl.ONE_MINUS_DST_ALPHA;
                break;
            case 9:
                result = gl.SRC_ALPHA_SATURATE;
                break;
            case 10:
                result = gl.ONE_MINUS_SRC_ALPHA;
                break;
        }
        return result;
    }
}
MToonMaterialContent._Cutoff = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'cutoff' });
MToonMaterialContent._Color = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'litColor' });
MToonMaterialContent._ShadeColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'shadeColor' });
MToonMaterialContent._MainTex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'litColorTexture' });
MToonMaterialContent._ShadeTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'shadeColorTexture',
});
MToonMaterialContent._BumpScale = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'normalScale' });
MToonMaterialContent._BumpMap = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'normalTexture' });
MToonMaterialContent._ReceiveShadowRate = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'receiveShadowRate',
});
MToonMaterialContent._ReceiveShadowTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'receiveShadowTexture',
});
MToonMaterialContent._ShadingGradeRate = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'shadingGradeRate',
});
MToonMaterialContent._ShadingGradeTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'shadingGradeTexture',
});
MToonMaterialContent._ShadeShift = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'shadeShift' });
MToonMaterialContent._ShadeToony = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'shadeToony' });
MToonMaterialContent._LightColorAttenuation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'lightColorAttenuation',
});
MToonMaterialContent._AmbientColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'ambientColor',
});
// static readonly _IndirectLightIntensity = new ShaderSemanticsClass({ str: 'indirectLightIntensity' });
MToonMaterialContent._RimTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'rimTexture' });
MToonMaterialContent._RimColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'rimColor' });
MToonMaterialContent._RimLightingMix = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'rimLightingMix',
});
MToonMaterialContent._RimFresnelPower = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'rimFresnelPower',
});
MToonMaterialContent._RimLift = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'rimLift' });
MToonMaterialContent._SphereAdd = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'matCapTexture' });
MToonMaterialContent._EmissionColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'emissionColor',
});
MToonMaterialContent._EmissionMap = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'emissionTexture',
});
MToonMaterialContent._OutlineWidthTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'outlineWidthTexture',
});
MToonMaterialContent._OutlineWidth = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'outlineWidth',
});
MToonMaterialContent._OutlineScaledMaxDistance = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'outlineScaledMaxDistance',
});
MToonMaterialContent._OutlineColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'outlineColor',
});
MToonMaterialContent._OutlineLightingMix = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({
    str: 'outlineLightingMix',
});
MToonMaterialContent.Aspect = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'aspect' });
MToonMaterialContent.CameraUp = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemanticsClass({ str: 'cameraUp' });


/***/ }),

/***/ "./src/foundation/materials/contents/MatCapMaterialContent.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/materials/contents/MatCapMaterialContent.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MatCapMaterialContent": () => (/* binding */ MatCapMaterialContent)
/* harmony export */ });
/* harmony import */ var _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../textures/AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../textures/Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _webgl_shaderity_shaders_MatCapShader_MatCapShader_vert__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/MatCapShader/MatCapShader.vert */ "./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_MatCapShader_MatCapShader_frag__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/MatCapShader/MatCapShader.frag */ "./src/webgl/shaderity_shaders/MatCapShader/MatCapShader.frag");















class MatCapMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_12__.AbstractMaterialContent {
    constructor(isSkinning, uri, texture) {
        super(null, 'MatCapShading' + (isSkinning ? '+skinning' : ''), { isSkinning: isSkinning }, _webgl_shaderity_shaders_MatCapShader_MatCapShader_vert__WEBPACK_IMPORTED_MODULE_13__["default"], _webgl_shaderity_shaders_MatCapShader_MatCapShader_frag__WEBPACK_IMPORTED_MODULE_14__["default"]);
        let matCapTexture;
        if (typeof uri === 'string') {
            matCapTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_9__.Texture();
            (async function (uri) {
                await matCapTexture.generateTextureFromUri(uri, {
                    minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__.TextureParameter.Nearest,
                    magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__.TextureParameter.Nearest,
                    wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__.TextureParameter.ClampToEdge,
                    wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_10__.TextureParameter.ClampToEdge,
                    type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.UnsignedByte,
                    anisotropy: false,
                });
            })(uri);
        }
        else if (texture instanceof _textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture) {
            matCapTexture = texture;
        }
        else {
            console.warn('no matcap texture');
            matCapTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_12__.AbstractMaterialContent.__dummyBlackTexture;
        }
        const shaderSemanticsInfoArray = [];
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemantics.Wireframe,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
            soloDatum: false,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_11__.Vector3.fromCopyArray([0, 0, 1]),
            min: 0,
            max: 10,
        });
        // point cloud
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemantics.PointSize,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_5__.Scalar.fromCopyNumber(30.0),
            min: 0,
            max: 100,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemantics.PointDistanceAttenuation,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_11__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
            min: 0,
            max: 1,
        });
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        shaderSemanticsInfoArray.push({
            semantic: MatCapMaterialContent.MatCapTexture,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Texture2D,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
            initialValue: [0, matCapTexture],
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
        });
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_1__.CameraComponent.current);
        }
        this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
    }
}
MatCapMaterialContent.MatCapTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_6__.ShaderSemanticsClass({ str: 'matCapTexture' });


/***/ }),

/***/ "./src/foundation/materials/contents/PbrExtendedShadingMaterialContent.ts":
/*!********************************************************************************!*\
  !*** ./src/foundation/materials/contents/PbrExtendedShadingMaterialContent.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PbrExtendedShadingMaterialContent": () => (/* binding */ PbrExtendedShadingMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../math/Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../definitions/HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _webgl_shaderity_shaders_PBRExtendedShader_PBRExtendedShader_vert__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.vert */ "./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_PBRExtendedShader_PBRExtendedShader_frag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.frag */ "./src/webgl/shaderity_shaders/PBRExtendedShader/PBRExtendedShader.frag");

















class PbrExtendedShadingMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor({ isMorphing, isSkinning, isLighting, }) {
        super(null, 'PbrExtendedShading' +
            (isMorphing ? '+morphing' : '') +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting'), { isMorphing, isSkinning, isLighting }, _webgl_shaderity_shaders_PBRExtendedShader_PBRExtendedShader_vert__WEBPACK_IMPORTED_MODULE_15__["default"], _webgl_shaderity_shaders_PBRExtendedShader_PBRExtendedShader_frag__WEBPACK_IMPORTED_MODULE_16__["default"]);
        _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.initDefaultTextures();
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 2,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 1, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularGlossinessFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 2,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([0.0, 0.0, 0.0, 0.0]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularGlossinessTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                initialValue: [1, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                initialValue: [2, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlueTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Wireframe,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 10,
                isCustomSetting: false,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_7__.Vector3.fromCopyArray([0, 0, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Anisotropy,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -1,
                max: 1,
                isCustomSetting: false,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_3__.Vector2.fromCopyArray2([0, 0]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatParameter,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_3__.Vector2.fromCopyArray2([0.0, 0.5]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SheenParameter,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_7__.Vector3.fromCopyArray([0.0, 0.0, 0.0]),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailNormalTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 10,
                isCustomSetting: false,
                initialValue: [3, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlueTexture],
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 10,
                isCustomSetting: false,
                initialValue: [4, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummySRGBGrayTexture],
            },
            {
                semantic: PbrExtendedShadingMaterialContent.diffuseTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.diffuseTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_10__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.normalTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.normalTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_10__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailColorTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailColorTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_10__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailNormalTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.detailNormalTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_10__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrExtendedShadingMaterialContent.debugDisplay,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 20,
                isCustomSetting: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_10__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_6__.Vector4.fromCopyArray([1, 1, 1, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: 5,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_3__.Vector2.fromCopyArray2([0, 0]),
            },
            // {
            //   semantic: ShaderSemantics.BrdfLutTexture,
            //   compositionType: CompositionType.Texture2D,
            //   componentType: ComponentType.Int,
            //   stage: ShaderType.PixelShader,
            //   min: 0,
            //   max: Number.MAX_SAFE_INTEGER,
            //   isCustomSetting: true,
            //   updateInterval: ShaderVariableUpdateInterval.EveryTime,
            //   initialValue: [5, AbstractMaterialNode.__dummyWhiteTexture],
            // },
            // {
            //   semantic: ShaderSemantics.LightNumber,
            //   compositionType: CompositionType.Scalar,
            //   componentType: ComponentType.Int,
            //   stage: ShaderType.PixelShader,
            //   min: 0,
            //   max: Number.MAX_SAFE_INTEGER,
            //   isCustomSetting: true,
            //   updateInterval: ShaderVariableUpdateInterval.FirstTimeOnly,
            //   initialValue: Scalar.fromCopyNumber(0),
            //   soloDatum: true,
            // },
            // {
            //   semantic: ShaderSemantics.ViewPosition,
            //   compositionType: CompositionType.Vec3,
            //   componentType: ComponentType.Float,
            //   stage: ShaderType.PixelShader,
            //   min: -Number.MAX_VALUE,
            //   max: Number.MAX_VALUE,
            //   isCustomSetting: true,
            //   updateInterval: ShaderVariableUpdateInterval.FirstTimeOnly,
            //   initialValue: Vector3.fromCopyArray([0, 0.0]),
            //   soloDatum: true,
            // },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [5, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_8__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_9__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [6, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
        ];
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
            // const lights: ShaderSemanticsInfo[] = [];
            // for (let i = 0; i < Config.maxLightNumberInShader; i++) {
            //   (function (idx) {
            //     lights.push(
            //       {
            //         semantic: ShaderSemantics.LightPosition,
            //         compositionType: CompositionType.Vec4,
            //         componentType: ComponentType.Float,
            //         stage: ShaderType.PixelShader,
            //         min: -Number.MAX_VALUE,
            //         max: Number.MAX_VALUE,
            //         index: idx,
            //         arrayLength: 4,
            //         isCustomSetting: true,
            //         updateInterval: ShaderVariableUpdateInterval.EveryTime,
            //         initialValue: Vector4.fromCopyArray([0, 0, 0, 1]),
            //         soloDatum: true,
            //       });
            //     lights.push(
            //       {
            //         semantic: ShaderSemantics.LightDirection,
            //         compositionType: CompositionType.Vec4,
            //         componentType: ComponentType.Float,
            //         stage: ShaderType.PixelShader,
            //         min: -1,
            //         max: 1,
            //         index: idx,
            //         arrayLength: 4,
            //         isCustomSetting: true,
            //         initialValue: Vector4.fromCopyArray([0, 1, 0, 1]),
            //         updateInterval: ShaderVariableUpdateInterval.EveryTime,
            //         soloDatum: true,
            //       });
            //     lights.push(
            //       {
            //         semantic: ShaderSemantics.LightIntensity,
            //         compositionType: CompositionType.Vec4,
            //         componentType: ComponentType.Float,
            //         stage: ShaderType.PixelShader,
            //         min: 0,
            //         max: 10,
            //         index: idx,
            //         arrayLength: 4,
            //         isCustomSetting: true,
            //         initialValue: Vector4.fromCopyArray([1, 1, 1, 1]),
            //         updateInterval: ShaderVariableUpdateInterval.EveryTime,
            //         soloDatum: true,
            //       });
            //   })(i);
            // }
            // shaderSemanticsInfoArray = shaderSemanticsInfoArray.concat(lights);
        }
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.BoneMatrix, compositionType: CompositionType.Mat4, componentType: ComponentType.Float,
            // stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.EveryTime });
            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.BoneCompressedChank, compositionType: CompositionType.Vec4Array, arrayLength: 250, componentType: ComponentType.Float,
            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.EveryTime, soloDatum: true });
            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.BoneCompressedInfo, compositionType: CompositionType.Vec4, componentType: ComponentType.Float, soloDatum: true,
            //   stage: ShaderType.VertexShader, min: -Number.MAX_VALUE, max: Number.MAX_VALUE, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.EveryTime, initialValue: MutableVector4.zero() });
            // shaderSemanticsInfoArray.push({semantic: ShaderSemantics.SkinningMode, compositionType: CompositionType.Scalar, componentType: ComponentType.Int,
            //   stage: ShaderType.VertexShader, min: 0, max: 1, isCustomSetting: true, updateInterval: ShaderVariableUpdateInterval.EveryTime, initialValue: Scalar.fromCopyNumber(0) });
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    static async initDefaultTextures() {
        // const pbrCookTorranceBrdfLutDataUrl = ModuleManager.getInstance().getModule('pbr').pbrCookTorranceBrdfLutDataUrl;
        // AbstractMaterialNode.__pbrCookTorranceBrdfLutDataUrlUid = await AbstractMaterialNode.__webglResourceRepository!.createTextureFromDataUri(pbrCookTorranceBrdfLutDataUrl,
        //   {
        //     level: 0, internalFormat: TextureParameter.RGBA8,
        //     border: 0, format: PixelFormat.RGBA, type: ComponentType.Float, magFilter: TextureParameter.Linear, minFilter: TextureParameter.Linear,
        //     wrapS: TextureParameter.ClampToEdge, wrapT: TextureParameter.ClampToEdge, generateMipmap: false, anisotropy: false
        //   }
        // );
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_11__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_12__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_12__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        // Env map
        this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture.str, firstTime, [5, -1]);
        if (args.diffuseCube && args.diffuseCube.isTextureReady) {
            const texture = this.__webglResourceRepository.getWebGLResource(args.diffuseCube.cgApiResourceUid);
            args.glw.bindTextureCube(5, texture);
        }
        else {
            const texture = this.__webglResourceRepository.getWebGLResource(_core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture.cgApiResourceUid);
            args.glw.bindTextureCube(5, texture);
        }
        this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture.str, firstTime, [6, -1]);
        if (args.specularCube && args.specularCube.isTextureReady) {
            const texture = this.__webglResourceRepository.getWebGLResource(args.specularCube.cgApiResourceUid);
            args.glw.bindTextureCube(6, texture);
        }
        else {
            const texture = this.__webglResourceRepository.getWebGLResource(_core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture.cgApiResourceUid);
            args.glw.bindTextureCube(6, texture);
        }
        let mipmapLevelNumber = 1;
        if (args.specularCube) {
            mipmapLevelNumber = args.specularCube.mipmapLevelNumber;
        }
        const meshRenderComponent = args.entity.getComponent(_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__.MeshRendererComponent);
        let diffuseHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_14__.HdriFormat.LDR_SRGB.index;
        let specularHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_14__.HdriFormat.LDR_SRGB.index;
        if (meshRenderComponent.diffuseCubeMap) {
            diffuseHdriType = meshRenderComponent.diffuseCubeMap.hdriFormat.index;
        }
        if (meshRenderComponent.specularCubeMap) {
            specularHdriType = meshRenderComponent.specularCubeMap.hdriFormat.index;
        }
        if (args.setUniform) {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter.str, firstTime, {
                x: mipmapLevelNumber,
                y: meshRenderComponent.diffuseCubeMapContribution,
                z: meshRenderComponent.specularCubeMapContribution,
                w: meshRenderComponent.rotationOfCubeMap,
            });
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat.str, firstTime, { x: diffuseHdriType, y: specularHdriType });
        }
        else {
            const tmp_vector4 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector4;
            tmp_vector4.x = mipmapLevelNumber;
            tmp_vector4.y = meshRenderComponent.diffuseCubeMapContribution;
            tmp_vector4.z = meshRenderComponent.specularCubeMapContribution;
            tmp_vector4.w = meshRenderComponent.rotationOfCubeMap;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter, tmp_vector4);
            const tmp_vector2 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector2;
            tmp_vector2.x = diffuseHdriType;
            tmp_vector2.y = specularHdriType;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter, tmp_vector2);
        }
        // BRDF LUT
        // updated = this.__webglResourceRepository.setUniformValue(shaderProgram, ShaderSemantics.BrdfLutTexture.str, firstTime, [5, -1]);
        // if (updated) {
        //   if (this.__pbrCookTorranceBrdfLutDataUrlUid != null) {
        //     const texture = this.__webglResourceRepository.getWebGLResource(this.__pbrCookTorranceBrdfLutDataUrlUid!) as WebGLTexture;
        //     glw.bindTexture2D(5, texture);
        //   } else {
        //     const texture = this.__webglResourceRepository.getWebGLResource(this.__dummyWhiteTexture!) as WebGLTexture;
        //     glw.bindTexture2D(5, texture);
        //   }
        // }
        // Lights
        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
    }
}
PbrExtendedShadingMaterialContent.detailNormalTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailNormalTexture',
});
PbrExtendedShadingMaterialContent.detailColorTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailColorTexture',
});
PbrExtendedShadingMaterialContent.diffuseTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'diffuseTextureTransform',
});
PbrExtendedShadingMaterialContent.diffuseTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'diffuseTextureRotation',
});
PbrExtendedShadingMaterialContent.normalTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'normalTextureTransform',
});
PbrExtendedShadingMaterialContent.normalTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'normalTextureRotation',
});
PbrExtendedShadingMaterialContent.detailColorTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailColorTextureTransform',
});
PbrExtendedShadingMaterialContent.detailColorTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailColorTextureRotation',
});
PbrExtendedShadingMaterialContent.detailNormalTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailNormalTextureTransform',
});
PbrExtendedShadingMaterialContent.detailNormalTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'detailNormalTextureRotation',
});
PbrExtendedShadingMaterialContent.debugDisplay = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'debugDisplay' });
PbrExtendedShadingMaterialContent.__pbrCookTorranceBrdfLutDataUrlUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_5__.CGAPIResourceRepository.InvalidCGAPIResourceUid;


/***/ }),

/***/ "./src/foundation/materials/contents/PbrShadingMaterialContent.ts":
/*!************************************************************************!*\
  !*** ./src/foundation/materials/contents/PbrShadingMaterialContent.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PbrShadingMaterialContent": () => (/* binding */ PbrShadingMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../math/Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert */ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag */ "./src/webgl/shaderity_shaders/PbrSingleShader/PbrSingleShader.frag");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");

















/**
 * No longer used.
 */
class PbrShadingMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor({ isMorphing, isSkinning, isLighting, useTangentAttribute, useNormalTexture, alphaMode, }) {
        super(null, 'pbrShading' +
            (isMorphing ? '+morphing' : '') +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting') +
            (useTangentAttribute ? '+tangentAttribute' : '') +
            ' alpha_' +
            alphaMode.str.toLowerCase(), { isMorphing, isSkinning, isLighting }, _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_vert__WEBPACK_IMPORTED_MODULE_14__["default"], _webgl_shaderity_shaders_PbrSingleShader_PbrSingleShader_frag__WEBPACK_IMPORTED_MODULE_15__["default"]);
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BaseColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 2,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([1, 1, 1, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.BaseColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MetallicRoughnessFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 2,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_3__.Vector2.fromCopyArray2([1, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MetallicRoughnessTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [1, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.OcclusionTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [3, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.EmissiveTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [4, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Wireframe,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 10,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_6__.Vector3.fromCopyArray([0, 0, 1]),
            },
            {
                semantic: PbrShadingMaterialContent.IsOutputHDR,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MakeOutputSrgb,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Bool,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(1),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([1, 1, 1, 1]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 5,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector2__WEBPACK_IMPORTED_MODULE_3__.Vector2.fromCopyArray2([0, 0]),
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [5, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: [6, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
            },
            {
                semantic: PbrShadingMaterialContent.BaseColorTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrShadingMaterialContent.BaseColorTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.MetallicRoughnessTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([1, 1, 0, 0]),
            },
            {
                semantic: PbrShadingMaterialContent.MetallicRoughnessTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.BaseColorTexcoordIndex,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.MetallicRoughnessTexcoordIndex,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.OcclusionTexcoordIndex,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.EmissiveTexcoordIndex,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            },
            {
                semantic: PbrShadingMaterialContent.OcclusionStrength,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(1),
            },
        ];
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointSize,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(30.0),
            min: 0,
            max: 100,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointDistanceAttenuation,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_6__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
            min: 0,
            max: 1,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatFactor,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            min: 0,
            max: 1,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatTexture,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: [8, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatRoughnessFactor,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            min: 0,
            max: 1,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatRoughnessTexture,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: [9, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ClearCoatNormalTexture,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
            min: 0,
            max: Number.MAX_SAFE_INTEGER,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            initialValue: [10, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlueTexture],
        });
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
        }
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        if (isMorphing) {
            this.__definitions += '#define RN_IS_MORPHING\n';
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphTargetNumber,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
                min: 0,
                max: _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxVertexMorphNumberInShader,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DataTextureMorphOffsetPosition,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_13__.VectorN(new Int32Array(_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphWeights,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_13__.VectorN(new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_12__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            });
        }
        if (useTangentAttribute) {
            this.__definitions += '#define RN_USE_TANGENT_ATTRIBUTE\n';
        }
        if (useNormalTexture) {
            this.__definitions += '#define RN_USE_NORMAL_TEXTURE\n';
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                // https://github.com/actnwit/RhodoniteTS/pull/769#issuecomment-1107444507
                initialValue: [2, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackTexture],
            }, {
                semantic: PbrShadingMaterialContent.NormalTextureTransform,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -10,
                max: 10,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([1, 1, 0, 0]),
            }, {
                semantic: PbrShadingMaterialContent.NormalTextureRotation,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: -Math.PI,
                max: Math.PI,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            }, {
                semantic: PbrShadingMaterialContent.NormalTexcoordIndex,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0),
            }, {
                semantic: PbrShadingMaterialContent.NormalScale,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(1),
            });
        }
        this.__definitions += '#define RN_IS_ALPHAMODE_' + alphaMode.str + '\n';
        if (alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_16__.AlphaMode.Mask) {
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.AlphaCutoff,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_4__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                min: 0,
                max: 1.0,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_11__.Scalar.fromCopyNumber(0.01),
            });
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        this.setupBasicInfo(args, shaderProgram, firstTime, material, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_9__.CameraComponent);
        // // PBR maps
        // this.__webglResourceRepository.setUniformValue(
        //   shaderProgram,
        //   ShaderSemantics.DiffuseEnvTexture.str,
        //   firstTime,
        //   [5, args.diffuseCube]
        // );
        // IBL Env map
        this.setupIBL(args, shaderProgram, firstTime);
        // IBL Parameters
        this.setupIBLParameters(args, firstTime, shaderProgram, material);
    }
    setupIBLParameters(args, firstTime, shaderProgram, material) {
        if (args.setUniform) {
            if (firstTime) {
                const { mipmapLevelNumber, meshRenderComponent, diffuseHdriType, specularHdriType, } = this.setupHdriParameters(args);
                this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter.str, firstTime, {
                    x: mipmapLevelNumber,
                    y: meshRenderComponent.diffuseCubeMapContribution,
                    z: meshRenderComponent.specularCubeMapContribution,
                    w: meshRenderComponent.rotationOfCubeMap,
                });
                this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat.str, firstTime, { x: diffuseHdriType, y: specularHdriType });
            }
        }
        else {
            const { mipmapLevelNumber, meshRenderComponent, diffuseHdriType, specularHdriType, } = this.setupHdriParameters(args);
            const tmp_vector4 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector4;
            tmp_vector4.x = mipmapLevelNumber;
            tmp_vector4.y = meshRenderComponent.diffuseCubeMapContribution;
            tmp_vector4.z = meshRenderComponent.specularCubeMapContribution;
            tmp_vector4.w = meshRenderComponent.rotationOfCubeMap;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.IBLParameter, tmp_vector4);
            const tmp_vector2 = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__tmp_vector2;
            tmp_vector2.x = diffuseHdriType;
            tmp_vector2.y = specularHdriType;
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.HDRIFormat, tmp_vector2);
        }
    }
    setupIBL(args, shaderProgram, firstTime) {
        if (args.diffuseCube && args.diffuseCube.isTextureReady) {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture.str, firstTime, [5, args.diffuseCube]);
        }
        else {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseEnvTexture.str, firstTime, [5, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture]);
        }
        if (args.specularCube && args.specularCube.isTextureReady) {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture.str, firstTime, [6, args.specularCube]);
        }
        else {
            this.__webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.SpecularEnvTexture.str, firstTime, [6, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackCubeTexture]);
        }
    }
    setupHdriParameters(args) {
        let mipmapLevelNumber = 1;
        if (args.specularCube) {
            mipmapLevelNumber = args.specularCube.mipmapLevelNumber;
        }
        const meshRenderComponent = args.entity.getMeshRenderer();
        let diffuseHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_10__.HdriFormat.LDR_SRGB.index;
        let specularHdriType = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_10__.HdriFormat.LDR_SRGB.index;
        if (meshRenderComponent.diffuseCubeMap) {
            diffuseHdriType = meshRenderComponent.diffuseCubeMap.hdriFormat.index;
        }
        if (meshRenderComponent.specularCubeMap) {
            specularHdriType = meshRenderComponent.specularCubeMap.hdriFormat.index;
        }
        return {
            mipmapLevelNumber,
            meshRenderComponent,
            diffuseHdriType,
            specularHdriType,
        };
    }
}
PbrShadingMaterialContent.IsOutputHDR = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'isOutputHDR',
});
PbrShadingMaterialContent.BaseColorTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'baseColorTextureTransform',
});
PbrShadingMaterialContent.BaseColorTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'baseColorTextureRotation',
});
PbrShadingMaterialContent.NormalTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'normalTextureTransform',
});
PbrShadingMaterialContent.NormalTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'normalTextureRotation',
});
PbrShadingMaterialContent.MetallicRoughnessTextureTransform = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'metallicRoughnessTextureTransform',
});
PbrShadingMaterialContent.MetallicRoughnessTextureRotation = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'metallicRoughnessTextureRotation',
});
PbrShadingMaterialContent.NormalTexcoordIndex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'normalTexcoordIndex',
});
PbrShadingMaterialContent.BaseColorTexcoordIndex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'baseColorTexcoordIndex',
});
PbrShadingMaterialContent.MetallicRoughnessTexcoordIndex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'metallicRoughnessTexcoordIndex',
});
PbrShadingMaterialContent.OcclusionTexcoordIndex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'occlusionTexcoordIndex',
});
PbrShadingMaterialContent.EmissiveTexcoordIndex = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'emissiveTexcoordIndex',
});
PbrShadingMaterialContent.NormalScale = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'normalScale' });
PbrShadingMaterialContent.OcclusionStrength = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'occlusionStrength',
});


/***/ }),

/***/ "./src/foundation/materials/contents/ShaderityMaterialContent.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/materials/contents/ShaderityMaterialContent.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderityMaterialContent": () => (/* binding */ ShaderityMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ShaderityUtility */ "./src/foundation/materials/core/ShaderityUtility.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");







// TODO: support fastest strategy (Currently, this material node can be used when the webgl strategy is uniform only)
class ShaderityMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor({ name, vertexShaderityObj, pixelShaderityObj, }) {
        super(null, name, {});
        const vertexShaderData = _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_2__.ShaderityUtility.getShaderDataReflection(vertexShaderityObj, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName));
        const pixelShaderData = _core_ShaderityUtility__WEBPACK_IMPORTED_MODULE_2__.ShaderityUtility.getShaderDataReflection(pixelShaderityObj, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName));
        this.__vertexShaderityObject = vertexShaderityObj;
        this.__pixelShaderityObject = pixelShaderityObj;
        const shaderSemanticsInfoArray = vertexShaderData.shaderSemanticsInfoArray.concat();
        for (const pixelShaderSemanticsInfo of pixelShaderData.shaderSemanticsInfoArray) {
            const foundShaderSemanticsInfo = shaderSemanticsInfoArray.find((info) => {
                return info.semantic.str === pixelShaderSemanticsInfo.semantic.str;
            });
            if (foundShaderSemanticsInfo) {
                foundShaderSemanticsInfo.stage = _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.VertexAndPixelShader;
            }
            else {
                shaderSemanticsInfoArray.push(pixelShaderSemanticsInfo);
            }
        }
        ShaderityMaterialContent.__removeUselessShaderSemantics(shaderSemanticsInfoArray);
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            if (firstTime || args.isVr) {
                let cameraComponent = args.renderPass.cameraComponent;
                if (cameraComponent == null) {
                    cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent.current);
                }
                this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
                this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            }
            if (firstTime) {
                this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
            }
            const skeletalComponent = args.entity.tryToGetSkeletal();
            this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        }
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
    }
    static __removeUselessShaderSemantics(shaderSemanticsInfoArray) {
        const globalPropertyStructs = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_6__.GlobalDataRepository.getInstance().getGlobalProperties();
        for (const globalPropertyStruct of globalPropertyStructs) {
            const globalShaderSemanticsInfo = globalPropertyStruct.shaderSemanticsInfo;
            const duplicateElemId = shaderSemanticsInfoArray.findIndex(shaderSemanticsInfo => shaderSemanticsInfo.semantic.str ===
                globalShaderSemanticsInfo.semantic.str);
            if (duplicateElemId !== -1) {
                shaderSemanticsInfoArray.splice(duplicateElemId, 1);
            }
        }
        const defaultShaderSemantics = [
            _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.VertexAttributesExistenceArray,
            _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.WorldMatrix,
            _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalMatrix,
            _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointSize,
            _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointDistanceAttenuation,
        ];
        for (const shaderSemantic of defaultShaderSemantics) {
            const duplicateElemId = shaderSemanticsInfoArray.findIndex(shaderSemanticsInfo => shaderSemanticsInfo.semantic.str === shaderSemantic.str);
            if (duplicateElemId !== -1) {
                shaderSemanticsInfoArray.splice(duplicateElemId, 1);
            }
        }
    }
}


/***/ }),

/***/ "./src/foundation/materials/contents/ShadowMapDecodeClassicMaterialContent.ts":
/*!************************************************************************************!*\
  !*** ./src/foundation/materials/contents/ShadowMapDecodeClassicMaterialContent.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShadowMapDecodeClassicMaterialContent": () => (/* binding */ ShadowMapDecodeClassicMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShadingModel */ "./src/foundation/definitions/ShadingModel.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _webgl_shaderity_shaders_ShadowMapDecodeClassicSingleShader_ShadowMapDecodeClassicSingleShader_vert__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.vert */ "./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_ShadowMapDecodeClassicSingleShader_ShadowMapDecodeClassicSingleShader_frag__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.frag */ "./src/webgl/shaderity_shaders/ShadowMapDecodeClassicSingleShader/ShadowMapDecodeClassicSingleShader.frag");


















class ShadowMapDecodeClassicMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    /**
     * The constructor of the ShadowMapDecodeClassicMaterialContent
     * @param isMorphing True if the morphing is to be applied
     * @param isSkinning True if the skeleton is to be applied
     * @param isLighting True if the lighting is to be applied. When isLighting is false, the Shader draws the original color of the material, except for the shadow area.
     * @param isDebugging True if the shader displays the DebugColorFactor color in areas outside of the depth map.
     * @param colorAttachmentsNumber The index of colorAttachment in a framebuffer. The colorAttachment must have depth information drawn by the DepthEncodeMaterialContent.
     * @param encodedDepthRenderPass The render pass where the depth information from the DepthEncodeMaterialContent is drawn to the frame buffer
     */
    constructor({ isMorphing, isSkinning, isLighting, isDebugging, colorAttachmentsNumber, }, encodedDepthRenderPass) {
        super(null, 'ShadowMapDecodeClassicShading' +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting'), { isMorphing, isSkinning, isLighting }, _webgl_shaderity_shaders_ShadowMapDecodeClassicSingleShader_ShadowMapDecodeClassicSingleShader_vert__WEBPACK_IMPORTED_MODULE_16__["default"], _webgl_shaderity_shaders_ShadowMapDecodeClassicSingleShader_ShadowMapDecodeClassicSingleShader_frag__WEBPACK_IMPORTED_MODULE_17__["default"]);
        this.__encodedDepthRenderPass = encodedDepthRenderPass;
        const encodedDepthFramebuffer = encodedDepthRenderPass.getFramebuffer();
        if (encodedDepthFramebuffer == null) {
            console.error('encodedDepthRenderPass does not have framebuffer');
            return;
        }
        const encodedDepthTexture = encodedDepthFramebuffer.colorAttachments[colorAttachmentsNumber];
        const viewport = encodedDepthRenderPass.getViewport();
        viewport.setComponents(1, 1, viewport.z - 1, viewport.w - 1);
        encodedDepthRenderPass.setViewport(viewport);
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix44.zero(),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ShadingModel,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(_definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__.ShadingModel.Constant.index),
                min: 0,
                max: 3,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Shininess,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(5),
                min: 0,
                max: Number.MAX_VALUE,
            },
            {
                semantic: ShadowMapDecodeClassicMaterialContent.AllowableDepthError,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0001),
                min: 0,
                max: 1,
            },
            {
                semantic: ShadowMapDecodeClassicMaterialContent.ShadowColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([0.5, 0.5, 0.5, 1]),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([1, 1, 1, 1]),
                min: 0,
                max: 2,
            },
            {
                semantic: ShadowMapDecodeClassicMaterialContent.IsPointLight,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Wireframe,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0, 0, 1]),
                min: 0,
                max: 10,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlueTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DepthTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, encodedDepthTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [1, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: ShadowMapDecodeClassicMaterialContent.zNearInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.1),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: ShadowMapDecodeClassicMaterialContent.zFarInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(10000.0),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointSize,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(30.0),
            min: 0,
            max: 100,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointDistanceAttenuation,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
            min: 0,
            max: 1,
        });
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
        }
        if (isMorphing) {
            this.__definitions += '#define RN_IS_MORPHING\n';
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphTargetNumber,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0),
                min: 0,
                max: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DataTextureMorphOffsetPosition,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__.VectorN(new Int32Array(_core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphWeights,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__.VectorN(new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            });
        }
        if (isDebugging) {
            this.__definitions += '#define RN_IS_DEBUGGING\n';
            shaderSemanticsInfoArray.push({
                semantic: ShadowMapDecodeClassicMaterialContent.DebugColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([1, 0, 0, 1]),
                min: 0,
                max: 2,
            });
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_9__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__.CameraComponent.current);
        }
        const encodedDepthCameraComponent = this.__encodedDepthRenderPass
            .cameraComponent;
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            if (ShadowMapDecodeClassicMaterialContent.__lastZNear !==
                encodedDepthCameraComponent.zNearInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zNearInner, encodedDepthCameraComponent.zNearInner);
                ShadowMapDecodeClassicMaterialContent.__lastZNear =
                    encodedDepthCameraComponent.zNearInner;
            }
            if (ShadowMapDecodeClassicMaterialContent.__lastZFar !==
                encodedDepthCameraComponent.zFarInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zFarInner, encodedDepthCameraComponent.zFarInner);
                ShadowMapDecodeClassicMaterialContent.__lastZFar =
                    encodedDepthCameraComponent.zFarInner;
            }
            const __webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_14__.CGAPIResourceRepository.getWebGLResourceRepository();
            __webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix.str, true, this.__encodedDepthRenderPass.cameraComponent.viewProjectionMatrix);
        }
        else {
            material.setParameter(ShadowMapDecodeClassicMaterialContent.zNearInner, encodedDepthCameraComponent.zNearInner);
            material.setParameter(ShadowMapDecodeClassicMaterialContent.zFarInner, encodedDepthCameraComponent.zFarInner);
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix, this.__encodedDepthRenderPass.cameraComponent.viewProjectionMatrix);
        }
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        // Lights
        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
        // Morph
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
    }
}
ShadowMapDecodeClassicMaterialContent.ShadowColorFactor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'shadowColorFactor',
});
ShadowMapDecodeClassicMaterialContent.ShadowAlpha = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'shadowAlpha',
});
ShadowMapDecodeClassicMaterialContent.NonShadowAlpha = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'nonShadowAlpha',
});
ShadowMapDecodeClassicMaterialContent.AllowableDepthError = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'allowableDepthError',
});
ShadowMapDecodeClassicMaterialContent.zNearInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'zNearInner' });
ShadowMapDecodeClassicMaterialContent.zFarInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'zFarInner' });
ShadowMapDecodeClassicMaterialContent.DebugColorFactor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'debugColorFactor',
});
ShadowMapDecodeClassicMaterialContent.DepthTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'depthTexture',
});
ShadowMapDecodeClassicMaterialContent.IsPointLight = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'isPointLight' });
ShadowMapDecodeClassicMaterialContent.__lastZNear = 0.0;
ShadowMapDecodeClassicMaterialContent.__lastZFar = 0.0;


/***/ }),

/***/ "./src/foundation/materials/contents/SynthesizeHdrMaterialContent.ts":
/*!***************************************************************************!*\
  !*** ./src/foundation/materials/contents/SynthesizeHdrMaterialContent.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesizeHdrMaterialContent": () => (/* binding */ SynthesizeHdrMaterialContent)
/* harmony export */ });
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _webgl_shaderity_shaders_SynthesizeHDRTextureShader_SynthesizeHDRTextureShader_vert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.vert */ "./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_SynthesizeHDRTextureShader_SynthesizeHDRTextureShader_frag__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.frag */ "./src/webgl/shaderity_shaders/SynthesizeHDRTextureShader/SynthesizeHDRTextureShader.frag");












class SynthesizeHdrMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent {
    /**
     * This material node uses for the glare effect and so on.
     *
     * If the targetRegionTexture is not specified, the shader synthesizes all the
     * synthesizeTextures with all the pixels weighted by the synthesizeCoefficient.
     *
     * If the targetRegionTexture is specified, the shader synthesizes all the
     * synthesizeTextures with weights only for the non-white pixels of
     * targetRegionTexture (where the color is not (1.0, 1.0, 1.0, 1.0)). On the other
     * hand, in the white area, the output value is the product of the value of each
     * pixel in synthesizeTextures[0] and synthesizeCoefficient[0].
     *
     * @synthesizeTextures Textures to be synthesized. The shader supports up to six texture syntheses.
     * @targetRegionTexture Texture to specify the area where the texture will be synthesized
     */
    constructor(synthesizeTextures, targetRegionTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture) {
        var _a, _b, _c, _d, _e, _f;
        super(null, 'synthesizeHDRTextureShading', {}, _webgl_shaderity_shaders_SynthesizeHDRTextureShader_SynthesizeHDRTextureShader_vert__WEBPACK_IMPORTED_MODULE_10__["default"], _webgl_shaderity_shaders_SynthesizeHDRTextureShader_SynthesizeHDRTextureShader_frag__WEBPACK_IMPORTED_MODULE_11__["default"]);
        this.existTargetRegion = targetRegionTexture != null ? true : false;
        this.textureNumber = synthesizeTextures.length;
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemantics.FramebufferWidth,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_9__.Scalar.fromCopyNumber(synthesizeTextures[0].width),
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeCoefficient,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.ScalarArray,
                arrayLength: 6,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_8__.VectorN(new Float32Array(6)),
                min: 0,
                max: 1,
                needUniformInFastest: true,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture0,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    0,
                    (_a = synthesizeTextures[0]) !== null && _a !== void 0 ? _a : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture1,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    1,
                    (_b = synthesizeTextures[1]) !== null && _b !== void 0 ? _b : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture2,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    2,
                    (_c = synthesizeTextures[2]) !== null && _c !== void 0 ? _c : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture3,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    3,
                    (_d = synthesizeTextures[3]) !== null && _d !== void 0 ? _d : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    4,
                    (_e = synthesizeTextures[4]) !== null && _e !== void 0 ? _e : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.SynthesizeTexture5,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [
                    5,
                    (_f = synthesizeTextures[5]) !== null && _f !== void 0 ? _f : _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_7__.AbstractMaterialContent.dummyBlackTexture,
                ],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: SynthesizeHdrMaterialContent.TargetRegionTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_6__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [6, targetRegionTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
        }
        else {
            shaderProgram._gl.uniform1fv(shaderProgram.synthesizeCoefficient, material.getParameter(SynthesizeHdrMaterialContent.SynthesizeCoefficient)
                ._v);
        }
        /// Matrices
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_0__.CameraComponent.current);
        }
        if (cameraComponent) {
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
        }
    }
    get existTargetRegionTexture() {
        return this.existTargetRegion;
    }
    get synthesizeTextureNumber() {
        return this.textureNumber;
    }
}
SynthesizeHdrMaterialContent.SynthesizeCoefficient = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeCoefficient',
});
SynthesizeHdrMaterialContent.TargetRegionTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'targetRegionTexture',
});
SynthesizeHdrMaterialContent.SynthesizeTexture0 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture0',
});
SynthesizeHdrMaterialContent.SynthesizeTexture1 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture1',
});
SynthesizeHdrMaterialContent.SynthesizeTexture2 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture2',
});
SynthesizeHdrMaterialContent.SynthesizeTexture3 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture3',
});
SynthesizeHdrMaterialContent.SynthesizeTexture4 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture4',
});
SynthesizeHdrMaterialContent.SynthesizeTexture5 = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_4__.ShaderSemanticsClass({
    str: 'synthesizeTexture5',
});


/***/ }),

/***/ "./src/foundation/materials/contents/VarianceShadowMapDecodeClassicMaterialContent.ts":
/*!********************************************************************************************!*\
  !*** ./src/foundation/materials/contents/VarianceShadowMapDecodeClassicMaterialContent.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VarianceShadowMapDecodeClassicMaterialContent": () => (/* binding */ VarianceShadowMapDecodeClassicMaterialContent)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../definitions/ShadingModel */ "./src/foundation/definitions/ShadingModel.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _math_VectorN__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/VectorN */ "./src/foundation/math/VectorN.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _webgl_shaderity_shaders_VarianceShadowMapDecodeClassicShader_VarianceShadowMapDecodeClassicShader_vert__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.vert */ "./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.vert");
/* harmony import */ var _webgl_shaderity_shaders_VarianceShadowMapDecodeClassicShader_VarianceShadowMapDecodeClassicShader_frag__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.frag */ "./src/webgl/shaderity_shaders/VarianceShadowMapDecodeClassicShader/VarianceShadowMapDecodeClassicShader.frag");


















class VarianceShadowMapDecodeClassicMaterialContent extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    /**
     * The constructor of the VarianceShadowMapDecodeClassicMaterialContent
     * @param isMorphing True if the morphing is to be applied
     * @param isSkinning True if the skeleton is to be applied
     * @param isLighting True if the lighting is to be applied. When isLighting is false, the Shader draws the original color of the material, except for the shadow area.
     * @param isDebugging True if the shader displays the DebugColorFactor color in areas outside of the depth map.
     *
     *
     *
     *
     * @param colorAttachmentsNumber The index of colorAttachment in a framebuffer. The colorAttachment must have depth information drawn by the DepthEncodeMaterialContent.
     * @param encodedDepthRenderPass The render pass where the depth information from the DepthEncodeMaterialContent is drawn to the frame buffer
     */
    constructor({ isMorphing, isSkinning, isLighting, isDebugging, colorAttachmentsNumberDepth, colorAttachmentsNumberSquareDepth, depthCameraComponent, }, encodedDepthRenderPasses) {
        super(null, 'varianceShadowMapDecodeShading' +
            (isMorphing ? '+morphing' : '') +
            (isSkinning ? '+skinning' : '') +
            (isLighting ? '' : '-lighting') +
            (isDebugging ? '' : '+debugging'), { isMorphing, isSkinning, isLighting }, _webgl_shaderity_shaders_VarianceShadowMapDecodeClassicShader_VarianceShadowMapDecodeClassicShader_vert__WEBPACK_IMPORTED_MODULE_16__["default"], _webgl_shaderity_shaders_VarianceShadowMapDecodeClassicShader_VarianceShadowMapDecodeClassicShader_frag__WEBPACK_IMPORTED_MODULE_17__["default"]);
        if (encodedDepthRenderPasses.length !== 2) {
            console.error('invalid length of renderPasses');
        }
        if (depthCameraComponent == null) {
            console.warn('need to set depth camera component');
        }
        else {
            this.__depthCameraComponent = depthCameraComponent;
        }
        for (const encodedDepthRenderPass of encodedDepthRenderPasses) {
            const viewport = encodedDepthRenderPass.getViewport();
            viewport.setComponents(1, 1, viewport.z - 1, viewport.w - 1);
            encodedDepthRenderPass.setViewport(viewport);
        }
        let depthTexture;
        const depthFramebuffer = encodedDepthRenderPasses[0].getFramebuffer();
        if (depthFramebuffer) {
            depthTexture =
                depthFramebuffer.colorAttachments[colorAttachmentsNumberDepth];
        }
        else {
            console.warn('renderPass of depth does not have framebuffer');
            depthTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackTexture;
        }
        let squareDepthTexture;
        const squareDepthFramebuffer = encodedDepthRenderPasses[1].getFramebuffer();
        if (squareDepthFramebuffer) {
            squareDepthTexture =
                squareDepthFramebuffer.colorAttachments[colorAttachmentsNumberSquareDepth];
        }
        else {
            console.warn('renderPass of square depth does not have framebuffer');
            squareDepthTexture = _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlackTexture;
        }
        const shaderSemanticsInfoArray = [
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_15__.MutableMatrix44.zero(),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.ShadingModel,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(_definitions_ShadingModel__WEBPACK_IMPORTED_MODULE_6__.ShadingModel.Constant.index),
                min: 0,
                max: 3,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Shininess,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(5),
                min: 0,
                max: Number.MAX_VALUE,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.AllowableDepthError,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0001),
                min: 0,
                max: 1,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.ShadowColor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([0.5, 0.5, 0.5, 1]),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([1, 1, 1, 1]),
                min: 0,
                max: 2,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.zNearInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.1),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.zFarInner,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: true,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(10000.0),
                min: 0.0001,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.IsPointLight,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(1),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.Wireframe,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0, 0, 1]),
                min: 0,
                max: 10,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.DepthAdjustment,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0),
                min: 0,
                max: 1,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.LightBleedingParameter,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0),
                min: 0,
                max: 1,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.MinimumVariance,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0000001),
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.TextureDepthAdjustment,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                soloDatum: false,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0.0),
                min: 0,
                max: 1,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.NormalTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [0, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyBlueTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DiffuseColorTexture,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [1, _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent.__dummyWhiteTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.DepthTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [2, depthTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
            {
                semantic: VarianceShadowMapDecodeClassicMaterialContent.SquareDepthTexture,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime,
                initialValue: [3, squareDepthTexture],
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        // point cloud
        shaderSemanticsInfoArray.push({
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointSize,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(30.0),
            min: 0,
            max: 100,
        }, {
            semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.PointDistanceAttenuation,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3,
            stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
            isCustomSetting: false,
            updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
            soloDatum: true,
            initialValue: _math_Vector3__WEBPACK_IMPORTED_MODULE_5__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
            min: 0,
            max: 1,
        });
        if (isSkinning) {
            this.__definitions += '#define RN_IS_SKINNING\n';
        }
        if (isLighting) {
            this.__definitions += '#define RN_IS_LIGHTING\n';
        }
        if (isMorphing) {
            this.__definitions += '#define RN_IS_MORPHING\n';
            shaderSemanticsInfoArray.push({
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphTargetNumber,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: _math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(0),
                min: 0,
                max: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.DataTextureMorphOffsetPosition,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__.VectorN(new Int32Array(_core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            }, {
                semantic: _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.MorphWeights,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.ScalarArray,
                arrayLength: _core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.VertexShader,
                isCustomSetting: true,
                soloDatum: true,
                initialValue: new _math_VectorN__WEBPACK_IMPORTED_MODULE_11__.VectorN(new Float32Array(_core_Config__WEBPACK_IMPORTED_MODULE_13__.Config.maxVertexMorphNumberInShader)),
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                needUniformInFastest: true,
            });
        }
        if (isDebugging) {
            this.__definitions += '#define RN_IS_DEBUGGING\n';
            shaderSemanticsInfoArray.push({
                semantic: VarianceShadowMapDecodeClassicMaterialContent.DebugColorFactor,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_7__.ShaderType.PixelShader,
                isCustomSetting: false,
                updateInterval: _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly,
                soloDatum: false,
                initialValue: _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([1, 0, 0, 1]),
                min: 0,
                max: 2,
            });
        }
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        var _a;
        let cameraComponent = args.renderPass.cameraComponent;
        if (cameraComponent == null) {
            cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_9__.ComponentRepository.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__.CameraComponent, _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_10__.CameraComponent.current);
        }
        const encodedDepthCameraComponent = (_a = this.__depthCameraComponent) !== null && _a !== void 0 ? _a : args.renderPass.cameraComponent;
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            if (VarianceShadowMapDecodeClassicMaterialContent.__lastZNear !==
                encodedDepthCameraComponent.zNearInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zNearInner, encodedDepthCameraComponent.zNearInner);
                VarianceShadowMapDecodeClassicMaterialContent.__lastZNear =
                    encodedDepthCameraComponent.zNearInner;
            }
            if (VarianceShadowMapDecodeClassicMaterialContent.__lastZFar !==
                encodedDepthCameraComponent.zFarInner) {
                shaderProgram._gl.uniform1f(shaderProgram.zFarInner, encodedDepthCameraComponent.zFarInner);
                VarianceShadowMapDecodeClassicMaterialContent.__lastZFar =
                    encodedDepthCameraComponent.zFarInner;
            }
            const __webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_14__.CGAPIResourceRepository.getWebGLResourceRepository();
            __webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix.str, true, encodedDepthCameraComponent.viewProjectionMatrix);
        }
        else {
            material.setParameter(VarianceShadowMapDecodeClassicMaterialContent.zNearInner, encodedDepthCameraComponent.zNearInner);
            material.setParameter(VarianceShadowMapDecodeClassicMaterialContent.zFarInner, encodedDepthCameraComponent.zFarInner);
            material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix, encodedDepthCameraComponent.viewProjectionMatrix);
        }
        /// Skinning
        const skeletalComponent = args.entity.tryToGetSkeletal();
        this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
        // Lights
        this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
        // Morph
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
        const __webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_14__.CGAPIResourceRepository.getWebGLResourceRepository();
        __webglResourceRepository.setUniformValue(shaderProgram, _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics.LightViewProjectionMatrix.str, true, encodedDepthCameraComponent.viewProjectionMatrix);
    }
    set depthCameraComponent(depthCameraComponent) {
        this.__depthCameraComponent = depthCameraComponent;
    }
}
VarianceShadowMapDecodeClassicMaterialContent.IsPointLight = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'isPointLight' });
VarianceShadowMapDecodeClassicMaterialContent.DepthTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'depthTexture' });
VarianceShadowMapDecodeClassicMaterialContent.SquareDepthTexture = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'squareDepthTexture',
});
VarianceShadowMapDecodeClassicMaterialContent.DepthAdjustment = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'depthAdjustment' });
VarianceShadowMapDecodeClassicMaterialContent.TextureDepthAdjustment = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'textureDepthAdjustment',
});
VarianceShadowMapDecodeClassicMaterialContent.MinimumVariance = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'minimumVariance' });
VarianceShadowMapDecodeClassicMaterialContent.LightBleedingParameter = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'lightBleedingParameter',
});
VarianceShadowMapDecodeClassicMaterialContent.ShadowColor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'shadowColor' });
VarianceShadowMapDecodeClassicMaterialContent.AllowableDepthError = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'allowableDepthError',
});
VarianceShadowMapDecodeClassicMaterialContent.zNearInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'zNearInner' });
VarianceShadowMapDecodeClassicMaterialContent.zFarInner = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({ str: 'zFarInner' });
VarianceShadowMapDecodeClassicMaterialContent.DebugColorFactor = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
    str: 'debugColorFactor',
});
VarianceShadowMapDecodeClassicMaterialContent.__lastZNear = 0.0;
VarianceShadowMapDecodeClassicMaterialContent.__lastZFar = 0.0;


/***/ }),

/***/ "./src/foundation/materials/contents/index.ts":
/*!****************************************************!*\
  !*** ./src/foundation/materials/contents/index.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColorGradingUsingLUTsMaterialContent": () => (/* reexport safe */ _ColorGradingUsingLUTsMaterialContent__WEBPACK_IMPORTED_MODULE_0__.ColorGradingUsingLUTsMaterialContent),
/* harmony export */   "CustomMaterialContent": () => (/* reexport safe */ _CustomMaterialContent__WEBPACK_IMPORTED_MODULE_1__.CustomMaterialContent),
/* harmony export */   "DepthEncodeMaterialContent": () => (/* reexport safe */ _DepthEncodeMaterialContent__WEBPACK_IMPORTED_MODULE_2__.DepthEncodeMaterialContent),
/* harmony export */   "DetectHighLuminanceMaterialContent": () => (/* reexport safe */ _DetectHighLuminanceMaterialContent__WEBPACK_IMPORTED_MODULE_3__.DetectHighLuminanceMaterialContent),
/* harmony export */   "EntityUIDOutputMaterialContent": () => (/* reexport safe */ _EntityUIDOutputMaterialContent__WEBPACK_IMPORTED_MODULE_4__.EntityUIDOutputMaterialContent),
/* harmony export */   "EnvConstantMaterialContent": () => (/* reexport safe */ _EnvConstantMaterialContent__WEBPACK_IMPORTED_MODULE_5__.EnvConstantMaterialContent),
/* harmony export */   "FurnaceTestMaterialContent": () => (/* reexport safe */ _FurnaceTestMaterialContent__WEBPACK_IMPORTED_MODULE_6__.FurnaceTestMaterialContent),
/* harmony export */   "GammaCorrectionMaterialContent": () => (/* reexport safe */ _GammaCorrectionMaterialContent__WEBPACK_IMPORTED_MODULE_7__.GammaCorrectionMaterialContent),
/* harmony export */   "GaussianBlurForEncodedDepthMaterialContent": () => (/* reexport safe */ _GaussianBlurForEncodedDepthMaterialContent__WEBPACK_IMPORTED_MODULE_8__.GaussianBlurForEncodedDepthMaterialContent),
/* harmony export */   "GaussianBlurMaterialContent": () => (/* reexport safe */ _GaussianBlurMaterialContent__WEBPACK_IMPORTED_MODULE_9__.GaussianBlurMaterialContent),
/* harmony export */   "MToonMaterialContent": () => (/* reexport safe */ _MToonMaterialContent__WEBPACK_IMPORTED_MODULE_10__.MToonMaterialContent),
/* harmony export */   "MatCapMaterialContent": () => (/* reexport safe */ _MatCapMaterialContent__WEBPACK_IMPORTED_MODULE_11__.MatCapMaterialContent),
/* harmony export */   "PbrExtendedShadingMaterialContent": () => (/* reexport safe */ _PbrExtendedShadingMaterialContent__WEBPACK_IMPORTED_MODULE_12__.PbrExtendedShadingMaterialContent),
/* harmony export */   "PbrShadingMaterialContent": () => (/* reexport safe */ _PbrShadingMaterialContent__WEBPACK_IMPORTED_MODULE_13__.PbrShadingMaterialContent),
/* harmony export */   "ShaderityMaterialContent": () => (/* reexport safe */ _ShaderityMaterialContent__WEBPACK_IMPORTED_MODULE_14__.ShaderityMaterialContent),
/* harmony export */   "ShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _ShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_15__.ShadowMapDecodeClassicMaterialContent),
/* harmony export */   "SynthesizeHdrMaterialContent": () => (/* reexport safe */ _SynthesizeHdrMaterialContent__WEBPACK_IMPORTED_MODULE_16__.SynthesizeHdrMaterialContent),
/* harmony export */   "VarianceShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _VarianceShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_17__.VarianceShadowMapDecodeClassicMaterialContent)
/* harmony export */ });
/* harmony import */ var _ColorGradingUsingLUTsMaterialContent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ColorGradingUsingLUTsMaterialContent */ "./src/foundation/materials/contents/ColorGradingUsingLUTsMaterialContent.ts");
/* harmony import */ var _CustomMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CustomMaterialContent */ "./src/foundation/materials/contents/CustomMaterialContent.ts");
/* harmony import */ var _DepthEncodeMaterialContent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DepthEncodeMaterialContent */ "./src/foundation/materials/contents/DepthEncodeMaterialContent.ts");
/* harmony import */ var _DetectHighLuminanceMaterialContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DetectHighLuminanceMaterialContent */ "./src/foundation/materials/contents/DetectHighLuminanceMaterialContent.ts");
/* harmony import */ var _EntityUIDOutputMaterialContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EntityUIDOutputMaterialContent */ "./src/foundation/materials/contents/EntityUIDOutputMaterialContent.ts");
/* harmony import */ var _EnvConstantMaterialContent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EnvConstantMaterialContent */ "./src/foundation/materials/contents/EnvConstantMaterialContent.ts");
/* harmony import */ var _FurnaceTestMaterialContent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./FurnaceTestMaterialContent */ "./src/foundation/materials/contents/FurnaceTestMaterialContent.ts");
/* harmony import */ var _GammaCorrectionMaterialContent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GammaCorrectionMaterialContent */ "./src/foundation/materials/contents/GammaCorrectionMaterialContent.ts");
/* harmony import */ var _GaussianBlurForEncodedDepthMaterialContent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./GaussianBlurForEncodedDepthMaterialContent */ "./src/foundation/materials/contents/GaussianBlurForEncodedDepthMaterialContent.ts");
/* harmony import */ var _GaussianBlurMaterialContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./GaussianBlurMaterialContent */ "./src/foundation/materials/contents/GaussianBlurMaterialContent.ts");
/* harmony import */ var _MToonMaterialContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MToonMaterialContent */ "./src/foundation/materials/contents/MToonMaterialContent.ts");
/* harmony import */ var _MatCapMaterialContent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MatCapMaterialContent */ "./src/foundation/materials/contents/MatCapMaterialContent.ts");
/* harmony import */ var _PbrExtendedShadingMaterialContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./PbrExtendedShadingMaterialContent */ "./src/foundation/materials/contents/PbrExtendedShadingMaterialContent.ts");
/* harmony import */ var _PbrShadingMaterialContent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./PbrShadingMaterialContent */ "./src/foundation/materials/contents/PbrShadingMaterialContent.ts");
/* harmony import */ var _ShaderityMaterialContent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ShaderityMaterialContent */ "./src/foundation/materials/contents/ShaderityMaterialContent.ts");
/* harmony import */ var _ShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./ShadowMapDecodeClassicMaterialContent */ "./src/foundation/materials/contents/ShadowMapDecodeClassicMaterialContent.ts");
/* harmony import */ var _SynthesizeHdrMaterialContent__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SynthesizeHdrMaterialContent */ "./src/foundation/materials/contents/SynthesizeHdrMaterialContent.ts");
/* harmony import */ var _VarianceShadowMapDecodeClassicMaterialContent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./VarianceShadowMapDecodeClassicMaterialContent */ "./src/foundation/materials/contents/VarianceShadowMapDecodeClassicMaterialContent.ts");




















/***/ }),

/***/ "./src/foundation/materials/core/AbstractMaterialContent.ts":
/*!******************************************************************!*\
  !*** ./src/foundation/materials/core/AbstractMaterialContent.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractMaterialContent": () => (/* binding */ AbstractMaterialContent)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _textures_Texture__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../textures/Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../textures/CubeTexture */ "./src/foundation/textures/CubeTexture.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../math/MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../definitions/BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");
/* harmony import */ var _system_SystemState__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../system/SystemState */ "./src/foundation/system/SystemState.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
















class AbstractMaterialContent extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor(shader, shaderFunctionName, { isMorphing = false, isSkinning = false, isLighting = false } = {}, vertexShaderityObject, pixelShaderityObject) {
        super();
        this.__semantics = [];
        this.__vertexInputs = [];
        this.__pixelInputs = [];
        this.__vertexOutputs = [];
        this.__pixelOutputs = [];
        this.__defaultInputValues = new Map();
        this.__vertexInputConnections = [];
        this.__pixelInputConnections = [];
        this.isSingleOperation = false;
        this.__definitions = '';
        this.shaderType = _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_13__.ShaderType.VertexAndPixelShader;
        this.__shaderFunctionName = shaderFunctionName;
        this.__materialNodeUid =
            ++AbstractMaterialContent.__invalidMaterialNodeCount;
        AbstractMaterialContent.materialNodes[AbstractMaterialContent.__invalidMaterialNodeCount] = this;
        this.__isMorphing = isMorphing;
        this.__isSkinning = isSkinning;
        this.__isLighting = isLighting;
        AbstractMaterialContent.__dummyBlackTexture.tryToSetUniqueName('dummyBlackTexture', true);
        AbstractMaterialContent.__dummyWhiteTexture.tryToSetUniqueName('dummyWhiteTexture', true);
        AbstractMaterialContent.__dummyBlueTexture.tryToSetUniqueName('dummyBlueTexture', true);
        AbstractMaterialContent.__dummyBlackCubeTexture.tryToSetUniqueName('dummyBlackCubeTexture', true);
        AbstractMaterialContent.__dummySRGBGrayTexture.tryToSetUniqueName('dummySRGBGrayTexture', true);
        AbstractMaterialContent.__dummyPbrKelemenSzirmayKalosBrdfLutTexture.tryToSetUniqueName('dummyPbrKelemenSzirmayKalosBrdfLutTexture', true);
        this.__vertexShaderityObject = vertexShaderityObject;
        this.__pixelShaderityObject = pixelShaderityObject;
        this.__webglResourceRepository =
            _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.__definitions += `#define RN_MATERIAL_NODE_NAME ${shaderFunctionName}\n`;
    }
    get shaderFunctionName() {
        return this.__shaderFunctionName;
    }
    get vertexShaderityObject() {
        return this.__vertexShaderityObject;
    }
    get pixelShaderityObject() {
        return this.__pixelShaderityObject;
    }
    get definitions() {
        return this.__definitions;
    }
    static getMaterialNode(materialNodeUid) {
        return AbstractMaterialContent.materialNodes[materialNodeUid];
    }
    get materialNodeUid() {
        return this.__materialNodeUid;
    }
    get _semanticsInfoArray() {
        return this.__semantics;
    }
    get isSkinning() {
        return this.__isSkinning;
    }
    get isMorphing() {
        return this.__isMorphing;
    }
    get isLighting() {
        return this.__isLighting;
    }
    setShaderSemanticsInfoArray(shaderSemanticsInfoArray) {
        const infoArray = [];
        for (const info of shaderSemanticsInfoArray) {
            infoArray.push(info);
        }
        this.__semantics = infoArray;
        if (!AbstractMaterialContent.__semanticsMap.has(this.shaderFunctionName)) {
            AbstractMaterialContent.__semanticsMap.set(this.shaderFunctionName, new Map());
        }
        const map = AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName);
        for (const semantic of this.__semantics) {
            map.set(semantic.semantic.str, semantic);
        }
    }
    getShaderSemanticInfoFromName(name) {
        const map = AbstractMaterialContent.__semanticsMap.get(this.shaderFunctionName);
        return map.get(name);
    }
    addVertexInputConnection(inputMaterialNode, outputNameOfPrev, inputNameOfThis) {
        this.__vertexInputConnections.push({
            materialNodeUid: inputMaterialNode.materialNodeUid,
            outputNameOfPrev: outputNameOfPrev,
            inputNameOfThis: inputNameOfThis,
        });
    }
    addPixelInputConnection(inputMaterialNode, outputNameOfPrev, inputNameOfThis) {
        this.__pixelInputConnections.push({
            materialNodeUid: inputMaterialNode.materialNodeUid,
            outputNameOfPrev: outputNameOfPrev,
            inputNameOfThis: inputNameOfThis,
        });
    }
    get vertexInputConnections() {
        return this.__vertexInputConnections;
    }
    get pixelInputConnections() {
        return this.__pixelInputConnections;
    }
    getVertexInput(name) {
        for (const input of this.__vertexInputs) {
            if (input.name === name) {
                return input;
            }
        }
        return void 0;
    }
    getVertexInputs() {
        return this.__vertexInputs;
    }
    getVertexOutput(name) {
        for (const output of this.__vertexOutputs) {
            if (output.name === name) {
                return output;
            }
        }
        return void 0;
    }
    getVertexOutputs() {
        return this.__vertexOutputs;
    }
    getPixelInput(name) {
        for (const input of this.__pixelInputs) {
            if (input.name === name) {
                return input;
            }
        }
        return void 0;
    }
    getPixelInputs() {
        return this.__pixelInputs;
    }
    getPixelOutput(name) {
        for (const output of this.__pixelOutputs) {
            if (output.name === name) {
                return output;
            }
        }
        return void 0;
    }
    getPixelOutputs() {
        return this.__pixelOutputs;
    }
    static initDefaultTextures() {
        if (this.__dummyWhiteTexture.isTextureReady) {
            return;
        }
        this.__dummyWhiteTexture.generate1x1TextureFrom();
        this.__dummyBlueTexture.generate1x1TextureFrom('rgba(127.5, 127.5, 255, 1)');
        this.__dummyBlackTexture.generate1x1TextureFrom('rgba(0, 0, 0, 1)');
        this.__dummyBlackCubeTexture.load1x1Texture('rgba(0, 0, 0, 1)');
        this.__dummySRGBGrayTexture.generate1x1TextureFrom('rgba(186, 186, 186, 1)');
        const moduleName = 'pbr';
        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__.ModuleManager.getInstance();
        const pbrModule = moduleManager.getModule(moduleName);
        this.__dummyPbrKelemenSzirmayKalosBrdfLutTexture.generateTextureFromUri(pbrModule.pbrKelemenSzirmayKalosBrdfLutDataUrl);
    }
    static get dummyWhiteTexture() {
        return this.__dummyWhiteTexture;
    }
    static get dummyBlackTexture() {
        return this.__dummyBlackTexture;
    }
    static get dummyBlueTexture() {
        return this.__dummyBlueTexture;
    }
    static get dummyBlackCubeTexture() {
        return this.__dummyWhiteTexture;
    }
    static get dummyPbrKelemenSzirmayKalosBrdfLutTexture() {
        return this.__dummyPbrKelemenSzirmayKalosBrdfLutTexture;
    }
    setupBasicInfo(args, shaderProgram, firstTime, material, CameraComponentClass) {
        if (args.setUniform) {
            this.setWorldMatrix(shaderProgram, args.worldMatrix);
            this.setNormalMatrix(shaderProgram, args.normalMatrix);
            if (firstTime || args.isVr) {
                let cameraComponent = args.renderPass.cameraComponent;
                if (cameraComponent == null) {
                    cameraComponent = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_15__.ComponentRepository.getComponent(CameraComponentClass, CameraComponentClass.current);
                }
                this.setViewInfo(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
                this.setProjection(shaderProgram, cameraComponent, args.isVr, args.displayIdx);
            }
            if (firstTime) {
                // Lights
                this.setLightsInfo(shaderProgram, args.lightComponents, material, args.setUniform);
                /// Skinning
                const skeletalComponent = args.entity.tryToGetSkeletal();
                this.setSkinning(shaderProgram, args.setUniform, skeletalComponent);
            }
        }
        // Morph
        const blendShapeComponent = args.entity.tryToGetBlendShape();
        this.setMorphInfo(shaderProgram, args.entity.getMesh(), args.primitive, blendShapeComponent);
    }
    setWorldMatrix(shaderProgram, worldMatrix) {
        shaderProgram._gl.uniformMatrix4fv(shaderProgram.worldMatrix, false, worldMatrix._v);
    }
    setNormalMatrix(shaderProgram, normalMatrix) {
        shaderProgram._gl.uniformMatrix3fv(shaderProgram.normalMatrix, false, normalMatrix._v);
    }
    setViewInfo(shaderProgram, cameraComponent, isVr, displayIdx) {
        let viewMatrix;
        let cameraPosition;
        if (isVr) {
            const rnXRModule = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__.ModuleManager.getInstance().getModule('xr');
            const webxrSystem = rnXRModule.WebXRSystem.getInstance();
            if (webxrSystem.isWebXRMode) {
                viewMatrix = webxrSystem._getViewMatrixAt(displayIdx);
                cameraPosition = webxrSystem._getCameraWorldPositionAt(displayIdx);
            }
        }
        else if (cameraComponent) {
            cameraPosition = cameraComponent.worldPosition;
            viewMatrix = cameraComponent.viewMatrix;
        }
        else {
            viewMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.identity();
            cameraPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_7__.Vector3.fromCopyArray([0, 0, 10]);
        }
        shaderProgram._gl.uniformMatrix4fv(shaderProgram.viewMatrix, false, viewMatrix._v);
        shaderProgram._gl.uniform3fv(shaderProgram.viewPosition, cameraPosition._v);
    }
    setProjection(shaderProgram, cameraComponent, isVr, displayIdx) {
        let projectionMatrix;
        if (isVr) {
            const rnXRModule = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_14__.ModuleManager.getInstance().getModule('xr');
            const webxrSystem = rnXRModule.WebXRSystem.getInstance();
            if (webxrSystem.isWebXRMode) {
                projectionMatrix = webxrSystem._getProjectMatrixAt(displayIdx);
            }
        }
        else if (cameraComponent) {
            projectionMatrix = cameraComponent.projectionMatrix;
        }
        else {
            projectionMatrix = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix44.identity();
        }
        shaderProgram._gl.uniformMatrix4fv(shaderProgram.projectionMatrix, false, projectionMatrix._v);
    }
    setSkinning(shaderProgram, setUniform, skeletalComponent) {
        if (!this.__isSkinning) {
            return;
        }
        if (skeletalComponent) {
            if (setUniform) {
                if (_core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_11__.BoneDataType.Mat44x1) {
                    const jointMatricesArray = skeletalComponent.jointMatricesArray;
                    shaderProgram._gl.uniformMatrix4fv(shaderProgram.boneMatrix, false, jointMatricesArray);
                }
                else if (_core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_11__.BoneDataType.Vec4x2) {
                    const jointTranslatePackedQuat = skeletalComponent.jointTranslatePackedQuat;
                    const jointScalePackedQuat = skeletalComponent.jointScalePackedQuat;
                    shaderProgram._gl.uniform4fv(shaderProgram.boneTranslatePackedQuat, jointTranslatePackedQuat);
                    shaderProgram._gl.uniform4fv(shaderProgram.boneScalePackedQuat, jointScalePackedQuat);
                }
                else if (_core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_11__.BoneDataType.Vec4x2Old) {
                    const jointQuaternionArray = skeletalComponent.jointQuaternionArray;
                    const jointTranslateScaleArray = skeletalComponent.jointTranslateScaleArray;
                    shaderProgram._gl.uniform4fv(shaderProgram.boneQuaternion, jointQuaternionArray);
                    shaderProgram._gl.uniform4fv(shaderProgram.boneTranslateScale, jointTranslateScaleArray);
                }
                else if (_core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_11__.BoneDataType.Vec4x1) {
                    const jointCompressedChunk = skeletalComponent.jointCompressedChunk;
                    const jointCompressedInfo = skeletalComponent.jointCompressedInfo;
                    shaderProgram._gl.uniform4fv(shaderProgram.boneCompressedChunk, jointCompressedChunk);
                    shaderProgram._gl.uniform4fv(shaderProgram.boneCompressedInfo, jointCompressedInfo._v);
                }
                shaderProgram._gl.uniform1i(shaderProgram.skinningMode, skeletalComponent.componentSID);
            }
        }
        else {
            if (setUniform) {
                shaderProgram._gl.uniform1i(shaderProgram.skinningMode, -1);
            }
        }
    }
    setLightsInfo(shaderProgram, lightComponents, material, setUniform) {
        if (!this.__isLighting) {
            return;
        }
        if (setUniform) {
            const lightComponentsEnabled = lightComponents.filter(lightComponent => lightComponent.enable);
            shaderProgram._gl.uniform1i(shaderProgram.lightNumber, lightComponentsEnabled.length);
            const length = Math.min(lightComponentsEnabled.length, _core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.maxLightNumberInShader);
            if (AbstractMaterialContent.__lightPositions.length !== 4 * length) {
                AbstractMaterialContent.__lightPositions = new Float32Array(4 * length);
                AbstractMaterialContent.__lightDirections = new Float32Array(4 * length);
                AbstractMaterialContent.__lightIntensities = new Float32Array(4 * length);
            }
            for (let i = 0; i < lightComponentsEnabled.length; i++) {
                if (i >= _core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.maxLightNumberInShader) {
                    break;
                }
                if (shaderProgram.lightPosition == null) {
                    break;
                }
                const lightComponent = lightComponentsEnabled[i];
                const sceneGraphComponent = lightComponent.entity.getSceneGraph();
                const worldLightPosition = sceneGraphComponent.worldPosition;
                const worldLightDirection = lightComponent.direction;
                const worldLightIntensity = lightComponent.intensity;
                AbstractMaterialContent.__lightPositions[i * 4 + 0] =
                    worldLightPosition.x;
                AbstractMaterialContent.__lightPositions[i * 4 + 1] =
                    worldLightPosition.y;
                AbstractMaterialContent.__lightPositions[i * 4 + 2] =
                    worldLightPosition.z;
                AbstractMaterialContent.__lightPositions[i * 4 + 3] =
                    lightComponent.enable ? lightComponent.type.index : -1;
                const lightAngleScale = 1.0 /
                    Math.max(0.001, Math.cos(lightComponent.innerConeAngle) -
                        Math.cos(lightComponent.outerConeAngle));
                const lightAngleOffset = -Math.cos(lightComponent.outerConeAngle) * lightAngleScale;
                AbstractMaterialContent.__lightDirections[i * 4 + 0] =
                    worldLightDirection.x;
                AbstractMaterialContent.__lightDirections[i * 4 + 1] =
                    worldLightDirection.y;
                AbstractMaterialContent.__lightDirections[i * 4 + 2] =
                    worldLightDirection.z;
                AbstractMaterialContent.__lightDirections[i * 4 + 3] = lightAngleScale;
                AbstractMaterialContent.__lightIntensities[i * 4 + 0] =
                    worldLightIntensity.x;
                AbstractMaterialContent.__lightIntensities[i * 4 + 1] =
                    worldLightIntensity.y;
                AbstractMaterialContent.__lightIntensities[i * 4 + 2] =
                    worldLightIntensity.z;
                AbstractMaterialContent.__lightIntensities[i * 4 + 3] =
                    lightAngleOffset;
            }
            if (length > 0) {
                shaderProgram._gl.uniform4fv(shaderProgram.lightPosition, AbstractMaterialContent.__lightPositions);
                shaderProgram._gl.uniform4fv(shaderProgram.lightDirection, AbstractMaterialContent.__lightDirections);
                shaderProgram._gl.uniform4fv(shaderProgram.lightIntensity, AbstractMaterialContent.__lightIntensities);
            }
        }
    }
    setMorphInfo(shaderProgram, meshComponent, primitive, blendShapeComponent) {
        if (!this.__isMorphing) {
            return;
        }
        if (primitive.targets.length === 0) {
            shaderProgram._gl.uniform1i(shaderProgram.morphTargetNumber, 0);
            return;
        }
        shaderProgram._gl.uniform1i(shaderProgram.morphTargetNumber, primitive.targets.length);
        const dataTextureMorphOffsetPositionOfTargets = primitive.targets.map((target) => {
            const accessor = target.get(_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_9__.VertexAttribute.Position.XYZ);
            let offset = 0;
            if (_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_10__.ProcessApproach.isFastestApproach(_system_SystemState__WEBPACK_IMPORTED_MODULE_12__["default"].currentProcessApproach)) {
                offset = _core_Config__WEBPACK_IMPORTED_MODULE_4__.Config.totalSizeOfGPUShaderDataStorageExceptMorphData;
            }
            return (offset + accessor.byteOffsetInBuffer) / 4 / 4;
        });
        shaderProgram._gl.uniform1iv(shaderProgram.dataTextureMorphOffsetPosition, dataTextureMorphOffsetPositionOfTargets);
        let weights;
        if (meshComponent.mesh.weights.length > 0) {
            weights = meshComponent.mesh.weights;
        }
        else if (blendShapeComponent.weights.length > 0) {
            weights = blendShapeComponent.weights;
        }
        else {
            weights = new Float32Array(primitive.targets.length);
        }
        shaderProgram._gl.uniform1fv(shaderProgram.morphWeights, weights);
    }
    setCustomSettingParametersToGpu({ material, shaderProgram, firstTime, args, }) { }
    setDefaultInputValue(inputName, value) {
        this.__defaultInputValues.set(inputName, value);
    }
}
AbstractMaterialContent.__semanticsMap = new Map();
AbstractMaterialContent.__invalidMaterialNodeUid = -1;
AbstractMaterialContent.__invalidMaterialNodeCount = -1;
AbstractMaterialContent.materialNodes = [];
AbstractMaterialContent.__dummyWhiteTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_2__.Texture();
AbstractMaterialContent.__dummyBlueTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_2__.Texture();
AbstractMaterialContent.__dummyBlackTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_2__.Texture();
AbstractMaterialContent.__dummyPbrKelemenSzirmayKalosBrdfLutTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_2__.Texture();
AbstractMaterialContent.__dummySRGBGrayTexture = new _textures_Texture__WEBPACK_IMPORTED_MODULE_2__.Texture();
AbstractMaterialContent.__dummyBlackCubeTexture = new _textures_CubeTexture__WEBPACK_IMPORTED_MODULE_3__.CubeTexture();
AbstractMaterialContent.__tmp_vector4 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__.MutableVector4.zero();
AbstractMaterialContent.__tmp_vector2 = _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__.MutableVector2.zero();
AbstractMaterialContent.__lightPositions = new Float32Array(0);
AbstractMaterialContent.__lightDirections = new Float32Array(0);
AbstractMaterialContent.__lightIntensities = new Float32Array(0);


/***/ }),

/***/ "./src/foundation/materials/core/AbstractShaderNode.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/materials/core/AbstractShaderNode.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractShaderNode": () => (/* binding */ AbstractShaderNode)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/RnObject */ "./src/foundation/core/RnObject.ts");

class AbstractShaderNode extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor(shaderNodeName, shaderCode, shader) {
        super();
        this.__inputs = [];
        this.__outputs = [];
        this.__inputConnections = [];
        this.__shaderFunctionName = shaderNodeName;
        this.__shaderCode = shaderCode;
        this.__shaderNodeUid = ++AbstractShaderNode.__invalidShaderNodeCount;
        AbstractShaderNode.shaderNodes[AbstractShaderNode.__invalidShaderNodeCount] = this;
        this.__shader = shader;
    }
    get shaderFunctionName() {
        return this.__shaderFunctionName;
    }
    get shaderCode() {
        return this.__shaderCode;
    }
    get shaderNodeUid() {
        return this.__shaderNodeUid;
    }
    getInput(name) {
        for (const input of this.__inputs) {
            if (input.name === name) {
                return input;
            }
        }
        return void 0;
    }
    getInputs() {
        return this.__inputs;
    }
    getOutput(name) {
        for (const output of this.__outputs) {
            if (output.name === name) {
                return output;
            }
        }
        return void 0;
    }
    getOutputs() {
        return this.__outputs;
    }
    addInputConnection(inputShaderNode, outputNameOfPrev, inputNameOfThis) {
        this.__inputConnections.push({
            shaderNodeUid: inputShaderNode.shaderNodeUid,
            outputNameOfPrev: outputNameOfPrev,
            inputNameOfThis: inputNameOfThis,
        });
    }
    get inputConnections() {
        return this.__inputConnections;
    }
    get shader() {
        return this.__shader;
    }
}
AbstractShaderNode.shaderNodes = [];
AbstractShaderNode.__invalidShaderNodeUid = -1;
AbstractShaderNode.__invalidShaderNodeCount = -1;


/***/ }),

/***/ "./src/foundation/materials/core/Material.ts":
/*!***************************************************!*\
  !*** ./src/foundation/materials/core/Material.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Material": () => (/* binding */ Material)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../math/MathClassUtil */ "./src/foundation/math/MathClassUtil.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../system/System */ "./src/foundation/system/System.ts");
/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../definitions/BoneDataType */ "./src/foundation/definitions/BoneDataType.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ShaderityUtility */ "./src/foundation/materials/core/ShaderityUtility.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../types */ "./src/types/index.ts");




















/**
 * The material class.
 * This class has one or more material nodes.
 */
class Material extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor(materialTid, materialTypeName, materialNode) {
        super();
        this.__allFieldVariables = new Map();
        this.__autoFieldVariablesOnly = new Map();
        this.__allFieldsInfo = new Map();
        this.__belongPrimitives = new Map();
        // Ids
        this._shaderProgramUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__materialUid = -1;
        this.__materialSid = -1;
        // Rendering States
        this.__alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Opaque;
        this.cullFace = true; // If true, enable gl.CULL_FACE
        this.cullFrontFaceCCW = true;
        this.__alphaToCoverage = false;
        this.__blendEquationMode = _types__WEBPACK_IMPORTED_MODULE_19__.GL_FUNC_ADD; // gl.FUNC_ADD
        this.__blendEquationModeAlpha = _types__WEBPACK_IMPORTED_MODULE_19__.GL_FUNC_ADD; // gl.FUNC_ADD
        this.__blendFuncSrcFactor = _types__WEBPACK_IMPORTED_MODULE_19__.GL_SRC_ALPHA; // gl.SRC_ALPHA
        this.__blendFuncDstFactor = _types__WEBPACK_IMPORTED_MODULE_19__.GL_ONE_MINUS_SRC_ALPHA; // gl.ONE_MINUS_SRC_ALPHA
        this.__blendFuncAlphaSrcFactor = _types__WEBPACK_IMPORTED_MODULE_19__.GL_ONE; // gl.ONE
        this.__blendFuncAlphaDstFactor = _types__WEBPACK_IMPORTED_MODULE_19__.GL_ONE; // gl.ONE
        this.__materialContent = materialNode;
        this.__materialTid = materialTid;
        this.__materialTypeName = materialTypeName;
        this.__initialize();
    }
    /**
     * Initialize Method
     */
    __initialize() {
        this.__materialUid = ++Material.__materialUidCount;
        Material.__materialMap.set(this.__materialUid, this);
        Material.__instancesByTypes.set(this.__materialTypeName, this);
        this.tryToSetUniqueName(this.__materialTypeName, true);
        let countOfThisType = Material.__materialInstanceCountOfType.get(this.__materialTypeName);
        this.__materialSid = countOfThisType++;
        // set this material instance for the material type
        let map = Material.__instances.get(this.__materialTypeName);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(map)) {
            map = new Map();
            Material.__instances.set(this.__materialTypeName, map);
        }
        map.set(this.__materialSid, this);
        // set the count of instance for the material type
        Material.__materialInstanceCountOfType.set(this.__materialTypeName, countOfThisType);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(this.__materialContent)) {
            const semanticsInfoArray = this.__materialContent._semanticsInfoArray;
            const accessorMap = Material.__accessors.get(this.__materialTypeName);
            semanticsInfoArray.forEach(semanticsInfo => {
                const propertyIndex = Material._getPropertyIndex(semanticsInfo);
                this.__allFieldsInfo.set(propertyIndex, semanticsInfo);
                if (!semanticsInfo.soloDatum) {
                    const accessor = accessorMap.get(propertyIndex);
                    const typedArray = accessor.takeOne();
                    const shaderVariable = {
                        info: semanticsInfo,
                        value: _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__.MathClassUtil.initWithFloat32Array(semanticsInfo.initialValue, semanticsInfo.initialValue, typedArray, semanticsInfo.compositionType),
                    };
                    this.__allFieldVariables.set(propertyIndex, shaderVariable);
                    if (!semanticsInfo.isCustomSetting) {
                        this.__autoFieldVariablesOnly.set(propertyIndex, shaderVariable);
                    }
                }
            });
        }
    }
    /**
     * @private
     * called from Primitive class only
     * @param primitive
     */
    _addBelongPrimitive(primitive) {
        this.__belongPrimitives.set(primitive.primitiveUid, primitive);
    }
    // _belongPrimitives() {
    //   return Array.from(this.__belongPrimitives.values());
    // }
    ///
    /// Parameter Setters
    ///
    setParameter(shaderSemantic, value) {
        const propertyIndex = Material._getPropertyIndex2(shaderSemantic);
        const info = this.__allFieldsInfo.get(propertyIndex);
        if (info != null) {
            let valueObj;
            if (info.soloDatum) {
                valueObj = Material.__soloDatumFields
                    .get(this.__materialTypeName)
                    .get(propertyIndex);
            }
            else {
                valueObj = this.__allFieldVariables.get(propertyIndex);
            }
            _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__.MathClassUtil._setForce(valueObj.value, value);
        }
    }
    setTextureParameter(shaderSemantic, value) {
        if (this.__allFieldsInfo.has(shaderSemantic.index)) {
            const array = this.__allFieldVariables.get(shaderSemantic.index);
            const shaderVariable = {
                value: [array.value[0], value],
                info: array.info,
            };
            this.__allFieldVariables.set(shaderSemantic.index, shaderVariable);
            if (!array.info.isCustomSetting) {
                this.__autoFieldVariablesOnly.set(shaderSemantic.index, shaderVariable);
            }
            if (shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__.ShaderSemantics.DiffuseColorTexture ||
                shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__.ShaderSemantics.BaseColorTexture) {
                if (value.isTransparent) {
                    this.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent;
                }
            }
        }
    }
    getTextureParameter(shaderSemantic) {
        if (this.__allFieldsInfo.has(shaderSemantic.index)) {
            const array = this.__allFieldVariables.get(shaderSemantic.index);
            return array.value[1];
        }
        return undefined;
    }
    setTextureParameterAsPromise(shaderSemantic, promise) {
        promise.then(texture => {
            if (this.__allFieldsInfo.has(shaderSemantic.index)) {
                const array = this.__allFieldVariables.get(shaderSemantic.index);
                const shaderVariable = {
                    value: [array.value[0], texture],
                    info: array.info,
                };
                this.__allFieldVariables.set(shaderSemantic.index, shaderVariable);
                if (!array.info.isCustomSetting) {
                    this.__autoFieldVariablesOnly.set(shaderSemantic.index, shaderVariable);
                }
                if (shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__.ShaderSemantics.DiffuseColorTexture ||
                    shaderSemantic === _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_2__.ShaderSemantics.BaseColorTexture) {
                    if (texture.isTransparent) {
                        this.alphaMode = _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent;
                    }
                }
            }
        });
    }
    // Note: The uniform defined in the GlobalDataRepository and the VertexAttributesExistenceArray,
    //       WorldMatrix, NormalMatrix, PointSize, and PointDistanceAttenuation cannot be set.
    setParameterByUniformName(uniformName, value) {
        const targetShaderSemantics = this.__getTargetShaderSemantics(uniformName);
        if (targetShaderSemantics != null) {
            this.setParameter(targetShaderSemantics, value);
        }
    }
    setTextureParameterByUniformName(uniformName, value) {
        const targetShaderSemantics = this.__getTargetShaderSemantics(uniformName);
        if (targetShaderSemantics != null) {
            this.setTextureParameter(targetShaderSemantics, value);
        }
    }
    getParameter(shaderSemantic) {
        var _a, _b;
        const info = this.__allFieldsInfo.get(shaderSemantic.index);
        if (info != null) {
            if (info.soloDatum) {
                return (_a = Material.__soloDatumFields
                    .get(this.__materialTypeName)
                    .get(shaderSemantic.index)) === null || _a === void 0 ? void 0 : _a.value;
            }
            else {
                return (_b = this.__allFieldVariables.get(shaderSemantic.index)) === null || _b === void 0 ? void 0 : _b.value;
            }
        }
        return void 0;
    }
    /**
     * @private
     * called from WebGLStrategyFastest and WebGLStrategyUnfirom only
     * @param isUniformOnlyMode
     */
    _setUniformLocationsOfMaterialNodes(isUniformOnlyMode) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        let array = [];
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(this.__materialContent)) {
            const semanticsInfoArray = this.__materialContent._semanticsInfoArray;
            array = array.concat(semanticsInfoArray);
        }
        webglResourceRepository.setupUniformLocations(this._shaderProgramUid, array, isUniformOnlyMode);
    }
    /**
     * return whether the shader program ready or not
     * @returns is shader program ready or not
     */
    isShaderProgramReady() {
        return (this._shaderProgramUid !== _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.InvalidCGAPIResourceUid);
    }
    /**
     * @private
     * called from WebGLStrategyFastest and WebGLStrategyUnitform only
     */
    _setParametersToGpu({ material, shaderProgram, firstTime, args, }) {
        // For Auto Parameters
        this.__setAutoParametersToGpu(args, firstTime, shaderProgram);
        // For Custom Setting Parameters
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(this.__materialContent) &&
            _misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(this.__materialContent.setCustomSettingParametersToGpu)) {
            this.__materialContent.setCustomSettingParametersToGpu({
                material,
                shaderProgram,
                firstTime,
                args,
            });
        }
        // For SoloDatum Parameters
        this.__setSoloDatumParametersToGpu({ shaderProgram, firstTime, args });
    }
    __setAutoParametersToGpu(args, firstTime, shaderProgram) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        if (args.setUniform) {
            this.__autoFieldVariablesOnly.forEach(value => {
                const info = value.info;
                if (firstTime ||
                    info.updateInterval !== _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_16__.ShaderVariableUpdateInterval.FirstTimeOnly) {
                    webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, firstTime, value.value);
                }
                else {
                    if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D ||
                        info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.TextureCube) {
                        webglResourceRepository.bindTexture(info, value.value);
                    }
                }
            });
        }
        else {
            this.__autoFieldVariablesOnly.forEach(value => {
                const info = value.info;
                if (info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D ||
                    info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.TextureCube) {
                    if (firstTime ||
                        info.updateInterval !== _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_16__.ShaderVariableUpdateInterval.FirstTimeOnly) {
                        webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, firstTime, value.value);
                    }
                    else {
                        webglResourceRepository.bindTexture(info, value.value);
                    }
                }
            });
        }
    }
    __setSoloDatumParametersToGpu({ shaderProgram, firstTime, args, }) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        const materialTypeName = this.__materialTypeName;
        const map = Material.__soloDatumFields.get(materialTypeName);
        if (map == null)
            return;
        map.forEach((value, key) => {
            const info = value.info;
            if (args.setUniform ||
                info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.Texture2D ||
                info.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.TextureCube) {
                if (!info.isCustomSetting) {
                    if (firstTime ||
                        info.updateInterval !== _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_16__.ShaderVariableUpdateInterval.FirstTimeOnly) {
                        webglResourceRepository.setUniformValue(shaderProgram, info.semantic.str, firstTime, value.value);
                    }
                    else {
                        webglResourceRepository.bindTexture(info, value.value);
                    }
                }
            }
        });
    }
    __setupGlobalShaderDefinition() {
        let definitions = '';
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webglResourceRepository.currentWebGLContextWrapper;
        if (glw.isWebGL2) {
            definitions += '#version 300 es\n#define GLSL_ES3\n';
            if (_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.isUboEnabled) {
                definitions += '#define RN_IS_UBO_ENABLED\n';
            }
        }
        definitions += `#define RN_MATERIAL_TYPE_NAME ${this.__materialTypeName}\n`;
        if (_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_14__.ProcessApproach.isFastestApproach(_system_System__WEBPACK_IMPORTED_MODULE_13__.System.processApproach)) {
            definitions += '#define RN_IS_FASTEST_MODE\n';
        }
        else {
            definitions += '#define RN_IS_UNIFORM_MODE\n';
        }
        if (glw.webgl1ExtSTL) {
            definitions += '#define WEBGL1_EXT_SHADER_TEXTURE_LOD\n';
        }
        if (glw.webgl1ExtDRV) {
            definitions += '#define WEBGL1_EXT_STANDARD_DERIVATIVES\n';
        }
        if (glw.webgl1ExtDB) {
            definitions += '#define WEBGL1_EXT_DRAW_BUFFERS\n';
        }
        if (glw.isWebGL2 || glw.webgl1ExtDRV) {
            definitions += '#define RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n';
        }
        if (_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_15__.BoneDataType.Mat44x1) {
            definitions += '#define RN_BONE_DATA_TYPE_Mat44x1\n';
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_15__.BoneDataType.Vec4x2) {
            definitions += '#define RN_BONE_DATA_TYPE_VEC4X2\n';
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_15__.BoneDataType.Vec4x2Old) {
            definitions += '#define RN_BONE_DATA_TYPE_VEC4X2_OLD\n';
        }
        else if (_core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.boneDataType === _definitions_BoneDataType__WEBPACK_IMPORTED_MODULE_15__.BoneDataType.Vec4x1) {
            definitions += '#define RN_BONE_DATA_TYPE_VEC4X1\n';
        }
        return definitions;
    }
    __createProgramAsSingleOperation(vertexShaderMethodDefinitions_uniform, propertySetter, isWebGL2) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        const materialNode = this.__materialContent;
        const { vertexPropertiesStr, pixelPropertiesStr } = this._getProperties(propertySetter, isWebGL2);
        const definitions = materialNode.definitions;
        // Shader Construction
        let vertexShader = this.__setupGlobalShaderDefinition();
        vertexShader += '#define RN_IS_VERTEX_SHADER\n';
        let pixelShader = this.__setupGlobalShaderDefinition();
        pixelShader += '#define RN_IS_PIXEL_SHADER\n';
        const vertexShaderityObject = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__.ShaderityUtility.fillTemplate(materialNode.vertexShaderityObject, {
            getters: vertexPropertiesStr,
            definitions: definitions,
            dataUBODefinition: webglResourceRepository.getGlslDataUBODefinitionString(),
            dataUBOVec4Size: webglResourceRepository.getGlslDataUBOVec4SizeString(),
            matricesGetters: vertexShaderMethodDefinitions_uniform
        });
        const vertexShaderBody = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__.ShaderityUtility.transformWebGLVersion(vertexShaderityObject, isWebGL2).code;
        const pixelShaderityObject = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__.ShaderityUtility.fillTemplate(materialNode.pixelShaderityObject, {
            renderTargetBegin: webglResourceRepository.getGlslRenderTargetBeginString(4),
            getters: pixelPropertiesStr,
            definitions: definitions,
            dataUBODefinition: webglResourceRepository.getGlslDataUBODefinitionString(),
            dataUBOVec4Size: webglResourceRepository.getGlslDataUBOVec4SizeString(),
            matricesGetters: vertexShaderMethodDefinitions_uniform,
            renderTargetEnd: webglResourceRepository.getGlslRenderTargetEndString(4),
        });
        const pixelShaderBody = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__.ShaderityUtility.transformWebGLVersion(pixelShaderityObject, isWebGL2).code;
        vertexShader += vertexShaderBody.replace(/#version\s+(100|300\s+es)/, '');
        pixelShader += pixelShaderBody.replace(/#version\s+(100|300\s+es)/, '');
        const { attributeNames, attributeSemantics } = this.__getAttributeInfo(materialNode);
        const vertexAttributesBinding = this.__outputVertexAttributeBindingInfo(attributeNames, attributeSemantics);
        vertexShader += vertexAttributesBinding;
        return this.__createShaderProgramWithCache(vertexShader, pixelShader, attributeNames, attributeSemantics);
    }
    __createProgramAsSingleOperationByUpdatedSources(updatedShaderSources) {
        const materialNode = this.__materialContent;
        const { attributeNames, attributeSemantics } = this.__getAttributeInfo(materialNode);
        return this.__createShaderProgramWithCache(updatedShaderSources.vertex, updatedShaderSources.pixel, attributeNames, attributeSemantics);
    }
    __createShaderProgramWithCache(vertexShader, pixelShader, attributeNames, attributeSemantics) {
        // Cache
        const wholeShaderText = vertexShader + pixelShader;
        let shaderProgramUid = Material.__shaderStringMap.get(wholeShaderText);
        if (shaderProgramUid) {
            this._shaderProgramUid = shaderProgramUid;
            return shaderProgramUid;
        }
        const hash = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_11__.DataUtil.toCRC32(wholeShaderText);
        shaderProgramUid = Material.__shaderHashMap.get(hash);
        if (shaderProgramUid) {
            this._shaderProgramUid = shaderProgramUid;
            return this._shaderProgramUid;
        }
        else {
            const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
            this._shaderProgramUid = webglResourceRepository.createShaderProgram({
                material: this,
                vertexShaderStr: vertexShader,
                fragmentShaderStr: pixelShader,
                attributeNames: attributeNames,
                attributeSemantics: attributeSemantics,
            });
            Material.__shaderStringMap.set(wholeShaderText, this._shaderProgramUid);
            Material.__shaderHashMap.set(hash, this._shaderProgramUid);
            return this._shaderProgramUid;
        }
    }
    __getAttributeInfo(materialNode) {
        const reflection = _ShaderityUtility__WEBPACK_IMPORTED_MODULE_17__.ShaderityUtility.getAttributeReflection(materialNode.vertexShaderityObject);
        const attributeNames = reflection.names;
        const attributeSemantics = reflection.semantics;
        return { attributeNames, attributeSemantics };
    }
    __outputVertexAttributeBindingInfo(attributeNames, attributeSemantics) {
        let vertexAttributesBinding = '\n// Vertex Attributes Binding Info\n';
        for (let i = 0; i < attributeNames.length; i++) {
            vertexAttributesBinding += `// ${attributeNames[i]}: ${attributeSemantics[i].str} \n`;
        }
        return vertexAttributesBinding;
    }
    /**
     * @private
     * @param propertySetter
     */
    _getProperties(propertySetter, isWebGL2) {
        let vertexPropertiesStr = '';
        let pixelPropertiesStr = '';
        this.__allFieldsInfo.forEach((value, propertyIndex) => {
            const info = this.__allFieldsInfo.get(propertyIndex);
            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexShader ||
                info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexAndPixelShader) {
                vertexPropertiesStr += propertySetter(this.__materialTypeName, info, propertyIndex, false, isWebGL2);
            }
            if (info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.PixelShader ||
                info.stage === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_10__.ShaderType.VertexAndPixelShader) {
                pixelPropertiesStr += propertySetter(this.__materialTypeName, info, propertyIndex, false, isWebGL2);
            }
        });
        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_12__.GlobalDataRepository.getInstance();
        [vertexPropertiesStr, pixelPropertiesStr] =
            globalDataRepository.addPropertiesStr(vertexPropertiesStr, pixelPropertiesStr, propertySetter, isWebGL2);
        return { vertexPropertiesStr, pixelPropertiesStr };
    }
    __getTargetShaderSemantics(uniformName) {
        const targetFieldsInfo = this.fieldsInfoArray.find(fieldsInfo => {
            const prefix = fieldsInfo.none_u_prefix ? '' : 'u_';
            return prefix + fieldsInfo.semantic.str === uniformName;
        });
        if (targetFieldsInfo == null) {
            console.error(`Material.__getTargetShaderSemantics: uniform ${uniformName} is not found`);
            return;
        }
        return targetFieldsInfo.semantic;
    }
    /**
     * @private
     * called from WebGLStrategyFastest and WebGLStrategyUnfirom
     * @param vertexShaderMethodDefinitions_uniform
     * @param propertySetter
     * @param isWebGL2
     * @returns
     */
    _createProgram(vertexShaderMethodDefinitions_uniform, propertySetter, isWebGL2) {
        const programUid = this.__createProgramAsSingleOperation(vertexShaderMethodDefinitions_uniform, propertySetter, isWebGL2);
        return programUid;
    }
    createProgramByUpdatedSources(updatedShaderSources) {
        const programUid = this.__createProgramAsSingleOperationByUpdatedSources(updatedShaderSources);
        if (programUid > 0) {
            this.__updatedShaderSources = updatedShaderSources;
        }
        return programUid;
    }
    /**
     * Change the blendEquations
     * This method works only if this alphaMode is the translucent
     * @param blendEquationMode the argument of gl.blendEquation of the first argument of gl.blendEquationSeparate such as gl.FUNC_ADD
     * @param blendEquationModeAlpha the second argument of gl.blendEquationSeparate
     */
    setBlendEquationMode(blendEquationMode, blendEquationModeAlpha) {
        this.__blendEquationMode = blendEquationMode;
        this.__blendEquationModeAlpha = blendEquationModeAlpha !== null && blendEquationModeAlpha !== void 0 ? blendEquationModeAlpha : blendEquationMode;
    }
    /**
     * Change the blendFuncSeparateFactors
     * This method works only if this alphaMode is the translucent
     */
    setBlendFuncSeparateFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor) {
        this.__blendFuncSrcFactor = blendFuncSrcFactor;
        this.__blendFuncDstFactor = blendFuncDstFactor;
        this.__blendFuncAlphaSrcFactor = blendFuncAlphaSrcFactor;
        this.__blendFuncAlphaDstFactor = blendFuncAlphaDstFactor;
    }
    /**
     * Change the blendFuncFactors
     * This method works only if this alphaMode is the translucent
     */
    setBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor) {
        this.__blendFuncSrcFactor = blendFuncSrcFactor;
        this.__blendFuncDstFactor = blendFuncDstFactor;
        this.__blendFuncAlphaSrcFactor = blendFuncSrcFactor;
        this.__blendFuncAlphaDstFactor = blendFuncDstFactor;
    }
    /**
     * @private
     * called WebGLStrategyFastest and WebGLStrategyUniform only
     */
    _setupBasicUniformsLocations() {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.setupBasicUniformLocations(this._shaderProgramUid);
    }
    ////////////////
    /// Setters
    ////////////////
    /**
     * @private
     * called WebGLStrategyFastest and WebGLStrategyUniform only
     */
    _setupAdditionalUniformLocations(shaderSemantics, isUniformOnlyMode) {
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_6__.CGAPIResourceRepository.getWebGLResourceRepository();
        return webglResourceRepository.setupUniformLocations(this._shaderProgramUid, shaderSemantics, isUniformOnlyMode);
    }
    // setMaterialNode(materialNode: AbstractMaterialNode) {
    //   this.__materialNode = materialNode;
    // }
    ///
    /// Getters
    ///
    isEmptyMaterial() {
        if (this.__materialContent === undefined) {
            return true;
        }
        else {
            return false;
        }
    }
    isBlend() {
        if (this.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent ||
            this.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Additive) {
            return true;
        }
        else {
            return false;
        }
    }
    // getShaderSemanticInfoFromName(name: string) {
    //   if (Is.exist(this.__materialNode)) {
    //     return this.__materialNode.getShaderSemanticInfoFromName(name);
    //   }
    //   return undefined;
    // }
    /**
     * NOTE: To apply the alphaToCoverage, the output alpha value must not be fixed to constant value.
     * However, some shaders in the Rhodonite fixes the output alpha value to 1 by setAlphaIfNotInAlphaBlendMode.
     * So we need to improve the shader to use the alphaToCoverage.
     * @param alphaToCoverage apply alphaToCoverage to this material or not
     */
    set alphaToCoverage(alphaToCoverage) {
        if (alphaToCoverage && this.alphaMode === _definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent) {
            console.warn('If you set alphaToCoverage = true on a material whose AlphaMode is Translucent, you may get drawing problems.');
        }
        this.__alphaToCoverage = alphaToCoverage;
    }
    get alphaToCoverage() {
        return this.__alphaToCoverage;
    }
    /**
     * Gets materialTID.
     */
    get materialTID() {
        return this.__materialTid;
    }
    get fieldsInfoArray() {
        return Array.from(this.__allFieldsInfo.values());
    }
    get blendEquationMode() {
        return this.__blendEquationMode;
    }
    get blendEquationModeAlpha() {
        return this.__blendEquationModeAlpha;
    }
    get blendFuncSrcFactor() {
        return this.__blendFuncSrcFactor;
    }
    get blendFuncDstFactor() {
        return this.__blendFuncDstFactor;
    }
    get blendFuncAlphaSrcFactor() {
        return this.__blendFuncAlphaSrcFactor;
    }
    get blendFuncAlphaDstFactor() {
        return this.__blendFuncAlphaDstFactor;
    }
    get alphaMode() {
        return this.__alphaMode;
    }
    set alphaMode(mode) {
        this.__alphaMode = mode;
    }
    get materialUID() {
        return this.__materialUid;
    }
    get materialSID() {
        return this.__materialSid;
    }
    get isSkinning() {
        return this.__materialContent.isSkinning;
    }
    get isMorphing() {
        return this.__materialContent.isMorphing;
    }
    get isLighting() {
        return this.__materialContent.isLighting;
    }
    get materialTypeName() {
        return this.__materialTypeName;
    }
    /**
     * Creates an instance of this Material class.
     * @param materialTypeName The material type to create.
     * @param materialNodes_ The material nodes to add to the created material.
     */
    static createMaterial(materialTypeName, materialNode_) {
        let materialNode = materialNode_;
        if (!materialNode) {
            materialNode = Material.__materialTypes.get(materialTypeName);
        }
        return new Material(Material.__materialTids.get(materialTypeName), materialTypeName, materialNode);
    }
    static getLocationOffsetOfMemberOfMaterial(materialTypeName, propertyIndex) {
        const material = Material.__instancesByTypes.get(materialTypeName);
        const info = material.__allFieldsInfo.get(propertyIndex);
        if (info.soloDatum) {
            const value = Material.__soloDatumFields
                .get(material.__materialTypeName)
                .get(propertyIndex);
            return value.value._v.byteOffset / 4 / 4;
        }
        else {
            const properties = this.__accessors.get(materialTypeName);
            const accessor = properties.get(propertyIndex);
            return accessor.byteOffsetInBuffer / 4 / 4;
        }
    }
    // static getAccessorOfMemberOfMaterial(
    //   materialTypeName: string,
    //   propertyIndex: Index
    // ): Accessor | undefined {
    //   const material = Material.__instancesByTypes.get(materialTypeName)!;
    //   const info = material.__fieldsInfo.get(propertyIndex)!;
    //   if (info.soloDatum) {
    //     return void 0;
    //   } else {
    //     const properties = this.__accessors.get(materialTypeName);
    //     const accessor = properties!.get(propertyIndex);
    //     return accessor;
    //   }
    // }
    static isRegisteredMaterialType(materialTypeName) {
        return Material.__materialTypes.has(materialTypeName);
    }
    static _calcAlignedByteLength(semanticInfo) {
        const compositionNumber = semanticInfo.compositionType.getNumberOfComponents();
        const componentSizeInByte = semanticInfo.componentType.getSizeInBytes();
        const semanticInfoByte = compositionNumber * componentSizeInByte;
        let alignedByteLength = semanticInfoByte;
        if (alignedByteLength % 16 !== 0) {
            alignedByteLength = semanticInfoByte + 16 - (semanticInfoByte % 16);
        }
        if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.isArray(semanticInfo.compositionType)) {
            const maxArrayLength = semanticInfo.arrayLength;
            if (maxArrayLength != null) {
                alignedByteLength *= maxArrayLength;
            }
            else {
                console.error('semanticInfo has invalid maxIndex!');
                alignedByteLength *= 100;
            }
        }
        return alignedByteLength;
    }
    static getMaterialByMaterialUid(materialUid) {
        return this.__materialMap.get(materialUid);
    }
    static __allocateBufferView(materialTypeName, materialNode) {
        let totalByteLength = 0;
        const alignedByteLengthAndSemanticInfoArray = [];
        for (const semanticInfo of materialNode._semanticsInfoArray) {
            const alignedByteLength = Material._calcAlignedByteLength(semanticInfo);
            let dataCount = 1;
            if (!semanticInfo.soloDatum) {
                dataCount = Material.__maxInstances.get(materialTypeName);
            }
            totalByteLength += alignedByteLength * dataCount;
            alignedByteLengthAndSemanticInfoArray.push({
                alignedByte: alignedByteLength,
                semanticInfo: semanticInfo,
            });
        }
        if (!this.__accessors.has(materialTypeName)) {
            this.__accessors.set(materialTypeName, new Map());
        }
        const buffer = _core_MemoryManager__WEBPACK_IMPORTED_MODULE_7__.MemoryManager.getInstance().createOrGetBuffer(_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_8__.BufferUse.GPUInstanceData);
        let bufferView;
        if (this.__bufferViews.has(materialTypeName)) {
            bufferView = this.__bufferViews.get(materialTypeName);
        }
        else {
            const result = buffer.takeBufferView({
                byteLengthToNeed: totalByteLength,
                byteStride: 0,
            });
            bufferView = result.unwrapForce();
            this.__bufferViews.set(materialTypeName, bufferView);
        }
        for (let i = 0; i < alignedByteLengthAndSemanticInfoArray.length; i++) {
            const alignedByte = alignedByteLengthAndSemanticInfoArray[i].alignedByte;
            const semanticInfo = alignedByteLengthAndSemanticInfoArray[i].semanticInfo;
            let count = 1;
            if (!semanticInfo.soloDatum) {
                count = Material.__maxInstances.get(materialTypeName);
            }
            let maxArrayLength = semanticInfo.arrayLength;
            if (_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_3__.CompositionType.isArray(semanticInfo.compositionType) &&
                maxArrayLength == null) {
                maxArrayLength = 100;
            }
            const accessor = bufferView
                .takeAccessor({
                compositionType: semanticInfo.compositionType,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float,
                count: count,
                byteStride: alignedByte,
                arrayLength: maxArrayLength,
            })
                .unwrapForce();
            const propertyIndex = this._getPropertyIndex(semanticInfo);
            if (semanticInfo.soloDatum) {
                const typedArray = accessor.takeOne();
                let map = this.__soloDatumFields.get(materialTypeName);
                if (map == null) {
                    map = new Map();
                    this.__soloDatumFields.set(materialTypeName, map);
                }
                map.set(this._getPropertyIndex(semanticInfo), {
                    info: semanticInfo,
                    value: _math_MathClassUtil__WEBPACK_IMPORTED_MODULE_4__.MathClassUtil.initWithFloat32Array(semanticInfo.initialValue, semanticInfo.initialValue, typedArray, semanticInfo.compositionType),
                });
            }
            else {
                const properties = this.__accessors.get(materialTypeName);
                properties.set(propertyIndex, accessor);
            }
        }
        return bufferView;
    }
    /**
     * Registers the material type.
     * @param materialTypeName The type name of the material.
     * @param materialNodes The material nodes to register.
     * @param maxInstancesNumber The maximum number to create the material instances.
     */
    static registerMaterial(materialTypeName, materialNode, maxInstanceNumber = _core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.maxMaterialInstanceForEachType) {
        if (!Material.__materialTypes.has(materialTypeName)) {
            Material.__materialTypes.set(materialTypeName, materialNode);
            const materialTid = ++Material.__materialTidCount;
            Material.__materialTids.set(materialTypeName, materialTid);
            Material.__maxInstances.set(materialTypeName, maxInstanceNumber);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(materialNode)) {
                Material.__allocateBufferView(materialTypeName, materialNode);
            }
            Material.__materialInstanceCountOfType.set(materialTypeName, 0);
            return true;
        }
        else {
            console.info(`${materialTypeName} is already registered.`);
            return false;
        }
    }
    static forceRegisterMaterial(materialTypeName, materialNode, maxInstanceNumber = _core_Config__WEBPACK_IMPORTED_MODULE_9__.Config.maxMaterialInstanceForEachType) {
        Material.__materialTypes.set(materialTypeName, materialNode);
        const materialTid = ++Material.__materialTidCount;
        Material.__materialTids.set(materialTypeName, materialTid);
        Material.__maxInstances.set(materialTypeName, maxInstanceNumber);
        Material.__allocateBufferView(materialTypeName, materialNode);
        Material.__materialInstanceCountOfType.set(materialTypeName, 0);
        return true;
    }
    static getAllMaterials() {
        return Array.from(Material.__materialMap.values());
    }
    /**
     * @private
     */
    static _getPropertyIndex(semanticInfo) {
        const propertyIndex = semanticInfo.semantic.index;
        return propertyIndex;
    }
    /**
     * @private
     */
    static _getPropertyIndex2(shaderSemantic) {
        const propertyIndex = shaderSemantic.index;
        return propertyIndex;
    }
}
///
/// static members
///
Material.__soloDatumFields = new Map();
Material.__shaderHashMap = new Map();
Material.__shaderStringMap = new Map();
Material.__materialMap = new Map();
Material.__instances = new Map();
Material.__instancesByTypes = new Map();
Material.__materialTids = new Map();
Material.__materialInstanceCountOfType = new Map();
Material.__materialTypes = new Map();
Material.__maxInstances = new Map();
Material.__bufferViews = new Map();
Material.__accessors = new Map();
Material.__materialTidCount = -1;
Material.__materialUidCount = -1;


/***/ }),

/***/ "./src/foundation/materials/core/ShaderGraphResolver.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/materials/core/ShaderGraphResolver.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderGraphResolver": () => (/* binding */ ShaderGraphResolver)
/* harmony export */ });
/* harmony import */ var _AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../webgl/shaders/GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _webgl_shaderity_shaders_common_mainPrerequisites_glsl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/common/mainPrerequisites.glsl */ "./src/webgl/shaderity_shaders/common/mainPrerequisites.glsl");
/* harmony import */ var _webgl_shaderity_shaders_common_prerequisites_glsl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/common/prerequisites.glsl */ "./src/webgl/shaderity_shaders/common/prerequisites.glsl");









class ShaderGraphResolver {
    static createVertexShaderCode(vertexNodes) {
        var _a;
        const shaderNodes = vertexNodes.concat();
        // Find Start Node
        const firstShaderNode = this.__findBeginNode(shaderNodes);
        // Topological Sorting
        const sortedShaderNodes = this.__sortTopologically(firstShaderNode, shaderNodes);
        // Add additional functions by system
        let vertexShaderPrerequisites = '';
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        let in_ = 'attribute';
        if ((_a = webglResourceRepository.currentWebGLContextWrapper) === null || _a === void 0 ? void 0 : _a.isWebGL2) {
            in_ = 'in';
        }
        vertexShaderPrerequisites += `
#version 300 es
precision highp float;
precision highp int;
${_webgl_shaderity_shaders_common_prerequisites_glsl__WEBPACK_IMPORTED_MODULE_8__["default"].code}

    ${in_} float a_instanceID;\n`;
        vertexShaderPrerequisites += `
uniform bool u_vertexAttributesExistenceArray[${_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__.VertexAttribute.AttributeTypeNumber}];
`;
        vertexShaderPrerequisites += '/* shaderity: @{matricesGetters} */';
        vertexShaderPrerequisites += '/* shaderity: @{getters} */';
        let shaderBody = '';
        // function definitions
        shaderBody += ShaderGraphResolver.getFunctionDefinition(sortedShaderNodes, _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.VertexShader);
        // main process
        shaderBody +=
            ShaderGraphResolver.__constructShaderWithNodes(sortedShaderNodes);
        const shader = vertexShaderPrerequisites + shaderBody;
        return { shader, shaderBody };
    }
    static createPixelShaderCode(pixelNodes) {
        const shaderNodes = pixelNodes.concat();
        // Find Start Node
        const firstShaderNode = this.__findBeginNode(shaderNodes);
        // Topological Sorting
        const sortedShaderNodes = this.__sortTopologically(firstShaderNode, shaderNodes);
        // Add additional functions by system
        let pixelShaderPrerequisites = '';
        pixelShaderPrerequisites += `
#version 300 es
precision highp float;
precision highp int;
${_webgl_shaderity_shaders_common_prerequisites_glsl__WEBPACK_IMPORTED_MODULE_8__["default"].code}
`;
        pixelShaderPrerequisites += '/* shaderity: @{getters} */';
        let shaderBody = '';
        // function definitions
        shaderBody += ShaderGraphResolver.getFunctionDefinition(sortedShaderNodes, _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.PixelShader);
        // main process
        shaderBody +=
            ShaderGraphResolver.__constructShaderWithNodes(sortedShaderNodes);
        const shader = pixelShaderPrerequisites + shaderBody;
        return { shader, shaderBody };
    }
    static __findBeginNode(shaderNodes) {
        let firstShaderNode;
        for (let i = 0; i < shaderNodes.length; i++) {
            const shaderNode = shaderNodes[i];
            if (shaderNode.inputConnections.length === 0) {
                firstShaderNode = shaderNode;
            }
        }
        return firstShaderNode;
    }
    static __sortTopologically(firstShaderNode, shaderNodes) {
        const ignoredInputUids = [firstShaderNode.shaderNodeUid];
        const sortedNodeArray = [firstShaderNode];
        // remove node which don't have inputConnections (except first node)
        shaderNodes.splice(shaderNodes.indexOf(firstShaderNode), 1);
        do {
            let shaderNodeWhichHasNoInputs;
            shaderNodes.forEach(shaderNode => {
                let inputCount = 0;
                for (const inputConnection of shaderNode.inputConnections) {
                    if (ignoredInputUids.indexOf(inputConnection.shaderNodeUid) === -1) {
                        inputCount++;
                    }
                }
                if (inputCount === 0) {
                    shaderNodeWhichHasNoInputs = shaderNode;
                }
            });
            sortedNodeArray.push(shaderNodeWhichHasNoInputs);
            ignoredInputUids.push(shaderNodeWhichHasNoInputs.shaderNodeUid);
            shaderNodes.splice(shaderNodes.indexOf(shaderNodeWhichHasNoInputs), 1);
        } while (shaderNodes.length !== 0);
        return sortedNodeArray;
    }
    static getFunctionDefinition(shaderNodes, shaderType) {
        let shaderText = '';
        const existVertexFunctions = [];
        for (let i = 0; i < shaderNodes.length; i++) {
            const materialNode = shaderNodes[i];
            if (existVertexFunctions.indexOf(materialNode.shaderFunctionName) !== -1) {
                continue;
            }
            if (materialNode.shaderCode) {
                shaderText += materialNode.shaderCode;
            }
            else {
                if (shaderType === _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_3__.ShaderType.VertexShader) {
                    shaderText += materialNode.shader.vertexShaderDefinitions;
                }
                else {
                    shaderText += materialNode.shader.pixelShaderDefinitions;
                }
            }
            existVertexFunctions.push(materialNode.shaderFunctionName);
        }
        return shaderText;
    }
    static __constructShaderWithNodes(materialNodes) {
        let shaderBody = '';
        const isAnyTypeInput = function (input) {
            return (input.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Unknown ||
                input.componentType === _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Unknown);
        };
        shaderBody += _webgl_shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_6__.GLSLShader.glslMainBegin;
        shaderBody += _webgl_shaderity_shaders_common_mainPrerequisites_glsl__WEBPACK_IMPORTED_MODULE_7__["default"].code;
        // Collects varInputNames and varOutputNames
        const varInputNames = []; // input names of topological sorted Nodes
        const varOutputNames = []; // output names of topological sorted Nodes
        {
            const existingInputs = [];
            const existingOutputs = [];
            const existingOutputsVarName = new Map();
            for (let i = 1; i < materialNodes.length; i++) {
                const materialNode = materialNodes[i];
                if (varInputNames[i] == null) {
                    varInputNames[i] = [];
                }
                if (i - 1 >= 0) {
                    if (varOutputNames[i - 1] == null) {
                        varOutputNames[i - 1] = [];
                    }
                }
                const inputConnections = materialNode.inputConnections;
                // Collects ExistingInputs
                for (let j = 0; j < inputConnections.length; j++) {
                    const inputConnection = inputConnections[j];
                    const inputNode = _AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode.shaderNodes[inputConnection.shaderNodeUid];
                    if (isAnyTypeInput(materialNode.getInputs()[j])) {
                        continue;
                    }
                    const outputSocketOfPrev = inputNode.getOutput(inputConnection.outputNameOfPrev);
                    const inputSocketOfThis = materialNode.getInput(inputConnection.inputNameOfThis);
                    const varName = `${outputSocketOfPrev.name}_${inputConnection.shaderNodeUid}_to_${materialNode.shaderNodeUid}`;
                    //
                    if (existingInputs.indexOf(inputNode.shaderNodeUid) === -1) {
                        const glslTypeStr = inputSocketOfThis.compositionType.getGlslStr(inputSocketOfThis.componentType);
                        const glslInitialValue = inputSocketOfThis.compositionType.getGlslInitialValue(inputSocketOfThis.componentType);
                        const rowStr = `${glslTypeStr} ${varName} = ${glslInitialValue};\n`;
                        shaderBody += rowStr;
                    }
                    const existVarName = existingOutputsVarName.get(inputNode.shaderNodeUid);
                    varInputNames[i].push(existVarName ? existVarName : varName);
                    existingInputs.push(inputConnection.shaderNodeUid);
                }
                // Collects ExistingOutputs
                for (let j = i; j < materialNodes.length; j++) {
                    const targetMaterialNode = materialNodes[j];
                    const prevMaterialNodeInner = materialNodes[i - 1];
                    const targetNodeInputConnections = targetMaterialNode.inputConnections;
                    for (let k = 0; k < targetNodeInputConnections.length; k++) {
                        const inputConnection = targetNodeInputConnections[k];
                        if ((prevMaterialNodeInner === null || prevMaterialNodeInner === void 0 ? void 0 : prevMaterialNodeInner.shaderNodeUid) !==
                            inputConnection.shaderNodeUid) {
                            continue;
                        }
                        const inputNode = _AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode.shaderNodes[inputConnection.shaderNodeUid];
                        if (!isAnyTypeInput(targetMaterialNode.getInputs()[k])) {
                            if (existingOutputs.indexOf(inputNode.shaderNodeUid) === -1) {
                                const outputSocketOfPrev = inputNode.getOutput(inputConnection.outputNameOfPrev);
                                const varName = `${outputSocketOfPrev.name}_${inputConnection.shaderNodeUid}_to_${targetMaterialNode.shaderNodeUid}`;
                                if (i - 1 >= 0) {
                                    varOutputNames[i - 1].push(varName);
                                }
                                existingOutputsVarName.set(inputConnection.shaderNodeUid, varName);
                            }
                            existingOutputs.push(inputConnection.shaderNodeUid);
                        }
                    }
                }
            }
        }
        // generate shader code by topological sorted nodes, varInputNames and varOutputNames
        let ifCondition = '';
        for (let i = 0; i < materialNodes.length; i++) {
            const materialNode = materialNodes[i];
            const functionName = materialNode.shaderFunctionName;
            if (varInputNames[i] == null) {
                varInputNames[i] = [];
            }
            if (varOutputNames[i] == null) {
                varOutputNames[i] = [];
            }
            let rowStr = '';
            if (functionName === 'ifStatement') {
                ifCondition = varInputNames[i][0];
            }
            else {
                if (functionName.match(/^blockBegin_/)) {
                    rowStr += `if (${ifCondition}) {\n`;
                    ifCondition = '';
                }
                // Normal Node Process Begin
                if (materialNode.getInputs().length !== varInputNames[i].length ||
                    materialNode.getOutputs().length !== varOutputNames[i].length) {
                    continue;
                }
                const varNames = varInputNames[i].concat(varOutputNames[i]);
                if (varNames.length > 0) {
                    // Call node functions
                    rowStr += `${functionName}(`;
                    for (let k = 0; k < varNames.length; k++) {
                        const varName = varNames[k];
                        if (varName == null) {
                            continue;
                        }
                        if (k !== 0) {
                            rowStr += ', ';
                        }
                        rowStr += varNames[k];
                    }
                    rowStr += ');\n';
                }
                // Normal Node Process End
                if (functionName.match(/^blockEnd_/)) {
                    rowStr += '}\n';
                }
            }
            shaderBody += rowStr;
        }
        shaderBody += _webgl_shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_6__.GLSLShader.glslMainEnd;
        return shaderBody;
    }
}


/***/ }),

/***/ "./src/foundation/materials/core/ShaderityUtility.ts":
/*!***********************************************************!*\
  !*** ./src/foundation/materials/core/ShaderityUtility.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ShaderityUtility": () => (/* binding */ ShaderityUtility)
/* harmony export */ });
/* harmony import */ var shaderity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shaderity */ "./node_modules/shaderity/dist/esm/index.js");
/* harmony import */ var shaderity__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(shaderity__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _math_MutableVector2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../math/MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../math/MutableScalar */ "./src/foundation/math/MutableScalar.ts");
/* harmony import */ var _math_MutableMatrix22__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../math/MutableMatrix22 */ "./src/foundation/math/MutableMatrix22.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");


















class ShaderityUtility {
    static fillTemplate(shaderityObject, args) {
        const templateObject = Object.assign(args, {
            WellKnownComponentTIDs: _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_5__.WellKnownComponentTIDs,
            widthOfDataTexture: `const int widthOfDataTexture = ${_core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__.MemoryManager.bufferWidthLength};`,
            heightOfDataTexture: `const int heightOfDataTexture = ${_core_MemoryManager__WEBPACK_IMPORTED_MODULE_4__.MemoryManager.bufferHeightLength};`,
            Config: _core_Config__WEBPACK_IMPORTED_MODULE_6__.Config,
        });
        return shaderity__WEBPACK_IMPORTED_MODULE_0___default().fillTemplate(shaderityObject, templateObject);
    }
    static transformWebGLVersion(shaderityObject, isWebGL2) {
        if (isWebGL2) {
            return shaderity__WEBPACK_IMPORTED_MODULE_0___default().transformToGLSLES3(shaderityObject);
        }
        else {
            return shaderity__WEBPACK_IMPORTED_MODULE_0___default().transformToGLSLES1(shaderityObject, true);
        }
    }
    static getAttributeReflection(shaderityObject) {
        const reflection = shaderity__WEBPACK_IMPORTED_MODULE_0___default().createReflectionObject(shaderityObject);
        this.__setDefaultAttributeSemanticMap(reflection);
        reflection.reflect();
        const names = reflection.attributesNames;
        const semantics = reflection.attributesSemantics.map(semantic => {
            return _definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.fromString(semantic);
        });
        const compositions = reflection.attributesTypes.map(type => {
            return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.fromGlslString(type);
        });
        const components = reflection.attributesTypes.map(type => {
            return _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.fromGlslString(type);
        });
        return {
            names,
            semantics,
            compositions,
            components,
        };
    }
    static __setDefaultAttributeSemanticMap(reflection) {
        const attributeSemanticsMap = new Map();
        attributeSemanticsMap.set('instanceid', 'INSTANCE');
        attributeSemanticsMap.set('barycentriccoord', 'BARY_CENTRIC_COORD');
        reflection.addAttributeSemanticsMap(attributeSemanticsMap);
    }
    static getShaderDataReflection(shaderityObject, existingShaderInfoMap) {
        const copiedShaderityObject = this.__copyShaderityObject(shaderityObject);
        const splitCode = shaderityObject.code.split(/\r\n|\n/);
        const uniformOmittedShaderRows = [];
        const shaderSemanticsInfoArray = [];
        for (const row of splitCode) {
            const reg = /^(?![/])[\t ]*uniform[\t ]+(\w+)[\t ]+(\w+);[\t ]*(\/\/)*[\t ]*(.*)/;
            const matchUniformDeclaration = row.match(reg);
            if (matchUniformDeclaration) {
                const type = matchUniformDeclaration[1];
                const variableName = matchUniformDeclaration[2];
                const info = matchUniformDeclaration[4];
                if (this.__ignoreThisUniformDeclaration(info)) {
                    uniformOmittedShaderRows.push(row);
                    continue;
                }
                const shaderSemanticsInfo = this.__createShaderSemanticsInfo(type, variableName, info, shaderityObject.isFragmentShader, existingShaderInfoMap);
                shaderSemanticsInfoArray.push(shaderSemanticsInfo);
            }
            else {
                uniformOmittedShaderRows.push(row);
            }
        }
        copiedShaderityObject.code = uniformOmittedShaderRows.join('\n');
        return {
            shaderSemanticsInfoArray: shaderSemanticsInfoArray,
            shaderityObject: copiedShaderityObject,
        };
    }
    static __copyShaderityObject(obj) {
        const copiedObj = {
            code: obj.code,
            shaderStage: obj.shaderStage,
            isFragmentShader: obj.shaderStage === 'fragment',
        };
        return copiedObj;
    }
    static __ignoreThisUniformDeclaration(info) {
        const skipProcess = info.match(/skipProcess[\t ]*=[\t ]*(\w+)[,\t ]*/);
        if ((skipProcess === null || skipProcess === void 0 ? void 0 : skipProcess[1]) === 'true') {
            return true;
        }
        return false;
    }
    static __createShaderSemanticsInfo(type, variableName, info, isFragmentShader, existingShaderInfoMap) {
        const componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.fromGlslString(type);
        const compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.fromGlslString(type);
        const stage = isFragmentShader
            ? _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_17__.ShaderType.PixelShader
            : _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_17__.ShaderType.VertexShader;
        let none_u_prefix = true;
        const u_prefixedName = variableName.match(/u_(\w+)/);
        if (u_prefixedName) {
            variableName = u_prefixedName[1];
            none_u_prefix = false;
        }
        let semantic = _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__.ShaderSemantics.fromStringCaseSensitively(variableName);
        if (semantic == null) {
            const semanticInfo = existingShaderInfoMap === null || existingShaderInfoMap === void 0 ? void 0 : existingShaderInfoMap.get(variableName);
            if (semanticInfo != null) {
                semantic = semanticInfo.semantic;
            }
            else {
                semantic = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_7__.ShaderSemanticsClass({ str: variableName });
            }
        }
        const shaderSemanticsInfo = {
            semantic,
            compositionType,
            componentType,
            min: -Number.MAX_VALUE,
            max: Number.MAX_VALUE,
            isCustomSetting: false,
            stage,
            none_u_prefix,
        };
        this.__setRhodoniteOriginalParametersTo(shaderSemanticsInfo, info);
        return shaderSemanticsInfo;
    }
    static __setRhodoniteOriginalParametersTo(shaderSemanticsInfo, info) {
        var _a;
        const soloDatum = info.match(/soloDatum[\t ]*=[\t ]*(\w+)[,\t ]*/);
        let isSoloDatumFlg = false;
        if ((soloDatum === null || soloDatum === void 0 ? void 0 : soloDatum[1]) === 'true') {
            isSoloDatumFlg = true;
        }
        shaderSemanticsInfo.soloDatum = isSoloDatumFlg;
        const isCustomSetting = info.match(/isCustomSetting[\t ]*=[\t ]*(\w+)[,\t ]*/);
        let isCustomSettingFlg = false;
        if ((isCustomSetting === null || isCustomSetting === void 0 ? void 0 : isCustomSetting[1]) === 'true') {
            isCustomSettingFlg = true;
        }
        shaderSemanticsInfo.isCustomSetting = isCustomSettingFlg;
        const updateInterval = info.match(/updateInterval[\t ]*=[\t ]*(\w+)[,\t ]*/);
        let updateIntervalObj = _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.FirstTimeOnly;
        if (((_a = updateInterval === null || updateInterval === void 0 ? void 0 : updateInterval[1]) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'everytime') {
            updateIntervalObj = _definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_8__.ShaderVariableUpdateInterval.EveryTime;
        }
        shaderSemanticsInfo.updateInterval = updateIntervalObj;
        const initialValue = info.match(/initialValue[\t ]*=[\t ]*(.+)[,\t ]*/);
        if (initialValue) {
            const initialValueText = initialValue[1];
            shaderSemanticsInfo.initialValue = this.__getInitialValueFromText(shaderSemanticsInfo, initialValueText);
        }
        else {
            shaderSemanticsInfo.initialValue =
                this.__getDefaultInitialValue(shaderSemanticsInfo);
        }
        const needUniformInFastest = info.match(/needUniformInFastest[\t ]*=[\t ]*(.+)[,\t ]*/);
        if (needUniformInFastest) {
            let needUniformInFastestFlg = false;
            if ((needUniformInFastest === null || needUniformInFastest === void 0 ? void 0 : needUniformInFastest[1]) === 'true') {
                needUniformInFastestFlg = true;
            }
            shaderSemanticsInfo.needUniformInFastest = needUniformInFastestFlg;
        }
    }
    static __getInitialValueFromText(shaderSemanticsInfo, initialValueText) {
        const tuple = initialValueText.match(/\(([\d\w., ]+)\)/);
        const checkCompositionNumber = (expected) => {
            if (shaderSemanticsInfo.compositionType !== expected) {
                console.error('component number of initialValue is invalid:' +
                    shaderSemanticsInfo.semantic.str);
            }
        };
        let initialValue;
        if (tuple) {
            const text = tuple[1];
            const split = text.split(',');
            switch (split.length) {
                case 1:
                    checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar);
                    if (split[0] === 'true') {
                        initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([1]));
                    }
                    else if (split[0] === 'false') {
                        initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([0]));
                    }
                    else {
                        initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([parseFloat(split[0])]));
                    }
                    break;
                case 2:
                    if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D) {
                        const color = split[1].charAt(0).toUpperCase() + split[1].slice(1);
                        initialValue = [
                            parseInt(split[0]),
                            _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_9__.AbstractMaterialContent[`dummy${color}Texture`],
                        ];
                    }
                    else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube) {
                        const color = split[1].charAt(0).toUpperCase() + split[1].slice(1);
                        initialValue = [
                            parseInt(split[0]),
                            _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_9__.AbstractMaterialContent[`dummy${color}CubeTexture`],
                        ];
                    }
                    else {
                        checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2);
                        initialValue = _math_MutableVector2__WEBPACK_IMPORTED_MODULE_10__.MutableVector2.fromCopyArray([
                            parseFloat(split[0]),
                            parseFloat(split[1]),
                        ]);
                    }
                    break;
                case 3:
                    checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3);
                    initialValue = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_11__.MutableVector3.fromCopyArray([
                        parseFloat(split[0]),
                        parseFloat(split[1]),
                        parseFloat(split[2]),
                    ]);
                    break;
                case 4:
                    checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4);
                    initialValue = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__.MutableVector4.fromCopyArray([
                        parseFloat(split[0]),
                        parseFloat(split[1]),
                        parseFloat(split[2]),
                        parseFloat(split[3]),
                    ]);
                    break;
                case 9:
                    checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat3);
                    initialValue = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__.MutableMatrix33.fromCopy9RowMajor(parseFloat(split[0]), parseFloat(split[1]), parseFloat(split[2]), parseFloat(split[3]), parseFloat(split[4]), parseFloat(split[5]), parseFloat(split[6]), parseFloat(split[7]), parseFloat(split[8]));
                    break;
                case 16:
                    checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4);
                    initialValue = _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__.MutableMatrix44.fromCopy16RowMajor(parseFloat(split[0]), parseFloat(split[1]), parseFloat(split[2]), parseFloat(split[3]), parseFloat(split[4]), parseFloat(split[5]), parseFloat(split[6]), parseFloat(split[7]), parseFloat(split[8]), parseFloat(split[9]), parseFloat(split[10]), parseFloat(split[11]), parseFloat(split[12]), parseFloat(split[13]), parseFloat(split[14]), parseFloat(split[15]));
                    break;
                default:
                    console.error('Invalid format');
            }
        }
        else {
            checkCompositionNumber(_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar);
            if (initialValueText === 'true') {
                initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([1]));
            }
            else if (initialValueText === 'false') {
                initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([0]));
            }
            else {
                initialValue = new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([parseFloat(initialValueText)]));
            }
        }
        return initialValue;
    }
    static __getDefaultInitialValue(shaderSemanticsInfo) {
        if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar) {
            return new _math_MutableScalar__WEBPACK_IMPORTED_MODULE_15__.MutableScalar(new Float32Array([0]));
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2) {
            return _math_MutableVector2__WEBPACK_IMPORTED_MODULE_10__.MutableVector2.zero();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec3) {
            return _math_MutableVector3__WEBPACK_IMPORTED_MODULE_11__.MutableVector3.zero();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4) {
            return _math_MutableVector4__WEBPACK_IMPORTED_MODULE_12__.MutableVector4.zero();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat2) {
            return _math_MutableMatrix22__WEBPACK_IMPORTED_MODULE_16__.MutableMatrix22.identity();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat3) {
            return _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_13__.MutableMatrix33.identity();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4) {
            return _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_14__.MutableMatrix44.identity();
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D) {
            return [0, _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_9__.AbstractMaterialContent.dummyWhiteTexture];
        }
        else if (shaderSemanticsInfo.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.TextureCube) {
            return [0, _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_9__.AbstractMaterialContent.dummyBlackTexture];
        }
        console.warn('initial value is not found');
        return;
    }
}


/***/ }),

/***/ "./src/foundation/materials/core/index.ts":
/*!************************************************!*\
  !*** ./src/foundation/materials/core/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractMaterialContent": () => (/* reexport safe */ _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent),
/* harmony export */   "AbstractShaderNode": () => (/* reexport safe */ _AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode),
/* harmony export */   "Material": () => (/* reexport safe */ _Material__WEBPACK_IMPORTED_MODULE_2__.Material),
/* harmony export */   "ShaderGraphResolver": () => (/* reexport safe */ _ShaderGraphResolver__WEBPACK_IMPORTED_MODULE_3__.ShaderGraphResolver),
/* harmony export */   "ShaderityUtility": () => (/* reexport safe */ _ShaderityUtility__WEBPACK_IMPORTED_MODULE_4__.ShaderityUtility)
/* harmony export */ });
/* harmony import */ var _AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _Material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Material */ "./src/foundation/materials/core/Material.ts");
/* harmony import */ var _ShaderGraphResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ShaderGraphResolver */ "./src/foundation/materials/core/ShaderGraphResolver.ts");
/* harmony import */ var _ShaderityUtility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ShaderityUtility */ "./src/foundation/materials/core/ShaderityUtility.ts");







/***/ }),

/***/ "./src/foundation/materials/index.ts":
/*!*******************************************!*\
  !*** ./src/foundation/materials/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractMaterialContent": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent),
/* harmony export */   "AbstractShaderNode": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode),
/* harmony export */   "AddShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.AddShaderNode),
/* harmony export */   "AttributeNormalShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.AttributeNormalShaderNode),
/* harmony export */   "AttributePositionShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.AttributePositionShaderNode),
/* harmony export */   "BlockBeginShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.BlockBeginShaderNode),
/* harmony export */   "BlockEndShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.BlockEndShaderNode),
/* harmony export */   "ColorGradingUsingLUTsMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.ColorGradingUsingLUTsMaterialContent),
/* harmony export */   "ConstantVariableShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ConstantVariableShaderNode),
/* harmony export */   "CustomMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.CustomMaterialContent),
/* harmony export */   "DepthEncodeMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.DepthEncodeMaterialContent),
/* harmony export */   "DetectHighLuminanceMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.DetectHighLuminanceMaterialContent),
/* harmony export */   "DotProductShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.DotProductShaderNode),
/* harmony export */   "EntityUIDOutputMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.EntityUIDOutputMaterialContent),
/* harmony export */   "EnvConstantMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.EnvConstantMaterialContent),
/* harmony export */   "FurnaceTestMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.FurnaceTestMaterialContent),
/* harmony export */   "GammaCorrectionMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.GammaCorrectionMaterialContent),
/* harmony export */   "GaussianBlurForEncodedDepthMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.GaussianBlurForEncodedDepthMaterialContent),
/* harmony export */   "GaussianBlurMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.GaussianBlurMaterialContent),
/* harmony export */   "GreaterShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.GreaterShaderNode),
/* harmony export */   "IfStatementShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.IfStatementShaderNode),
/* harmony export */   "MToonMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.MToonMaterialContent),
/* harmony export */   "MatCapMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.MatCapMaterialContent),
/* harmony export */   "Material": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_0__.Material),
/* harmony export */   "MultiplyShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.MultiplyShaderNode),
/* harmony export */   "NormalMatrixShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.NormalMatrixShaderNode),
/* harmony export */   "NormalizeShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.NormalizeShaderNode),
/* harmony export */   "OutColorShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.OutColorShaderNode),
/* harmony export */   "OutPositionShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.OutPositionShaderNode),
/* harmony export */   "PbrExtendedShadingMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.PbrExtendedShadingMaterialContent),
/* harmony export */   "PbrShadingMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.PbrShadingMaterialContent),
/* harmony export */   "ProjectionMatrixShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ProjectionMatrixShaderNode),
/* harmony export */   "ScalarToVector4ShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ScalarToVector4ShaderNode),
/* harmony export */   "ShaderGraphResolver": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_0__.ShaderGraphResolver),
/* harmony export */   "ShaderityMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.ShaderityMaterialContent),
/* harmony export */   "ShaderityUtility": () => (/* reexport safe */ _core_index__WEBPACK_IMPORTED_MODULE_0__.ShaderityUtility),
/* harmony export */   "ShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.ShadowMapDecodeClassicMaterialContent),
/* harmony export */   "SynthesizeHdrMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.SynthesizeHdrMaterialContent),
/* harmony export */   "TextureFetchMaterialNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.TextureFetchMaterialNode),
/* harmony export */   "UniformDataShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.UniformDataShaderNode),
/* harmony export */   "VarianceShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _contents_index__WEBPACK_IMPORTED_MODULE_2__.VarianceShadowMapDecodeClassicMaterialContent),
/* harmony export */   "VaryingInVariableShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.VaryingInVariableShaderNode),
/* harmony export */   "VaryingOutVariableShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.VaryingOutVariableShaderNode),
/* harmony export */   "Vector3AndScalarToVector4ShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.Vector3AndScalarToVector4ShaderNode),
/* harmony export */   "ViewMatrixShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ViewMatrixShaderNode),
/* harmony export */   "WireframeMaterialNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.WireframeMaterialNode),
/* harmony export */   "WorldMatrixShaderNode": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.WorldMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _core_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/index */ "./src/foundation/materials/core/index.ts");
/* harmony import */ var _nodes_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodes/index */ "./src/foundation/materials/nodes/index.ts");
/* harmony import */ var _contents_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contents/index */ "./src/foundation/materials/contents/index.ts");





/***/ }),

/***/ "./src/foundation/materials/nodes/AddShaderNode.ts":
/*!*********************************************************!*\
  !*** ./src/foundation/materials/nodes/AddShaderNode.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AddShaderNode": () => (/* binding */ AddShaderNode)
/* harmony export */ });
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_Add_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Add.glsl */ "./src/webgl/shaderity_shaders/nodes/Add.glsl");



class AddShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('add', _webgl_shaderity_shaders_nodes_Add_glsl__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__inputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'lhs',
        });
        this.__inputs.push({
            compositionType: compositionType,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'rhs',
        });
        this.__outputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/AttributeNormalShaderNode.ts":
/*!*********************************************************************!*\
  !*** ./src/foundation/materials/nodes/AttributeNormalShaderNode.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AttributeNormalShaderNode": () => (/* binding */ AttributeNormalShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_AttributeNormal_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/AttributeNormal.vert */ "./src/webgl/shaderity_shaders/nodes/AttributeNormal.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class AttributeNormalShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('attributeNormal', _webgl_shaderity_shaders_nodes_AttributeNormal_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec3,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/AttributePositionShaderNode.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/materials/nodes/AttributePositionShaderNode.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AttributePositionShaderNode": () => (/* binding */ AttributePositionShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_AttributePosition_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/AttributePosition.vert */ "./src/webgl/shaderity_shaders/nodes/AttributePosition.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class AttributePositionShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('attributePosition', _webgl_shaderity_shaders_nodes_AttributePosition_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/BlockBeginShaderNode.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/materials/nodes/BlockBeginShaderNode.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockBeginShaderNode": () => (/* binding */ BlockBeginShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_nodes_BlockBeginShader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/BlockBeginShader */ "./src/webgl/shaders/nodes/BlockBeginShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class BlockBeginShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('blockBegin');
        this.__valueInputs = [];
        this.__valueOutputs = [];
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_BlockBeginShader__WEBPACK_IMPORTED_MODULE_2__.BlockBeginShader(this.__shaderFunctionName, this.__valueInputs, this.__valueOutputs);
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Bool,
            name: 'blockStart',
        });
    }
    addInputAndOutput(compositionType, componentType) {
        const input = {
            compositionType: compositionType,
            componentType: componentType,
            name: `value_${this.__valueInputs.length}`,
        };
        const output = {
            compositionType: compositionType,
            componentType: componentType,
            name: `outValue_${this.__valueOutputs.length}`,
        };
        this.__inputs.push(input);
        this.__outputs.push(output);
        this.__valueInputs.push(input);
        this.__valueOutputs.push(output);
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/BlockEndShaderNode.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/materials/nodes/BlockEndShaderNode.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockEndShaderNode": () => (/* binding */ BlockEndShaderNode)
/* harmony export */ });
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _webgl_shaders_nodes_BlockEndShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/BlockEndShader */ "./src/webgl/shaders/nodes/BlockEndShader.ts");


class BlockEndShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode {
    constructor() {
        super('blockEnd');
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_BlockEndShader__WEBPACK_IMPORTED_MODULE_1__.BlockEndShader(this.__shaderFunctionName, this.__inputs, this.__outputs);
    }
    addInputAndOutput(compositionType, componentType) {
        const input = {
            compositionType: compositionType,
            componentType: componentType,
            name: `value_${this.__inputs.length}`,
        };
        const output = {
            compositionType: compositionType,
            componentType: componentType,
            name: `outValue_${this.__outputs.length}`,
        };
        this.__inputs.push(input);
        this.__outputs.push(output);
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/ConstantVariableShaderNode.ts":
/*!**********************************************************************!*\
  !*** ./src/foundation/materials/nodes/ConstantVariableShaderNode.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConstantVariableShaderNode": () => (/* binding */ ConstantVariableShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaders_nodes_ConstantVariableShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/ConstantVariableShader */ "./src/webgl/shaders/nodes/ConstantVariableShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");


class ConstantVariableShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('constantVariable', undefined, undefined);
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_ConstantVariableShader__WEBPACK_IMPORTED_MODULE_0__.ConstantVariableShader(this.__shaderFunctionName, compositionType, componentType);
        this.__outputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'outValue',
        });
    }
    setDefaultInputValue(inputName, value) {
        if (inputName === 'value') {
            this.__shader.setConstantValue(value);
        }
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/DotProductShaderNode.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/materials/nodes/DotProductShaderNode.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DotProductShaderNode": () => (/* binding */ DotProductShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaderity_shaders_nodes_DotProduct_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/DotProduct.glsl */ "./src/webgl/shaderity_shaders/nodes/DotProduct.glsl");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");




class DotProductShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('dotProduct', _webgl_shaderity_shaders_nodes_DotProduct_glsl__WEBPACK_IMPORTED_MODULE_0__["default"].code);
        this.__inputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'lhs',
        });
        this.__inputs.push({
            compositionType: compositionType,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            name: 'rhs',
        });
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Scalar,
            componentType: componentType,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/GreaterShaderNode.ts":
/*!*************************************************************!*\
  !*** ./src/foundation/materials/nodes/GreaterShaderNode.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GreaterShaderNode": () => (/* binding */ GreaterShaderNode)
/* harmony export */ });
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_Greater_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Greater.glsl */ "./src/webgl/shaderity_shaders/nodes/Greater.glsl");




class GreaterShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('greater', _webgl_shaderity_shaders_nodes_Greater_glsl__WEBPACK_IMPORTED_MODULE_3__["default"].code);
        this.__inputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'lhs',
        });
        this.__inputs.push({
            compositionType: compositionType,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Float,
            name: 'rhs',
        });
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.Bool,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/IfStatementShaderNode.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/materials/nodes/IfStatementShaderNode.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IfStatementShaderNode": () => (/* binding */ IfStatementShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_nodes_IfStatementShader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/IfStatementShader */ "./src/webgl/shaders/nodes/IfStatementShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class IfStatementShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('ifStatement', undefined, new _webgl_shaders_nodes_IfStatementShader__WEBPACK_IMPORTED_MODULE_2__.IfStatementShader());
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Bool,
            name: 'condition',
        });
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Unknown,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Unknown,
            name: 'ifStart',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/MultiplyShaderNode.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/materials/nodes/MultiplyShaderNode.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MultiplyShaderNode": () => (/* binding */ MultiplyShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_Multiply_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Multiply.glsl */ "./src/webgl/shaderity_shaders/nodes/Multiply.glsl");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");



class MultiplyShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_2__.AbstractShaderNode {
    constructor(lhsCompositionType, lhsComponentType, rhsCompositionType, rhsComponentType) {
        super('multiply', _webgl_shaderity_shaders_nodes_Multiply_glsl__WEBPACK_IMPORTED_MODULE_1__["default"].code);
        let outValueCompositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Unknown;
        if (lhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4 &&
            rhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4) {
            outValueCompositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4;
        }
        else if (lhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4 &&
            rhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4) {
            outValueCompositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4;
        }
        else if (lhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar &&
            rhsCompositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar) {
            outValueCompositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar;
        }
        this.__inputs.push({
            compositionType: lhsCompositionType,
            componentType: lhsComponentType,
            name: 'lhs',
        });
        this.__inputs.push({
            compositionType: rhsCompositionType,
            componentType: rhsComponentType,
            name: 'rhs',
        });
        this.__outputs.push({
            compositionType: outValueCompositionType,
            componentType: lhsComponentType,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/NormalMatrixShaderNode.ts":
/*!******************************************************************!*\
  !*** ./src/foundation/materials/nodes/NormalMatrixShaderNode.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NormalMatrixShaderNode": () => (/* binding */ NormalMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_NormalMatrix_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/NormalMatrix.vert */ "./src/webgl/shaderity_shaders/nodes/NormalMatrix.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class NormalMatrixShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('normalMatrix', _webgl_shaderity_shaders_nodes_NormalMatrix_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat3,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/NormalizeShaderNode.ts":
/*!***************************************************************!*\
  !*** ./src/foundation/materials/nodes/NormalizeShaderNode.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NormalizeShaderNode": () => (/* binding */ NormalizeShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaderity_shaders_nodes_Normalize_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Normalize.glsl */ "./src/webgl/shaderity_shaders/nodes/Normalize.glsl");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");


class NormalizeShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('normalize', _webgl_shaderity_shaders_nodes_Normalize_glsl__WEBPACK_IMPORTED_MODULE_0__["default"].code);
        this.__inputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'value',
        });
        this.__outputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/OutColorShaderNode.ts":
/*!**************************************************************!*\
  !*** ./src/foundation/materials/nodes/OutColorShaderNode.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OutColorShaderNode": () => (/* binding */ OutColorShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_nodes_EndShader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/EndShader */ "./src/webgl/shaders/nodes/EndShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class OutColorShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('outColor', undefined, _webgl_shaders_nodes_EndShader__WEBPACK_IMPORTED_MODULE_2__.EndShader.getInstance());
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'value',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/OutPositionShaderNode.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/materials/nodes/OutPositionShaderNode.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OutPositionShaderNode": () => (/* binding */ OutPositionShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_nodes_EndShader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/EndShader */ "./src/webgl/shaders/nodes/EndShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class OutPositionShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('outPosition', undefined, _webgl_shaders_nodes_EndShader__WEBPACK_IMPORTED_MODULE_2__.EndShader.getInstance());
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'value',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/ProjectionMatrixShaderNode.ts":
/*!**********************************************************************!*\
  !*** ./src/foundation/materials/nodes/ProjectionMatrixShaderNode.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProjectionMatrixShaderNode": () => (/* binding */ ProjectionMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_ProjectionMatrix_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/ProjectionMatrix.vert */ "./src/webgl/shaderity_shaders/nodes/ProjectionMatrix.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class ProjectionMatrixShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('projectionMatrix', _webgl_shaderity_shaders_nodes_ProjectionMatrix_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/ScalarToVector4ShaderNode.ts":
/*!*********************************************************************!*\
  !*** ./src/foundation/materials/nodes/ScalarToVector4ShaderNode.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ScalarToVector4ShaderNode": () => (/* binding */ ScalarToVector4ShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_ScalarToVector4_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/ScalarToVector4.glsl */ "./src/webgl/shaderity_shaders/nodes/ScalarToVector4.glsl");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class ScalarToVector4ShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('scalarToVector4', _webgl_shaderity_shaders_nodes_ScalarToVector4_glsl__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'x',
        });
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'y',
        });
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'z',
        });
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'w',
        });
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/TextureFetchMaterialNode.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/materials/nodes/TextureFetchMaterialNode.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextureFetchMaterialNode": () => (/* binding */ TextureFetchMaterialNode)
/* harmony export */ });
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractMaterialContent */ "./src/foundation/materials/core/AbstractMaterialContent.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaders_nodes_TextureFetchShader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/TextureFetchShader */ "./src/webgl/shaders/nodes/TextureFetchShader.ts");
/* harmony import */ var _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");






class TextureFetchMaterialNode extends _core_AbstractMaterialContent__WEBPACK_IMPORTED_MODULE_1__.AbstractMaterialContent {
    constructor() {
        super(new _webgl_shaders_nodes_TextureFetchShader__WEBPACK_IMPORTED_MODULE_4__.TextureFetchShader(), 'textureFetch');
        this.generalTextureMaterialNodeUID = new _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass({
            str: `generalTexture_${this.materialNodeUid}`,
        });
        const shaderSemanticsInfoArray = [
            {
                semantic: this.generalTextureMaterialNodeUID,
                componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int,
                compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Texture2D,
                stage: _definitions_ShaderType__WEBPACK_IMPORTED_MODULE_5__.ShaderType.PixelShader,
                isCustomSetting: false,
                soloDatum: false,
                min: 0,
                max: Number.MAX_SAFE_INTEGER,
            },
        ];
        this.setShaderSemanticsInfoArray(shaderSemanticsInfoArray);
        // Input
        this.__vertexInputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec2,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            name: 'texcoord',
        });
        // Output
        this.__vertexOutputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            name: 'outColor',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/UniformDataShaderNode.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/materials/nodes/UniformDataShaderNode.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UniformDataShaderNode": () => (/* binding */ UniformDataShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaders_nodes_UniformDataShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/UniformDataShader */ "./src/webgl/shaders/nodes/UniformDataShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");


class UniformDataShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('uniformData');
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_UniformDataShader__WEBPACK_IMPORTED_MODULE_0__.UniformDataShader(this.__shaderFunctionName, compositionType, componentType);
        this.__outputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'outValue',
        });
    }
    setDefaultInputValue(inputName, value) {
        if (inputName === 'value') {
            this.__shader.setDefaultValue(value);
        }
    }
    setUniformDataName(value) {
        this.__shader.setVariableName(value);
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/VaryingInVariableShaderNode.ts":
/*!***********************************************************************!*\
  !*** ./src/foundation/materials/nodes/VaryingInVariableShaderNode.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VaryingInVariableShaderNode": () => (/* binding */ VaryingInVariableShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaders_nodes_VaryingVariableShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/VaryingVariableShader */ "./src/webgl/shaders/nodes/VaryingVariableShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");


class VaryingInVariableShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('varyingInVariable');
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_VaryingVariableShader__WEBPACK_IMPORTED_MODULE_0__.VaryingVariableShader(this.__shaderFunctionName, compositionType, componentType);
        this.__outputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'outValue',
            isClosed: true,
        });
    }
    setVaryingVariableName(value) {
        this.__shader.setVariableName(value);
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/VaryingOutVariableShaderNode.ts":
/*!************************************************************************!*\
  !*** ./src/foundation/materials/nodes/VaryingOutVariableShaderNode.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VaryingOutVariableShaderNode": () => (/* binding */ VaryingOutVariableShaderNode)
/* harmony export */ });
/* harmony import */ var _webgl_shaders_nodes_VaryingVariableShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../webgl/shaders/nodes/VaryingVariableShader */ "./src/webgl/shaders/nodes/VaryingVariableShader.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");


class VaryingOutVariableShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_1__.AbstractShaderNode {
    constructor(compositionType, componentType) {
        super('varyingOutVariable');
        this.__shaderFunctionName += '_' + this.__shaderNodeUid;
        this.__shader = new _webgl_shaders_nodes_VaryingVariableShader__WEBPACK_IMPORTED_MODULE_0__.VaryingVariableShader(this.__shaderFunctionName, compositionType, componentType);
        this.__inputs.push({
            compositionType: compositionType,
            componentType: componentType,
            name: 'value',
        });
    }
    setVaryingVariableName(value) {
        this.__shader.setVariableName(value);
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/Vector3AndScalarToVector4ShaderNode.ts":
/*!*******************************************************************************!*\
  !*** ./src/foundation/materials/nodes/Vector3AndScalarToVector4ShaderNode.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Vector3AndScalarToVector4ShaderNode": () => (/* binding */ Vector3AndScalarToVector4ShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_Vector3AndScalarToVector4_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Vector3AndScalarToVector4.glsl */ "./src/webgl/shaderity_shaders/nodes/Vector3AndScalarToVector4.glsl");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class Vector3AndScalarToVector4ShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('vector3AndScalarToVector4', _webgl_shaderity_shaders_nodes_Vector3AndScalarToVector4_glsl__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec3,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'xyz',
        });
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'w',
        });
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/ViewMatrixShaderNode.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/materials/nodes/ViewMatrixShaderNode.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ViewMatrixShaderNode": () => (/* binding */ ViewMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_ViewMatrix_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/ViewMatrix.vert */ "./src/webgl/shaderity_shaders/nodes/ViewMatrix.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class ViewMatrixShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('viewMatrix', _webgl_shaderity_shaders_nodes_ViewMatrix_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/WireframeMaterialNode.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/materials/nodes/WireframeMaterialNode.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WireframeMaterialNode": () => (/* binding */ WireframeMaterialNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_Wireframe_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/Wireframe.glsl */ "./src/webgl/shaderity_shaders/nodes/Wireframe.glsl");




class WireframeMaterialNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_2__.AbstractShaderNode {
    constructor() {
        super('wireframe', _webgl_shaderity_shaders_nodes_Wireframe_glsl__WEBPACK_IMPORTED_MODULE_3__["default"].code);
        // Input
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'existingFragColor',
        });
        this.__inputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'wireframeColor',
        });
        // Output
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outColor',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/WorldMatrixShaderNode.ts":
/*!*****************************************************************!*\
  !*** ./src/foundation/materials/nodes/WorldMatrixShaderNode.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WorldMatrixShaderNode": () => (/* binding */ WorldMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _webgl_shaderity_shaders_nodes_WorldMatrix_vert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/shaderity_shaders/nodes/WorldMatrix.vert */ "./src/webgl/shaderity_shaders/nodes/WorldMatrix.vert");
/* harmony import */ var _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/AbstractShaderNode */ "./src/foundation/materials/core/AbstractShaderNode.ts");




class WorldMatrixShaderNode extends _core_AbstractShaderNode__WEBPACK_IMPORTED_MODULE_3__.AbstractShaderNode {
    constructor() {
        super('worldMatrix', _webgl_shaderity_shaders_nodes_WorldMatrix_vert__WEBPACK_IMPORTED_MODULE_2__["default"].code);
        this.__outputs.push({
            compositionType: _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4,
            componentType: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Float,
            name: 'outValue',
        });
    }
}


/***/ }),

/***/ "./src/foundation/materials/nodes/index.ts":
/*!*************************************************!*\
  !*** ./src/foundation/materials/nodes/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AddShaderNode": () => (/* reexport safe */ _AddShaderNode__WEBPACK_IMPORTED_MODULE_0__.AddShaderNode),
/* harmony export */   "AttributeNormalShaderNode": () => (/* reexport safe */ _AttributeNormalShaderNode__WEBPACK_IMPORTED_MODULE_1__.AttributeNormalShaderNode),
/* harmony export */   "AttributePositionShaderNode": () => (/* reexport safe */ _AttributePositionShaderNode__WEBPACK_IMPORTED_MODULE_2__.AttributePositionShaderNode),
/* harmony export */   "BlockBeginShaderNode": () => (/* reexport safe */ _BlockBeginShaderNode__WEBPACK_IMPORTED_MODULE_3__.BlockBeginShaderNode),
/* harmony export */   "BlockEndShaderNode": () => (/* reexport safe */ _BlockEndShaderNode__WEBPACK_IMPORTED_MODULE_4__.BlockEndShaderNode),
/* harmony export */   "ConstantVariableShaderNode": () => (/* reexport safe */ _ConstantVariableShaderNode__WEBPACK_IMPORTED_MODULE_5__.ConstantVariableShaderNode),
/* harmony export */   "DotProductShaderNode": () => (/* reexport safe */ _DotProductShaderNode__WEBPACK_IMPORTED_MODULE_6__.DotProductShaderNode),
/* harmony export */   "GreaterShaderNode": () => (/* reexport safe */ _GreaterShaderNode__WEBPACK_IMPORTED_MODULE_7__.GreaterShaderNode),
/* harmony export */   "IfStatementShaderNode": () => (/* reexport safe */ _IfStatementShaderNode__WEBPACK_IMPORTED_MODULE_8__.IfStatementShaderNode),
/* harmony export */   "MultiplyShaderNode": () => (/* reexport safe */ _MultiplyShaderNode__WEBPACK_IMPORTED_MODULE_9__.MultiplyShaderNode),
/* harmony export */   "NormalMatrixShaderNode": () => (/* reexport safe */ _NormalMatrixShaderNode__WEBPACK_IMPORTED_MODULE_10__.NormalMatrixShaderNode),
/* harmony export */   "NormalizeShaderNode": () => (/* reexport safe */ _NormalizeShaderNode__WEBPACK_IMPORTED_MODULE_11__.NormalizeShaderNode),
/* harmony export */   "OutColorShaderNode": () => (/* reexport safe */ _OutColorShaderNode__WEBPACK_IMPORTED_MODULE_12__.OutColorShaderNode),
/* harmony export */   "OutPositionShaderNode": () => (/* reexport safe */ _OutPositionShaderNode__WEBPACK_IMPORTED_MODULE_13__.OutPositionShaderNode),
/* harmony export */   "ProjectionMatrixShaderNode": () => (/* reexport safe */ _ProjectionMatrixShaderNode__WEBPACK_IMPORTED_MODULE_14__.ProjectionMatrixShaderNode),
/* harmony export */   "ScalarToVector4ShaderNode": () => (/* reexport safe */ _ScalarToVector4ShaderNode__WEBPACK_IMPORTED_MODULE_15__.ScalarToVector4ShaderNode),
/* harmony export */   "TextureFetchMaterialNode": () => (/* reexport safe */ _TextureFetchMaterialNode__WEBPACK_IMPORTED_MODULE_16__.TextureFetchMaterialNode),
/* harmony export */   "UniformDataShaderNode": () => (/* reexport safe */ _UniformDataShaderNode__WEBPACK_IMPORTED_MODULE_17__.UniformDataShaderNode),
/* harmony export */   "VaryingInVariableShaderNode": () => (/* reexport safe */ _VaryingInVariableShaderNode__WEBPACK_IMPORTED_MODULE_18__.VaryingInVariableShaderNode),
/* harmony export */   "VaryingOutVariableShaderNode": () => (/* reexport safe */ _VaryingOutVariableShaderNode__WEBPACK_IMPORTED_MODULE_19__.VaryingOutVariableShaderNode),
/* harmony export */   "Vector3AndScalarToVector4ShaderNode": () => (/* reexport safe */ _Vector3AndScalarToVector4ShaderNode__WEBPACK_IMPORTED_MODULE_20__.Vector3AndScalarToVector4ShaderNode),
/* harmony export */   "ViewMatrixShaderNode": () => (/* reexport safe */ _ViewMatrixShaderNode__WEBPACK_IMPORTED_MODULE_21__.ViewMatrixShaderNode),
/* harmony export */   "WireframeMaterialNode": () => (/* reexport safe */ _WireframeMaterialNode__WEBPACK_IMPORTED_MODULE_22__.WireframeMaterialNode),
/* harmony export */   "WorldMatrixShaderNode": () => (/* reexport safe */ _WorldMatrixShaderNode__WEBPACK_IMPORTED_MODULE_23__.WorldMatrixShaderNode)
/* harmony export */ });
/* harmony import */ var _AddShaderNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AddShaderNode */ "./src/foundation/materials/nodes/AddShaderNode.ts");
/* harmony import */ var _AttributeNormalShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AttributeNormalShaderNode */ "./src/foundation/materials/nodes/AttributeNormalShaderNode.ts");
/* harmony import */ var _AttributePositionShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AttributePositionShaderNode */ "./src/foundation/materials/nodes/AttributePositionShaderNode.ts");
/* harmony import */ var _BlockBeginShaderNode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BlockBeginShaderNode */ "./src/foundation/materials/nodes/BlockBeginShaderNode.ts");
/* harmony import */ var _BlockEndShaderNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BlockEndShaderNode */ "./src/foundation/materials/nodes/BlockEndShaderNode.ts");
/* harmony import */ var _ConstantVariableShaderNode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConstantVariableShaderNode */ "./src/foundation/materials/nodes/ConstantVariableShaderNode.ts");
/* harmony import */ var _DotProductShaderNode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DotProductShaderNode */ "./src/foundation/materials/nodes/DotProductShaderNode.ts");
/* harmony import */ var _GreaterShaderNode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GreaterShaderNode */ "./src/foundation/materials/nodes/GreaterShaderNode.ts");
/* harmony import */ var _IfStatementShaderNode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./IfStatementShaderNode */ "./src/foundation/materials/nodes/IfStatementShaderNode.ts");
/* harmony import */ var _MultiplyShaderNode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MultiplyShaderNode */ "./src/foundation/materials/nodes/MultiplyShaderNode.ts");
/* harmony import */ var _NormalMatrixShaderNode__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./NormalMatrixShaderNode */ "./src/foundation/materials/nodes/NormalMatrixShaderNode.ts");
/* harmony import */ var _NormalizeShaderNode__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./NormalizeShaderNode */ "./src/foundation/materials/nodes/NormalizeShaderNode.ts");
/* harmony import */ var _OutColorShaderNode__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./OutColorShaderNode */ "./src/foundation/materials/nodes/OutColorShaderNode.ts");
/* harmony import */ var _OutPositionShaderNode__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./OutPositionShaderNode */ "./src/foundation/materials/nodes/OutPositionShaderNode.ts");
/* harmony import */ var _ProjectionMatrixShaderNode__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ProjectionMatrixShaderNode */ "./src/foundation/materials/nodes/ProjectionMatrixShaderNode.ts");
/* harmony import */ var _ScalarToVector4ShaderNode__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./ScalarToVector4ShaderNode */ "./src/foundation/materials/nodes/ScalarToVector4ShaderNode.ts");
/* harmony import */ var _TextureFetchMaterialNode__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./TextureFetchMaterialNode */ "./src/foundation/materials/nodes/TextureFetchMaterialNode.ts");
/* harmony import */ var _UniformDataShaderNode__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./UniformDataShaderNode */ "./src/foundation/materials/nodes/UniformDataShaderNode.ts");
/* harmony import */ var _VaryingInVariableShaderNode__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./VaryingInVariableShaderNode */ "./src/foundation/materials/nodes/VaryingInVariableShaderNode.ts");
/* harmony import */ var _VaryingOutVariableShaderNode__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./VaryingOutVariableShaderNode */ "./src/foundation/materials/nodes/VaryingOutVariableShaderNode.ts");
/* harmony import */ var _Vector3AndScalarToVector4ShaderNode__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Vector3AndScalarToVector4ShaderNode */ "./src/foundation/materials/nodes/Vector3AndScalarToVector4ShaderNode.ts");
/* harmony import */ var _ViewMatrixShaderNode__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ViewMatrixShaderNode */ "./src/foundation/materials/nodes/ViewMatrixShaderNode.ts");
/* harmony import */ var _WireframeMaterialNode__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./WireframeMaterialNode */ "./src/foundation/materials/nodes/WireframeMaterialNode.ts");
/* harmony import */ var _WorldMatrixShaderNode__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./WorldMatrixShaderNode */ "./src/foundation/materials/nodes/WorldMatrixShaderNode.ts");


























/***/ }),

/***/ "./src/foundation/math/AABB.ts":
/*!*************************************!*\
  !*** ./src/foundation/math/AABB.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABB": () => (/* binding */ AABB)
/* harmony export */ });
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");



class AABB {
    constructor() {
        this.__min = _MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.fromCopyArray([
            Number.MAX_VALUE,
            Number.MAX_VALUE,
            Number.MAX_VALUE,
        ]);
        this.__max = _MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.fromCopyArray([
            -Number.MAX_VALUE,
            -Number.MAX_VALUE,
            -Number.MAX_VALUE,
        ]);
        this.__centerPoint = _MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
        this.__lengthCenterToCorner = 0;
        this.__isCenterPointDirty = false;
        this.__isLengthCenterToCornerDirty = false;
        this.__isVanilla = true;
    }
    clone() {
        const instance = new AABB();
        instance.__max = this.__max.clone();
        instance.__min = this.__min.clone();
        instance.__centerPoint = this.__centerPoint.clone();
        instance.__lengthCenterToCorner = this.__lengthCenterToCorner;
        instance.__isCenterPointDirty = this.__isCenterPointDirty;
        instance.__isLengthCenterToCornerDirty = this.__isLengthCenterToCornerDirty;
        return instance;
    }
    copyComponents(aabb) {
        this.__max.copyComponents(aabb.__max);
        this.__min.copyComponents(aabb.__min);
        this.__centerPoint.copyComponents(aabb.__centerPoint);
        this.__lengthCenterToCorner = aabb.__lengthCenterToCorner;
        this.__isCenterPointDirty = aabb.__isCenterPointDirty;
        this.__isLengthCenterToCornerDirty = aabb.__isLengthCenterToCornerDirty;
        this.__isVanilla = false;
        return this;
    }
    initialize() {
        this.__min.setComponents(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
        this.__max.setComponents(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
        this.__centerPoint.zero();
        this.__lengthCenterToCorner = 0;
        this.__isCenterPointDirty = false;
        this.__isLengthCenterToCornerDirty = false;
        this.__isVanilla = true;
    }
    set minPoint(val) {
        this.__min.copyComponents(val);
        this.__isCenterPointDirty = true;
        this.__isLengthCenterToCornerDirty = true;
        this.__isVanilla = false;
    }
    get minPoint() {
        return this.__min;
    }
    set maxPoint(val) {
        this.__max.copyComponents(val);
        this.__isCenterPointDirty = true;
        this.__isLengthCenterToCornerDirty = true;
        this.__isVanilla = false;
    }
    get maxPoint() {
        return this.__max;
    }
    isVanilla() {
        return this.__isVanilla;
    }
    addPosition(positionVector) {
        this.__min.x =
            positionVector.x < this.__min.x ? positionVector.x : this.__min.x;
        this.__min.y =
            positionVector.y < this.__min.y ? positionVector.y : this.__min.y;
        this.__min.z =
            positionVector.z < this.__min.z ? positionVector.z : this.__min.z;
        this.__max.x =
            this.__max.x < positionVector.x ? positionVector.x : this.__max.x;
        this.__max.y =
            this.__max.y < positionVector.y ? positionVector.y : this.__max.y;
        this.__max.z =
            this.__max.z < positionVector.z ? positionVector.z : this.__max.z;
        this.__isCenterPointDirty = true;
        this.__isLengthCenterToCornerDirty = true;
        this.__isVanilla = false;
        return positionVector;
    }
    addPositionWithArray(array, index) {
        this.__min.x =
            array[index + 0] < this.__min.x ? array[index + 0] : this.__min.x;
        this.__min.y =
            array[index + 1] < this.__min.y ? array[index + 1] : this.__min.y;
        this.__min.z =
            array[index + 2] < this.__min.z ? array[index + 2] : this.__min.z;
        this.__max.x =
            this.__max.x < array[index + 0] ? array[index + 0] : this.__max.x;
        this.__max.y =
            this.__max.y < array[index + 1] ? array[index + 1] : this.__max.y;
        this.__max.z =
            this.__max.z < array[index + 2] ? array[index + 2] : this.__max.z;
        this.__isCenterPointDirty = true;
        this.__isLengthCenterToCornerDirty = true;
        this.__isVanilla = false;
        return array;
    }
    mergeAABB(aabb) {
        let isUpdated = false;
        if (aabb.isVanilla()) {
            return isUpdated;
        }
        this.__isCenterPointDirty = true;
        this.__isLengthCenterToCornerDirty = true;
        if (this.isVanilla()) {
            this.__min.copyComponents(aabb.minPoint);
            this.__max.copyComponents(aabb.maxPoint);
            this.__isVanilla = false;
            return true;
        }
        if (aabb.minPoint.x < this.__min.x) {
            this.__min.x = aabb.minPoint.x;
        }
        if (aabb.minPoint.y < this.__min.y) {
            this.__min.y = aabb.minPoint.y;
        }
        if (aabb.minPoint.z < this.__min.z) {
            this.__min.z = aabb.minPoint.z;
        }
        if (this.__max.x < aabb.maxPoint.x) {
            this.__max.x = aabb.maxPoint.x;
        }
        if (this.__max.y < aabb.maxPoint.y) {
            this.__max.y = aabb.maxPoint.y;
        }
        if (this.__max.z < aabb.maxPoint.z) {
            this.__max.z = aabb.maxPoint.z;
        }
        return true;
    }
    get centerPoint() {
        if (this.__isCenterPointDirty) {
            _MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.addTo(this.__min, this.__max, this.__centerPoint).divide(2);
            this.__isCenterPointDirty = false;
        }
        return this.__centerPoint;
    }
    get lengthCenterToCorner() {
        if (this.__isLengthCenterToCornerDirty) {
            this.__lengthCenterToCorner = _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.lengthBtw(this.centerPoint, this.maxPoint);
            this.__isLengthCenterToCornerDirty = false;
        }
        return this.__lengthCenterToCorner;
    }
    get sizeX() {
        return this.__max.x - this.__min.x;
    }
    get sizeY() {
        return this.__max.y - this.__min.y;
    }
    get sizeZ() {
        return this.__max.z - this.__min.z;
    }
    static multiplyMatrix(matrix, aabb) {
        if (aabb.isVanilla()) {
            return aabb.clone();
        }
        const newAabb = new AABB();
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        newAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        newAabb.addPosition(AABB.__tmpVector3);
        return newAabb;
    }
    static multiplyMatrixTo(matrix, aabb, outAabb) {
        if (aabb.isVanilla()) {
            return outAabb.copyComponents(aabb);
        }
        outAabb.initialize();
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__min.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__min.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__min.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        AABB.__tmpVector3.x = aabb.__max.x;
        AABB.__tmpVector3.y = aabb.__max.y;
        AABB.__tmpVector3.z = aabb.__max.z;
        matrix.multiplyVector3To(AABB.__tmpVector3, AABB.__tmpVector3);
        outAabb.addPosition(AABB.__tmpVector3);
        return outAabb;
    }
    toString() {
        return ('AABB_min: ' +
            this.__min +
            '\n' +
            'AABB_max: ' +
            this.__max +
            '\n' +
            'centerPoint: ' +
            this.__centerPoint +
            '\n' +
            'lengthCenterToCorner: ' +
            this.__lengthCenterToCorner);
    }
    toStringApproximately() {
        return ('AABB_max: ' +
            this.__max.toStringApproximately() +
            '\n' +
            'AABB_min: ' +
            this.__min.toStringApproximately() +
            '\n' +
            'centerPoint: ' +
            this.__centerPoint.toStringApproximately() +
            '\n' +
            'lengthCenterToCorner: ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this.__lengthCenterToCorner));
    }
}
AABB.__tmpVector3 = _MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();


/***/ }),

/***/ "./src/foundation/math/AbstractMathNumber.ts":
/*!***************************************************!*\
  !*** ./src/foundation/math/AbstractMathNumber.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractArrayBufferBaseMathNumber": () => (/* binding */ AbstractArrayBufferBaseMathNumber)
/* harmony export */ });
class AbstractArrayBufferBaseMathNumber {
    constructor() {
        this._v = new Float32Array();
    }
    isTheSourceSame(arrayBuffer) {
        return this._v.buffer === arrayBuffer;
    }
}


/***/ }),

/***/ "./src/foundation/math/AbstractMatrix.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/AbstractMatrix.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractMatrix": () => (/* binding */ AbstractMatrix)
/* harmony export */ });
class AbstractMatrix {
    constructor() {
        this._v = new Float32Array();
    }
    at(row_i, column_i) {
        throw new Error('Method not implemented.');
    }
    toString() {
        throw new Error('Method not implemented.');
    }
    toStringApproximately() {
        throw new Error('Method not implemented.');
    }
    flattenAsArray() {
        throw new Error('Method not implemented.');
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    v(i) {
        return this._v[i];
    }
    determinant() {
        throw new Error('Method not implemented.');
    }
    get className() {
        return this.constructor.name;
    }
    get isIdentityMatrixClass() {
        return false;
    }
    isTheSourceSame(arrayBuffer) {
        return this._v.buffer === arrayBuffer;
    }
}


/***/ }),

/***/ "./src/foundation/math/AbstractQuaternion.ts":
/*!***************************************************!*\
  !*** ./src/foundation/math/AbstractQuaternion.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractQuaternion": () => (/* binding */ AbstractQuaternion)
/* harmony export */ });
class AbstractQuaternion {
    constructor() {
        this._v = new Float32Array();
    }
    get className() {
        return this.constructor.name;
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return this._v[3];
    }
    at(i) {
        return this._v[i];
    }
    length() {
        return Math.hypot(this._v[0], this._v[1], this._v[2], this._v[3]);
    }
    lengthSquared() {
        return (this._v[0] ** 2 + this._v[1] ** 2 + this._v[2] ** 2 + this._v[3] ** 2);
    }
    toString() {
        throw new Error('Method not implemented.');
    }
    toStringApproximately() {
        throw new Error('Method not implemented.');
    }
    flattenAsArray() {
        throw new Error('Method not implemented.');
    }
    isDummy() {
        throw new Error('Method not implemented.');
    }
    isEqual(vec, delta) {
        throw new Error('Method not implemented.');
    }
    isStrictEqual(vec) {
        throw new Error('Method not implemented.');
    }
    toEulerAnglesTo(out) {
        throw new Error('Method not implemented.');
    }
    /**
     * dot product
     */
    dot(quat) {
        return (this._v[0] * quat._v[0] +
            this._v[1] * quat._v[1] +
            this._v[2] * quat._v[2] +
            this._v[3] * quat._v[3]);
    }
    clone() {
        throw new Error('Method not implemented.');
    }
}


/***/ }),

/***/ "./src/foundation/math/AbstractVector.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/AbstractVector.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractVector": () => (/* binding */ AbstractVector)
/* harmony export */ });
class AbstractVector {
    constructor() {
        this._v = new Float32Array();
    }
    get glslStrAsFloat() {
        throw new Error('Method not implemented.');
    }
    get glslStrAsInt() {
        throw new Error('Method not implemented.');
    }
    isEqual(vec, delta) {
        throw new Error('Method not implemented.');
    }
    isStrictEqual(vec) {
        throw new Error('Method not implemented.');
    }
    length() {
        throw new Error('Method not implemented.');
    }
    lengthSquared() {
        throw new Error('Method not implemented.');
    }
    lengthTo(vec) {
        throw new Error('Method not implemented.');
    }
    dot(vec) {
        throw new Error('Method not implemented.');
    }
    at(i) {
        return this._v[i];
    }
    toString() {
        throw new Error('Method not implemented.');
    }
    toStringApproximately() {
        throw new Error('Method not implemented.');
    }
    flattenAsArray() {
        throw new Error('Method not implemented.');
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    v(i) {
        return this._v[i];
    }
    isTheSourceSame(arrayBuffer) {
        return this._v.buffer === arrayBuffer;
    }
    get className() {
        return this.constructor.name;
    }
}


/***/ }),

/***/ "./src/foundation/math/ColorRgb.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/ColorRgb.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColorRgb": () => (/* binding */ ColorRgb)
/* harmony export */ });
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");

class ColorRgb extends _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3 {
    constructor(r) {
        super(r);
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return 1;
    }
    get r() {
        return this._v[0];
    }
    get g() {
        return this._v[1];
    }
    get b() {
        return this._v[2];
    }
    get a() {
        return 1;
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float32Array);
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/ColorRgba.ts":
/*!******************************************!*\
  !*** ./src/foundation/math/ColorRgba.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ColorRgba": () => (/* binding */ ColorRgba),
/* harmony export */   "ConstRgbaBlack": () => (/* binding */ ConstRgbaBlack),
/* harmony export */   "ConstRgbaWhite": () => (/* binding */ ConstRgbaWhite)
/* harmony export */ });
/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector4 */ "./src/foundation/math/Vector4.ts");

class ColorRgba extends _Vector4__WEBPACK_IMPORTED_MODULE_0__.Vector4 {
    constructor(r) {
        super(r);
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return this._v[3];
    }
    get r() {
        return this._v[0];
    }
    get g() {
        return this._v[1];
    }
    get b() {
        return this._v[2];
    }
    get a() {
        return this._v[3];
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    clone() {
        return super.clone();
    }
    static fromCopyArray(array) {
        return this._fromCopyArray(array, Float32Array);
    }
    static fromCopyArray4(array) {
        return this._fromCopyArray4(array, Float32Array);
    }
    static fromCopy4(x, y, z, w) {
        return this._fromCopy4(x, y, z, w, Float32Array);
    }
    static fromCopyVector4(vec4) {
        return this._fromCopyVector4(vec4, Float32Array);
    }
}
const ConstRgbaWhite = new ColorRgba(new Float32Array([1, 1, 1, 1]));
const ConstRgbaBlack = new ColorRgba(new Float32Array([0, 0, 0, 1]));


/***/ }),

/***/ "./src/foundation/math/IColor.ts":
/*!***************************************!*\
  !*** ./src/foundation/math/IColor.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/math/IMathNumber.ts":
/*!********************************************!*\
  !*** ./src/foundation/math/IMathNumber.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/math/IMatrix.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/IMatrix.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/math/IQuaternion.ts":
/*!********************************************!*\
  !*** ./src/foundation/math/IQuaternion.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/math/IVector.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/IVector.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/math/IdentityMatrix33.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/IdentityMatrix33.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IdentityMatrix33": () => (/* binding */ IdentityMatrix33)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* eslint-disable prettier/prettier */



class IdentityMatrix33 extends _AbstractMatrix__WEBPACK_IMPORTED_MODULE_1__.AbstractMatrix {
    constructor() {
        super();
        this._v = IdentityMatrix33.__v;
    }
    toString() {
        return `1 0 0
0 1 0
0 0 1
`;
    }
    toStringApproximately() {
        return this.toString();
    }
    flattenAsArray() {
        return [1, 0, 0,
            0, 1, 0,
            0, 0, 1];
    }
    isDummy() {
        return false;
    }
    isEqual(mat, delta = Number.EPSILON) {
        if (Math.abs(mat.m00 - 1) < delta &&
            Math.abs(mat.m10) < delta &&
            Math.abs(mat.m20) < delta &&
            Math.abs(mat.m01) < delta &&
            Math.abs(mat.m11 - 1) < delta &&
            Math.abs(mat.m21) < delta &&
            Math.abs(mat.m02) < delta &&
            Math.abs(mat.m12) < delta &&
            Math.abs(mat.m22 - 1) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(mat) {
        const v = mat._v;
        if (v[0] === 1 && v[1] === 0 && v[2] === 0 && v[3] === 0 &&
            v[4] === 0 && v[5] === 0 && v[6] === 0 && v[7] === 0 &&
            v[8] === 0 && v[9] === 0 && v[10] === 0 && v[11] === 0 &&
            v[12] === 0 && v[13] === 0 && v[14] === 0 && v[15] === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    at(row_i, column_i) {
        return (row_i === column_i) ? 1 : 0;
    }
    determinant() {
        return 1;
    }
    multiplyVector(vec) {
        return vec;
    }
    multiplyVectorTo(vec, outVec) {
        const v = vec._v;
        outVec._v[0] = v[0];
        outVec._v[1] = v[1];
        outVec._v[2] = v[2];
        outVec._v[3] = v[3];
        return outVec;
    }
    getScale() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.fromCopyArray([1, 1, 1]);
    }
    getScaleTo(outVec) {
        const v = outVec._v;
        v[0] = 1;
        v[1] = 1;
        v[2] = 1;
        return outVec;
    }
    clone() {
        return new IdentityMatrix33();
    }
    getRotate() {
        return new IdentityMatrix33();
    }
    get m00() {
        return 1;
    }
    get m10() {
        return 0;
    }
    get m20() {
        return 0;
    }
    get m30() {
        return 0;
    }
    get m01() {
        return 0;
    }
    get m11() {
        return 1;
    }
    get m21() {
        return 0;
    }
    get m31() {
        return 0;
    }
    get m02() {
        return 0;
    }
    get m12() {
        return 0;
    }
    get m22() {
        return 1;
    }
    get m32() {
        return 0;
    }
    get m03() {
        return 0;
    }
    get m13() {
        return 0;
    }
    get m23() {
        return 0;
    }
    get m33() {
        return 1;
    }
    get className() {
        return 'IdentityMatrix33';
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat3;
    }
    get isIdentityMatrixClass() {
        return true;
    }
}
IdentityMatrix33.__v = new Float32Array([1, 0, 0,
    0, 1, 0,
    0, 0, 1]);


/***/ }),

/***/ "./src/foundation/math/IdentityMatrix44.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/IdentityMatrix44.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IdentityMatrix44": () => (/* binding */ IdentityMatrix44)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* eslint-disable prettier/prettier */



class IdentityMatrix44 extends _AbstractMatrix__WEBPACK_IMPORTED_MODULE_1__.AbstractMatrix {
    constructor() {
        super();
        this._v = IdentityMatrix44.__v;
    }
    toString() {
        return `1 0 0 0
0 1 0 0
0 0 1 0
0 0 0 1
`;
    }
    toStringApproximately() {
        return this.toString();
    }
    flattenAsArray() {
        return [1, 0, 0, 0,
            0, 1, 0, 0,
            0, 0, 1, 0,
            0, 0, 0, 1];
    }
    isDummy() {
        return false;
    }
    isEqual(mat, delta = Number.EPSILON) {
        if (Math.abs(mat.m00 - 1) < delta &&
            Math.abs(mat.m10) < delta &&
            Math.abs(mat.m20) < delta &&
            Math.abs(mat.m30) < delta &&
            Math.abs(mat.m01) < delta &&
            Math.abs(mat.m11 - 1) < delta &&
            Math.abs(mat.m21) < delta &&
            Math.abs(mat.m31) < delta &&
            Math.abs(mat.m02) < delta &&
            Math.abs(mat.m12) < delta &&
            Math.abs(mat.m22 - 1) < delta &&
            Math.abs(mat.m32) < delta &&
            Math.abs(mat.m03) < delta &&
            Math.abs(mat.m13) < delta &&
            Math.abs(mat.m23) < delta &&
            Math.abs(mat.m33 - 1) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(mat) {
        const v = mat._v;
        if (v[0] === 1 && v[1] === 0 && v[2] === 0 && v[3] === 0 &&
            v[4] === 0 && v[5] === 1 && v[6] === 0 && v[7] === 0 &&
            v[8] === 0 && v[9] === 0 && v[10] === 1 && v[11] === 0 &&
            v[12] === 0 && v[13] === 0 && v[14] === 0 && v[15] === 1) {
            return true;
        }
        else {
            return false;
        }
    }
    at(row_i, column_i) {
        return (row_i === column_i) ? 1 : 0;
    }
    v(i) {
        return (i % 5 === 0) ? 1 : 0;
    }
    determinant() {
        return 1;
    }
    multiplyVector(vec) {
        return vec;
    }
    multiplyVectorTo(vec, outVec) {
        const v = vec._v;
        outVec._v[0] = v[0];
        outVec._v[1] = v[1];
        outVec._v[2] = v[2];
        outVec._v[3] = v[3];
        return outVec;
    }
    getScale() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.one();
    }
    getScaleTo(outVec) {
        const v = outVec._v;
        v[0] = 1;
        v[1] = 1;
        v[2] = 1;
        return outVec;
    }
    clone() {
        return new IdentityMatrix44();
    }
    getRotate() {
        return new IdentityMatrix44();
    }
    getTranslate() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_2__.Vector3.zero();
    }
    get m00() {
        return 1;
    }
    get m10() {
        return 0;
    }
    get m20() {
        return 0;
    }
    get m30() {
        return 0;
    }
    get m01() {
        return 0;
    }
    get m11() {
        return 1;
    }
    get m21() {
        return 0;
    }
    get m31() {
        return 0;
    }
    get m02() {
        return 0;
    }
    get m12() {
        return 0;
    }
    get m22() {
        return 1;
    }
    get m32() {
        return 0;
    }
    get m03() {
        return 0;
    }
    get m13() {
        return 0;
    }
    get m23() {
        return 0;
    }
    get m33() {
        return 1;
    }
    get translateX() {
        return 0;
    }
    get translateY() {
        return 0;
    }
    get translateZ() {
        return 0;
    }
    get className() {
        return 'IdentityMatrix44';
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4;
    }
    get isIdentityMatrixClass() {
        return true;
    }
}
IdentityMatrix44.__v = new Float32Array([1, 0, 0, 0,
    0, 1, 0, 0,
    0, 0, 1, 0,
    0, 0, 0, 1]);


/***/ }),

/***/ "./src/foundation/math/LogQuaternion.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/LogQuaternion.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LogQuaternion": () => (/* binding */ LogQuaternion)
/* harmony export */ });
/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Quaternion */ "./src/foundation/math/Quaternion.ts");

class LogQuaternion {
    constructor(x) {
        this._v = x;
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return 1;
    }
    static fromFloat32Array(array) {
        return new LogQuaternion(array);
    }
    static fromCopyArray3(array) {
        return new _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion(new Float32Array(array));
    }
    static fromCopyArray(array) {
        return new _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion(new Float32Array(array.slice(0, 3)));
    }
    static fromCopy3(x, y, z) {
        return new _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion(new Float32Array([x, y, z]));
    }
    static fromCopyLogQuaternion(quat) {
        const v = new Float32Array(3);
        v[0] = quat._v[0];
        v[1] = quat._v[1];
        v[2] = quat._v[2];
        return new _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion(v);
    }
    static fromCopyVector4(vec) {
        const v = new Float32Array(3);
        v[0] = vec._v[0];
        v[1] = vec._v[1];
        v[2] = vec._v[2];
        return new _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion(v);
    }
    static fromCopyQuaternion(x) {
        const theta = Math.acos(x.w);
        const sin = Math.sin(theta);
        const v = new Float32Array(3);
        v[0] = x.x * (theta / sin);
        v[1] = x.y * (theta / sin);
        v[2] = x.z * (theta / sin);
        return new LogQuaternion(v);
    }
    get className() {
        return 'LogQuaternion';
    }
}


/***/ }),

/***/ "./src/foundation/math/MathClassUtil.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/MathClassUtil.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MathClassUtil": () => (/* binding */ MathClassUtil)
/* harmony export */ });
/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Matrix33 */ "./src/foundation/math/Matrix33.ts");
/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _MutableVector4__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _MutableVector2__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _MutableQuaternion__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");
/* harmony import */ var _MutableScalar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MutableScalar */ "./src/foundation/math/MutableScalar.ts");
/* harmony import */ var _VectorN__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./VectorN */ "./src/foundation/math/VectorN.ts");
















class MathClassUtil {
    constructor() { }
    static arrayToVector(element) {
        if (Array.isArray(element)) {
            if (typeof element[3] !== 'undefined') {
                return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyArray([
                    element[0],
                    element[1],
                    element[2],
                    element[3],
                ]);
            }
            else if (typeof element[2] !== 'undefined') {
                return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([element[0], element[1], element[2]]);
            }
            else {
                return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.fromCopyArray2([element[0], element[1]]);
            }
        }
        else {
            return element;
        }
    }
    static arrayToVectorOrMatrix(element) {
        if (Array.isArray(element)) {
            if (typeof element[15] !== 'undefined') {
                return _Matrix44__WEBPACK_IMPORTED_MODULE_5__.Matrix44.fromCopyArrayRowMajor(element);
            }
            else if (typeof element[8] !== 'undefined') {
                return _Matrix33__WEBPACK_IMPORTED_MODULE_4__.Matrix33.fromCopyArrayRowMajor(element);
            }
            else if (typeof element[3] !== 'undefined') {
                return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyArray([
                    element[0],
                    element[1],
                    element[2],
                    element[3],
                ]);
            }
            else if (typeof element[2] !== 'undefined') {
                return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([element[0], element[1], element[2]]);
            }
            else {
                return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.fromCopyArray2([element[0], element[1]]);
            }
        }
        else {
            return element;
        }
    }
    static getImmutableValueClass(compositionType) {
        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Mat3) {
            return _Matrix33__WEBPACK_IMPORTED_MODULE_4__.Matrix33;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Mat4) {
            return _Matrix44__WEBPACK_IMPORTED_MODULE_5__.Matrix44;
        }
        return void 0;
    }
    static getMutableValueClass(compositionType) {
        if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec2) {
            return _MutableVector2__WEBPACK_IMPORTED_MODULE_11__.MutableVector2;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec3) {
            return _MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Vec4) {
            return _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Mat3) {
            return _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix33;
        }
        else if (compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_6__.CompositionType.Mat4) {
            return _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__.MutableMatrix44;
        }
        else {
            return void 0;
        }
    }
    static cloneOfMathObjects(element) {
        if (element instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__.Matrix44) {
            return element.clone();
        }
        else if (element instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__.Matrix33) {
            return element.clone();
        }
        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return element.clone();
        }
        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return element.clone();
        }
        else if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return element.clone();
        }
        else {
            return element;
        }
    }
    static isAcceptableArrayForQuaternion(element) {
        if (Array.isArray(element)) {
            if (typeof element[3] !== 'undefined') {
                return true;
            }
        }
        return false;
    }
    static arrayToQuaternion(element) {
        return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.fromCopy4(element[0], element[1], element[2], element[3]);
    }
    static makeSubArray(array, componentN) {
        if (componentN === 4) {
            return [array[0], array[1], array[2], array[3]];
        }
        else if (componentN === 3) {
            return [array[0], array[1], array[2]];
        }
        else if (componentN === 2) {
            return [array[0], array[1]];
        }
        else {
            return array[0];
        }
    }
    static vectorToArray(element) {
        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return [element.x, element.y];
        }
        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return [element.x, element.y, element.z];
        }
        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4 || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return [element.x, element.y, element.z, element.w];
        }
        else {
            return element;
        }
    }
    /**
     * discriminate which Vector instance
     * @param element any Vector instance
     * @return number of Vector instance
     */
    static componentNumberOfVector(element) {
        if (element instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return 2;
        }
        else if (element instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return 3;
        }
        else if (element instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4 || element instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return 4;
        }
        else if (Array.isArray(element)) {
            return element.length;
        }
        else {
            return 0;
        }
    }
    // values range must be [-1, 1]
    static packNormalizedVec4ToVec2(x, y, z, w, criteria) {
        let v0 = 0.0;
        let v1 = 0.0;
        x = (x + 1) / 2.0;
        y = (y + 1) / 2.0;
        z = (z + 1) / 2.0;
        w = (w + 1) / 2.0;
        const ir = Math.floor(x * (criteria - 1.0));
        const ig = Math.floor(y * (criteria - 1.0));
        const irg = ir * criteria + ig;
        v0 = irg / criteria;
        const ib = Math.floor(z * (criteria - 1.0));
        const ia = Math.floor(w * (criteria - 1.0));
        const iba = ib * criteria + ia;
        v1 = iba / criteria;
        return [v0, v1];
    }
    static unProjectTo(windowPosX, windowPosY, windowPosZ, inversePVMat44, viewportVec4, out) {
        const input = this.__tmpVector4_0.setComponents(((windowPosX - viewportVec4.x) / viewportVec4.z) * 2 - 1.0, ((windowPosY - viewportVec4.y) / viewportVec4.w) * 2 - 1.0, 2 * windowPosZ - 1.0, 1.0);
        const outNonNormalized = inversePVMat44.multiplyVectorTo(input, this.__tmpVector4_1);
        if (outNonNormalized.w === 0) {
            console.error('0 division occurred!');
        }
        return _MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.multiplyTo(outNonNormalized, 1.0 / outNonNormalized.w, out);
    }
    static add(lhs, rhs) {
        if (isFinite(lhs)) {
            // number?
            return lhs + rhs;
        }
        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.add(lhs, rhs);
        }
        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.add(lhs, rhs);
        }
        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.add(lhs, rhs);
        }
        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.add(lhs, rhs);
        }
        else if (Array.isArray(lhs)) {
            const arr = [];
            for (let i = 0; i < lhs.length; i++) {
                arr[i] = lhs[i] + rhs[i];
            }
            return arr;
        }
        else {
            console.error('Non supported type!');
            return;
        }
    }
    static subtract(lhs, rhs) {
        if (isFinite(lhs)) {
            // number?
            return lhs - rhs;
        }
        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.subtract(lhs, rhs);
        }
        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.subtract(lhs, rhs);
        }
        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.subtract(lhs, rhs);
        }
        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.subtract(lhs, rhs);
        }
        else if (Array.isArray(lhs)) {
            const arr = [];
            for (let i = 0; i < lhs.length; i++) {
                arr[i] = lhs[i] - rhs[i];
            }
            return arr;
        }
        else {
            console.error('Non supported type!');
            return;
        }
    }
    static multiplyNumber(lhs, rhs) {
        if (isFinite(lhs)) {
            // number?
            return lhs * rhs;
        }
        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.multiply(lhs, rhs);
        }
        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.multiply(lhs, rhs);
        }
        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.multiply(lhs, rhs);
        }
        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.multiplyNumber(lhs, rhs);
        }
        else if (Array.isArray(lhs)) {
            const arr = [];
            for (let i = 0; i < lhs.length; i++) {
                arr[i] = lhs[i] * rhs;
            }
            return arr;
        }
        else {
            console.error('Non supported type!');
            return;
        }
    }
    static divideNumber(lhs, rhs) {
        if (isFinite(lhs)) {
            // number?
            return lhs / rhs;
        }
        else if (lhs instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.multiply(lhs, 1 / rhs);
        }
        else if (lhs instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.multiply(lhs, 1 / rhs);
        }
        else if (lhs instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.multiply(lhs, 1 / rhs);
        }
        else if (lhs instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.multiplyNumber(lhs, 1 / rhs);
        }
        else if (Array.isArray(lhs)) {
            const arr = [];
            for (let i = 0; i < lhs.length; i++) {
                arr[i] = lhs[i] / rhs;
            }
            return arr;
        }
        else {
            console.error('Non supported type!');
            return;
        }
    }
    static initWithScalar(objForDetectType, val) {
        if (isFinite(objForDetectType)) {
            // number?
            return val;
        }
        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2) {
            return _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2.fromCopyArray2([val, val]);
        }
        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3) {
            return _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([val, val, val]);
        }
        else if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4) {
            return _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyArray([val, val, val, val]);
        }
        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion) {
            return _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion.fromCopy4(0, 0, 0, 1);
        }
        else if (Array.isArray(objForDetectType)) {
            const arr = [];
            for (let i = 0; i < objForDetectType.length; i++) {
                arr[i] = val;
            }
            return arr;
        }
        else {
            console.error('Non supported type!');
            return void 0;
        }
    }
    static initWithFloat32Array(objForDetectType, val, floatArray, compositionType) {
        let obj;
        if (isFinite(objForDetectType)) {
            // number?
            const array = new Float32Array(floatArray);
            floatArray._v = void 0;
            array[0] = val;
            return new _Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar(array);
        }
        else if (objForDetectType instanceof _Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar ||
            objForDetectType instanceof _MutableScalar__WEBPACK_IMPORTED_MODULE_14__.MutableScalar) {
            floatArray[0] = val.x;
            obj = new _MutableScalar__WEBPACK_IMPORTED_MODULE_14__.MutableScalar(floatArray);
        }
        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2 ||
            objForDetectType instanceof _MutableVector2__WEBPACK_IMPORTED_MODULE_11__.MutableVector2) {
            floatArray[0] = val.x;
            floatArray[1] = val.y;
            obj = new _MutableVector2__WEBPACK_IMPORTED_MODULE_11__.MutableVector2(floatArray);
        }
        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3 ||
            objForDetectType instanceof _MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3) {
            floatArray[0] = val.x;
            floatArray[1] = val.y;
            floatArray[2] = val.z;
            obj = _MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3.fromFloat32Array(floatArray);
        }
        else if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4 ||
            objForDetectType instanceof _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4) {
            floatArray[0] = val.x;
            floatArray[1] = val.y;
            floatArray[2] = val.z;
            floatArray[3] = val.w;
            obj = new _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4(floatArray);
        }
        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion ||
            objForDetectType instanceof _MutableQuaternion__WEBPACK_IMPORTED_MODULE_13__.MutableQuaternion) {
            floatArray[0] = val.x;
            floatArray[1] = val.y;
            floatArray[2] = val.z;
            floatArray[3] = val.w;
            obj = new _MutableQuaternion__WEBPACK_IMPORTED_MODULE_13__.MutableQuaternion(floatArray);
        }
        else if (objForDetectType instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__.Matrix33 ||
            objForDetectType instanceof _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix33) {
            obj = obj == null ? new _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix33(floatArray) : obj;
            obj.m00 = val.m00;
            obj.m01 = val.m01;
            obj.m02 = val.m02;
            obj.m10 = val.m10;
            obj.m11 = val.m11;
            obj.m12 = val.m12;
            obj.m20 = val.m20;
            obj.m21 = val.m21;
            obj.m22 = val.m22;
        }
        else if (objForDetectType instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__.Matrix44 ||
            objForDetectType instanceof _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__.MutableMatrix44) {
            obj = new _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__.MutableMatrix44(floatArray);
            obj.m00 = val.m00;
            obj.m01 = val.m01;
            obj.m02 = val.m02;
            obj.m03 = val.m03;
            obj.m10 = val.m10;
            obj.m11 = val.m11;
            obj.m12 = val.m12;
            obj.m13 = val.m13;
            obj.m20 = val.m20;
            obj.m21 = val.m21;
            obj.m22 = val.m22;
            obj.m23 = val.m23;
            obj.m30 = val.m30;
            obj.m31 = val.m31;
            obj.m32 = val.m32;
            obj.m33 = val.m33;
        }
        else if (objForDetectType instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__.VectorN) {
            for (let i = 0; i < val._v.length; i++) {
                floatArray[i] = val._v[i];
            }
            obj = new _VectorN__WEBPACK_IMPORTED_MODULE_15__.VectorN(floatArray);
        }
        else if (objForDetectType == null) {
            let vec;
            switch (floatArray.length) {
                case 4:
                    vec = _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyFloat32Array(floatArray);
                    break;
                case 3:
                    vec = _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyFloat32Array(floatArray);
                    break;
                case 2:
                    vec = new _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2(floatArray);
                    break;
                case 1:
                    vec = new _Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar(floatArray);
                    break;
            }
            floatArray._v = void 0;
            return vec;
        }
        else if (Array.isArray(objForDetectType) ||
            ArrayBuffer.isView(objForDetectType) ||
            ArrayBuffer.isView(objForDetectType._v)) {
            return objForDetectType;
        }
        else {
            console.error('Non supported type!');
            return void 0;
        }
        floatArray._v = void 0;
        return obj;
    }
    static _setForce(objForDetectType, val) {
        if (objForDetectType instanceof _Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4 ||
            objForDetectType instanceof _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
            objForDetectType._v[2] = val._v[2];
            objForDetectType._v[3] = val._v[3];
        }
        else if (objForDetectType instanceof _Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3 ||
            objForDetectType instanceof _MutableVector3__WEBPACK_IMPORTED_MODULE_10__.MutableVector3) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
            objForDetectType._v[2] = val._v[2];
        }
        else if (objForDetectType instanceof _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2 ||
            objForDetectType instanceof _MutableVector2__WEBPACK_IMPORTED_MODULE_11__.MutableVector2) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
        }
        else if (objForDetectType instanceof _Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar ||
            objForDetectType instanceof _MutableScalar__WEBPACK_IMPORTED_MODULE_14__.MutableScalar) {
            if (typeof val._v === 'undefined') {
                objForDetectType._v[0] = val;
            }
            else {
                objForDetectType._v[0] = val._v[0];
            }
        }
        else if (objForDetectType instanceof _Matrix33__WEBPACK_IMPORTED_MODULE_4__.Matrix33 ||
            objForDetectType instanceof _MutableMatrix33__WEBPACK_IMPORTED_MODULE_8__.MutableMatrix33) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
            objForDetectType._v[2] = val._v[2];
            objForDetectType._v[3] = val._v[3];
            objForDetectType._v[4] = val._v[4];
            objForDetectType._v[5] = val._v[5];
            objForDetectType._v[6] = val._v[6];
            objForDetectType._v[7] = val._v[7];
            objForDetectType._v[8] = val._v[8];
        }
        else if (objForDetectType instanceof _Matrix44__WEBPACK_IMPORTED_MODULE_5__.Matrix44 ||
            objForDetectType instanceof _MutableMatrix44__WEBPACK_IMPORTED_MODULE_7__.MutableMatrix44) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
            objForDetectType._v[2] = val._v[2];
            objForDetectType._v[3] = val._v[3];
            objForDetectType._v[4] = val._v[4];
            objForDetectType._v[5] = val._v[5];
            objForDetectType._v[6] = val._v[6];
            objForDetectType._v[7] = val._v[7];
            objForDetectType._v[8] = val._v[8];
            objForDetectType._v[9] = val._v[9];
            objForDetectType._v[10] = val._v[10];
            objForDetectType._v[11] = val._v[11];
            objForDetectType._v[12] = val._v[12];
            objForDetectType._v[13] = val._v[13];
            objForDetectType._v[14] = val._v[14];
            objForDetectType._v[15] = val._v[15];
        }
        else if (objForDetectType instanceof _Quaternion__WEBPACK_IMPORTED_MODULE_3__.Quaternion ||
            objForDetectType instanceof _MutableQuaternion__WEBPACK_IMPORTED_MODULE_13__.MutableQuaternion) {
            objForDetectType._v[0] = val._v[0];
            objForDetectType._v[1] = val._v[1];
            objForDetectType._v[2] = val._v[2];
            objForDetectType._v[3] = val._v[3];
        }
        else if (objForDetectType instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__.VectorN) {
            let valArray;
            if (val instanceof _VectorN__WEBPACK_IMPORTED_MODULE_15__.VectorN) {
                valArray = val._v;
            }
            else {
                valArray = val;
            }
            for (let i = 0; i < valArray.length; i++) {
                objForDetectType._v[i] = valArray[i];
            }
        }
        else if (Array.isArray(objForDetectType)) {
            for (let i = 0; i < objForDetectType.length; i++) {
                objForDetectType[i] = val._v[i];
            }
        }
        else if (!isNaN(objForDetectType._v.length)) {
            for (let i = 0; i < objForDetectType._v.length; i++) {
                if (Array.isArray(val)) {
                    objForDetectType._v[i] = val[i];
                }
                else {
                    objForDetectType._v[i] = val._v[i];
                }
            }
        }
        else {
            console.warn('Unknown type _setForce');
        }
        // maybe objForDetectType is number
    }
}
MathClassUtil.__tmpVector4_0 = _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4.zero();
MathClassUtil.__tmpVector4_1 = _MutableVector4__WEBPACK_IMPORTED_MODULE_9__.MutableVector4.zero();


/***/ }),

/***/ "./src/foundation/math/MathUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/MathUtil.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MathUtil": () => (/* binding */ MathUtil)
/* harmony export */ });
function radianToDegree(rad) {
    return (rad * 180) / Math.PI;
}
function degreeToRadian(deg) {
    return (deg * Math.PI) / 180;
}
// https://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410
const toHalfFloat = () => {
    /* This method is faster than the OpenEXR implementation (very often
     * used, eg. in Ogre), with the additional benefit of rounding, inspired
     * by James Tursa?s half-precision code. */
    return function toHalf(val) {
        const floatView = new Float32Array(1);
        const int32View = new Int32Array(floatView.buffer);
        floatView[0] = val;
        const x = int32View[0];
        let bits = (x >> 16) & 0x8000; /* Get the sign */
        let m = (x >> 12) & 0x07ff; /* Keep one extra bit for rounding */
        const e = (x >> 23) & 0xff; /* Using int is faster here */
        /* If zero, or denormal, or exponent underflows too much for a denormal
         * half, return signed zero. */
        if (e < 103) {
            return bits;
        }
        /* If NaN, return NaN. If Inf or exponent overflow, return Inf. */
        if (e > 142) {
            bits |= 0x7c00;
            /* If exponent was 0xff and one mantissa bit was set, it means NaN,
             * not Inf, so make sure we set one mantissa bit too. */
            bits |= (e == 255 ? 0 : 1) && x & 0x007fffff;
            return bits;
        }
        /* If exponent underflows but not too much, return a denormal */
        if (e < 113) {
            m |= 0x0800;
            /* Extra rounding may overflow and set mantissa to 0 and exponent
             * to 1, which is OK. */
            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);
            return bits;
        }
        bits |= ((e - 112) << 10) | (m >> 1);
        /* Extra rounding. An overflow will set mantissa to 0 and increment
         * the exponent, which is OK. */
        bits += m & 1;
        return bits;
    };
};
/**
 * check whether or not this texture size is power of two.
 *
 * @param x texture size.
 * @returns check whether or not the size x is power of two.
 */
function isPowerOfTwo(x) {
    return (x & (x - 1)) == 0;
}
function isPowerOfTwoTexture(width, height) {
    return isPowerOfTwo(width) && isPowerOfTwo(height);
}
// values range must be [-1, 1]
function packNormalizedVec4ToVec2(x, y, z, w, criteria) {
    // range to [0, s1]
    x = (x + 1) / 2.0;
    y = (y + 1) / 2.0;
    z = (z + 1) / 2.0;
    w = (w + 1) / 2.0;
    const ir = Math.floor(x * (criteria - 1.0));
    const ig = Math.floor(y * (criteria - 1.0));
    const irg = ir * criteria + ig;
    const v0 = irg / criteria;
    const ib = Math.floor(z * (criteria - 1.0));
    const ia = Math.floor(w * (criteria - 1.0));
    const iba = ib * criteria + ia;
    const v1 = iba / criteria;
    return [v0, v1];
}
function erf(x) {
    // Save the sign of x
    let sign = 1;
    if (x < 0)
        sign = -1;
    x = Math.abs(x);
    // A&S formula 7.1.26
    const t = 1 / (1 + 0.3275911 * x);
    const y = 1 -
        ((((1.061405429 * t + -1.453152027) * t + 1.421413741) * t + -0.284496736) *
            t +
            0.254829592) *
            t *
            Math.exp(-x * x);
    return sign * y;
}
function invErf(x) {
    let w, p = 0;
    w = -Math.log((1.0 - x) * (1.0 + x));
    if (w < 5.0) {
        w = w - 2.5;
        p = 2.81022636e-8;
        p = 3.43273939e-7 + p * w;
        p = -3.5233877e-6 + p * w;
        p = -4.39150654e-6 + p * w;
        p = 0.00021858087 + p * w;
        p = -0.00125372503 + p * w;
        p = -0.00417768164 + p * w;
        p = 0.246640727 + p * w;
        p = 1.50140941 + p * w;
    }
    else {
        w = Math.sqrt(w) - 3;
        p = -0.000200214257;
        p = 0.000100950558 + p * w;
        p = 0.00134934322 + p * w;
        p = -0.00367342844 + p * w;
        p = 0.00573950773 + p * w;
        p = -0.0076224613 + p * w;
        p = 0.00943887047 + p * w;
        p = 1.00167406 + p * w;
        p = 2.83297682 + p * w;
    }
    return p * x;
}
function gaussianCdf(x, mu, sigma) {
    const U = 0.5 * (1 + erf((x - mu) / (sigma * Math.sqrt(2.0))));
    return U;
}
function invGaussianCdf(U, mu, sigma) {
    const x = sigma * Math.sqrt(2.0) * invErf(2.0 * U - 1) + mu;
    return x;
}
function computeEigenValuesAndVectors(A, Q, w) {
    const n = 3;
    let sd = 0;
    let so = 0; // Sums of diagonal resp. off-diagonal elements
    let s = 0;
    let c = 0;
    let t = 0; // sin(phi), cos(phi), tan(phi) and temporary storage
    let g = 0;
    let h = 0;
    let z = 0;
    let theta = 0; // More temporary storage
    let thresh = 0;
    // Initialize Q to the identitity matrix
    for (let i = 0; i < n; i++) {
        Q.setAt(i, i, 1.0);
        for (let j = 0; j < i; j++) {
            Q.setAt(i, j, 0.0);
            Q.setAt(j, i, 0.0);
        }
    }
    // Initialize w to diag(A)
    for (let i = 0; i < n; i++)
        w.setAt(i, A.at(i, i));
    // Calculate SQR(tr(A))
    sd = 0.0;
    for (let i = 0; i < n; i++)
        sd += Math.abs(w.at(i));
    sd = sd * sd;
    // Main iteration loop
    for (let nIter = 0; nIter < 50; nIter++) {
        // Test for convergence
        so = 0.0;
        for (let p = 0; p < n; p++) {
            for (let q = p + 1; q < n; q++)
                so += Math.abs(A.at(p, q));
        }
        if (so == 0.0)
            return 0;
        if (nIter < 4)
            thresh = (0.2 * so) / (n * n);
        else
            thresh = 0.0;
        // Do sweep
        for (let p = 0; p < n; p++) {
            for (let q = p + 1; q < n; q++) {
                g = 100.0 * Math.abs(A.at(p, q));
                if (nIter > 4 &&
                    Math.abs(w.at(p)) + g == Math.abs(w.at(p)) &&
                    Math.abs(w.at(q)) + g == Math.abs(w.at(q))) {
                    A.setAt(p, q, 0.0);
                }
                else if (Math.abs(A.at(p, q)) > thresh) {
                    // Calculate Jacobi transformation
                    h = w.at(q) - w.at(p);
                    if (Math.abs(h) + g == Math.abs(h)) {
                        t = A.at(p, q) / h;
                    }
                    else {
                        theta = (0.5 * h) / A.at(p, q);
                        if (theta < 0.0)
                            t = -1.0 / (Math.sqrt(1.0 + theta * theta) - theta);
                        else
                            t = 1.0 / (Math.sqrt(1.0 + theta * theta) + theta);
                    }
                    c = 1.0 / Math.sqrt(1.0 + t * t);
                    s = t * c;
                    z = t * A.at(p, q);
                    // Apply Jacobi transformation
                    A.setAt(p, q, 0.0);
                    w.setAt(p, w.at(p) - z);
                    w.setAt(q, w.at(q) + z);
                    for (let r = 0; r < p; r++) {
                        t = A.at(r, p);
                        A.setAt(r, p, c * t - s * A.at(r, q));
                        A.setAt(r, q, s * t + c * A.at(r, q));
                    }
                    for (let r = p + 1; r < q; r++) {
                        t = A.at(p, r);
                        A.setAt(p, r, c * t - s * A.at(r, q));
                        A.setAt(r, q, s * t + c * A.at(r, q));
                    }
                    for (let r = q + 1; r < n; r++) {
                        t = A.at(p, r);
                        A.setAt(p, r, c * t - s * A.at(q, r));
                        A.setAt(q, r, s * t + c * A.at(q, r));
                    }
                    // Update eigenvectors
                    for (let r = 0; r < n; r++) {
                        t = Q.at(r, p);
                        Q.setAt(r, p, c * t - s * Q.at(r, q));
                        Q.setAt(r, q, s * t + c * Q.at(r, q));
                    }
                }
            }
        }
    }
    return -1;
}
function convertToStringAsGLSLFloat(value) {
    if (Number.isInteger(value)) {
        return `${value}.0`;
    }
    else {
        return '' + value;
    }
}
function nearZeroToZero(value) {
    if (Math.abs(value) < 0.00001) {
        value = 0;
    }
    else if (0.99999 < value && value < 1.00001) {
        value = 1;
    }
    else if (-1.00001 < value && value < -0.99999) {
        value = -1;
    }
    return value;
}
function financial(val) {
    const fixedStr = Number.parseFloat(val).toFixed(7);
    if (val >= 0) {
        return ' ' + fixedStr;
    }
    return fixedStr;
}
function roundAsFloat(value) {
    return Math.round(value * 10000000) / 10000000;
}
/**
 * This function calculates the ratio of a discrete Gaussian distribution.
 * The sampling points are one away from each other. The sum of the ratios is 1.
 * @kernelSize number of sampling points
 * @variance variance of the Gaussian distribution
 * @mean mean of the Gaussian distribution
 * e.g. kernelSize = 2 (mean=0) => the sampling points are -0.5 and 0.5
 * e.g. kernelSize = 3 (mean=1) => the sampling points are 0.0, 1.0 and 2.0
 * @effectiveDigit effectiveDigit of values in return array
 * @returns array of the Gaussian distribution where the sum of the elements is 1
 */
function computeGaussianDistributionRatioWhoseSumIsOne({ kernelSize, variance, mean = 0, effectiveDigit = 4, }) {
    const ceiledHalfKernelSize = Math.ceil(kernelSize / 2.0);
    const gaussianDistributionRatio = new Array(ceiledHalfKernelSize);
    let totalSize = 0;
    // above mean side and center
    for (let i = 0; i < ceiledHalfKernelSize; i++) {
        gaussianDistributionRatio[i] = Math.exp(-((i - mean) ** 2) / (2.0 * variance));
        totalSize += gaussianDistributionRatio[i];
    }
    // below mean side
    totalSize *= 2;
    // if a center exists
    if ((kernelSize / 2.0) % 2 !== 0.0) {
        totalSize -= gaussianDistributionRatio[0];
    }
    const gaussianDistributionRatioWhoseSumIsOne = new Array(kernelSize);
    let totalRatio = 0;
    const changeDigitParam = Math.pow(10, effectiveDigit);
    for (let i = 0; i < ceiledHalfKernelSize - 1; i++) {
        let ratio = gaussianDistributionRatio[ceiledHalfKernelSize - 1 - i] / totalSize;
        ratio *= changeDigitParam;
        ratio = Math.round(ratio);
        ratio /= changeDigitParam;
        gaussianDistributionRatioWhoseSumIsOne[i] = ratio;
        gaussianDistributionRatioWhoseSumIsOne[kernelSize - 1 - i] = ratio;
        totalRatio += 2 * ratio;
    }
    if (kernelSize % 2 === 0) {
        const value = (1 - totalRatio) / 2.0;
        gaussianDistributionRatioWhoseSumIsOne[ceiledHalfKernelSize - 1] = value;
        gaussianDistributionRatioWhoseSumIsOne[ceiledHalfKernelSize] = value;
    }
    else {
        const value = 1 - totalRatio;
        gaussianDistributionRatioWhoseSumIsOne[ceiledHalfKernelSize - 1] = value;
    }
    return gaussianDistributionRatioWhoseSumIsOne;
}
const MathUtil = Object.freeze({
    radianToDegree,
    degreeToRadian,
    toHalfFloat,
    isPowerOfTwo,
    isPowerOfTwoTexture,
    packNormalizedVec4ToVec2,
    convertToStringAsGLSLFloat,
    nearZeroToZero,
    gaussianCdf,
    invGaussianCdf,
    computeEigenValuesAndVectors,
    computeGaussianDistributionRatioWhoseSumIsOne,
    roundAsFloat,
    financial,
});


/***/ }),

/***/ "./src/foundation/math/Matrix22.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix22.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Matrix22": () => (/* binding */ Matrix22)
/* harmony export */ });
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");




class Matrix22 extends _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__.AbstractMatrix {
    constructor(m) {
        super();
        this._v = m;
    }
    get m00() {
        return this._v[0];
    }
    get m10() {
        return this._v[1];
    }
    get m01() {
        return this._v[2];
    }
    get m11() {
        return this._v[3];
    }
    get className() {
        return 'Matrix22';
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat2;
    }
    /**
     * Create zero matrix
     */
    static zero() {
        return Matrix22.fromCopy4RowMajor(0, 0, 0, 0);
    }
    /**
     * Create identity matrix
     */
    static identity() {
        return Matrix22.fromCopy4RowMajor(1, 0, 0, 1);
    }
    static dummy() {
        return new this(new Float32Array(0));
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        return Matrix22.fromCopy4RowMajor(mat._v[0], mat._v[1], mat._v[2], mat._v[3]);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        const det = mat.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = mat._v[3] / det;
        const m01 = (mat._v[2] / det) * -1.0;
        const m10 = (mat._v[1] / det) * -1.0;
        const m11 = mat._v[0] / det;
        return Matrix22.fromCopy4RowMajor(m00, m01, m10, m11);
    }
    static invertTo(mat, outMat) {
        const det = mat.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = mat._v[3] / det;
        const m01 = (mat._v[2] / det) * -1.0;
        const m10 = (mat._v[1] / det) * -1.0;
        const m11 = mat._v[0] / det;
        return outMat.setComponents(m00, m01, m10, m11);
    }
    /**
     * Create Rotation Matrix
     */
    static rotate(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix22.fromCopy4RowMajor(cos, -sin, sin, cos);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return Matrix22.fromCopy4RowMajor(vec._v[0], 0, 0, vec._v[1]);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        const m00 = l_mat._v[0] * r_mat._v[0] + l_mat._v[2] * r_mat._v[1];
        const m10 = l_mat._v[1] * r_mat._v[0] + l_mat._v[3] * r_mat._v[1];
        const m01 = l_mat._v[0] * r_mat._v[2] + l_mat._v[2] * r_mat._v[3];
        const m11 = l_mat._v[1] * r_mat._v[2] + l_mat._v[3] * r_mat._v[3];
        return Matrix22.fromCopy4RowMajor(m00, m01, m10, m11);
    }
    /**
     * multiply matrixes
     */
    static multiplyTo(l_mat, r_mat, outMat) {
        const m00 = l_mat._v[0] * r_mat._v[0] + l_mat._v[2] * r_mat._v[1];
        const m10 = l_mat._v[1] * r_mat._v[0] + l_mat._v[3] * r_mat._v[1];
        const m01 = l_mat._v[0] * r_mat._v[2] + l_mat._v[2] * r_mat._v[3];
        const m11 = l_mat._v[1] * r_mat._v[2] + l_mat._v[3] * r_mat._v[3];
        return outMat.setComponents(m00, m01, m10, m11);
    }
    toString() {
        return (this._v[0] +
            ' ' +
            this._v[2] +
            '\n' +
            this._v[1] +
            ' ' +
            this._v[3] +
            ' \n');
    }
    toStringApproximately() {
        return (_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[0]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[2]) +
            '\n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[1]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[3]) +
            ' \n');
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2], this._v[3]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(mat, delta = Number.EPSILON) {
        if (Math.abs(mat._v[0] - this._v[0]) < delta &&
            Math.abs(mat._v[1] - this._v[1]) < delta &&
            Math.abs(mat._v[2] - this._v[2]) < delta &&
            Math.abs(mat._v[3] - this._v[3]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(mat) {
        if (mat._v[0] === this._v[0] &&
            mat._v[1] === this._v[1] &&
            mat._v[2] === this._v[2] &&
            mat._v[3] === this._v[3]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(row_i, column_i) {
        return this._v[row_i + column_i * 2];
    }
    determinant() {
        return this._v[0] * this._v[3] - this._v[1] * this._v[2];
    }
    multiplyVector(vec) {
        const x = this._v[0] * vec._v[0] + this._v[2] * vec._v[1];
        const y = this._v[1] * vec._v[0] + this._v[3] * vec._v[1];
        return _Vector2__WEBPACK_IMPORTED_MODULE_1__.Vector2.fromCopyArray2([x, y]);
    }
    multiplyVectorTo(vec, outVec) {
        const x = this._v[0] * vec._v[0] + this._v[2] * vec._v[1];
        const y = this._v[1] * vec._v[0] + this._v[3] * vec._v[1];
        outVec._v[0] = x;
        outVec._v[1] = y;
        return outVec;
    }
    getScale() {
        return _Vector2__WEBPACK_IMPORTED_MODULE_1__.Vector2.fromCopyArray2([
            Math.hypot(this.m00, this.m01),
            Math.hypot(this.m10, this.m11),
        ]);
    }
    getScaleTo(outVec) {
        outVec._v[0] = Math.hypot(this._v[0], this._v[2]);
        outVec._v[1] = Math.hypot(this._v[1], this._v[3]);
        return outVec;
    }
    clone() {
        return this.constructor.fromCopy4RowMajor(this._v[0], this._v[2], this._v[1], this._v[3]);
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 4 values in 2x2 style (2 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy4RowMajor(m00, m01, m10, m11) {
        const v = new Float32Array(4);
        v[0] = m00;
        v[2] = m01;
        v[1] = m10;
        v[3] = m11;
        return new Matrix22(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy4ColumnMajor(m00, m10, m01, m11) {
        const v = new Float32Array(4);
        v[0] = m00;
        v[2] = m01;
        v[1] = m10;
        v[3] = m11;
        return new Matrix22(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new Matrix22(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(4);
        v.set(float32Array);
        return new Matrix22(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new Matrix22(v);
    }
    static fromCopyMatrix22(mat) {
        const v = new Float32Array(4);
        v[0] = mat._v[0];
        v[3] = mat._v[1];
        v[1] = mat._v[2];
        v[4] = mat._v[3];
        return new Matrix22(v);
    }
    static fromCopyArray9ColumnMajor(array) {
        const v = new Float32Array(4);
        v.set(array);
        return new Matrix22(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(4);
        v.set(array);
        return new Matrix22(v);
    }
    static fromCopyArray9RowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new Matrix22(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new Matrix22(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/Matrix33.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix33.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Matrix33": () => (/* binding */ Matrix33)
/* harmony export */ });
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");
/* harmony import */ var _IdentityMatrix33__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./IdentityMatrix33 */ "./src/foundation/math/IdentityMatrix33.ts");





/* eslint-disable prettier/prettier */
class Matrix33 extends _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__.AbstractMatrix {
    constructor(m) {
        super();
        this._v = m;
    }
    get m00() {
        return this._v[0];
    }
    get m10() {
        return this._v[1];
    }
    get m20() {
        return this._v[2];
    }
    get m01() {
        return this._v[3];
    }
    get m11() {
        return this._v[4];
    }
    get m21() {
        return this._v[5];
    }
    get m02() {
        return this._v[6];
    }
    get m12() {
        return this._v[7];
    }
    get m22() {
        return this._v[8];
    }
    get className() {
        return 'Matrix33';
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Mat3;
    }
    /**
     * zero matrix(static version)
     */
    static zero() {
        return Matrix33.fromCopy9RowMajor(0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    /**
     * Create identity matrix
     */
    static identity() {
        // return new this(
        //   1, 0, 0,
        //   0, 1, 0,
        //   0, 0, 1
        // );
        return new _IdentityMatrix33__WEBPACK_IMPORTED_MODULE_4__.IdentityMatrix33();
    }
    static dummy() {
        return new this(new Float32Array(0));
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        if (mat.isIdentityMatrixClass) {
            return mat;
        }
        return Matrix33.fromCopy9RowMajor(mat._v[0], mat._v[1], mat._v[2], mat._v[3], mat._v[4], mat._v[5], mat._v[6], mat._v[7], mat._v[8]);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        if (mat.isIdentityMatrixClass) {
            return mat;
        }
        const det = mat.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (mat._v[4] * mat._v[8] - mat._v[7] * mat._v[5]) / det;
        const m01 = (mat._v[6] * mat._v[5] - mat._v[3] * mat._v[8]) / det;
        const m02 = (mat._v[3] * mat._v[7] - mat._v[6] * mat._v[4]) / det;
        const m10 = (mat._v[7] * mat._v[2] - mat._v[1] * mat._v[8]) / det;
        const m11 = (mat._v[0] * mat._v[8] - mat._v[6] * mat._v[2]) / det;
        const m12 = (mat._v[6] * mat._v[1] - mat._v[0] * mat._v[7]) / det;
        const m20 = (mat._v[1] * mat._v[5] - mat._v[4] * mat._v[2]) / det;
        const m21 = (mat._v[3] * mat._v[2] - mat._v[0] * mat._v[5]) / det;
        const m22 = (mat._v[0] * mat._v[4] - mat._v[3] * mat._v[1]) / det;
        return Matrix33.fromCopy9RowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    static invertTo(mat, outMat) {
        if (mat.isIdentityMatrixClass) {
            return outMat.copyComponents(mat);
        }
        const det = mat.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (mat._v[4] * mat._v[8] - mat._v[7] * mat._v[5]) / det;
        const m01 = (mat._v[6] * mat._v[5] - mat._v[3] * mat._v[8]) / det;
        const m02 = (mat._v[3] * mat._v[7] - mat._v[6] * mat._v[4]) / det;
        const m10 = (mat._v[7] * mat._v[2] - mat._v[1] * mat._v[8]) / det;
        const m11 = (mat._v[0] * mat._v[8] - mat._v[6] * mat._v[2]) / det;
        const m12 = (mat._v[6] * mat._v[1] - mat._v[0] * mat._v[7]) / det;
        const m20 = (mat._v[1] * mat._v[5] - mat._v[4] * mat._v[2]) / det;
        const m21 = (mat._v[3] * mat._v[2] - mat._v[0] * mat._v[5]) / det;
        const m22 = (mat._v[0] * mat._v[4] - mat._v[3] * mat._v[1]) / det;
        return outMat.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    /**
   * Create X oriented Rotation Matrix
   */
    static rotateX(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix33.fromCopy9RowMajor(1, 0, 0, 0, cos, -sin, 0, sin, cos);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    static rotateY(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix33.fromCopy9RowMajor(cos, 0, sin, 0, 1, 0, -sin, 0, cos);
    }
    /**
     * Create Z oriented Rotation Matrix
     */
    static rotateZ(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix33.fromCopy9RowMajor(cos, -sin, 0, sin, cos, 0, 0, 0, 1);
    }
    static rotateXYZ(x, y, z) {
        const cosX = Math.cos(x);
        const sinX = Math.sin(x);
        const cosY = Math.cos(y);
        const sinY = Math.sin(y);
        const cosZ = Math.cos(z);
        const sinZ = Math.sin(z);
        // const x00 = 1;
        // const x01 = 0;
        // const x02 = 0;
        // const x10 = 0;
        const x11 = cosX;
        const x12 = -sinX;
        // const x20 = 0;
        const x21 = sinX;
        const x22 = cosX;
        const y00 = cosY;
        // const y01 = 0;
        const y02 = sinY;
        // const y10 = 0;
        // const y11 = 1;
        // const y12 = 0;
        const y20 = -sinY;
        // const y21 = 0;
        const y22 = cosY;
        const z00 = cosZ;
        const z01 = -sinZ;
        // const z02 = 0;
        const z10 = sinZ;
        const z11 = cosZ;
        // const z12 = 0;
        // const z20 = 0;
        // const z21 = 0;
        // const z22 = 1;
        // calculate this.multiply(this.rotateY(y), this.rotateX(x))
        const yx00 = y00;
        const yx01 = y02 * x21;
        const yx02 = y02 * x22;
        //const yx10 = 0;
        const yx11 = x11;
        const yx12 = x12;
        const yx20 = y20;
        const yx21 = y22 * x21;
        const yx22 = y22 * x22;
        // calculate this.multiply(this.rotateZ(z), this.multiply(this.rotateY(y), this.rotateX(x)))
        const m00 = z00 * yx00;
        const m01 = z00 * yx01 + z01 * yx11;
        const m02 = z00 * yx02 + z01 * yx12;
        const m10 = z10 * yx00;
        const m11 = z10 * yx01 + z11 * yx11;
        const m12 = z10 * yx02 + z11 * yx12;
        const m20 = yx20;
        const m21 = yx21;
        const m22 = yx22;
        return Matrix33.fromCopy9RowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    static rotate(vec) {
        return this.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return Matrix33.fromCopy9RowMajor(vec._v[0], 0, 0, 0, vec._v[1], 0, 0, 0, vec._v[2]);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        if (l_mat.isIdentityMatrixClass) {
            return r_mat;
        }
        else if (r_mat.isIdentityMatrixClass) {
            return l_mat;
        }
        const m00 = l_mat._v[0] * r_mat._v[0] + l_mat._v[3] * r_mat._v[1] + l_mat._v[6] * r_mat._v[2];
        const m10 = l_mat._v[1] * r_mat._v[0] + l_mat._v[4] * r_mat._v[1] + l_mat._v[7] * r_mat._v[2];
        const m20 = l_mat._v[2] * r_mat._v[0] + l_mat._v[5] * r_mat._v[1] + l_mat._v[8] * r_mat._v[2];
        const m01 = l_mat._v[0] * r_mat._v[3] + l_mat._v[3] * r_mat._v[4] + l_mat._v[6] * r_mat._v[5];
        const m11 = l_mat._v[1] * r_mat._v[3] + l_mat._v[4] * r_mat._v[4] + l_mat._v[7] * r_mat._v[5];
        const m21 = l_mat._v[2] * r_mat._v[3] + l_mat._v[5] * r_mat._v[4] + l_mat._v[8] * r_mat._v[5];
        const m02 = l_mat._v[0] * r_mat._v[6] + l_mat._v[3] * r_mat._v[7] + l_mat._v[6] * r_mat._v[8];
        const m12 = l_mat._v[1] * r_mat._v[6] + l_mat._v[4] * r_mat._v[7] + l_mat._v[7] * r_mat._v[8];
        const m22 = l_mat._v[2] * r_mat._v[6] + l_mat._v[5] * r_mat._v[7] + l_mat._v[8] * r_mat._v[8];
        return Matrix33.fromCopy9RowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    /**
     * multiply matrixes
     */
    static multiplyTo(l_mat, r_mat, outMat) {
        if (l_mat.isIdentityMatrixClass) {
            return outMat.copyComponents(r_mat);
        }
        else if (r_mat.isIdentityMatrixClass) {
            return outMat.copyComponents(l_mat);
        }
        const m00 = l_mat._v[0] * r_mat._v[0] + l_mat._v[3] * r_mat._v[1] + l_mat._v[6] * r_mat._v[2];
        const m10 = l_mat._v[1] * r_mat._v[0] + l_mat._v[4] * r_mat._v[1] + l_mat._v[7] * r_mat._v[2];
        const m20 = l_mat._v[2] * r_mat._v[0] + l_mat._v[5] * r_mat._v[1] + l_mat._v[8] * r_mat._v[2];
        const m01 = l_mat._v[0] * r_mat._v[3] + l_mat._v[3] * r_mat._v[4] + l_mat._v[6] * r_mat._v[5];
        const m11 = l_mat._v[1] * r_mat._v[3] + l_mat._v[4] * r_mat._v[4] + l_mat._v[7] * r_mat._v[5];
        const m21 = l_mat._v[2] * r_mat._v[3] + l_mat._v[5] * r_mat._v[4] + l_mat._v[8] * r_mat._v[5];
        const m02 = l_mat._v[0] * r_mat._v[6] + l_mat._v[3] * r_mat._v[7] + l_mat._v[6] * r_mat._v[8];
        const m12 = l_mat._v[1] * r_mat._v[6] + l_mat._v[4] * r_mat._v[7] + l_mat._v[7] * r_mat._v[8];
        const m22 = l_mat._v[2] * r_mat._v[6] + l_mat._v[5] * r_mat._v[7] + l_mat._v[8] * r_mat._v[8];
        return outMat.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    toString() {
        return this._v[0] + ' ' + this._v[3] + ' ' + this._v[6] + '\n' +
            this._v[1] + ' ' + this._v[4] + ' ' + this._v[7] + '\n' +
            this._v[2] + ' ' + this._v[5] + ' ' + this._v[8] + '\n';
    }
    toStringApproximately() {
        return _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[0]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[3]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[6]) + '\n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[1]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[4]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[7]) + ' \n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[2]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[5]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.financial(this._v[8]) + '\n';
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2],
            this._v[3], this._v[4], this._v[5],
            this._v[6], this._v[7], this._v[8]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(mat, delta = Number.EPSILON) {
        if (Math.abs(mat._v[0] - this._v[0]) < delta &&
            Math.abs(mat._v[1] - this._v[1]) < delta &&
            Math.abs(mat._v[2] - this._v[2]) < delta &&
            Math.abs(mat._v[3] - this._v[3]) < delta &&
            Math.abs(mat._v[4] - this._v[4]) < delta &&
            Math.abs(mat._v[5] - this._v[5]) < delta &&
            Math.abs(mat._v[6] - this._v[6]) < delta &&
            Math.abs(mat._v[7] - this._v[7]) < delta &&
            Math.abs(mat._v[8] - this._v[8]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(mat) {
        if (mat._v[0] === this._v[0] && mat._v[1] === this._v[1] && mat._v[2] === this._v[2] &&
            mat._v[3] === this._v[3] && mat._v[4] === this._v[4] && mat._v[5] === this._v[5] &&
            mat._v[6] === this._v[6] && mat._v[7] === this._v[7] && mat._v[8] === this._v[8]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(row_i, column_i) {
        return this._v[row_i + column_i * 3];
    }
    v(i) {
        return this._v[i];
    }
    determinant() {
        return this._v[0] * this._v[4] * this._v[8] + this._v[1] * this._v[5] * this._v[6] + this._v[2] * this._v[3] * this._v[7]
            - this._v[0] * this._v[5] * this._v[7] - this._v[2] * this._v[4] * this._v[6] - this._v[1] * this._v[3] * this._v[8];
    }
    multiplyVector(vec) {
        const x = this._v[0] * vec._v[0] + this._v[3] * vec._v[1] + this._v[6] * vec._v[2];
        const y = this._v[1] * vec._v[0] + this._v[4] * vec._v[1] + this._v[7] * vec._v[2];
        const z = this._v[2] * vec._v[0] + this._v[5] * vec._v[1] + this._v[8] * vec._v[2];
        return new vec.constructor(new Float32Array([x, y, z]));
    }
    multiplyVectorTo(vec, outVec) {
        const x = this._v[0] * vec._v[0] + this._v[3] * vec._v[1] + this._v[6] * vec._v[2];
        const y = this._v[1] * vec._v[0] + this._v[4] * vec._v[1] + this._v[7] * vec._v[2];
        const z = this._v[2] * vec._v[0] + this._v[5] * vec._v[1] + this._v[8] * vec._v[2];
        outVec._v[0] = x;
        outVec._v[1] = y;
        outVec._v[2] = z;
        return outVec;
    }
    getScale() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([
            Math.hypot(this._v[0], this._v[3], this._v[6]),
            Math.hypot(this._v[1], this._v[4], this._v[7]),
            Math.hypot(this._v[2], this._v[5], this._v[8])
        ]);
    }
    getScaleTo(outVec) {
        outVec._v[0] = Math.hypot(this._v[0], this._v[3], this._v[6]);
        outVec._v[1] = Math.hypot(this._v[1], this._v[4], this._v[7]);
        outVec._v[2] = Math.hypot(this._v[2], this._v[5], this._v[8]);
        return outVec;
    }
    clone() {
        return this.constructor.fromCopy9RowMajor(this._v[0], this._v[3], this._v[6], this._v[1], this._v[4], this._v[7], this._v[2], this._v[5], this._v[8]);
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 9 values in 3x3 style (3 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy9RowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
        const v = new Float32Array(9);
        v[0] = m00;
        v[3] = m01;
        v[6] = m02;
        v[1] = m10;
        v[4] = m11;
        v[7] = m12;
        v[2] = m20;
        v[5] = m21;
        v[8] = m22;
        return new Matrix33(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy9ColumnMajor(m00, m10, m20, m01, m11, m21, m02, m12, m22) {
        const v = new Float32Array(9);
        v[0] = m00;
        v[3] = m01;
        v[6] = m02;
        v[1] = m10;
        v[4] = m11;
        v[7] = m12;
        v[2] = m20;
        v[5] = m21;
        v[8] = m22;
        return new Matrix33(v);
    }
    static fromCopyMatrix44(mat) {
        const v = new Float32Array(9);
        v[0] = mat._v[0];
        v[1] = mat._v[1];
        v[2] = mat._v[2];
        v[3] = mat._v[5];
        v[4] = mat._v[6];
        v[5] = mat._v[7];
        v[6] = mat._v[9];
        v[7] = mat._v[10];
        v[8] = mat._v[11];
        return new Matrix33(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new Matrix33(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(9);
        v.set(float32Array);
        return new Matrix33(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new Matrix33(v);
    }
    static fromCopyMatrix33(mat) {
        const v = new Float32Array(9);
        v[0] = mat._v[0];
        v[3] = mat._v[3];
        v[6] = mat._v[6];
        v[1] = mat._v[1];
        v[4] = mat._v[4];
        v[7] = mat._v[7];
        v[2] = mat._v[2];
        v[5] = mat._v[5];
        v[8] = mat._v[8];
        return new Matrix33(v);
    }
    static fromCopyArray9ColumnMajor(array) {
        const v = new Float32Array(9);
        v.set(array);
        return new Matrix33(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(9);
        v.set(array);
        return new Matrix33(v);
    }
    static fromCopyArray9RowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new Matrix33(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new Matrix33(v);
    }
    static fromCopyQuaternion(q) {
        const sx = q._v[0] * q._v[0];
        const sy = q._v[1] * q._v[1];
        const sz = q._v[2] * q._v[2];
        const cx = q._v[1] * q._v[2];
        const cy = q._v[0] * q._v[2];
        const cz = q._v[0] * q._v[1];
        const wx = q._v[3] * q._v[0];
        const wy = q._v[3] * q._v[1];
        const wz = q._v[3] * q._v[2];
        const v = new Float32Array(9);
        v[0] = 1.0 - 2.0 * (sy + sz);
        v[3] = 2.0 * (cz - wz);
        v[6] = 2.0 * (cy + wy);
        v[1] = 2.0 * (cz + wz);
        v[4] = 1.0 - 2.0 * (sx + sz);
        v[7] = 2.0 * (cx - wx);
        v[2] = 2.0 * (cy - wy);
        v[5] = 2.0 * (cx + wx);
        v[8] = 1.0 - 2.0 * (sx + sy);
        return new Matrix33(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/Matrix44.ts":
/*!*****************************************!*\
  !*** ./src/foundation/math/Matrix44.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Matrix44": () => (/* binding */ Matrix44)
/* harmony export */ });
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _IdentityMatrix44__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./IdentityMatrix44 */ "./src/foundation/math/IdentityMatrix44.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");
/* harmony import */ var _raw_raw_extension__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./raw/raw_extension */ "./src/foundation/math/raw/raw_extension.ts");
class Matrix44 extends _AbstractMatrix__WEBPACK_IMPORTED_MODULE_5__.AbstractMatrix {
    constructor(m) {
        super();
        this._v = m;
    }
    get m00() {
        return this._v[0];
    }
    get m10() {
        return this._v[1];
    }
    get m20() {
        return this._v[2];
    }
    get m30() {
        return this._v[3];
    }
    get m01() {
        return this._v[4];
    }
    get m11() {
        return this._v[5];
    }
    get m21() {
        return this._v[6];
    }
    get m31() {
        return this._v[7];
    }
    get m02() {
        return this._v[8];
    }
    get m12() {
        return this._v[9];
    }
    get m22() {
        return this._v[10];
    }
    get m32() {
        return this._v[11];
    }
    get m03() {
        return this._v[12];
    }
    get m13() {
        return this._v[13];
    }
    get m23() {
        return this._v[14];
    }
    get m33() {
        return this._v[15];
    }
    get translateX() {
        return this._v[12];
    }
    get translateY() {
        return this._v[13];
    }
    get translateZ() {
        return this._v[14];
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_2__.CompositionType.Mat4;
    }
    /**
     * zero matrix(static version)
     */
    static zero() {
        return Matrix44.fromCopy16RowMajor(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    /**
     * Create identity matrix
     */
    static identity() {
        return new _IdentityMatrix44__WEBPACK_IMPORTED_MODULE_4__.IdentityMatrix44();
    }
    static dummy() {
        return new this(new Float32Array(0));
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        if (mat.isIdentityMatrixClass) {
            return mat;
        }
        return Matrix44.fromCopyFloat32ArrayRowMajor(mat._v);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        if (mat.isIdentityMatrixClass) {
            return mat;
        }
        const n00 = mat._v[0] * mat._v[5] - mat._v[4] * mat._v[1];
        const n01 = mat._v[0] * mat._v[9] - mat._v[8] * mat._v[1];
        const n02 = mat._v[0] * mat._v[13] - mat._v[12] * mat._v[1];
        const n03 = mat._v[4] * mat._v[9] - mat._v[8] * mat._v[5];
        const n04 = mat._v[4] * mat._v[13] - mat._v[12] * mat._v[5];
        const n05 = mat._v[8] * mat._v[13] - mat._v[12] * mat._v[9];
        const n06 = mat._v[2] * mat._v[7] - mat._v[6] * mat._v[3];
        const n07 = mat._v[2] * mat._v[11] - mat._v[10] * mat._v[3];
        const n08 = mat._v[2] * mat._v[15] - mat._v[14] * mat._v[3];
        const n09 = mat._v[6] * mat._v[11] - mat._v[10] * mat._v[7];
        const n10 = mat._v[6] * mat._v[15] - mat._v[14] * mat._v[7];
        const n11 = mat._v[10] * mat._v[15] - mat._v[14] * mat._v[11];
        const det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (mat._v[5] * n11 - mat._v[9] * n10 + mat._v[13] * n09) / det;
        const m01 = (mat._v[8] * n10 - mat._v[4] * n11 - mat._v[12] * n09) / det;
        const m02 = (mat._v[7] * n05 - mat._v[11] * n04 + mat._v[15] * n03) / det;
        const m03 = (mat._v[10] * n04 - mat._v[6] * n05 - mat._v[14] * n03) / det;
        const m10 = (mat._v[9] * n08 - mat._v[1] * n11 - mat._v[13] * n07) / det;
        const m11 = (mat._v[0] * n11 - mat._v[8] * n08 + mat._v[12] * n07) / det;
        const m12 = (mat._v[11] * n02 - mat._v[3] * n05 - mat._v[15] * n01) / det;
        const m13 = (mat._v[2] * n05 - mat._v[10] * n02 + mat._v[14] * n01) / det;
        const m20 = (mat._v[1] * n10 - mat._v[5] * n08 + mat._v[13] * n06) / det;
        const m21 = (mat._v[4] * n08 - mat._v[0] * n10 - mat._v[12] * n06) / det;
        const m22 = (mat._v[3] * n04 - mat._v[7] * n02 + mat._v[15] * n00) / det;
        const m23 = (mat._v[6] * n02 - mat._v[2] * n04 - mat._v[14] * n00) / det;
        const m30 = (mat._v[5] * n07 - mat._v[1] * n09 - mat._v[9] * n06) / det;
        const m31 = (mat._v[0] * n09 - mat._v[4] * n07 + mat._v[8] * n06) / det;
        const m32 = (mat._v[7] * n01 - mat._v[3] * n03 - mat._v[11] * n00) / det;
        const m33 = (mat._v[2] * n03 - mat._v[6] * n01 + mat._v[10] * n00) / det;
        return Matrix44.fromCopy16RowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    static invertTo(mat, outMat) {
        if (mat.isIdentityMatrixClass) {
            return outMat.copyComponents(mat);
        }
        const n00 = mat._v[0] * mat._v[5] - mat._v[4] * mat._v[1];
        const n01 = mat._v[0] * mat._v[9] - mat._v[8] * mat._v[1];
        const n02 = mat._v[0] * mat._v[13] - mat._v[12] * mat._v[1];
        const n03 = mat._v[4] * mat._v[9] - mat._v[8] * mat._v[5];
        const n04 = mat._v[4] * mat._v[13] - mat._v[12] * mat._v[5];
        const n05 = mat._v[8] * mat._v[13] - mat._v[12] * mat._v[9];
        const n06 = mat._v[2] * mat._v[7] - mat._v[6] * mat._v[3];
        const n07 = mat._v[2] * mat._v[11] - mat._v[10] * mat._v[3];
        const n08 = mat._v[2] * mat._v[15] - mat._v[14] * mat._v[3];
        const n09 = mat._v[6] * mat._v[11] - mat._v[10] * mat._v[7];
        const n10 = mat._v[6] * mat._v[15] - mat._v[14] * mat._v[7];
        const n11 = mat._v[10] * mat._v[15] - mat._v[14] * mat._v[11];
        const det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (mat._v[5] * n11 - mat._v[9] * n10 + mat._v[13] * n09) / det;
        const m01 = (mat._v[8] * n10 - mat._v[4] * n11 - mat._v[12] * n09) / det;
        const m02 = (mat._v[7] * n05 - mat._v[11] * n04 + mat._v[15] * n03) / det;
        const m03 = (mat._v[10] * n04 - mat._v[6] * n05 - mat._v[14] * n03) / det;
        const m10 = (mat._v[9] * n08 - mat._v[1] * n11 - mat._v[13] * n07) / det;
        const m11 = (mat._v[0] * n11 - mat._v[8] * n08 + mat._v[12] * n07) / det;
        const m12 = (mat._v[11] * n02 - mat._v[3] * n05 - mat._v[15] * n01) / det;
        const m13 = (mat._v[2] * n05 - mat._v[10] * n02 + mat._v[14] * n01) / det;
        const m20 = (mat._v[1] * n10 - mat._v[5] * n08 + mat._v[13] * n06) / det;
        const m21 = (mat._v[4] * n08 - mat._v[0] * n10 - mat._v[12] * n06) / det;
        const m22 = (mat._v[3] * n04 - mat._v[7] * n02 + mat._v[15] * n00) / det;
        const m23 = (mat._v[6] * n02 - mat._v[2] * n04 - mat._v[14] * n00) / det;
        const m30 = (mat._v[5] * n07 - mat._v[1] * n09 - mat._v[9] * n06) / det;
        const m31 = (mat._v[0] * n09 - mat._v[4] * n07 + mat._v[8] * n06) / det;
        const m32 = (mat._v[7] * n01 - mat._v[3] * n03 - mat._v[11] * n00) / det;
        const m33 = (mat._v[2] * n03 - mat._v[6] * n01 + mat._v[10] * n00) / det;
        return outMat.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    /**
     * Create translation Matrix
     */
    static translate(vec) {
        return Matrix44.fromCopy16RowMajor(1, 0, 0, vec._v[0], 0, 1, 0, vec._v[1], 0, 0, 1, vec._v[2], 0, 0, 0, 1);
    }
    /**
     * Create X oriented Rotation Matrix
     */
    static rotateX(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix44.fromCopy16RowMajor(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    static rotateY(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix44.fromCopy16RowMajor(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);
    }
    /**
     * Create Z oriented Rotation Matrix
     */
    static rotateZ(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return Matrix44.fromCopy16RowMajor(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    static rotateXYZ(x, y, z) {
        const cosX = Math.cos(x);
        const sinX = Math.sin(x);
        const cosY = Math.cos(y);
        const sinY = Math.sin(y);
        const cosZ = Math.cos(z);
        const sinZ = Math.sin(z);
        // const x00 = 1;
        // const x01 = 0;
        // const x02 = 0;
        // const x10 = 0;
        const x11 = cosX;
        const x12 = -sinX;
        // const x20 = 0;
        const x21 = sinX;
        const x22 = cosX;
        const y00 = cosY;
        // const y01 = 0;
        const y02 = sinY;
        // const y10 = 0;
        // const y11 = 1;
        // const y12 = 0;
        const y20 = -sinY;
        // const y21 = 0;
        const y22 = cosY;
        const z00 = cosZ;
        const z01 = -sinZ;
        // const z02 = 0;
        const z10 = sinZ;
        const z11 = cosZ;
        // const z12 = 0;
        // const z20 = 0;
        // const z21 = 0;
        // const z22 = 1;
        // Y * X
        const yx00 = y00;
        const yx01 = y02 * x21;
        const yx02 = y02 * x22;
        //const yx10 = 0;
        const yx11 = x11;
        const yx12 = x12;
        const yx20 = y20;
        const yx21 = y22 * x21;
        const yx22 = y22 * x22;
        // Z * Y * X
        const m00 = z00 * yx00;
        const m01 = z00 * yx01 + z01 * yx11;
        const m02 = z00 * yx02 + z01 * yx12;
        const m10 = z10 * yx00;
        const m11 = z10 * yx01 + z11 * yx11;
        const m12 = z10 * yx02 + z11 * yx12;
        const m20 = yx20;
        const m21 = yx21;
        const m22 = yx22;
        const m03 = 0;
        const m13 = 0;
        const m23 = 0;
        const m30 = 0;
        const m31 = 0;
        const m32 = 0;
        const m33 = 1;
        return Matrix44.fromCopy16RowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    static rotate(vec) {
        return this.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return Matrix44.fromCopy16RowMajor(vec._v[0], 0, 0, 0, 0, vec._v[1], 0, 0, 0, 0, vec._v[2], 0, 0, 0, 0, 1);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        if (l_mat.isIdentityMatrixClass) {
            return r_mat;
        }
        else if (r_mat.isIdentityMatrixClass) {
            return l_mat;
        }
        const lv = l_mat._v;
        const rv = r_mat._v;
        const m00 = lv[0] * rv[0] + lv[4] * rv[1] + lv[8] * rv[2] + lv[12] * rv[3];
        const m10 = lv[1] * rv[0] + lv[5] * rv[1] + lv[9] * rv[2] + lv[13] * rv[3];
        const m20 = lv[2] * rv[0] + lv[6] * rv[1] + lv[10] * rv[2] + lv[14] * rv[3];
        const m30 = lv[3] * rv[0] + lv[7] * rv[1] + lv[11] * rv[2] + lv[15] * rv[3];
        const m01 = lv[0] * rv[4] + lv[4] * rv[5] + lv[8] * rv[6] + lv[12] * rv[7];
        const m11 = lv[1] * rv[4] + lv[5] * rv[5] + lv[9] * rv[6] + lv[13] * rv[7];
        const m21 = lv[2] * rv[4] + lv[6] * rv[5] + lv[10] * rv[6] + lv[14] * rv[7];
        const m31 = lv[3] * rv[4] + lv[7] * rv[5] + lv[11] * rv[6] + lv[15] * rv[7];
        const m02 = lv[0] * rv[8] + lv[4] * rv[9] + lv[8] * rv[10] + lv[12] * rv[11];
        const m12 = lv[1] * rv[8] + lv[5] * rv[9] + lv[9] * rv[10] + lv[13] * rv[11];
        const m22 = lv[2] * rv[8] + lv[6] * rv[9] + lv[10] * rv[10] + lv[14] * rv[11];
        const m32 = lv[3] * rv[8] + lv[7] * rv[9] + lv[11] * rv[10] + lv[15] * rv[11];
        const m03 = lv[0] * rv[12] + lv[4] * rv[13] + lv[8] * rv[14] + lv[12] * rv[15];
        const m13 = lv[1] * rv[12] + lv[5] * rv[13] + lv[9] * rv[14] + lv[13] * rv[15];
        const m23 = lv[2] * rv[12] + lv[6] * rv[13] + lv[10] * rv[14] + lv[14] * rv[15];
        const m33 = lv[3] * rv[12] + lv[7] * rv[13] + lv[11] * rv[14] + lv[15] * rv[15];
        return Matrix44.fromCopy16RowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    /**
     * multiply matrixes
     */
    static multiplyTo(l_mat, r_mat, outMat) {
        if (l_mat.isIdentityMatrixClass) {
            return outMat.copyComponents(r_mat);
        }
        else if (r_mat.isIdentityMatrixClass) {
            return outMat.copyComponents(l_mat);
        }
        const lv = l_mat._v;
        const rv = r_mat._v;
        const m00 = lv[0] * rv[0] + lv[4] * rv[1] + lv[8] * rv[2] + lv[12] * rv[3];
        const m10 = lv[1] * rv[0] + lv[5] * rv[1] + lv[9] * rv[2] + lv[13] * rv[3];
        const m20 = lv[2] * rv[0] + lv[6] * rv[1] + lv[10] * rv[2] + lv[14] * rv[3];
        const m30 = lv[3] * rv[0] + lv[7] * rv[1] + lv[11] * rv[2] + lv[15] * rv[3];
        const m01 = lv[0] * rv[4] + lv[4] * rv[5] + lv[8] * rv[6] + lv[12] * rv[7];
        const m11 = lv[1] * rv[4] + lv[5] * rv[5] + lv[9] * rv[6] + lv[13] * rv[7];
        const m21 = lv[2] * rv[4] + lv[6] * rv[5] + lv[10] * rv[6] + lv[14] * rv[7];
        const m31 = lv[3] * rv[4] + lv[7] * rv[5] + lv[11] * rv[6] + lv[15] * rv[7];
        const m02 = lv[0] * rv[8] + lv[4] * rv[9] + lv[8] * rv[10] + lv[12] * rv[11];
        const m12 = lv[1] * rv[8] + lv[5] * rv[9] + lv[9] * rv[10] + lv[13] * rv[11];
        const m22 = lv[2] * rv[8] + lv[6] * rv[9] + lv[10] * rv[10] + lv[14] * rv[11];
        const m32 = lv[3] * rv[8] + lv[7] * rv[9] + lv[11] * rv[10] + lv[15] * rv[11];
        const m03 = lv[0] * rv[12] + lv[4] * rv[13] + lv[8] * rv[14] + lv[12] * rv[15];
        const m13 = lv[1] * rv[12] + lv[5] * rv[13] + lv[9] * rv[14] + lv[13] * rv[15];
        const m23 = lv[2] * rv[12] + lv[6] * rv[13] + lv[10] * rv[14] + lv[14] * rv[15];
        const m33 = lv[3] * rv[12] + lv[7] * rv[13] + lv[11] * rv[14] + lv[15] * rv[15];
        return outMat.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    static multiplyTypedArrayTo(l_mat, r_array, outMat, offsetAsComposition) {
        r_array[_raw_raw_extension__WEBPACK_IMPORTED_MODULE_6__.mulThatAndThisToOutAsMat44_offsetAsComposition](offsetAsComposition, l_mat._v, 0, outMat._v);
        return outMat;
    }
    static fromQuaternionTo(quat, outMat) {
        const sx = quat._v[0] * quat._v[0];
        const sy = quat._v[1] * quat._v[1];
        const sz = quat._v[2] * quat._v[2];
        const cx = quat._v[1] * quat._v[2];
        const cy = quat._v[0] * quat._v[2];
        const cz = quat._v[0] * quat._v[1];
        const wx = quat._v[3] * quat._v[0];
        const wy = quat._v[3] * quat._v[1];
        const wz = quat._v[3] * quat._v[2];
        const m00 = 1.0 - 2.0 * (sy + sz);
        const m01 = 2.0 * (cz - wz);
        const m02 = 2.0 * (cy + wy);
        const m03 = 0;
        const m10 = 2.0 * (cz + wz);
        const m11 = 1.0 - 2.0 * (sx + sz);
        const m12 = 2.0 * (cx - wx);
        const m13 = 0;
        const m20 = 2.0 * (cy - wy);
        const m21 = 2.0 * (cx + wx);
        const m22 = 1.0 - 2.0 * (sx + sy);
        const m23 = 0;
        const m30 = 0;
        const m31 = 0;
        const m32 = 0;
        const m33 = 1;
        return outMat.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    toString() {
        return this._v[0] + ' ' + this._v[4] + ' ' + this._v[8] + ' ' + this._v[12] + ' \n' +
            this._v[1] + ' ' + this._v[5] + ' ' + this._v[9] + ' ' + this._v[13] + ' \n' +
            this._v[2] + ' ' + this._v[6] + ' ' + this._v[10] + ' ' + this._v[14] + ' \n' +
            this._v[3] + ' ' + this._v[7] + ' ' + this._v[11] + ' ' + this._v[15] + ' \n';
    }
    toStringApproximately() {
        return _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[0]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[4]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[8]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[12]) + ' \n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[1]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[5]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[9]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[13]) + ' \n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[2]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[6]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[10]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[14]) + ' \n' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[3]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[7]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[11]) + ' ' + _MathUtil__WEBPACK_IMPORTED_MODULE_3__.MathUtil.financial(this._v[15]) + ' \n';
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2], this._v[3],
            this._v[4], this._v[5], this._v[6], this._v[7],
            this._v[8], this._v[9], this._v[10], this._v[11],
            this._v[12], this._v[13], this._v[14], this._v[15]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(mat, delta = Number.EPSILON) {
        const v = mat._v;
        if (Math.abs(v[0] - this._v[0]) < delta &&
            Math.abs(v[1] - this._v[1]) < delta &&
            Math.abs(v[2] - this._v[2]) < delta &&
            Math.abs(v[3] - this._v[3]) < delta &&
            Math.abs(v[4] - this._v[4]) < delta &&
            Math.abs(v[5] - this._v[5]) < delta &&
            Math.abs(v[6] - this._v[6]) < delta &&
            Math.abs(v[7] - this._v[7]) < delta &&
            Math.abs(v[8] - this._v[8]) < delta &&
            Math.abs(v[9] - this._v[9]) < delta &&
            Math.abs(v[10] - this._v[10]) < delta &&
            Math.abs(v[11] - this._v[11]) < delta &&
            Math.abs(v[12] - this._v[12]) < delta &&
            Math.abs(v[13] - this._v[13]) < delta &&
            Math.abs(v[14] - this._v[14]) < delta &&
            Math.abs(v[15] - this._v[15]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(mat) {
        if (mat._v[0] === this._v[0] && mat._v[1] === this._v[1] && mat._v[2] === this._v[2] && mat._v[3] === this._v[3] &&
            mat._v[4] === this._v[4] && mat._v[5] === this._v[5] && mat._v[6] === this._v[6] && mat._v[7] === this._v[7] &&
            mat._v[8] === this._v[8] && mat._v[9] === this._v[9] && mat._v[10] === this._v[10] && mat._v[11] === this._v[11] &&
            mat._v[12] === this._v[12] && mat._v[13] === this._v[13] && mat._v[14] === this._v[14] && mat._v[15] === this._v[15]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(row_i, column_i) {
        return this._v[row_i + column_i * 4];
    }
    determinant() {
        return this._v[0] * this._v[5] * this._v[10] * this._v[15] + this._v[0] * this._v[9] * this._v[14] * this._v[7] + this._v[0] * this._v[13] * this._v[6] * this._v[11] +
            this._v[4] * this._v[1] * this._v[14] * this._v[11] + this._v[4] * this._v[9] * this._v[2] * this._v[15] + this._v[4] * this._v[13] * this._v[10] * this._v[3] +
            this._v[8] * this._v[1] * this._v[6] * this._v[15] + this._v[8] * this._v[5] * this._v[14] * this._v[3] + this._v[8] * this._v[13] * this._v[2] * this._v[7] +
            this._v[12] * this._v[1] * this._v[10] * this._v[7] + this._v[12] * this._v[5] * this._v[2] * this._v[11] + this._v[12] * this._v[9] * this._v[6] * this._v[3] -
            this._v[0] * this._v[5] * this._v[14] * this._v[11] - this._v[0] * this._v[9] * this._v[6] * this._v[15] - this._v[0] * this._v[13] * this._v[10] * this._v[7] -
            this._v[4] * this._v[1] * this._v[10] * this._v[15] - this._v[4] * this._v[9] * this._v[14] * this._v[3] - this._v[4] * this._v[13] * this._v[2] * this._v[11] -
            this._v[8] * this._v[1] * this._v[14] * this._v[7] - this._v[8] * this._v[5] * this._v[2] * this._v[15] - this._v[8] * this._v[13] * this._v[6] * this._v[3] -
            this._v[12] * this._v[1] * this._v[6] * this._v[11] - this._v[12] * this._v[5] * this._v[10] * this._v[3] - this._v[12] * this._v[9] * this._v[2] * this._v[7];
    }
    multiplyVector(vec) {
        const x = this._v[0] * vec._v[0] + this._v[4] * vec._v[1] + this._v[8] * vec._v[2] + this._v[12] * vec._v[3];
        const y = this._v[1] * vec._v[0] + this._v[5] * vec._v[1] + this._v[9] * vec._v[2] + this._v[13] * vec._v[3];
        const z = this._v[2] * vec._v[0] + this._v[6] * vec._v[1] + this._v[10] * vec._v[2] + this._v[14] * vec._v[3];
        const w = this._v[3] * vec._v[0] + this._v[7] * vec._v[1] + this._v[11] * vec._v[2] + this._v[15] * vec._v[3];
        return _Vector4__WEBPACK_IMPORTED_MODULE_1__.Vector4.fromCopyArray([x, y, z, w]);
    }
    multiplyVectorTo(vec, outVec) {
        const x = this._v[0] * vec._v[0] + this._v[4] * vec._v[1] + this._v[8] * vec._v[2] + this._v[12] * vec._v[3];
        const y = this._v[1] * vec._v[0] + this._v[5] * vec._v[1] + this._v[9] * vec._v[2] + this._v[13] * vec._v[3];
        const z = this._v[2] * vec._v[0] + this._v[6] * vec._v[1] + this._v[10] * vec._v[2] + this._v[14] * vec._v[3];
        const w = this._v[3] * vec._v[0] + this._v[7] * vec._v[1] + this._v[11] * vec._v[2] + this._v[15] * vec._v[3];
        outVec._v[0] = x;
        outVec._v[1] = y;
        outVec._v[2] = z;
        outVec._v[3] = w;
        return outVec;
    }
    multiplyVectorToVec3(vec, outVec) {
        const x = this._v[0] * vec._v[0] + this._v[4] * vec._v[1] + this._v[8] * vec._v[2] + this._v[12] * vec._v[3];
        const y = this._v[1] * vec._v[0] + this._v[5] * vec._v[1] + this._v[9] * vec._v[2] + this._v[13] * vec._v[3];
        const z = this._v[2] * vec._v[0] + this._v[6] * vec._v[1] + this._v[10] * vec._v[2] + this._v[14] * vec._v[3];
        outVec._v[0] = x;
        outVec._v[1] = y;
        outVec._v[2] = z;
        return outVec;
    }
    multiplyVector3(vec) {
        const x = this._v[0] * vec._v[0] + this._v[4] * vec._v[1] + this._v[8] * vec._v[2] + this._v[12]; // regards vec.w(vec._v[3]) as 1
        const y = this._v[1] * vec._v[0] + this._v[5] * vec._v[1] + this._v[9] * vec._v[2] + this._v[13];
        const z = this._v[2] * vec._v[0] + this._v[6] * vec._v[1] + this._v[10] * vec._v[2] + this._v[14];
        return _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([x, y, z]);
    }
    multiplyVector3To(vec, outVec) {
        const x = this._v[0] * vec._v[0] + this._v[4] * vec._v[1] + this._v[8] * vec._v[2] + this._v[12]; // regards vec.w(vec._v[3]) as 1
        const y = this._v[1] * vec._v[0] + this._v[5] * vec._v[1] + this._v[9] * vec._v[2] + this._v[13];
        const z = this._v[2] * vec._v[0] + this._v[6] * vec._v[1] + this._v[10] * vec._v[2] + this._v[14];
        outVec._v[0] = x;
        outVec._v[1] = y;
        outVec._v[2] = z;
        return outVec;
    }
    getTranslate() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([this._v[12], this._v[13], this._v[14]]);
    }
    /**
     * get translate vector from this matrix
     */
    getTranslateTo(outVec) {
        outVec._v[0] = this._v[12];
        outVec._v[1] = this._v[13];
        outVec._v[2] = this._v[14];
        return outVec;
    }
    getScale() {
        return _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([
            Math.hypot(this._v[0], this._v[4], this._v[8]),
            Math.hypot(this._v[1], this._v[5], this._v[9]),
            Math.hypot(this._v[2], this._v[6], this._v[10])
        ]);
    }
    /**
     * get scale vector from this matrix
     */
    getScaleTo(outVec) {
        outVec._v[0] = Math.hypot(this._v[0], this._v[4], this._v[8]);
        outVec._v[1] = Math.hypot(this._v[1], this._v[5], this._v[9]);
        outVec._v[2] = Math.hypot(this._v[2], this._v[6], this._v[10]);
        return outVec;
    }
    /**
     * @return Euler Angles Rotation (x, y, z)
     */
    toEulerAngles() {
        let rotate = null;
        if (Math.abs(this._v[2]) !== 1.0) {
            const y = -Math.asin(this._v[2]);
            const x = Math.atan2(this._v[6] / Math.cos(y), this._v[10] / Math.cos(y));
            const z = Math.atan2(this._v[1] / Math.cos(y), this._v[0] / Math.cos(y));
            rotate = _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([x, y, z]);
        }
        else if (this._v[2] === -1.0) {
            rotate = _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([Math.atan2(this._v[4], this._v[8]), Math.PI / 2.0, 0.0]);
        }
        else {
            rotate = _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([Math.atan2(-this._v[4], -this._v[8]), -Math.PI / 2.0, 0.0]);
        }
        return rotate;
    }
    toEulerAnglesTo(outVec3) {
        if (Math.abs(this._v[2]) !== 1.0) {
            const y = -Math.asin(this._v[2]);
            const x = Math.atan2(this._v[6] / Math.cos(y), this._v[10] / Math.cos(y));
            const z = Math.atan2(this._v[1] / Math.cos(y), this._v[0] / Math.cos(y));
            outVec3._v[0] = x;
            outVec3._v[1] = y;
            outVec3._v[2] = z;
        }
        else if (this._v[2] === -1.0) {
            outVec3._v[0] = Math.atan2(this._v[4], this._v[8]);
            outVec3._v[1] = Math.PI / 2.0;
            outVec3._v[2] = 0.0;
        }
        else {
            outVec3._v[0] = Math.atan2(-this._v[4], -this._v[8]);
            outVec3._v[1] = -Math.PI / 2.0;
            outVec3._v[2] = 0.0;
        }
        return outVec3;
    }
    clone() {
        return this.constructor.fromCopy16RowMajor(this._v[0], this._v[4], this._v[8], this._v[12], this._v[1], this._v[5], this._v[9], this._v[13], this._v[2], this._v[6], this._v[10], this._v[14], this._v[3], this._v[7], this._v[11], this._v[15]);
    }
    getRotate() {
        // const quat = Quaternion.fromMatrix(this);
        // const rotateMat = (this.constructor as any).fromCopyQuaternion(quat) as Matrix44;
        const scaleX = Math.hypot(this._v[0], this._v[4], this._v[8]);
        const scaleY = Math.hypot(this._v[1], this._v[5], this._v[9]);
        const scaleZ = Math.hypot(this._v[2], this._v[6], this._v[10]);
        const mat = Matrix44.fromCopy16RowMajor(this._v[0] / scaleX, this._v[4], this._v[8], 0, this._v[1], this._v[5] / scaleY, this._v[9], 0, this._v[2], this._v[6], this._v[10] / scaleZ, 0, 0, 0, 0, 1);
        return mat;
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 16 values in 4x4 style (4 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy16RowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
        const v = new Float32Array(16);
        v[0] = m00;
        v[4] = m01;
        v[8] = m02;
        v[12] = m03;
        v[1] = m10;
        v[5] = m11;
        v[9] = m12;
        v[13] = m13;
        v[2] = m20;
        v[6] = m21;
        v[10] = m22;
        v[14] = m23;
        v[3] = m30;
        v[7] = m31;
        v[11] = m32;
        v[15] = m33;
        return new Matrix44(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy16ColumnMajor(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {
        const v = new Float32Array(16);
        v[0] = m00;
        v[4] = m01;
        v[8] = m02;
        v[12] = m03;
        v[1] = m10;
        v[5] = m11;
        v[9] = m12;
        v[13] = m13;
        v[2] = m20;
        v[6] = m21;
        v[10] = m22;
        v[14] = m23;
        v[3] = m30;
        v[7] = m31;
        v[11] = m32;
        v[15] = m33;
        return new Matrix44(v);
    }
    static fromCopyMatrix44(mat) {
        const v = new Float32Array(16);
        v.set(mat._v);
        return new Matrix44(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new Matrix44(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(16);
        v.set(float32Array);
        return new Matrix44(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new Matrix44(v);
    }
    static fromCopyMatrix33(mat) {
        const v = new Float32Array(16);
        v[0] = mat._v[0];
        v[4] = mat._v[3];
        v[8] = mat._v[6];
        v[12] = 0;
        v[1] = mat._v[1];
        v[5] = mat._v[4];
        v[9] = mat._v[7];
        v[13] = 0;
        v[2] = mat._v[2];
        v[6] = mat._v[5];
        v[10] = mat._v[8];
        v[14] = 0;
        v[3] = 0;
        v[7] = 0;
        v[11] = 0;
        v[15] = 1;
        return new Matrix44(v);
    }
    static fromCopyArray16ColumnMajor(array) {
        const v = new Float32Array(16);
        v.set(array);
        return new Matrix44(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(16);
        v.set(array);
        return new Matrix44(v);
    }
    static fromCopyArray16RowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new Matrix44(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new Matrix44(v);
    }
    static fromCopyQuaternion(q) {
        const sx = q._v[0] * q._v[0];
        const sy = q._v[1] * q._v[1];
        const sz = q._v[2] * q._v[2];
        const cx = q._v[1] * q._v[2];
        const cy = q._v[0] * q._v[2];
        const cz = q._v[0] * q._v[1];
        const wx = q._v[3] * q._v[0];
        const wy = q._v[3] * q._v[1];
        const wz = q._v[3] * q._v[2];
        const v = new Float32Array(16);
        v[0] = 1.0 - 2.0 * (sy + sz);
        v[4] = 2.0 * (cz - wz);
        v[8] = 2.0 * (cy + wy);
        v[12] = 0;
        v[1] = 2.0 * (cz + wz);
        v[5] = 1.0 - 2.0 * (sx + sz);
        v[9] = 2.0 * (cx - wx);
        v[13] = 0;
        v[2] = 2.0 * (cy - wy);
        v[6] = 2.0 * (cx + wx);
        v[10] = 1.0 - 2.0 * (sx + sy);
        v[14] = 0;
        v[3] = 0;
        v[7] = 0;
        v[11] = 0;
        v[15] = 1;
        return new Matrix44(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableColorRgb.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableColorRgb.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableColorRgb": () => (/* binding */ MutableColorRgb)
/* harmony export */ });
/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MutableVector3 */ "./src/foundation/math/MutableVector3.ts");

class MutableColorRgb extends _MutableVector3__WEBPACK_IMPORTED_MODULE_0__.MutableVector3 {
    constructor(r) {
        super(r);
    }
    get x() {
        return this._v[0];
    }
    set x(val) {
        this._v[0] = val;
    }
    get y() {
        return this._v[1];
    }
    set y(val) {
        this._v[1] = val;
    }
    get z() {
        return this._v[2];
    }
    set z(val) {
        this._v[2] = val;
    }
    get w() {
        return 1;
    }
    get r() {
        return this._v[0];
    }
    set r(val) {
        this._v[0] = val;
    }
    get g() {
        return this._v[1];
    }
    set g(val) {
        this._v[1] = val;
    }
    get b() {
        return this._v[2];
    }
    set b(val) {
        this._v[2] = val;
    }
    get a() {
        return 1;
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float32Array);
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableColorRgba.ts":
/*!*************************************************!*\
  !*** ./src/foundation/math/MutableColorRgba.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableColorRgba": () => (/* binding */ MutableColorRgba)
/* harmony export */ });
/* harmony import */ var _MutableVector4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MutableVector4 */ "./src/foundation/math/MutableVector4.ts");

class MutableColorRgba extends _MutableVector4__WEBPACK_IMPORTED_MODULE_0__.MutableVector4 {
    constructor(r) {
        super(r);
    }
    get x() {
        return this._v[0];
    }
    set x(val) {
        this._v[0] = val;
    }
    get y() {
        return this._v[1];
    }
    set y(val) {
        this._v[1] = val;
    }
    get z() {
        return this._v[2];
    }
    set z(val) {
        this._v[2] = val;
    }
    get w() {
        return this._v[3];
    }
    set w(val) {
        this._v[3] = val;
    }
    get r() {
        return this._v[0];
    }
    set r(val) {
        this._v[0] = val;
    }
    get g() {
        return this._v[1];
    }
    set g(val) {
        this._v[1] = val;
    }
    get b() {
        return this._v[2];
    }
    set b(val) {
        this._v[2] = val;
    }
    get a() {
        return this._v[3];
    }
    set a(val) {
        this._v[3] = val;
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableMatrix22.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix22.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableMatrix22": () => (/* binding */ MutableMatrix22)
/* harmony export */ });
/* harmony import */ var _Matrix22__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix22 */ "./src/foundation/math/Matrix22.ts");

class MutableMatrix22 extends _Matrix22__WEBPACK_IMPORTED_MODULE_0__.Matrix22 {
    constructor(m) {
        super(m);
    }
    set m00(val) {
        this._v[0] = val;
    }
    get m00() {
        return this._v[0];
    }
    set m10(val) {
        this._v[1] = val;
    }
    get m10() {
        return this._v[1];
    }
    set m01(val) {
        this._v[2] = val;
    }
    get m01() {
        return this._v[2];
    }
    set m11(val) {
        this._v[3] = val;
    }
    get m11() {
        return this._v[3];
    }
    get className() {
        return 'MutableMatrix22';
    }
    /**
     * Create zero matrix
     */
    static zero() {
        return super.zero();
    }
    /**
     * Create identity matrix
     */
    static identity() {
        return super.identity();
    }
    static dummy() {
        return super.dummy();
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        return super.transpose(mat);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        return super.invert(mat);
    }
    /**
     * Create Rotation Matrix
     */
    static rotate(radian) {
        return super.rotate(radian);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return super.scale(vec);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        return super.multiply(l_mat, r_mat);
    }
    clone() {
        const result = super.clone();
        return result;
    }
    raw() {
        return this._v;
    }
    setAt(row_i, column_i, value) {
        this._v[row_i + column_i * 2] = value;
        return this;
    }
    setComponents(m00, m01, m10, m11) {
        this._v[0] = m00;
        this._v[2] = m01;
        this._v[1] = m10;
        this._v[3] = m11;
        return this;
    }
    copyComponents(mat) {
        this._v[0] = mat.m00;
        this._v[2] = mat.m01; // mat.m01 is mat._v[2 or 3 or 4]
        this._v[1] = mat.m10;
        this._v[3] = mat.m11;
        return this;
    }
    /**
     * zero matrix
     */
    zero() {
        return this.setComponents(0, 0, 0, 0);
    }
    identity() {
        return this.setComponents(1, 0, 0, 1);
    }
    _swap(l, r) {
        this._v[r] = [this._v[l], (this._v[l] = this._v[r])][0];
    }
    /**
     * transpose
     */
    transpose() {
        this._swap(1, 2);
        return this;
    }
    invert() {
        const det = this.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = this._v[3] / det;
        const m01 = (this._v[2] / det) * -1.0;
        const m10 = (this._v[1] / det) * -1.0;
        const m11 = this._v[0] / det;
        return this.setComponents(m00, m01, m10, m11);
    }
    /**
     * Create Rotation Matrix
     */
    rotate(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(cos, -sin, sin, cos);
    }
    scale(vec) {
        return this.setComponents(vec._v[0], 0, 0, vec._v[1]);
    }
    multiplyScale(vec) {
        this._v[0] *= vec._v[0];
        this._v[2] *= vec._v[0];
        this._v[1] *= vec._v[1];
        this._v[3] *= vec._v[1];
        return this;
    }
    /**
     * multiply the input matrix from right side
     */
    multiply(mat) {
        const m00 = this._v[0] * mat._v[0] + this._v[2] * mat._v[1];
        const m01 = this._v[0] * mat._v[2] + this._v[2] * mat._v[3];
        const m10 = this._v[1] * mat._v[0] + this._v[3] * mat._v[1];
        const m11 = this._v[1] * mat._v[2] + this._v[3] * mat._v[3];
        return this.setComponents(m00, m01, m10, m11);
    }
    multiplyByLeft(mat) {
        const m00 = mat._v[0] * this._v[0] + mat._v[2] * this._v[1];
        const m01 = mat._v[0] * this._v[2] + mat._v[2] * this._v[3];
        const m10 = mat._v[1] * this._v[0] + mat._v[3] * this._v[1];
        const m11 = mat._v[1] * this._v[2] + mat._v[3] * this._v[3];
        return this.setComponents(m00, m01, m10, m11);
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 4 values in 2x2 style (2 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy4RowMajor(m00, m01, m10, m11) {
        const v = new Float32Array(4);
        v[0] = m00;
        v[2] = m01;
        v[1] = m10;
        v[3] = m11;
        return new MutableMatrix22(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy4ColumnMajor(m00, m10, m01, m11) {
        const v = new Float32Array(4);
        v[0] = m00;
        v[2] = m01;
        v[1] = m10;
        v[3] = m11;
        return new MutableMatrix22(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new MutableMatrix22(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(4);
        v.set(float32Array);
        return new MutableMatrix22(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new MutableMatrix22(v);
    }
    static fromCopyMatrix22(mat) {
        const v = new Float32Array(4);
        v[0] = mat._v[0];
        v[3] = mat._v[1];
        v[1] = mat._v[2];
        v[4] = mat._v[3];
        return new MutableMatrix22(v);
    }
    static fromCopyArray9ColumnMajor(array) {
        const v = new Float32Array(4);
        v.set(array);
        return new MutableMatrix22(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(4);
        v.set(array);
        return new MutableMatrix22(v);
    }
    static fromCopyArray9RowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new MutableMatrix22(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(4);
        v[0] = array[0];
        v[3] = array[1];
        v[1] = array[2];
        v[4] = array[3];
        return new MutableMatrix22(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableMatrix33.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix33.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableMatrix33": () => (/* binding */ MutableMatrix33)
/* harmony export */ });
/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix33 */ "./src/foundation/math/Matrix33.ts");

/* eslint-disable prettier/prettier */
class MutableMatrix33 extends _Matrix33__WEBPACK_IMPORTED_MODULE_0__.Matrix33 {
    constructor(m) {
        super(m);
    }
    set m00(val) {
        this._v[0] = val;
    }
    get m00() {
        return this._v[0];
    }
    set m10(val) {
        this._v[1] = val;
    }
    get m10() {
        return this._v[1];
    }
    set m20(val) {
        this._v[2] = val;
    }
    get m20() {
        return this._v[2];
    }
    set m01(val) {
        this._v[3] = val;
    }
    get m01() {
        return this._v[3];
    }
    set m11(val) {
        this._v[4] = val;
    }
    get m11() {
        return this._v[4];
    }
    set m21(val) {
        this._v[5] = val;
    }
    get m21() {
        return this._v[5];
    }
    set m02(val) {
        this._v[6] = val;
    }
    get m02() {
        return this._v[6];
    }
    set m12(val) {
        this._v[7] = val;
    }
    get m12() {
        return this._v[7];
    }
    set m22(val) {
        this._v[8] = val;
    }
    get m22() {
        return this._v[8];
    }
    get className() {
        return 'MutableMatrix33';
    }
    /**
     * zero matrix(static version)
     */
    static zero() {
        return super.zero();
    }
    /**
     * Create identity matrix
     */
    static identity() {
        return MutableMatrix33.fromCopy9RowMajor(1, 0, 0, 0, 1, 0, 0, 0, 1);
    }
    static dummy() {
        return super.dummy();
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        return super.transpose(mat);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        return super.invert(mat);
    }
    /**
   * Create X oriented Rotation Matrix
   */
    static rotateX(radian) {
        return super.rotateX(radian);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    static rotateY(radian) {
        return super.rotateY(radian);
    }
    /**
     * Create Z oriented Rotation Matrix
     */
    static rotateZ(radian) {
        return super.rotateZ(radian);
    }
    static rotateXYZ(x, y, z) {
        return super.rotateXYZ(x, y, z);
    }
    static rotate(vec) {
        return super.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return super.scale(vec);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        return super.multiply(l_mat, r_mat);
    }
    clone() {
        const result = super.clone();
        return result;
    }
    raw() {
        return this._v;
    }
    setAt(row_i, column_i, value) {
        this._v[row_i + column_i * 3] = value;
        return this;
    }
    setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
        this._v[0] = m00;
        this._v[3] = m01;
        this._v[6] = m02;
        this._v[1] = m10;
        this._v[4] = m11;
        this._v[7] = m12;
        this._v[2] = m20;
        this._v[5] = m21;
        this._v[8] = m22;
        return this;
    }
    copyComponents(mat) {
        this._v[0] = mat.m00;
        this._v[3] = mat.m01;
        this._v[6] = mat.m02; // mat.m01 is mat._v[3 or 4]
        this._v[1] = mat.m10;
        this._v[4] = mat.m11;
        this._v[7] = mat.m12;
        this._v[2] = mat.m20;
        this._v[5] = mat.m21;
        this._v[8] = mat.m22;
        return this;
    }
    /**
     * zero matrix
     */
    zero() {
        return this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    identity() {
        return this.setComponents(1, 0, 0, 0, 1, 0, 0, 0, 1);
    }
    _swap(l, r) {
        this._v[r] = [this._v[l], this._v[l] = this._v[r]][0];
    }
    /**
     * transpose
     */
    transpose() {
        this._swap(1, 3);
        this._swap(2, 6);
        this._swap(5, 8);
        return this;
    }
    invert() {
        const det = this.determinant();
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (this._v[4] * this._v[8] - this._v[7] * this._v[5]) / det;
        const m01 = (this._v[6] * this._v[5] - this._v[3] * this._v[8]) / det;
        const m02 = (this._v[3] * this._v[7] - this._v[6] * this._v[4]) / det;
        const m10 = (this._v[7] * this._v[2] - this._v[1] * this._v[8]) / det;
        const m11 = (this._v[0] * this._v[8] - this._v[6] * this._v[2]) / det;
        const m12 = (this._v[6] * this._v[1] - this._v[0] * this._v[7]) / det;
        const m20 = (this._v[1] * this._v[5] - this._v[4] * this._v[2]) / det;
        const m21 = (this._v[3] * this._v[2] - this._v[0] * this._v[5]) / det;
        const m22 = (this._v[0] * this._v[4] - this._v[3] * this._v[1]) / det;
        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    /**
     * Create X oriented Rotation Matrix
     */
    rotateX(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(1, 0, 0, 0, cos, -sin, 0, sin, cos);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    rotateY(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(cos, 0, sin, 0, 1, 0, -sin, 0, cos);
    }
    /**
     * Create Z oriented Rotation Matrix
     */
    rotateZ(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(cos, -sin, 0, sin, cos, 0, 0, 0, 1);
    }
    rotateXYZ(x, y, z) {
        const cosX = Math.cos(x);
        const sinX = Math.sin(x);
        const cosY = Math.cos(y);
        const sinY = Math.sin(y);
        const cosZ = Math.cos(z);
        const sinZ = Math.sin(z);
        // const x00 = 1;
        // const x01 = 0;
        // const x02 = 0;
        // const x10 = 0;
        const x11 = cosX;
        const x12 = -sinX;
        // const x20 = 0;
        const x21 = sinX;
        const x22 = cosX;
        const y00 = cosY;
        // const y01 = 0;
        const y02 = sinY;
        // const y10 = 0;
        // const y11 = 1;
        // const y12 = 0;
        const y20 = -sinY;
        // const y21 = 0;
        const y22 = cosY;
        const z00 = cosZ;
        const z01 = -sinZ;
        // const z02 = 0;
        const z10 = sinZ;
        const z11 = cosZ;
        // const z12 = 0;
        // const z20 = 0;
        // const z21 = 0;
        // const z22 = 1;
        // calculate this.multiply(this.rotateY(y), this.rotateX(x))
        const yx00 = y00;
        const yx01 = y02 * x21;
        const yx02 = y02 * x22;
        //const yx10 = 0;
        const yx11 = x11;
        const yx12 = x12;
        const yx20 = y20;
        const yx21 = y22 * x21;
        const yx22 = y22 * x22;
        // calculate this.multiply(this.rotateZ(z), this.multiply(this.rotateY(y), this.rotateX(x)))
        const m00 = z00 * yx00;
        const m01 = z00 * yx01 + z01 * yx11;
        const m02 = z00 * yx02 + z01 * yx12;
        const m10 = z10 * yx00;
        const m11 = z10 * yx01 + z11 * yx11;
        const m12 = z10 * yx02 + z11 * yx12;
        const m20 = yx20;
        const m21 = yx21;
        const m22 = yx22;
        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    rotate(vec) {
        return this.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    scale(vec) {
        return this.setComponents(vec._v[0], 0, 0, 0, vec._v[1], 0, 0, 0, vec._v[2]);
    }
    multiplyScale(vec) {
        this._v[0] *= vec._v[0];
        this._v[3] *= vec._v[0];
        this._v[6] *= vec._v[0];
        this._v[1] *= vec._v[1];
        this._v[4] *= vec._v[1];
        this._v[7] *= vec._v[1];
        this._v[2] *= vec._v[2];
        this._v[5] *= vec._v[2];
        this._v[8] *= vec._v[2];
        return this;
    }
    /**
     * multiply the input matrix from right side
     */
    multiply(mat) {
        if (mat.isIdentityMatrixClass) {
            return this;
        }
        const m00 = this._v[0] * mat._v[0] + this._v[3] * mat._v[1] + this._v[6] * mat._v[2];
        const m01 = this._v[0] * mat._v[3] + this._v[3] * mat._v[4] + this._v[6] * mat._v[5];
        const m02 = this._v[0] * mat._v[6] + this._v[3] * mat._v[7] + this._v[6] * mat._v[8];
        const m10 = this._v[1] * mat._v[0] + this._v[4] * mat._v[1] + this._v[7] * mat._v[2];
        const m11 = this._v[1] * mat._v[3] + this._v[4] * mat._v[4] + this._v[7] * mat._v[5];
        const m12 = this._v[1] * mat._v[6] + this._v[4] * mat._v[7] + this._v[7] * mat._v[8];
        const m20 = this._v[2] * mat._v[0] + this._v[5] * mat._v[1] + this._v[8] * mat._v[2];
        const m21 = this._v[2] * mat._v[3] + this._v[5] * mat._v[4] + this._v[8] * mat._v[5];
        const m22 = this._v[2] * mat._v[6] + this._v[5] * mat._v[7] + this._v[8] * mat._v[8];
        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    multiplyByLeft(mat) {
        if (mat.isIdentityMatrixClass) {
            return this;
        }
        const m00 = mat._v[0] * this._v[0] + mat._v[3] * this._v[1] + mat._v[6] * this._v[2];
        const m01 = mat._v[0] * this._v[3] + mat._v[3] * this._v[4] + mat._v[6] * this._v[5];
        const m02 = mat._v[0] * this._v[6] + mat._v[3] * this._v[7] + mat._v[6] * this._v[8];
        const m10 = mat._v[1] * this._v[0] + mat._v[4] * this._v[1] + mat._v[7] * this._v[2];
        const m11 = mat._v[1] * this._v[3] + mat._v[4] * this._v[4] + mat._v[7] * this._v[5];
        const m12 = mat._v[1] * this._v[6] + mat._v[4] * this._v[7] + mat._v[7] * this._v[8];
        const m20 = mat._v[2] * this._v[0] + mat._v[5] * this._v[1] + mat._v[8] * this._v[2];
        const m21 = mat._v[2] * this._v[3] + mat._v[5] * this._v[4] + mat._v[8] * this._v[5];
        const m22 = mat._v[2] * this._v[6] + mat._v[5] * this._v[7] + mat._v[8] * this._v[8];
        return this.setComponents(m00, m01, m02, m10, m11, m12, m20, m21, m22);
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 9 values in 3x3 style (3 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy9RowMajor(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
        const v = new Float32Array(9);
        v[0] = m00;
        v[3] = m01;
        v[6] = m02;
        v[1] = m10;
        v[4] = m11;
        v[7] = m12;
        v[2] = m20;
        v[5] = m21;
        v[8] = m22;
        return new MutableMatrix33(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy9ColumnMajor(m00, m10, m20, m01, m11, m21, m02, m12, m22) {
        const v = new Float32Array(9);
        v[0] = m00;
        v[3] = m01;
        v[6] = m02;
        v[1] = m10;
        v[4] = m11;
        v[7] = m12;
        v[2] = m20;
        v[5] = m21;
        v[8] = m22;
        return new MutableMatrix33(v);
    }
    static fromCopyMatrix44(mat) {
        const v = new Float32Array(9);
        v.set(mat._v);
        return new MutableMatrix33(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new MutableMatrix33(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(9);
        v.set(float32Array);
        return new MutableMatrix33(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new MutableMatrix33(v);
    }
    static fromCopyMatrix33(mat) {
        const v = new Float32Array(9);
        v[0] = mat._v[0];
        v[3] = mat._v[3];
        v[6] = mat._v[6];
        v[1] = mat._v[1];
        v[4] = mat._v[4];
        v[7] = mat._v[7];
        v[2] = mat._v[2];
        v[5] = mat._v[5];
        v[8] = mat._v[8];
        return new MutableMatrix33(v);
    }
    static fromCopyArray9ColumnMajor(array) {
        const v = new Float32Array(9);
        v.set(array);
        return new MutableMatrix33(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(9);
        v.set(array);
        return new MutableMatrix33(v);
    }
    static fromCopyArray9RowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new MutableMatrix33(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(9);
        v[0] = array[0];
        v[3] = array[1];
        v[6] = array[2];
        v[1] = array[3];
        v[4] = array[4];
        v[7] = array[5];
        v[2] = array[6];
        v[5] = array[7];
        v[8] = array[8];
        return new MutableMatrix33(v);
    }
    static fromCopyQuaternion(q) {
        const sx = q._v[0] * q._v[0];
        const sy = q._v[1] * q._v[1];
        const sz = q._v[2] * q._v[2];
        const cx = q._v[1] * q._v[2];
        const cy = q._v[0] * q._v[2];
        const cz = q._v[0] * q._v[1];
        const wx = q._v[3] * q._v[0];
        const wy = q._v[3] * q._v[1];
        const wz = q._v[3] * q._v[2];
        const v = new Float32Array(9);
        v[0] = 1.0 - 2.0 * (sy + sz);
        v[3] = 2.0 * (cz - wz);
        v[6] = 2.0 * (cy + wy);
        v[1] = 2.0 * (cz + wz);
        v[4] = 1.0 - 2.0 * (sx + sz);
        v[7] = 2.0 * (cx - wx);
        v[2] = 2.0 * (cy - wy);
        v[5] = 2.0 * (cx + wx);
        v[8] = 1.0 - 2.0 * (sx + sy);
        return new MutableMatrix33(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableMatrix44.ts":
/*!************************************************!*\
  !*** ./src/foundation/math/MutableMatrix44.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableMatrix44": () => (/* binding */ MutableMatrix44)
/* harmony export */ });
/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix44 */ "./src/foundation/math/Matrix44.ts");
class MutableMatrix44 extends _Matrix44__WEBPACK_IMPORTED_MODULE_0__.Matrix44 {
    constructor(m) {
        super(m);
    }
    set m00(val) {
        this._v[0] = val;
    }
    get m00() {
        return this._v[0];
    }
    set m10(val) {
        this._v[1] = val;
    }
    get m10() {
        return this._v[1];
    }
    set m20(val) {
        this._v[2] = val;
    }
    get m20() {
        return this._v[2];
    }
    set m30(val) {
        this._v[3] = val;
    }
    get m30() {
        return this._v[3];
    }
    set m01(val) {
        this._v[4] = val;
    }
    get m01() {
        return this._v[4];
    }
    set m11(val) {
        this._v[5] = val;
    }
    get m11() {
        return this._v[5];
    }
    set m21(val) {
        this._v[6] = val;
    }
    get m21() {
        return this._v[6];
    }
    set m31(val) {
        this._v[7] = val;
    }
    get m31() {
        return this._v[7];
    }
    set m02(val) {
        this._v[8] = val;
    }
    get m02() {
        return this._v[8];
    }
    set m12(val) {
        this._v[9] = val;
    }
    get m12() {
        return this._v[9];
    }
    set m22(val) {
        this._v[10] = val;
    }
    get m22() {
        return this._v[10];
    }
    set m32(val) {
        this._v[11] = val;
    }
    get m32() {
        return this._v[11];
    }
    set m03(val) {
        this._v[12] = val;
    }
    get m03() {
        return this._v[12];
    }
    set m13(val) {
        this._v[13] = val;
    }
    get m13() {
        return this._v[13];
    }
    set m23(val) {
        this._v[14] = val;
    }
    get m23() {
        return this._v[14];
    }
    set m33(val) {
        this._v[15] = val;
    }
    get m33() {
        return this._v[15];
    }
    get translateX() {
        return this._v[12];
    }
    set translateX(val) {
        this._v[12] = val;
    }
    get translateY() {
        return this._v[13];
    }
    set translateY(val) {
        this._v[13] = val;
    }
    get translateZ() {
        return this._v[14];
    }
    set translateZ(val) {
        this._v[14] = val;
    }
    get className() {
        return 'MutableMatrix44';
    }
    /**
     * zero matrix(static version)
     */
    static zero() {
        return MutableMatrix44.fromCopy16RowMajor(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    /**
     * Create identity matrix
     */
    static identity() {
        return MutableMatrix44.fromCopy16RowMajor(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    static dummy() {
        return super.dummy();
    }
    /**
     * Create transpose matrix
     */
    static transpose(mat) {
        if (mat.isIdentityMatrixClass) {
            return mat;
        }
        return MutableMatrix44.fromCopyFloat32ArrayRowMajor(mat._v);
    }
    /**
     * Create invert matrix
     */
    static invert(mat) {
        return super.invert(mat);
    }
    /**
     * Create translation Matrix
     */
    static translate(vec) {
        return super.translate(vec);
    }
    /**
     * Create X oriented Rotation Matrix
     */
    static rotateX(radian) {
        return super.rotateX(radian);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    static rotateY(radian) {
        return super.rotateY(radian);
    }
    /**
     * Create Z oriented Rotation Matrix
     */
    static rotateZ(radian) {
        return super.rotateZ(radian);
    }
    static rotateXYZ(x, y, z) {
        return super.rotateXYZ(x, y, z);
    }
    static rotate(vec) {
        return super.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    /**
     * Create Scale Matrix
     */
    static scale(vec) {
        return super.scale(vec);
    }
    /**
     * multiply matrixes
     */
    static multiply(l_mat, r_mat) {
        return super.multiply(l_mat, r_mat);
    }
    clone() {
        const result = super.clone();
        return result;
    }
    getRotate() {
        const rotateMat = super.getRotate();
        return rotateMat;
    }
    getTranslate() {
        const rotateMat = super.getTranslate();
        return rotateMat;
    }
    getScale() {
        const rotateMat = super.getScale();
        return rotateMat;
    }
    raw() {
        return this._v;
    }
    setAt(row_i, column_i, value) {
        this._v[row_i + column_i * 4] = value;
        return this;
    }
    setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
        this._v[0] = m00;
        this._v[4] = m01;
        this._v[8] = m02;
        this._v[12] = m03;
        this._v[1] = m10;
        this._v[5] = m11;
        this._v[9] = m12;
        this._v[13] = m13;
        this._v[2] = m20;
        this._v[6] = m21;
        this._v[10] = m22;
        this._v[14] = m23;
        this._v[3] = m30;
        this._v[7] = m31;
        this._v[11] = m32;
        this._v[15] = m33;
        return this;
    }
    copyComponents(mat) {
        this._v[0] = mat._v[0];
        this._v[4] = mat._v[4];
        this._v[8] = mat._v[8];
        this._v[12] = mat._v[12];
        this._v[1] = mat._v[1];
        this._v[5] = mat._v[5];
        this._v[9] = mat._v[9];
        this._v[13] = mat._v[13];
        this._v[2] = mat._v[2];
        this._v[6] = mat._v[6];
        this._v[10] = mat._v[10];
        this._v[14] = mat._v[14];
        this._v[3] = mat._v[3];
        this._v[7] = mat._v[7];
        this._v[11] = mat._v[11];
        this._v[15] = mat._v[15];
        return this;
    }
    /**
     * zero matrix
     */
    zero() {
        return this.setComponents(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    }
    /**
     * to the identity matrix
     */
    identity() {
        return this.setComponents(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    _swap(l, r) {
        this._v[r] = [this._v[l], this._v[l] = this._v[r]][0];
    }
    /**
     * transpose
     */
    transpose() {
        this._swap(1, 4);
        this._swap(2, 8);
        this._swap(3, 12);
        this._swap(6, 9);
        this._swap(7, 13);
        this._swap(11, 14);
        return this;
    }
    invert() {
        const n00 = this._v[0] * this._v[5] - this._v[4] * this._v[1];
        const n01 = this._v[0] * this._v[9] - this._v[8] * this._v[1];
        const n02 = this._v[0] * this._v[13] - this._v[12] * this._v[1];
        const n03 = this._v[4] * this._v[9] - this._v[8] * this._v[5];
        const n04 = this._v[4] * this._v[13] - this._v[12] * this._v[5];
        const n05 = this._v[8] * this._v[13] - this._v[12] * this._v[9];
        const n06 = this._v[2] * this._v[7] - this._v[6] * this._v[3];
        const n07 = this._v[2] * this._v[11] - this._v[10] * this._v[3];
        const n08 = this._v[2] * this._v[15] - this._v[14] * this._v[3];
        const n09 = this._v[6] * this._v[11] - this._v[10] * this._v[7];
        const n10 = this._v[6] * this._v[15] - this._v[14] * this._v[7];
        const n11 = this._v[10] * this._v[15] - this._v[14] * this._v[11];
        const det = n00 * n11 - n01 * n10 + n02 * n09 + n03 * n08 - n04 * n07 + n05 * n06;
        if (det === 0) {
            console.error('the determinant is 0!');
        }
        const m00 = (this._v[5] * n11 - this._v[9] * n10 + this._v[13] * n09) / det;
        const m01 = (this._v[8] * n10 - this._v[4] * n11 - this._v[12] * n09) / det;
        const m02 = (this._v[7] * n05 - this._v[11] * n04 + this._v[15] * n03) / det;
        const m03 = (this._v[10] * n04 - this._v[6] * n05 - this._v[14] * n03) / det;
        const m10 = (this._v[9] * n08 - this._v[1] * n11 - this._v[13] * n07) / det;
        const m11 = (this._v[0] * n11 - this._v[8] * n08 + this._v[12] * n07) / det;
        const m12 = (this._v[11] * n02 - this._v[3] * n05 - this._v[15] * n01) / det;
        const m13 = (this._v[2] * n05 - this._v[10] * n02 + this._v[14] * n01) / det;
        const m20 = (this._v[1] * n10 - this._v[5] * n08 + this._v[13] * n06) / det;
        const m21 = (this._v[4] * n08 - this._v[0] * n10 - this._v[12] * n06) / det;
        const m22 = (this._v[3] * n04 - this._v[7] * n02 + this._v[15] * n00) / det;
        const m23 = (this._v[6] * n02 - this._v[2] * n04 - this._v[14] * n00) / det;
        const m30 = (this._v[5] * n07 - this._v[1] * n09 - this._v[9] * n06) / det;
        const m31 = (this._v[0] * n09 - this._v[4] * n07 + this._v[8] * n06) / det;
        const m32 = (this._v[7] * n01 - this._v[3] * n03 - this._v[11] * n00) / det;
        const m33 = (this._v[2] * n03 - this._v[6] * n01 + this._v[10] * n00) / det;
        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    translate(vec) {
        return this.setComponents(1, 0, 0, vec._v[0], 0, 1, 0, vec._v[1], 0, 0, 1, vec._v[2], 0, 0, 0, 1);
    }
    putTranslate(vec) {
        this._v[12] = vec._v[0];
        this._v[13] = vec._v[1];
        this._v[14] = vec._v[2];
        return this;
    }
    addTranslate(vec) {
        this._v[12] += vec._v[0];
        this._v[13] += vec._v[1];
        this._v[14] += vec._v[2];
        return this;
    }
    /**
     * Create X oriented Rotation Matrix
     */
    rotateX(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(1, 0, 0, 0, 0, cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1);
    }
    /**
     * Create Y oriented Rotation Matrix
     */
    rotateY(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(cos, 0, sin, 0, 0, 1, 0, 0, -sin, 0, cos, 0, 0, 0, 0, 1);
    }
    /**
   * Create Z oriented Rotation Matrix
   */
    rotateZ(radian) {
        const cos = Math.cos(radian);
        const sin = Math.sin(radian);
        return this.setComponents(cos, -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    }
    rotateXYZ(x, y, z) {
        const cosX = Math.cos(x);
        const sinX = Math.sin(x);
        const cosY = Math.cos(y);
        const sinY = Math.sin(y);
        const cosZ = Math.cos(z);
        const sinZ = Math.sin(z);
        // const x00 = 1;
        // const x01 = 0;
        // const x02 = 0;
        // const x10 = 0;
        const x11 = cosX;
        const x12 = -sinX;
        // const x20 = 0;
        const x21 = sinX;
        const x22 = cosX;
        const y00 = cosY;
        // const y01 = 0;
        const y02 = sinY;
        // const y10 = 0;
        // const y11 = 1;
        // const y12 = 0;
        const y20 = -sinY;
        // const y21 = 0;
        const y22 = cosY;
        const z00 = cosZ;
        const z01 = -sinZ;
        // const z02 = 0;
        const z10 = sinZ;
        const z11 = cosZ;
        // const z12 = 0;
        // const z20 = 0;
        // const z21 = 0;
        // const z22 = 1;
        // Y * X
        const yx00 = y00;
        const yx01 = y02 * x21;
        const yx02 = y02 * x22;
        //const yx10 = 0;
        const yx11 = x11;
        const yx12 = x12;
        const yx20 = y20;
        const yx21 = y22 * x21;
        const yx22 = y22 * x22;
        // Z * Y * X
        const m00 = z00 * yx00;
        const m01 = z00 * yx01 + z01 * yx11;
        const m02 = z00 * yx02 + z01 * yx12;
        const m10 = z10 * yx00;
        const m11 = z10 * yx01 + z11 * yx11;
        const m12 = z10 * yx02 + z11 * yx12;
        const m20 = yx20;
        const m21 = yx21;
        const m22 = yx22;
        const m03 = 0;
        const m13 = 0;
        const m23 = 0;
        const m30 = 0;
        const m31 = 0;
        const m32 = 0;
        const m33 = 1;
        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    rotate(vec) {
        return this.rotateXYZ(vec._v[0], vec._v[1], vec._v[2]);
    }
    scale(vec) {
        return this.setComponents(vec._v[0], 0, 0, 0, 0, vec._v[1], 0, 0, 0, 0, vec._v[2], 0, 0, 0, 0, 1);
    }
    multiplyScale(vec) {
        this._v[0] *= vec._v[0];
        this._v[4] *= vec._v[0];
        this._v[8] *= vec._v[0];
        this._v[12] *= vec._v[0];
        this._v[1] *= vec._v[1];
        this._v[5] *= vec._v[1];
        this._v[9] *= vec._v[1];
        this._v[13] *= vec._v[1];
        this._v[2] *= vec._v[2];
        this._v[6] *= vec._v[2];
        this._v[10] *= vec._v[2];
        this._v[14] *= vec._v[2];
        return this;
    }
    /**
     * multiply the input matrix from right side
     */
    multiply(mat) {
        if (mat.isIdentityMatrixClass) {
            return this;
        }
        const m00 = this._v[0] * mat._v[0] + this._v[4] * mat._v[1] + this._v[8] * mat._v[2] + this._v[12] * mat._v[3];
        const m01 = this._v[0] * mat._v[4] + this._v[4] * mat._v[5] + this._v[8] * mat._v[6] + this._v[12] * mat._v[7];
        const m02 = this._v[0] * mat._v[8] + this._v[4] * mat._v[9] + this._v[8] * mat._v[10] + this._v[12] * mat._v[11];
        const m03 = this._v[0] * mat._v[12] + this._v[4] * mat._v[13] + this._v[8] * mat._v[14] + this._v[12] * mat._v[15];
        const m10 = this._v[1] * mat._v[0] + this._v[5] * mat._v[1] + this._v[9] * mat._v[2] + this._v[13] * mat._v[3];
        const m11 = this._v[1] * mat._v[4] + this._v[5] * mat._v[5] + this._v[9] * mat._v[6] + this._v[13] * mat._v[7];
        const m12 = this._v[1] * mat._v[8] + this._v[5] * mat._v[9] + this._v[9] * mat._v[10] + this._v[13] * mat._v[11];
        const m13 = this._v[1] * mat._v[12] + this._v[5] * mat._v[13] + this._v[9] * mat._v[14] + this._v[13] * mat._v[15];
        const m20 = this._v[2] * mat._v[0] + this._v[6] * mat._v[1] + this._v[10] * mat._v[2] + this._v[14] * mat._v[3];
        const m21 = this._v[2] * mat._v[4] + this._v[6] * mat._v[5] + this._v[10] * mat._v[6] + this._v[14] * mat._v[7];
        const m22 = this._v[2] * mat._v[8] + this._v[6] * mat._v[9] + this._v[10] * mat._v[10] + this._v[14] * mat._v[11];
        const m23 = this._v[2] * mat._v[12] + this._v[6] * mat._v[13] + this._v[10] * mat._v[14] + this._v[14] * mat._v[15];
        const m30 = this._v[3] * mat._v[0] + this._v[7] * mat._v[1] + this._v[11] * mat._v[2] + this._v[15] * mat._v[3];
        const m31 = this._v[3] * mat._v[4] + this._v[7] * mat._v[5] + this._v[11] * mat._v[6] + this._v[15] * mat._v[7];
        const m32 = this._v[3] * mat._v[8] + this._v[7] * mat._v[9] + this._v[11] * mat._v[10] + this._v[15] * mat._v[11];
        const m33 = this._v[3] * mat._v[12] + this._v[7] * mat._v[13] + this._v[11] * mat._v[14] + this._v[15] * mat._v[15];
        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    multiplyByLeft(mat) {
        if (mat.isIdentityMatrixClass) {
            return this;
        }
        const m00 = mat._v[0] * this._v[0] + mat._v[4] * this._v[1] + mat._v[8] * this._v[2] + mat._v[12] * this._v[3];
        const m01 = mat._v[0] * this._v[4] + mat._v[4] * this._v[5] + mat._v[8] * this._v[6] + mat._v[12] * this._v[7];
        const m02 = mat._v[0] * this._v[8] + mat._v[4] * this._v[9] + mat._v[8] * this._v[10] + mat._v[12] * this._v[11];
        const m03 = mat._v[0] * this._v[12] + mat._v[4] * this._v[13] + mat._v[8] * this._v[14] + mat._v[12] * this._v[15];
        const m10 = mat._v[1] * this._v[0] + mat._v[5] * this._v[1] + mat._v[9] * this._v[2] + mat._v[13] * this._v[3];
        const m11 = mat._v[1] * this._v[4] + mat._v[5] * this._v[5] + mat._v[9] * this._v[6] + mat._v[13] * this._v[7];
        const m12 = mat._v[1] * this._v[8] + mat._v[5] * this._v[9] + mat._v[9] * this._v[10] + mat._v[13] * this._v[11];
        const m13 = mat._v[1] * this._v[12] + mat._v[5] * this._v[13] + mat._v[9] * this._v[14] + mat._v[13] * this._v[15];
        const m20 = mat._v[2] * this._v[0] + mat._v[6] * this._v[1] + mat._v[10] * this._v[2] + mat._v[14] * this._v[3];
        const m21 = mat._v[2] * this._v[4] + mat._v[6] * this._v[5] + mat._v[10] * this._v[6] + mat._v[14] * this._v[7];
        const m22 = mat._v[2] * this._v[8] + mat._v[6] * this._v[9] + mat._v[10] * this._v[10] + mat._v[14] * this._v[11];
        const m23 = mat._v[2] * this._v[12] + mat._v[6] * this._v[13] + mat._v[10] * this._v[14] + mat._v[14] * this._v[15];
        const m30 = mat._v[3] * this._v[0] + mat._v[7] * this._v[1] + mat._v[11] * this._v[2] + mat._v[15] * this._v[3];
        const m31 = mat._v[3] * this._v[4] + mat._v[7] * this._v[5] + mat._v[11] * this._v[6] + mat._v[15] * this._v[7];
        const m32 = mat._v[3] * this._v[8] + mat._v[7] * this._v[9] + mat._v[11] * this._v[10] + mat._v[15] * this._v[11];
        const m33 = mat._v[3] * this._v[12] + mat._v[7] * this._v[13] + mat._v[11] * this._v[14] + mat._v[15] * this._v[15];
        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    fromQuaternion(quat) {
        const sx = quat._v[0] * quat._v[0];
        const sy = quat._v[1] * quat._v[1];
        const sz = quat._v[2] * quat._v[2];
        const cx = quat._v[1] * quat._v[2];
        const cy = quat._v[0] * quat._v[2];
        const cz = quat._v[0] * quat._v[1];
        const wx = quat._v[3] * quat._v[0];
        const wy = quat._v[3] * quat._v[1];
        const wz = quat._v[3] * quat._v[2];
        const m00 = 1.0 - 2.0 * (sy + sz);
        const m01 = 2.0 * (cz - wz);
        const m02 = 2.0 * (cy + wy);
        const m03 = 0;
        const m10 = 2.0 * (cz + wz);
        const m11 = 1.0 - 2.0 * (sx + sz);
        const m12 = 2.0 * (cx - wx);
        const m13 = 0;
        const m20 = 2.0 * (cy - wy);
        const m21 = 2.0 * (cx + wx);
        const m22 = 1.0 - 2.0 * (sx + sy);
        const m23 = 0;
        const m30 = 0;
        const m31 = 0;
        const m32 = 0;
        const m33 = 1;
        return this.setComponents(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);
    }
    /**
     * Set values as Row Major
     * Note that WebGL matrix keeps the values in column major.
     * If you write 16 values in 4x4 style (4 values in each row),
     *   It will becomes an intuitive handling.
     * @returns
     */
    static fromCopy16RowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
        const v = new Float32Array(16);
        v[0] = m00;
        v[4] = m01;
        v[8] = m02;
        v[12] = m03;
        v[1] = m10;
        v[5] = m11;
        v[9] = m12;
        v[13] = m13;
        v[2] = m20;
        v[6] = m21;
        v[10] = m22;
        v[14] = m23;
        v[3] = m30;
        v[7] = m31;
        v[11] = m32;
        v[15] = m33;
        return new MutableMatrix44(v);
    }
    /**
     * Set values as Column Major
     * Note that WebGL matrix keeps the values in column major.
     * @returns
     */
    static fromCopy16ColumnMajor(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {
        const v = new Float32Array(16);
        v[0] = m00;
        v[4] = m01;
        v[8] = m02;
        v[12] = m03;
        v[1] = m10;
        v[5] = m11;
        v[9] = m12;
        v[13] = m13;
        v[2] = m20;
        v[6] = m21;
        v[10] = m22;
        v[14] = m23;
        v[3] = m30;
        v[7] = m31;
        v[11] = m32;
        v[15] = m33;
        return new MutableMatrix44(v);
    }
    static fromCopyMatrix44(mat) {
        const v = new Float32Array(16);
        v.set(mat._v);
        return new MutableMatrix44(v);
    }
    static fromFloat32ArrayColumnMajor(float32Array) {
        return new MutableMatrix44(float32Array);
    }
    static fromCopyFloat32ArrayColumnMajor(float32Array) {
        const v = new Float32Array(16);
        v.set(float32Array);
        return new MutableMatrix44(v);
    }
    static fromCopyFloat32ArrayRowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new MutableMatrix44(v);
    }
    static fromCopyMatrix33(mat) {
        const v = new Float32Array(16);
        v[0] = mat._v[0];
        v[4] = mat._v[3];
        v[8] = mat._v[6];
        v[12] = 0;
        v[1] = mat._v[1];
        v[5] = mat._v[4];
        v[9] = mat._v[7];
        v[13] = 0;
        v[2] = mat._v[2];
        v[6] = mat._v[5];
        v[10] = mat._v[8];
        v[14] = 0;
        v[3] = 0;
        v[7] = 0;
        v[11] = 0;
        v[15] = 1;
        return new MutableMatrix44(v);
    }
    static fromCopyArray16ColumnMajor(array) {
        const v = new Float32Array(16);
        v.set(array);
        return new MutableMatrix44(v);
    }
    static fromCopyArrayColumnMajor(array) {
        const v = new Float32Array(16);
        v.set(array);
        return new MutableMatrix44(v);
    }
    static fromCopyArray16RowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new MutableMatrix44(v);
    }
    static fromCopyArrayRowMajor(array) {
        const v = new Float32Array(16);
        v[0] = array[0];
        v[4] = array[1];
        v[8] = array[2];
        v[12] = array[3];
        v[1] = array[4];
        v[5] = array[5];
        v[9] = array[6];
        v[13] = array[7];
        v[2] = array[8];
        v[6] = array[9];
        v[10] = array[10];
        v[14] = array[11];
        v[3] = array[12];
        v[7] = array[13];
        v[11] = array[14];
        v[15] = array[15];
        return new MutableMatrix44(v);
    }
    static fromCopyQuaternion(q) {
        const sx = q._v[0] * q._v[0];
        const sy = q._v[1] * q._v[1];
        const sz = q._v[2] * q._v[2];
        const cx = q._v[1] * q._v[2];
        const cy = q._v[0] * q._v[2];
        const cz = q._v[0] * q._v[1];
        const wx = q._v[3] * q._v[0];
        const wy = q._v[3] * q._v[1];
        const wz = q._v[3] * q._v[2];
        const v = new Float32Array(16);
        v[0] = 1.0 - 2.0 * (sy + sz);
        v[4] = 2.0 * (cz - wz);
        v[8] = 2.0 * (cy + wy);
        v[12] = 0;
        v[1] = 2.0 * (cz + wz);
        v[5] = 1.0 - 2.0 * (sx + sz);
        v[9] = 2.0 * (cx - wx);
        v[13] = 0;
        v[2] = 2.0 * (cy - wy);
        v[6] = 2.0 * (cx + wx);
        v[10] = 1.0 - 2.0 * (sx + sy);
        v[14] = 0;
        v[3] = 0;
        v[7] = 0;
        v[11] = 0;
        v[15] = 1;
        return new MutableMatrix44(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableQuaternion.ts":
/*!**************************************************!*\
  !*** ./src/foundation/math/MutableQuaternion.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableQuaternion": () => (/* binding */ MutableQuaternion)
/* harmony export */ });
/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Quaternion */ "./src/foundation/math/Quaternion.ts");

class MutableQuaternion extends _Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion {
    constructor(x) {
        super(x);
    }
    set x(x) {
        this._v[0] = x;
    }
    get x() {
        return this._v[0];
    }
    set y(y) {
        this._v[1] = y;
    }
    get y() {
        return this._v[1];
    }
    set z(z) {
        this._v[2] = z;
    }
    get z() {
        return this._v[2];
    }
    set w(w) {
        this._v[3] = w;
    }
    get w() {
        return this._v[3];
    }
    get className() {
        return 'MutableQuaternion';
    }
    static identity() {
        return MutableQuaternion.fromCopy4(0, 0, 0, 1);
    }
    static dummy() {
        return new this(new Float32Array(0));
    }
    static invert(quat) {
        return super.invert(quat);
    }
    static qlerp(l_quat, r_quat, ratio) {
        return super.qlerp(l_quat, r_quat, ratio);
    }
    static lerp(l_quat, r_quat, ratio) {
        return super.lerp(l_quat, r_quat, ratio);
    }
    static axisAngle(vec, radian) {
        return super.axisAngle(vec, radian);
    }
    static fromMatrix(mat) {
        return super.fromMatrix(mat);
    }
    static fromPosition(vec) {
        return super.fromPosition(vec);
    }
    static add(l_quat, r_quat) {
        return super.add(l_quat, r_quat);
    }
    static subtract(l_quat, r_quat) {
        return super.subtract(l_quat, r_quat);
    }
    static multiply(l_quat, r_quat) {
        return super.multiply(l_quat, r_quat);
    }
    static multiplyNumber(quat, value) {
        return super.multiplyNumber(quat, value);
    }
    static divideNumber(quat, value) {
        return super.divideNumber(quat, value);
    }
    raw() {
        return this._v;
    }
    setAt(i, value) {
        this._v[i] = value;
        return this;
    }
    setComponents(x, y, z, w) {
        this._v[0] = x;
        this._v[1] = y;
        this._v[2] = z;
        this._v[3] = w;
        return this;
    }
    copyComponents(quat) {
        return this.setComponents(quat._v[0], quat._v[1], quat._v[2], quat._v[3]);
    }
    identity() {
        return this.setComponents(0, 0, 0, 1);
    }
    normalize() {
        const norm = this.length();
        return this.divideNumber(norm);
    }
    invert() {
        const norm = this.length();
        if (norm === 0.0) {
            return this; // [0, 0, 0, 0]
        }
        this._v[0] = -this._v[0] / norm;
        this._v[1] = -this._v[1] / norm;
        this._v[2] = -this._v[2] / norm;
        this._v[3] = this._v[3] / norm;
        return this;
    }
    qlerp(l_quat, r_quat, ratio) {
        let qr = l_quat._v[3] * r_quat._v[3] +
            l_quat._v[0] * r_quat._v[0] +
            l_quat._v[1] * r_quat._v[1] +
            l_quat._v[2] * r_quat._v[2];
        const ss = 1.0 - qr * qr;
        if (ss === 0.0) {
            return this.copyComponents(l_quat);
        }
        else {
            if (qr > 1) {
                qr = 0.999;
            }
            else if (qr < -1) {
                qr = -0.999;
            }
            let ph = Math.acos(qr);
            let s2;
            if (qr < 0.0 && ph > Math.PI / 2.0) {
                qr =
                    -l_quat._v[3] * r_quat._v[3] -
                        l_quat._v[0] * r_quat._v[0] -
                        l_quat._v[1] * r_quat._v[1] -
                        l_quat._v[2] * r_quat._v[2];
                ph = Math.acos(qr);
                s2 = (-1 * Math.sin(ph * ratio)) / Math.sin(ph);
            }
            else {
                s2 = Math.sin(ph * ratio) / Math.sin(ph);
            }
            const s1 = Math.sin(ph * (1.0 - ratio)) / Math.sin(ph);
            this._v[0] = l_quat._v[0] * s1 + r_quat._v[0] * s2;
            this._v[1] = l_quat._v[1] * s1 + r_quat._v[1] * s2;
            this._v[2] = l_quat._v[2] * s1 + r_quat._v[2] * s2;
            this._v[3] = l_quat._v[3] * s1 + r_quat._v[3] * s2;
        }
        return this;
    }
    lerp(l_quat, r_quat, ratio) {
        this._v[0] = l_quat._v[0] * (1 - ratio) + r_quat._v[0] * ratio;
        this._v[1] = l_quat._v[1] * (1 - ratio) + r_quat._v[1] * ratio;
        this._v[2] = l_quat._v[2] * (1 - ratio) + r_quat._v[2] * ratio;
        this._v[3] = l_quat._v[3] * (1 - ratio) + r_quat._v[3] * ratio;
        return this;
    }
    axisAngle(vec, radian) {
        const halfAngle = 0.5 * radian;
        const sin = Math.sin(halfAngle);
        const length = vec.length();
        if (length === 0) {
            console.error('0 division occurred!');
        }
        this._v[3] = Math.cos(halfAngle);
        this._v[0] = (sin * vec._v[0]) / length;
        this._v[1] = (sin * vec._v[1]) / length;
        this._v[2] = (sin * vec._v[2]) / length;
        return this;
    }
    fromMatrix(mat) {
        const tr = mat.m00 + mat.m11 + mat.m22;
        if (tr > 0) {
            const S = 0.5 / Math.sqrt(tr + 1.0);
            this._v[0] = (mat.m21 - mat.m12) * S;
            this._v[1] = (mat.m02 - mat.m20) * S;
            this._v[2] = (mat.m10 - mat.m01) * S;
            this._v[3] = 0.25 / S;
        }
        else if (mat.m00 > mat.m11 && mat.m00 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m00 - mat.m11 - mat.m22) * 2;
            this._v[0] = 0.25 * S;
            this._v[1] = (mat.m01 + mat.m10) / S;
            this._v[2] = (mat.m02 + mat.m20) / S;
            this._v[3] = (mat.m21 - mat.m12) / S;
        }
        else if (mat.m11 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m11 - mat.m00 - mat.m22) * 2;
            this._v[0] = (mat.m01 + mat.m10) / S;
            this._v[1] = 0.25 * S;
            this._v[2] = (mat.m12 + mat.m21) / S;
            this._v[3] = (mat.m02 - mat.m20) / S;
        }
        else {
            const S = Math.sqrt(1.0 + mat.m22 - mat.m00 - mat.m11) * 2;
            this._v[0] = (mat.m02 + mat.m20) / S;
            this._v[1] = (mat.m12 + mat.m21) / S;
            this._v[2] = 0.25 * S;
            this._v[3] = (mat.m10 - mat.m01) / S;
        }
        return this;
    }
    fromPosition(vec) {
        return this.setComponents(vec._v[0], vec._v[1], vec._v[2], 0);
    }
    add(quat) {
        this._v[0] += quat._v[0];
        this._v[1] += quat._v[1];
        this._v[2] += quat._v[2];
        this._v[3] += quat._v[3];
        return this;
    }
    subtract(quat) {
        this._v[0] -= quat._v[0];
        this._v[1] -= quat._v[1];
        this._v[2] -= quat._v[2];
        this._v[3] -= quat._v[3];
        return this;
    }
    multiply(quat) {
        const x = quat._v[3] * this._v[0] +
            quat._v[2] * this._v[1] +
            quat._v[1] * this._v[2] -
            quat._v[0] * this._v[3];
        const y = -quat._v[2] * this._v[0] +
            quat._v[3] * this._v[1] +
            quat._v[0] * this._v[2] -
            quat._v[1] * this._v[3];
        const z = quat._v[1] * this._v[0] +
            quat._v[0] * this._v[1] +
            quat._v[3] * this._v[2] -
            quat._v[2] * this._v[3];
        const w = -quat._v[0] * this._v[0] -
            quat._v[1] * this._v[1] -
            quat._v[2] * this._v[2] -
            quat._v[3] * this._v[3];
        return this.setComponents(x, y, z, w);
    }
    multiplyNumber(value) {
        this._v[0] *= value;
        this._v[1] *= value;
        this._v[2] *= value;
        this._v[3] *= value;
        return this;
    }
    divideNumber(value) {
        if (value !== 0) {
            this._v[0] /= value;
            this._v[1] /= value;
            this._v[2] /= value;
            this._v[3] /= value;
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = Infinity;
            this._v[1] = Infinity;
            this._v[2] = Infinity;
            this._v[3] = Infinity;
        }
        return this;
    }
    clone() {
        return MutableQuaternion.fromCopy4(this._v[0], this._v[1], this._v[2], this._v[3]);
    }
    static fromFloat32Array(array) {
        return new MutableQuaternion(array);
    }
    static fromCopyArray4(array) {
        return new MutableQuaternion(new Float32Array(array));
    }
    static fromCopyArray(array) {
        return new MutableQuaternion(new Float32Array(array.slice(0, 4)));
    }
    static fromCopy4(x, y, z, w) {
        return new MutableQuaternion(new Float32Array([x, y, z, w]));
    }
    static fromCopyQuaternion(quat) {
        const v = new Float32Array(4);
        v[0] = quat._v[0];
        v[1] = quat._v[1];
        v[2] = quat._v[2];
        v[3] = quat._v[3];
        return new MutableQuaternion(v);
    }
    static fromCopyVector4(vec) {
        const v = new Float32Array(4);
        v[0] = vec._v[0];
        v[1] = vec._v[1];
        v[2] = vec._v[2];
        v[3] = vec._v[3];
        return new MutableQuaternion(v);
    }
    static fromCopyLogQuaternion(x) {
        const theta = x._v[0] * x._v[0] + x._v[1] * x._v[1] + x._v[2] * x._v[2];
        const sin = Math.sin(theta);
        const v = new Float32Array(4);
        v[0] = x._v[0] * (sin / theta);
        v[1] = x._v[1] * (sin / theta);
        v[2] = x._v[2] * (sin / theta);
        v[3] = Math.cos(theta);
        return new MutableQuaternion(v);
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableScalar.ts":
/*!**********************************************!*\
  !*** ./src/foundation/math/MutableScalar.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableScalar": () => (/* binding */ MutableScalar),
/* harmony export */   "MutableScalar_": () => (/* binding */ MutableScalar_),
/* harmony export */   "MutableScalard": () => (/* binding */ MutableScalard)
/* harmony export */ });
/* harmony import */ var _Scalar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Scalar */ "./src/foundation/math/Scalar.ts");

class MutableScalar_ extends _Scalar__WEBPACK_IMPORTED_MODULE_0__.Scalar_ {
    constructor(x, { type }) {
        super(x, { type });
    }
    copyComponents(vec) {
        this._v[0] = vec._v[0];
    }
    get x() {
        return this._v[0];
    }
    set x(x) {
        this._v[0] = x;
    }
    get y() {
        return 0;
    }
    get z() {
        return 0;
    }
    get w() {
        return 1;
    }
    /**
     * change to string
     */
    toString() {
        return '(' + this._v[0] + ')';
    }
    setValue(value) {
        this.x = value;
        return this;
    }
}
class MutableScalar extends MutableScalar_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    clone() {
        return new MutableScalar(new Float32Array([this.x]));
    }
    static one() {
        return new MutableScalar(new Float32Array([1]));
    }
    static dummy() {
        return new MutableScalar(new Float32Array([]));
    }
    static zero() {
        return new MutableScalar(new Float32Array([0]));
    }
    get className() {
        return 'MutableScalar';
    }
}
class MutableScalard extends MutableScalar_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    clone() {
        return new MutableScalard(new Float64Array([this.x]));
    }
    static one() {
        return new MutableScalard(new Float64Array([1]));
    }
    static dummy() {
        return new MutableScalard(new Float64Array([]));
    }
    static zero() {
        return new MutableScalard(new Float64Array([0]));
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableVector2.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector2.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableVector2": () => (/* binding */ MutableVector2),
/* harmony export */   "MutableVector2_": () => (/* binding */ MutableVector2_),
/* harmony export */   "MutableVector2d": () => (/* binding */ MutableVector2d)
/* harmony export */ });
/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector2 */ "./src/foundation/math/Vector2.ts");

class MutableVector2_ extends _Vector2__WEBPACK_IMPORTED_MODULE_0__.Vector2_ {
    constructor(x, { type }) {
        super(x, { type });
    }
    set x(x) {
        this._v[0] = x;
    }
    get x() {
        return this._v[0];
    }
    set y(y) {
        this._v[1] = y;
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return 0;
    }
    get w() {
        return 1;
    }
    raw() {
        return this._v;
    }
    setAt(i, value) {
        this._v[i] = value;
        return this;
    }
    setComponents(x, y) {
        this._v[0] = x;
        this._v[1] = y;
        return this;
    }
    copyComponents(vec) {
        return this.setComponents(vec._v[0], vec._v[1]);
    }
    zero() {
        return this.setComponents(0, 0);
    }
    one() {
        return this.setComponents(1, 1);
    }
    normalize() {
        const length = this.length();
        this.divide(length);
        return this;
    }
    /**
     * add value
     */
    add(vec) {
        this._v[0] += vec._v[0];
        this._v[1] += vec._v[1];
        return this;
    }
    /**
     * subtract
     */
    subtract(vec) {
        this._v[0] -= vec._v[0];
        this._v[1] -= vec._v[1];
        return this;
    }
    /**
     * multiply
     */
    multiply(value) {
        this._v[0] *= value;
        this._v[1] *= value;
        return this;
    }
    /**
     * multiply vector
     */
    multiplyVector(vec) {
        this._v[0] *= vec._v[0];
        this._v[1] *= vec._v[1];
        return this;
    }
    /**
     * divide
     */
    divide(value) {
        if (value !== 0) {
            this._v[0] /= value;
            this._v[1] /= value;
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = Infinity;
            this._v[1] = Infinity;
        }
        return this;
    }
    /**
     * divide vector
     */
    divideVector(vec) {
        if (vec._v[0] !== 0 && vec._v[1] !== 0) {
            this._v[0] /= vec._v[0];
            this._v[1] /= vec._v[1];
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = vec._v[0] === 0 ? Infinity : this._v[0] / vec._v[0];
            this._v[1] = vec._v[1] === 0 ? Infinity : this._v[1] / vec._v[1];
        }
        return this;
    }
}
class MutableVector2 extends MutableVector2_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    static fromCopyArray2(array) {
        return new MutableVector2(new Float32Array(array));
    }
    static fromCopyArray(array) {
        return new MutableVector2(new Float32Array(array.slice(0, 2)));
    }
    static fromFloat32Array(float32Array) {
        return new MutableVector2(float32Array);
    }
    static fromCopyFloat32Array(float32Array) {
        return new MutableVector2(new Float32Array(float32Array.buffer.slice(0)));
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    get className() {
        return 'MutableVector2';
    }
    clone() {
        return super.clone();
    }
}
class MutableVector2d extends MutableVector2_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static fromCopyArray(array) {
        return new MutableVector2d(new Float64Array(array));
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableVector3.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector3.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableVector3": () => (/* binding */ MutableVector3),
/* harmony export */   "MutableVector3_": () => (/* binding */ MutableVector3_),
/* harmony export */   "MutableVector3d": () => (/* binding */ MutableVector3d)
/* harmony export */ });
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");

class MutableVector3_ extends _Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3_ {
    constructor(v, { type }) {
        super(v, { type });
    }
    set x(x) {
        this._v[0] = x;
    }
    get x() {
        return this._v[0];
    }
    set y(y) {
        this._v[1] = y;
    }
    get y() {
        return this._v[1];
    }
    set z(z) {
        this._v[2] = z;
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return 1;
    }
    raw() {
        return this._v;
    }
    setAt(i, value) {
        this._v[i] = value;
        return this;
    }
    setComponents(x, y, z) {
        this._v[0] = x;
        this._v[1] = y;
        this._v[2] = z;
        return this;
    }
    copyComponents(vec) {
        return this.setComponents(vec._v[0], vec._v[1], vec._v[2]);
    }
    zero() {
        return this.setComponents(0, 0, 0);
    }
    one() {
        return this.setComponents(1, 1, 1);
    }
    /**
     * normalize
     */
    normalize() {
        const length = this.length();
        this.divide(length);
        return this;
    }
    /**
     * add value
     */
    add(vec) {
        this._v[0] += vec._v[0];
        this._v[1] += vec._v[1];
        this._v[2] += vec._v[2];
        return this;
    }
    /**
     * subtract
     */
    subtract(vec) {
        this._v[0] -= vec._v[0];
        this._v[1] -= vec._v[1];
        this._v[2] -= vec._v[2];
        return this;
    }
    /**
     * multiply
     */
    multiply(value) {
        this._v[0] *= value;
        this._v[1] *= value;
        this._v[2] *= value;
        return this;
    }
    /**
     * multiply vector
     */
    multiplyVector(vec) {
        this._v[0] *= vec._v[0];
        this._v[1] *= vec._v[1];
        this._v[2] *= vec._v[2];
        return this;
    }
    /**
     * divide
     */
    divide(value) {
        if (value !== 0) {
            this._v[0] /= value;
            this._v[1] /= value;
            this._v[2] /= value;
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = Infinity;
            this._v[1] = Infinity;
            this._v[2] = Infinity;
        }
        return this;
    }
    /**
     * divide vector
     */
    divideVector(vec) {
        if (vec._v[0] !== 0 && vec._v[1] !== 0 && vec._v[2] !== 0) {
            this._v[0] /= vec._v[0];
            this._v[1] /= vec._v[1];
            this._v[2] /= vec._v[2];
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = vec._v[0] === 0 ? Infinity : this._v[0] / vec._v[0];
            this._v[1] = vec._v[1] === 0 ? Infinity : this._v[1] / vec._v[1];
            this._v[2] = vec._v[2] === 0 ? Infinity : this._v[2] / vec._v[2];
        }
        return this;
    }
    /**
     * cross product
     */
    cross(vec) {
        const x = this._v[1] * vec._v[2] - this._v[2] * vec._v[1];
        const y = this._v[2] * vec._v[0] - this._v[0] * vec._v[2];
        const z = this._v[0] * vec._v[1] - this._v[1] * vec._v[0];
        return this.setComponents(x, y, z);
    }
    /**
     * quaternion * vector3
     */
    multiplyQuaternion(quat) {
        const num = quat._v[0] * 2;
        const num2 = quat._v[1] * 2;
        const num3 = quat._v[2] * 2;
        const num4 = quat._v[0] * num;
        const num5 = quat._v[1] * num2;
        const num6 = quat._v[2] * num3;
        const num7 = quat._v[0] * num2;
        const num8 = quat._v[0] * num3;
        const num9 = quat._v[1] * num3;
        const num10 = quat._v[3] * num;
        const num11 = quat._v[3] * num2;
        const num12 = quat._v[3] * num3;
        const x = (1 - (num5 + num6)) * this._v[0] +
            (num7 - num12) * this._v[1] +
            (num8 + num11) * this._v[2];
        const y = (num7 + num12) * this._v[0] +
            (1 - (num4 + num6)) * this._v[1] +
            (num9 - num10) * this._v[2];
        const z = (num8 - num11) * this._v[0] +
            (num9 + num10) * this._v[1] +
            (1 - (num4 + num5)) * this._v[2];
        return this.setComponents(x, y, z);
    }
}
class MutableVector3 extends MutableVector3_ {
    constructor(v) {
        super(v, { type: Float32Array });
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float32Array);
    }
    static multiplyQuaternion(quat, vec) {
        return super._multiplyQuaternion(quat, vec, Float32Array);
    }
    get className() {
        return 'MutableVector3';
    }
    static fromCopyArray3(array) {
        return new MutableVector3(new Float32Array(array));
    }
    static fromCopyArray(array) {
        return new MutableVector3(new Float32Array(array.slice(0, 3)));
    }
    static fromFloat32Array(float32Array) {
        return new MutableVector3(float32Array);
    }
    static fromCopyFloat32Array(float32Array) {
        return new MutableVector3(new Float32Array(float32Array.buffer.slice(0)));
    }
    clone() {
        return super.clone();
    }
}
class MutableVector3d extends MutableVector3_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float64Array);
    }
    static multiplyQuaternion(quat, vec) {
        return super._multiplyQuaternion(quat, vec, Float64Array);
    }
    static fromCopyArray3(array) {
        return new MutableVector3d(new Float64Array(array));
    }
    static fromCopyArray(array) {
        return new MutableVector3d(new Float64Array(array.slice(0, 3)));
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/MutableVector4.ts":
/*!***********************************************!*\
  !*** ./src/foundation/math/MutableVector4.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MutableVector4": () => (/* binding */ MutableVector4),
/* harmony export */   "MutableVector4_": () => (/* binding */ MutableVector4_),
/* harmony export */   "MutableVector4d": () => (/* binding */ MutableVector4d)
/* harmony export */ });
/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vector4 */ "./src/foundation/math/Vector4.ts");

class MutableVector4_ extends _Vector4__WEBPACK_IMPORTED_MODULE_0__.Vector4_ {
    constructor(x, { type }) {
        super(x, { type });
        this.__updateCount = 0;
    }
    set x(x) {
        this._v[0] = x;
        this.__updateCount++;
    }
    get x() {
        return this._v[0];
    }
    set y(y) {
        this._v[1] = y;
        this.__updateCount++;
    }
    get y() {
        return this._v[1];
    }
    set z(z) {
        this._v[2] = z;
        this.__updateCount++;
    }
    get z() {
        return this._v[2];
    }
    set w(w) {
        this._v[3] = w;
        this.__updateCount++;
    }
    get w() {
        return this._v[3];
    }
    raw() {
        return this._v;
    }
    setAt(i, value) {
        this._v[i] = value;
        this.__updateCount++;
        return this;
    }
    setComponents(x, y, z, w) {
        this._v[0] = x;
        this._v[1] = y;
        this._v[2] = z;
        this._v[3] = w;
        this.__updateCount++;
        return this;
    }
    copyComponents(vec) {
        return this.setComponents(vec._v[0], vec._v[1], vec._v[2], vec._v[3]);
    }
    zero() {
        return this.setComponents(0, 0, 0, 0);
    }
    one() {
        return this.setComponents(1, 1, 1, 1);
    }
    /**
     * normalize
     */
    normalize() {
        const length = this.length();
        this.divide(length);
        return this;
    }
    normalize3() {
        const length = Math.hypot(this._v[0], this._v[1], this._v[2]);
        this.divide(length);
        return this;
    }
    /**
     * add value
     */
    add(vec) {
        this._v[0] += vec._v[0];
        this._v[1] += vec._v[1];
        this._v[2] += vec._v[2];
        this._v[3] += vec._v[3];
        return this;
    }
    /**
     * subtract
     */
    subtract(vec) {
        this._v[0] -= vec._v[0];
        this._v[1] -= vec._v[1];
        this._v[2] -= vec._v[2];
        this._v[3] -= vec._v[3];
        return this;
    }
    /**
     * multiply
     */
    multiply(value) {
        this._v[0] *= value;
        this._v[1] *= value;
        this._v[2] *= value;
        this._v[3] *= value;
        return this;
    }
    /**
     * multiply vector
     */
    multiplyVector(vec) {
        this._v[0] *= vec._v[0];
        this._v[1] *= vec._v[1];
        this._v[2] *= vec._v[2];
        this._v[3] *= vec._v[3];
        return this;
    }
    /**
     * divide
     */
    divide(value) {
        if (value !== 0) {
            this._v[0] /= value;
            this._v[1] /= value;
            this._v[2] /= value;
            this._v[3] /= value;
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = Infinity;
            this._v[1] = Infinity;
            this._v[2] = Infinity;
            this._v[3] = Infinity;
        }
        return this;
    }
    /**
     * divide vector
     */
    divideVector(vec) {
        if (vec._v[0] !== 0 &&
            vec._v[1] !== 0 &&
            vec._v[2] !== 0 &&
            vec._v[3] !== 0) {
            this._v[0] /= vec._v[0];
            this._v[1] /= vec._v[1];
            this._v[2] /= vec._v[2];
            this._v[3] /= vec._v[3];
        }
        else {
            console.error('0 division occurred!');
            this._v[0] = vec._v[0] === 0 ? Infinity : this._v[0] / vec._v[0];
            this._v[1] = vec._v[1] === 0 ? Infinity : this._v[1] / vec._v[1];
            this._v[2] = vec._v[2] === 0 ? Infinity : this._v[2] / vec._v[2];
            this._v[3] = vec._v[3] === 0 ? Infinity : this._v[3] / vec._v[3];
        }
        return this;
    }
    get _updateCount() {
        return this.__updateCount;
    }
}
class MutableVector4 extends MutableVector4_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    static fromCopyArray(array) {
        return new MutableVector4(new Float32Array(array).slice(0, 4));
    }
    static fromCopyArray4(array) {
        return new MutableVector4(new Float32Array(array));
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    get className() {
        return 'MutableVector4';
    }
    clone() {
        return new this.constructor(new this._v.constructor([
            this._v[0],
            this._v[1],
            this._v[2],
            this._v[3],
        ]));
    }
}
class MutableVector4d extends MutableVector4_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    static fromCopyArray4(array) {
        return new MutableVector4d(new Float64Array(array));
    }
    static fromCopyArray(array) {
        return new MutableVector4d(new Float64Array(array.slice(0, 4)));
    }
    clone() {
        return super.clone();
    }
}


/***/ }),

/***/ "./src/foundation/math/Quaternion.ts":
/*!*******************************************!*\
  !*** ./src/foundation/math/Quaternion.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Quaternion": () => (/* binding */ Quaternion)
/* harmony export */ });
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractQuaternion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractQuaternion */ "./src/foundation/math/AbstractQuaternion.ts");
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");




class Quaternion extends _AbstractQuaternion__WEBPACK_IMPORTED_MODULE_2__.AbstractQuaternion {
    constructor(x) {
        super();
        this._v = x;
    }
    get className() {
        return 'Quaternion';
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec4;
    }
    static identity() {
        return Quaternion.fromCopy4(0, 0, 0, 1);
    }
    static dummy() {
        return new this(new Float32Array(0));
    }
    static invert(quat) {
        const norm = quat.length();
        if (norm === 0.0) {
            return Quaternion.fromCopy4(0, 0, 0, 0);
        }
        const x = -quat._v[0] / norm;
        const y = -quat._v[1] / norm;
        const z = -quat._v[2] / norm;
        const w = quat._v[3] / norm;
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static invertTo(quat, out) {
        const norm = quat.length();
        if (norm === 0.0) {
            return out.setComponents(0, 0, 0, 0);
        }
        out._v[0] = -quat._v[0] / norm;
        out._v[1] = -quat._v[1] / norm;
        out._v[2] = -quat._v[2] / norm;
        out._v[3] = quat._v[3] / norm;
        return out;
    }
    /**
     * Compute spherical linear interpolation
     */
    static qlerp(l_quat, r_quat, ratio) {
        let dotProduct = l_quat._v[0] * r_quat._v[0] +
            l_quat._v[1] * r_quat._v[1] +
            l_quat._v[2] * r_quat._v[2] +
            l_quat._v[3] * r_quat._v[3];
        const ss = 1.0 - dotProduct * dotProduct;
        if (ss === 0.0) {
            return l_quat.clone();
        }
        else {
            if (dotProduct > 1) {
                dotProduct = 0.999;
            }
            else if (dotProduct < -1) {
                dotProduct = -0.999;
            }
            let theta = Math.acos(dotProduct);
            const sinTheta = Math.sin(theta);
            let s2;
            if (dotProduct < 0.0) {
                dotProduct *= -1;
                theta = Math.acos(dotProduct);
                s2 = (-1 * Math.sin(theta * ratio)) / sinTheta;
            }
            else {
                s2 = Math.sin(theta * ratio) / sinTheta;
            }
            const s1 = Math.sin(theta * (1.0 - ratio)) / sinTheta;
            let x = l_quat._v[0] * s1 + r_quat._v[0] * s2;
            let y = l_quat._v[1] * s1 + r_quat._v[1] * s2;
            let z = l_quat._v[2] * s1 + r_quat._v[2] * s2;
            let w = l_quat._v[3] * s1 + r_quat._v[3] * s2;
            // normalize
            const length = Math.hypot(x, y, z, w);
            x = x / length;
            y = y / length;
            z = z / length;
            w = w / length;
            return Quaternion.fromCopy4(x, y, z, w);
        }
    }
    /**
     *  Compute the spherical linear interpolation and output it as the fourth argument
     */
    static qlerpTo(l_quat, r_quat, ratio, out) {
        let dotProduct = l_quat._v[0] * r_quat._v[0] +
            l_quat._v[1] * r_quat._v[1] +
            l_quat._v[2] * r_quat._v[2] +
            l_quat._v[3] * r_quat._v[3];
        const ss = 1.0 - dotProduct * dotProduct;
        if (ss === 0.0) {
            return out.copyComponents(l_quat);
        }
        else {
            if (dotProduct > 1) {
                dotProduct = 0.999;
            }
            else if (dotProduct < -1) {
                dotProduct = -0.999;
            }
            let theta = Math.acos(dotProduct);
            const sinTheta = Math.sin(theta);
            let s2;
            if (dotProduct < 0.0) {
                dotProduct *= -1;
                theta = Math.acos(dotProduct);
                s2 = (-1 * Math.sin(theta * ratio)) / sinTheta;
            }
            else {
                s2 = Math.sin(theta * ratio) / sinTheta;
            }
            const s1 = Math.sin(theta * (1.0 - ratio)) / sinTheta;
            out._v[0] = l_quat._v[0] * s1 + r_quat._v[0] * s2;
            out._v[1] = l_quat._v[1] * s1 + r_quat._v[1] * s2;
            out._v[2] = l_quat._v[2] * s1 + r_quat._v[2] * s2;
            out._v[3] = l_quat._v[3] * s1 + r_quat._v[3] * s2;
        }
        return out.normalize();
    }
    static lerp(l_quat, r_quat, ratio) {
        const x = l_quat._v[0] * (1 - ratio) + r_quat._v[0] * ratio;
        const y = l_quat._v[1] * (1 - ratio) + r_quat._v[1] * ratio;
        const z = l_quat._v[2] * (1 - ratio) + r_quat._v[2] * ratio;
        const w = l_quat._v[3] * (1 - ratio) + r_quat._v[3] * ratio;
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static lerpTo(l_quat, r_quat, ratio, out) {
        out._v[0] = l_quat._v[0] * (1 - ratio) + r_quat._v[0] * ratio;
        out._v[1] = l_quat._v[1] * (1 - ratio) + r_quat._v[1] * ratio;
        out._v[2] = l_quat._v[2] * (1 - ratio) + r_quat._v[2] * ratio;
        out._v[3] = l_quat._v[3] * (1 - ratio) + r_quat._v[3] * ratio;
        return out;
    }
    static axisAngle(vec, radian) {
        const halfAngle = 0.5 * radian;
        const sin = Math.sin(halfAngle);
        const length = vec.length();
        if (length === 0) {
            console.error('0 division occurred!');
        }
        return Quaternion.fromCopy4((sin * vec._v[0]) / length, (sin * vec._v[1]) / length, (sin * vec._v[2]) / length, Math.cos(halfAngle));
    }
    static fromMatrix(mat) {
        const quat = Quaternion.fromCopy4(0, 0, 0, 1);
        const tr = mat.m00 + mat.m11 + mat.m22;
        if (tr > 0) {
            const S = 0.5 / Math.sqrt(tr + 1.0);
            quat._v[3] = 0.25 / S;
            quat._v[0] = (mat.m21 - mat.m12) * S;
            quat._v[1] = (mat.m02 - mat.m20) * S;
            quat._v[2] = (mat.m10 - mat.m01) * S;
        }
        else if (mat.m00 > mat.m11 && mat.m00 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m00 - mat.m11 - mat.m22) * 2;
            quat._v[3] = (mat.m21 - mat.m12) / S;
            quat._v[0] = 0.25 * S;
            quat._v[1] = (mat.m01 + mat.m10) / S;
            quat._v[2] = (mat.m02 + mat.m20) / S;
        }
        else if (mat.m11 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m11 - mat.m00 - mat.m22) * 2;
            quat._v[3] = (mat.m02 - mat.m20) / S;
            quat._v[0] = (mat.m01 + mat.m10) / S;
            quat._v[1] = 0.25 * S;
            quat._v[2] = (mat.m12 + mat.m21) / S;
        }
        else {
            const S = Math.sqrt(1.0 + mat.m22 - mat.m00 - mat.m11) * 2;
            quat._v[3] = (mat.m10 - mat.m01) / S;
            quat._v[0] = (mat.m02 + mat.m20) / S;
            quat._v[1] = (mat.m12 + mat.m21) / S;
            quat._v[2] = 0.25 * S;
        }
        return quat;
    }
    static fromMatrixTo(mat, out) {
        const tr = mat.m00 + mat.m11 + mat.m22;
        if (tr > 0) {
            const S = 0.5 / Math.sqrt(tr + 1.0);
            out._v[3] = 0.25 / S;
            out._v[0] = (mat.m21 - mat.m12) * S;
            out._v[1] = (mat.m02 - mat.m20) * S;
            out._v[2] = (mat.m10 - mat.m01) * S;
        }
        else if (mat.m00 > mat.m11 && mat.m00 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m00 - mat.m11 - mat.m22) * 2;
            out._v[3] = (mat.m21 - mat.m12) / S;
            out._v[0] = 0.25 * S;
            out._v[1] = (mat.m01 + mat.m10) / S;
            out._v[2] = (mat.m02 + mat.m20) / S;
        }
        else if (mat.m11 > mat.m22) {
            const S = Math.sqrt(1.0 + mat.m11 - mat.m00 - mat.m22) * 2;
            out._v[3] = (mat.m02 - mat.m20) / S;
            out._v[0] = (mat.m01 + mat.m10) / S;
            out._v[1] = 0.25 * S;
            out._v[2] = (mat.m12 + mat.m21) / S;
        }
        else {
            const S = Math.sqrt(1.0 + mat.m22 - mat.m00 - mat.m11) * 2;
            out._v[3] = (mat.m10 - mat.m01) / S;
            out._v[0] = (mat.m02 + mat.m20) / S;
            out._v[1] = (mat.m12 + mat.m21) / S;
            out._v[2] = 0.25 * S;
        }
        return out;
    }
    static lookFromTo(fromDirection, toDirection) {
        if (fromDirection.isEqual(toDirection)) {
            return Quaternion.fromCopy4(0, 0, 0, 1);
        }
        return this.qlerp(this.lookForward(fromDirection), this.lookForward(toDirection), 1);
    }
    static lookForward(forward) {
        if (Quaternion.__tmp_upVec == null) {
            Quaternion.__tmp_upVec = new forward.constructor(0, 1, 0);
        }
        return this.lookForwardAccordingToThisUp(forward, Quaternion.__tmp_upVec);
    }
    static lookForwardAccordingToThisUp(forward, up) {
        const forwardLength = forward.length();
        if (forwardLength === 0) {
            console.error('0 division occurred!');
        }
        const forwardX = forward._v[0] / forwardLength;
        const forwardY = forward._v[1] / forwardLength;
        const forwardZ = forward._v[2] / forwardLength;
        const upLength = up.length();
        if (upLength === 0) {
            console.error('0 division occurred!');
        }
        const upX = up._v[0] / upLength;
        const upY = up._v[1] / upLength;
        const upZ = up._v[2] / upLength;
        // Vector3.cross(up, forward)
        let rightX = up._v[1] * forward._v[2] - up._v[2] * forward._v[1];
        let rightY = up._v[2] * forward._v[0] - up._v[0] * forward._v[2];
        let rightZ = up._v[0] * forward._v[1] - up._v[1] * forward._v[0];
        const rightLength = Math.hypot(rightX, rightY, rightZ);
        if (rightLength === 0) {
            console.error('0 division occurred!');
        }
        rightX /= rightLength;
        rightY /= rightLength;
        rightZ /= rightLength;
        const m00 = rightX;
        const m01 = rightY;
        const m02 = rightZ;
        const m10 = upX;
        const m11 = upY;
        const m12 = upZ;
        const m20 = forwardX;
        const m21 = forwardY;
        const m22 = forwardZ;
        const num8 = m00 + m11 + m22;
        if (num8 > 0) {
            const num = Math.sqrt(num8 + 1);
            const num2 = 0.5 / num;
            return Quaternion.fromCopy4((m12 - m21) * num2, (m20 - m02) * num2, (m01 - m10) * num2, num * 0.5);
        }
        else if (m00 >= m11 && m00 >= m22) {
            const num7 = Math.sqrt(1 + m00 - m11 - m22);
            const num4 = 0.5 / num7;
            return Quaternion.fromCopy4(0.5 * num7, (m01 + m10) * num4, (m02 + m20) * num4, (m12 - m21) * num4);
        }
        else if (m11 > m22) {
            const num6 = Math.sqrt(1 + m11 - m00 - m22);
            const num3 = 0.5 / num6;
            return Quaternion.fromCopy4((m10 + m01) * num3, 0.5 * num6, (m21 + m12) * num3, (m20 - m02) * num3);
        }
        else {
            const num5 = Math.sqrt(1 + m22 - m00 - m11);
            const num2 = 0.5 / num5;
            return Quaternion.fromCopy4((m20 + m02) * num2, (m21 + m12) * num2, 0.5 * num5, (m01 - m10) * num2);
        }
    }
    static fromPosition(vec) {
        return Quaternion.fromCopy4(vec._v[0], vec._v[1], vec._v[2], 0);
    }
    static add(l_quat, r_quat) {
        const x = l_quat._v[0] + r_quat._v[0];
        const y = l_quat._v[1] + r_quat._v[1];
        const z = l_quat._v[2] + r_quat._v[2];
        const w = l_quat._v[3] + r_quat._v[3];
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static addTo(l_quat, r_quat, out) {
        out._v[0] = l_quat._v[0] + r_quat._v[0];
        out._v[1] = l_quat._v[1] + r_quat._v[1];
        out._v[2] = l_quat._v[2] + r_quat._v[2];
        out._v[3] = l_quat._v[3] + r_quat._v[3];
        return out;
    }
    static subtract(l_quat, r_quat) {
        const x = l_quat._v[0] - r_quat._v[0];
        const y = l_quat._v[1] - r_quat._v[1];
        const z = l_quat._v[2] - r_quat._v[2];
        const w = l_quat._v[3] - r_quat._v[3];
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static subtractTo(l_quat, r_quat, out) {
        out._v[0] = l_quat._v[0] - r_quat._v[0];
        out._v[1] = l_quat._v[1] - r_quat._v[1];
        out._v[2] = l_quat._v[2] - r_quat._v[2];
        out._v[3] = l_quat._v[3] - r_quat._v[3];
        return out;
    }
    static multiply(l_quat, r_quat) {
        const x = r_quat._v[3] * l_quat._v[0] +
            r_quat._v[2] * l_quat._v[1] -
            r_quat._v[1] * l_quat._v[2] +
            r_quat._v[0] * l_quat._v[3];
        const y = -r_quat._v[2] * l_quat._v[0] +
            r_quat._v[3] * l_quat._v[1] +
            r_quat._v[0] * l_quat._v[2] +
            r_quat._v[1] * l_quat._v[3];
        const z = r_quat._v[1] * l_quat._v[0] -
            r_quat._v[0] * l_quat._v[1] +
            r_quat._v[3] * l_quat._v[2] +
            r_quat._v[2] * l_quat._v[3];
        const w = -r_quat._v[0] * l_quat._v[0] -
            r_quat._v[1] * l_quat._v[1] -
            r_quat._v[2] * l_quat._v[2] +
            r_quat._v[3] * l_quat._v[3];
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static multiplyTo(l_quat, r_quat, out) {
        const x = r_quat._v[3] * l_quat._v[0] +
            r_quat._v[2] * l_quat._v[1] -
            r_quat._v[1] * l_quat._v[2] +
            r_quat._v[0] * l_quat._v[3];
        const y = -r_quat._v[2] * l_quat._v[0] +
            r_quat._v[3] * l_quat._v[1] +
            r_quat._v[0] * l_quat._v[2] +
            r_quat._v[1] * l_quat._v[3];
        const z = r_quat._v[1] * l_quat._v[0] -
            r_quat._v[0] * l_quat._v[1] +
            r_quat._v[3] * l_quat._v[2] +
            r_quat._v[2] * l_quat._v[3];
        const w = -r_quat._v[0] * l_quat._v[0] -
            r_quat._v[1] * l_quat._v[1] -
            r_quat._v[2] * l_quat._v[2] +
            r_quat._v[3] * l_quat._v[3];
        return out.setComponents(x, y, z, w);
    }
    static multiplyNumber(quat, value) {
        const x = quat._v[0] * value;
        const y = quat._v[1] * value;
        const z = quat._v[2] * value;
        const w = quat._v[3] * value;
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static multiplyNumberTo(quat, value, out) {
        out._v[0] = quat._v[0] * value;
        out._v[1] = quat._v[1] * value;
        out._v[2] = quat._v[2] * value;
        out._v[3] = quat._v[3] * value;
        return out;
    }
    static divideNumber(quat, value) {
        if (value === 0) {
            console.error('0 division occurred!');
        }
        const x = quat._v[0] / value;
        const y = quat._v[1] / value;
        const z = quat._v[2] / value;
        const w = quat._v[3] / value;
        return Quaternion.fromCopy4(x, y, z, w);
    }
    static divideNumberTo(quat, value, out) {
        if (value === 0) {
            console.error('0 division occurred!');
        }
        out._v[0] = quat._v[0] / value;
        out._v[1] = quat._v[1] / value;
        out._v[2] = quat._v[2] / value;
        out._v[3] = quat._v[3] / value;
        return out;
    }
    toString() {
        return ('(' +
            this._v[0] +
            ', ' +
            this._v[1] +
            ', ' +
            this._v[2] +
            ', ' +
            this._v[3] +
            ')');
    }
    toStringApproximately() {
        return (_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[0]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[1]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[2]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[3]) +
            '\n');
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2], this._v[3]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(quat, delta = Number.EPSILON) {
        if (Math.abs(quat._v[0] - this._v[0]) < delta &&
            Math.abs(quat._v[1] - this._v[1]) < delta &&
            Math.abs(quat._v[2] - this._v[2]) < delta &&
            Math.abs(quat._v[3] - this._v[3]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(quat) {
        if (this._v[0] === quat._v[0] &&
            this._v[1] === quat._v[1] &&
            this._v[2] === quat._v[2] &&
            this._v[3] === quat._v[3]) {
            return true;
        }
        else {
            return false;
        }
    }
    toEulerAnglesTo(out) {
        // this is from https://en._v[3]ikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Source_Code_2
        const sinr_cosp = 2.0 * (this._v[3] * this._v[0] + this._v[1] * this._v[2]);
        const cosr_cosp = 1.0 - 2.0 * (this._v[0] * this._v[0] + this._v[1] * this._v[1]);
        out._v[0] = Math.atan2(sinr_cosp, cosr_cosp);
        const sinp = 2.0 * (this._v[3] * this._v[1] - this._v[2] * this._v[0]);
        if (Math.abs(sinp) >= 1) {
            out._v[1] = (Math.PI / 2) * Math.sign(sinp); // use 90 degrees if out of range
        }
        else {
            out._v[1] = Math.asin(sinp);
        }
        const siny_cosp = 2.0 * (this._v[3] * this._v[2] + this._v[0] * this._v[1]);
        const cosy_cosp = 1.0 - 2.0 * (this._v[1] * this._v[1] + this._v[2] * this._v[2]);
        out._v[2] = Math.atan2(siny_cosp, cosy_cosp);
        return out;
    }
    toEulerAngles() {
        const out = new _Vector3__WEBPACK_IMPORTED_MODULE_3__.Vector3(new Float32Array(3));
        // this is from https://en._v[3]ikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles#Source_Code_2
        const sinr_cosp = 2.0 * (this._v[3] * this._v[0] + this._v[1] * this._v[2]);
        const cosr_cosp = 1.0 - 2.0 * (this._v[0] * this._v[0] + this._v[1] * this._v[1]);
        out._v[0] = Math.atan2(sinr_cosp, cosr_cosp);
        const sinp = 2.0 * (this._v[3] * this._v[1] - this._v[2] * this._v[0]);
        if (Math.abs(sinp) >= 1) {
            out._v[1] = (Math.PI / 2) * Math.sign(sinp); // use 90 degrees if out of range
        }
        else {
            out._v[1] = Math.asin(sinp);
        }
        const siny_cosp = 2.0 * (this._v[3] * this._v[2] + this._v[0] * this._v[1]);
        const cosy_cosp = 1.0 - 2.0 * (this._v[1] * this._v[1] + this._v[2] * this._v[2]);
        out._v[2] = Math.atan2(siny_cosp, cosy_cosp);
        return out;
    }
    clone() {
        return new this.constructor(this._v[0], this._v[1], this._v[2], this._v[3]);
    }
    static fromFloat32Array(array) {
        return new Quaternion(array);
    }
    static fromCopyArray4(array) {
        return new Quaternion(new Float32Array(array));
    }
    static fromCopyArray(array) {
        return new Quaternion(new Float32Array(array.slice(0, 4)));
    }
    static fromCopy4(x, y, z, w) {
        return new Quaternion(new Float32Array([x, y, z, w]));
    }
    static fromCopyQuaternion(quat) {
        const v = new Float32Array(4);
        v[0] = quat._v[0];
        v[1] = quat._v[1];
        v[2] = quat._v[2];
        v[3] = quat._v[3];
        return new Quaternion(v);
    }
    static fromCopyVector4(vec) {
        const v = new Float32Array(4);
        v[0] = vec._v[0];
        v[1] = vec._v[1];
        v[2] = vec._v[2];
        v[3] = vec._v[3];
        return new Quaternion(v);
    }
    static fromCopyLogQuaternion(x) {
        const theta = x._v[0] * x._v[0] + x._v[1] * x._v[1] + x._v[2] * x._v[2];
        const sin = Math.sin(theta);
        const v = new Float32Array(4);
        v[0] = x._v[0] * (sin / theta);
        v[1] = x._v[1] * (sin / theta);
        v[2] = x._v[2] * (sin / theta);
        v[3] = Math.cos(theta);
        return new Quaternion(v);
    }
}
Quaternion.__tmp_upVec = undefined;


/***/ }),

/***/ "./src/foundation/math/Scalar.ts":
/*!***************************************!*\
  !*** ./src/foundation/math/Scalar.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Scalar": () => (/* binding */ Scalar),
/* harmony export */   "Scalar_": () => (/* binding */ Scalar_),
/* harmony export */   "Scalard": () => (/* binding */ Scalard)
/* harmony export */ });
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _AbstractVector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractVector */ "./src/foundation/math/AbstractVector.ts");


class Scalar_ extends _AbstractVector__WEBPACK_IMPORTED_MODULE_1__.AbstractVector {
    constructor(v, { type }) {
        super();
        this._v = v;
    }
    getValue() {
        return this._v[0];
    }
    getValueInArray() {
        return [this._v[0]];
    }
    get x() {
        return this._v[0];
    }
    get raw() {
        return this._v;
    }
    isStrictEqual(scalar) {
        if (this.x === scalar.x) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(scalar, delta = Number.EPSILON) {
        if (Math.abs(scalar.x - this.x) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    get glslStrAsFloat() {
        return `${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this.x)}`;
    }
    get glslStrAsInt() {
        return `${Math.floor(this.x)}`;
    }
    static _fromCopyNumber(value, type) {
        return new this(new type([value]), { type });
    }
    static _dummy(type) {
        return new this(new type(), { type });
    }
}
class Scalar extends Scalar_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    static fromCopyNumber(value) {
        return super._fromCopyNumber(value, Float32Array);
    }
    static zero() {
        return Scalar.fromCopyNumber(0);
    }
    static one() {
        return Scalar.fromCopyNumber(1);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    get className() {
        return 'Scalar';
    }
    /**
     * change to string
     */
    toString() {
        return '(' + this._v[0] + ')';
    }
    clone() {
        return new Scalar(this._v);
    }
}
class Scalard extends Scalar_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static fromCopyNumber(value) {
        return super._fromCopyNumber(value, Float64Array);
    }
    static zero() {
        return Scalard.fromCopyNumber(0);
    }
    static one() {
        return Scalard.fromCopyNumber(1);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    clone() {
        return new Scalard(this._v);
    }
}


/***/ }),

/***/ "./src/foundation/math/Vector2.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector2.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConstVector2_0_0": () => (/* binding */ ConstVector2_0_0),
/* harmony export */   "ConstVector2_1_1": () => (/* binding */ ConstVector2_1_1),
/* harmony export */   "Vector2": () => (/* binding */ Vector2),
/* harmony export */   "Vector2_": () => (/* binding */ Vector2_),
/* harmony export */   "Vector2d": () => (/* binding */ Vector2d)
/* harmony export */ });
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractVector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractVector */ "./src/foundation/math/AbstractVector.ts");



class Vector2_ extends _AbstractVector__WEBPACK_IMPORTED_MODULE_2__.AbstractVector {
    constructor(v, { type }) {
        super();
        this._v = v;
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get glslStrAsFloat() {
        return `vec2(${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[0])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[1])})`;
    }
    get glslStrAsInt() {
        return `ivec2(${Math.floor(this._v[0])}, ${Math.floor(this._v[1])})`;
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec2;
    }
    /**
     * to square length(static version)
     */
    static lengthSquared(vec) {
        return vec.lengthSquared();
    }
    static lengthBtw(l_vec, r_vec) {
        return l_vec.lengthTo(r_vec);
    }
    static angleOfVectors(l_vec, r_vec) {
        const multipliedLength = l_vec.length() * r_vec.length();
        if (multipliedLength === 0) {
            console.error('length of a vector is 0!');
        }
        const cos_sita = l_vec.dot(r_vec) / multipliedLength;
        const sita = Math.acos(cos_sita);
        return sita;
    }
    static _zero(type) {
        return this._fromCopyArray2([0, 0], type);
    }
    static _one(type) {
        return this._fromCopyArray2([1, 1], type);
    }
    static _dummy(type) {
        return new this(new type(), { type });
    }
    /**
     * normalize(static version)
     */
    static _normalize(vec, type) {
        const length = vec.length();
        return this._divide(vec, length, type);
    }
    /**
     * add valuestatic version
     */
    static _add(l_vec, r_vec, type) {
        const x = l_vec._v[0] + r_vec._v[0];
        const y = l_vec._v[1] + r_vec._v[1];
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * add valuestatic version
     */
    static addTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] + r_vec._v[0];
        out._v[1] = l_vec._v[1] + r_vec._v[1];
        return out;
    }
    /**
     * subtract value(static version)
     */
    static _subtract(l_vec, r_vec, type) {
        const x = l_vec._v[0] - r_vec._v[0];
        const y = l_vec._v[1] - r_vec._v[1];
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * subtract value(static version)
     */
    static subtractTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] - r_vec._v[0];
        out._v[1] = l_vec._v[1] - r_vec._v[1];
        return out;
    }
    /**
     * multiply value(static version)
     */
    static _multiply(vec, value, type) {
        const x = vec._v[0] * value;
        const y = vec._v[1] * value;
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * multiply value(static version)
     */
    static multiplyTo(vec, value, out) {
        out._v[0] = vec._v[0] * value;
        out._v[1] = vec._v[1] * value;
        return out;
    }
    /**
     * multiply vector(static version)
     */
    static _multiplyVector(l_vec, r_vec, type) {
        const x = l_vec._v[0] * r_vec._v[0];
        const y = l_vec._v[1] * r_vec._v[1];
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * multiply vector(static version)
     */
    static multiplyVectorTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] * r_vec._v[0];
        out._v[1] = l_vec._v[1] * r_vec._v[1];
        return out;
    }
    /**
     * divide by value(static version)
     */
    static _divide(vec, value, type) {
        let x;
        let y;
        if (value !== 0) {
            x = vec._v[0] / value;
            y = vec._v[1] / value;
        }
        else {
            console.error('0 division occurred!');
            x = Infinity;
            y = Infinity;
        }
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * divide by value(static version)
     */
    static divideTo(vec, value, out) {
        if (value !== 0) {
            out._v[0] = vec._v[0] / value;
            out._v[1] = vec._v[1] / value;
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = Infinity;
            out._v[1] = Infinity;
        }
        return out;
    }
    /**
     * divide by vector(static version)
     */
    static _divideVector(l_vec, r_vec, type) {
        let x;
        let y;
        if (r_vec._v[0] !== 0 && r_vec._v[1] !== 0) {
            x = l_vec._v[0] / r_vec._v[0];
            y = l_vec._v[1] / r_vec._v[1];
        }
        else {
            console.error('0 division occurred!');
            x = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            y = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
        }
        return this._fromCopyArray2([x, y], type);
    }
    /**
     * divide by vector(static version)
     */
    static divideVectorTo(l_vec, r_vec, out) {
        if (r_vec._v[0] !== 0 && r_vec._v[1] !== 0) {
            out._v[0] = l_vec._v[0] / r_vec._v[0];
            out._v[1] = l_vec._v[1] / r_vec._v[1];
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            out._v[1] = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
        }
        return out;
    }
    /**
     * dot product(static version)
     */
    static dot(l_vec, r_vec) {
        return l_vec.dot(r_vec);
    }
    /**
     * change to string
     */
    toString() {
        return '(' + this._v[0] + ', ' + this._v[1] + ')';
    }
    toStringApproximately() {
        return (_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[0]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[1]) +
            '\n');
    }
    flattenAsArray() {
        return [this._v[0], this._v[1]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(vec, delta = Number.EPSILON) {
        if (Math.abs(vec._v[0] - this._v[0]) < delta &&
            Math.abs(vec._v[1] - this._v[1]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(vec) {
        if (this._v[0] === vec._v[0] && this._v[1] === vec._v[1]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(i) {
        return this._v[i];
    }
    length() {
        return Math.hypot(this._v[0], this._v[1]);
    }
    lengthSquared() {
        return this._v[0] ** 2 + this._v[1] ** 2;
    }
    lengthTo(vec) {
        const deltaX = this._v[0] - vec._v[0];
        const deltaY = this._v[1] - vec._v[1];
        return Math.hypot(deltaX, deltaY);
    }
    /**
     * dot product
     */
    dot(vec) {
        return this._v[0] * vec._v[0] + this._v[1] * vec._v[1];
    }
    clone() {
        return new this.constructor(new this._v.constructor([this._v[0], this._v[1]]));
    }
    static _fromCopyArray2(array, type) {
        return new this(new type(array), { type });
    }
    static _fromCopy2(x, y, type) {
        return new this(new type([x, y]), { type });
    }
    static _fromCopyArray(array, type) {
        return new this(new type(array.slice(0, 2)), { type });
    }
    static _fromVector2(vec2, type) {
        const vec = new this(new type(vec2._v), {
            type,
        });
        return vec;
    }
    static _fromCopyVector2(vec2, type) {
        const vec = new this(new type([vec2._v[0], vec2._v[1]]), {
            type,
        });
        return vec;
    }
    static _fromCopyVector3(vec3, type) {
        const vec = new this(new type([vec3._v[0], vec3._v[1], vec3._v[2]]), {
            type,
        });
        return vec;
    }
    static _fromCopyVector4(vec4, type) {
        const vec = new this(new type([vec4._v[0], vec4._v[1], vec4._v[2]]), {
            type,
        });
        return vec;
    }
}
class Vector2 extends Vector2_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    static fromCopyArray2(array) {
        return super._fromCopyArray2(array, Float32Array);
    }
    static fromCopy2(x, y) {
        return super._fromCopy2(x, y, Float32Array);
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float32Array);
    }
    static fromCopyVector2(vec2) {
        return super._fromCopyVector2(vec2, Float32Array);
    }
    static fromCopyVector4(vec4) {
        return super._fromCopyVector4(vec4, Float32Array);
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    get className() {
        return 'Vector2';
    }
    clone() {
        return super.clone();
    }
}
class Vector2d extends Vector2_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static fromCopyArray2(array) {
        return super._fromCopyArray2(array, Float64Array);
    }
    static fromCopy2(x, y) {
        return super._fromCopy2(x, y, Float64Array);
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float64Array);
    }
    static fromArrayBuffer(arrayBuffer) {
        return new Vector2d(new Float64Array(arrayBuffer));
    }
    static fromFloat64Array(float64Array) {
        return new Vector2d(float64Array);
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    clone() {
        return super.clone();
    }
}
const ConstVector2_1_1 = Vector2.fromCopy2(1, 1);
const ConstVector2_0_0 = Vector2.fromCopy2(0, 0);


/***/ }),

/***/ "./src/foundation/math/Vector3.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector3.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConstVector3_0_0_0": () => (/* binding */ ConstVector3_0_0_0),
/* harmony export */   "ConstVector3_1_1_1": () => (/* binding */ ConstVector3_1_1_1),
/* harmony export */   "Vector3": () => (/* binding */ Vector3),
/* harmony export */   "Vector3_": () => (/* binding */ Vector3_),
/* harmony export */   "Vector3d": () => (/* binding */ Vector3d)
/* harmony export */ });
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractVector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractVector */ "./src/foundation/math/AbstractVector.ts");



class Vector3_ extends _AbstractVector__WEBPACK_IMPORTED_MODULE_2__.AbstractVector {
    constructor(v, { type }) {
        super();
        this._v = v;
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return 1;
    }
    get glslStrAsFloat() {
        return `vec3(${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[0])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[1])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[2])})`;
    }
    get glslStrAsInt() {
        return `ivec3(${Math.floor(this._v[0])}, ${Math.floor(this._v[1])}, ${Math.floor(this._v[2])})`;
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec3;
    }
    /**
     * to square length(static version)
     */
    static lengthSquared(vec) {
        return vec.lengthSquared();
    }
    static lengthBtw(l_vec, r_vec) {
        return l_vec.lengthTo(r_vec);
    }
    static angleOfVectors(l_vec, r_vec) {
        const multipliedLength = l_vec.length() * r_vec.length();
        if (multipliedLength === 0) {
            console.error('length of a vector is 0!');
        }
        const cos_sita = l_vec.dot(r_vec) / multipliedLength;
        const sita = Math.acos(cos_sita);
        return sita;
    }
    static _zero(type) {
        return this._fromCopyArray([0, 0, 0], type);
    }
    static _one(type) {
        return this._fromCopyArray([1, 1, 1], type);
    }
    static _dummy(type) {
        return new this(new type([]), { type });
    }
    /**
     * normalize(static version)
     */
    static _normalize(vec, type) {
        const length = vec.length();
        return this._divide(vec, length, type);
    }
    /**
     * add valuestatic version
     */
    static _add(l_vec, r_vec, type) {
        const x = l_vec._v[0] + r_vec._v[0];
        const y = l_vec._v[1] + r_vec._v[1];
        const z = l_vec._v[2] + r_vec._v[2];
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * add valuestatic version
     */
    static addTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] + r_vec._v[0];
        out._v[1] = l_vec._v[1] + r_vec._v[1];
        out._v[2] = l_vec._v[2] + r_vec._v[2];
        return out;
    }
    /**
     * subtract(subtract)
     */
    static _subtract(l_vec, r_vec, type) {
        const x = l_vec._v[0] - r_vec._v[0];
        const y = l_vec._v[1] - r_vec._v[1];
        const z = l_vec._v[2] - r_vec._v[2];
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * subtract(subtract)
     */
    static subtractTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] - r_vec._v[0];
        out._v[1] = l_vec._v[1] - r_vec._v[1];
        out._v[2] = l_vec._v[2] - r_vec._v[2];
        return out;
    }
    /**
     * multiply(static version)
     */
    static _multiply(vec, value, type) {
        const x = vec._v[0] * value;
        const y = vec._v[1] * value;
        const z = vec._v[2] * value;
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * multiplyTo(static version)
     */
    static multiplyTo(vec, value, out) {
        out._v[0] = vec._v[0] * value;
        out._v[1] = vec._v[1] * value;
        out._v[2] = vec._v[2] * value;
        return out;
    }
    /**
     * multiply vector(static version)
     */
    static _multiplyVector(l_vec, r_vec, type) {
        const x = l_vec._v[0] * r_vec._v[0];
        const y = l_vec._v[1] * r_vec._v[1];
        const z = l_vec._v[2] * r_vec._v[2];
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * multiply vector(static version)
     */
    static multiplyVectorTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] * r_vec._v[0];
        out._v[1] = l_vec._v[1] * r_vec._v[1];
        out._v[2] = l_vec._v[2] * r_vec._v[2];
        return out;
    }
    /**
     * divide(static version)
     */
    static _divide(vec, value, type) {
        let x;
        let y;
        let z;
        if (value !== 0) {
            x = vec._v[0] / value;
            y = vec._v[1] / value;
            z = vec._v[2] / value;
        }
        else {
            console.error('0 division occurred!');
            x = Infinity;
            y = Infinity;
            z = Infinity;
        }
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * divide by value(static version)
     */
    static divideTo(vec, value, out) {
        if (value !== 0) {
            out._v[0] = vec._v[0] / value;
            out._v[1] = vec._v[1] / value;
            out._v[2] = vec._v[2] / value;
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = Infinity;
            out._v[1] = Infinity;
            out._v[2] = Infinity;
        }
        return out;
    }
    /**
     * divide vector(static version)
     */
    static _divideVector(l_vec, r_vec, type) {
        let x;
        let y;
        let z;
        if (r_vec._v[0] !== 0 && r_vec._v[1] !== 0 && r_vec._v[2] !== 0) {
            x = l_vec._v[0] / r_vec._v[0];
            y = l_vec._v[1] / r_vec._v[1];
            z = l_vec._v[2] / r_vec._v[2];
        }
        else {
            console.error('0 division occurred!');
            x = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            y = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
            z = r_vec._v[2] === 0 ? Infinity : l_vec._v[2] / r_vec._v[2];
        }
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * divide by vector(static version)
     */
    static divideVectorTo(l_vec, r_vec, out) {
        if (r_vec._v[0] !== 0 && r_vec._v[1] !== 0 && r_vec._v[2] !== 0) {
            out._v[0] = l_vec._v[0] / r_vec._v[0];
            out._v[1] = l_vec._v[1] / r_vec._v[1];
            out._v[2] = l_vec._v[2] / r_vec._v[2];
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            out._v[1] = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
            out._v[2] = r_vec._v[2] === 0 ? Infinity : l_vec._v[2] / r_vec._v[2];
        }
        return out;
    }
    /**
     * dot product(static version)
     */
    static dot(l_vec, r_vec) {
        return l_vec.dot(r_vec);
    }
    /**
     * cross product(static version)
     */
    static _cross(l_vec, r_vec, type) {
        const x = l_vec._v[1] * r_vec._v[2] - l_vec._v[2] * r_vec._v[1];
        const y = l_vec._v[2] * r_vec._v[0] - l_vec._v[0] * r_vec._v[2];
        const z = l_vec._v[0] * r_vec._v[1] - l_vec._v[1] * r_vec._v[0];
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * cross product(static version)
     */
    static crossTo(l_vec, r_vec, out) {
        const x = l_vec._v[1] * r_vec._v[2] - l_vec._v[2] * r_vec._v[1];
        const y = l_vec._v[2] * r_vec._v[0] - l_vec._v[0] * r_vec._v[2];
        const z = l_vec._v[0] * r_vec._v[1] - l_vec._v[1] * r_vec._v[0];
        return out.setComponents(x, y, z);
    }
    /**
     * quaternion * vector3
     */
    static _multiplyQuaternion(quat, vec, type) {
        const num = quat._v[0] * 2;
        const num2 = quat._v[1] * 2;
        const num3 = quat._v[2] * 2;
        const num4 = quat._v[0] * num;
        const num5 = quat._v[1] * num2;
        const num6 = quat._v[2] * num3;
        const num7 = quat._v[0] * num2;
        const num8 = quat._v[0] * num3;
        const num9 = quat._v[1] * num3;
        const num10 = quat._v[3] * num;
        const num11 = quat._v[3] * num2;
        const num12 = quat._v[3] * num3;
        const x = (1 - (num5 + num6)) * vec._v[0] +
            (num7 - num12) * vec._v[1] +
            (num8 + num11) * vec._v[2];
        const y = (num7 + num12) * vec._v[0] +
            (1 - (num4 + num6)) * vec._v[1] +
            (num9 - num10) * vec._v[2];
        const z = (num8 - num11) * vec._v[0] +
            (num9 + num10) * vec._v[1] +
            (1 - (num4 + num5)) * vec._v[2];
        return this._fromCopyArray([x, y, z], type);
    }
    /**
     * quaternion * vector3
     */
    static multiplyQuaternionTo(quat, vec, out) {
        const num = quat._v[0] * 2;
        const num2 = quat._v[1] * 2;
        const num3 = quat._v[2] * 2;
        const num4 = quat._v[0] * num;
        const num5 = quat._v[1] * num2;
        const num6 = quat._v[2] * num3;
        const num7 = quat._v[0] * num2;
        const num8 = quat._v[0] * num3;
        const num9 = quat._v[1] * num3;
        const num10 = quat._v[3] * num;
        const num11 = quat._v[3] * num2;
        const num12 = quat._v[3] * num3;
        const x = (1 - (num5 + num6)) * vec._v[0] +
            (num7 - num12) * vec._v[1] +
            (num8 + num11) * vec._v[2];
        const y = (num7 + num12) * vec._v[0] +
            (1 - (num4 + num6)) * vec._v[1] +
            (num9 - num10) * vec._v[2];
        const z = (num8 - num11) * vec._v[0] +
            (num9 + num10) * vec._v[1] +
            (1 - (num4 + num5)) * vec._v[2];
        return out.setComponents(x, y, z);
    }
    /**
     * change to string
     */
    toString() {
        return '(' + this._v[0] + ', ' + this._v[1] + ', ' + this._v[2] + ')';
    }
    toStringApproximately() {
        return (_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[0]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[1]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[2]) +
            '\n');
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(vec, delta = Number.EPSILON) {
        if (Math.abs(vec._v[0] - this._v[0]) < delta &&
            Math.abs(vec._v[1] - this._v[1]) < delta &&
            Math.abs(vec._v[2] - this._v[2]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(vec) {
        if (this._v[0] === vec._v[0] &&
            this._v[1] === vec._v[1] &&
            this._v[2] === vec._v[2]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(i) {
        return this._v[i];
    }
    length() {
        return Math.hypot(this._v[0], this._v[1], this._v[2]);
    }
    lengthSquared() {
        return this._v[0] ** 2 + this._v[1] ** 2 + this._v[2] ** 2;
    }
    lengthTo(vec) {
        const deltaX = this._v[0] - vec._v[0];
        const deltaY = this._v[1] - vec._v[1];
        const deltaZ = this._v[2] - vec._v[2];
        return Math.hypot(deltaX, deltaY, deltaZ);
    }
    /**
     * dot product
     */
    dot(vec) {
        return (this._v[0] * vec._v[0] + this._v[1] * vec._v[1] + this._v[2] * vec._v[2]);
    }
    get className() {
        return 'Vector3';
    }
    clone() {
        return new this.constructor(new this._v.constructor([this._v[0], this._v[1], this._v[2]], 0, 0));
    }
    static _lerp(lhs, rhs, ratio, type) {
        return new this(new type([
            lhs._v[0] * ratio + rhs._v[0] * (1 - ratio),
            lhs._v[1] * ratio + rhs._v[1] * (1 - ratio),
            lhs._v[2] * ratio + rhs._v[2] * (1 - ratio),
        ]), { type });
    }
    static _fromCopyArray3(array, type) {
        return new this(new type(array), { type });
    }
    static _fromCopy3(x, y, z, type) {
        return new this(new type([x, y, z]), { type });
    }
    static _fromCopyArray(array, type) {
        return new this(new type(array.slice(0, 3)), { type });
    }
    static _fromCopyVector3(vec3, type) {
        const vec = new this(new type([vec3._v[0], vec3._v[1], vec3._v[2]]), {
            type,
        });
        return vec;
    }
    static _fromCopyVector4(vec4, type) {
        const vec = new this(new type([vec4._v[0], vec4._v[1], vec4._v[2]]), {
            type,
        });
        return vec;
    }
    static _fromVector2(vec2, type) {
        const vec = new this(new type([vec2._v[0], vec2._v[1], 0]), {
            type,
        });
        return vec;
    }
}
class Vector3 extends Vector3_ {
    constructor(v) {
        super(v, { type: Float32Array });
    }
    static fromCopyArray3(array) {
        return super._fromCopyArray3(array, Float32Array);
    }
    static fromCopy3(x, y, z) {
        return super._fromCopy3(x, y, z, Float32Array);
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float32Array);
    }
    static fromCopyVector3(vec3) {
        return super._fromCopyVector3(vec3, Float32Array);
    }
    static fromCopyVector4(vec4) {
        return super._fromCopyVector4(vec4, Float32Array);
    }
    static fromArrayBuffer(arrayBuffer) {
        return new Vector3(new Float32Array(arrayBuffer));
    }
    static fromFloat32Array(float32Array) {
        return new Vector3(float32Array);
    }
    static fromCopyFloat32Array(float32Array) {
        return new Vector3(float32Array.slice(0));
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float32Array);
    }
    static multiplyQuaternion(quat, vec) {
        return super._multiplyQuaternion(quat, vec, Float32Array);
    }
    static lerp(lhs, rhs, ratio) {
        return super._lerp(lhs, rhs, ratio, Float32Array);
    }
}
class Vector3d extends Vector3_ {
    constructor(v) {
        super(v, { type: Float64Array });
    }
    static fromCopyArray3(array) {
        return super._fromCopyArray3(array, Float64Array);
    }
    static fromCopy3(x, y, z) {
        return super._fromCopy3(x, y, z, Float64Array);
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float64Array);
    }
    static fromArrayBuffer(arrayBuffer) {
        return new Vector3d(new Float64Array(arrayBuffer));
    }
    static fromFloat64Array(float64Array) {
        return new Vector3d(float64Array);
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    static cross(l_vec, r_vec) {
        return super._cross(l_vec, r_vec, Float64Array);
    }
    static multiplyQuaternion(quat, vec) {
        return super._multiplyQuaternion(quat, vec, Float64Array);
    }
    static lerp(lhs, rhs, ratio) {
        return super._lerp(lhs, rhs, ratio, Float64Array);
    }
}
const ConstVector3_1_1_1 = Vector3.fromCopy3(1, 1, 1);
const ConstVector3_0_0_0 = Vector3.fromCopy3(0, 0, 0);


/***/ }),

/***/ "./src/foundation/math/Vector4.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/Vector4.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConstVector4_0_0_0_0": () => (/* binding */ ConstVector4_0_0_0_0),
/* harmony export */   "ConstVector4_0_0_0_1": () => (/* binding */ ConstVector4_0_0_0_1),
/* harmony export */   "ConstVector4_1_1_1_1": () => (/* binding */ ConstVector4_1_1_1_1),
/* harmony export */   "Vector4": () => (/* binding */ Vector4),
/* harmony export */   "Vector4_": () => (/* binding */ Vector4_),
/* harmony export */   "Vector4d": () => (/* binding */ Vector4d)
/* harmony export */ });
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _AbstractVector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractVector */ "./src/foundation/math/AbstractVector.ts");



class Vector4_ extends _AbstractVector__WEBPACK_IMPORTED_MODULE_2__.AbstractVector {
    constructor(v, { type }) {
        super();
        this._v = v;
    }
    get x() {
        return this._v[0];
    }
    get y() {
        return this._v[1];
    }
    get z() {
        return this._v[2];
    }
    get w() {
        return this._v[3];
    }
    get glslStrAsFloat() {
        return `vec4(${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[0])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[1])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[2])}, ${_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.convertToStringAsGLSLFloat(this._v[3])})`;
    }
    get glslStrAsInt() {
        return `ivec4(${Math.floor(this._v[0])}, ${Math.floor(this._v[1])}, ${Math.floor(this._v[2])}, ${Math.floor(this._v[3])})`;
    }
    static _fromCopyArray4(array, type) {
        return new this(new type(array), { type });
    }
    static _fromCopy4(x, y, z, w, type) {
        return new this(new type([x, y, z, w]), { type });
    }
    static _fromCopyArray(array, type) {
        return new this(new type(array.slice(0, 4)), { type });
    }
    static _fromCopyVector4(vec4, type) {
        const vec = new this(new type([vec4._v[0], vec4._v[1], vec4._v[2], vec4._v[3]]), { type });
        return vec;
    }
    static _fromCopyVector3(vec3, type) {
        const vec = new this(new type([vec3._v[0], vec3._v[1], vec3._v[2], 1]), {
            type,
        });
        return vec;
    }
    static _fromVector2(vec2, type) {
        const vec = new this(new type([vec2._v[0], vec2._v[1], 0, 1]), {
            type,
        });
        return vec;
    }
    static get compositionType() {
        return _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Vec4;
    }
    /**
     * to square length(static version)
     */
    static lengthSquared(vec) {
        return vec.lengthSquared();
    }
    static lengthBtw(l_vec, r_vec) {
        return l_vec.lengthTo(r_vec);
    }
    /**
     * Zero Vector
     */
    static _zero(type) {
        return new this(new type([0, 0, 0, 0]), { type });
    }
    static _one(type) {
        return new this(new type([1, 1, 1, 1]), { type });
    }
    static _dummy(type) {
        return new this(new type([]), { type });
    }
    /**
     * normalize(static version)
     */
    static _normalize(vec, type) {
        const length = vec.length();
        return this._divide(vec, length, type);
    }
    /**
     * add valuestatic version
     */
    static _add(l_vec, r_vec, type) {
        const x = l_vec._v[0] + r_vec._v[0];
        const y = l_vec._v[1] + r_vec._v[1];
        const z = l_vec._v[2] + r_vec._v[2];
        const w = l_vec._v[3] + r_vec._v[3];
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * add valuestatic version
     */
    static addTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] + r_vec._v[0];
        out._v[1] = l_vec._v[1] + r_vec._v[1];
        out._v[2] = l_vec._v[2] + r_vec._v[2];
        out._v[3] = l_vec._v[3] + r_vec._v[3];
        return out;
    }
    /**
     * subtract(static version)
     */
    static _subtract(l_vec, r_vec, type) {
        const x = l_vec._v[0] - r_vec._v[0];
        const y = l_vec._v[1] - r_vec._v[1];
        const z = l_vec._v[2] - r_vec._v[2];
        const w = l_vec._v[3] - r_vec._v[3];
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * subtract(static version)
     */
    static subtractTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] - r_vec._v[0];
        out._v[1] = l_vec._v[1] - r_vec._v[1];
        out._v[2] = l_vec._v[2] - r_vec._v[2];
        out._v[3] = l_vec._v[3] - r_vec._v[3];
        return out;
    }
    /**
     * multiply(static version)
     */
    static _multiply(vec, value, type) {
        const x = vec._v[0] * value;
        const y = vec._v[1] * value;
        const z = vec._v[2] * value;
        const w = vec._v[3] * value;
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * multiplyTo(static version)
     */
    static multiplyTo(vec, value, out) {
        out._v[0] = vec._v[0] * value;
        out._v[1] = vec._v[1] * value;
        out._v[2] = vec._v[2] * value;
        out._v[3] = vec._v[3] * value;
        return out;
    }
    /**
     * multiply vector(static version)
     */
    static _multiplyVector(l_vec, r_vec, type) {
        const x = l_vec._v[0] * r_vec._v[0];
        const y = l_vec._v[1] * r_vec._v[1];
        const z = l_vec._v[2] * r_vec._v[2];
        const w = l_vec._v[3] * r_vec._v[3];
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * multiply vector(static version)
     */
    static multiplyVectorTo(l_vec, r_vec, out) {
        out._v[0] = l_vec._v[0] * r_vec._v[0];
        out._v[1] = l_vec._v[1] * r_vec._v[1];
        out._v[2] = l_vec._v[2] * r_vec._v[2];
        out._v[3] = l_vec._v[3] * r_vec._v[3];
        return out;
    }
    /**
     * divide(static version)
     */
    static _divide(vec, value, type) {
        let x;
        let y;
        let z;
        let w;
        if (value !== 0) {
            x = vec._v[0] / value;
            y = vec._v[1] / value;
            z = vec._v[2] / value;
            w = vec._v[3] / value;
        }
        else {
            console.error('0 division occurred!');
            x = Infinity;
            y = Infinity;
            z = Infinity;
            w = Infinity;
        }
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * divide by value(static version)
     */
    static divideTo(vec, value, out) {
        if (value !== 0) {
            out._v[0] = vec._v[0] / value;
            out._v[1] = vec._v[1] / value;
            out._v[2] = vec._v[2] / value;
            out._v[3] = vec._v[3] / value;
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = Infinity;
            out._v[1] = Infinity;
            out._v[2] = Infinity;
            out._v[3] = Infinity;
        }
        return out;
    }
    /**
     * divide vector(static version)
     */
    static _divideVector(l_vec, r_vec, type) {
        let x;
        let y;
        let z;
        let w;
        if (r_vec._v[0] !== 0 &&
            r_vec._v[1] !== 0 &&
            r_vec._v[2] !== 0 &&
            r_vec._v[3] !== 0) {
            x = l_vec._v[0] / r_vec._v[0];
            y = l_vec._v[1] / r_vec._v[1];
            z = l_vec._v[2] / r_vec._v[2];
            w = l_vec._v[3] / r_vec._v[3];
        }
        else {
            console.error('0 division occurred!');
            x = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            y = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
            z = r_vec._v[2] === 0 ? Infinity : l_vec._v[2] / r_vec._v[2];
            w = r_vec._v[3] === 0 ? Infinity : l_vec._v[3] / r_vec._v[3];
        }
        return new this(new type([x, y, z, w]), { type });
    }
    /**
     * divide by vector(static version)
     */
    static divideVectorTo(l_vec, r_vec, out) {
        if (r_vec._v[0] !== 0 &&
            r_vec._v[1] !== 0 &&
            r_vec._v[2] !== 0 &&
            r_vec._v[3] !== 0) {
            out._v[0] = l_vec._v[0] / r_vec._v[0];
            out._v[1] = l_vec._v[1] / r_vec._v[1];
            out._v[2] = l_vec._v[2] / r_vec._v[2];
            out._v[3] = l_vec._v[3] / r_vec._v[3];
        }
        else {
            console.error('0 division occurred!');
            out._v[0] = r_vec._v[0] === 0 ? Infinity : l_vec._v[0] / r_vec._v[0];
            out._v[1] = r_vec._v[1] === 0 ? Infinity : l_vec._v[1] / r_vec._v[1];
            out._v[2] = r_vec._v[2] === 0 ? Infinity : l_vec._v[2] / r_vec._v[2];
            out._v[3] = r_vec._v[3] === 0 ? Infinity : l_vec._v[3] / r_vec._v[3];
        }
        return out;
    }
    /**
     * dot product(static version)
     */
    static dot(l_vec, r_vec) {
        return l_vec.dot(r_vec);
    }
    toString() {
        return ('(' +
            this._v[0] +
            ', ' +
            this._v[1] +
            ', ' +
            this._v[2] +
            ', ' +
            this._v[3] +
            ')');
    }
    toStringApproximately() {
        return (_MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[0]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[1]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[2]) +
            ' ' +
            _MathUtil__WEBPACK_IMPORTED_MODULE_0__.MathUtil.financial(this._v[3]) +
            '\n');
    }
    flattenAsArray() {
        return [this._v[0], this._v[1], this._v[2], this._v[3]];
    }
    isDummy() {
        if (this._v.length === 0) {
            return true;
        }
        else {
            return false;
        }
    }
    isEqual(vec, delta = Number.EPSILON) {
        if (Math.abs(vec._v[0] - this._v[0]) < delta &&
            Math.abs(vec._v[1] - this._v[1]) < delta &&
            Math.abs(vec._v[2] - this._v[2]) < delta &&
            Math.abs(vec._v[3] - this._v[3]) < delta) {
            return true;
        }
        else {
            return false;
        }
    }
    isStrictEqual(vec) {
        if (this._v[0] === vec._v[0] &&
            this._v[1] === vec._v[1] &&
            this._v[2] === vec._v[2] &&
            this._v[3] === vec._v[3]) {
            return true;
        }
        else {
            return false;
        }
    }
    at(i) {
        return this._v[i];
    }
    length() {
        return Math.hypot(this._v[0], this._v[1], this._v[2], this._v[3]);
    }
    lengthSquared() {
        return (this._v[0] ** 2 + this._v[1] ** 2 + this._v[2] ** 2 + this._v[3] ** 2);
    }
    lengthTo(vec) {
        const deltaX = this._v[0] - vec._v[0];
        const deltaY = this._v[1] - vec._v[1];
        const deltaZ = this._v[2] - vec._v[2];
        const deltaW = this._v[3] - vec._v[3];
        return Math.hypot(deltaX, deltaY, deltaZ, deltaW);
    }
    /**
     * dot product
     */
    dot(vec) {
        return (this._v[0] * vec._v[0] +
            this._v[1] * vec._v[1] +
            this._v[2] * vec._v[2] +
            this._v[3] * vec._v[3]);
    }
    get className() {
        return 'Vector4';
    }
    clone() {
        return new this.constructor(new this._v.constructor([
            this._v[0],
            this._v[1],
            this._v[2],
            this._v[3],
        ]));
    }
}
class Vector4 extends Vector4_ {
    constructor(x) {
        super(x, { type: Float32Array });
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float32Array);
    }
    static fromCopyArray4(array) {
        return super._fromCopyArray4(array, Float32Array);
    }
    static fromCopy4(x, y, z, w) {
        return super._fromCopy4(x, y, z, w, Float32Array);
    }
    static fromCopyVector3(vec3) {
        return super._fromCopyVector3(vec3, Float32Array);
    }
    static fromCopyVector4(vec4) {
        return super._fromCopyVector4(vec4, Float32Array);
    }
    static fromArrayBuffer(arrayBuffer) {
        return new Vector4(new Float32Array(arrayBuffer));
    }
    static fromFloat32Array(float32Array) {
        return new Vector4(float32Array);
    }
    static fromCopyFloat32Array(float32Array) {
        return new Vector4(float32Array.slice(0));
    }
    static zero() {
        return super._zero(Float32Array);
    }
    static one() {
        return super._one(Float32Array);
    }
    static dummy() {
        return super._dummy(Float32Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float32Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float32Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float32Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float32Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float32Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float32Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float32Array);
    }
    clone() {
        return super.clone();
    }
}
class Vector4d extends Vector4_ {
    constructor(x) {
        super(x, { type: Float64Array });
    }
    static fromCopyArray4(array) {
        return super._fromCopyArray4(array, Float64Array);
    }
    static fromCopy4(x, y, z, w) {
        return super._fromCopy4(x, y, z, w, Float64Array);
    }
    static fromCopyArray(array) {
        return super._fromCopyArray(array, Float64Array);
    }
    static fromArrayBuffer(arrayBuffer) {
        return new Vector4d(new Float64Array(arrayBuffer));
    }
    static fromFloat64Array(float64Array) {
        return new Vector4d(float64Array);
    }
    static zero() {
        return super._zero(Float64Array);
    }
    static one() {
        return super._one(Float64Array);
    }
    static dummy() {
        return super._dummy(Float64Array);
    }
    static normalize(vec) {
        return super._normalize(vec, Float64Array);
    }
    static add(l_vec, r_vec) {
        return super._add(l_vec, r_vec, Float64Array);
    }
    static subtract(l_vec, r_vec) {
        return super._subtract(l_vec, r_vec, Float64Array);
    }
    static multiply(vec, value) {
        return super._multiply(vec, value, Float64Array);
    }
    static multiplyVector(l_vec, r_vec) {
        return super._multiplyVector(l_vec, r_vec, Float64Array);
    }
    static divide(vec, value) {
        return super._divide(vec, value, Float64Array);
    }
    static divideVector(l_vec, r_vec) {
        return super._divideVector(l_vec, r_vec, Float64Array);
    }
    clone() {
        return super.clone();
    }
}
const ConstVector4_1_1_1_1 = Vector4.fromCopy4(1, 1, 1, 1);
const ConstVector4_0_0_0_1 = Vector4.fromCopy4(0, 0, 0, 1);
const ConstVector4_0_0_0_0 = Vector4.fromCopy4(0, 0, 0, 0);


/***/ }),

/***/ "./src/foundation/math/VectorN.ts":
/*!****************************************!*\
  !*** ./src/foundation/math/VectorN.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VectorN": () => (/* binding */ VectorN)
/* harmony export */ });
class VectorN {
    constructor(typedArray) {
        this._v = typedArray;
    }
}


/***/ }),

/***/ "./src/foundation/math/index.ts":
/*!**************************************!*\
  !*** ./src/foundation/math/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABB": () => (/* reexport safe */ _AABB__WEBPACK_IMPORTED_MODULE_1__.AABB),
/* harmony export */   "AbstractArrayBufferBaseMathNumber": () => (/* reexport safe */ _AbstractMathNumber__WEBPACK_IMPORTED_MODULE_2__.AbstractArrayBufferBaseMathNumber),
/* harmony export */   "AbstractMatrix": () => (/* reexport safe */ _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__.AbstractMatrix),
/* harmony export */   "AbstractQuaternion": () => (/* reexport safe */ _AbstractQuaternion__WEBPACK_IMPORTED_MODULE_4__.AbstractQuaternion),
/* harmony export */   "AbstractVector": () => (/* reexport safe */ _AbstractVector__WEBPACK_IMPORTED_MODULE_5__.AbstractVector),
/* harmony export */   "ColorRgb": () => (/* reexport safe */ _ColorRgb__WEBPACK_IMPORTED_MODULE_6__.ColorRgb),
/* harmony export */   "ColorRgba": () => (/* reexport safe */ _ColorRgba__WEBPACK_IMPORTED_MODULE_7__.ColorRgba),
/* harmony export */   "ConstRgbaBlack": () => (/* reexport safe */ _ColorRgba__WEBPACK_IMPORTED_MODULE_7__.ConstRgbaBlack),
/* harmony export */   "ConstRgbaWhite": () => (/* reexport safe */ _ColorRgba__WEBPACK_IMPORTED_MODULE_7__.ConstRgbaWhite),
/* harmony export */   "ConstVector2_0_0": () => (/* reexport safe */ _Vector2__WEBPACK_IMPORTED_MODULE_33__.ConstVector2_0_0),
/* harmony export */   "ConstVector2_1_1": () => (/* reexport safe */ _Vector2__WEBPACK_IMPORTED_MODULE_33__.ConstVector2_1_1),
/* harmony export */   "ConstVector3_0_0_0": () => (/* reexport safe */ _Vector3__WEBPACK_IMPORTED_MODULE_34__.ConstVector3_0_0_0),
/* harmony export */   "ConstVector3_1_1_1": () => (/* reexport safe */ _Vector3__WEBPACK_IMPORTED_MODULE_34__.ConstVector3_1_1_1),
/* harmony export */   "ConstVector4_0_0_0_0": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.ConstVector4_0_0_0_0),
/* harmony export */   "ConstVector4_0_0_0_1": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.ConstVector4_0_0_0_1),
/* harmony export */   "ConstVector4_1_1_1_1": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.ConstVector4_1_1_1_1),
/* harmony export */   "IdentityMatrix33": () => (/* reexport safe */ _IdentityMatrix33__WEBPACK_IMPORTED_MODULE_9__.IdentityMatrix33),
/* harmony export */   "IdentityMatrix44": () => (/* reexport safe */ _IdentityMatrix44__WEBPACK_IMPORTED_MODULE_10__.IdentityMatrix44),
/* harmony export */   "LogQuaternion": () => (/* reexport safe */ _LogQuaternion__WEBPACK_IMPORTED_MODULE_15__.LogQuaternion),
/* harmony export */   "MathClassUtil": () => (/* reexport safe */ _MathClassUtil__WEBPACK_IMPORTED_MODULE_16__.MathClassUtil),
/* harmony export */   "MathUtil": () => (/* reexport safe */ _MathUtil__WEBPACK_IMPORTED_MODULE_17__.MathUtil),
/* harmony export */   "Matrix22": () => (/* reexport safe */ _Matrix22__WEBPACK_IMPORTED_MODULE_18__.Matrix22),
/* harmony export */   "Matrix33": () => (/* reexport safe */ _Matrix33__WEBPACK_IMPORTED_MODULE_19__.Matrix33),
/* harmony export */   "Matrix44": () => (/* reexport safe */ _Matrix44__WEBPACK_IMPORTED_MODULE_20__.Matrix44),
/* harmony export */   "MutableColorRgb": () => (/* reexport safe */ _MutableColorRgb__WEBPACK_IMPORTED_MODULE_21__.MutableColorRgb),
/* harmony export */   "MutableColorRgba": () => (/* reexport safe */ _MutableColorRgba__WEBPACK_IMPORTED_MODULE_22__.MutableColorRgba),
/* harmony export */   "MutableMatrix22": () => (/* reexport safe */ _MutableMatrix22__WEBPACK_IMPORTED_MODULE_23__.MutableMatrix22),
/* harmony export */   "MutableMatrix33": () => (/* reexport safe */ _MutableMatrix33__WEBPACK_IMPORTED_MODULE_24__.MutableMatrix33),
/* harmony export */   "MutableMatrix44": () => (/* reexport safe */ _MutableMatrix44__WEBPACK_IMPORTED_MODULE_25__.MutableMatrix44),
/* harmony export */   "MutableQuaternion": () => (/* reexport safe */ _MutableQuaternion__WEBPACK_IMPORTED_MODULE_26__.MutableQuaternion),
/* harmony export */   "MutableScalar": () => (/* reexport safe */ _MutableScalar__WEBPACK_IMPORTED_MODULE_27__.MutableScalar),
/* harmony export */   "MutableScalar_": () => (/* reexport safe */ _MutableScalar__WEBPACK_IMPORTED_MODULE_27__.MutableScalar_),
/* harmony export */   "MutableScalard": () => (/* reexport safe */ _MutableScalar__WEBPACK_IMPORTED_MODULE_27__.MutableScalard),
/* harmony export */   "MutableVector2": () => (/* reexport safe */ _MutableVector2__WEBPACK_IMPORTED_MODULE_28__.MutableVector2),
/* harmony export */   "MutableVector2_": () => (/* reexport safe */ _MutableVector2__WEBPACK_IMPORTED_MODULE_28__.MutableVector2_),
/* harmony export */   "MutableVector2d": () => (/* reexport safe */ _MutableVector2__WEBPACK_IMPORTED_MODULE_28__.MutableVector2d),
/* harmony export */   "MutableVector3": () => (/* reexport safe */ _MutableVector3__WEBPACK_IMPORTED_MODULE_29__.MutableVector3),
/* harmony export */   "MutableVector3_": () => (/* reexport safe */ _MutableVector3__WEBPACK_IMPORTED_MODULE_29__.MutableVector3_),
/* harmony export */   "MutableVector3d": () => (/* reexport safe */ _MutableVector3__WEBPACK_IMPORTED_MODULE_29__.MutableVector3d),
/* harmony export */   "MutableVector4": () => (/* reexport safe */ _MutableVector4__WEBPACK_IMPORTED_MODULE_30__.MutableVector4),
/* harmony export */   "MutableVector4_": () => (/* reexport safe */ _MutableVector4__WEBPACK_IMPORTED_MODULE_30__.MutableVector4_),
/* harmony export */   "MutableVector4d": () => (/* reexport safe */ _MutableVector4__WEBPACK_IMPORTED_MODULE_30__.MutableVector4d),
/* harmony export */   "Quaternion": () => (/* reexport safe */ _Quaternion__WEBPACK_IMPORTED_MODULE_31__.Quaternion),
/* harmony export */   "Scalar": () => (/* reexport safe */ _Scalar__WEBPACK_IMPORTED_MODULE_32__.Scalar),
/* harmony export */   "Scalar_": () => (/* reexport safe */ _Scalar__WEBPACK_IMPORTED_MODULE_32__.Scalar_),
/* harmony export */   "Scalard": () => (/* reexport safe */ _Scalar__WEBPACK_IMPORTED_MODULE_32__.Scalard),
/* harmony export */   "Vector2": () => (/* reexport safe */ _Vector2__WEBPACK_IMPORTED_MODULE_33__.Vector2),
/* harmony export */   "Vector2_": () => (/* reexport safe */ _Vector2__WEBPACK_IMPORTED_MODULE_33__.Vector2_),
/* harmony export */   "Vector2d": () => (/* reexport safe */ _Vector2__WEBPACK_IMPORTED_MODULE_33__.Vector2d),
/* harmony export */   "Vector3": () => (/* reexport safe */ _Vector3__WEBPACK_IMPORTED_MODULE_34__.Vector3),
/* harmony export */   "Vector3_": () => (/* reexport safe */ _Vector3__WEBPACK_IMPORTED_MODULE_34__.Vector3_),
/* harmony export */   "Vector3d": () => (/* reexport safe */ _Vector3__WEBPACK_IMPORTED_MODULE_34__.Vector3d),
/* harmony export */   "Vector4": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.Vector4),
/* harmony export */   "Vector4_": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.Vector4_),
/* harmony export */   "Vector4d": () => (/* reexport safe */ _Vector4__WEBPACK_IMPORTED_MODULE_35__.Vector4d),
/* harmony export */   "VectorN": () => (/* reexport safe */ _VectorN__WEBPACK_IMPORTED_MODULE_36__.VectorN),
/* harmony export */   "add2": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add2),
/* harmony export */   "add2_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add2_offset),
/* harmony export */   "add3": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add3),
/* harmony export */   "add3_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add3_offset),
/* harmony export */   "add4": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add4),
/* harmony export */   "add4_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.add4_offset),
/* harmony export */   "array3_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.array3_lerp_offsetAsComposition),
/* harmony export */   "arrayN_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.arrayN_lerp_offsetAsComposition),
/* harmony export */   "get1": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get1),
/* harmony export */   "get1_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get1_offset),
/* harmony export */   "get1_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get1_offsetAsComposition),
/* harmony export */   "get2": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get2),
/* harmony export */   "get2_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get2_offset),
/* harmony export */   "get2_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get2_offsetAsComposition),
/* harmony export */   "get3": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get3),
/* harmony export */   "get3_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get3_offset),
/* harmony export */   "get3_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get3_offsetAsComposition),
/* harmony export */   "get4": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get4),
/* harmony export */   "get4_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get4_offset),
/* harmony export */   "get4_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.get4_offsetAsComposition),
/* harmony export */   "getN_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.getN_offset),
/* harmony export */   "getN_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.getN_offsetAsComposition),
/* harmony export */   "mulArray3WithScalar_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.mulArray3WithScalar_offset),
/* harmony export */   "mulArray4WithScalar_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.mulArray4WithScalar_offset),
/* harmony export */   "mulArrayNWithScalar_offset": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.mulArrayNWithScalar_offset),
/* harmony export */   "mulThatAndThisToOutAsMat44_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.mulThatAndThisToOutAsMat44_offsetAsComposition),
/* harmony export */   "normalizeArray4": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.normalizeArray4),
/* harmony export */   "qlerp_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.qlerp_offsetAsComposition),
/* harmony export */   "scalar_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_index__WEBPACK_IMPORTED_MODULE_0__.scalar_lerp_offsetAsComposition)
/* harmony export */ });
/* harmony import */ var _raw_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./raw/index */ "./src/foundation/math/raw/index.ts");
/* harmony import */ var _AABB__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AABB */ "./src/foundation/math/AABB.ts");
/* harmony import */ var _AbstractMathNumber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractMathNumber */ "./src/foundation/math/AbstractMathNumber.ts");
/* harmony import */ var _AbstractMatrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractMatrix */ "./src/foundation/math/AbstractMatrix.ts");
/* harmony import */ var _AbstractQuaternion__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AbstractQuaternion */ "./src/foundation/math/AbstractQuaternion.ts");
/* harmony import */ var _AbstractVector__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AbstractVector */ "./src/foundation/math/AbstractVector.ts");
/* harmony import */ var _ColorRgb__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ColorRgb */ "./src/foundation/math/ColorRgb.ts");
/* harmony import */ var _ColorRgba__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ColorRgba */ "./src/foundation/math/ColorRgba.ts");
/* harmony import */ __webpack_require__(/*! ./IColor */ "./src/foundation/math/IColor.ts");
/* harmony import */ var _IdentityMatrix33__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./IdentityMatrix33 */ "./src/foundation/math/IdentityMatrix33.ts");
/* harmony import */ var _IdentityMatrix44__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./IdentityMatrix44 */ "./src/foundation/math/IdentityMatrix44.ts");
/* harmony import */ __webpack_require__(/*! ./IMathNumber */ "./src/foundation/math/IMathNumber.ts");
/* harmony import */ __webpack_require__(/*! ./IMatrix */ "./src/foundation/math/IMatrix.ts");
/* harmony import */ __webpack_require__(/*! ./IQuaternion */ "./src/foundation/math/IQuaternion.ts");
/* harmony import */ __webpack_require__(/*! ./IVector */ "./src/foundation/math/IVector.ts");
/* harmony import */ var _LogQuaternion__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./LogQuaternion */ "./src/foundation/math/LogQuaternion.ts");
/* harmony import */ var _MathClassUtil__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./MathClassUtil */ "./src/foundation/math/MathClassUtil.ts");
/* harmony import */ var _MathUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _Matrix22__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Matrix22 */ "./src/foundation/math/Matrix22.ts");
/* harmony import */ var _Matrix33__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Matrix33 */ "./src/foundation/math/Matrix33.ts");
/* harmony import */ var _Matrix44__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _MutableColorRgb__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./MutableColorRgb */ "./src/foundation/math/MutableColorRgb.ts");
/* harmony import */ var _MutableColorRgba__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./MutableColorRgba */ "./src/foundation/math/MutableColorRgba.ts");
/* harmony import */ var _MutableMatrix22__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./MutableMatrix22 */ "./src/foundation/math/MutableMatrix22.ts");
/* harmony import */ var _MutableMatrix33__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _MutableMatrix44__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _MutableQuaternion__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");
/* harmony import */ var _MutableScalar__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./MutableScalar */ "./src/foundation/math/MutableScalar.ts");
/* harmony import */ var _MutableVector2__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _MutableVector3__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _MutableVector4__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _Quaternion__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _Scalar__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _Vector2__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _Vector3__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _Vector4__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _VectorN__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./VectorN */ "./src/foundation/math/VectorN.ts");







































/***/ }),

/***/ "./src/foundation/math/raw/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/math/raw/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "add2": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add2),
/* harmony export */   "add2_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add2_offset),
/* harmony export */   "add3": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add3),
/* harmony export */   "add3_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add3_offset),
/* harmony export */   "add4": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add4),
/* harmony export */   "add4_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.add4_offset),
/* harmony export */   "array3_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.array3_lerp_offsetAsComposition),
/* harmony export */   "arrayN_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.arrayN_lerp_offsetAsComposition),
/* harmony export */   "get1": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get1),
/* harmony export */   "get1_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get1_offset),
/* harmony export */   "get1_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get1_offsetAsComposition),
/* harmony export */   "get2": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get2),
/* harmony export */   "get2_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get2_offset),
/* harmony export */   "get2_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get2_offsetAsComposition),
/* harmony export */   "get3": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get3),
/* harmony export */   "get3_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get3_offset),
/* harmony export */   "get3_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get3_offsetAsComposition),
/* harmony export */   "get4": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get4),
/* harmony export */   "get4_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get4_offset),
/* harmony export */   "get4_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.get4_offsetAsComposition),
/* harmony export */   "getN_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.getN_offset),
/* harmony export */   "getN_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.getN_offsetAsComposition),
/* harmony export */   "mulArray3WithScalar_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.mulArray3WithScalar_offset),
/* harmony export */   "mulArray4WithScalar_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.mulArray4WithScalar_offset),
/* harmony export */   "mulArrayNWithScalar_offset": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.mulArrayNWithScalar_offset),
/* harmony export */   "mulThatAndThisToOutAsMat44_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.mulThatAndThisToOutAsMat44_offsetAsComposition),
/* harmony export */   "normalizeArray4": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.normalizeArray4),
/* harmony export */   "qlerp_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.qlerp_offsetAsComposition),
/* harmony export */   "scalar_lerp_offsetAsComposition": () => (/* reexport safe */ _raw_extension__WEBPACK_IMPORTED_MODULE_0__.scalar_lerp_offsetAsComposition)
/* harmony export */ });
/* harmony import */ var _raw_extension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./raw_extension */ "./src/foundation/math/raw/raw_extension.ts");



/***/ }),

/***/ "./src/foundation/math/raw/raw_extension.ts":
/*!**************************************************!*\
  !*** ./src/foundation/math/raw/raw_extension.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "add2": () => (/* binding */ add2),
/* harmony export */   "add2_offset": () => (/* binding */ add2_offset),
/* harmony export */   "add3": () => (/* binding */ add3),
/* harmony export */   "add3_offset": () => (/* binding */ add3_offset),
/* harmony export */   "add4": () => (/* binding */ add4),
/* harmony export */   "add4_offset": () => (/* binding */ add4_offset),
/* harmony export */   "array3_lerp_offsetAsComposition": () => (/* binding */ array3_lerp_offsetAsComposition),
/* harmony export */   "arrayN_lerp_offsetAsComposition": () => (/* binding */ arrayN_lerp_offsetAsComposition),
/* harmony export */   "get1": () => (/* binding */ get1),
/* harmony export */   "get1_offset": () => (/* binding */ get1_offset),
/* harmony export */   "get1_offsetAsComposition": () => (/* binding */ get1_offsetAsComposition),
/* harmony export */   "get2": () => (/* binding */ get2),
/* harmony export */   "get2_offset": () => (/* binding */ get2_offset),
/* harmony export */   "get2_offsetAsComposition": () => (/* binding */ get2_offsetAsComposition),
/* harmony export */   "get3": () => (/* binding */ get3),
/* harmony export */   "get3_offset": () => (/* binding */ get3_offset),
/* harmony export */   "get3_offsetAsComposition": () => (/* binding */ get3_offsetAsComposition),
/* harmony export */   "get4": () => (/* binding */ get4),
/* harmony export */   "get4_offset": () => (/* binding */ get4_offset),
/* harmony export */   "get4_offsetAsComposition": () => (/* binding */ get4_offsetAsComposition),
/* harmony export */   "getN_offset": () => (/* binding */ getN_offset),
/* harmony export */   "getN_offsetAsComposition": () => (/* binding */ getN_offsetAsComposition),
/* harmony export */   "mulArray3WithScalar_offset": () => (/* binding */ mulArray3WithScalar_offset),
/* harmony export */   "mulArray4WithScalar_offset": () => (/* binding */ mulArray4WithScalar_offset),
/* harmony export */   "mulArrayNWithScalar_offset": () => (/* binding */ mulArrayNWithScalar_offset),
/* harmony export */   "mulThatAndThisToOutAsMat44_offsetAsComposition": () => (/* binding */ mulThatAndThisToOutAsMat44_offsetAsComposition),
/* harmony export */   "normalizeArray4": () => (/* binding */ normalizeArray4),
/* harmony export */   "qlerp_offsetAsComposition": () => (/* binding */ qlerp_offsetAsComposition),
/* harmony export */   "scalar_lerp_offsetAsComposition": () => (/* binding */ scalar_lerp_offsetAsComposition)
/* harmony export */ });
const get1 = Symbol('get1');
const get1_offset = Symbol('get1_offset');
const get1_offsetAsComposition = Symbol('get1_offsetAsComposition');
const get2 = Symbol('get2');
const get2_offset = Symbol('get2_offset');
const get2_offsetAsComposition = Symbol('get2_offsetAsComposition');
const get3 = Symbol('get3');
const get3_offset = Symbol('get3_offset');
const get3_offsetAsComposition = Symbol('get3_offsetAsComposition');
const get4 = Symbol('get4');
const get4_offset = Symbol('get4_offset');
const get4_offsetAsComposition = Symbol('get4_offsetAsComposition');
const getN_offset = Symbol('getN_offset');
const getN_offsetAsComposition = Symbol('getN_offsetAsComposition');
const add2 = Symbol('add2');
const add2_offset = Symbol('add2_offset');
const add3 = Symbol('add3');
const add3_offset = Symbol('add3_offset');
const add4 = Symbol('add4');
const mulArray3WithScalar_offset = Symbol('mulArray3WithScalar_offset');
const mulArray4WithScalar_offset = Symbol('mulArray4WithScalar_offset');
const mulArrayNWithScalar_offset = Symbol('mulArrayNWithScalar_offset');
const mulThatAndThisToOutAsMat44_offsetAsComposition = Symbol('mulThatAndThisToOutAsMat44_offsetAsComposition');
const add4_offset = Symbol('add4_offset');
const qlerp_offsetAsComposition = Symbol('qlerp_offsetAsComposition');
const scalar_lerp_offsetAsComposition = Symbol('scalar_lerp_offsetAsComposition');
const array3_lerp_offsetAsComposition = Symbol('array3_lerp_offsetAsComposition');
const arrayN_lerp_offsetAsComposition = Symbol('arrayN_lerp_offsetAsComposition');
const normalizeArray4 = Symbol('normalizeArray4');
const get1_fn = function () {
    return [this[0]];
};
const get1_offset_fn = function (offset) {
    return [this[offset]];
};
const get1_offsetAsComposition_fn = function (offsetAsComposition) {
    return [this[offsetAsComposition]];
};
const get2_fn = function () {
    return [this[0], this[1]];
};
const get2_offset_fn = function (offset) {
    return [this[offset], this[offset + 1]];
};
const get2_offsetAsComposition_fn = function (offsetAsComposition) {
    return [this[offsetAsComposition * 2], this[offsetAsComposition * 2 + 1]];
};
const get3_fn = function () {
    return [this[0], this[1], this[2]];
};
const get3_offset_fn = function (offset) {
    return [this[offset], this[offset + 1], this[offset + 2]];
};
const get3_offsetAsComposition_fn = function (offsetAsComposition) {
    return [
        this[offsetAsComposition * 3],
        this[offsetAsComposition * 3 + 1],
        this[offsetAsComposition * 3 + 2],
    ];
};
const get4_fn = function () {
    return [this[0], this[1], this[2], this[3]];
};
const get4_offset_fn = function (offset) {
    return [this[offset], this[offset + 1], this[offset + 2], this[offset + 3]];
};
const get4_offsetAsComposition_fn = function (offsetAsComposition) {
    return [
        this[offsetAsComposition * 4],
        this[offsetAsComposition * 4 + 1],
        this[offsetAsComposition * 4 + 2],
        this[offsetAsComposition * 4 + 3],
    ];
};
const getN_offset_fn = function (offset, componentN) {
    const array = new Array(componentN);
    for (let i = 0; i < componentN; i++) {
        array[i] = this[offset + i];
    }
    return array;
};
const getN_offsetAsComposition_fn = function (offsetAsComposition, componentN) {
    const array = new Array(componentN);
    for (let i = 0; i < componentN; i++) {
        array[i] = this[offsetAsComposition * componentN + i];
    }
    return array;
};
const add2_fn = function (array) {
    this[0] += array[0];
    this[1] += array[1];
    return this;
};
const add2_offset_fn = function (array, selfOffset, argOffset) {
    this[selfOffset] += array[argOffset];
    this[selfOffset + 1] += array[argOffset + 1];
    return this;
};
const add3_fn = function (array) {
    this[0] += array[0];
    this[1] += array[1];
    this[2] += array[2];
    return this;
};
const add3_offset_fn = function (array, selfOffset, argOffset) {
    this[selfOffset] += array[argOffset];
    this[selfOffset + 1] += array[argOffset + 1];
    this[selfOffset + 2] += array[argOffset + 2];
    return this;
};
const add4_fn = function (array) {
    this[0] += array[0];
    this[1] += array[1];
    this[2] += array[2];
    this[3] += array[3];
    return this;
};
const add4_offset_fn = function (array, selfOffset, argOffset) {
    this[selfOffset] += array[argOffset];
    this[selfOffset + 1] += array[argOffset + 1];
    this[selfOffset + 2] += array[argOffset + 2];
    this[selfOffset + 3] += array[argOffset + 3];
    return this;
};
const mulArray3WithScalar_offset_fn = function (offset, value) {
    this[offset] *= value;
    this[offset + 1] *= value;
    this[offset + 2] *= value;
    return this;
};
const mulArray4WithScalar_offset_fn = function (offset, value) {
    this[offset] *= value;
    this[offset + 1] *= value;
    this[offset + 2] *= value;
    this[offset + 3] *= value;
    return this;
};
const mulArrayNWithScalar_offset_fn = function (offset, componentN, value) {
    for (let i = 0; i < componentN; i++) {
        this[offset + i] *= value;
    }
    return this;
};
// prettier-ignore
const mulThatAndThisToOutAsMat44_offsetAsComposition_fn = function (thisOffsetAsComposition, that, thatOffsetAsComposition, out) {
    const lv = that;
    // eslint-disable-next-line @typescript-eslint/no-this-alias
    const rv = this;
    const l = thatOffsetAsComposition * 16;
    const r = thisOffsetAsComposition * 16;
    out[0] = lv[l] * rv[r] + lv[l + 4] * rv[r + 1] + lv[l + 8] * rv[r + 2] + lv[l + 12] * rv[r + 3]; // m00
    out[1] = lv[l + 1] * rv[r] + lv[l + 5] * rv[r + 1] + lv[l + 9] * rv[r + 2] + lv[l + 13] * rv[r + 3]; // m10
    out[2] = lv[l + 2] * rv[r] + lv[l + 6] * rv[r + 1] + lv[l + 10] * rv[r + 2] + lv[l + 14] * rv[r + 3]; // m20
    out[3] = lv[l + 3] * rv[r] + lv[l + 7] * rv[r + 1] + lv[l + 11] * rv[r + 2] + lv[l + 15] * rv[r + 3]; // m30
    out[4] = lv[l] * rv[r + 4] + lv[l + 4] * rv[r + 5] + lv[l + 8] * rv[r + 6] + lv[l + 12] * rv[r + 7]; // m01
    out[5] = lv[l + 1] * rv[r + 4] + lv[l + 5] * rv[r + 5] + lv[l + 9] * rv[r + 6] + lv[l + 13] * rv[r + 7]; // m11
    out[6] = lv[l + 2] * rv[r + 4] + lv[l + 6] * rv[r + 5] + lv[l + 10] * rv[r + 6] + lv[l + 14] * rv[r + 7]; // m21
    out[7] = lv[l + 3] * rv[r + 4] + lv[l + 7] * rv[r + 5] + lv[l + 11] * rv[r + 6] + lv[l + 15] * rv[r + 7]; // m31
    out[8] = lv[l] * rv[r + 8] + lv[l + 4] * rv[r + 9] + lv[l + 8] * rv[r + 10] + lv[l + 12] * rv[r + 11]; // m02
    out[9] = lv[l + 1] * rv[r + 8] + lv[l + 5] * rv[r + 9] + lv[l + 9] * rv[r + 10] + lv[l + 13] * rv[r + 11]; // m12
    out[10] = lv[l + 2] * rv[r + 8] + lv[l + 6] * rv[r + 9] + lv[l + 10] * rv[r + 10] + lv[l + 14] * rv[r + 11]; // m22
    out[11] = lv[l + 3] * rv[r + 8] + lv[l + 7] * rv[r + 9] + lv[l + 11] * rv[r + 10] + lv[l + 15] * rv[r + 11]; // m32
    out[12] = lv[l] * rv[r + 12] + lv[l + 4] * rv[r + 13] + lv[l + 8] * rv[r + 14] + lv[l + 12] * rv[r + 15]; // m03
    out[13] = lv[l + 1] * rv[r + 12] + lv[l + 5] * rv[r + 13] + lv[l + 9] * rv[r + 14] + lv[l + 13] * rv[r + 15]; // m13
    out[14] = lv[l + 2] * rv[r + 12] + lv[l + 6] * rv[r + 13] + lv[l + 10] * rv[r + 14] + lv[l + 14] * rv[r + 15]; // m23
    out[15] = lv[l + 3] * rv[r + 12] + lv[l + 7] * rv[r + 13] + lv[l + 11] * rv[r + 14] + lv[l + 15] * rv[r + 15]; // m33
};
const qlerp_offsetAsComposition_fn = function (array, ratio, selfOffsetAsComposition, argOffsetAsComposition) {
    const out = new Array(4);
    let dotProduct = this[0 + selfOffsetAsComposition * 4] *
        array[0 + argOffsetAsComposition * 4] +
        this[1 + selfOffsetAsComposition * 4] *
            array[1 + argOffsetAsComposition * 4] +
        this[2 + selfOffsetAsComposition * 4] *
            array[2 + argOffsetAsComposition * 4] +
        this[3 + selfOffsetAsComposition * 4] *
            array[3 + argOffsetAsComposition * 4];
    const ss = 1.0 - dotProduct * dotProduct;
    if (ss === 0.0) {
        out[0] = this[0 + selfOffsetAsComposition * 4];
        out[1] = this[1 + selfOffsetAsComposition * 4];
        out[2] = this[2 + selfOffsetAsComposition * 4];
        out[3] = this[3 + selfOffsetAsComposition * 4];
    }
    else {
        if (dotProduct > 1) {
            dotProduct = 0.999;
        }
        else if (dotProduct < -1) {
            dotProduct = -0.999;
        }
        let theta = Math.acos(dotProduct);
        const sinTheta = Math.sin(theta);
        let s2;
        if (dotProduct < 0.0) {
            dotProduct *= -1;
            theta = Math.acos(dotProduct);
            s2 = (-1 * Math.sin(theta * ratio)) / sinTheta;
        }
        else {
            s2 = Math.sin(theta * ratio) / sinTheta;
        }
        const s1 = Math.sin(theta * (1.0 - ratio)) / sinTheta;
        out[0] =
            this[0 + selfOffsetAsComposition * 4] * s1 +
                array[0 + argOffsetAsComposition * 4] * s2;
        out[1] =
            this[1 + selfOffsetAsComposition * 4] * s1 +
                array[1 + argOffsetAsComposition * 4] * s2;
        out[2] =
            this[2 + selfOffsetAsComposition * 4] * s1 +
                array[2 + argOffsetAsComposition * 4] * s2;
        out[3] =
            this[3 + selfOffsetAsComposition * 4] * s1 +
                array[3 + argOffsetAsComposition * 4] * s2;
    }
    return out;
};
const scalar_lerp_offsetAsComposition_fn = function (array, ratio, selfOffset, argOffset) {
    return this[selfOffset] * (1 - ratio) + array[argOffset] * ratio;
};
const array3_lerp_offsetAsComposition_fn = function (array, ratio, selfOffsetAsComposition, argOffsetAsComposition) {
    const ret = new Array(3);
    for (let i = 0; i < 3; i++) {
        ret[i] =
            this[selfOffsetAsComposition * 3 + i] * (1 - ratio) +
                array[argOffsetAsComposition * 3 + i] * ratio;
    }
    return ret;
};
const arrayN_lerp_offsetAsComposition_fn = function (array, componentN, ratio, selfOffsetAsComposition, argOffsetAsComposition) {
    const ret = new Array(componentN);
    for (let i = 0; i < componentN; i++) {
        ret[i] =
            this[selfOffsetAsComposition * componentN + i] * (1 - ratio) +
                array[argOffsetAsComposition * componentN + i] * ratio;
    }
    return ret;
};
const normalizeArray4_fn = function () {
    const length = Math.hypot(this[0], this[1], this[2], this[3]);
    this[0] /= length;
    this[1] /= length;
    this[2] /= length;
    this[3] /= length;
    return this;
};
const arrayTypes = [
    Array,
    Float32Array,
    Float64Array,
    Int8Array,
    Int16Array,
    Int32Array,
    Uint8Array,
    Uint16Array,
    Uint32Array,
];
const operators = [
    get1_offsetAsComposition,
    get2_offsetAsComposition,
    get1,
    get1_offset,
    get2,
    get2_offset,
    get3,
    get3_offset,
    get3_offsetAsComposition,
    get4,
    get4_offset,
    get4_offsetAsComposition,
    getN_offset,
    getN_offsetAsComposition,
    add2,
    add2_offset,
    add3,
    add3_offset,
    add4,
    add4_offset,
    mulArray3WithScalar_offset,
    mulArray4WithScalar_offset,
    mulArrayNWithScalar_offset,
    mulThatAndThisToOutAsMat44_offsetAsComposition,
    qlerp_offsetAsComposition,
    scalar_lerp_offsetAsComposition,
    array3_lerp_offsetAsComposition,
    arrayN_lerp_offsetAsComposition,
    normalizeArray4,
];
const functions = [
    get1_offsetAsComposition_fn,
    get2_offsetAsComposition_fn,
    get1_fn,
    get1_offset_fn,
    get2_fn,
    get2_offset_fn,
    get3_fn,
    get3_offset_fn,
    get3_offsetAsComposition_fn,
    get4_fn,
    get4_offset_fn,
    get4_offsetAsComposition_fn,
    getN_offset_fn,
    getN_offsetAsComposition_fn,
    add2_fn,
    add2_offset_fn,
    add3_fn,
    add3_offset_fn,
    add4_fn,
    add4_offset_fn,
    mulArray3WithScalar_offset_fn,
    mulArray4WithScalar_offset_fn,
    mulArrayNWithScalar_offset_fn,
    mulThatAndThisToOutAsMat44_offsetAsComposition_fn,
    qlerp_offsetAsComposition_fn,
    scalar_lerp_offsetAsComposition_fn,
    array3_lerp_offsetAsComposition_fn,
    arrayN_lerp_offsetAsComposition_fn,
    normalizeArray4_fn,
];
for (let i = 0; i < arrayTypes.length; i++) {
    for (let j = 0; j < operators.length; j++) {
        arrayTypes[i].prototype[operators[j]] = functions[j];
    }
}


/***/ }),

/***/ "./src/foundation/memory/Accessor.ts":
/*!*******************************************!*\
  !*** ./src/foundation/memory/Accessor.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Accessor": () => (/* binding */ Accessor)
/* harmony export */ });
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _math_Vector2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Vector2 */ "./src/foundation/math/Vector2.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _math_Matrix33__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../math/Matrix33 */ "./src/foundation/math/Matrix33.ts");
/* harmony import */ var _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");










class Accessor {
    constructor({ bufferView, byteOffsetInBufferView, compositionType, componentType, byteStride, count, raw, max, min, arrayLength, normalized, }) {
        this.__compositionType = _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.Unknown;
        this.__componentType = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Unknown;
        this.__count = 0;
        this.__takenCount = 0;
        this.__byteStride = 0; // Accessor has the byteStride. BufferView doesn't. For supporting glTF1, not only glTF2
        this.__max = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_7__.MutableVector4.fromCopyArray([
            -Number.MAX_VALUE,
            -Number.MAX_VALUE,
            -Number.MAX_VALUE,
            -Number.MAX_VALUE,
        ]);
        this.__min = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_7__.MutableVector4.fromCopyArray([
            Number.MAX_VALUE,
            Number.MAX_VALUE,
            Number.MAX_VALUE,
            Number.MAX_VALUE,
        ]);
        this.__arrayLength = 1;
        this.__normalized = false;
        this.__isMinMixDirty = true;
        this.__version = 0;
        this.__bufferView = bufferView;
        this.__byteOffsetInRawArrayBufferOfBuffer =
            bufferView.byteOffsetInRawArrayBufferOfBuffer + byteOffsetInBufferView;
        this.__compositionType = compositionType;
        this.__componentType = componentType;
        this.__count = count;
        this.__arrayLength = arrayLength;
        if (max) {
            this.__max.setComponents(max[0] || -Number.MAX_VALUE, max[1] || -Number.MAX_VALUE, max[2] || -Number.MAX_VALUE, max[3] || -Number.MAX_VALUE);
        }
        if (min) {
            this.__min.setComponents(min[0] || Number.MAX_VALUE, min[1] || Number.MAX_VALUE, min[2] || Number.MAX_VALUE, min[3] || Number.MAX_VALUE);
        }
        this.__raw = raw;
        this.__normalized = normalized;
        this.__byteStride = byteStride;
        if (this.__byteStride === 0) {
            this.__byteStride =
                this.__compositionType.getNumberOfComponents() *
                    this.__componentType.getSizeInBytes() *
                    this.__arrayLength;
        }
        const typedArrayClass = this.getTypedArrayClass(this.__componentType);
        this.__typedArrayClass = typedArrayClass;
        /// Check
        const maxExceededSizeOnAoS = this.__byteStride -
            this.__compositionType.getNumberOfComponents() *
                this.__componentType.getSizeInBytes();
        const sizeFromAccessorBeginToArrayBufferEnd = this.__raw.byteLength - this.__byteOffsetInRawArrayBufferOfBuffer;
        const maxLimitSizeToAccess = this.byteStride * this.__count - maxExceededSizeOnAoS;
        if (sizeFromAccessorBeginToArrayBufferEnd < maxLimitSizeToAccess) {
            console.error(`Requesting a data size that exceeds the remaining capacity of the buffer: ${this.bufferView.buffer.name}.
        Exceeded Size: ${maxLimitSizeToAccess - sizeFromAccessorBeginToArrayBufferEnd}
        this.__raw.byteLength: ${this.__raw.byteLength}
        this.__byteOffsetInRawArrayBufferOfBuffer: ${this.byteOffsetInRawArrayBufferOfBuffer}
        this.byteStride: ${this.byteStride}
        this.__count: ${this.__count}
        this.__raw.byteLength - this.__byteOffsetInRawArrayBufferOfBuffer: ${this.__raw.byteLength - this.__byteOffsetInRawArrayBufferOfBuffer}
        this.byteStride * this.__count: ${this.byteStride * this.__count}
        maxExceededSizeOnAoS: ${maxExceededSizeOnAoS}
        `);
        }
        this.__dataView = new DataView(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, Math.min(this.__byteStride * this.__count, this.__raw.byteLength - this.__byteOffsetInRawArrayBufferOfBuffer));
        this.__typedArray = new typedArrayClass(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, this.__compositionType.getNumberOfComponents() * this.__count);
        this.__dataViewGetter = this.__dataView[this.getDataViewGetter(this.__componentType)].bind(this.__dataView);
        this.__dataViewSetter = this.__dataView[this.getDataViewSetter(this.__componentType)].bind(this.__dataView);
    }
    getTypedArrayClass(componentType) {
        switch (componentType) {
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Byte:
                return Int8Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedByte:
                return Uint8Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Short:
                return Int16Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedShort:
                return Uint16Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int:
                return Int32Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedInt:
                return Uint32Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float:
                return Float32Array;
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Double:
                return Float64Array;
            default:
                console.error('Unexpected ComponentType!');
                return void 0;
        }
    }
    getDataViewGetter(componentType) {
        switch (componentType) {
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Byte:
                return 'getInt8';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedByte:
                return 'getUint8';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Short:
                return 'getInt16';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedShort:
                return 'getUint16';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int:
                return 'getInt32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedInt:
                return 'getUint32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float:
                return 'getFloat32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Double:
                return 'getFloat64';
            default:
                console.error('Unexpected ComponentType!');
                return 'unknown';
        }
    }
    getDataViewSetter(componentType) {
        switch (componentType) {
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Byte:
                return 'setInt8';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedByte:
                return 'setUint8';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Short:
                return 'setInt16';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedShort:
                return 'setUint16';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Int:
                return 'setInt32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.UnsignedInt:
                return 'setUint32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Float:
                return 'setFloat32';
            case _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_0__.ComponentType.Double:
                return 'setFloat64';
            default:
                console.error('Unexpected ComponentType!');
        }
        return undefined;
    }
    takeOne() {
        const arrayBufferOfBufferView = this.__raw;
        // let stride = this.__compositionType.getNumberOfComponents() * this.__componentType.getSizeInBytes();
        // if (this.__bufferView.isAoS) {
        //   stride = this.__bufferView.byteStride;
        // }
        if (this.__takenCount >= this.__count) {
            console.error('You are trying to allocate more than you have secured.');
        }
        const subTypedArray = new this.__typedArrayClass(arrayBufferOfBufferView, this.__byteOffsetInRawArrayBufferOfBuffer +
            this.__byteStride * this.__takenCount, this.__compositionType.getNumberOfComponents() * this.__arrayLength);
        this.__takenCount += 1;
        // console.log(this.byteOffsetInRawArrayBufferOfBuffer, this.__byteStride, this.__takenCount, this.__arrayLength);
        subTypedArray._accessor = this;
        subTypedArray._idx_of_accessor = this.__takenCount;
        return subTypedArray;
    }
    get takenCount() {
        return this.takenCount;
    }
    get numberOfComponents() {
        return this.__compositionType.getNumberOfComponents();
    }
    get componentSizeInBytes() {
        return this.__componentType.getSizeInBytes();
    }
    get elementSizeInBytes() {
        return this.numberOfComponents * this.componentSizeInBytes;
    }
    /**
     * get element count
     * element may be scalar, vec2, vec3, vec4, ...
     */
    get elementCount() {
        return this.__count;
    }
    get byteLength() {
        return this.__byteStride * this.__count;
    }
    get componentType() {
        return this.__componentType;
    }
    get compositionType() {
        return this.__compositionType;
    }
    /**
     *
     * @returns
     */
    getTypedArray() {
        // if (this.__bufferView.isAoS) {
        //   console.warn(
        //     'Be careful. this reference bufferView is AoS(Array on Structure), it means Interleaved Data. So you can not access your data properly by this TypedArray.'
        //   );
        // }
        return this.__typedArray;
    }
    getUint8Array() {
        // if (this.__bufferView.isAoS) {
        //   console.warn(
        //     'Be careful. this reference bufferView is AoS(Array on Structure), it means Interleaved Data. So you can not access your data properly by this TypedArray.'
        //   );
        // }
        return new Uint8Array(this.bufferView.buffer.getArrayBuffer(), this.byteOffsetInRawArrayBufferOfBuffer, this.byteLength);
    }
    get isAoS() {
        return !this.isSoA;
    }
    get isSoA() {
        const isSoA = this.byteStride ===
            this.__compositionType.getNumberOfComponents() *
                this.__componentType.getSizeInBytes();
        return isSoA;
    }
    get byteStride() {
        return this.__byteStride;
    }
    getScalar(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        return this.__dataViewGetter(this.__byteStride * index, endian);
    }
    getScalarAt(i, compositionOffset, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        return this.__dataViewGetter(this.__byteStride * index + compositionOffset, endian);
    }
    getVec2AsArray(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return [
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
        ];
    }
    getVec3AsArray(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return [
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
        ];
    }
    getVec4AsArray(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return [
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),
        ];
    }
    getMat3AsArray(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return [
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian),
        ];
    }
    getMat4AsArray(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return [
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian),
        ];
    }
    getVec2(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return _math_Vector2__WEBPACK_IMPORTED_MODULE_2__.Vector2.fromCopyArray2([
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
        ]);
    }
    getVec3(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return _math_Vector3__WEBPACK_IMPORTED_MODULE_3__.Vector3.fromCopyArray([
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
        ]);
    }
    getVec4(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.fromCopyArray([
            this.__dataViewGetter(this.__byteStride * index, endian),
            this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian),
            this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian),
        ]);
    }
    getMat3(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return _math_Matrix33__WEBPACK_IMPORTED_MODULE_8__.Matrix33.fromCopy9RowMajor(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian));
    }
    getMat4(i, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return _math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix44.fromCopy16RowMajor(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian));
    }
    getVec2To(i, out, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return out.setComponents(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian));
    }
    getVec3To(i, out, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return out.setComponents(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian));
    }
    getVec4To(i, out, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return out.setComponents(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian));
    }
    getMat3To(i, out, { indicesAccessor, endian = true, }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return out.setComponents(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian));
    }
    getMat4To(i, out, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const byteSize = this.componentSizeInBytes;
        return out.setComponents(this.__dataViewGetter(this.__byteStride * index, endian), this.__dataViewGetter(this.__byteStride * index + 1 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 2 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 3 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 4 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 5 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 6 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 7 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 8 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 9 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 10 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 11 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 12 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 13 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 14 * byteSize, endian), this.__dataViewGetter(this.__byteStride * index + 15 * byteSize, endian));
    }
    setScalar(i, value, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        this.__dataViewSetter(this.__byteStride * index, value, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec2(i, x, y, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec3(i, x, y, z, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);
        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec4(i, x, y, z, w, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, y, endian);
        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, z, endian);
        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, w, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec2AsVector(i, vec, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec3AsVector(i, vec, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);
        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setVec4AsVector(i, vec, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        const sizeInBytes = this.componentSizeInBytes;
        this.__dataViewSetter(this.__byteStride * index, vec.x, endian);
        this.__dataViewSetter(this.__byteStride * index + 1 * sizeInBytes, vec.y, endian);
        this.__dataViewSetter(this.__byteStride * index + 2 * sizeInBytes, vec.z, endian);
        this.__dataViewSetter(this.__byteStride * index + 3 * sizeInBytes, vec.w, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    copyFromTypedArray(typedArray) {
        const componentN = this.numberOfComponents;
        for (let j = 0; j < typedArray.byteLength / this.componentSizeInBytes; j++) {
            const idx = Math.floor(j / componentN);
            const idxN = idx * componentN;
            switch (componentN) {
                case 1:
                    this.setScalar(idx, typedArray[idxN + 0], {});
                    break;
                case 2:
                    this.setVec2(idx, typedArray[idxN + 0], typedArray[idxN + 1], {});
                    break;
                case 3:
                    this.setVec3(idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], {});
                    break;
                case 4:
                    this.setVec4(idx, typedArray[idxN + 0], typedArray[idxN + 1], typedArray[idxN + 2], typedArray[idxN + 3], {});
                    break;
                default:
                    throw new Error('Other than vectors are currently not supported.');
            }
        }
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setScalarAt(i, compositionOffset, value, { indicesAccessor, endian = true }) {
        let index = i;
        if (indicesAccessor) {
            index = indicesAccessor.getScalar(i, {});
        }
        this.__dataViewSetter(this.__byteStride * index + compositionOffset, value, endian);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setElementFromSameCompositionAccessor(i, accessor, secondIdx) {
        const j = secondIdx !== null && secondIdx !== void 0 ? secondIdx : i;
        if (this.compositionType.getNumberOfComponents() === 1) {
            this.setScalar(i, accessor.getScalar(j, {}), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 2) {
            this.setVec2AsVector(i, accessor.getVec2(j, {}), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 3) {
            this.setVec3AsVector(i, accessor.getVec3(j, {}), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 4) {
            this.setVec4AsVector(i, accessor.getVec4(j, {}), {});
        }
        this.__isMinMixDirty = true;
        this.__version++;
    }
    copyBuffer(accessor) {
        new Uint8Array(this.__raw).set(new Uint8Array(accessor.__raw, accessor.__byteOffsetInRawArrayBufferOfBuffer, accessor.byteLength), this.__byteOffsetInRawArrayBufferOfBuffer);
        this.__isMinMixDirty = true;
        this.__version++;
    }
    setElementFromAccessor(i, accessor, secondIdx) {
        const j = secondIdx !== null && secondIdx !== void 0 ? secondIdx : i;
        if (this.compositionType.getNumberOfComponents() === 1) {
            if (accessor.compositionType.getNumberOfComponents() === 1) {
                this.setScalar(i, accessor.getScalar(j, {}), {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 2) {
                this.setScalar(i, accessor.getVec2(j, {}).x, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 3) {
                this.setScalar(i, accessor.getVec3(j, {}).x, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 4) {
                this.setScalar(i, accessor.getVec4(j, {}).x, {});
            }
        }
        else if (this.compositionType.getNumberOfComponents() === 2) {
            if (accessor.compositionType.getNumberOfComponents() === 1) {
                const scalar = accessor.getScalar(j, {});
                this.setVec2(i, scalar, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 2) {
                this.setVec2AsVector(i, accessor.getVec2(j, {}), {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 3) {
                const vec = accessor.getVec3(j, {});
                this.setVec2(i, vec.x, vec.y, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 4) {
                const vec = accessor.getVec4(j, {});
                this.setVec2(i, vec.x, vec.y, {});
            }
        }
        else if (this.compositionType.getNumberOfComponents() === 3) {
            if (accessor.compositionType.getNumberOfComponents() === 1) {
                const scalar = accessor.getScalar(j, {});
                this.setVec3(i, scalar, 0, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 2) {
                const vec = accessor.getVec2(j, {});
                this.setVec3(i, vec.x, vec.y, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 3) {
                const vec = accessor.getVec3(j, {});
                this.setVec3AsVector(i, vec, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 4) {
                const vec = accessor.getVec4(j, {});
                this.setVec3(i, vec.x, vec.y, vec.z, {});
            }
        }
        else if (this.compositionType.getNumberOfComponents() === 4) {
            if (accessor.compositionType.getNumberOfComponents() === 1) {
                const scalar = accessor.getScalar(j, {});
                this.setVec4(i, scalar, 0, 0, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 2) {
                const vec = accessor.getVec2(j, {});
                this.setVec4(i, vec.x, vec.y, 0, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 3) {
                const vec = accessor.getVec3(j, {});
                this.setVec4(i, vec.x, vec.y, vec.z, 0, {});
            }
            else if (accessor.compositionType.getNumberOfComponents() === 4) {
                const vec = accessor.getVec4(j, {});
                this.setVec4AsVector(i, vec, {});
            }
        }
        this.__isMinMixDirty = true;
        this.__version++;
    }
    addElementFromSameCompositionAccessor(i, accessor, coeff, secondIdx) {
        const j = secondIdx !== null && secondIdx !== void 0 ? secondIdx : i;
        if (this.compositionType.getNumberOfComponents() === 1) {
            this.setScalar(i, this.getScalar(i, {}) + coeff * accessor.getScalar(j, {}), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 2) {
            this.setVec2AsVector(i, _math_Vector2__WEBPACK_IMPORTED_MODULE_2__.Vector2.add(this.getVec2(i, {}), _math_Vector2__WEBPACK_IMPORTED_MODULE_2__.Vector2.multiply(accessor.getVec2(j, {}), coeff)), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 3) {
            this.setVec3AsVector(i, _math_Vector3__WEBPACK_IMPORTED_MODULE_3__.Vector3.add(this.getVec3(i, {}), _math_Vector3__WEBPACK_IMPORTED_MODULE_3__.Vector3.multiply(accessor.getVec3(j, {}), coeff)), {});
        }
        else if (this.compositionType.getNumberOfComponents() === 4) {
            this.setVec4AsVector(i, _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.add(this.getVec4(i, {}), _math_Vector4__WEBPACK_IMPORTED_MODULE_4__.Vector4.multiply(accessor.getVec4(j, {}), coeff)), {});
        }
        this.__isMinMixDirty = true;
        this.__version++;
    }
    get arrayBufferOfBufferView() {
        return this.__raw;
    }
    get dataViewOfBufferView() {
        return this.__dataView;
    }
    get byteOffsetInBufferView() {
        return (this.__byteOffsetInRawArrayBufferOfBuffer -
            this.__bufferView.byteOffsetInRawArrayBufferOfBuffer);
    }
    get byteOffsetInBuffer() {
        return (this.__byteOffsetInRawArrayBufferOfBuffer -
            this.__bufferView.buffer.byteOffsetInRawArrayBuffer);
    }
    get byteOffsetInRawArrayBufferOfBuffer() {
        return this.__byteOffsetInRawArrayBufferOfBuffer;
    }
    get bufferView() {
        return this.__bufferView;
    }
    get min() {
        const componentN = this.compositionType.getNumberOfComponents();
        if (componentN === 4) {
            return [
                this.__min._v[0],
                this.__min._v[1],
                this.__min._v[2],
                this.__min._v[3],
            ];
        }
        else if (componentN === 3) {
            return [this.__min._v[0], this.__min._v[1], this.__min._v[2]];
        }
        else if (componentN === 2) {
            return [this.__min._v[0], this.__min._v[1]];
        }
        else {
            return [this.__min._v[0]];
        }
    }
    get max() {
        const componentN = this.compositionType.getNumberOfComponents();
        if (componentN === 4) {
            return [
                this.__max._v[0],
                this.__max._v[1],
                this.__max._v[2],
                this.__max._v[3],
            ];
        }
        else if (componentN === 3) {
            return [this.__max._v[0], this.__max._v[1], this.__max._v[2]];
        }
        else if (componentN === 2) {
            return [this.__max._v[0], this.__max._v[1]];
        }
        else {
            return [this.__max._v[0]];
        }
    }
    get normalized() {
        return this.__normalized;
    }
    calcMinMax() {
        const componentN = this.compositionType.getNumberOfComponents();
        if (componentN === 4) {
            this.__max.setComponents(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
            this.__min.setComponents(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            const vec4 = Accessor.__tmpVector4_0;
            for (let i = 0; i < this.elementCount; i++) {
                this.getVec4To(i, vec4, {});
                for (let j = 0; j < 4; j++) {
                    if (this.__max._v[j] < vec4._v[j]) {
                        this.__max._v[j] = vec4._v[j];
                    }
                    if (vec4._v[j] < this.__min._v[j]) {
                        this.__min._v[j] = vec4._v[j];
                    }
                }
            }
        }
        else if (componentN === 3) {
            this.__max.setComponents(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
            this.__min.setComponents(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            const vec3 = Accessor.__tmpVector3_0;
            for (let i = 0; i < this.elementCount; i++) {
                this.getVec3To(i, vec3, {});
                for (let j = 0; j < 3; j++) {
                    if (this.__max._v[j] < vec3._v[j]) {
                        this.__max._v[j] = vec3._v[j];
                    }
                    if (vec3._v[j] < this.__min._v[j]) {
                        this.__min._v[j] = vec3._v[j];
                    }
                }
            }
        }
        else if (componentN === 2) {
            this.__max.setComponents(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
            this.__min.setComponents(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            const vec2 = Accessor.__tmpVector2_0;
            for (let i = 0; i < this.elementCount; i++) {
                this.getVec2To(i, vec2, {});
                for (let j = 0; j < 2; j++) {
                    if (this.__max._v[j] < vec2._v[j]) {
                        this.__max._v[j] = vec2._v[j];
                    }
                    if (vec2._v[j] < this.__min._v[j]) {
                        this.__min._v[j] = vec2._v[j];
                    }
                }
            }
        }
        else if (componentN === 1) {
            this.__max.setComponents(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
            this.__min.setComponents(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
            for (let i = 0; i < this.elementCount; i++) {
                const scalar = this.getScalar(i, {});
                if (this.__max._v[0] < scalar) {
                    this.__max._v[0] = scalar;
                }
                if (scalar < this.__min._v[0]) {
                    this.__min._v[0] = scalar;
                }
            }
        }
        this.__isMinMixDirty = false;
    }
    get isMinMaxDirty() {
        return this.__isMinMixDirty;
    }
    get version() {
        return this.__version;
    }
    get actualByteStride() {
        if (this.__byteStride === 0) {
            const actualByteStride = this.__compositionType.getNumberOfComponents() *
                this.__componentType.getSizeInBytes() *
                this.__arrayLength;
            return actualByteStride;
        }
        else {
            return this.__byteStride;
        }
    }
    isSame(rnAccessor) {
        return (this.byteLength === rnAccessor.byteLength &&
            this.byteOffsetInRawArrayBufferOfBuffer ===
                rnAccessor.byteOffsetInRawArrayBufferOfBuffer &&
            this.bufferView.buffer.getArrayBuffer() ===
                rnAccessor.bufferView.buffer.getArrayBuffer());
    }
}
Accessor.__tmpVector4_0 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_7__.MutableVector4.zero();
Accessor.__tmpVector3_0 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_6__.MutableVector3.zero();
Accessor.__tmpVector2_0 = _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__.MutableVector2.zero();


/***/ }),

/***/ "./src/foundation/memory/Buffer.ts":
/*!*****************************************!*\
  !*** ./src/foundation/memory/Buffer.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Buffer": () => (/* binding */ Buffer)
/* harmony export */ });
/* harmony import */ var _BufferView__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BufferView */ "./src/foundation/memory/BufferView.ts");
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _misc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc */ "./src/foundation/misc/index.ts");





class Buffer {
    constructor({ byteLength, buffer, name, byteAlign, }) {
        this.__byteLength = 0;
        this.__byteOffset = 0;
        this.__takenBytesIndex = 0;
        this.__name = '';
        this.__bufferViews = [];
        this.__name = name;
        this.__byteLength = byteLength;
        this.__byteAlign = byteAlign;
        if (buffer instanceof Uint8Array) {
            this.__raw = buffer.buffer;
            this.__byteOffset = buffer.byteOffset;
        }
        else {
            this.__raw = buffer;
        }
    }
    set name(str) {
        this.__name = str;
    }
    get name() {
        return this.__name;
    }
    getArrayBuffer() {
        return this.__raw;
    }
    __padding(byteLengthToNeed, byteAlign) {
        const paddingSize = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_3__.DataUtil.calcPaddingBytes(byteLengthToNeed, byteAlign);
        if (paddingSize > 0) {
            console.info('Padding bytes added to takenBytesIndex.');
        }
        return paddingSize;
    }
    takeBufferView({ byteLengthToNeed, byteStride, }) {
        // const byteAlign = this.__byteAlign;
        // const paddingBytes = this.__padding(byteLengthToNeed, byteAlign);
        // const byteSizeToTake = byteLengthToNeed + paddingBytes;
        const byteSizeToTake = byteLengthToNeed; // + paddingBytes;
        // byteSizeToTake = DataUtil.addPaddingBytes(byteSizeToTake, this.__byteAlign);
        if (byteSizeToTake + this.__takenBytesIndex > this.byteLength) {
            const message = `The size of the BufferView you are trying to take exceeds the byte length left in the Buffer.
Buffer.byteLength: ${this.byteLength}, Buffer.takenSizeInByte: ${this.takenSizeInByte},
byteSizeToTake: ${byteSizeToTake}, the byte length left in the Buffer: ${this.__byteLength - this.__takenBytesIndex}`;
            // console.error(message);
            return new _misc__WEBPACK_IMPORTED_MODULE_4__.Err({
                message,
                error: undefined,
            });
        }
        const bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_0__.BufferView({
            buffer: this,
            byteOffsetInBuffer: this.__takenBytesIndex,
            defaultByteStride: byteStride,
            byteLength: byteSizeToTake,
            raw: this.__raw,
        });
        this.__takenBytesIndex += byteSizeToTake;
        this.__takenBytesIndex = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_3__.DataUtil.addPaddingBytes(this.__takenBytesIndex, this.__byteAlign);
        this.__bufferViews.push(bufferView);
        return new _misc__WEBPACK_IMPORTED_MODULE_4__.Ok(bufferView);
    }
    takeBufferViewWithByteOffset({ byteLengthToNeed, byteStride, byteOffset, }) {
        const byteSizeToTake = byteLengthToNeed;
        if (byteSizeToTake + byteOffset > this.byteLength) {
            const message = `The size of the BufferView you are trying to take exceeds the byte length left in the Buffer.
Buffer.byteLength: ${this.byteLength}, Buffer.takenSizeInByte: ${this.takenSizeInByte},
byteSizeToTake: ${byteLengthToNeed}, the byte length left in the Buffer: ${this.__byteLength - this.__takenBytesIndex}`;
            return new _misc__WEBPACK_IMPORTED_MODULE_4__.Err({
                message,
                error: undefined,
            });
        }
        const bufferView = new _BufferView__WEBPACK_IMPORTED_MODULE_0__.BufferView({
            buffer: this,
            byteOffsetInBuffer: byteOffset,
            defaultByteStride: byteStride,
            byteLength: byteLengthToNeed,
            raw: this.__raw,
        });
        const takenBytesIndex = Uint8Array.BYTES_PER_ELEMENT * byteLengthToNeed + byteOffset;
        if (this.__takenBytesIndex < takenBytesIndex) {
            this.__takenBytesIndex = takenBytesIndex;
        }
        this.__bufferViews.push(bufferView);
        return new _misc__WEBPACK_IMPORTED_MODULE_4__.Ok(bufferView);
    }
    _addTakenByteIndex(value) {
        this.__takenBytesIndex += value;
    }
    get byteLength() {
        return this.__byteLength;
    }
    get takenSizeInByte() {
        return this.__takenBytesIndex;
    }
    get byteOffsetInRawArrayBuffer() {
        return this.__byteOffset;
    }
    getTypedArray(offset4bytesUnit, compositionType, componentType, length = 100) {
        let ret;
        const typedArray = _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.toTypedArray(componentType);
        if (typedArray === undefined) {
            console.warn('componentType is Invalid');
        }
        if (_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_1__.CompositionType.isArray(compositionType)) {
            ret = new typedArray(this.__raw, this.__byteOffset + offset4bytesUnit * 4, length);
        }
        else {
            ret = new typedArray(this.__raw, this.__byteOffset + offset4bytesUnit * 4, 1);
        }
        return ret;
    }
    isSame(buffer) {
        return this.__raw === buffer.__raw;
    }
}


/***/ }),

/***/ "./src/foundation/memory/BufferView.ts":
/*!*********************************************!*\
  !*** ./src/foundation/memory/BufferView.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BufferView": () => (/* binding */ BufferView)
/* harmony export */ });
/* harmony import */ var _Accessor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Accessor */ "./src/foundation/memory/Accessor.ts");
/* harmony import */ var _misc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc */ "./src/foundation/misc/index.ts");


class BufferView {
    constructor({ buffer, byteOffsetInBuffer, defaultByteStride, byteLength, raw, }) {
        this.__defaultByteStride = 0;
        this.__takenByte = 0;
        this.__takenAccessorCount = 0;
        this.__accessors = [];
        this.__buffer = buffer;
        this.__byteOffsetInBuffer = byteOffsetInBuffer;
        this.__byteOffsetInRawArrayBufferOfBuffer =
            buffer.byteOffsetInRawArrayBuffer + byteOffsetInBuffer;
        this.__byteLength = byteLength;
        this.__defaultByteStride = defaultByteStride;
        this.__raw = raw;
    }
    get defaultByteStride() {
        return this.__defaultByteStride;
    }
    get byteLength() {
        return this.__byteLength;
    }
    /**
     * byteOffset in Buffer (includes byteOffset of Buffer in it's inner arraybuffer)
     */
    get byteOffsetInBuffer() {
        return (this.__byteOffsetInRawArrayBufferOfBuffer -
            this.__buffer.byteOffsetInRawArrayBuffer);
    }
    /**
     * byteOffset in Buffer (includes byteOffset of Buffer in it's inner arraybuffer)
     */
    get byteOffsetInRawArrayBufferOfBuffer() {
        return this.__byteOffsetInRawArrayBufferOfBuffer;
    }
    get buffer() {
        return this.__buffer;
    }
    get isSoA() {
        return !this.isAoS;
    }
    get isAoS() {
        for (const accessor of this.__accessors) {
            if (accessor.isAoS) {
                return true;
            }
        }
        return false;
    }
    /**
     * get memory buffer as Uint8Array of this BufferView memory area data
     */
    getUint8Array() {
        return new Uint8Array(this.__raw, this.__byteOffsetInRawArrayBufferOfBuffer, this.__byteLength);
    }
    takeAccessor({ compositionType, componentType, count, byteStride = this.defaultByteStride, max, min, arrayLength = 1, normalized = false, }) {
        const accessor = this.__takeAccessorInner({
            compositionType,
            componentType,
            count,
            byteStride,
            max,
            min,
            normalized,
            arrayLength,
        });
        return accessor;
    }
    takeAccessorWithByteOffset({ compositionType, componentType, count, byteOffsetInBufferView, byteStride = this.defaultByteStride, max, min, normalized = false, }) {
        const accessor = this.__takeAccessorInnerWithByteOffset({
            compositionType,
            componentType,
            count,
            byteStride,
            byteOffsetInBufferView,
            max,
            min,
            normalized,
        });
        return accessor;
    }
    __takeAccessorInner({ compositionType, componentType, count, byteStride, max, min, arrayLength, normalized, }) {
        const byteOffsetInBufferView = this.__takenByte;
        let actualByteStride = byteStride;
        if (actualByteStride === 0) {
            actualByteStride =
                compositionType.getNumberOfComponents() *
                    componentType.getSizeInBytes() *
                    arrayLength;
        }
        // Each accessor MUST fit its bufferView, i.e.,
        // accessor.byteOffset + EFFECTIVE_BYTE_STRIDE * (accessor.count - 1) + SIZE_OF_COMPONENT * NUMBER_OF_COMPONENTS
        // See: https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#data-alignment
        if (this.__takenByte + actualByteStride * (count - 1) + componentType.getSizeInBytes() * compositionType.getNumberOfComponents() > this.byteLength) {
            const message = `The size of the Accessor you are trying to take exceeds the byte length left in the BufferView.
BufferView.byteLength: ${this.byteLength}, BufferView.takenSizeInByte: ${this.__takenByte}, Accessor.byteStride: ${byteStride}, Accessor.count: ${count};
byteSizeToTake: ${actualByteStride * count}, the byte length left in the Buffer: ${this.byteLength - this.__takenByte}`;
            // console.error(message);
            return new _misc__WEBPACK_IMPORTED_MODULE_1__.Err({
                message,
                error: undefined,
            });
        }
        const accessor = new _Accessor__WEBPACK_IMPORTED_MODULE_0__.Accessor({
            bufferView: this,
            byteOffsetInBufferView: byteOffsetInBufferView,
            compositionType,
            componentType,
            byteStride,
            count,
            raw: this.__raw,
            max,
            min,
            arrayLength,
            normalized,
        });
        this.__accessors.push(accessor);
        this.__takenByte += actualByteStride * count;
        return new _misc__WEBPACK_IMPORTED_MODULE_1__.Ok(accessor);
    }
    __takeAccessorInnerWithByteOffset({ compositionType, componentType, count, byteStride, byteOffsetInBufferView, max, min, normalized, }) {
        // Each accessor MUST fit its bufferView, i.e.,
        // accessor.byteOffset + EFFECTIVE_BYTE_STRIDE * (accessor.count - 1) + SIZE_OF_COMPONENT * NUMBER_OF_COMPONENTS
        // See: https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#data-alignment
        if (this.__takenByte + byteStride * (count - 1) + componentType.getSizeInBytes() * compositionType.getNumberOfComponents() > this.byteLength) {
            const message = `The size of the Accessor you are trying to take exceeds the byte length left in the BufferView.
BufferView.byteLength: ${this.byteLength}, BufferView.takenSizeInByte: ${this.__takenByte}, Accessor.byteStride: ${byteStride}, Accessor.count: ${count};
byteSizeToTake: ${byteStride * count}, the byte length left in the Buffer: ${this.byteLength - this.__takenByte}`;
            return new _misc__WEBPACK_IMPORTED_MODULE_1__.Err({
                message,
                error: undefined,
            });
        }
        const accessor = new _Accessor__WEBPACK_IMPORTED_MODULE_0__.Accessor({
            bufferView: this,
            byteOffsetInBufferView,
            compositionType,
            componentType,
            byteStride,
            count,
            raw: this.__raw,
            max,
            min,
            arrayLength: 1,
            normalized,
        });
        this.__accessors.push(accessor);
        return new _misc__WEBPACK_IMPORTED_MODULE_1__.Ok(accessor);
    }
    isSame(rnBufferView) {
        return (this.byteLength === rnBufferView.byteLength &&
            this.byteOffsetInRawArrayBufferOfBuffer ===
                rnBufferView.byteOffsetInRawArrayBufferOfBuffer &&
            this.defaultByteStride === rnBufferView.defaultByteStride &&
            this.buffer.getArrayBuffer() === rnBufferView.buffer.getArrayBuffer());
    }
}


/***/ }),

/***/ "./src/foundation/memory/index.ts":
/*!****************************************!*\
  !*** ./src/foundation/memory/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Accessor": () => (/* reexport safe */ _Accessor__WEBPACK_IMPORTED_MODULE_0__.Accessor),
/* harmony export */   "Buffer": () => (/* reexport safe */ _Buffer__WEBPACK_IMPORTED_MODULE_1__.Buffer),
/* harmony export */   "BufferView": () => (/* reexport safe */ _BufferView__WEBPACK_IMPORTED_MODULE_2__.BufferView)
/* harmony export */ });
/* harmony import */ var _Accessor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Accessor */ "./src/foundation/memory/Accessor.ts");
/* harmony import */ var _Buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Buffer */ "./src/foundation/memory/Buffer.ts");
/* harmony import */ var _BufferView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BufferView */ "./src/foundation/memory/BufferView.ts");





/***/ }),

/***/ "./src/foundation/misc/DataUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/misc/DataUtil.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DataUtil": () => (/* binding */ DataUtil)
/* harmony export */ });
/* harmony import */ var _RnPromise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RnPromise */ "./src/foundation/misc/RnPromise.ts");

class DataUtil {
    static isNode() {
        const isNode = window === void 0 &&
            typeof process !== 'undefined' &&
            "function" !== 'undefined';
        return isNode;
    }
    static btoa(str) {
        const isNode = DataUtil.isNode();
        if (isNode) {
            let buffer;
            if (Buffer.isBuffer(str)) {
                buffer = str;
            }
            else {
                buffer = Buffer.from(str.toString(), 'binary');
            }
            return buffer.toString('base64');
        }
        else {
            return btoa(str);
        }
    }
    static atob(str) {
        const isNode = DataUtil.isNode();
        if (isNode) {
            return Buffer.from(str, 'base64').toString('binary');
        }
        else {
            return atob(str);
        }
    }
    static dataUriToArrayBuffer(dataUri) {
        const splitDataUri = dataUri.split(',');
        const byteString = DataUtil.atob(splitDataUri[1]);
        const byteStringLength = byteString.length;
        const arrayBuffer = new ArrayBuffer(byteStringLength);
        const uint8Array = new Uint8Array(arrayBuffer);
        for (let i = 0; i < byteStringLength; i++) {
            uint8Array[i] = byteString.charCodeAt(i);
        }
        return arrayBuffer;
    }
    static arrayBufferToString(arrayBuffer) {
        if (typeof TextDecoder !== 'undefined') {
            const textDecoder = new TextDecoder();
            return textDecoder.decode(arrayBuffer);
        }
        else {
            const bytes = new Uint8Array(arrayBuffer);
            const result = this.uint8ArrayToStringInner(bytes);
            return result;
        }
    }
    static uint8ArrayToString(uint8Array) {
        if (typeof TextDecoder !== 'undefined') {
            const textDecoder = new TextDecoder();
            return textDecoder.decode(uint8Array);
        }
        else {
            const result = this.uint8ArrayToStringInner(uint8Array);
            return result;
        }
    }
    static stringToBase64(str) {
        let b64 = null;
        b64 = DataUtil.btoa(str);
        return b64;
    }
    static base64ToArrayBuffer(base64) {
        const binary_string = window.atob(base64);
        const len = binary_string.length;
        const bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes.buffer;
    }
    static UInt8ArrayToDataURL(uint8array, width, height) {
        const canvas = document.createElement('canvas');
        canvas.width = width;
        canvas.height = height;
        const ctx = canvas.getContext('2d');
        const imageData = ctx.createImageData(width, height);
        for (let i = 0; i < imageData.data.length; i += 4) {
            imageData.data[i + 0] =
                uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) +
                    (i % (4 * width)) +
                    0];
            imageData.data[i + 1] =
                uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) +
                    (i % (4 * width)) +
                    1];
            imageData.data[i + 2] =
                uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) +
                    (i % (4 * width)) +
                    2];
            imageData.data[i + 3] =
                uint8array[(height - Math.floor(i / (4 * width))) * (4 * width) +
                    (i % (4 * width)) +
                    3];
        }
        ctx.putImageData(imageData, 0, 0);
        canvas.remove();
        return canvas.toDataURL('image/png');
    }
    static loadResourceAsync(resourceUri, isBinary, resolveCallback, rejectCallback) {
        return new Promise((resolve, reject) => {
            const isNode = DataUtil.isNode();
            if (isNode) ;
            else {
                const xmlHttp = new XMLHttpRequest();
                if (isBinary) {
                    xmlHttp.onload = oEvent => {
                        let response = null;
                        if (isBinary) {
                            response = xmlHttp.response;
                        }
                        else {
                            response = xmlHttp.responseText;
                        }
                        resolveCallback(resolve, response);
                    };
                    xmlHttp.open('GET', resourceUri, true);
                    xmlHttp.responseType = 'arraybuffer';
                }
                else {
                    xmlHttp.onreadystatechange = () => {
                        if (xmlHttp.readyState === 4 &&
                            (Math.floor(xmlHttp.status / 100) === 2 || xmlHttp.status === 0)) {
                            let response = null;
                            if (isBinary) {
                                response = xmlHttp.response;
                            }
                            else {
                                response = xmlHttp.responseText;
                            }
                            resolveCallback(resolve, response);
                        }
                        else {
                            if (rejectCallback) {
                                rejectCallback(reject, xmlHttp.status);
                            }
                        }
                    };
                    xmlHttp.open('GET', resourceUri, true);
                }
                xmlHttp.send(null);
            }
        });
    }
    static toCRC32(str) {
        let crc = 0, x = 0, y = 0;
        const table = DataUtil.crc32table;
        crc = crc ^ -1;
        for (let i = 0, iTop = str.length; i < iTop; ++i) {
            y = (crc ^ str.charCodeAt(i)) & 0xff;
            x = '0x' + table[y];
            crc = (crc >>> 8) ^ x;
        }
        return (crc ^ -1) >>> 0;
    }
    static accessBinaryAsImage(bufferViewIndex, json, buffer, mimeType) {
        const uint8BufferView = this.takeBufferViewAsUint8Array(json, bufferViewIndex, buffer);
        return this.accessArrayBufferAsImage(uint8BufferView, mimeType);
    }
    static createBlobImageUriFromUint8Array(uint8Array, mimeType) {
        const blob = new Blob([uint8Array], { type: mimeType });
        const imageUrl = URL.createObjectURL(blob);
        return imageUrl;
    }
    static takeBufferViewAsUint8Array(json, bufferViewIndex, buffer) {
        var _a;
        const bufferViewJson = json.bufferViews[bufferViewIndex];
        let byteOffset = (_a = bufferViewJson.byteOffset) !== null && _a !== void 0 ? _a : 0;
        const byteLength = bufferViewJson.byteLength;
        let arrayBuffer = buffer;
        if (buffer instanceof Uint8Array) {
            arrayBuffer = buffer.buffer;
            byteOffset += buffer.byteOffset;
        }
        const uint8BufferView = new Uint8Array(arrayBuffer, byteOffset, byteLength);
        return uint8BufferView;
    }
    static accessArrayBufferAsImage(arrayBuffer, imageType) {
        const binaryData = this.uint8ArrayToStringInner(new Uint8Array(arrayBuffer));
        const imgSrc = this.getImageType(imageType);
        const dataUrl = imgSrc + DataUtil.btoa(binaryData);
        return dataUrl;
    }
    static uint8ArrayToStringInner(uint8) {
        const charCodeArray = new Array(uint8.byteLength);
        for (let i = 0; i < uint8.byteLength; i++) {
            charCodeArray[i] = uint8[i];
        }
        // the argument of String.fromCharCode has the limit of array length
        const constant = 1024;
        const divisionNumber = Math.ceil(charCodeArray.length / constant);
        let binaryData = '';
        for (let i = 0; i < divisionNumber; i++) {
            binaryData += String.fromCharCode.apply(this, charCodeArray.slice(i * constant, (i + 1) * constant));
        }
        return binaryData;
    }
    static getImageType(imageType) {
        let imgSrc = null;
        if (imageType === 'image/jpeg' ||
            imageType.toLowerCase() === 'jpg' ||
            imageType.toLowerCase() === 'jpeg') {
            imgSrc = 'data:image/jpeg;base64,';
        }
        else if (imageType === 'image/png' || imageType.toLowerCase() === 'png') {
            imgSrc = 'data:image/png;base64,';
        }
        else if (imageType === 'image/gif' || imageType.toLowerCase() === 'gif') {
            imgSrc = 'data:image/gif;base64,';
        }
        else if (imageType === 'image/bmp' || imageType.toLowerCase() === 'bmp') {
            imgSrc = 'data:image/bmp;base64,';
        }
        else {
            imgSrc = 'data:image/unknown;base64,';
        }
        return imgSrc;
    }
    static getMimeTypeFromExtension(extension) {
        let imgSrc = null;
        if (extension.toLowerCase() === 'jpg' ||
            extension.toLowerCase() === 'jpeg') {
            imgSrc = 'image/jpeg';
        }
        else if (extension.toLowerCase() === 'png') {
            imgSrc = 'image/png';
        }
        else if (extension.toLowerCase() === 'gif') {
            imgSrc = 'image/gif';
        }
        else if (extension.toLowerCase() === 'bmp') {
            imgSrc = 'image/bmp';
        }
        else {
            imgSrc = 'image/unknown';
        }
        return imgSrc;
    }
    static getExtension(fileName) {
        const splitted = fileName.split('.');
        const fileExtension = splitted[splitted.length - 1];
        return fileExtension;
    }
    static createUint8ArrayFromBufferViewInfo(json, bufferViewIndex, buffer) {
        var _a;
        const bufferViewJson = json.bufferViews[bufferViewIndex];
        let byteOffset = (_a = bufferViewJson.byteOffset) !== null && _a !== void 0 ? _a : 0;
        const byteLength = bufferViewJson.byteLength;
        let arrayBuffer = buffer;
        if (buffer instanceof Uint8Array) {
            arrayBuffer = buffer.buffer;
            byteOffset += buffer.byteOffset;
        }
        const uint8BufferView = new Uint8Array(arrayBuffer, byteOffset, byteLength);
        return uint8BufferView;
    }
    static createImageFromUri(uri, mimeType) {
        return new _RnPromise__WEBPACK_IMPORTED_MODULE_0__.RnPromise(resolve => {
            const img = new Image();
            img.crossOrigin = 'Anonymous';
            if (uri.match(/^blob:/) || uri.match(/^data:/)) {
                img.onload = () => {
                    resolve(img);
                };
                img.src = uri;
            }
            else {
                const load = (img, response) => {
                    const bytes = new Uint8Array(response);
                    const imageUri = DataUtil.createBlobImageUriFromUint8Array(bytes, mimeType);
                    img.onload = () => {
                        resolve(img);
                    };
                    img.src = imageUri;
                };
                const loadBinaryImage = () => {
                    const xhr = new XMLHttpRequest();
                    xhr.onreadystatechange = (function (_img) {
                        return function () {
                            if (xhr.readyState === 4 && xhr.status === 200) {
                                load(_img, xhr.response);
                            }
                        };
                    })(img);
                    xhr.open('GET', uri);
                    xhr.responseType = 'arraybuffer';
                    xhr.send();
                };
                loadBinaryImage();
            }
        });
    }
    static createDefaultGltfOptions() {
        const defaultOptions = {
            files: {
            //        "foo.gltf": content of file as ArrayBuffer,
            //        "foo.bin": content of file as ArrayBuffer,
            //        "boo.png": content of file as ArrayBuffer
            },
            loaderExtension: undefined,
            defaultMaterialHelperName: undefined,
            defaultMaterialHelperArgumentArray: [],
            statesOfElements: [
                {
                    targets: [],
                    states: {
                        enable: [
                        // 3042,  // BLEND
                        ],
                        functions: {
                        //"blendFuncSeparate": [1, 0, 1, 0],
                        },
                    },
                    isTransparent: true,
                    opacity: 1.0,
                    isTextureImageToLoadPreMultipliedAlpha: false,
                },
            ],
            tangentCalculationMode: 1,
            extendedJson: void 0, //   URI string / JSON Object / ArrayBuffer
        };
        return defaultOptions;
    }
    static fetchArrayBuffer(uri) {
        return new _RnPromise__WEBPACK_IMPORTED_MODULE_0__.RnPromise(resolve => {
            fetch(uri, { mode: 'cors' })
                .then(response => {
                response.arrayBuffer().then(arrayBuffer => {
                    resolve(arrayBuffer);
                });
            })
                .catch(err => {
                throw new Error('import error: ' + err);
            });
        });
    }
    static getResizedCanvas(image, maxSize) {
        const canvas = document.createElement('canvas');
        const potWidth = this.getNearestPowerOfTwo(image.width);
        const potHeight = this.getNearestPowerOfTwo(image.height);
        const aspect = potHeight / potWidth;
        let dstWidth = 0;
        let dstHeight = 0;
        if (potWidth > potHeight) {
            dstWidth = Math.min(potWidth, maxSize);
            dstHeight = dstWidth * aspect;
        }
        else {
            dstHeight = Math.min(potHeight, maxSize);
            dstWidth = dstHeight / aspect;
        }
        canvas.width = dstWidth;
        canvas.height = dstHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, dstWidth, dstHeight);
        return [canvas, dstWidth, dstHeight];
    }
    static detectTransparentPixelExistence(image, threshold = 1.0) {
        const dstWidth = image.width;
        const dstHeight = image.height;
        let ctx;
        let imageData;
        if (image instanceof ImageData) {
            imageData = image;
        }
        else if (image instanceof HTMLImageElement) {
            const canvas = document.createElement('canvas');
            ctx = canvas.getContext('2d');
            ctx.drawImage(image, 0, 0);
            imageData = ctx.getImageData(0, 0, dstWidth, dstHeight);
        }
        else {
            // must be HTMLCanvasHTML
            ctx = image.getContext('2d');
            ctx.drawImage(image, 0, 0);
            imageData = ctx.getImageData(0, 0, dstWidth, dstHeight);
        }
        for (let y = 0; y < dstHeight; y++) {
            for (let x = 0; x < dstWidth; x++) {
                const alpha = imageData.data[(x + y * dstWidth) * 4 + 3];
                if (alpha < threshold) {
                    return true;
                }
            }
        }
        return false;
    }
    /**
     * get a value nearest power of two.
     *
     * @param x texture size.
     * @returns a value nearest power of two.
     */
    static getNearestPowerOfTwo(x) {
        return Math.pow(2, Math.round(Math.log(x) / Math.LN2));
    }
    static calcPaddingBytes(originalByteLength, byteAlign) {
        if (originalByteLength % byteAlign !== 0) {
            const sizeToPadding = byteAlign - (originalByteLength % byteAlign);
            return sizeToPadding;
        }
        return 0;
    }
    static addPaddingBytes(originalByteLength, byteAlign) {
        return (originalByteLength + this.calcPaddingBytes(originalByteLength, byteAlign));
    }
    static normalizedInt8ArrayToFloat32Array(from) {
        const float32Array = new Float32Array(from.length);
        for (let i = 0; i < from.length; i++) {
            float32Array[i] = Math.max(from[i] / 127.0, -1.0);
        }
        return float32Array;
    }
    static normalizedUint8ArrayToFloat32Array(from) {
        const float32Array = new Float32Array(from.length);
        for (let i = 0; i < from.length; i++) {
            float32Array[i] = from[i] / 255.0;
        }
        return float32Array;
    }
    static normalizedInt16ArrayToFloat32Array(from) {
        const float32Array = new Float32Array(from.length);
        for (let i = 0; i < from.length; i++) {
            float32Array[i] = Math.max(from[i] / 32767.0, -1.0);
        }
        return float32Array;
    }
    static normalizedUint16ArrayToFloat32Array(from) {
        const float32Array = new Float32Array(from.length);
        for (let i = 0; i < from.length; i++) {
            float32Array[i] = from[i] / 65535.0;
        }
        return float32Array;
    }
    /**
     * get a copy of the src arraybuffer
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static getCopy({ src, srcByteOffset, copyByteLength, distByteOffset, }) {
        const dst = new ArrayBuffer(src.byteLength);
        const dist = new Uint8Array(dst, distByteOffset, copyByteLength);
        dist.set(new Uint8Array(src, srcByteOffset, copyByteLength));
        return dist.buffer;
    }
    /**
     * get a copy of the src arraybuffer
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static getCopyAs4Bytes({ src, srcByteOffset, copyByteLength, distByteOffset, }) {
        if (srcByteOffset % 4 !== 0 ||
            copyByteLength % 4 !== 0 ||
            distByteOffset % 4 !== 0) {
            throw new Error('Invalid byte align for 4bytes unit copy operation.');
        }
        const dst = new ArrayBuffer(src.byteLength);
        const dist = new Int32Array(dst, distByteOffset, copyByteLength / 4);
        dist.set(new Int32Array(src, srcByteOffset, copyByteLength / 4));
        return dist.buffer;
    }
    /**
     * get a copy of the src arraybuffer
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static copyArrayBuffer({ src, dist, srcByteOffset, copyByteLength, distByteOffset = 0, }) {
        const dst = new Uint8Array(dist, distByteOffset, copyByteLength);
        dst.set(new Uint8Array(src, srcByteOffset, copyByteLength));
        return dst.buffer;
    }
    /**
     * get a copy of the src arraybuffer
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static copyArrayBufferWithPadding({ src, dist, srcByteOffset, copyByteLength, distByteOffset, }) {
        const dst = new Uint8Array(dist, distByteOffset, copyByteLength);
        const byteDiff = src.byteLength - srcByteOffset - copyByteLength;
        if (byteDiff < 0) {
            dst.set(new Uint8Array(src, srcByteOffset, src.byteLength - srcByteOffset));
            const byteCount = -byteDiff;
            const paddingArrayBuffer = new Uint8Array(byteCount);
            dst.set(paddingArrayBuffer);
        }
        else {
            dst.set(new Uint8Array(src, srcByteOffset, copyByteLength));
        }
        return dst.buffer;
    }
    /**
     * get a copy of the src arraybuffer
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static copyArrayBufferAs4Bytes({ src, dist, srcByteOffset, copyByteLength, distByteOffset, }) {
        if (srcByteOffset % 4 !== 0 ||
            copyByteLength % 4 !== 0 ||
            distByteOffset % 4 !== 0) {
            throw new Error('Invalid byte align for 4bytes unit copy operation.');
        }
        const dst = new Int32Array(dist, distByteOffset, copyByteLength / 4);
        dst.set(new Int32Array(src, srcByteOffset, copyByteLength / 4));
        return dst.buffer;
    }
    /**
     * get a copy of the src arraybuffer with padding to be 4bytes aligined
     * @param param0 copy description
     * @returns copied memory as ArrayBuffer
     */
    static copyArrayBufferAs4BytesWithPadding({ src, dist, srcByteOffset, copyByteLength, distByteOffset, }) {
        const dst = new Int32Array(dist, distByteOffset, copyByteLength / 4);
        const byteDiff = src.byteLength - srcByteOffset - copyByteLength;
        if (byteDiff < 0) {
            dst.set(new Int32Array(src, srcByteOffset, (src.byteLength - srcByteOffset) / 4));
            const byteCount = -byteDiff;
            const paddingArrayBuffer = new Uint8Array(byteCount);
            dst.set(paddingArrayBuffer);
        }
        else {
            dst.set(new Int32Array(src, srcByteOffset, copyByteLength / 4));
        }
        return dst.buffer;
    }
    static stringToBuffer(src) {
        const enc = new TextEncoder();
        return enc.encode(src).buffer;
    }
}
DataUtil.crc32table = '00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D'.split(' ');


/***/ }),

/***/ "./src/foundation/misc/EnumIO.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/EnumIO.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EnumClass": () => (/* binding */ EnumClass),
/* harmony export */   "_from": () => (/* binding */ _from),
/* harmony export */   "_fromString": () => (/* binding */ _fromString),
/* harmony export */   "_fromStringCaseSensitively": () => (/* binding */ _fromStringCaseSensitively)
/* harmony export */ });
// This code idea is from https://qiita.com/junkjunctions/items/5a6d8bed8df8eb3acceb
class EnumClass {
    constructor({ index, str, noCheckStrUnique, }) {
        if (EnumClass.__indices.get(this.constructor) == null) {
            EnumClass.__indices.set(this.constructor, []);
        }
        if (EnumClass.__strings.get(this.constructor) == null) {
            EnumClass.__strings.set(this.constructor, []);
        }
        if (EnumClass.__indices.get(this.constructor).indexOf(index) !== -1) {
            throw new Error('Dont use duplicate index.');
        }
        if (noCheckStrUnique !== true) {
            if (EnumClass.__strings.get(this.constructor).indexOf(str) !== -1) {
                throw new Error('Dont use duplicate str.');
            }
        }
        this.index = index;
        this.str = str;
        this.symbol = Symbol(str);
        EnumClass.__indices.get(this.constructor).push(index);
        EnumClass.__strings.get(this.constructor).push(str);
    }
    toString() {
        return this.str;
    }
    toJSON() {
        return this.index;
    }
}
EnumClass.__indices = new Map();
EnumClass.__strings = new Map();
function _from({ typeList, index, }) {
    const match = typeList.find(type => type.index === index);
    if (!match) {
        return void 0;
    }
    return match;
}
function _fromString({ typeList, str, }) {
    const match = typeList.find(type => type.str.toLowerCase() === str.toLowerCase());
    if (!match) {
        return void 0;
    }
    return match;
}
function _fromStringCaseSensitively({ typeList, str, }) {
    const match = typeList.find(type => type.str === str);
    if (!match) {
        return void 0;
    }
    return match;
}


/***/ }),

/***/ "./src/foundation/misc/ImageUtil.ts":
/*!******************************************!*\
  !*** ./src/foundation/misc/ImageUtil.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ImageUtil": () => (/* binding */ ImageUtil)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_ColorRgb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math/ColorRgb */ "./src/foundation/math/ColorRgb.ts");
/* harmony import */ var _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableVector2 */ "./src/foundation/math/MutableVector2.ts");
/* harmony import */ var _textures_TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../textures/TextureDataFloat */ "./src/foundation/textures/TextureDataFloat.ts");







// These codes are from https://eheitzresearch.wordpress.com/738-2/
// "Procedural Stochastic Textures by Tiling and Blending"
// Thanks to the authors for permission to use.
//
// Compute the eigen vectors of the histogram of the input image
function computeEigenVectors(input, eigenVectors) {
    // First and second order moments
    let R = 0, G = 0, B = 0, RR = 0, GG = 0, BB = 0, RG = 0, RB = 0, GB = 0;
    for (let y = 0; y < input.height; y++) {
        for (let x = 0; x < input.width; x++) {
            const col = input.getPixelAs(x, y, 3, _math_ColorRgb__WEBPACK_IMPORTED_MODULE_4__.ColorRgb);
            R += col.x;
            G += col.y;
            B += col.z;
            RR += col.x * col.x;
            GG += col.y * col.y;
            BB += col.z * col.z;
            RG += col.x * col.y;
            RB += col.x * col.z;
            GB += col.y * col.z;
        }
    }
    const inputImagePixelsNumber = input.width * input.height;
    R /= inputImagePixelsNumber;
    G /= inputImagePixelsNumber;
    B /= inputImagePixelsNumber;
    RR /= inputImagePixelsNumber;
    GG /= inputImagePixelsNumber;
    BB /= inputImagePixelsNumber;
    RG /= inputImagePixelsNumber;
    RB /= inputImagePixelsNumber;
    GB /= inputImagePixelsNumber;
    // Covariance matrix
    const covarMat = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_1__.MutableMatrix33.zero();
    covarMat.m00 = RR - R * R;
    covarMat.m01 = RG - R * G;
    covarMat.m02 = RB - R * B;
    covarMat.m10 = RG - R * G;
    covarMat.m11 = GG - G * G;
    covarMat.m12 = GB - G * B;
    covarMat.m20 = RB - R * B;
    covarMat.m21 = GB - G * B;
    covarMat.m22 = BB - B * B;
    // Find eigen values and vectors using Jacobi algorithm
    const eigenVectorsTemp = _math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_1__.MutableMatrix33.zero();
    const eigenValuesTemp = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero();
    _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.computeEigenValuesAndVectors(covarMat, eigenVectorsTemp, eigenValuesTemp);
    // Set return values
    eigenVectors[0] = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([
        eigenVectorsTemp.m00,
        eigenVectorsTemp.m10,
        eigenVectorsTemp.m20,
    ]);
    eigenVectors[1] = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([
        eigenVectorsTemp.m01,
        eigenVectorsTemp.m11,
        eigenVectorsTemp.m21,
    ]);
    eigenVectors[2] = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([
        eigenVectorsTemp.m02,
        eigenVectorsTemp.m12,
        eigenVectorsTemp.m22,
    ]);
}
function decorrelateColorSpace(input, // input: example image
input_decorrelated, // output: decorrelated input
colorSpaceVector1, // output: color space vector1
colorSpaceVector2, // output: color space vector2
colorSpaceVector3, // output: color space vector3
colorSpaceOrigin) {
    // output: color space origin
    // Compute the eigenvectors of the histogram
    const eigenvectors = [
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero(),
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero(),
        _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero(),
    ];
    computeEigenVectors(input, eigenvectors);
    // Rotate to eigenvector space and
    for (let y = 0; y < input.height; y++)
        for (let x = 0; x < input.width; x++)
            for (let channel = 0; channel < 3; ++channel) {
                // Get current color
                const color = input.getPixelAs(x, y, 3, _math_ColorRgb__WEBPACK_IMPORTED_MODULE_4__.ColorRgb);
                // Project on eigenvector
                const new_channel_value = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.dot(color, eigenvectors[channel]);
                // Store
                input_decorrelated.setPixelAtChannel(x, y, channel, new_channel_value);
            }
    // Compute ranges of the new color space
    const colorSpaceRanges = [
        _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__.MutableVector2.fromCopyArray2([Number.MAX_VALUE, -Number.MAX_VALUE]),
        _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__.MutableVector2.fromCopyArray2([Number.MAX_VALUE, -Number.MAX_VALUE]),
        _math_MutableVector2__WEBPACK_IMPORTED_MODULE_5__.MutableVector2.fromCopyArray2([Number.MAX_VALUE, -Number.MAX_VALUE]),
    ];
    for (let y = 0; y < input.height; y++) {
        for (let x = 0; x < input.width; x++) {
            for (let channel = 0; channel < 3; ++channel) {
                colorSpaceRanges[channel].x = Math.min(colorSpaceRanges[channel].x, input_decorrelated.getPixelAsArray(x, y)[channel]);
                colorSpaceRanges[channel].y = Math.max(colorSpaceRanges[channel].y, input_decorrelated.getPixelAsArray(x, y)[channel]);
            }
        }
    }
    // Remap range to [0, 1]
    for (let y = 0; y < input.height; y++) {
        for (let x = 0; x < input.width; x++) {
            for (let channel = 0; channel < 3; ++channel) {
                // Get current value
                const value = input_decorrelated.getPixelAsArray(x, y)[channel];
                // Remap in [0, 1]
                const remapped_value = (value - colorSpaceRanges[channel].x) /
                    (colorSpaceRanges[channel].y - colorSpaceRanges[channel].x);
                // Store
                input_decorrelated.setPixelAtChannel(x, y, channel, remapped_value);
            }
        }
    }
    // Compute color space origin and vectors scaled for the normalized range
    colorSpaceOrigin.x =
        colorSpaceRanges[0].x * eigenvectors[0].x +
            colorSpaceRanges[1].x * eigenvectors[1].x +
            colorSpaceRanges[2].x * eigenvectors[2].x;
    colorSpaceOrigin.y =
        colorSpaceRanges[0].x * eigenvectors[0].y +
            colorSpaceRanges[1].x * eigenvectors[1].y +
            colorSpaceRanges[2].x * eigenvectors[2].y;
    colorSpaceOrigin.z =
        colorSpaceRanges[0].x * eigenvectors[0].z +
            colorSpaceRanges[1].x * eigenvectors[1].z +
            colorSpaceRanges[2].x * eigenvectors[2].z;
    colorSpaceVector1.x =
        eigenvectors[0].x * (colorSpaceRanges[0].y - colorSpaceRanges[0].x);
    colorSpaceVector1.y =
        eigenvectors[0].y * (colorSpaceRanges[0].y - colorSpaceRanges[0].x);
    colorSpaceVector1.z =
        eigenvectors[0].z * (colorSpaceRanges[0].y - colorSpaceRanges[0].x);
    colorSpaceVector2.x =
        eigenvectors[1].x * (colorSpaceRanges[1].y - colorSpaceRanges[1].x);
    colorSpaceVector2.y =
        eigenvectors[1].y * (colorSpaceRanges[1].y - colorSpaceRanges[1].x);
    colorSpaceVector2.z =
        eigenvectors[1].z * (colorSpaceRanges[1].y - colorSpaceRanges[1].x);
    colorSpaceVector3.x =
        eigenvectors[2].x * (colorSpaceRanges[2].y - colorSpaceRanges[2].x);
    colorSpaceVector3.y =
        eigenvectors[2].y * (colorSpaceRanges[2].y - colorSpaceRanges[2].x);
    colorSpaceVector3.z =
        eigenvectors[2].z * (colorSpaceRanges[2].y - colorSpaceRanges[2].x);
}
// Compute average subpixel variance at a given LOD
function computeLODAverageSubpixelVariance(image, LOD, channel) {
    // Window width associated with
    const windowWidth = 1 << LOD;
    // Compute average variance in all the windows
    let average_window_variance = 0.0;
    // Loop over al the windows
    for (let window_y = 0; window_y < image.height; window_y += windowWidth) {
        for (let window_x = 0; window_x < image.width; window_x += windowWidth) {
            // Estimate variance of current window
            let v = 0.0;
            let v2 = 0.0;
            for (let y = 0; y < windowWidth; y++) {
                for (let x = 0; x < windowWidth; x++) {
                    const value = image.getPixel(window_x + x, window_y + y, channel);
                    v += value;
                    v2 += value * value;
                }
            }
            v /= windowWidth * windowWidth;
            v2 /= windowWidth * windowWidth;
            const window_variance = Math.max(0.0, v2 - v * v);
            // Update average
            average_window_variance +=
                window_variance /
                    ((image.width * image.height) / windowWidth / windowWidth);
        }
    }
    return average_window_variance;
}
// Filter LUT by sampling a Gaussian N(mu, std)
function filterLUTValueAtx(LUT, x, std, channel, LUT_WIDTH = 128) {
    // Number of samples for filtering (heuristic: twice the LUT resolution)
    const numberOfSamples = 2 * LUT_WIDTH;
    // Filter
    let filtered_value = 0.0;
    for (let sample = 0; sample < numberOfSamples; sample++) {
        // Quantile used to sample the Gaussian
        const U = (sample + 0.5) / numberOfSamples;
        // Sample the Gaussian
        const sample_x = _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.invGaussianCdf(U, x, std);
        // Find sample texel in LUT (the LUT covers the domain [0, 1])
        const sample_texel = Math.max(0, Math.min(LUT_WIDTH - 1, Math.floor(sample_x * LUT_WIDTH)));
        // Fetch LUT at level 0
        const sample_value = LUT.getPixelAsArray(sample_texel, 0)[channel];
        // Accumulate
        filtered_value += sample_value;
    }
    // Normalize and return
    filtered_value /= numberOfSamples;
    return filtered_value;
}
function prefilterLUT(image_T_Input, LUT_Tinv, channel) {
    // Prefilter
    for (let LOD = 1; LOD < LUT_Tinv.height; LOD++) {
        // Compute subpixel variance at LOD
        const window_variance = computeLODAverageSubpixelVariance(image_T_Input, LOD, channel);
        const window_std = Math.sqrt(window_variance);
        // Prefilter LUT with Gaussian kernel of this variance
        for (let i = 0; i < LUT_Tinv.width; i++) {
            // Texel position in [0, 1]
            const x_texel = (i + 0.5) / LUT_Tinv.width;
            // Filter look-up table around this position with Gaussian kernel
            const filteredValue = filterLUTValueAtx(LUT_Tinv, x_texel, window_std, channel);
            // Store filtered value
            LUT_Tinv.setPixelAtChannel(i, LOD, channel, filteredValue);
        }
    }
}
function generatePixelSortTypeArray(arrayLength) {
    const array = [];
    for (let i = 0; i < arrayLength; i++) {
        array.push({});
    }
    return array;
}
function computeTinput(input, T_input, channel, GAUSSIAN_AVERAGE = 0.5, GAUSSIAN_STD = 0.16666) {
    // Sort pixels of example image
    const sortedInputValues = generatePixelSortTypeArray(input.height * input.width);
    for (let y = 0; y < input.height; y++) {
        for (let x = 0; x < input.width; x++) {
            sortedInputValues[y * input.width + x].x = x;
            sortedInputValues[y * input.width + x].y = y;
            sortedInputValues[y * input.width + x].value = input.getPixel(x, y, channel);
        }
    }
    sortedInputValues.sort((a, b) => {
        if (a.value < b.value)
            return -1;
        if (a.value > b.value)
            return 1;
        return 0;
    });
    // Assign Gaussian value to each pixel
    for (let i = 0; i < sortedInputValues.length; i++) {
        // Pixel coordinates
        const x = sortedInputValues[i].x;
        const y = sortedInputValues[i].y;
        // Input quantile (given by its order in the sorting)
        const U = (i + 0.5) / sortedInputValues.length;
        // Gaussian quantile
        const G = _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.invGaussianCdf(U, GAUSSIAN_AVERAGE, GAUSSIAN_STD);
        // Store
        T_input.setPixelAtChannel(x, y, channel, G);
    }
}
function computeInvT(input, Tinv, channel, GAUSSIAN_AVERAGE = 0.5, GAUSSIAN_STD = 0.16666) {
    // Sort pixels of example image
    const sortedInputValues = [];
    for (let y = 0; y < input.height; y++) {
        for (let x = 0; x < input.width; x++) {
            sortedInputValues[y * input.width + x] = input.getPixel(x, y, channel);
        }
    }
    sortedInputValues.sort((a, b) => {
        if (a < b)
            return -1;
        if (a > b)
            return 1;
        return 0;
    });
    // Generate Tinv look-up table
    for (let i = 0; i < Tinv.width; i++) {
        // Gaussian value in [0, 1]
        const G = (i + 0.5) / Tinv.width;
        // Quantile value
        const U = _math_MathUtil__WEBPACK_IMPORTED_MODULE_2__.MathUtil.gaussianCdf(G, GAUSSIAN_AVERAGE, GAUSSIAN_STD);
        // Find quantile in sorted pixel values
        const index = Math.floor(U * sortedInputValues.length);
        // Get input value
        const I = sortedInputValues[index];
        // Store in LUT
        Tinv.setPixelAtChannel(i, 0, channel, I);
    }
}
function precomputations(input, // input: example image
LUT_WIDTH = 128) {
    const retVal = {};
    retVal.lutWidth = LUT_WIDTH;
    retVal.colorSpaceVector1 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero();
    retVal.colorSpaceVector2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero();
    retVal.colorSpaceVector3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero();
    retVal.colorSpaceOrigin = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_3__.MutableVector3.zero();
    // Section 1.4 Improvement: using a decorrelated color space
    //	const input_decorrelated:AbstractTexture = TextureDataFloat(input.width, input.height, 3);
    const input_decorrelated = new _textures_TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__.TextureDataFloat(input.width, input.height, 3);
    decorrelateColorSpace(input, input_decorrelated, retVal.colorSpaceVector1, retVal.colorSpaceVector2, retVal.colorSpaceVector3, retVal.colorSpaceOrigin);
    // Section 1.3.2 Applying the histogram transformation T on the input
    //Tinput = TextureDataFloat(input.width, input.height, 3);
    const Tinput = new _textures_TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__.TextureDataFloat(input.width, input.height, 3);
    retVal.Tinput = Tinput;
    for (let channel = 0; channel < 3; channel++) {
        computeTinput(input_decorrelated, Tinput, channel);
    }
    // Section 1.3.3 Precomputing the inverse histogram transformation T^{-1}
    const Tinv = new _textures_TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__.TextureDataFloat(LUT_WIDTH, 1, 3);
    retVal.Tinv = Tinv;
    for (let channel = 0; channel < 3; channel++) {
        computeInvT(input_decorrelated, Tinv, channel);
    }
    // Section 1.5 Improvement: prefiltering the look-up table
    // Compute number of prefiltered levels and resize LUT
    Tinv.resize(Tinv.width, Math.floor(Math.log(Tinput.width) / Math.log(2.0)), 3);
    for (let channel = 0; channel < 3; channel++) {
        prefilterLUT(Tinput, Tinv, channel);
    }
    return retVal;
}
const ImageUtil = Object.freeze({ precomputations });


/***/ }),

/***/ "./src/foundation/misc/Is.ts":
/*!***********************************!*\
  !*** ./src/foundation/misc/Is.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Is": () => (/* binding */ Is),
/* harmony export */   "IsObj": () => (/* binding */ IsObj)
/* harmony export */ });
/* eslint-disable prefer-spread */
/* eslint-disable prefer-rest-params */
/* eslint-disable @typescript-eslint/no-unused-vars */
// Inspired by https://github.com/enricomarino/is
const IsObj = {
    defined(val, ...args) {
        return val !== void 0;
    },
    undefined(val, ...args) {
        return val === void 0;
    },
    null(val, ...args) {
        return val === null;
    },
    // is NOT null or undefined
    exist(val, ...args) {
        return val !== null && val !== undefined;
    },
    function(val, ...args) {
        return typeof val === 'function';
    },
    true(val, ...args) {
        return val === true;
    },
    false(val, ...args) {
        return val === false;
    },
    stringContaining(thisStr, queryStr) {
        return thisStr.indexOf(queryStr) !== -1;
    },
};
const Derivatives = {
    not(fn) {
        return function () {
            return fn.apply(null, [...arguments]);
        };
    },
    all(fn) {
        return function () {
            if (Array.isArray(arguments[0])) {
                return arguments[0].every(fn);
            }
            return [...arguments].every(fn);
        };
    },
    any(fn) {
        return function () {
            if (Array.isArray(arguments[0])) {
                return arguments[0].some(fn);
            }
            return [...arguments].some(fn);
        };
    },
};
const NotObj = {
    defined(val, ...args) {
        return val === void 0;
    },
    undefined(val, ...args) {
        return val !== void 0;
    },
    null(val, ...args) {
        return val !== null;
    },
    exist(val, ...args) {
        return val === null || val === undefined;
    },
    function(val, ...args) {
        return typeof val !== 'function';
    },
    true(val, ...args) {
        return val !== true;
    },
    false(val, ...args) {
        return val !== false;
    },
};
// Add derivatives to the IsObj
for (const subFn in Derivatives) {
    if (Object.prototype.hasOwnProperty.call(Derivatives, subFn)) {
        IsObj[subFn] = {};
        for (const fn in IsObj) {
            if (Object.prototype.hasOwnProperty.call(IsObj, fn)) {
                if (subFn === 'not') {
                    IsObj[subFn][fn] = Derivatives[subFn](NotObj[fn]);
                }
                else {
                    IsObj[subFn][fn] = Derivatives[subFn](IsObj[fn]);
                }
            }
        }
    }
}
const Is = IsObj;


/***/ }),

/***/ "./src/foundation/misc/MiscUtil.ts":
/*!*****************************************!*\
  !*** ./src/foundation/misc/MiscUtil.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MiscUtil": () => (/* binding */ MiscUtil),
/* harmony export */   "addLineNumberToCode": () => (/* binding */ addLineNumberToCode),
/* harmony export */   "assertExist": () => (/* binding */ assertExist),
/* harmony export */   "deepCopyUsingJsonStringify": () => (/* binding */ deepCopyUsingJsonStringify),
/* harmony export */   "defaultValue": () => (/* binding */ defaultValue),
/* harmony export */   "downloadArrayBuffer": () => (/* binding */ downloadArrayBuffer),
/* harmony export */   "downloadTypedArray": () => (/* binding */ downloadTypedArray),
/* harmony export */   "greaterThan": () => (/* binding */ greaterThan),
/* harmony export */   "ifDefinedThen": () => (/* binding */ ifDefinedThen),
/* harmony export */   "ifDefinedThenWithReturn": () => (/* binding */ ifDefinedThenWithReturn),
/* harmony export */   "ifExistsThen": () => (/* binding */ ifExistsThen),
/* harmony export */   "ifExistsThenWithReturn": () => (/* binding */ ifExistsThenWithReturn),
/* harmony export */   "ifNotExistsThen": () => (/* binding */ ifNotExistsThen),
/* harmony export */   "ifNotExistsThenWithReturn": () => (/* binding */ ifNotExistsThenWithReturn),
/* harmony export */   "ifUndefinedThen": () => (/* binding */ ifUndefinedThen),
/* harmony export */   "ifUndefinedThenWithReturn": () => (/* binding */ ifUndefinedThenWithReturn),
/* harmony export */   "lessThan": () => (/* binding */ lessThan),
/* harmony export */   "nullishToEmptyArray": () => (/* binding */ nullishToEmptyArray),
/* harmony export */   "nullishToEmptyMap": () => (/* binding */ nullishToEmptyMap),
/* harmony export */   "valueWithCompensation": () => (/* binding */ valueWithCompensation),
/* harmony export */   "valueWithDefault": () => (/* binding */ valueWithDefault)
/* harmony export */ });
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Is */ "./src/foundation/misc/Is.ts");

const isMobileVr = function () {
    return /(Pacific Build.+OculusBrowser.+SamsungBrowser.+)|(SamsungBrowser)|(Mobile VR)/i.test(window.navigator.userAgent);
};
const isMobile = function () {
    const ua = [
        'iPod',
        'iPad',
        'iPhone',
        'Android',
    ];
    for (let i = 0; i < ua.length; i++) {
        if (navigator.userAgent.indexOf(ua[i]) > 0) {
            return true;
        }
    }
    return isIPad();
};
const isSafari = function () {
    const toBe = 'Safari';
    const noToBe = 'Chrome';
    if (navigator.userAgent.indexOf(toBe) > 0 &&
        navigator.userAgent.indexOf(noToBe) === -1) {
        return true;
    }
    return false;
};
const isIOS = function () {
    const ua = [
        'iPod',
        'iPad',
        'iPhone',
    ];
    for (let i = 0; i < ua.length; i++) {
        if (navigator.userAgent.indexOf(ua[i]) > 0) {
            return true;
        }
    }
    return isIPad();
};
const isIPad = function () {
    return (navigator.userAgent.indexOf('Macintosh') > -1 && 'ontouchend' in document);
};
const preventDefaultForDesktopOnly = function (e) {
    if (!isMobile()) {
        e.preventDefault();
    }
};
const isObject = function (o) {
    return o instanceof Object && !(o instanceof Array) ? true : false;
};
// https://stackoverflow.com/questions/30003353/can-es6-template-literals-be-substituted-at-runtime-or-reused
const fillTemplate = function (templateString, templateVars) {
    return new Function('return `' + templateString + '`;').call(templateVars);
};
const isNode = function () {
    return typeof process !== 'undefined' && "function" !== 'undefined';
};
const concatArrayBuffers = function (segments, sizes, offsets, finalSize) {
    let sumLength = 0;
    for (let i = 0; i < sizes.length; ++i) {
        sumLength += sizes[i];
    }
    let whole;
    if (finalSize != null) {
        whole = new Uint8Array(finalSize);
    }
    else {
        whole = new Uint8Array(sumLength);
    }
    const getExceededSize = (sizeToAdd) => {
        if (finalSize != null && offsetOfBase + sizeToAdd > finalSize) {
            return offsetOfBase + sizeToAdd - finalSize;
        }
        else {
            return 0;
        }
    };
    let offsetOfBase = 0;
    const addData = (sizeToAdd, i) => {
        const exceededSize = getExceededSize(sizeToAdd);
        if (exceededSize) {
            whole.set(new Uint8Array(segments[i], offsets[i], exceededSize), offsetOfBase);
            offsetOfBase += exceededSize;
            return true;
        }
        else {
            whole.set(new Uint8Array(segments[i], offsets[i], sizeToAdd), offsetOfBase);
            offsetOfBase += sizeToAdd;
            return false;
        }
    };
    const addOverSizeData = (overSize) => {
        const exceededSize = getExceededSize(overSize);
        if (exceededSize) {
            whole.set(new Uint8Array(exceededSize), offsetOfBase);
            offsetOfBase += exceededSize;
            return true;
        }
        else {
            whole.set(new Uint8Array(overSize), offsetOfBase);
            offsetOfBase += overSize;
            return false;
        }
    };
    for (let i = 0; i < segments.length; ++i) {
        const delta = sizes[i] + offsets[i] - segments[i].byteLength;
        const overSize = delta > 0 ? delta : 0;
        const sizeToAdd = sizes[i] - overSize;
        if (addData(sizeToAdd, i)) {
            return whole.buffer;
        }
        if (overSize > 0) {
            if (addOverSizeData(overSize)) {
                return whole.buffer;
            }
        }
    }
    if (finalSize != null && offsetOfBase < finalSize) {
        whole.set(new Uint8Array(finalSize - offsetOfBase), offsetOfBase);
    }
    return whole.buffer;
};
const concatArrayBuffers2 = ({ finalSize, srcs, srcsOffset, srcsCopySize, }) => {
    const dstBuf = new Uint8Array(new ArrayBuffer(finalSize));
    let copiedSize = 0;
    for (const i in srcs) {
        const src = srcs[i];
        const srcBuf = new Uint8Array(src, srcsOffset[i], srcsCopySize[i]);
        dstBuf.set(srcBuf, copiedSize);
        copiedSize += srcsCopySize[i];
    }
    return dstBuf.buffer;
};
const valueWithDefault = ({ value, defaultValue, }) => {
    // eslint-disable-next-line eqeqeq
    if (value == null) {
        return defaultValue;
    }
    return value;
};
const ifExistsThen = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value)) {
        callback(value);
        return true;
    }
    return false;
};
const ifExistsThenWithReturn = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value)) {
        return callback(value);
    }
    return value;
};
const ifDefinedThen = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value)) {
        callback(value);
        return true;
    }
    return false;
};
const ifDefinedThenWithReturn = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value)) {
        return callback(value);
    }
    return value;
};
const ifUndefinedThen = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.undefined(value)) {
        callback();
        return false;
    }
    return true;
};
const ifUndefinedThenWithReturn = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.undefined(value)) {
        return callback();
    }
    return value;
};
const ifNotExistsThen = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.undefined(value)) {
        callback();
    }
};
const ifNotExistsThenWithReturn = (callback, value) => {
    if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.undefined(value)) {
        return callback();
    }
    return value;
};
const defaultValue = (defaultValue, value) => {
    // eslint-disable-next-line eqeqeq
    if (value == null) {
        return defaultValue;
    }
    return value;
};
const valueWithCompensation = ({ value, compensation, }) => {
    // eslint-disable-next-line eqeqeq
    if (value == null) {
        return compensation();
    }
    return value;
};
const nullishToEmptyArray = (value) => {
    // eslint-disable-next-line eqeqeq
    if (value == null) {
        return [];
    }
    return value;
};
const nullishToEmptyMap = (value) => {
    // eslint-disable-next-line eqeqeq
    if (value == null) {
        return new Map();
    }
    return value;
};
const greaterThan = (it, than) => {
    if (it > than) {
        return { result: true, greater: it, less: than };
    }
    else {
        return { result: false, greater: than, less: it };
    }
};
const lessThan = (it, than) => {
    if (it < than) {
        return { result: true, greater: than, less: it };
    }
    else {
        return { result: false, greater: it, less: than };
    }
};
const addLineNumberToCode = (shaderString) => {
    const shaderTextLines = shaderString.split(/\r\n|\r|\n/);
    let shaderTextWithLineNumber = '';
    for (let i = 0; i < shaderTextLines.length; i++) {
        const lineIndex = i + 1;
        let splitter = ' : ';
        if (lineIndex < 10) {
            splitter = '  : ';
        }
        else if (lineIndex >= 100) {
            splitter = ': ';
        }
        shaderTextWithLineNumber +=
            lineIndex + splitter + shaderTextLines[i] + '\n';
    }
    return shaderTextWithLineNumber;
};
function assertExist(val) {
    if (val === undefined || val === null) {
        throw new Error(`Expected 'val' to be existed, but received ${val}`);
    }
}
function deepCopyUsingJsonStringify(obj) {
    return JSON.parse(JSON.stringify(obj));
}
function downloadArrayBuffer(fileNameToDownload, arrayBuffer) {
    const a = document.createElement('a');
    a.download = fileNameToDownload;
    const blob = new Blob([arrayBuffer], { type: 'octet/stream' });
    const url = URL.createObjectURL(blob);
    a.href = url;
    const e = new MouseEvent('click');
    a.dispatchEvent(e);
    URL.revokeObjectURL(url);
}
function downloadTypedArray(fileNameToDownload, typedArray) {
    const a = document.createElement('a');
    a.download = fileNameToDownload;
    const blob = new Blob([typedArray], { type: 'octet/stream' });
    const url = URL.createObjectURL(blob);
    a.href = url;
    const e = new MouseEvent('click');
    a.dispatchEvent(e);
    URL.revokeObjectURL(url);
}
const MiscUtil = Object.freeze({
    isMobileVr,
    isMobile,
    isIOS,
    isSafari,
    preventDefaultForDesktopOnly,
    isObject,
    fillTemplate,
    isNode,
    concatArrayBuffers,
    concatArrayBuffers2,
    addLineNumberToCode,
    downloadArrayBuffer,
    downloadTypedArray,
});


/***/ }),

/***/ "./src/foundation/misc/Option.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/Option.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "None": () => (/* binding */ None),
/* harmony export */   "Option": () => (/* binding */ Option),
/* harmony export */   "Some": () => (/* binding */ Some)
/* harmony export */ });
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Is */ "./src/foundation/misc/Is.ts");

// Inspired from https://scleapt.com/typescript_option/
/**
 * An interface for handling values whose existence is uncertain.
 */
const errorStr = 'The value does not exist!';
class Option {
    constructor(value) {
        this.value = value;
    }
    set(val) {
        this.value = val;
    }
    then(f) {
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value) ? f(this.value) : new None();
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrDefault(altValue) {
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value) ? this.value : altValue;
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrElse(f) {
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value) ? this.value : f();
    }
    /**
     * @returns
     */
    unwrapForce() {
        if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value)) {
            return this.value;
        }
        else {
            throw new ReferenceError(errorStr);
        }
    }
    unwrapOrUndefined() {
        if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value)) {
            return this.value;
        }
        else {
            return undefined;
        }
    }
    has() {
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(this.value);
    }
}
/**
 * a class indicating that the included value exists.
 */
class Some {
    constructor(value) {
        this.value = value;
    }
    then(f) {
        return f(this.value);
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrDefault(altValue) {
        return this.value;
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrElse(f) {
        return this.value;
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapForce() {
        return this.value;
    }
    unwrapOrUndefined() {
        return this.value;
    }
    has() {
        return true;
    }
}
/**
 * a class indicating no existence.
 */
class None {
    then() {
        return this;
    }
    unwrapOrDefault(value) {
        return value;
    }
    unwrapOrElse(f) {
        return f(undefined);
    }
    unwrapForce() {
        throw new ReferenceError(errorStr);
    }
    unwrapOrUndefined() {
        return undefined;
    }
    has() {
        return false;
    }
}


/***/ }),

/***/ "./src/foundation/misc/Result.ts":
/*!***************************************!*\
  !*** ./src/foundation/misc/Result.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Err": () => (/* binding */ Err),
/* harmony export */   "Finalizer": () => (/* binding */ Finalizer),
/* harmony export */   "Ok": () => (/* binding */ Ok),
/* harmony export */   "RnException": () => (/* binding */ RnException)
/* harmony export */ });
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Is */ "./src/foundation/misc/Is.ts");

class Result {
    constructor(val) {
        this.val = val;
    }
    match(obj) {
        if (this instanceof Ok) {
            obj.Ok(this.val);
        }
        else if (this instanceof Err) {
            obj.Err(this.val);
        }
        if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(obj.Finally)) {
            obj.Finally();
        }
    }
    name() {
        return this.constructor.name;
    }
}
/**
 * a class indicating that the result is Ok (Succeeded).
 */
class Ok extends Result {
    constructor(val) {
        super(val);
    }
    /**
     * This method is essentially same to the Ok::and_then() in Rust language
     * @param f
     */
    then(f) {
        f(this.val);
        return new Finalizer();
    }
    unwrap(catchFn) {
        return this.val;
    }
    unwrapForce() {
        return this.val;
    }
    catch(f) { }
    true() {
        return true;
    }
    isOk() {
        return true;
    }
    get() {
        return this.val;
    }
}
/**
 * a class indicating that the result is Error (Failed).
 */
class Err extends Result {
    constructor(val) {
        super(val);
        this.__rnException = new RnException(this.val);
    }
    then(f) { }
    catch(f) {
        f(this.val);
        return new Finalizer();
    }
    unwrap(catchFn) {
        catchFn(this.val);
    }
    unwrapForce() {
        throw this.__rnException;
    }
    false() {
        return false;
    }
    isOk() {
        return false;
    }
    get() {
        return this.val;
    }
}
class Finalizer {
    finally(f) {
        f();
    }
}
class RnException extends Error {
    constructor(err) {
        super(err.message);
        this.err = err;
        this.name = RnException._prefix;
    }
    getRnError() {
        return this.err;
    }
}
RnException._prefix = 'Rhodonite Exception';


/***/ }),

/***/ "./src/foundation/misc/RnPromise.ts":
/*!******************************************!*\
  !*** ./src/foundation/misc/RnPromise.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RnPromise": () => (/* binding */ RnPromise)
/* harmony export */ });
class RnPromise extends Promise {
    constructor(arg) {
        super((resolve, reject) => { });
        this.name = '';
        this.__callbackObj = {
            promiseAllNum: 0,
            resolvedNum: 0,
            rejectedNum: 0,
            pendingNum: 0,
            processedPromises: [],
        };
        if (arg instanceof Promise) {
            this.__promise = arg;
        }
        else {
            this.__promise = new Promise(arg);
        }
    }
    static resolve(arg) {
        if (arg instanceof Promise) {
            return new RnPromise(arg);
        }
        else if (arg instanceof RnPromise) {
            return arg;
        }
        else if (arg.then != null) {
            const rnPromise = new RnPromise((resolve, reject) => {
                resolve(arg);
            });
            rnPromise.then = arg.then;
            return rnPromise;
        }
        else {
            return new RnPromise((resolve, reject) => {
                resolve(arg);
            });
        }
    }
    static all(promises, callback) {
        if (callback) {
            const rnPromises = [];
            const callbackObj = {
                promiseAllNum: promises.length,
                resolvedNum: 0,
                rejectedNum: 0,
                pendingNum: promises.length,
                processedPromises: [],
            };
            for (const promise of promises) {
                const rnPromise = RnPromise.resolve(promise);
                rnPromise.__callback = callback;
                rnPromise.__callbackObj = callbackObj;
                rnPromises.push(rnPromise);
            }
            return new RnPromise(Promise.all(rnPromises));
        }
        else {
            return new RnPromise(Promise.all(promises));
        }
    }
    static race(args) {
        return new RnPromise(Promise.race(args));
    }
    then(onfulfilled, onrejected) {
        let onFulfilledWrapper;
        if (onfulfilled) {
            onFulfilledWrapper = (value) => {
                if (this.__callbackObj.promiseAllNum !== 0 &&
                    this.__callbackObj.processedPromises.indexOf(this) === -1) {
                    this.__callbackObj.pendingNum--;
                    this.__callbackObj.resolvedNum++;
                    this.__callbackObj.processedPromises.push(this);
                }
                if (this.__callback) {
                    this.__callback(this.__callbackObj);
                }
                return onfulfilled(value);
            };
        }
        return this.__promise.then(onFulfilledWrapper, onrejected);
    }
    catch(onRejected) {
        return new RnPromise(this.__promise.catch(onRejected));
    }
    finally(onFinally) {
        return this.__promise.finally(onFinally);
    }
    static reject(e) {
        return new RnPromise(Promise.reject(e));
    }
}


/***/ }),

/***/ "./src/foundation/misc/Time.ts":
/*!*************************************!*\
  !*** ./src/foundation/misc/Time.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Time": () => (/* binding */ Time)
/* harmony export */ });
class Time {
    /**
     * @private
     */
    static _processBegin() {
        if (Time.__currentProcessBeginTime === 0) {
            Time.__systemStartTime = performance.now();
        }
        Time.__currentProcessBeginTime = performance.now();
    }
    /**
     * @private
     */
    static _processEnd() {
        Time.__lastProcessEndTime = performance.now();
        Time.__lastTickTimeInterval =
            Time.__lastProcessEndTime - Time.__currentProcessBeginTime;
    }
    static get timeFromSystemStart() {
        return Time.__systemStartTime - performance.now() / 1000;
    }
    static get lastTickTimeInterval() {
        return Time.__lastTickTimeInterval / 1000;
    }
}
Time.__currentProcessBeginTime = 0;
Time.__lastProcessEndTime = 0;
Time.__lastTickTimeInterval = 0;
Time.__systemStartTime = 0;


/***/ }),

/***/ "./src/foundation/misc/WeakOption.ts":
/*!*******************************************!*\
  !*** ./src/foundation/misc/WeakOption.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeakNone": () => (/* binding */ WeakNone),
/* harmony export */   "WeakOption": () => (/* binding */ WeakOption),
/* harmony export */   "WeakSome": () => (/* binding */ WeakSome)
/* harmony export */ });
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Is */ "./src/foundation/misc/Is.ts");

// Inspired from https://scleapt.com/typescript_option/
/**
 * An interface for handling values whose existence is uncertain.
 */
const errorStr = 'The value does not exist!';
class WeakOption {
    constructor() {
        this.__weakMap = new WeakMap();
    }
    set(base, val) {
        this.__weakMap.set(base, val);
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrDefault(base, altValue) {
        const value = this.__weakMap.get(base);
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value) ? value : altValue;
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrElse(base, f) {
        const value = this.__weakMap.get(base);
        return _Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value) ? value : f();
    }
    /**
     * @returns
     */
    unwrapForce(base) {
        const value = this.__weakMap.get(base);
        if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(value)) {
            return value;
        }
        else {
            throw new ReferenceError(errorStr);
        }
    }
    unwrapOrUndefined(base) {
        return this.__weakMap.get(base);
    }
    has(base) {
        return this.__weakMap.has(base);
    }
}
/**
 * a class indicating that the included value exists.
 */
class WeakSome {
    constructor(base, value) {
        this.__weakMap = new WeakMap();
        this.__weakMap.set(base, value);
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrDefault(base, altValue) {
        return this.__weakMap.get(base);
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapOrElse(base, f) {
        return this.__weakMap.get(base);
    }
    /**
     * @param altValue
     * @returns
     */
    unwrapForce(base) {
        return this.__weakMap.get(base);
    }
    get(base) {
        return this.__weakMap.get(base);
    }
    unwrapOrUndefined(base) {
        return this.__weakMap.get(base);
    }
    has(base) {
        return true;
    }
}
/**
 * a class indicating no existence.
 */
class WeakNone {
    then() {
        return this;
    }
    unwrapOrDefault(base, value) {
        return value;
    }
    unwrapOrElse(base, f) {
        return f(undefined);
    }
    unwrapForce(base) {
        throw new ReferenceError(errorStr);
    }
    unwrapOrUndefined(base) {
        return undefined;
    }
    has() {
        return false;
    }
}


/***/ }),

/***/ "./src/foundation/misc/cache/Cache.ts":
/*!********************************************!*\
  !*** ./src/foundation/misc/cache/Cache.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cache": () => (/* binding */ Cache)
/* harmony export */ });
/* harmony import */ var _SymbolWeakMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SymbolWeakMap */ "./src/foundation/misc/cache/SymbolWeakMap.ts");

class Cache {
    constructor() {
        this.__symbolWeakMap = new _SymbolWeakMap__WEBPACK_IMPORTED_MODULE_0__.SymbolWeakMap();
    }
    register(value) {
        this.__symbolWeakMap.set(Symbol(), value);
    }
}


/***/ }),

/***/ "./src/foundation/misc/cache/SymbolWeakMap.ts":
/*!****************************************************!*\
  !*** ./src/foundation/misc/cache/SymbolWeakMap.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SymbolWeakMap": () => (/* binding */ SymbolWeakMap)
/* harmony export */ });
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Is */ "./src/foundation/misc/Is.ts");

class SymbolWeakMap {
    constructor() {
        this.__weakMap = new WeakMap();
    }
    /**
     * set key and value
     * @param symbol the key for access
     * @param value the value as a cache item
     * @returns true: succeed to set value, false: not set (already exists)
     */
    set(symbol, value) {
        const isExist = this.__weakMap.has(symbol);
        if (isExist) {
            return false;
        }
        else {
            this.__weakMap.set(symbol, value);
            return true;
        }
    }
    /**
     * return the boolean value whether it have the key or not
     * @param symbol the key for access
     * @returns Whether it have the key or not.
     */
    has(symbol) {
        const isExist = this.__weakMap.has(symbol);
        if (isExist) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * return the number of this cache items
     * @returns the number of this cache items
     */
    // public size(): number {
    //   return this.__weakMap.size;
    // }
    /**
     * return the value in the cache by the key
     * @param symbol the key for access
     * @returns the value in the cache by the key
     */
    get(symbol) {
        const keyObj = this.__weakMap.get(symbol);
        if (_Is__WEBPACK_IMPORTED_MODULE_0__.Is.not.exist(keyObj)) {
            return undefined;
        }
        const val = this.__weakMap.get(symbol);
        return val;
    }
    /**
     * delete the value
     * @param symbol the key for access
     * @returns the flag of the deletion was succeed or not
     */
    delete(symbol) {
        const isExist = this.__weakMap.has(symbol);
        if (!isExist) {
            return false;
        }
        this.__weakMap.delete(symbol);
        return true;
    }
}


/***/ }),

/***/ "./src/foundation/misc/cache/cachify.ts":
/*!**********************************************!*\
  !*** ./src/foundation/misc/cache/cachify.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "objectCachify": () => (/* binding */ objectCachify),
/* harmony export */   "primitiveCachify1": () => (/* binding */ primitiveCachify1)
/* harmony export */ });
/**
 * This is from : https://github.com/threepointone/glamor/blob/667b480d31b3721a905021b26e1290ce92ca2879/docs/weakmaps.md#so-what-does-a-cache-built-with-a-weakmap-look-like
 * Thank you!
 */
/**
 * Return the caching wrapper function
 * @param fn the target function for caching result
 * @returns
 */
const objectCachify = (fn) => {
    const cache = new WeakMap();
    return (arg) => {
        if (cache.has(arg)) {
            return cache.get(arg);
        }
        const value = fn(arg);
        cache.set(arg, value);
        return value;
    };
};
/**
 * Return the caching wrapper function
 * @param fn the target function for caching result
 * @returns
 */
const primitiveCachify1 = (fn) => {
    const cache = new Map();
    return (arg) => {
        if (cache.has(arg)) {
            return cache.get(arg);
        }
        const value = fn(arg);
        cache.set(arg, value);
        return value;
    };
};


/***/ }),

/***/ "./src/foundation/misc/cache/index.ts":
/*!********************************************!*\
  !*** ./src/foundation/misc/cache/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cache": () => (/* reexport safe */ _Cache__WEBPACK_IMPORTED_MODULE_0__.Cache),
/* harmony export */   "SymbolWeakMap": () => (/* reexport safe */ _SymbolWeakMap__WEBPACK_IMPORTED_MODULE_2__.SymbolWeakMap),
/* harmony export */   "objectCachify": () => (/* reexport safe */ _cachify__WEBPACK_IMPORTED_MODULE_1__.objectCachify),
/* harmony export */   "primitiveCachify1": () => (/* reexport safe */ _cachify__WEBPACK_IMPORTED_MODULE_1__.primitiveCachify1)
/* harmony export */ });
/* harmony import */ var _Cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Cache */ "./src/foundation/misc/cache/Cache.ts");
/* harmony import */ var _cachify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cachify */ "./src/foundation/misc/cache/cachify.ts");
/* harmony import */ var _SymbolWeakMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SymbolWeakMap */ "./src/foundation/misc/cache/SymbolWeakMap.ts");





/***/ }),

/***/ "./src/foundation/misc/index.ts":
/*!**************************************!*\
  !*** ./src/foundation/misc/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Cache": () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.Cache),
/* harmony export */   "DataUtil": () => (/* reexport safe */ _DataUtil__WEBPACK_IMPORTED_MODULE_1__.DataUtil),
/* harmony export */   "EnumClass": () => (/* reexport safe */ _EnumIO__WEBPACK_IMPORTED_MODULE_2__.EnumClass),
/* harmony export */   "Err": () => (/* reexport safe */ _Result__WEBPACK_IMPORTED_MODULE_7__.Err),
/* harmony export */   "Finalizer": () => (/* reexport safe */ _Result__WEBPACK_IMPORTED_MODULE_7__.Finalizer),
/* harmony export */   "ImageUtil": () => (/* reexport safe */ _ImageUtil__WEBPACK_IMPORTED_MODULE_3__.ImageUtil),
/* harmony export */   "Is": () => (/* reexport safe */ _Is__WEBPACK_IMPORTED_MODULE_4__.Is),
/* harmony export */   "IsObj": () => (/* reexport safe */ _Is__WEBPACK_IMPORTED_MODULE_4__.IsObj),
/* harmony export */   "MiscUtil": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.MiscUtil),
/* harmony export */   "None": () => (/* reexport safe */ _Option__WEBPACK_IMPORTED_MODULE_6__.None),
/* harmony export */   "Ok": () => (/* reexport safe */ _Result__WEBPACK_IMPORTED_MODULE_7__.Ok),
/* harmony export */   "Option": () => (/* reexport safe */ _Option__WEBPACK_IMPORTED_MODULE_6__.Option),
/* harmony export */   "RnException": () => (/* reexport safe */ _Result__WEBPACK_IMPORTED_MODULE_7__.RnException),
/* harmony export */   "RnPromise": () => (/* reexport safe */ _RnPromise__WEBPACK_IMPORTED_MODULE_8__.RnPromise),
/* harmony export */   "Some": () => (/* reexport safe */ _Option__WEBPACK_IMPORTED_MODULE_6__.Some),
/* harmony export */   "SymbolWeakMap": () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.SymbolWeakMap),
/* harmony export */   "Time": () => (/* reexport safe */ _Time__WEBPACK_IMPORTED_MODULE_9__.Time),
/* harmony export */   "WeakNone": () => (/* reexport safe */ _WeakOption__WEBPACK_IMPORTED_MODULE_10__.WeakNone),
/* harmony export */   "WeakOption": () => (/* reexport safe */ _WeakOption__WEBPACK_IMPORTED_MODULE_10__.WeakOption),
/* harmony export */   "WeakSome": () => (/* reexport safe */ _WeakOption__WEBPACK_IMPORTED_MODULE_10__.WeakSome),
/* harmony export */   "_from": () => (/* reexport safe */ _EnumIO__WEBPACK_IMPORTED_MODULE_2__._from),
/* harmony export */   "_fromString": () => (/* reexport safe */ _EnumIO__WEBPACK_IMPORTED_MODULE_2__._fromString),
/* harmony export */   "_fromStringCaseSensitively": () => (/* reexport safe */ _EnumIO__WEBPACK_IMPORTED_MODULE_2__._fromStringCaseSensitively),
/* harmony export */   "addLineNumberToCode": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.addLineNumberToCode),
/* harmony export */   "assertExist": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.assertExist),
/* harmony export */   "deepCopyUsingJsonStringify": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.deepCopyUsingJsonStringify),
/* harmony export */   "defaultValue": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.defaultValue),
/* harmony export */   "downloadArrayBuffer": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.downloadArrayBuffer),
/* harmony export */   "downloadTypedArray": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.downloadTypedArray),
/* harmony export */   "greaterThan": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.greaterThan),
/* harmony export */   "ifDefinedThen": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifDefinedThen),
/* harmony export */   "ifDefinedThenWithReturn": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifDefinedThenWithReturn),
/* harmony export */   "ifExistsThen": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifExistsThen),
/* harmony export */   "ifExistsThenWithReturn": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifExistsThenWithReturn),
/* harmony export */   "ifNotExistsThen": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifNotExistsThen),
/* harmony export */   "ifNotExistsThenWithReturn": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifNotExistsThenWithReturn),
/* harmony export */   "ifUndefinedThen": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifUndefinedThen),
/* harmony export */   "ifUndefinedThenWithReturn": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.ifUndefinedThenWithReturn),
/* harmony export */   "lessThan": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.lessThan),
/* harmony export */   "nullishToEmptyArray": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.nullishToEmptyArray),
/* harmony export */   "nullishToEmptyMap": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.nullishToEmptyMap),
/* harmony export */   "objectCachify": () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.objectCachify),
/* harmony export */   "primitiveCachify1": () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.primitiveCachify1),
/* harmony export */   "valueWithCompensation": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.valueWithCompensation),
/* harmony export */   "valueWithDefault": () => (/* reexport safe */ _MiscUtil__WEBPACK_IMPORTED_MODULE_5__.valueWithDefault)
/* harmony export */ });
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache */ "./src/foundation/misc/cache/index.ts");
/* harmony import */ var _DataUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _EnumIO__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EnumIO */ "./src/foundation/misc/EnumIO.ts");
/* harmony import */ var _ImageUtil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ImageUtil */ "./src/foundation/misc/ImageUtil.ts");
/* harmony import */ var _Is__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _MiscUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _Option__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Option */ "./src/foundation/misc/Option.ts");
/* harmony import */ var _Result__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Result */ "./src/foundation/misc/Result.ts");
/* harmony import */ var _RnPromise__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RnPromise */ "./src/foundation/misc/RnPromise.ts");
/* harmony import */ var _Time__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Time */ "./src/foundation/misc/Time.ts");
/* harmony import */ var _WeakOption__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./WeakOption */ "./src/foundation/misc/WeakOption.ts");













/***/ }),

/***/ "./src/foundation/physics/PhysicsStrategy.ts":
/*!***************************************************!*\
  !*** ./src/foundation/physics/PhysicsStrategy.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/physics/SphereCollider.ts":
/*!**************************************************!*\
  !*** ./src/foundation/physics/SphereCollider.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SphereCollider": () => (/* binding */ SphereCollider)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");

class SphereCollider {
    constructor() {
        this.position = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
        this.radius = 0;
    }
}


/***/ }),

/***/ "./src/foundation/physics/VRMColliderGroup.ts":
/*!****************************************************!*\
  !*** ./src/foundation/physics/VRMColliderGroup.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMColliderGroup": () => (/* binding */ VRMColliderGroup)
/* harmony export */ });
class VRMColliderGroup {
    constructor() {
        this.colliders = [];
    }
}


/***/ }),

/***/ "./src/foundation/physics/VRMSpringBoneGroup.ts":
/*!******************************************************!*\
  !*** ./src/foundation/physics/VRMSpringBoneGroup.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBoneGroup": () => (/* binding */ VRMSpringBoneGroup)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");


class VRMSpringBoneGroup extends _core_RnObject__WEBPACK_IMPORTED_MODULE_1__.RnObject {
    constructor() {
        super();
        this.stiffnessForce = 0.5;
        this.gravityPower = 0;
        this.gravityDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([0, -1.0, 0]);
        this.dragForce = 0.05;
        this.hitRadius = 0.02;
        this.rootBones = [];
        this.colliderGroupIndices = [];
    }
}


/***/ }),

/***/ "./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts":
/*!****************************************************************!*\
  !*** ./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VRMSpringBonePhysicsStrategy": () => (/* binding */ VRMSpringBonePhysicsStrategy)
/* harmony export */ });
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _misc_Time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/Time */ "./src/foundation/misc/Time.ts");
/* harmony import */ var _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");






class VRMSpringBonePhysicsStrategy {
    constructor() {
        this.__boneAxis = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
        this.__length = 0;
        this.__currentTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
        this.__prevTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
        this.__localDir = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
        this.__localRotation = _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.fromCopy4(0, 0, 0, 1);
        this.__initalized = false;
        this.__localChildPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.zero();
    }
    initialize(transform, localChildPosition, center) {
        this.__transform = transform;
        const worldChildPosition = transform.getWorldPositionOf(localChildPosition);
        this.__currentTail =
            center != null
                ? center.getLocalPositionOf(worldChildPosition)
                : worldChildPosition;
        this.__prevTail = this.__currentTail;
        this.__localRotation = transform.entity.getTransform().quaternion;
        this.__boneAxis = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(localChildPosition);
        // this.__boneAxis = Vector3.normalize(Vector3.subtract(this.__currentTail, transform.worldPosition));
        this.__length = localChildPosition.length();
        this.__localChildPosition = localChildPosition;
        this.__initalized = true;
    }
    get isInitialized() {
        return this.__initalized;
    }
    get head() {
        return this.__transform;
    }
    get tail() {
        _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiplyTo(this.__boneAxis, this.__length, VRMSpringBonePhysicsStrategy.__tmp_vec3);
        this.__transform.worldMatrixInner.multiplyVector3To(VRMSpringBonePhysicsStrategy.__tmp_vec3, VRMSpringBonePhysicsStrategy.__tmp_vec3_2);
        return VRMSpringBonePhysicsStrategy.__tmp_vec3_2;
    }
    get parentRotation() {
        // return (this.__transform!.parent != null) ? this.__transform!.parent!.entity.getTransform().quaternion : new Quaternion(0, 0, 0, 1);
        return this.__transform.parent != null
            ? _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.fromMatrix(this.__transform.parent.worldMatrixInner)
            : _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.fromCopy4(0, 0, 0, 1);
    }
    static update() {
        for (const boneGroup of this.__boneGroups) {
            this.updateInner(boneGroup.rootBones, boneGroup);
        }
    }
    static updateInner(sceneGraphs, boneGroup) {
        const dragForce = boneGroup.dragForce;
        const stiffnessForce = boneGroup.stiffnessForce * _misc_Time__WEBPACK_IMPORTED_MODULE_4__.Time.lastTickTimeInterval * 1;
        const external = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(boneGroup.gravityDir, boneGroup.gravityPower * _misc_Time__WEBPACK_IMPORTED_MODULE_4__.Time.lastTickTimeInterval * 1);
        const center = void 0;
        const collisionGroups = VRMSpringBonePhysicsStrategy.getColliderGroups(boneGroup.colliderGroupIndices);
        for (const sg of sceneGraphs) {
            const physicsComponent = sg.entity.tryToGetPhysics();
            if (physicsComponent) {
                const strategy = physicsComponent.strategy;
                strategy.update(stiffnessForce, dragForce, external, collisionGroups, boneGroup.hitRadius, center);
                const children = sg.children;
                if (children) {
                    this.updateInner(children, boneGroup);
                }
            }
        }
    }
    static initialize(sceneGraph) {
        const children = sceneGraph.children;
        const physicsComponent = sceneGraph.entity.tryToGetPhysics();
        const vrmSpringBone = physicsComponent.strategy;
        if (children.length > 0) {
            children[0].entity.getTransform();
            vrmSpringBone.initialize(sceneGraph, 
            //   new Vector3(
            //   transform.translate.x * transform.scale.x,
            //   transform.translate.y * transform.scale.y,
            //   transform.translate.z * transform.scale.z
            // ),
            _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__.Matrix44.invert(sceneGraph.worldMatrixInner).multiplyVector3(children[0].worldPosition), void 0);
        }
        else {
            const delta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(sceneGraph.worldPosition, sceneGraph.parent.worldPosition);
            let childPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.fromCopyArray([1, 1, 1]);
            if (delta.lengthSquared() > 0) {
                childPosition = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(sceneGraph.worldPosition, _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(delta), 0.07));
            }
            vrmSpringBone.initialize(sceneGraph, _math_Matrix44__WEBPACK_IMPORTED_MODULE_3__.Matrix44.invert(sceneGraph.worldMatrixInner).multiplyVector3(childPosition), void 0);
        }
    }
    calcParentDeltaRecursivle(sceneGraph) {
        _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(sceneGraph.worldPosition, sceneGraph.parent.worldPosition);
    }
    update(stiffnessForce, dragForce, external, collisionGroups, boneHitRadius, center) {
        const currentTail = center != null
            ? center.getWorldPositionOf(this.__currentTail)
            : this.__currentTail;
        const prevTail = center != null
            ? center.getWorldPositionOf(this.__prevTail)
            : this.__prevTail;
        const delta = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(currentTail, prevTail), 1.0 - dragForce);
        const tmpRotationQuat = VRMSpringBonePhysicsStrategy.__tmp_quat;
        _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.multiplyTo(this.parentRotation, this.__localRotation, tmpRotationQuat);
        const dist = VRMSpringBonePhysicsStrategy.__tmp_vec3;
        dist
            .copyComponents(this.__boneAxis)
            .multiplyQuaternion(tmpRotationQuat)
            .multiply(stiffnessForce);
        // const dist = Vector3.multiply((this.__localRotation).multiplyVector3(this.__boneAxis), stiffnessForce);
        // const dist = Vector3.zero();
        let nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(currentTail, delta), dist), external);
        const tmp = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(nextTail, this.__transform.worldPosition);
        nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(this.__transform.worldPosition, _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(tmp), this.__length));
        nextTail = this.collision(collisionGroups, nextTail, boneHitRadius);
        this.__prevTail =
            center != null ? center.getLocalPositionOf(currentTail) : currentTail;
        this.__currentTail =
            center != null ? center.getLocalPositionOf(nextTail) : nextTail;
        // const resultRotation = this.applyRotation(nextTail);
        // this.head.entity.getTransform().quaternion = resultRotation;
        // this.head.entity.getTransform().translate = this.__transform!.getLocalPositionOf(currentTail);
        if (this.head.children.length > 0) {
            // this.head.children[0].entity.getTransform().matrix = Matrix44.identity();
            this.head.children[0].entity.getTransform().translate =
                this.__transform.getLocalPositionOf(nextTail);
            // this.head.children[0].entity.getTransform().translate = Vector3.fromCopyArray([1, 0, 0]);
            // this.head.children[0].entity.getTransform().quaternion = resultRotation;
        }
        // VRMSpringBonePhysicsStrategy.initialize(this.__transform!);
    }
    applyRotation(nextTail) {
        // const rotation = Quaternion.multiply(this.parentRotation, this.__localRotation);
        const rotation = this.__localRotation;
        // const result = Quaternion.multiply(Quaternion.lookFromTo(rotation.multiplyVector3(this.__boneAxis), Vector3.subtract(nextTail, this.__transform!.worldPosition)), rotation);
        const result = _math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.multiply(_math_Quaternion__WEBPACK_IMPORTED_MODULE_2__.Quaternion.lookFromTo(this.__boneAxis, this.__transform.getLocalPositionOf(nextTail)), rotation);
        // const result = Quaternion.lookFromTo(this.__boneAxis, Vector3.subtract(nextTail, this.__transform!.worldPosition));
        // const result = Quaternion.lookFromTo(this.__boneAxis, this.__transform!.getLocalPositionOf(nextTail));
        // const delta = Vector3.subtract(nextTail, this.__transform!.worldPosition);
        this.__boneAxis;
        // const result = Quaternion.lookForward(Vector3.subtract(nextTail, this.__transform!.worldPosition));
        // const result = Quaternion.multiply(Quaternion.lookFromTo(rotation.multiplyVector3(this.__boneAxis), Vector3.normalize(delta)), this.__localRotation);
        // const result = new Quaternion(0,0,0,1);
        return result;
    }
    collision(collisionGroups, nextTail, boneHitRadius) {
        for (const collisionGroup of collisionGroups) {
            for (const collider of collisionGroup.colliders) {
                const worldColiderPos = collisionGroup.baseSceneGraph.getWorldPositionOf(collider.position);
                const r = boneHitRadius + collider.radius;
                const delta = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.subtract(nextTail, worldColiderPos);
                const deltaScalar = r - delta.length();
                if (deltaScalar >= 0) {
                    const normal = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.normalize(delta);
                    const resilienceVec = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.multiply(_math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(worldColiderPos, normal), deltaScalar);
                    nextTail = _math_Vector3__WEBPACK_IMPORTED_MODULE_0__.Vector3.add(nextTail, resilienceVec);
                    return nextTail;
                }
            }
        }
        return nextTail;
    }
    static setBoneGroups(sgs) {
        this.__boneGroups = sgs;
    }
    static addColliderGroup(index, group) {
        this.__colliderGroups.set(index, group);
    }
    static getColliderGroups(indices) {
        const colliderGroups = [];
        for (const index of indices) {
            colliderGroups.push(this.__colliderGroups.get(index));
        }
        return colliderGroups;
    }
}
VRMSpringBonePhysicsStrategy.__tmp_vec3 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
VRMSpringBonePhysicsStrategy.__tmp_vec3_2 = _math_MutableVector3__WEBPACK_IMPORTED_MODULE_1__.MutableVector3.zero();
VRMSpringBonePhysicsStrategy.__tmp_quat = _math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_5__.MutableQuaternion.identity();
VRMSpringBonePhysicsStrategy.__boneGroups = [];
VRMSpringBonePhysicsStrategy.__colliderGroups = new Map();


/***/ }),

/***/ "./src/foundation/physics/index.ts":
/*!*****************************************!*\
  !*** ./src/foundation/physics/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SphereCollider": () => (/* reexport safe */ _SphereCollider__WEBPACK_IMPORTED_MODULE_1__.SphereCollider),
/* harmony export */   "VRMColliderGroup": () => (/* reexport safe */ _VRMColliderGroup__WEBPACK_IMPORTED_MODULE_2__.VRMColliderGroup),
/* harmony export */   "VRMSpringBoneGroup": () => (/* reexport safe */ _VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_3__.VRMSpringBoneGroup),
/* harmony export */   "VRMSpringBonePhysicsStrategy": () => (/* reexport safe */ _VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_4__.VRMSpringBonePhysicsStrategy)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./PhysicsStrategy */ "./src/foundation/physics/PhysicsStrategy.ts");
/* harmony import */ var _SphereCollider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SphereCollider */ "./src/foundation/physics/SphereCollider.ts");
/* harmony import */ var _VRMColliderGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VRMColliderGroup */ "./src/foundation/physics/VRMColliderGroup.ts");
/* harmony import */ var _VRMSpringBoneGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./VRMSpringBoneGroup */ "./src/foundation/physics/VRMSpringBoneGroup.ts");
/* harmony import */ var _VRMSpringBonePhysicsStrategy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./VRMSpringBonePhysicsStrategy */ "./src/foundation/physics/VRMSpringBonePhysicsStrategy.ts");







/***/ }),

/***/ "./src/foundation/renderer/CGAPIResourceRepository.ts":
/*!************************************************************!*\
  !*** ./src/foundation/renderer/CGAPIResourceRepository.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CGAPIResourceRepository": () => (/* binding */ CGAPIResourceRepository)
/* harmony export */ });
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");

class CGAPIResourceRepository {
    static getWebGLResourceRepository() {
        const moduleName = 'webgl';
        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_0__.ModuleManager.getInstance();
        const webglModule = moduleManager.getModule(moduleName);
        const webGLResourceRepository = webglModule.WebGLResourceRepository.getInstance();
        return webGLResourceRepository;
    }
}
CGAPIResourceRepository.InvalidCGAPIResourceUid = -1;


/***/ }),

/***/ "./src/foundation/renderer/Expression.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/Expression.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Expression": () => (/* binding */ Expression)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");

/**
 * Expression specifies the order of render passes on rendering process.
 */
class Expression extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.__renderPasses = [];
    }
    clone() {
        const exp = new Expression();
        const renderPasses = [];
        for (const renderPass of this.__renderPasses) {
            renderPasses.push(renderPass.clone());
        }
        exp.addRenderPasses(renderPasses);
        return exp;
    }
    /**
     * Add render passes to the end of this expression.
     */
    addRenderPasses(renderPasses) {
        for (const renderPass of renderPasses) {
            this.__renderPasses.push(renderPass);
        }
    }
    /**
     * Clear render passes of this expression.
     */
    clearRenderPasses() {
        this.__renderPasses.length = 0;
    }
    /**
     * Gets the list of render passes of this expression.
     */
    get renderPasses() {
        return this.__renderPasses;
    }
    setViewport(viewport) {
        for (const renderPass of this.__renderPasses) {
            renderPass.setViewport(viewport);
        }
    }
}


/***/ }),

/***/ "./src/foundation/renderer/Frame.ts":
/*!******************************************!*\
  !*** ./src/foundation/renderer/Frame.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Frame": () => (/* binding */ Frame)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");


/**
 * Frame manages expressions and input/output dependencies between them
 */
class Frame extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.__expressions = [];
        this.__expressionQueries = [];
    }
    /**
     * Add render passes to the end of this expression.
     */
    addExpression(expression, { inputRenderPasses, outputs, } = {
        inputRenderPasses: [],
        outputs: [],
    }) {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(outputs)) {
            for (const output of outputs) {
                let renderPass = output.renderPass.instance;
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(output.renderPass.instance)) {
                    renderPass = output.renderPass.instance;
                }
                else if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(output.renderPass.index)) {
                    renderPass = expression.renderPasses[output.renderPass.index];
                }
                else if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(output.renderPass.uniqueName)) {
                    renderPass = _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject.getRnObjectByName(output.renderPass.uniqueName);
                }
                if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(renderPass)) {
                    renderPass.setFramebuffer(output.frameBuffer);
                }
            }
        }
        this.__expressions.push({
            expression,
            inputRenderPasses: _misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(inputRenderPasses) ? inputRenderPasses : [],
        });
    }
    /**
     * Get ColorAttachment RenderBuffer from input render pass of the expression
     * @param inputFrom input Expression
     * @param {inputIndex: number, colorAttachmentIndex: number} input RenderPass Index and ColorAttachmen tIndex
     * @returns {Promise<RenderTargetTexture>}
     */
    getColorAttachmentFromInputOf(inputFrom, renderPassArg = {
        renderPass: {
            index: 0,
        },
        colorAttachmentIndex: 0,
        framebufferType: Frame.FrameBuffer,
    }) {
        const promise = new Promise((resolve) => {
            function* generatorFunc() {
                const renderTargetTexture = (yield);
                resolve(renderTargetTexture);
                return renderTargetTexture;
            }
            const generator = generatorFunc();
            // register the generator
            this.__expressionQueries.push([
                inputFrom,
                renderPassArg.renderPass,
                renderPassArg.colorAttachmentIndex,
                generator,
                renderPassArg.framebufferType,
            ]);
        });
        return promise;
    }
    /**
     *
     */
    resolve() {
        for (const [exp, renderPassArg, colorAttachmentIndex, generator, frameBufferType] of this
            .__expressionQueries) {
            for (const expData of this.__expressions) {
                if (exp === expData.expression) {
                    let renderPassObj = renderPassArg.instance;
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(renderPassArg.instance)) {
                        renderPassObj = renderPassArg.instance;
                    }
                    else if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(renderPassArg.index)) {
                        renderPassObj = expData.inputRenderPasses[renderPassArg.index];
                    }
                    else if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(renderPassArg.uniqueName)) {
                        renderPassObj = _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject.getRnObjectByName(renderPassArg.uniqueName);
                    }
                    let framebuffer;
                    if (frameBufferType === 'ResolveFrameBuffer2') {
                        framebuffer = renderPassObj.getResolveFramebuffer2();
                    }
                    else if (frameBufferType === 'ResolveFrameBuffer') {
                        framebuffer = renderPassObj.getResolveFramebuffer();
                    }
                    else if (frameBufferType === 'FrameBuffer') {
                        framebuffer = renderPassObj.getFramebuffer();
                    }
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(framebuffer)) {
                        const renderTargetTexture = framebuffer.getColorAttachedRenderTargetTexture(colorAttachmentIndex);
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_1__.Is.exist(renderTargetTexture)) {
                            generator.next(renderTargetTexture);
                            generator.next(renderTargetTexture);
                        }
                    }
                }
            }
        }
    }
    /**
     * Clear render passes of this expression.
     */
    clearExpressions() {
        this.__expressions.length = 0;
    }
    /**
     * Get expressions
     */
    get expressions() {
        return this.__expressions.map(exp => exp.expression);
    }
    setViewport(viewport) {
        for (const exp of this.__expressions) {
            exp.expression.setViewport(viewport);
        }
    }
}
Frame.FrameBuffer = 'FrameBuffer';
Frame.ResolveFrameBuffer = 'ResolveFrameBuffer';
Frame.ResolveFrameBuffer2 = 'ResolveFrameBuffer2';


/***/ }),

/***/ "./src/foundation/renderer/FrameBuffer.ts":
/*!************************************************!*\
  !*** ./src/foundation/renderer/FrameBuffer.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FrameBuffer": () => (/* binding */ FrameBuffer)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/RenderBufferTarget */ "./src/foundation/definitions/RenderBufferTarget.ts");
/* harmony import */ var _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../textures/RenderTargetTexture */ "./src/foundation/textures/RenderTargetTexture.ts");




class FrameBuffer extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.__colorAttachments = [];
        this.cgApiResourceUid = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.width = 0;
        this.height = 0;
        this.__colorAttachmentMap = new Map();
    }
    get colorAttachmentsRenderBufferTargets() {
        return Array.from(this.__colorAttachmentMap.keys());
    }
    get colorAttachments() {
        return this.__colorAttachments;
    }
    get depthAttachment() {
        return this.__depthAttachment;
    }
    get stencilAttachment() {
        return this.__stencilAttachment;
    }
    get depthStencilAttachment() {
        return this.__depthStencilAttachment;
    }
    getColorAttachedRenderTargetTexture(index) {
        if (this.__colorAttachments[index] == null ||
            !(this.__colorAttachments[index] instanceof _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_3__.RenderTargetTexture)) {
            return undefined;
        }
        else {
            return this.__colorAttachments[index];
        }
    }
    getDepthAttachedRenderTargetTexture() {
        if (this.__depthAttachment instanceof _textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_3__.RenderTargetTexture) {
            return this.__depthAttachment;
        }
        else {
            return undefined;
        }
    }
    create(width, height) {
        this.width = width;
        this.height = height;
        const webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.cgApiResourceUid = webGLResourceRepository.createFrameBufferObject();
        return this.cgApiResourceUid;
    }
    get framebufferUID() {
        return this.cgApiResourceUid;
    }
    setColorAttachmentAt(index, renderable) {
        if (renderable.width !== this.width || renderable.height !== this.height) {
            return false;
        }
        this.__colorAttachments[index] = renderable;
        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.attachColorBufferToFrameBufferObject(this, index, renderable);
        this.__colorAttachmentMap.set(_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_2__.RenderBufferTarget.from(index), renderable);
        return true;
    }
    setDepthAttachment(renderable) {
        if (renderable.width !== this.width || renderable.height !== this.height) {
            return false;
        }
        this.__depthAttachment = renderable;
        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.attachDepthBufferToFrameBufferObject(this, renderable);
        return true;
    }
    setStencilAttachment(renderable) {
        if (renderable.width !== this.width || renderable.height !== this.height) {
            return false;
        }
        this.__stencilAttachment = renderable;
        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.attachStencilBufferToFrameBufferObject(this, renderable);
        return true;
    }
    setDepthStencilAttachment(renderable) {
        if (renderable.width !== this.width || renderable.height !== this.height) {
            return false;
        }
        this.__depthStencilAttachment = renderable;
        const webglResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.attachDepthStencilBufferToFrameBufferObject(this, renderable);
        return true;
    }
    resize(width, height) {
        // this.destroy3DAPIResources();
        const webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webGLResourceRepository.deleteFrameBufferObject(this.cgApiResourceUid);
        this.cgApiResourceUid = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.width = 0;
        this.height = 0;
        this.create(width, height);
        if (this.depthAttachment) {
            this.depthAttachment.resize(width, height);
            this.setDepthAttachment(this.depthAttachment);
        }
        if (this.depthStencilAttachment) {
            this.depthStencilAttachment.resize(width, height);
            this.setDepthStencilAttachment(this.depthStencilAttachment);
        }
        if (this.stencilAttachment) {
            this.stencilAttachment.resize(width, height);
            this.setStencilAttachment(this.stencilAttachment);
        }
        for (let i = 0; i < this.colorAttachments.length; i++) {
            this.colorAttachments[i].resize(width, height);
            this.setColorAttachmentAt(i, this.colorAttachments[i]);
        }
    }
    destroy3DAPIResources() {
        const webGLResourceRepository = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webGLResourceRepository.deleteFrameBufferObject(this.cgApiResourceUid);
        this.cgApiResourceUid = _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.width = 0;
        this.height = 0;
        if (this.depthAttachment) {
            this.depthAttachment.destroy3DAPIResources();
            this.__depthAttachment = undefined;
        }
        if (this.depthStencilAttachment) {
            this.depthStencilAttachment.destroy3DAPIResources();
            this.__depthStencilAttachment = undefined;
        }
        if (this.stencilAttachment) {
            this.stencilAttachment.destroy3DAPIResources();
            this.__stencilAttachment = undefined;
        }
        for (const colorAttachment of this.colorAttachments) {
            colorAttachment.destroy3DAPIResources();
        }
        this.__colorAttachmentMap = new Map();
    }
    whichColorAttachment(renderable) {
        return this.__colorAttachments.indexOf(renderable);
    }
}


/***/ }),

/***/ "./src/foundation/renderer/RenderPass.ts":
/*!***********************************************!*\
  !*** ./src/foundation/renderer/RenderPass.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderPass": () => (/* binding */ RenderPass)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/System */ "./src/foundation/system/System.ts");
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl/WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math/MutableVector4 */ "./src/foundation/math/MutableVector4.ts");
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");








/**
 * A render pass is a collection of the resources which is used in rendering process.
 */
class RenderPass extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.__entities = [];
        this.__sceneGraphDirectlyAdded = [];
        this.__topLevelSceneGraphComponents = [];
        this.toClearColorBuffer = false;
        this.toClearDepthBuffer = true;
        this.toClearStencilBuffer = false;
        this.isDepthTest = true;
        this.clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyArray([1, 1, 1, 1]);
        this.clearDepth = 1;
        this.clearStencil = 0;
        this.cullFrontFaceCCW = true;
        this.__primitiveMaterial = new Map();
        this.isVrRendering = true;
        this.isOutputForVr = false;
        this.toRenderOpaquePrimitives = true;
        this.toRenderTransparentPrimitives = true;
        this.toRenderEffekseerEffects = false;
    }
    clone() {
        var _a, _b, _c;
        const renderPass = new RenderPass();
        renderPass.__entities = this.__entities.concat();
        renderPass.__sceneGraphDirectlyAdded = this.__sceneGraphDirectlyAdded.concat();
        renderPass.__topLevelSceneGraphComponents = (_a = this.__topLevelSceneGraphComponents) === null || _a === void 0 ? void 0 : _a.concat();
        renderPass.__meshComponents = (_b = this.__meshComponents) === null || _b === void 0 ? void 0 : _b.concat();
        renderPass.__frameBuffer = this.__frameBuffer;
        renderPass.__resolveFrameBuffer = this.__resolveFrameBuffer;
        renderPass.__resolveFrameBuffer2 = this.__resolveFrameBuffer2;
        renderPass.__viewport = (_c = this.__viewport) === null || _c === void 0 ? void 0 : _c.clone();
        renderPass.toClearColorBuffer = this.toClearColorBuffer;
        renderPass.toClearDepthBuffer = this.toClearDepthBuffer;
        renderPass.toClearStencilBuffer = this.toClearStencilBuffer;
        renderPass.isDepthTest = this.isDepthTest;
        renderPass.clearColor = this.clearColor.clone();
        renderPass.clearDepth = this.clearDepth;
        renderPass.clearStencil = this.clearStencil;
        renderPass.cameraComponent = this.cameraComponent;
        renderPass.cullFrontFaceCCW = this.cullFrontFaceCCW;
        renderPass.__material = this.__material;
        renderPass.__primitiveMaterial = new Map(this.__primitiveMaterial);
        renderPass.__webglRenderingStrategy = this.__webglRenderingStrategy;
        renderPass.isVrRendering = this.isVrRendering;
        renderPass.isOutputForVr = this.isOutputForVr;
        renderPass.toRenderOpaquePrimitives = this.toRenderOpaquePrimitives;
        renderPass.toRenderTransparentPrimitives = this.toRenderTransparentPrimitives;
        renderPass.__preRenderFunc = this.__preRenderFunc;
        return renderPass;
    }
    setPreRenderFunction(func) {
        this.__preRenderFunc = func;
    }
    unsetPreRenderFunction() {
        this.__preRenderFunc = void 0;
    }
    doPreRender() {
        if (this.__preRenderFunc != null) {
            this.__preRenderFunc();
        }
    }
    /**
     * Add entities to draw.
     * @param entities An array of entities.
     */
    addEntities(entities) {
        for (const entity of entities) {
            const sceneGraphComponent = entity.getSceneGraph();
            this.__sceneGraphDirectlyAdded.push(sceneGraphComponent);
            const collectedSgComponents = _components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_1__.SceneGraphComponent.flattenHierarchy(sceneGraphComponent, false);
            const collectedEntities = collectedSgComponents.map((sg) => {
                return sg.entity;
            });
            // Eliminate duplicates
            const map = this.__entities
                .concat(collectedEntities)
                .reduce((map, entity) => {
                map.set(entity.entityUID, entity);
                return map;
            }, new Map());
            this.__entities = Array.from(map.values());
        }
        this.__meshComponents = void 0;
        this.__topLevelSceneGraphComponents = void 0;
        this.__collectMeshComponents();
        this.__collectTopLevelSceneGraphComponents();
    }
    /**
     * Gets the list of entities on this render pass.
     * @return An array of entities
     */
    get entities() {
        return this.__entities;
    }
    /**
     * Clear entities on this render pass.
     */
    clearEntities() {
        this.__meshComponents = void 0;
        this.__topLevelSceneGraphComponents = void 0;
        this.__entities = [];
    }
    __collectTopLevelSceneGraphComponents() {
        if (this.__topLevelSceneGraphComponents == null) {
            const goToTopLevel = (sg) => {
                if (sg.parent) {
                    goToTopLevel(sg.parent);
                }
                return sg;
            };
            this.__topLevelSceneGraphComponents = this.__sceneGraphDirectlyAdded.map((sg) => {
                return goToTopLevel(sg);
            });
            const set = new Set(this.__topLevelSceneGraphComponents);
            this.__topLevelSceneGraphComponents = Array.from(set);
        }
    }
    __collectMeshComponents() {
        if (this.__meshComponents == null) {
            this.__meshComponents = [];
            this.__entities.filter(entity => {
                const meshComponent = entity.getComponentByComponentTID(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_7__.WellKnownComponentTIDs.MeshComponentTID);
                if (meshComponent) {
                    this.__meshComponents.push(meshComponent);
                }
            });
        }
    }
    /**
     * Get all the MeshComponents list of the entities on this render pass.
     * @return An array of MeshComponents
     */
    get meshComponents() {
        this.__collectMeshComponents();
        return this.__meshComponents;
    }
    /**
     * Get all the highest level SceneGraphComponents list of the entities on this render pass.
     * @return An array of SceneGraphComponents
     */
    get sceneTopLevelGraphComponents() {
        this.__collectTopLevelSceneGraphComponents();
        return this.__topLevelSceneGraphComponents != null
            ? this.__topLevelSceneGraphComponents
            : [];
    }
    /**
     * Sets the target framebuffer of this render pass.
     * If two or more render pass share a framebuffer, Rhodonite renders entities to the same framebuffer in those render passes.
     * @param framebuffer A framebuffer
     */
    setFramebuffer(framebuffer) {
        this.__frameBuffer = framebuffer;
        if (framebuffer != null) {
            this.setViewport(_math_Vector4__WEBPACK_IMPORTED_MODULE_2__.Vector4.fromCopyArray([0, 0, framebuffer.width, framebuffer.height]));
        }
        else {
            this.__viewport = undefined;
        }
    }
    setRenderTargetColorAttachments(indeces) {
        this.__renderTargetColorAttachments = indeces;
    }
    getRenderTargetColorAttachments() {
        return this.__renderTargetColorAttachments;
    }
    /**
     * Gets the framebuffer if this render pass has the target framebuffer.
     * @return A framebuffer
     */
    getFramebuffer() {
        return this.__frameBuffer;
    }
    /**
     * Remove the existing framebuffer
     */
    removeFramebuffer() {
        this.__frameBuffer = undefined;
    }
    /**
     * Sets the viewport of this render pass.
     * @param vec A Vector4 (Origin of coordinatesX, origin of coordinatesY, width, height).
     */
    setViewport(vec) {
        if (this.__viewport != null) {
            this.__viewport.copyComponents(vec);
        }
        else {
            this.__viewport = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__.MutableVector4.fromCopyArray([
                vec.x,
                vec.y,
                vec.z,
                vec.w,
            ]);
        }
    }
    /**
     * Gets the viewport if this render pass has the viewport.
     * @return A Vector4 (Origin of coordinatesX, origin of coordinatesY, width, height).
     */
    getViewport() {
        let viewport = this.__viewport;
        if (viewport != null) {
            viewport = RenderPass.__tmp_Vector4_0.copyComponents(viewport);
        }
        return viewport;
    }
    setResolveFramebuffer(framebuffer) {
        const repo = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__.WebGLResourceRepository.getInstance();
        const glw = repo.currentWebGLContextWrapper;
        if (!glw || !glw.isWebGL2) {
            console.error('resolve framebuffer is unavailable in this webgl context');
            return;
        }
        this.__resolveFrameBuffer = framebuffer;
    }
    getResolveFramebuffer() {
        return this.__resolveFrameBuffer;
    }
    setResolveFramebuffer2(framebuffer) {
        const repo = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__.WebGLResourceRepository.getInstance();
        const glw = repo.currentWebGLContextWrapper;
        if (!glw || !glw.isWebGL2) {
            console.error('resolve framebuffer is unavailable in this webgl context');
            return;
        }
        this.__resolveFrameBuffer2 = framebuffer;
    }
    getResolveFramebuffer2() {
        return this.__resolveFrameBuffer2;
    }
    copyFramebufferToResolveFramebuffer() {
        const repo = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__.WebGLResourceRepository.getInstance();
        const webGLResourceFrameBuffer = repo.getWebGLResource(this.__frameBuffer.cgApiResourceUid);
        const webGLResourceResolveFramebuffer = repo.getWebGLResource(this.__resolveFrameBuffer.cgApiResourceUid);
        const glw = repo.currentWebGLContextWrapper;
        const gl = glw.getRawContextAsWebGL2();
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webGLResourceFrameBuffer);
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webGLResourceResolveFramebuffer);
        gl.blitFramebuffer(0, 0, this.__frameBuffer.width, this.__frameBuffer.height, 0, 0, this.__resolveFrameBuffer.width, this.__resolveFrameBuffer.height, gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, gl.NEAREST);
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
    }
    copyFramebufferToResolveFramebuffer2() {
        const repo = _webgl_WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_5__.WebGLResourceRepository.getInstance();
        const webGLResourceFrameBuffer = repo.getWebGLResource(this.__frameBuffer.cgApiResourceUid);
        const webGLResourceResolveFramebuffer2 = repo.getWebGLResource(this.__resolveFrameBuffer2.cgApiResourceUid);
        const glw = repo.currentWebGLContextWrapper;
        const gl = glw.getRawContextAsWebGL2();
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webGLResourceFrameBuffer);
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webGLResourceResolveFramebuffer2);
        gl.blitFramebuffer(0, 0, this.__frameBuffer.width, this.__frameBuffer.height, 0, 0, this.__resolveFrameBuffer2.width, this.__resolveFrameBuffer2.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);
        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
        const renderTargetTexture = this.getResolveFramebuffer2().getColorAttachedRenderTargetTexture(0);
        renderTargetTexture.generateMipmap();
    }
    __setupMaterial(material) {
        if (material.isEmptyMaterial())
            return;
        const webglRenderingStrategy = this.__setWebglRenderingStrategyIfNotYet(this.__webglRenderingStrategy);
        webglRenderingStrategy.setupShaderForMaterial(material);
    }
    /**
     * Sets a material for the primitive on this render pass.
     * If Rhodonite draw the primitive using this render pass, Rhodonite uses this material instead of the material on the primitive.
     * @param material A material attaching to the primitive
     * @param primitive A target primitive
     */
    setMaterialForPrimitive(material, primitive) {
        this.__primitiveMaterial.set(primitive, material);
        this.__setupMaterial(material);
    }
    /**
     * Sets a material for all the primitive on this render pass.
     * For all the primitive, Rhodonite uses this material instead of the material on the primitive.
     * Where if this render pass has a map between primitive and material by setMaterialForPrimitive, Rhodonite uses the material mapped by primitive.
     * @param material A material attaching to the primitive
     */
    setMaterial(material) {
        this.__material = material;
        this.__setupMaterial(material);
    }
    get material() {
        return this.__material;
    }
    __setWebglRenderingStrategyIfNotYet(webglRenderingStrategy) {
        if (webglRenderingStrategy != null) {
            return webglRenderingStrategy;
        }
        const processApproach = _system_System__WEBPACK_IMPORTED_MODULE_3__.System.processApproach;
        const moduleManager = _system_ModuleManager__WEBPACK_IMPORTED_MODULE_4__.ModuleManager.getInstance();
        const moduleName = 'webgl';
        const webglModule = moduleManager.getModule(moduleName);
        const newWebglRenderingStrategyRef = webglModule.getRenderingStrategy(processApproach);
        this.__webglRenderingStrategy = newWebglRenderingStrategyRef;
        return newWebglRenderingStrategyRef;
    }
    __getMaterialOf(primitive) {
        return this.__primitiveMaterial.get(primitive);
    }
    __hasMaterialOf(primitive) {
        return this.__primitiveMaterial.has(primitive);
    }
    getAppropriateMaterial(primitive) {
        let material;
        if (this.__hasMaterialOf(primitive)) {
            material = this.__getMaterialOf(primitive);
        }
        else if (this.material != null) {
            material = this.material;
        }
        else {
            material = primitive.material;
        }
        return material;
    }
}
RenderPass.__tmp_Vector4_0 = _math_MutableVector4__WEBPACK_IMPORTED_MODULE_6__.MutableVector4.zero();


/***/ }),

/***/ "./src/foundation/renderer/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/renderer/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CGAPIResourceRepository": () => (/* reexport safe */ _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository),
/* harmony export */   "Expression": () => (/* reexport safe */ _Expression__WEBPACK_IMPORTED_MODULE_2__.Expression),
/* harmony export */   "ForwardRenderPipeline": () => (/* reexport safe */ _pipelines__WEBPACK_IMPORTED_MODULE_0__.ForwardRenderPipeline),
/* harmony export */   "Frame": () => (/* reexport safe */ _Frame__WEBPACK_IMPORTED_MODULE_3__.Frame),
/* harmony export */   "FrameBuffer": () => (/* reexport safe */ _FrameBuffer__WEBPACK_IMPORTED_MODULE_4__.FrameBuffer),
/* harmony export */   "RenderPass": () => (/* reexport safe */ _RenderPass__WEBPACK_IMPORTED_MODULE_5__.RenderPass)
/* harmony export */ });
/* harmony import */ var _pipelines__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pipelines */ "./src/foundation/renderer/pipelines/index.ts");
/* harmony import */ var _CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _Expression__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Expression */ "./src/foundation/renderer/Expression.ts");
/* harmony import */ var _Frame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Frame */ "./src/foundation/renderer/Frame.ts");
/* harmony import */ var _FrameBuffer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./FrameBuffer */ "./src/foundation/renderer/FrameBuffer.ts");
/* harmony import */ var _RenderPass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RenderPass */ "./src/foundation/renderer/RenderPass.ts");








/***/ }),

/***/ "./src/foundation/renderer/pipelines/ForwardRenderPipeline.ts":
/*!********************************************************************!*\
  !*** ./src/foundation/renderer/pipelines/ForwardRenderPipeline.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ForwardRenderPipeline": () => (/* binding */ ForwardRenderPipeline)
/* harmony export */ });
/* harmony import */ var _components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/RenderableHelper */ "./src/foundation/helpers/RenderableHelper.ts");
/* harmony import */ var _math_MathUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _math_Scalar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _misc_Option__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../misc/Option */ "./src/foundation/misc/Option.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _Expression__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Expression */ "./src/foundation/renderer/Expression.ts");
/* harmony import */ var _Frame__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Frame */ "./src/foundation/renderer/Frame.ts");
/* harmony import */ var _RenderPass__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../RenderPass */ "./src/foundation/renderer/RenderPass.ts");
/* harmony import */ var _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../geometry/shapes/Plane */ "./src/foundation/geometry/shapes/Plane.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _geometry_Mesh__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../geometry/Mesh */ "./src/foundation/geometry/Mesh.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../helpers/MaterialHelper */ "./src/foundation/helpers/MaterialHelper.ts");
/* harmony import */ var _misc_Result__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../misc/Result */ "./src/foundation/misc/Result.ts");
/* harmony import */ var _system_System__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../system/System */ "./src/foundation/system/System.ts");
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../definitions/CameraType */ "./src/foundation/definitions/CameraType.ts");
/* harmony import */ var _system_ModuleManager__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");

























class ForwardRenderPipeline extends _core_RnObject__WEBPACK_IMPORTED_MODULE_22__.RnObject {
    constructor() {
        super();
        this.__oFrame = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oFrameBufferMsaa = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oFrameBufferResolve = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oFrameBufferResolveForReference = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oInitialExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oMsaaResolveExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oGammaExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__opaqueExpressions = [];
        this.__transparentExpressions = [];
        this.__oGammaBoardEntity = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oGammaCameraEntity = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oWebXRSystem = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
        this.__oDrawFunc = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.None();
    }
    async setup(canvasWidth, canvasHeight, opaqueExpressions, transparentExpressions) {
        if (this.__oFrame.has()) {
            return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Err({
                message: 'Already setup',
            });
        }
        this.setExpressionsInner(opaqueExpressions);
        this.setTransparentExpressionsForTransmission(transparentExpressions);
        const sFrame = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(new _Frame__WEBPACK_IMPORTED_MODULE_12__.Frame());
        this.__oFrame = sFrame;
        // create Frame Buffers
        const { framebufferMsaa, framebufferResolve, framebufferResolveForReference, } = this.__createRenderTargets(canvasWidth, canvasHeight);
        // Initial Expression
        const initialExpression = this.__setupInitialExpression(framebufferMsaa);
        this.__oInitialExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(initialExpression);
        // Msaa Expression
        const msaaResolveExpression = this.__setupMsaaResolveExpression(sFrame, framebufferMsaa, framebufferResolve, framebufferResolveForReference);
        this.__oMsaaResolveExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(msaaResolveExpression);
        this.__oFrameBufferMsaa = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(framebufferMsaa);
        this.__oFrameBufferResolve = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(framebufferResolve);
        this.__oFrameBufferResolveForReference = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(framebufferResolveForReference);
        // gamma Expression
        const gammaExpression = this.__setupGammaExpression(sFrame, framebufferResolve, canvasWidth / canvasHeight);
        this.__oGammaExpression = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(gammaExpression);
        const rnXRModule = await _system_ModuleManager__WEBPACK_IMPORTED_MODULE_24__.ModuleManager.getInstance().getModule('xr');
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is.exist(rnXRModule)) {
            this.__oWebXRSystem = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(rnXRModule.WebXRSystem.getInstance());
        }
        return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Ok();
    }
    setExpressions(expressions, options = {
        isTransmission: true
    }) {
        this.setExpressionsInner(expressions, {
            isTransmission: options.isTransmission
        });
        const clonedExpressions = expressions.map(expression => expression.clone());
        if (options.isTransmission) {
            this.setTransparentExpressionsForTransmission(clonedExpressions);
        }
    }
    setExpressionsInner(expressions, options = {
        isTransmission: true
    }) {
        for (const expression of expressions) {
            for (const rp of expression.renderPasses) {
                rp.toRenderOpaquePrimitives = true;
                if (options.isTransmission) {
                    rp.toRenderTransparentPrimitives = false;
                }
                else {
                    rp.toRenderTransparentPrimitives = true;
                }
                rp.toClearDepthBuffer = false;
                rp.setFramebuffer(this.__oFrameBufferMsaa.unwrapForce());
            }
        }
        this.__opaqueExpressions = expressions;
    }
    setTransparentExpressionsForTransmission(expressions) {
        for (const expression of expressions) {
            expression.tryToSetUniqueName('modelTransparentForTransmission', true);
            for (const rp of expression.renderPasses) {
                rp.toRenderOpaquePrimitives = false;
                rp.toRenderTransparentPrimitives = true;
                rp.toClearDepthBuffer = false;
                rp.setFramebuffer(this.__oFrameBufferMsaa.unwrapForce());
                // rp.setResolveFramebuffer(this.__oFrameBufferResolve.unwrapForce());
                for (const entity of rp.entities) {
                    const meshComponent = entity.tryToGetMesh();
                    if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is.exist(meshComponent)) {
                        const mesh = meshComponent.mesh;
                        if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is.exist(mesh)) {
                            for (let i = 0; i < mesh.getPrimitiveNumber(); i++) {
                                const primitive = mesh.getPrimitiveAt(i);
                                primitive.material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.BackBufferTexture, this.__oFrameBufferResolveForReference
                                    .unwrapForce()
                                    .getColorAttachedRenderTargetTexture(0));
                            }
                        }
                    }
                }
            }
        }
        this.__transparentExpressions = expressions;
    }
    __setupInitialExpression(framebufferTargetOfGammaMsaa) {
        const expression = new _Expression__WEBPACK_IMPORTED_MODULE_11__.Expression();
        expression.tryToSetUniqueName('Initial', true);
        const initialRenderPass = new _RenderPass__WEBPACK_IMPORTED_MODULE_13__.RenderPass();
        initialRenderPass.clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopyArray4([0.0, 0.0, 0.0, 0.0]);
        initialRenderPass.toClearColorBuffer = true;
        initialRenderPass.toClearDepthBuffer = true;
        const initialRenderPassForFrameBuffer = new _RenderPass__WEBPACK_IMPORTED_MODULE_13__.RenderPass();
        initialRenderPassForFrameBuffer.clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopyArray4([
            0.0, 0.0, 0.0, 0.0,
        ]);
        initialRenderPassForFrameBuffer.toClearColorBuffer = true;
        initialRenderPassForFrameBuffer.toClearDepthBuffer = true;
        initialRenderPassForFrameBuffer.setFramebuffer(framebufferTargetOfGammaMsaa);
        expression.addRenderPasses([
            initialRenderPass,
            initialRenderPassForFrameBuffer,
        ]);
        return expression;
    }
    __createRenderTargets(canvasWidth, canvasHeight) {
        // MSAA depth
        const framebufferMsaa = _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_5__.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 0, {
            isMSAA: true,
            sampleCountMSAA: 4,
        });
        framebufferMsaa.tryToSetUniqueName('FramebufferTargetOfGammaMsaa', true);
        // Resolve Color 1
        const framebufferResolve = _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_5__.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 1, {
            createDepthBuffer: true,
        });
        framebufferResolve.tryToSetUniqueName('FramebufferTargetOfGammaResolve', true);
        // Resolve Color 2
        const framebufferResolveForReference = _helpers_RenderableHelper__WEBPACK_IMPORTED_MODULE_5__.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 1, {
            createDepthBuffer: false,
            minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.LinearMipmapLinear,
        });
        framebufferResolveForReference.tryToSetUniqueName('FramebufferTargetOfGammaResolveForReference', true);
        return {
            framebufferMsaa,
            framebufferResolve,
            framebufferResolveForReference,
        };
    }
    __attachIBLTextureToAllMeshComponents(diffuseCubeTexture, specularCubeTexture, rotation) {
        const meshRendererComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponentsWithType(_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_1__.MeshRendererComponent);
        for (let i = 0; i < meshRendererComponents.length; i++) {
            const meshRendererComponent = meshRendererComponents[i];
            meshRendererComponent.specularCubeMap = specularCubeTexture;
            meshRendererComponent.diffuseCubeMap = diffuseCubeTexture;
            meshRendererComponent.rotationOfCubeMap =
                _math_MathUtil__WEBPACK_IMPORTED_MODULE_6__.MathUtil.degreeToRadian(rotation);
        }
        const meshComponents = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_2__.ComponentRepository.getComponentsWithType(_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_0__.MeshComponent);
        for (let i = 0; i < meshComponents.length; i++) {
            const meshComponent = meshComponents[i];
            const mesh = meshComponent.mesh;
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is.exist(mesh)) {
                for (let i = 0; i < mesh.getPrimitiveNumber(); i++) {
                    const primitive = mesh.getPrimitiveAt(i);
                    primitive.material.setParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.InverseEnvironment, _math_Scalar__WEBPACK_IMPORTED_MODULE_7__.Scalar.fromCopyNumber(0));
                }
            }
        }
    }
    __setupMsaaResolveExpression(sFrame, framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference) {
        const expressionForResolve = new _Expression__WEBPACK_IMPORTED_MODULE_11__.Expression();
        expressionForResolve.tryToSetUniqueName('Resolve', true);
        const renderPassForResolve = new _RenderPass__WEBPACK_IMPORTED_MODULE_13__.RenderPass();
        expressionForResolve.addRenderPasses([renderPassForResolve]);
        renderPassForResolve.toClearDepthBuffer = false;
        renderPassForResolve.setFramebuffer(framebufferTargetOfGammaMsaa);
        renderPassForResolve.setResolveFramebuffer(framebufferTargetOfGammaResolve);
        renderPassForResolve.setResolveFramebuffer2(framebufferTargetOfGammaResolveForReference);
        sFrame.unwrapForce().addExpression(expressionForResolve);
        return expressionForResolve;
    }
    __createPostEffectCameraEntity() {
        const cameraEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__.EntityHelper.createCameraEntity();
        const cameraComponent = cameraEntity.getCamera();
        cameraComponent.zNearInner = 0.5;
        cameraComponent.zFarInner = 2.0;
        return cameraEntity;
    }
    __setupGammaExpression(sFrame, gammaTargetFramebuffer, aspect) {
        const expressionGammaEffect = new _Expression__WEBPACK_IMPORTED_MODULE_11__.Expression();
        const entityGamma = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__.EntityHelper.createMeshEntity();
        entityGamma.tryToSetUniqueName('Gamma Plane', true);
        entityGamma.tryToSetTag({
            tag: 'type',
            value: 'background-assets',
        });
        entityGamma.getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopyArray3([aspect, 1, 1]);
        entityGamma.getTransform().rotate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopyArray3([Math.PI / 2, 0, 0]);
        const primitiveGamma = new _geometry_shapes_Plane__WEBPACK_IMPORTED_MODULE_14__.Plane();
        primitiveGamma.generate({ width: 2, height: 2, uSpan: 1, vSpan: 1, isUVRepeat: false, flipTextureCoordinateY: false });
        primitiveGamma.material = _helpers_MaterialHelper__WEBPACK_IMPORTED_MODULE_19__.MaterialHelper.createGammaCorrectionMaterial();
        primitiveGamma.material.setTextureParameter(_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.BaseColorTexture, gammaTargetFramebuffer.getColorAttachedRenderTargetTexture(0));
        const meshGamma = new _geometry_Mesh__WEBPACK_IMPORTED_MODULE_16__.Mesh();
        meshGamma.addPrimitive(primitiveGamma);
        this.__oGammaBoardEntity = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(entityGamma);
        const meshComponentGamma = entityGamma.getComponent(_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_0__.MeshComponent);
        meshComponentGamma.setMesh(meshGamma);
        const cameraEntityGamma = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__.EntityHelper.createCameraEntity();
        cameraEntityGamma.tryToSetUniqueName('Gamma Expression Camera', true);
        cameraEntityGamma.tryToSetTag({
            tag: 'type',
            value: 'background-assets',
        });
        const cameraComponentGamma = cameraEntityGamma.getComponent(_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_15__.CameraComponent);
        cameraEntityGamma.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopyArray3([0.0, 0.0, 1.0]);
        cameraComponentGamma.type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_23__.CameraType.Orthographic;
        cameraComponentGamma.zNear = 0.01;
        cameraComponentGamma.zFar = 1000;
        cameraComponentGamma.xMag = aspect;
        cameraComponentGamma.yMag = 1;
        this.__oGammaCameraEntity = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(cameraEntityGamma);
        // Rendering for Canvas Frame Buffer
        const renderPassGamma = new _RenderPass__WEBPACK_IMPORTED_MODULE_13__.RenderPass();
        renderPassGamma.tryToSetUniqueName('renderPassGamma', true);
        renderPassGamma.toClearColorBuffer = false;
        renderPassGamma.toClearDepthBuffer = false;
        renderPassGamma.isDepthTest = false;
        renderPassGamma.clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopyArray4([0.0, 0.0, 0.0, 0.0]);
        renderPassGamma.addEntities([entityGamma]);
        renderPassGamma.cameraComponent = cameraComponentGamma;
        renderPassGamma.isVrRendering = false;
        renderPassGamma.isOutputForVr = false;
        // Rendering for VR HeadSet Frame Buffer
        const renderPassGammaVr = new _RenderPass__WEBPACK_IMPORTED_MODULE_13__.RenderPass();
        renderPassGammaVr.tryToSetUniqueName('renderPassGammaVr', true);
        renderPassGammaVr.toClearColorBuffer = false;
        renderPassGammaVr.toClearDepthBuffer = false;
        renderPassGammaVr.isDepthTest = false;
        renderPassGammaVr.clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopyArray4([0.0, 0.0, 0.0, 0.0]);
        renderPassGammaVr.addEntities([entityGamma]);
        renderPassGammaVr.cameraComponent = cameraComponentGamma;
        renderPassGammaVr.isVrRendering = false;
        renderPassGammaVr.isOutputForVr = true;
        expressionGammaEffect.addRenderPasses([renderPassGamma, renderPassGammaVr]);
        return expressionGammaEffect;
    }
    __setTextureParameterForMeshComponents(meshComponents, shaderSemantic, value) {
        for (let i = 0; i < meshComponents.length; i++) {
            const mesh = meshComponents[i].mesh;
            if (!mesh)
                continue;
            const primitiveNumber = mesh.getPrimitiveNumber();
            for (let j = 0; j < primitiveNumber; j++) {
                const primitive = mesh.getPrimitiveAt(j);
                primitive.material.setTextureParameter(shaderSemantic, value);
            }
        }
    }
    resize(width, height) {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is["false"](this.__oFrame.has())) {
            return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Err({
                message: 'not initialized.',
            });
        }
        const webXRSystem = this.__oWebXRSystem.unwrapOrUndefined();
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is.exist(webXRSystem) && webXRSystem.isWebXRMode) {
            width = webXRSystem.getCanvasWidthForVr();
            height = webXRSystem.getCanvasHeightForVr();
        }
        _system_System__WEBPACK_IMPORTED_MODULE_21__.System.resizeCanvas(width, height);
        this.__oFrame.unwrapForce().setViewport(_math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopy4(0, 0, width, height));
        this.__oFrameBufferMsaa.unwrapForce().resize(width, height);
        this.__oFrameBufferResolve.unwrapForce().resize(width, height);
        this.__oFrameBufferResolveForReference.unwrapForce().resize(width, height);
        let aspect = width / height;
        this.__oGammaBoardEntity.unwrapForce().getTransform().scale = _math_Vector3__WEBPACK_IMPORTED_MODULE_18__.Vector3.fromCopyArray3([aspect, 1, 1]);
        this.__oGammaCameraEntity.unwrapForce().getCamera().xMag = aspect;
        this.__oGammaExpression.unwrapForce().renderPasses[0].setViewport(_math_Vector4__WEBPACK_IMPORTED_MODULE_8__.Vector4.fromCopy4(0, 0, width, height));
        return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Ok();
    }
    __setExpressions() {
        const frame = this.__oFrame.unwrapForce();
        frame.clearExpressions();
        frame.addExpression(this.getInitialExpression());
        for (const exp of this.__opaqueExpressions) {
            frame.addExpression(exp);
        }
        frame.addExpression(this.getMsaaResolveExpression());
        for (const exp of this.__transparentExpressions) {
            frame.addExpression(exp);
        }
        frame.addExpression(this.getMsaaResolveExpression());
        frame.addExpression(this.getGammaExpression());
    }
    startRenderLoop(func) {
        this.__oDrawFunc = new _misc_Option__WEBPACK_IMPORTED_MODULE_9__.Some(func);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_10__.Is["false"](this.__oFrame.has())) {
            return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Err({
                message: 'not initialized.',
            });
        }
        _system_System__WEBPACK_IMPORTED_MODULE_21__.System.startRenderLoop(() => {
            this.__setExpressions();
            func(this.__oFrame.unwrapForce());
        });
        return new _misc_Result__WEBPACK_IMPORTED_MODULE_20__.Ok();
    }
    draw() {
        this.__oDrawFunc.unwrapForce()(this.__oFrame.unwrapForce());
    }
    getInitialExpression() {
        return this.__oInitialExpression.unwrapOrUndefined();
    }
    getMsaaResolveExpression() {
        return this.__oMsaaResolveExpression.unwrapOrUndefined();
    }
    getGammaExpression() {
        return this.__oGammaExpression.unwrapOrUndefined();
    }
}


/***/ }),

/***/ "./src/foundation/renderer/pipelines/index.ts":
/*!****************************************************!*\
  !*** ./src/foundation/renderer/pipelines/index.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ForwardRenderPipeline": () => (/* reexport safe */ _ForwardRenderPipeline__WEBPACK_IMPORTED_MODULE_0__.ForwardRenderPipeline)
/* harmony export */ });
/* harmony import */ var _ForwardRenderPipeline__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ForwardRenderPipeline */ "./src/foundation/renderer/pipelines/ForwardRenderPipeline.ts");



/***/ }),

/***/ "./src/foundation/system/EventPubSub.ts":
/*!**********************************************!*\
  !*** ./src/foundation/system/EventPubSub.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventPubSub": () => (/* binding */ EventPubSub)
/* harmony export */ });
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");


class EventPubSub {
    constructor() {
        this.__subscriberMap = new Map();
    }
    subscribe(type, handler) {
        let subscribers = this.__subscriberMap.get(type);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_0__.Is.not.exist(subscribers)) {
            this.__subscriberMap.set(type, []);
            subscribers = this.__subscriberMap.get(type);
        }
        return subscribers.push(handler) - 1;
    }
    unsubscribe(type, index) {
        const subscribers = this.__subscriberMap.get(type);
        // eslint-disable-next-line eqeqeq
        if (subscribers == null) {
            return;
        }
        subscribers.splice(index, 1);
    }
    unsubscribeAll(type) {
        this.__subscriberMap.delete(type);
    }
    publishAsync(type, event) {
        let count = 0;
        const subscribers = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_1__.nullishToEmptyArray)(this.__subscriberMap.get(type));
        for (const sub of subscribers) {
            setTimeout(sub.bind(this, event), 0);
            count++;
        }
        return count;
    }
    publishSync(type, event) {
        let count = 0;
        const subscribers = (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_1__.nullishToEmptyArray)(this.__subscriberMap.get(type));
        for (const sub of subscribers) {
            // console.log(sub);
            sub(event);
            count++;
        }
        return count;
    }
}


/***/ }),

/***/ "./src/foundation/system/InputManager.ts":
/*!***********************************************!*\
  !*** ./src/foundation/system/InputManager.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EVENT_CLICK": () => (/* binding */ EVENT_CLICK),
/* harmony export */   "EVENT_KEY_DOWN": () => (/* binding */ EVENT_KEY_DOWN),
/* harmony export */   "EVENT_KEY_PRESS": () => (/* binding */ EVENT_KEY_PRESS),
/* harmony export */   "EVENT_KEY_UP": () => (/* binding */ EVENT_KEY_UP),
/* harmony export */   "EVENT_MOUSE_DOWN": () => (/* binding */ EVENT_MOUSE_DOWN),
/* harmony export */   "EVENT_MOUSE_ENTER": () => (/* binding */ EVENT_MOUSE_ENTER),
/* harmony export */   "EVENT_MOUSE_LEAVE": () => (/* binding */ EVENT_MOUSE_LEAVE),
/* harmony export */   "EVENT_MOUSE_MOVE": () => (/* binding */ EVENT_MOUSE_MOVE),
/* harmony export */   "EVENT_MOUSE_OVER": () => (/* binding */ EVENT_MOUSE_OVER),
/* harmony export */   "EVENT_MOUSE_UP": () => (/* binding */ EVENT_MOUSE_UP),
/* harmony export */   "EVENT_MOUSE_WHEEL": () => (/* binding */ EVENT_MOUSE_WHEEL),
/* harmony export */   "EVENT_MSPOINTER_DOWN": () => (/* binding */ EVENT_MSPOINTER_DOWN),
/* harmony export */   "EVENT_MSPOINTER_MOVE": () => (/* binding */ EVENT_MSPOINTER_MOVE),
/* harmony export */   "EVENT_MSPOINTER_UP": () => (/* binding */ EVENT_MSPOINTER_UP),
/* harmony export */   "EVENT_ORIENTATION_CHANGE": () => (/* binding */ EVENT_ORIENTATION_CHANGE),
/* harmony export */   "EVENT_POINTER_CANCEL": () => (/* binding */ EVENT_POINTER_CANCEL),
/* harmony export */   "EVENT_POINTER_DOWN": () => (/* binding */ EVENT_POINTER_DOWN),
/* harmony export */   "EVENT_POINTER_ENTER": () => (/* binding */ EVENT_POINTER_ENTER),
/* harmony export */   "EVENT_POINTER_LEAVE": () => (/* binding */ EVENT_POINTER_LEAVE),
/* harmony export */   "EVENT_POINTER_MOVE": () => (/* binding */ EVENT_POINTER_MOVE),
/* harmony export */   "EVENT_POINTER_OUT": () => (/* binding */ EVENT_POINTER_OUT),
/* harmony export */   "EVENT_POINTER_OVER": () => (/* binding */ EVENT_POINTER_OVER),
/* harmony export */   "EVENT_POINTER_UP": () => (/* binding */ EVENT_POINTER_UP),
/* harmony export */   "EVENT_RESIZE": () => (/* binding */ EVENT_RESIZE),
/* harmony export */   "EVENT_TOUCH_CANCEL": () => (/* binding */ EVENT_TOUCH_CANCEL),
/* harmony export */   "EVENT_TOUCH_DOUBLE_TAP": () => (/* binding */ EVENT_TOUCH_DOUBLE_TAP),
/* harmony export */   "EVENT_TOUCH_DRAG": () => (/* binding */ EVENT_TOUCH_DRAG),
/* harmony export */   "EVENT_TOUCH_END": () => (/* binding */ EVENT_TOUCH_END),
/* harmony export */   "EVENT_TOUCH_ENTER": () => (/* binding */ EVENT_TOUCH_ENTER),
/* harmony export */   "EVENT_TOUCH_HOLD": () => (/* binding */ EVENT_TOUCH_HOLD),
/* harmony export */   "EVENT_TOUCH_LEAVE": () => (/* binding */ EVENT_TOUCH_LEAVE),
/* harmony export */   "EVENT_TOUCH_LONG_TAP": () => (/* binding */ EVENT_TOUCH_LONG_TAP),
/* harmony export */   "EVENT_TOUCH_MOVE": () => (/* binding */ EVENT_TOUCH_MOVE),
/* harmony export */   "EVENT_TOUCH_OUT": () => (/* binding */ EVENT_TOUCH_OUT),
/* harmony export */   "EVENT_TOUCH_OVER": () => (/* binding */ EVENT_TOUCH_OVER),
/* harmony export */   "EVENT_TOUCH_PINCH": () => (/* binding */ EVENT_TOUCH_PINCH),
/* harmony export */   "EVENT_TOUCH_START": () => (/* binding */ EVENT_TOUCH_START),
/* harmony export */   "EVENT_TOUCH_SWIPE": () => (/* binding */ EVENT_TOUCH_SWIPE),
/* harmony export */   "EVENT_TOUCH_TAP": () => (/* binding */ EVENT_TOUCH_TAP),
/* harmony export */   "INPUT_HANDLING_STATE_CAMERACONTROLLER": () => (/* binding */ INPUT_HANDLING_STATE_CAMERACONTROLLER),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_SCALE": () => (/* binding */ INPUT_HANDLING_STATE_GIZMO_SCALE),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_TRNSLATION": () => (/* binding */ INPUT_HANDLING_STATE_GIZMO_TRNSLATION),
/* harmony export */   "INPUT_HANDLING_STATE_NONE": () => (/* binding */ INPUT_HANDLING_STATE_NONE),
/* harmony export */   "InputManager": () => (/* binding */ InputManager),
/* harmony export */   "getEvent": () => (/* binding */ getEvent)
/* harmony export */ });
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");

const EVENT_MOUSE_DOWN = 'mousedown';
const EVENT_MOUSE_MOVE = 'mousemove';
const EVENT_MOUSE_UP = 'mouseup';
const EVENT_MOUSE_WHEEL = 'wheel';
const EVENT_MOUSE_ENTER = 'mouseenter';
const EVENT_MOUSE_LEAVE = 'mouseleave';
const EVENT_MOUSE_OVER = 'mouseover';
const EVENT_CLICK = 'click';
const EVENT_KEY_DOWN = 'keydown';
const EVENT_KEY_UP = 'keyup';
const EVENT_KEY_PRESS = 'keypress';
const EVENT_POINTER_DOWN = 'pointerdown';
const EVENT_MSPOINTER_DOWN = 'MSPointerDown';
const EVENT_POINTER_MOVE = 'pointermove';
const EVENT_MSPOINTER_MOVE = 'MSPointerMove';
const EVENT_POINTER_UP = 'pointerup';
const EVENT_MSPOINTER_UP = 'MSPointerUp';
const EVENT_POINTER_CANCEL = 'pointercancel';
const EVENT_POINTER_ENTER = 'pointerenter';
const EVENT_POINTER_LEAVE = 'pointerleave';
const EVENT_POINTER_OVER = 'pointerover';
const EVENT_POINTER_OUT = 'pointerout';
const EVENT_RESIZE = 'resize';
const EVENT_ORIENTATION_CHANGE = 'orientationchange';
const EVENT_TOUCH_TAP = 'tap';
const EVENT_TOUCH_DOUBLE_TAP = 'doubletap';
const EVENT_TOUCH_LONG_TAP = 'longtap';
const EVENT_TOUCH_HOLD = 'hold';
const EVENT_TOUCH_DRAG = 'drag';
const EVENT_TOUCH_SWIPE = 'swipe';
const EVENT_TOUCH_PINCH = 'pinch';
const EVENT_TOUCH_START = 'touchstart';
const EVENT_TOUCH_MOVE = 'touchmove';
const EVENT_TOUCH_END = 'touchend';
const EVENT_TOUCH_CANCEL = 'touchcancel';
const EVENT_TOUCH_ENTER = 'touchenter';
const EVENT_TOUCH_LEAVE = 'touchleave';
const EVENT_TOUCH_OVER = 'touchover';
const EVENT_TOUCH_OUT = 'touchout';
function getEvent(type) {
    const deviceEvents = {
        Touch: typeof document.ontouchstart !== 'undefined',
        Pointer: window.navigator.pointerEnabled,
        MSPointer: window.navigator.msPointerEnabled,
    };
    const EventNames = {
        start: deviceEvents.Pointer
            ? EVENT_POINTER_DOWN
            : deviceEvents.MSPointer
                ? EVENT_MSPOINTER_DOWN
                : deviceEvents.Touch
                    ? EVENT_TOUCH_START
                    : EVENT_MOUSE_DOWN,
        move: deviceEvents.Pointer
            ? EVENT_POINTER_MOVE
            : deviceEvents.MSPointer
                ? EVENT_MSPOINTER_MOVE
                : deviceEvents.Touch
                    ? EVENT_TOUCH_MOVE
                    : EVENT_MOUSE_MOVE,
        end: deviceEvents.Pointer
            ? EVENT_POINTER_UP
            : deviceEvents.MSPointer
                ? EVENT_MSPOINTER_UP
                : deviceEvents.Touch
                    ? EVENT_TOUCH_END
                    : EVENT_MOUSE_UP,
        click: EVENT_CLICK,
    };
    return EventNames[type];
}
const INPUT_HANDLING_STATE_NONE = 'None';
const INPUT_HANDLING_STATE_CAMERACONTROLLER = 'CameraController';
const INPUT_HANDLING_STATE_GIZMO_TRNSLATION = 'GizmoTranslation';
const INPUT_HANDLING_STATE_GIZMO_SCALE = 'GizmoScale';
class InputManager {
    static register(inputHandlingState, events) {
        // add event listeners
        this.__inputHandlingStateMap.set(inputHandlingState, events);
        this.__activeMap.set(inputHandlingState, true);
        this.__processEventListners();
    }
    static unregister(inputHandlingState) {
        this.__inputHandlingStateMap.delete(inputHandlingState);
        this.__activeMap.set(inputHandlingState, false);
        this.__processEventListners();
    }
    static setActive(inputHandlingState, active) {
        this.__activeMap.set(inputHandlingState, active);
        if (inputHandlingState === INPUT_HANDLING_STATE_GIZMO_TRNSLATION && active) {
            this.__activeMap.set(INPUT_HANDLING_STATE_GIZMO_SCALE, false);
        }
        else if (inputHandlingState === INPUT_HANDLING_STATE_GIZMO_SCALE && active) {
            this.__activeMap.set(INPUT_HANDLING_STATE_GIZMO_TRNSLATION, false);
        }
        this.__processEventListners();
    }
    static __addEventListeners(inputHandlingState) {
        const infos = InputManager.__inputHandlingStateMap.get(inputHandlingState);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(infos)) {
            for (const inputHandlerInfo of infos) {
                inputHandlerInfo.eventTargetDom.addEventListener(inputHandlerInfo.eventName, inputHandlerInfo.handler, inputHandlerInfo.options);
            }
        }
    }
    static __removeEventListeners(inputHandlingState) {
        const infos = InputManager.__inputHandlingStateMap.get(inputHandlingState);
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_0__.Is.exist(infos)) {
            for (const inputHandlerInfo of infos) {
                inputHandlerInfo.eventTargetDom.removeEventListener(inputHandlerInfo.eventName, inputHandlerInfo.handler, inputHandlerInfo.options);
            }
        }
    }
    static __processEventListners() {
        const translationGizmoActive = InputManager.__inputHandlingStateMap.get(INPUT_HANDLING_STATE_GIZMO_TRNSLATION);
        const scaleGizmoActive = InputManager.__inputHandlingStateMap.get(INPUT_HANDLING_STATE_GIZMO_SCALE);
        const cameraControllerActive = InputManager.__inputHandlingStateMap.get(INPUT_HANDLING_STATE_CAMERACONTROLLER);
        if (cameraControllerActive) {
            this.__addEventListeners(INPUT_HANDLING_STATE_CAMERACONTROLLER);
            this.__currentState = INPUT_HANDLING_STATE_CAMERACONTROLLER;
        }
        // If translationGizmo enabled
        if (translationGizmoActive) {
            this.__addEventListeners(INPUT_HANDLING_STATE_GIZMO_TRNSLATION);
            // this.__removeEventListeners(INPUT_HANDLING_STATE_CAMERACONTROLLER);
            this.__removeEventListeners(INPUT_HANDLING_STATE_GIZMO_SCALE);
            this.__currentState = INPUT_HANDLING_STATE_GIZMO_TRNSLATION;
        }
        if (scaleGizmoActive) {
            this.__addEventListeners(INPUT_HANDLING_STATE_GIZMO_SCALE);
            // this.__removeEventListeners(INPUT_HANDLING_STATE_CAMERACONTROLLER);
            this.__removeEventListeners(INPUT_HANDLING_STATE_GIZMO_TRNSLATION);
            this.__currentState = INPUT_HANDLING_STATE_GIZMO_SCALE;
        }
    }
    static enableCameraController() {
        this.__addEventListeners(INPUT_HANDLING_STATE_CAMERACONTROLLER);
    }
    static disableCameraController() {
        this.__removeEventListeners(INPUT_HANDLING_STATE_CAMERACONTROLLER);
    }
    static getCurrentState() {
        return this.__currentState;
    }
}
InputManager.__inputHandlingStateMap = new Map();
/**
 * This active information is set externally and does not change state internally.
 * Using this externally set active information, this class will add and remove event listeners as appropriate.
 * As a result, event handling for the entire Rhodonite works properly.
 */
InputManager.__activeMap = new Map();
InputManager.__currentState = INPUT_HANDLING_STATE_NONE;


/***/ }),

/***/ "./src/foundation/system/ModuleManager.ts":
/*!************************************************!*\
  !*** ./src/foundation/system/ModuleManager.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ModuleManager": () => (/* binding */ ModuleManager)
/* harmony export */ });
class ModuleManager {
    constructor() {
        this.__modules = new Map();
    }
    /* eslint-disable prettier/prettier */
    async loadModule(moduleName, options) {
        let module;
        if (moduleName.toLowerCase() === 'webgl') {
            module = await (await Promise.resolve(/*! import() | webgl */).then(__webpack_require__.bind(__webpack_require__, /*! ../../webgl/main */ "./src/webgl/main.ts"))).default;
        }
        else if (moduleName.toLowerCase() === 'effekseer') {
            module = await (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../effekseer/main */ "./src/effekseer/main.ts"))).Effekseer;
            module.EffekseerComponent.wasmModuleUri = options === null || options === void 0 ? void 0 : options.wasm;
        }
        else if (moduleName.toLowerCase() === 'sparkgear') {
            module = await (await Promise.resolve(/*! import() | sparkgear */).then(__webpack_require__.bind(__webpack_require__, /*! ../../sparkgear/main */ "./src/sparkgear/main.ts"))).default;
        }
        else if (moduleName.toLowerCase() === 'pbr') {
            module = await (await Promise.resolve(/*! import() | pbr */).then(__webpack_require__.bind(__webpack_require__, /*! ../../pbr/main */ "./src/pbr/main.ts"))).default;
        }
        else if (moduleName.toLowerCase() === 'xr') {
            module = await (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../xr/main */ "./src/xr/main.ts"))).default;
        }
        this.__modules.set(moduleName, module);
        // console.log('Module Loaded:', module);
        return module;
    }
    getModule(moduleName) {
        return this.__modules.get(moduleName);
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new ModuleManager();
        }
        return this.__instance;
    }
}


/***/ }),

/***/ "./src/foundation/system/System.ts":
/*!*****************************************!*\
  !*** ./src/foundation/system/System.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "System": () => (/* binding */ System)
/* harmony export */ });
/* harmony import */ var _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _ModuleManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _core_Component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _renderer_Expression__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../renderer/Expression */ "./src/foundation/renderer/Expression.ts");
/* harmony import */ var _core_EntityRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _math_Vector3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _definitions_CameraType__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../definitions/CameraType */ "./src/foundation/definitions/CameraType.ts");
/* harmony import */ var _misc_Time__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../misc/Time */ "./src/foundation/misc/Time.ts");
/* harmony import */ var _SystemState__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./SystemState */ "./src/foundation/system/SystemState.ts");
/* harmony import */ var _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _renderer_Frame__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../renderer/Frame */ "./src/foundation/renderer/Frame.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../renderer/RenderPass */ "./src/foundation/renderer/RenderPass.ts");
/* harmony import */ var _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");























class System {
    constructor() { }
    static startRenderLoop(renderLoopFunc, ...args) {
        this.__renderLoopFunc = renderLoopFunc;
        this.__args = args;
        const animationFrameObject = this.__getAnimationFrameObject();
        this.__animationFrameId = animationFrameObject.requestAnimationFrame(((_time, xrFrame) => {
            const rnVRModule = _ModuleManager__WEBPACK_IMPORTED_MODULE_3__.ModuleManager.getInstance().getModule('xr');
            const webXRSystem = rnVRModule === null || rnVRModule === void 0 ? void 0 : rnVRModule.WebXRSystem.getInstance();
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(rnVRModule)) {
                if (webXRSystem.isReadyForWebXR) {
                    webXRSystem._preRender(_time, xrFrame);
                }
            }
            renderLoopFunc.apply(renderLoopFunc, [_time, ...args]);
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(rnVRModule)) {
                if (webXRSystem.isReadyForWebXR) {
                    webXRSystem._postRender();
                }
            }
            this.startRenderLoop(renderLoopFunc, ...args);
        }));
    }
    static __getAnimationFrameObject() {
        let animationFrameObject = window;
        const rnVRModule = _ModuleManager__WEBPACK_IMPORTED_MODULE_3__.ModuleManager.getInstance().getModule('xr');
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(rnVRModule)) {
            const webXRSystem = rnVRModule.WebXRSystem.getInstance();
            if (webXRSystem.requestedToEnterWebXR) {
                animationFrameObject = webXRSystem.xrSession;
            }
            if (_misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.not.exist(animationFrameObject)) {
                return window;
            }
        }
        return animationFrameObject;
    }
    static stopRenderLoop() {
        const animationFrameObject = this.__getAnimationFrameObject();
        animationFrameObject.cancelAnimationFrame(this.__animationFrameId);
        this.__animationFrameId = -1;
    }
    static restartRenderLoop() {
        if (this.__renderLoopFunc != null) {
            this.startRenderLoop(this.__renderLoopFunc, 0, this.__args);
        }
    }
    static processAuto(clearColor = _math_Vector4__WEBPACK_IMPORTED_MODULE_20__.Vector4.fromCopy4(0, 0, 0, 1)) {
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.not.exist(System.__expressionForProcessAuto)) {
            const expression = new _renderer_Expression__WEBPACK_IMPORTED_MODULE_6__.Expression();
            const renderPassInit = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_21__.RenderPass();
            renderPassInit.toClearColorBuffer = true;
            renderPassInit.toClearDepthBuffer = true;
            renderPassInit.clearColor = clearColor;
            const renderPassMain = new _renderer_RenderPass__WEBPACK_IMPORTED_MODULE_21__.RenderPass();
            expression.addRenderPasses([renderPassInit, renderPassMain]);
            System.__expressionForProcessAuto = expression;
            System.__renderPassForProcessAuto = renderPassMain;
        }
        System.__renderPassForProcessAuto.clearEntities();
        const entities = _core_EntityRepository__WEBPACK_IMPORTED_MODULE_7__.EntityRepository._getEntities();
        System.__renderPassForProcessAuto.addEntities(entities);
        this.process([System.__expressionForProcessAuto]);
    }
    static process(value) {
        if (typeof spector !== 'undefined') {
            spector.setMarker('Rn#');
        }
        if (this.__processApproach === _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__.ProcessApproach.None) {
            throw new Error('Choose a process approach first.');
        }
        _misc_Time__WEBPACK_IMPORTED_MODULE_13__.Time._processBegin();
        let expressions = value;
        if (value instanceof _renderer_Frame__WEBPACK_IMPORTED_MODULE_19__.Frame) {
            expressions = value.expressions;
        }
        if (_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_8__.CameraComponent.current === _core_Component__WEBPACK_IMPORTED_MODULE_5__.Component.InvalidObjectUID) {
            const cameraEntity = _helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_17__.EntityHelper.createCameraEntity();
            cameraEntity.getTransform().translate = _math_Vector3__WEBPACK_IMPORTED_MODULE_11__.Vector3.fromCopyArray([0, 0, 1]);
            cameraEntity.getCamera().type = _definitions_CameraType__WEBPACK_IMPORTED_MODULE_12__.CameraType.Orthographic;
            cameraEntity.getCamera().zNear = 0.1;
            cameraEntity.getCamera().zFar = 10000;
            const wgl = this.__webglResourceRepository.currentWebGLContextWrapper;
            cameraEntity.getCamera().xMag = wgl.width / wgl.height;
            cameraEntity.getCamera().yMag = 1;
        }
        const repo = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const rnVRModule = _ModuleManager__WEBPACK_IMPORTED_MODULE_3__.ModuleManager.getInstance().getModule('xr');
        const webXRSystem = rnVRModule === null || rnVRModule === void 0 ? void 0 : rnVRModule.WebXRSystem.getInstance();
        const componentTids = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentTIDs();
        for (const stage of _core_Component__WEBPACK_IMPORTED_MODULE_5__.Component._processStages) {
            const methodName = stage.methodName;
            const commonMethodName = 'common_' + methodName;
            if (stage === _definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_0__.ProcessStage.Render) {
                for (const exp of expressions) {
                    for (const componentTid of componentTids) {
                        const componentClass = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentClass(componentTid);
                        let renderPassN = 0;
                        if (!(componentTid === _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_22__.WellKnownComponentTIDs.MeshRendererComponentTID ||
                            componentTid === _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_22__.WellKnownComponentTIDs.EffekseerComponentTID)) {
                            continue;
                        }
                        renderPassN = exp.renderPasses.length;
                        for (let i = 0; i < renderPassN; i++) {
                            const renderPass = exp.renderPasses[i];
                            if (typeof spector !== 'undefined') {
                                spector.setMarker(`| ${exp.uniqueName}: ${renderPass.uniqueName}#`);
                            }
                            renderPass.doPreRender();
                            repo.switchDepthTest(renderPass.isDepthTest);
                            if (componentTid === _components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_22__.WellKnownComponentTIDs.MeshRendererComponentTID) {
                                // bind Framebuffer
                                System.bindFramebuffer(webXRSystem, renderPass);
                                // set Viewport for Normal (Not WebXR)
                                System.setViewportForNormalRendering(webXRSystem, renderPass);
                                // clear Framebuffer
                                this.__webglResourceRepository.clearFrameBuffer(renderPass);
                            }
                            componentClass.updateComponentsOfEachProcessStage(componentClass, stage, renderPass);
                            const componentClass_commonMethod = componentClass[commonMethodName];
                            if (componentClass_commonMethod) {
                                componentClass_commonMethod({
                                    processApproach: this.__processApproach,
                                    renderPass: renderPass,
                                    processStage: stage,
                                    renderPassTickCount: this.__renderPassTickCount,
                                });
                            }
                            componentClass.process({
                                componentType: componentClass,
                                processStage: stage,
                                processApproach: this.__processApproach,
                                strategy: this.__webglStrategy,
                                renderPass: void 0,
                                renderPassTickCount: this.__renderPassTickCount,
                            });
                            this.__renderPassTickCount++;
                            if (renderPass.getResolveFramebuffer()) {
                                renderPass.copyFramebufferToResolveFramebuffer();
                            }
                            if (renderPass.getResolveFramebuffer2()) {
                                renderPass.copyFramebufferToResolveFramebuffer2();
                            }
                        }
                    }
                }
            }
            else {
                for (const componentTid of componentTids) {
                    const componentClass = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentClass(componentTid);
                    componentClass.updateComponentsOfEachProcessStage(componentClass, stage);
                    const componentClass_commonMethod = componentClass[commonMethodName];
                    if (componentClass_commonMethod) {
                        componentClass_commonMethod({
                            processApproach: this.__processApproach,
                            renderPass: void 0,
                            processStage: stage,
                            renderPassTickCount: this.__renderPassTickCount,
                        });
                    }
                    componentClass.process({
                        componentType: componentClass,
                        processStage: stage,
                        processApproach: this.__processApproach,
                        strategy: this.__webglStrategy,
                        renderPass: void 0,
                        renderPassTickCount: this.__renderPassTickCount,
                    });
                }
            }
        }
        _misc_Time__WEBPACK_IMPORTED_MODULE_13__.Time._processEnd();
    }
    static setViewportForNormalRendering(webXRSystem, renderPass) {
        if (!(webXRSystem === null || webXRSystem === void 0 ? void 0 : webXRSystem.isWebXRMode) || !renderPass.isVrRendering) {
            this.__webglResourceRepository.setViewport(renderPass.getViewport());
        }
    }
    static bindFramebuffer(webXRSystem, renderPass) {
        if ((webXRSystem === null || webXRSystem === void 0 ? void 0 : webXRSystem.isWebXRMode) && renderPass.isOutputForVr) {
            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
            const gl = glw.getRawContext();
            gl.bindFramebuffer(gl.FRAMEBUFFER, webXRSystem.framebuffer);
        }
        else {
            this.__webglResourceRepository.bindFramebuffer(renderPass.getFramebuffer());
            this.__webglResourceRepository.setDrawTargets(renderPass);
        }
    }
    static async init(desc) {
        await _ModuleManager__WEBPACK_IMPORTED_MODULE_3__.ModuleManager.getInstance().loadModule('webgl');
        await _ModuleManager__WEBPACK_IMPORTED_MODULE_3__.ModuleManager.getInstance().loadModule('pbr');
        System.__webglResourceRepository =
            _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        _core_Config__WEBPACK_IMPORTED_MODULE_18__.Config.eventTargetDom = desc.canvas;
        const repo = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        _core_MemoryManager__WEBPACK_IMPORTED_MODULE_9__.MemoryManager.createInstanceIfNotCreated({
            cpuGeneric: _misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(desc.memoryUsageOrder)
                ? desc.memoryUsageOrder.cpuGeneric
                : 0.3,
            gpuInstanceData: _misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(desc.memoryUsageOrder)
                ? desc.memoryUsageOrder.gpuInstanceData
                : 0.4,
            gpuVertexData: _misc_Is__WEBPACK_IMPORTED_MODULE_16__.Is.exist(desc.memoryUsageOrder)
                ? desc.memoryUsageOrder.gpuVertexData
                : 0.6,
        });
        const globalDataRepository = _core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_10__.GlobalDataRepository.getInstance();
        globalDataRepository.initialize(desc.approach);
        const gl = repo.generateWebGLContext(desc.canvas, desc.approach.webGLVersion, true, desc.rnWebGLDebug ? desc.rnWebGLDebug : true, desc.webglOption, desc.fallback3dApi);
        repo.switchDepthTest(true);
        this.__processApproach = desc.approach;
        _SystemState__WEBPACK_IMPORTED_MODULE_14__["default"].currentProcessApproach = desc.approach;
        if (desc.rnWebGLDebug &&
            _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_15__.MiscUtil.isMobile() &&
            _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__.ProcessApproach.isUniformApproach(desc.approach)) {
            alert('Use the FastestWebGL1/FastestWebGL2 as the argument of setProcessApproachAndCanvas method for this device.');
        }
        desc.canvas.addEventListener('webglcontextlost', ((event) => {
            // Calling preventDefault signals to the page that you intent to handle context restoration.
            event.preventDefault();
            this.stopRenderLoop();
            console.error('WebGL context lost occurred.');
        }).bind(this));
        desc.canvas.addEventListener('webglcontextrestored', () => {
            // Once this function is called the gl context will be restored but any graphics resources
            // that were previously loaded will be lost, so the scene should be reloaded.
            console.error('WebGL context restored.');
            // TODO: Implement restoring the previous graphics resources
            // loadSceneGraphics(gl);
            this.restartRenderLoop();
        });
        // this.detectComponentMethods();
        return gl;
    }
    static detectComponentMethods() {
        const wellKnownComponentTIDs = Array.from(Object.values(_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_22__.WellKnownComponentTIDs));
        for (const componentTid of wellKnownComponentTIDs) {
            for (const stage of _core_Component__WEBPACK_IMPORTED_MODULE_5__.Component._processStages) {
                const componentClass = _core_ComponentRepository__WEBPACK_IMPORTED_MODULE_1__.ComponentRepository.getComponentClass(componentTid);
                const exist = componentClass.doesTheProcessStageMethodExist(componentClass, stage);
                if (exist) {
                    (0, _misc_MiscUtil__WEBPACK_IMPORTED_MODULE_15__.valueWithCompensation)({
                        value: this.__stageMethods.get(componentClass),
                        compensation: () => new Map(),
                    });
                    // map.set()
                    // this.__stageMethods.set(componentClass, stage.methodName);
                }
            }
        }
    }
    static get processApproach() {
        return this.__processApproach;
    }
    static resizeCanvas(width, height) {
        const repo = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        repo.resizeCanvas(width, height);
    }
    static getCanvasSize() {
        const repo = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        return repo.getCanvasSize();
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new System();
        }
        return this.__instance;
    }
}
System.__processApproach = _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_2__.ProcessApproach.None;
System.__renderPassTickCount = 0;
System.__animationFrameId = -1;
System.__args = [];
System.__stageMethods = new Map();


/***/ }),

/***/ "./src/foundation/system/SystemState.ts":
/*!**********************************************!*\
  !*** ./src/foundation/system/SystemState.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");

const currentProcessApproach = _definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__.ProcessApproach.None;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    currentProcessApproach,
});


/***/ }),

/***/ "./src/foundation/system/index.ts":
/*!****************************************!*\
  !*** ./src/foundation/system/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EVENT_CLICK": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_CLICK),
/* harmony export */   "EVENT_KEY_DOWN": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_KEY_DOWN),
/* harmony export */   "EVENT_KEY_PRESS": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_KEY_PRESS),
/* harmony export */   "EVENT_KEY_UP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_KEY_UP),
/* harmony export */   "EVENT_MOUSE_DOWN": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_DOWN),
/* harmony export */   "EVENT_MOUSE_ENTER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_ENTER),
/* harmony export */   "EVENT_MOUSE_LEAVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_LEAVE),
/* harmony export */   "EVENT_MOUSE_MOVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_MOVE),
/* harmony export */   "EVENT_MOUSE_OVER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_OVER),
/* harmony export */   "EVENT_MOUSE_UP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_UP),
/* harmony export */   "EVENT_MOUSE_WHEEL": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MOUSE_WHEEL),
/* harmony export */   "EVENT_MSPOINTER_DOWN": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MSPOINTER_DOWN),
/* harmony export */   "EVENT_MSPOINTER_MOVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MSPOINTER_MOVE),
/* harmony export */   "EVENT_MSPOINTER_UP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_MSPOINTER_UP),
/* harmony export */   "EVENT_ORIENTATION_CHANGE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_ORIENTATION_CHANGE),
/* harmony export */   "EVENT_POINTER_CANCEL": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_CANCEL),
/* harmony export */   "EVENT_POINTER_DOWN": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_DOWN),
/* harmony export */   "EVENT_POINTER_ENTER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_ENTER),
/* harmony export */   "EVENT_POINTER_LEAVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_LEAVE),
/* harmony export */   "EVENT_POINTER_MOVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_MOVE),
/* harmony export */   "EVENT_POINTER_OUT": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_OUT),
/* harmony export */   "EVENT_POINTER_OVER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_OVER),
/* harmony export */   "EVENT_POINTER_UP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_POINTER_UP),
/* harmony export */   "EVENT_RESIZE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_RESIZE),
/* harmony export */   "EVENT_TOUCH_CANCEL": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_CANCEL),
/* harmony export */   "EVENT_TOUCH_DOUBLE_TAP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_DOUBLE_TAP),
/* harmony export */   "EVENT_TOUCH_DRAG": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_DRAG),
/* harmony export */   "EVENT_TOUCH_END": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_END),
/* harmony export */   "EVENT_TOUCH_ENTER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_ENTER),
/* harmony export */   "EVENT_TOUCH_HOLD": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_HOLD),
/* harmony export */   "EVENT_TOUCH_LEAVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_LEAVE),
/* harmony export */   "EVENT_TOUCH_LONG_TAP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_LONG_TAP),
/* harmony export */   "EVENT_TOUCH_MOVE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_MOVE),
/* harmony export */   "EVENT_TOUCH_OUT": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_OUT),
/* harmony export */   "EVENT_TOUCH_OVER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_OVER),
/* harmony export */   "EVENT_TOUCH_PINCH": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_PINCH),
/* harmony export */   "EVENT_TOUCH_START": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_START),
/* harmony export */   "EVENT_TOUCH_SWIPE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_SWIPE),
/* harmony export */   "EVENT_TOUCH_TAP": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.EVENT_TOUCH_TAP),
/* harmony export */   "EventPubSub": () => (/* reexport safe */ _EventPubSub__WEBPACK_IMPORTED_MODULE_0__.EventPubSub),
/* harmony export */   "INPUT_HANDLING_STATE_CAMERACONTROLLER": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.INPUT_HANDLING_STATE_CAMERACONTROLLER),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_SCALE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.INPUT_HANDLING_STATE_GIZMO_SCALE),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_TRNSLATION": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION),
/* harmony export */   "INPUT_HANDLING_STATE_NONE": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.INPUT_HANDLING_STATE_NONE),
/* harmony export */   "InputManager": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.InputManager),
/* harmony export */   "ModuleManager": () => (/* reexport safe */ _ModuleManager__WEBPACK_IMPORTED_MODULE_2__.ModuleManager),
/* harmony export */   "System": () => (/* reexport safe */ _System__WEBPACK_IMPORTED_MODULE_3__.System),
/* harmony export */   "getEvent": () => (/* reexport safe */ _InputManager__WEBPACK_IMPORTED_MODULE_1__.getEvent)
/* harmony export */ });
/* harmony import */ var _EventPubSub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventPubSub */ "./src/foundation/system/EventPubSub.ts");
/* harmony import */ var _InputManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InputManager */ "./src/foundation/system/InputManager.ts");
/* harmony import */ var _ModuleManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _System__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./System */ "./src/foundation/system/System.ts");
/* harmony import */ __webpack_require__(/*! ./SystemState */ "./src/foundation/system/SystemState.ts");







/***/ }),

/***/ "./src/foundation/textures/AbstractTexture.ts":
/*!****************************************************!*\
  !*** ./src/foundation/textures/AbstractTexture.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractTexture": () => (/* binding */ AbstractTexture)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _TextureDataFloat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TextureDataFloat */ "./src/foundation/textures/TextureDataFloat.ts");
/* harmony import */ var _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _misc_Is__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/Is */ "./src/foundation/misc/Is.ts");







class AbstractTexture extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.__width = 0;
        this.__height = 0;
        this.__level = 0;
        this.__internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.RGBA8;
        this.__format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_1__.PixelFormat.RGBA;
        this.__type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_2__.ComponentType.UnsignedByte;
        this.__magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.Linear;
        this.__minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.Linear;
        this.__wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.ClampToEdge;
        this.__wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.ClampToEdge;
        this.__hasTransparentPixels = false;
        this.cgApiResourceUid = -1;
        this.__isTextureReady = false;
        this.__startedToLoad = false;
        this.__name = 'untitled';
        this.__textureUid = ++AbstractTexture.__textureUidCount;
    }
    get textureUID() {
        return this.__textureUid;
    }
    get width() {
        return this.__width;
    }
    set width(val) {
        this.__width = val;
    }
    get height() {
        return this.__height;
    }
    set height(val) {
        this.__height = val;
    }
    get isTextureReady() {
        return this.__isTextureReady;
    }
    get startedToLoad() {
        return this.__startedToLoad;
    }
    get htmlImageElement() {
        return this.__htmlImageElement;
    }
    get htmlCanvasElement() {
        const canvas = document.createElement('canvas');
        const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');
        this.__htmlCanvasElement = canvas;
        if (_misc_Is__WEBPACK_IMPORTED_MODULE_6__.Is.exist(ctx) && _misc_Is__WEBPACK_IMPORTED_MODULE_6__.Is.exist(this.__htmlImageElement)) {
            canvas.width = this.__htmlImageElement.width;
            canvas.height = this.__htmlImageElement.height;
            ctx.drawImage(this.__htmlImageElement, 0, 0, this.__htmlImageElement.width, this.__htmlImageElement.height);
        }
        return this.__htmlCanvasElement;
    }
    get uri() {
        return this.__uri;
    }
    static getRhodoniteTexture(textureUid) {
        return this.__textureMap.get(textureUid);
    }
    set name(name) {
        this.__name = name;
    }
    get name() {
        return this.__name;
    }
    getImageData(x, y, width, height) {
        if (this.__canvasContext === undefined) {
            this.createInternalCanvasContext();
        }
        return this.__canvasContext.getImageData(x, y, width, height);
    }
    getPixelAs(x, y, typeClass) {
        const pixel = this.getImageData(x, y, 1, 1);
        const data = pixel.data;
        if (typeClass.compositionType === _definitions_CompositionType__WEBPACK_IMPORTED_MODULE_5__.CompositionType.Vec4) {
            return new typeClass(new Float32Array([data[0], data[1], data[2], data[3]]));
        }
        else {
            return new typeClass(new Float32Array([data[0], data[1], data[2]]));
        }
    }
    /**
     * get the pixel data at (x,y) in the Texture as Uint8Clamped Array
     * @param x x position in the texture
     * @param y y position in the texture
     * @returns a pixel data as Uint8Clamped Array
     */
    getPixelAsArray(x, y) {
        const pixel = this.getImageData(x, y, 1, 1);
        return pixel.data;
    }
    setPixel(x, y, value) {
        const pixel = this.getImageData(x, y, 1, 1);
        const data = pixel.data;
        const classOfValue = value.constructor;
        const numberOfComponents = classOfValue.compositionType.getNumberOfComponents();
        for (let i = 0; i < numberOfComponents; i++) {
            data[i] = value.at(i);
        }
        this.__canvasContext.putImageData(pixel, x, y);
    }
    setPixelAtChannel(x, y, channelIdx, value) {
        const pixel = this.getImageData(x, y, 1, 1);
        const data = pixel.data;
        data[channelIdx] = value;
        this.__canvasContext.putImageData(pixel, x, y);
    }
    get isTransparent() {
        return this.__hasTransparentPixels;
    }
    createInternalCanvasContext() {
        let canvas;
        if (this.__htmlCanvasElement != null) {
            canvas = this.__htmlCanvasElement;
        }
        else {
            canvas = document.createElement('canvas');
            canvas.width = this.width;
            canvas.height = this.height;
        }
        this.__htmlCanvasElement = canvas;
        this.__canvasContext = canvas.getContext('2d');
    }
    getTextureDataFloat(channels) {
        const pixel = this.getImageData(0, 0, this.width, this.height);
        const textureDataFloat = new _TextureDataFloat__WEBPACK_IMPORTED_MODULE_4__.TextureDataFloat(this.width, this.height, channels);
        const data = pixel.data;
        for (let i = 0; i < this.height; i++) {
            for (let j = 0; j < this.width; j++) {
                for (let k = 0; k < channels; k++) {
                    textureDataFloat.setPixelAtChannel(j, i, k, data[i * this.width * 4 + j * 4 + k] / 255);
                }
            }
        }
        return textureDataFloat;
    }
    get magFilter() {
        return this.__magFilter;
    }
    get minFilter() {
        return this.__minFilter;
    }
    get wrapS() {
        return this.__wrapS;
    }
    get wrapT() {
        return this.__wrapT;
    }
}
AbstractTexture.InvalidTextureUid = -1;
AbstractTexture.__textureUidCount = AbstractTexture.InvalidTextureUid;
AbstractTexture.__textureMap = new Map();


/***/ }),

/***/ "./src/foundation/textures/CubeTexture.ts":
/*!************************************************!*\
  !*** ./src/foundation/textures/CubeTexture.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CubeTexture": () => (/* binding */ CubeTexture)
/* harmony export */ });
/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");




class CubeTexture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture {
    constructor() {
        super();
        this.mipmapLevelNumber = 1;
        this.hdriFormat = _definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_1__.HdriFormat.LDR_SRGB;
        this.isNamePosNeg = false;
    }
    async loadTextureImages() {
        this.__startedToLoad = true;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.cgApiResourceUid =
            await webGLResourceRepository.createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat);
        this.__isTextureReady = true;
    }
    loadTextureImagesAsync() {
        this.__startedToLoad = true;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
        webGLResourceRepository
            .createCubeTextureFromFiles(this.baseUriToLoad, this.mipmapLevelNumber, this.isNamePosNeg, this.hdriFormat)
            .then(cubeTextureUid => {
            this.cgApiResourceUid = cubeTextureUid;
        })
            .then(() => {
            this.__isTextureReady = true;
        });
    }
    loadTextureImagesFromBasis(uint8Array, { magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_3__.TextureParameter.Repeat, } = {}) {
        this.__startedToLoad = true;
        if (typeof BASIS === 'undefined') {
            console.error('Failed to call BASIS() function. Please check to import basis_transcoder.js.');
        }
        BASIS().then((basisTransCoder) => {
            const { initializeBasis } = basisTransCoder;
            initializeBasis();
            const BasisFile = basisTransCoder.BasisFile;
            const basisFile = new BasisFile(uint8Array);
            if (!basisFile.startTranscoding()) {
                console.error('failed to start transcoding.');
                basisFile.close();
                basisFile.delete();
                return;
            }
            const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
            const texture = webGLResourceRepository.createCubeTextureFromBasis(basisFile, {
                magFilter: magFilter,
                minFilter: minFilter,
                wrapS: wrapS,
                wrapT: wrapT,
            });
            this.cgApiResourceUid = texture;
            this.__isTextureReady = true;
            basisFile.close();
            basisFile.delete();
        });
    }
    load1x1Texture(rgbaStr = 'rgba(0,0,0,1)') {
        const canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = rgbaStr;
        ctx.fillRect(0, 0, 1, 1);
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.cgApiResourceUid = webGLResourceRepository.createCubeTexture(1, [
            {
                posX: canvas,
                negX: canvas,
                posY: canvas,
                negY: canvas,
                posZ: canvas,
                negZ: canvas,
            },
        ], 1, 1);
        this.__isTextureReady = true;
    }
    /**
     * Generate cubemap texture object from typed array of cubemap images
     * @param typedArrays Array of typed array object for cubemap textures. The nth element is the nth mipmap reduction level(level 0 is the base image level).
     * @param width Texture width of the base image level texture
     * @param height Texture height of the base image level texture
     */
    generateTextureFromTypedArrays(typedArrayImages, baseLevelWidth, baseLevelHeight) {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.cgApiResourceUid = webGLResourceRepository.createCubeTexture(typedArrayImages.length, typedArrayImages, baseLevelWidth, baseLevelHeight);
        this.__isTextureReady = true;
        this.__startedToLoad = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture.__textureMap.set(this.cgApiResourceUid, this);
    }
    importWebGLTextureDirectly(webGLTexture, width = 0, height = 0) {
        this.__width = width;
        this.__height = height;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.setWebGLTextureDirectly(webGLTexture);
        this.cgApiResourceUid = texture;
        this.__startedToLoad = true;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture.__textureMap.set(texture, this);
    }
}


/***/ }),

/***/ "./src/foundation/textures/IRenderable.ts":
/*!************************************************!*\
  !*** ./src/foundation/textures/IRenderable.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/foundation/textures/RenderBuffer.ts":
/*!*************************************************!*\
  !*** ./src/foundation/textures/RenderBuffer.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderBuffer": () => (/* binding */ RenderBuffer)
/* harmony export */ });
/* harmony import */ var _core_RnObject__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/RnObject */ "./src/foundation/core/RnObject.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");



class RenderBuffer extends _core_RnObject__WEBPACK_IMPORTED_MODULE_0__.RnObject {
    constructor() {
        super();
        this.width = 0;
        this.height = 0;
        this.__internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Depth24;
        this.cgApiResourceUid = -1;
        this.__isMSAA = false;
        this.__sampleCountMSAA = 4;
    }
    set _fbo(fbo) {
        this.__fbo = fbo;
    }
    get fbo() {
        return this.__fbo;
    }
    create(width, height, internalFormat, { isMSAA = false, sampleCountMSAA = this.__sampleCountMSAA } = {}) {
        this.width = width;
        this.height = height;
        this.__isMSAA = isMSAA;
        this.__sampleCountMSAA = sampleCountMSAA;
        this.__internalFormat = internalFormat;
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        this.cgApiResourceUid = webglResourceRepository.createRenderBuffer(width, height, internalFormat, isMSAA, sampleCountMSAA);
    }
    resize(width, height) {
        this.destroy3DAPIResources();
        this.create(width, height, this.__internalFormat, { isMSAA: this.__isMSAA });
    }
    destroy3DAPIResources() {
        this.width = 0;
        this.height = 0;
        const webglResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        webglResourceRepository.deleteRenderBuffer(this.cgApiResourceUid);
        this.cgApiResourceUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        return true;
    }
}


/***/ }),

/***/ "./src/foundation/textures/RenderTargetTexture.ts":
/*!********************************************************!*\
  !*** ./src/foundation/textures/RenderTargetTexture.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderTargetTexture": () => (/* binding */ RenderTargetTexture)
/* harmony export */ });
/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _math_Vector4__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math/Vector4 */ "./src/foundation/math/Vector4.ts");






class RenderTargetTexture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture {
    constructor() {
        super();
    }
    create({ width, height, level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__.TextureParameter.RGB8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_1__.TextureParameter.ClampToEdge, }) {
        this.__width = width;
        this.__height = height;
        this.__level = level;
        this.__internalFormat = internalFormat;
        this.__format = format;
        this.__type = type;
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        this.__createRenderTargetTexture();
    }
    set _fbo(fbo) {
        this.__fbo = fbo;
    }
    get fbo() {
        return this.__fbo;
    }
    __createRenderTargetTexture() {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createRenderTargetTexture({
            width: this.__width,
            height: this.__height,
            level: this.__level,
            internalFormat: this.__internalFormat,
            format: this.__format,
            type: this.__type,
            magFilter: this.__magFilter,
            minFilter: this.__minFilter,
            wrapS: this.__wrapS,
            wrapT: this.__wrapT,
        });
        this.cgApiResourceUid = texture;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture.__textureMap.set(texture, this);
    }
    resize(width, height) {
        this.destroy3DAPIResources();
        this.__width = width;
        this.__height = height;
        this.__createRenderTargetTexture();
    }
    destroy3DAPIResources() {
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture.__textureMap["delete"](this.cgApiResourceUid);
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        webGLResourceRepository.deleteTexture(this.cgApiResourceUid);
        this.cgApiResourceUid = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        return true;
    }
    getTexturePixelData() {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        // Create a framebuffer backed by the texture
        const fbo = webGLResourceRepository.getWebGLResource(this.__fbo.framebufferUID);
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        // const texture = webGLResourceRepository.getWebGLResource(this.cgApiResourceUid!) as WebGLTexture;
        // gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);
        // Read the contents of the framebuffer (data stores the pixel data)
        const data = new Uint8Array(this.width * this.height * 4);
        if (gl.readBuffer != null) {
            gl.readBuffer(36064 + this.__fbo.whichColorAttachment(this)); // 36064 means gl.COLOR_ATTACHMENT0
        }
        gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, data);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        return data;
    }
    /**
     * Origin is left bottom
     *
     * @param x horizontal pixel position (0 is left)
     * @param y vertical pixel position (0 is bottom)
     * @param argByteArray Pixel Data as Uint8Array
     * @returns Pixel Value in Vector4
     */
    getPixelValueAt(x, y, argByteArray) {
        let byteArray = argByteArray;
        if (!byteArray) {
            byteArray = this.getTexturePixelData();
        }
        const color = _math_Vector4__WEBPACK_IMPORTED_MODULE_5__.Vector4.fromCopyArray([
            byteArray[(y * this.width + x) * 4 + 0],
            byteArray[(y * this.width + x) * 4 + 1],
            byteArray[(y * this.width + x) * 4 + 2],
            byteArray[(y * this.width + x) * 4 + 3],
        ]);
        return color;
    }
    generateMipmap() {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        const texture = webGLResourceRepository.getWebGLResource(this.cgApiResourceUid);
        gl.bindTexture(gl.TEXTURE_2D, texture);
        gl.generateMipmap(gl.TEXTURE_2D);
        gl.bindTexture(gl.TEXTURE_2D, null);
    }
}


/***/ }),

/***/ "./src/foundation/textures/Texture.ts":
/*!********************************************!*\
  !*** ./src/foundation/textures/Texture.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Texture": () => (/* binding */ Texture)
/* harmony export */ });
/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _core_Config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _webgl_textureLoader_KTX2TextureLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/textureLoader/KTX2TextureLoader */ "./src/webgl/textureLoader/KTX2TextureLoader.ts");








class Texture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture {
    constructor() {
        super();
        this.autoResize = true;
        this.autoDetectTransparency = false;
    }
    generateTextureFromBasis(uint8Array, options) {
        var _a;
        this.__startedToLoad = true;
        this.__magFilter = options.magFilter;
        this.__minFilter = options.minFilter;
        this.__wrapS = options.wrapS;
        this.__wrapT = options.wrapT;
        if (typeof BASIS === 'undefined') {
            console.error('Failed to call BASIS() function. Please check to import basis_transcoder.js.');
        }
        // download basis_transcoder.wasm once
        if (!Texture.__loadedBasisFunc) {
            Texture.__loadedBasisFunc = true;
            Texture.__basisLoadPromise = new Promise(resolve => {
                BASIS().then((basisTransCoder) => {
                    const { initializeBasis } = basisTransCoder;
                    initializeBasis();
                    Texture.__BasisFile = basisTransCoder.BasisFile;
                    this.__setBasisTexture(uint8Array, options);
                    resolve();
                });
            });
        }
        else {
            // already download basis_transcoder.wasm or not
            if (Texture.__BasisFile) {
                this.__setBasisTexture(uint8Array, options);
            }
            else {
                (_a = Texture.__basisLoadPromise) === null || _a === void 0 ? void 0 : _a.then(() => {
                    this.__setBasisTexture(uint8Array, options);
                });
            }
        }
    }
    __setBasisTexture(uint8Array, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, generateMipmap = true, anisotropy = true, isPremultipliedAlpha = false, } = {}) {
        this.__startedToLoad = true;
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        const basisFile = new Texture.__BasisFile(uint8Array);
        if (!basisFile.startTranscoding()) {
            console.error('failed to start transcoding.');
            basisFile.close();
            basisFile.delete();
            return;
        }
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createCompressedTextureFromBasis(basisFile, {
            border: 0,
            format,
            type,
            magFilter,
            minFilter,
            wrapS,
            wrapT,
            anisotropy,
            isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
        basisFile.close();
        basisFile.delete();
    }
    generateTextureFromKTX2(uint8Array, { magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, anisotropy = true,
    // isPremultipliedAlpha = false,
     } = {}) {
        this.__startedToLoad = true;
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        const transcodedData = _webgl_textureLoader_KTX2TextureLoader__WEBPACK_IMPORTED_MODULE_7__.KTX2TextureLoader.getInstance().transcode(uint8Array);
        transcodedData.then((data) => {
            this.__width = data.width;
            this.__height = data.height;
            this.generateCompressedTextureWithMipmapFromTypedArray(data.mipmapData, data.compressionTextureType, {
                magFilter,
                minFilter,
                wrapS,
                wrapT,
                anisotropy,
                // isPremultipliedAlpha = false,
            });
        });
    }
    generateTextureFromImage(image, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, generateMipmap = true, anisotropy = true, isPremultipliedAlpha = false, } = {}) {
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        this.__startedToLoad = true;
        this.__htmlImageElement = image;
        let img = image;
        if (this.autoResize) {
            const [resizedCanvas, resizedWidth, resizedHeight] = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_6__.DataUtil.getResizedCanvas(img, _core_Config__WEBPACK_IMPORTED_MODULE_5__.Config.maxSizeLimitOfNonCompressedTexture);
            img = resizedCanvas;
            this.__width = resizedWidth;
            this.__height = resizedHeight;
            this.__htmlCanvasElement = resizedCanvas;
        }
        if (this.autoDetectTransparency) {
            this.__hasTransparentPixels =
                _misc_DataUtil__WEBPACK_IMPORTED_MODULE_6__.DataUtil.detectTransparentPixelExistence(img);
        }
        this.__width = img.width;
        this.__height = img.height;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createTexture(img, {
            level,
            internalFormat,
            width: this.__width,
            height: this.__height,
            border: 0,
            format,
            type,
            magFilter,
            minFilter,
            wrapS,
            wrapT,
            generateMipmap,
            anisotropy,
            isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        this.__uri = image.src;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    generateTextureFromUri(imageUri, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, generateMipmap = true, anisotropy = true, isPremultipliedAlpha = false, } = {}) {
        this.__uri = imageUri;
        this.__startedToLoad = true;
        return new Promise((resolve, reject) => {
            this.__img = new Image();
            if (!imageUri.match(/^data:/)) {
                this.__img.crossOrigin = 'Anonymous';
            }
            this.__img.onload = () => {
                this.__htmlImageElement = this.__img;
                let img = this.__img;
                if (this.autoResize) {
                    const [resizedCanvas, resizedWidth, resizedHeight] = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_6__.DataUtil.getResizedCanvas(img, _core_Config__WEBPACK_IMPORTED_MODULE_5__.Config.maxSizeLimitOfNonCompressedTexture);
                    img = resizedCanvas;
                    this.__width = resizedWidth;
                    this.__height = resizedHeight;
                    this.__htmlCanvasElement = resizedCanvas;
                }
                if (this.autoDetectTransparency) {
                    this.__hasTransparentPixels =
                        _misc_DataUtil__WEBPACK_IMPORTED_MODULE_6__.DataUtil.detectTransparentPixelExistence(img);
                }
                this.__width = img.width;
                this.__height = img.height;
                const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
                const texture = webGLResourceRepository.createTexture(img, {
                    level,
                    internalFormat,
                    width: this.__width,
                    height: this.__height,
                    border: 0,
                    format,
                    type,
                    magFilter,
                    minFilter,
                    wrapS,
                    wrapT,
                    generateMipmap,
                    anisotropy,
                    isPremultipliedAlpha,
                });
                this.cgApiResourceUid = texture;
                this.__isTextureReady = true;
                _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
                resolve();
            };
            this.__img.src = imageUri;
        });
    }
    generate1x1TextureFrom(rgbaStr = 'rgba(255,255,255,1)') {
        const canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        this.__width = 1;
        this.__height = 1;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = rgbaStr;
        ctx.fillRect(0, 0, 1, 1);
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createTexture(canvas, {
            level: 0,
            internalFormat: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8,
            width: 1,
            height: 1,
            border: 0,
            format: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA,
            type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte,
            magFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            minFilter: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            wrapS: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            wrapT: _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            generateMipmap: false,
            anisotropy: false,
            isPremultipliedAlpha: true,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    generateTextureFromTypedArray(typedArray, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, generateMipmap = true, anisotropy = true, isPremultipliedAlpha = false, } = {}) {
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        const type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.fromTypedArray(typedArray);
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createTexture(typedArray, {
            level,
            internalFormat,
            width: this.__width,
            height: this.__height,
            border: 0,
            format,
            type,
            magFilter,
            minFilter,
            wrapS,
            wrapT,
            generateMipmap,
            anisotropy,
            isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    generateCompressedTextureFromTypedArray(typedArray, width, height, compressionTextureType, { magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, anisotropy = true,
    // isPremultipliedAlpha = false,
     } = {}) {
        this.__width = width;
        this.__height = height;
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        const textureData = {
            level: 0,
            width,
            height,
            buffer: typedArray,
        };
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createCompressedTexture([textureData], compressionTextureType, {
            magFilter,
            minFilter,
            wrapS,
            wrapT,
            anisotropy,
            // isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    generateCompressedTextureWithMipmapFromTypedArray(textureDataArray, compressionTextureType, { magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, anisotropy = true,
    // isPremultipliedAlpha = false,
     } = {}) {
        this.__magFilter = magFilter;
        this.__minFilter = minFilter;
        this.__wrapS = wrapS;
        this.__wrapT = wrapT;
        const originalTextureData = textureDataArray.find(textureData => textureData.level === 0);
        if (originalTextureData == null) {
            throw new Error('texture data with level 0 is not found');
        }
        this.__width = originalTextureData.width;
        this.__height = originalTextureData.height;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createCompressedTexture(textureDataArray, compressionTextureType, {
            magFilter,
            minFilter,
            wrapS,
            wrapT,
            anisotropy,
            // isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    importWebGLTextureDirectly(webGLTexture, width = 0, height = 0) {
        this.__width = width;
        this.__height = height;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.setWebGLTextureDirectly(webGLTexture);
        this.cgApiResourceUid = texture;
        this.__startedToLoad = true;
        this.__isTextureReady = true;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
}
Texture.__loadedBasisFunc = false;


/***/ }),

/***/ "./src/foundation/textures/TextureDataFloat.ts":
/*!*****************************************************!*\
  !*** ./src/foundation/textures/TextureDataFloat.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextureDataFloat": () => (/* binding */ TextureDataFloat)
/* harmony export */ });
class TextureDataFloat {
    constructor(width, height, channels) {
        this.__channels = channels;
        this.__width = width;
        this.__height = height;
        this.__data = new Float32Array(width * height * channels);
    }
    resize(width, height, channels) {
        this.__width = width;
        this.__height = height;
        this.__channels = channels;
        this.__data = new Float32Array(TextureDataFloat.transfer(this.__data.buffer, width * height * channels * 4));
    }
    setPixelAtChannel(x, y, channelIdx, value) {
        this.__data[y * this.__width * this.__channels + x * this.__channels + channelIdx] = value;
    }
    get width() {
        return this.__width;
    }
    get height() {
        return this.__height;
    }
    get data() {
        return this.__data;
    }
    getPixel(x, y, channelIdx) {
        return this.__data[y * this.__width * this.__channels + x * this.__channels + channelIdx];
    }
    getPixelAs(x, y, channels, typeClass) {
        if (channels === 3) {
            return new typeClass(new Float32Array([
                this.__data[y * this.__width * this.__channels + x * this.__channels + 0],
                this.__data[y * this.__width * this.__channels + x * this.__channels + 1],
                this.__data[y * this.__width * this.__channels + x * this.__channels + 2],
            ]));
        }
        else if (channels === 4) {
            return new typeClass(new Float32Array([
                this.__data[y * this.__width * this.__channels + x * this.__channels + 0],
                this.__data[y * this.__width * this.__channels + x * this.__channels + 1],
                this.__data[y * this.__width * this.__channels + x * this.__channels + 2],
                this.__data[y * this.__width * this.__channels + x * this.__channels + 3],
            ]));
        }
    }
    getPixelAsArray(x, y) {
        const array = [];
        for (let i = 0; i < this.__channels; i++) {
            array.push(this.__data[y * this.__width * this.__channels + x * this.__channels + i]);
        }
        return array;
    }
    initialize(width, height, channels) {
        this.__width = width;
        this.__height = height;
        this.__channels = channels;
        this.__data = new Float32Array(width * height * channels);
    }
    static transfer(source, length) {
        source = Object(source);
        const dest = new ArrayBuffer(length);
        if (!(source instanceof ArrayBuffer) || !(dest instanceof ArrayBuffer)) {
            throw new TypeError('Source and destination must be ArrayBuffer instances');
        }
        if (dest.byteLength >= source.byteLength) {
            let nextOffset = 0;
            let leftBytes = source.byteLength;
            const wordSizes = [8, 4, 2, 1];
            wordSizes.forEach(_wordSize_ => {
                if (leftBytes >= _wordSize_) {
                    const done = transferWith(_wordSize_, source, dest, nextOffset, leftBytes);
                    nextOffset = done.nextOffset;
                    leftBytes = done.leftBytes;
                }
            });
        }
        return dest;
        function transferWith(wordSize, source, dest, nextOffset, leftBytes) {
            let ViewClass = Uint8Array;
            switch (wordSize) {
                case 8:
                    ViewClass = Float64Array;
                    break;
                case 4:
                    ViewClass = Float32Array;
                    break;
                case 2:
                    ViewClass = Uint16Array;
                    break;
                case 1:
                    ViewClass = Uint8Array;
                    break;
                default:
                    ViewClass = Uint8Array;
                    break;
            }
            const view_source = new ViewClass(source, nextOffset, Math.trunc(leftBytes / wordSize));
            const view_dest = new ViewClass(dest, nextOffset, Math.trunc(leftBytes / wordSize));
            for (let i = 0; i < view_dest.length; i++) {
                view_dest[i] = view_source[i];
            }
            return {
                nextOffset: view_source.byteOffset + view_source.byteLength,
                leftBytes: source.byteLength - (view_source.byteOffset + view_source.byteLength),
            };
        }
    }
}


/***/ }),

/***/ "./src/foundation/textures/VideoTexture.ts":
/*!*************************************************!*\
  !*** ./src/foundation/textures/VideoTexture.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VideoTexture": () => (/* binding */ VideoTexture)
/* harmony export */ });
/* harmony import */ var _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
var __classPrivateFieldSet = function (receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
};
var __classPrivateFieldGet = function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _VideoTexture_htmlVideoElement;






class VideoTexture extends _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture {
    constructor() {
        super();
        this.autoResize = true;
        this.autoDetectTransparency = false;
        _VideoTexture_htmlVideoElement.set(this, void 0);
    }
    __getResizedCanvas(image, maxSize) {
        const canvas = document.createElement('canvas');
        const potWidth = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.getNearestPowerOfTwo(image.width);
        const potHeight = _misc_DataUtil__WEBPACK_IMPORTED_MODULE_5__.DataUtil.getNearestPowerOfTwo(image.height);
        const aspect = potHeight / potWidth;
        let dstWidth = 0;
        let dstHeight = 0;
        if (potWidth > potHeight) {
            dstWidth = Math.min(potWidth, maxSize);
            dstHeight = dstWidth * aspect;
        }
        else {
            dstHeight = Math.min(potHeight, maxSize);
            dstWidth = dstHeight / aspect;
        }
        canvas.width = dstWidth;
        canvas.height = dstHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, dstWidth, dstHeight);
        if (this.autoDetectTransparency) {
            this.__imageData = ctx.getImageData(0, 0, dstWidth, dstHeight);
            for (let y = 0; y < dstHeight; y++) {
                for (let x = 0; x < dstWidth; x++) {
                    const alpha = this.__imageData.data[(x + y * dstWidth) * 4 + 3];
                    if (alpha < 1) {
                        this.__hasTransparentPixels = true;
                        return canvas;
                    }
                }
            }
            this.__hasTransparentPixels = false;
        }
        return canvas;
    }
    generateTextureFromVideo(video, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, generateMipmap = false, anisotropy = false, isPremultipliedAlpha = false, mutedAutoPlay = true, } = {}) {
        this.__startedToLoad = true;
        __classPrivateFieldSet(this, _VideoTexture_htmlVideoElement, video, "f");
        if (mutedAutoPlay) {
            video.autoplay = true;
            video.muted = true;
        }
        const img = video;
        this.__width = img.videoWidth;
        this.__height = img.videoHeight;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        const texture = webGLResourceRepository.createTexture(img, {
            level: level,
            internalFormat: internalFormat,
            width: this.__width,
            height: this.__height,
            border: 0,
            format: format,
            type: type,
            magFilter: magFilter,
            minFilter: minFilter,
            wrapS: wrapS,
            wrapT: wrapT,
            generateMipmap: generateMipmap,
            anisotropy: anisotropy,
            isPremultipliedAlpha,
        });
        this.cgApiResourceUid = texture;
        this.__isTextureReady = true;
        this.__uri = video.src;
        _AbstractTexture__WEBPACK_IMPORTED_MODULE_3__.AbstractTexture.__textureMap.set(texture, this);
    }
    generateTextureFromUri(videoUri, { level = 0, internalFormat = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8, format = _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA, type = _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte, magFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, wrapS = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, wrapT = _definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge, generateMipmap = false, anisotropy = false, isPremultipliedAlpha = false, mutedAutoPlay = true, playButtonDomElement = undefined, } = {}) {
        this.__uri = videoUri;
        this.__startedToLoad = true;
        return new Promise((resolve, reject) => {
            const button = playButtonDomElement;
            const setupTexture = () => {
                this.__width = video.videoWidth;
                this.__height = video.videoHeight;
                const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
                const texture = webGLResourceRepository.createTexture(video, {
                    level: level,
                    internalFormat: internalFormat,
                    width: this.__width,
                    height: this.__height,
                    border: 0,
                    format: format,
                    type: type,
                    magFilter: magFilter,
                    minFilter: minFilter,
                    wrapS: wrapS,
                    wrapT: wrapT,
                    generateMipmap: generateMipmap,
                    anisotropy: anisotropy,
                    isPremultipliedAlpha,
                });
                this.cgApiResourceUid = texture;
                this.__isTextureReady = true;
                resolve();
            };
            button === null || button === void 0 ? void 0 : button.addEventListener('click', () => {
                setupTexture();
                video.play();
            }, true);
            const video = document.createElement('video');
            video.crossOrigin = 'anonymous';
            video.setAttribute('playsinline', 'playsinline');
            if (mutedAutoPlay) {
                video.autoplay = true;
                video.muted = true;
            }
            video.preload = 'auto';
            __classPrivateFieldSet(this, _VideoTexture_htmlVideoElement, video, "f");
            video.addEventListener('canplaythrough', () => {
                setupTexture();
                video.play();
            }, true);
            video.addEventListener('ended', () => {
                video.play();
            }, true);
            video.src = videoUri;
        });
    }
    updateTexture() {
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        if (this.__isTextureReady && __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f")) {
            webGLResourceRepository.updateTexture(this.cgApiResourceUid, __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f"), {
                level: 0,
                xoffset: 0,
                yoffset: 0,
                width: this.__width,
                height: this.__height,
                format: _definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_0__.PixelFormat.RGBA,
                type: _definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.UnsignedByte,
            });
        }
    }
    getCurrentFramePixelData() {
        let pixel = undefined;
        const webGLResourceRepository = _renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_4__.CGAPIResourceRepository.getWebGLResourceRepository();
        if (this.__isTextureReady && __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f")) {
            pixel = webGLResourceRepository.getPixelDataFromTexture(this.cgApiResourceUid, 0, 0, this.width, this.height);
        }
        return [pixel, this.width, this.height];
    }
    set playbackRate(value) {
        if (__classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f")) {
            __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f").playbackRate = value;
        }
    }
    get playbackRate() {
        var _a;
        const playbackRate = (_a = __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f")) === null || _a === void 0 ? void 0 : _a.playbackRate;
        return playbackRate !== null && playbackRate !== void 0 ? playbackRate : 1;
    }
    play() {
        var _a;
        (_a = __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f")) === null || _a === void 0 ? void 0 : _a.play();
    }
    pause() {
        __classPrivateFieldGet(this, _VideoTexture_htmlVideoElement, "f").pause();
    }
}
_VideoTexture_htmlVideoElement = new WeakMap();
VideoTexture.__loadedBasisFunc = false;


/***/ }),

/***/ "./src/foundation/textures/index.ts":
/*!******************************************!*\
  !*** ./src/foundation/textures/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractTexture": () => (/* reexport safe */ _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture),
/* harmony export */   "CubeTexture": () => (/* reexport safe */ _CubeTexture__WEBPACK_IMPORTED_MODULE_1__.CubeTexture),
/* harmony export */   "RenderBuffer": () => (/* reexport safe */ _RenderBuffer__WEBPACK_IMPORTED_MODULE_3__.RenderBuffer),
/* harmony export */   "RenderTargetTexture": () => (/* reexport safe */ _RenderTargetTexture__WEBPACK_IMPORTED_MODULE_4__.RenderTargetTexture),
/* harmony export */   "Texture": () => (/* reexport safe */ _Texture__WEBPACK_IMPORTED_MODULE_5__.Texture),
/* harmony export */   "TextureDataFloat": () => (/* reexport safe */ _TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__.TextureDataFloat),
/* harmony export */   "VideoTexture": () => (/* reexport safe */ _VideoTexture__WEBPACK_IMPORTED_MODULE_7__.VideoTexture)
/* harmony export */ });
/* harmony import */ var _AbstractTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _CubeTexture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CubeTexture */ "./src/foundation/textures/CubeTexture.ts");
/* harmony import */ __webpack_require__(/*! ./IRenderable */ "./src/foundation/textures/IRenderable.ts");
/* harmony import */ var _RenderBuffer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RenderBuffer */ "./src/foundation/textures/RenderBuffer.ts");
/* harmony import */ var _RenderTargetTexture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RenderTargetTexture */ "./src/foundation/textures/RenderTargetTexture.ts");
/* harmony import */ var _Texture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Texture */ "./src/foundation/textures/Texture.ts");
/* harmony import */ var _TextureDataFloat__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TextureDataFloat */ "./src/foundation/textures/TextureDataFloat.ts");
/* harmony import */ var _VideoTexture__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./VideoTexture */ "./src/foundation/textures/VideoTexture.ts");










/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AABB": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AABB),
/* harmony export */   "AABBGizmo": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AABBGizmo),
/* harmony export */   "AbstractArrayBufferBaseMathNumber": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractArrayBufferBaseMathNumber),
/* harmony export */   "AbstractCameraController": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractCameraController),
/* harmony export */   "AbstractMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractMaterialContent),
/* harmony export */   "AbstractMatrix": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractMatrix),
/* harmony export */   "AbstractQuaternion": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractQuaternion),
/* harmony export */   "AbstractShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractShaderNode),
/* harmony export */   "AbstractTexture": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractTexture),
/* harmony export */   "AbstractVector": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AbstractVector),
/* harmony export */   "Accessor": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Accessor),
/* harmony export */   "AddShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AddShaderNode),
/* harmony export */   "AlphaMode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AlphaMode),
/* harmony export */   "AnimationAssigner": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AnimationAssigner),
/* harmony export */   "AnimationAttribute": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AnimationAttribute),
/* harmony export */   "AnimationComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AnimationComponent),
/* harmony export */   "AnimationInterpolation": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AnimationInterpolation),
/* harmony export */   "AttributeNormalShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AttributeNormalShaderNode),
/* harmony export */   "AttributePositionShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.AttributePositionShaderNode),
/* harmony export */   "Axis": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Axis),
/* harmony export */   "BasisCompressionType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BasisCompressionType),
/* harmony export */   "BlendShapeComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BlendShapeComponent),
/* harmony export */   "BlockBeginShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.BlockBeginShader),
/* harmony export */   "BlockBeginShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BlockBeginShaderNode),
/* harmony export */   "BlockEndShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.BlockEndShader),
/* harmony export */   "BlockEndShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BlockEndShaderNode),
/* harmony export */   "BoneDataType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BoneDataType),
/* harmony export */   "Buffer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Buffer),
/* harmony export */   "BufferUse": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BufferUse),
/* harmony export */   "BufferView": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.BufferView),
/* harmony export */   "CGAPIResourceRepository": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository),
/* harmony export */   "Cache": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Cache),
/* harmony export */   "CameraComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CameraComponent),
/* harmony export */   "CameraControllerComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CameraControllerComponent),
/* harmony export */   "CameraControllerType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CameraControllerType),
/* harmony export */   "CameraType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CameraType),
/* harmony export */   "ClassicShadingShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.ClassicShadingShader),
/* harmony export */   "ColorGradingUsingLUTsMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ColorGradingUsingLUTsMaterialContent),
/* harmony export */   "ColorRgb": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ColorRgb),
/* harmony export */   "ColorRgba": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ColorRgba),
/* harmony export */   "ComplexVertexAttribute": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ComplexVertexAttribute),
/* harmony export */   "Component": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Component),
/* harmony export */   "ComponentRepository": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ComponentRepository),
/* harmony export */   "ComponentType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ComponentType),
/* harmony export */   "CompositionType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CompositionType),
/* harmony export */   "CompressionTextureType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CompressionTextureType),
/* harmony export */   "Config": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Config),
/* harmony export */   "ConstRgbaBlack": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstRgbaBlack),
/* harmony export */   "ConstRgbaWhite": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstRgbaWhite),
/* harmony export */   "ConstVector2_0_0": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector2_0_0),
/* harmony export */   "ConstVector2_1_1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector2_1_1),
/* harmony export */   "ConstVector3_0_0_0": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector3_0_0_0),
/* harmony export */   "ConstVector3_1_1_1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector3_1_1_1),
/* harmony export */   "ConstVector4_0_0_0_0": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector4_0_0_0_0),
/* harmony export */   "ConstVector4_0_0_0_1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector4_0_0_0_1),
/* harmony export */   "ConstVector4_1_1_1_1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstVector4_1_1_1_1),
/* harmony export */   "ConstantVariableShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.ConstantVariableShader),
/* harmony export */   "ConstantVariableShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ConstantVariableShaderNode),
/* harmony export */   "Cube": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Cube),
/* harmony export */   "CubeTexture": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CubeTexture),
/* harmony export */   "CustomMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.CustomMaterialContent),
/* harmony export */   "DataUtil": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.DataUtil),
/* harmony export */   "DepthEncodeMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.DepthEncodeMaterialContent),
/* harmony export */   "DetectHighLuminanceMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.DetectHighLuminanceMaterialContent),
/* harmony export */   "DotProductShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.DotProductShaderNode),
/* harmony export */   "DrcPointCloudImporter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.DrcPointCloudImporter),
/* harmony export */   "EVENT_CLICK": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_CLICK),
/* harmony export */   "EVENT_KEY_DOWN": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_KEY_DOWN),
/* harmony export */   "EVENT_KEY_PRESS": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_KEY_PRESS),
/* harmony export */   "EVENT_KEY_UP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_KEY_UP),
/* harmony export */   "EVENT_MOUSE_DOWN": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_DOWN),
/* harmony export */   "EVENT_MOUSE_ENTER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_ENTER),
/* harmony export */   "EVENT_MOUSE_LEAVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_LEAVE),
/* harmony export */   "EVENT_MOUSE_MOVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_MOVE),
/* harmony export */   "EVENT_MOUSE_OVER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_OVER),
/* harmony export */   "EVENT_MOUSE_UP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_UP),
/* harmony export */   "EVENT_MOUSE_WHEEL": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MOUSE_WHEEL),
/* harmony export */   "EVENT_MSPOINTER_DOWN": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MSPOINTER_DOWN),
/* harmony export */   "EVENT_MSPOINTER_MOVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MSPOINTER_MOVE),
/* harmony export */   "EVENT_MSPOINTER_UP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_MSPOINTER_UP),
/* harmony export */   "EVENT_ORIENTATION_CHANGE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_ORIENTATION_CHANGE),
/* harmony export */   "EVENT_POINTER_CANCEL": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_CANCEL),
/* harmony export */   "EVENT_POINTER_DOWN": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_DOWN),
/* harmony export */   "EVENT_POINTER_ENTER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_ENTER),
/* harmony export */   "EVENT_POINTER_LEAVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_LEAVE),
/* harmony export */   "EVENT_POINTER_MOVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_MOVE),
/* harmony export */   "EVENT_POINTER_OUT": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_OUT),
/* harmony export */   "EVENT_POINTER_OVER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_OVER),
/* harmony export */   "EVENT_POINTER_UP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_POINTER_UP),
/* harmony export */   "EVENT_RESIZE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_RESIZE),
/* harmony export */   "EVENT_TOUCH_CANCEL": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_CANCEL),
/* harmony export */   "EVENT_TOUCH_DOUBLE_TAP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_DOUBLE_TAP),
/* harmony export */   "EVENT_TOUCH_DRAG": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_DRAG),
/* harmony export */   "EVENT_TOUCH_END": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_END),
/* harmony export */   "EVENT_TOUCH_ENTER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_ENTER),
/* harmony export */   "EVENT_TOUCH_HOLD": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_HOLD),
/* harmony export */   "EVENT_TOUCH_LEAVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_LEAVE),
/* harmony export */   "EVENT_TOUCH_LONG_TAP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_LONG_TAP),
/* harmony export */   "EVENT_TOUCH_MOVE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_MOVE),
/* harmony export */   "EVENT_TOUCH_OUT": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_OUT),
/* harmony export */   "EVENT_TOUCH_OVER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_OVER),
/* harmony export */   "EVENT_TOUCH_PINCH": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_PINCH),
/* harmony export */   "EVENT_TOUCH_START": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_START),
/* harmony export */   "EVENT_TOUCH_SWIPE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_SWIPE),
/* harmony export */   "EVENT_TOUCH_TAP": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EVENT_TOUCH_TAP),
/* harmony export */   "Effekseer": () => (/* reexport safe */ _effekseer_index__WEBPACK_IMPORTED_MODULE_3__.Effekseer),
/* harmony export */   "EffekseerComponent": () => (/* reexport safe */ _effekseer_index__WEBPACK_IMPORTED_MODULE_3__.EffekseerComponent),
/* harmony export */   "EndShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.EndShader),
/* harmony export */   "Entity": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Entity),
/* harmony export */   "EntityHelper": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EntityHelper),
/* harmony export */   "EntityRepository": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EntityRepository),
/* harmony export */   "EntityUIDOutputMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EntityUIDOutputMaterialContent),
/* harmony export */   "EnumClass": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EnumClass),
/* harmony export */   "EnvConstantMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EnvConstantMaterialContent),
/* harmony export */   "Err": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Err),
/* harmony export */   "EventPubSub": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.EventPubSub),
/* harmony export */   "Expression": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Expression),
/* harmony export */   "FileType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.FileType),
/* harmony export */   "Finalizer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Finalizer),
/* harmony export */   "ForwardRenderPipeline": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ForwardRenderPipeline),
/* harmony export */   "Frame": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Frame),
/* harmony export */   "FrameBuffer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.FrameBuffer),
/* harmony export */   "Frustum": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Frustum),
/* harmony export */   "FurnaceTestMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.FurnaceTestMaterialContent),
/* harmony export */   "GLSLShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.GLSLShader),
/* harmony export */   "GLTF2_EXPORT_DRACO": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_DRACO),
/* harmony export */   "GLTF2_EXPORT_EMBEDDED": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_EMBEDDED),
/* harmony export */   "GLTF2_EXPORT_GLB": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_GLB),
/* harmony export */   "GLTF2_EXPORT_GLTF": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_GLTF),
/* harmony export */   "GLTF2_EXPORT_NO_DOWNLOAD": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GLTF2_EXPORT_NO_DOWNLOAD),
/* harmony export */   "GL_ACTIVE_ATTRIBUTES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ACTIVE_ATTRIBUTES),
/* harmony export */   "GL_ACTIVE_TEXTURE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ACTIVE_TEXTURE),
/* harmony export */   "GL_ACTIVE_UNIFORMS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ACTIVE_UNIFORMS),
/* harmony export */   "GL_ACTIVE_UNIFORM_BLOCKS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ACTIVE_UNIFORM_BLOCKS),
/* harmony export */   "GL_ALIASED_LINE_WIDTH_RANGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALIASED_LINE_WIDTH_RANGE),
/* harmony export */   "GL_ALIASED_POINT_SIZE_RANGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALIASED_POINT_SIZE_RANGE),
/* harmony export */   "GL_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALPHA),
/* harmony export */   "GL_ALPHA_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALPHA_BITS),
/* harmony export */   "GL_ALREADY_SIGNALED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALREADY_SIGNALED),
/* harmony export */   "GL_ALWAYS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ALWAYS),
/* harmony export */   "GL_ANY_SAMPLES_PASSED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ANY_SAMPLES_PASSED),
/* harmony export */   "GL_ANY_SAMPLES_PASSED_CONSERVATIVE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ANY_SAMPLES_PASSED_CONSERVATIVE),
/* harmony export */   "GL_ARRAY_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ARRAY_BUFFER),
/* harmony export */   "GL_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_ATTACHED_SHADERS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ATTACHED_SHADERS),
/* harmony export */   "GL_BACK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BACK),
/* harmony export */   "GL_BLEND": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND),
/* harmony export */   "GL_BLEND_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_COLOR),
/* harmony export */   "GL_BLEND_DST_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_DST_ALPHA),
/* harmony export */   "GL_BLEND_DST_RGB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_DST_RGB),
/* harmony export */   "GL_BLEND_EQUATION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_EQUATION),
/* harmony export */   "GL_BLEND_EQUATION_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_EQUATION_ALPHA),
/* harmony export */   "GL_BLEND_EQUATION_RGB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_EQUATION_RGB),
/* harmony export */   "GL_BLEND_SRC_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_SRC_ALPHA),
/* harmony export */   "GL_BLEND_SRC_RGB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLEND_SRC_RGB),
/* harmony export */   "GL_BLUE_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BLUE_BITS),
/* harmony export */   "GL_BOOL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BOOL),
/* harmony export */   "GL_BOOL_VEC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BOOL_VEC2),
/* harmony export */   "GL_BOOL_VEC3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BOOL_VEC3),
/* harmony export */   "GL_BOOL_VEC4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BOOL_VEC4),
/* harmony export */   "GL_BROWSER_DEFAULT_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BROWSER_DEFAULT_WEBGL),
/* harmony export */   "GL_BUFFER_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BUFFER_SIZE),
/* harmony export */   "GL_BUFFER_USAGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_BUFFER_USAGE),
/* harmony export */   "GL_CCW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CCW),
/* harmony export */   "GL_CLAMP_TO_EDGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CLAMP_TO_EDGE),
/* harmony export */   "GL_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR),
/* harmony export */   "GL_COLOR_ATTACHMENT0": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT0),
/* harmony export */   "GL_COLOR_ATTACHMENT0_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT0_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT1),
/* harmony export */   "GL_COLOR_ATTACHMENT10": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT10),
/* harmony export */   "GL_COLOR_ATTACHMENT10_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT10_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT11": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT11),
/* harmony export */   "GL_COLOR_ATTACHMENT11_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT11_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT12": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT12),
/* harmony export */   "GL_COLOR_ATTACHMENT12_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT12_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT13": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT13),
/* harmony export */   "GL_COLOR_ATTACHMENT13_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT13_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT14": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT14),
/* harmony export */   "GL_COLOR_ATTACHMENT14_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT14_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT15": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT15),
/* harmony export */   "GL_COLOR_ATTACHMENT15_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT15_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT1_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT2),
/* harmony export */   "GL_COLOR_ATTACHMENT2_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT2_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT3),
/* harmony export */   "GL_COLOR_ATTACHMENT3_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT3_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT4),
/* harmony export */   "GL_COLOR_ATTACHMENT4_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT4_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT5": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT5),
/* harmony export */   "GL_COLOR_ATTACHMENT5_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT5_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT6": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT6),
/* harmony export */   "GL_COLOR_ATTACHMENT6_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT6_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT7": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT7),
/* harmony export */   "GL_COLOR_ATTACHMENT7_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT7_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT8),
/* harmony export */   "GL_COLOR_ATTACHMENT8_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT8_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT9": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT9),
/* harmony export */   "GL_COLOR_ATTACHMENT9_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_ATTACHMENT9_WEBGL),
/* harmony export */   "GL_COLOR_BUFFER_BIT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_BUFFER_BIT),
/* harmony export */   "GL_COLOR_CLEAR_VALUE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_CLEAR_VALUE),
/* harmony export */   "GL_COLOR_WRITEMASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COLOR_WRITEMASK),
/* harmony export */   "GL_COMPARE_REF_TO_TEXTURE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPARE_REF_TO_TEXTURE),
/* harmony export */   "GL_COMPILE_STATUS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPILE_STATUS),
/* harmony export */   "GL_COMPRESSED_R11_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_RG11_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_RGB8_ETC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_RGBA8_ETC2_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X10_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X8_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X10_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X12_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_4X4_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X4_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X8_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT1_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT3_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT5_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGBA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_RGB_ATC_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB_ATC_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_ETC1_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB_ETC1_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_S3TC_DXT1_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_RGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SIGNED_R11_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SIGNED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_SIGNED_RG11_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SIGNED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ETC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_S3TC_DXT1_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_SRGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_TEXTURE_FORMATS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COMPRESSED_TEXTURE_FORMATS),
/* harmony export */   "GL_CONDITION_SATISFIED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CONDITION_SATISFIED),
/* harmony export */   "GL_CONSTANT_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CONSTANT_ALPHA),
/* harmony export */   "GL_CONSTANT_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CONSTANT_COLOR),
/* harmony export */   "GL_CONTEXT_LOST_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CONTEXT_LOST_WEBGL),
/* harmony export */   "GL_COPY_READ_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COPY_READ_BUFFER),
/* harmony export */   "GL_COPY_READ_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COPY_READ_BUFFER_BINDING),
/* harmony export */   "GL_COPY_WRITE_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COPY_WRITE_BUFFER),
/* harmony export */   "GL_COPY_WRITE_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_COPY_WRITE_BUFFER_BINDING),
/* harmony export */   "GL_CULL_FACE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CULL_FACE),
/* harmony export */   "GL_CULL_FACE_MODE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CULL_FACE_MODE),
/* harmony export */   "GL_CURRENT_PROGRAM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CURRENT_PROGRAM),
/* harmony export */   "GL_CURRENT_QUERY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CURRENT_QUERY),
/* harmony export */   "GL_CURRENT_QUERY_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CURRENT_QUERY_EXT),
/* harmony export */   "GL_CURRENT_VERTEX_ATTRIB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CURRENT_VERTEX_ATTRIB),
/* harmony export */   "GL_CW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_CW),
/* harmony export */   "GL_DATA_BYTE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_BYTE),
/* harmony export */   "GL_DATA_FLOAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_FLOAT),
/* harmony export */   "GL_DATA_INT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_INT),
/* harmony export */   "GL_DATA_SHORT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_SHORT),
/* harmony export */   "GL_DATA_UNSIGNED_BYTE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_UNSIGNED_BYTE),
/* harmony export */   "GL_DATA_UNSIGNED_INT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_UNSIGNED_INT),
/* harmony export */   "GL_DATA_UNSIGNED_SHORT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DATA_UNSIGNED_SHORT),
/* harmony export */   "GL_DECR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DECR),
/* harmony export */   "GL_DECR_WRAP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DECR_WRAP),
/* harmony export */   "GL_DELETE_STATUS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DELETE_STATUS),
/* harmony export */   "GL_DEPTH": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH),
/* harmony export */   "GL_DEPTH24_STENCIL8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH24_STENCIL8),
/* harmony export */   "GL_DEPTH32F_STENCIL8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH32F_STENCIL8),
/* harmony export */   "GL_DEPTH_ATTACHMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_ATTACHMENT),
/* harmony export */   "GL_DEPTH_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_BITS),
/* harmony export */   "GL_DEPTH_BUFFER_BIT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_BUFFER_BIT),
/* harmony export */   "GL_DEPTH_CLEAR_VALUE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_CLEAR_VALUE),
/* harmony export */   "GL_DEPTH_COMPONENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_COMPONENT),
/* harmony export */   "GL_DEPTH_COMPONENT16": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_COMPONENT16),
/* harmony export */   "GL_DEPTH_COMPONENT24": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_COMPONENT24),
/* harmony export */   "GL_DEPTH_COMPONENT32F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_COMPONENT32F),
/* harmony export */   "GL_DEPTH_FUNC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_FUNC),
/* harmony export */   "GL_DEPTH_RANGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_RANGE),
/* harmony export */   "GL_DEPTH_STENCIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_STENCIL),
/* harmony export */   "GL_DEPTH_STENCIL_ATTACHMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_STENCIL_ATTACHMENT),
/* harmony export */   "GL_DEPTH_TEST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_TEST),
/* harmony export */   "GL_DEPTH_WRITEMASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DEPTH_WRITEMASK),
/* harmony export */   "GL_DITHER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DITHER),
/* harmony export */   "GL_DONT_CARE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DONT_CARE),
/* harmony export */   "GL_DRAW_BUFFER0": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER0),
/* harmony export */   "GL_DRAW_BUFFER0_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER0_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER1),
/* harmony export */   "GL_DRAW_BUFFER10": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER10),
/* harmony export */   "GL_DRAW_BUFFER10_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER10_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER11": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER11),
/* harmony export */   "GL_DRAW_BUFFER11_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER11_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER12": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER12),
/* harmony export */   "GL_DRAW_BUFFER12_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER12_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER13": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER13),
/* harmony export */   "GL_DRAW_BUFFER13_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER13_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER14": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER14),
/* harmony export */   "GL_DRAW_BUFFER14_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER14_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER15": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER15),
/* harmony export */   "GL_DRAW_BUFFER15_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER15_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER1_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER2),
/* harmony export */   "GL_DRAW_BUFFER2_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER2_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER3),
/* harmony export */   "GL_DRAW_BUFFER3_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER3_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER4),
/* harmony export */   "GL_DRAW_BUFFER4_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER4_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER5": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER5),
/* harmony export */   "GL_DRAW_BUFFER5_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER5_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER6": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER6),
/* harmony export */   "GL_DRAW_BUFFER6_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER6_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER7": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER7),
/* harmony export */   "GL_DRAW_BUFFER7_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER7_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER8),
/* harmony export */   "GL_DRAW_BUFFER8_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER8_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER9": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER9),
/* harmony export */   "GL_DRAW_BUFFER9_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_BUFFER9_WEBGL),
/* harmony export */   "GL_DRAW_FRAMEBUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_FRAMEBUFFER),
/* harmony export */   "GL_DRAW_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DRAW_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_DST_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DST_ALPHA),
/* harmony export */   "GL_DST_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DST_COLOR),
/* harmony export */   "GL_DYNAMIC_COPY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DYNAMIC_COPY),
/* harmony export */   "GL_DYNAMIC_DRAW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DYNAMIC_DRAW),
/* harmony export */   "GL_DYNAMIC_READ": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_DYNAMIC_READ),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ELEMENT_ARRAY_BUFFER),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ELEMENT_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_EQUAL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_EQUAL),
/* harmony export */   "GL_FASTEST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FASTEST),
/* harmony export */   "GL_FLOAT_32_UNSIGNED_INT_24_8_REV": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_32_UNSIGNED_INT_24_8_REV),
/* harmony export */   "GL_FLOAT_MAT2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT2),
/* harmony export */   "GL_FLOAT_MAT2X3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT2X3),
/* harmony export */   "GL_FLOAT_MAT2X4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT2X4),
/* harmony export */   "GL_FLOAT_MAT3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT3),
/* harmony export */   "GL_FLOAT_MAT3X2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT3X2),
/* harmony export */   "GL_FLOAT_MAT3X4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT3X4),
/* harmony export */   "GL_FLOAT_MAT4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT4),
/* harmony export */   "GL_FLOAT_MAT4X2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT4X2),
/* harmony export */   "GL_FLOAT_MAT4X3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_MAT4X3),
/* harmony export */   "GL_FLOAT_VEC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_VEC2),
/* harmony export */   "GL_FLOAT_VEC3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_VEC3),
/* harmony export */   "GL_FLOAT_VEC4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FLOAT_VEC4),
/* harmony export */   "GL_FRAGMENT_SHADER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAGMENT_SHADER),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAGMENT_SHADER_DERIVATIVE_HINT),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES),
/* harmony export */   "GL_FRAMEBUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL),
/* harmony export */   "GL_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_FRAMEBUFFER_COMPLETE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_COMPLETE),
/* harmony export */   "GL_FRAMEBUFFER_DEFAULT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_DEFAULT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE),
/* harmony export */   "GL_FRAMEBUFFER_UNSUPPORTED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRAMEBUFFER_UNSUPPORTED),
/* harmony export */   "GL_FRONT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRONT),
/* harmony export */   "GL_FRONT_AND_BACK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRONT_AND_BACK),
/* harmony export */   "GL_FRONT_FACE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FRONT_FACE),
/* harmony export */   "GL_FUNC_ADD": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FUNC_ADD),
/* harmony export */   "GL_FUNC_REVERSE_SUBTRACT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FUNC_REVERSE_SUBTRACT),
/* harmony export */   "GL_FUNC_SUBSTRACT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_FUNC_SUBSTRACT),
/* harmony export */   "GL_GENERATE_MIPMAP_HINT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_GENERATE_MIPMAP_HINT),
/* harmony export */   "GL_GEQUAL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_GEQUAL),
/* harmony export */   "GL_GPU_DISJOINT_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_GPU_DISJOINT_EXT),
/* harmony export */   "GL_GREATER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_GREATER),
/* harmony export */   "GL_GREEN_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_GREEN_BITS),
/* harmony export */   "GL_HALF_FLOAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_HALF_FLOAT),
/* harmony export */   "GL_HALF_FLOAT_OES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_HALF_FLOAT_OES),
/* harmony export */   "GL_HIGH_FLOAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_HIGH_FLOAT),
/* harmony export */   "GL_HIGH_INT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_HIGH_INT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_FORMAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_IMPLEMENTATION_COLOR_READ_FORMAT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_IMPLEMENTATION_COLOR_READ_TYPE),
/* harmony export */   "GL_INCR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INCR),
/* harmony export */   "GL_INCR_WRAP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INCR_WRAP),
/* harmony export */   "GL_INTERLEAVED_ATTRIBS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INTERLEAVED_ATTRIBS),
/* harmony export */   "GL_INT_2_10_10_10_REV": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_2_10_10_10_REV),
/* harmony export */   "GL_INT_SAMPLER_2D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_SAMPLER_2D),
/* harmony export */   "GL_INT_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_INT_SAMPLER_3D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_SAMPLER_3D),
/* harmony export */   "GL_INT_SAMPLER_CUBE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_SAMPLER_CUBE),
/* harmony export */   "GL_INT_VEC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_VEC2),
/* harmony export */   "GL_INT_VEC3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_VEC3),
/* harmony export */   "GL_INT_VEC4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INT_VEC4),
/* harmony export */   "GL_INVALID_ENUM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVALID_ENUM),
/* harmony export */   "GL_INVALID_FRAMEBUFFER_OPERATION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVALID_FRAMEBUFFER_OPERATION),
/* harmony export */   "GL_INVALID_INDEX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVALID_INDEX),
/* harmony export */   "GL_INVALID_OPERATION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVALID_OPERATION),
/* harmony export */   "GL_INVALID_VALUE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVALID_VALUE),
/* harmony export */   "GL_INVERT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_INVERT),
/* harmony export */   "GL_KEEP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_KEEP),
/* harmony export */   "GL_LEQUAL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LEQUAL),
/* harmony export */   "GL_LESS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LESS),
/* harmony export */   "GL_LINEAR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_LINEAR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINEAR_MIPMAP_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_NEAREST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINEAR_MIPMAP_NEAREST),
/* harmony export */   "GL_LINES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINES),
/* harmony export */   "GL_LINE_LOOP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINE_LOOP),
/* harmony export */   "GL_LINE_STRIP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINE_STRIP),
/* harmony export */   "GL_LINE_WIDTH": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINE_WIDTH),
/* harmony export */   "GL_LINK_STATUS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LINK_STATUS),
/* harmony export */   "GL_LOW_FLOAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LOW_FLOAT),
/* harmony export */   "GL_LOW_INT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LOW_INT),
/* harmony export */   "GL_LUMINANCE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LUMINANCE),
/* harmony export */   "GL_LUMINANCE_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_LUMINANCE_ALPHA),
/* harmony export */   "GL_MAX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX),
/* harmony export */   "GL_MAX_3D_TEXTURE_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_3D_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_ARRAY_TEXTURE_LAYERS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_ARRAY_TEXTURE_LAYERS),
/* harmony export */   "GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COLOR_ATTACHMENTS),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COLOR_ATTACHMENTS_WEBGL),
/* harmony export */   "GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_COMBINED_UNIFORM_BLOCKS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COMBINED_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_CUBE_MAP_TEXTURE_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_CUBE_MAP_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_DRAW_BUFFERS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_DRAW_BUFFERS),
/* harmony export */   "GL_MAX_DRAW_BUFFERS_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_DRAW_BUFFERS_WEBGL),
/* harmony export */   "GL_MAX_ELEMENTS_INDICES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_ELEMENTS_INDICES),
/* harmony export */   "GL_MAX_ELEMENTS_VERTICES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_ELEMENTS_VERTICES),
/* harmony export */   "GL_MAX_ELEMENT_INDEX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_ELEMENT_INDEX),
/* harmony export */   "GL_MAX_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_EXT),
/* harmony export */   "GL_MAX_FRAGMENT_INPUT_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_FRAGMENT_INPUT_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_BLOCKS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_FRAGMENT_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_VECTORS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_FRAGMENT_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_PROGRAM_TEXEL_OFFSET": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MAX_RENDERBUFFER_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_RENDERBUFFER_SIZE),
/* harmony export */   "GL_MAX_SAMPLES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_SAMPLES),
/* harmony export */   "GL_MAX_SERVER_WAIT_TIMEOUT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_SERVER_WAIT_TIMEOUT),
/* harmony export */   "GL_MAX_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_TEXTURE_LOD_BIAS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TEXTURE_LOD_BIAS),
/* harmony export */   "GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_MAX_TEXTURE_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS),
/* harmony export */   "GL_MAX_UNIFORM_BLOCK_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_UNIFORM_BLOCK_SIZE),
/* harmony export */   "GL_MAX_UNIFORM_BUFFER_BINDINGS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_UNIFORM_BUFFER_BINDINGS),
/* harmony export */   "GL_MAX_VARYING_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VARYING_COMPONENTS),
/* harmony export */   "GL_MAX_VARYING_VECTORS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VARYING_VECTORS),
/* harmony export */   "GL_MAX_VERTEX_ATTRIBS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_ATTRIBS),
/* harmony export */   "GL_MAX_VERTEX_OUTPUT_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_OUTPUT_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_BLOCKS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_COMPONENTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_VECTORS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VERTEX_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_VIEWPORT_DIMS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MAX_VIEWPORT_DIMS),
/* harmony export */   "GL_MEDIUM_FLOAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MEDIUM_FLOAT),
/* harmony export */   "GL_MEDIUM_INT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MEDIUM_INT),
/* harmony export */   "GL_MIN": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MIN),
/* harmony export */   "GL_MIN_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MIN_EXT),
/* harmony export */   "GL_MIN_PROGRAM_TEXEL_OFFSET": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MIN_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MIRRORED_REPEAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_MIRRORED_REPEAT),
/* harmony export */   "GL_NEAREST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NEAREST),
/* harmony export */   "GL_NEAREST_MIPMAP_LINEAR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NEAREST_MIPMAP_LINEAR),
/* harmony export */   "GL_NEAREST_MIPMAP_NEAREST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NEAREST_MIPMAP_NEAREST),
/* harmony export */   "GL_NEVER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NEVER),
/* harmony export */   "GL_NICEST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NICEST),
/* harmony export */   "GL_NONE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NONE),
/* harmony export */   "GL_NOTEQUAL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NOTEQUAL),
/* harmony export */   "GL_NO_ERROR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_NO_ERROR),
/* harmony export */   "GL_OBJECT_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_OBJECT_TYPE),
/* harmony export */   "GL_ONE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_CONSTANT_ALPHA),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_CONSTANT_COLOR),
/* harmony export */   "GL_ONE_MINUS_DST_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_DST_ALPHA),
/* harmony export */   "GL_ONE_MINUS_DST_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_DST_COLOR),
/* harmony export */   "GL_ONE_MINUS_SRC_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_SRC_ALPHA),
/* harmony export */   "GL_ONE_MINUS_SRC_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ONE_MINUS_SRC_COLOR),
/* harmony export */   "GL_OUT_OF_MEMORY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_OUT_OF_MEMORY),
/* harmony export */   "GL_PACK_ALIGNMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PACK_ALIGNMENT),
/* harmony export */   "GL_PACK_ROW_LENGTH": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PACK_ROW_LENGTH),
/* harmony export */   "GL_PACK_SKIP_PIXELS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PACK_SKIP_PIXELS),
/* harmony export */   "GL_PACK_SKIP_ROWS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PACK_SKIP_ROWS),
/* harmony export */   "GL_PIXEL_PACK_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_PACK_BUFFER),
/* harmony export */   "GL_PIXEL_PACK_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_PACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNPACK_BUFFER),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNPACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNSIGNED_BYTE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNSIGNED_BYTE),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_4_4_4_4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNSIGNED_SHORT_4_4_4_4),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_5_5_1": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNSIGNED_SHORT_5_5_5_1),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_6_5": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_PIXEL_UNSIGNED_SHORT_5_6_5),
/* harmony export */   "GL_POINTS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_POINTS),
/* harmony export */   "GL_POLYGON_OFFSET_FACTOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_POLYGON_OFFSET_FACTOR),
/* harmony export */   "GL_POLYGON_OFFSET_FILL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_POLYGON_OFFSET_FILL),
/* harmony export */   "GL_POLYGON_OFFSET_UNITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_POLYGON_OFFSET_UNITS),
/* harmony export */   "GL_QUERY_COUNTER_BITS_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_QUERY_COUNTER_BITS_EXT),
/* harmony export */   "GL_QUERY_RESULT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_QUERY_RESULT),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_QUERY_RESULT_AVAILABLE),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_QUERY_RESULT_AVAILABLE_EXT),
/* harmony export */   "GL_QUERY_RESULT_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_QUERY_RESULT_EXT),
/* harmony export */   "GL_R11F_G11F_B10F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R11F_G11F_B10F),
/* harmony export */   "GL_R16F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R16F),
/* harmony export */   "GL_R16I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R16I),
/* harmony export */   "GL_R16UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R16UI),
/* harmony export */   "GL_R32F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R32F),
/* harmony export */   "GL_R32I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R32I),
/* harmony export */   "GL_R32UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R32UI),
/* harmony export */   "GL_R8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R8),
/* harmony export */   "GL_R8I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R8I),
/* harmony export */   "GL_R8UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R8UI),
/* harmony export */   "GL_R8_SNORM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_R8_SNORM),
/* harmony export */   "GL_RASTERIZER_DISCARD": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RASTERIZER_DISCARD),
/* harmony export */   "GL_READ_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_READ_BUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_READ_FRAMEBUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_READ_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_RED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RED),
/* harmony export */   "GL_RED_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RED_BITS),
/* harmony export */   "GL_RED_INTEGER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RED_INTEGER),
/* harmony export */   "GL_RENDERBUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER),
/* harmony export */   "GL_RENDERBUFFER_ALPHA_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_ALPHA_SIZE),
/* harmony export */   "GL_RENDERBUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_BINDING),
/* harmony export */   "GL_RENDERBUFFER_BLUE_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_BLUE_SIZE),
/* harmony export */   "GL_RENDERBUFFER_DEPTH_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_DEPTH_SIZE),
/* harmony export */   "GL_RENDERBUFFER_GREEN_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_GREEN_SIZE),
/* harmony export */   "GL_RENDERBUFFER_HEIGHT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_HEIGHT),
/* harmony export */   "GL_RENDERBUFFER_INTERNAL_FORMAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_INTERNAL_FORMAT),
/* harmony export */   "GL_RENDERBUFFER_RED_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_RED_SIZE),
/* harmony export */   "GL_RENDERBUFFER_SAMPLES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_SAMPLES),
/* harmony export */   "GL_RENDERBUFFER_STENCIL_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_STENCIL_SIZE),
/* harmony export */   "GL_RENDERBUFFER_WIDTH": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERBUFFER_WIDTH),
/* harmony export */   "GL_RENDERER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RENDERER),
/* harmony export */   "GL_REPEAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_REPEAT),
/* harmony export */   "GL_REPLACE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_REPLACE),
/* harmony export */   "GL_RG": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG),
/* harmony export */   "GL_RG16F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG16F),
/* harmony export */   "GL_RG16I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG16I),
/* harmony export */   "GL_RG16UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG16UI),
/* harmony export */   "GL_RG32F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG32F),
/* harmony export */   "GL_RG32I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG32I),
/* harmony export */   "GL_RG32UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG32UI),
/* harmony export */   "GL_RG8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG8),
/* harmony export */   "GL_RG8I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG8I),
/* harmony export */   "GL_RG8UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG8UI),
/* harmony export */   "GL_RG8_SNORM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG8_SNORM),
/* harmony export */   "GL_RGB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB),
/* harmony export */   "GL_RGB10_A2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB10_A2),
/* harmony export */   "GL_RGB10_A2UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB10_A2UI),
/* harmony export */   "GL_RGB16F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB16F),
/* harmony export */   "GL_RGB16I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB16I),
/* harmony export */   "GL_RGB16UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB16UI),
/* harmony export */   "GL_RGB32F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB32F),
/* harmony export */   "GL_RGB32F_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB32F_EXT),
/* harmony export */   "GL_RGB32I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB32I),
/* harmony export */   "GL_RGB32UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB32UI),
/* harmony export */   "GL_RGB565": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB565),
/* harmony export */   "GL_RGB5_A1": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB5_A1),
/* harmony export */   "GL_RGB8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB8),
/* harmony export */   "GL_RGB8I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB8I),
/* harmony export */   "GL_RGB8UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB8UI),
/* harmony export */   "GL_RGB8_SNORM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB8_SNORM),
/* harmony export */   "GL_RGB9_E5": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB9_E5),
/* harmony export */   "GL_RGBA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA),
/* harmony export */   "GL_RGBA16F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA16F),
/* harmony export */   "GL_RGBA16I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA16I),
/* harmony export */   "GL_RGBA16UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA16UI),
/* harmony export */   "GL_RGBA32F": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA32F),
/* harmony export */   "GL_RGBA32F_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA32F_EXT),
/* harmony export */   "GL_RGBA32I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA32I),
/* harmony export */   "GL_RGBA32UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA32UI),
/* harmony export */   "GL_RGBA4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA4),
/* harmony export */   "GL_RGBA8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA8),
/* harmony export */   "GL_RGBA8I": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA8I),
/* harmony export */   "GL_RGBA8UI": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA8UI),
/* harmony export */   "GL_RGBA8_SNORM": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA8_SNORM),
/* harmony export */   "GL_RGBA_INTEGER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGBA_INTEGER),
/* harmony export */   "GL_RGB_INTEGER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RGB_INTEGER),
/* harmony export */   "GL_RG_INTEGER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_RG_INTEGER),
/* harmony export */   "GL_SAMPLER_2D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_2D),
/* harmony export */   "GL_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_SAMPLER_2D_ARRAY_SHADOW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_2D_ARRAY_SHADOW),
/* harmony export */   "GL_SAMPLER_2D_SHADOW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_2D_SHADOW),
/* harmony export */   "GL_SAMPLER_3D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_3D),
/* harmony export */   "GL_SAMPLER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_BINDING),
/* harmony export */   "GL_SAMPLER_CUBE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_CUBE),
/* harmony export */   "GL_SAMPLER_CUBE_SHADOW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLER_CUBE_SHADOW),
/* harmony export */   "GL_SAMPLES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLES),
/* harmony export */   "GL_SAMPLE_ALPHA_TO_COVERAGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLE_ALPHA_TO_COVERAGE),
/* harmony export */   "GL_SAMPLE_BUFFERS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLE_BUFFERS),
/* harmony export */   "GL_SAMPLE_COVERAGE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLE_COVERAGE),
/* harmony export */   "GL_SAMPLE_COVERAGE_INVERT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLE_COVERAGE_INVERT),
/* harmony export */   "GL_SAMPLE_COVERAGE_VALUE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SAMPLE_COVERAGE_VALUE),
/* harmony export */   "GL_SCISSOR_BOX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SCISSOR_BOX),
/* harmony export */   "GL_SCISSOR_TEST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SCISSOR_TEST),
/* harmony export */   "GL_SEPARATE_ATTRIBS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SEPARATE_ATTRIBS),
/* harmony export */   "GL_SHADER_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SHADER_TYPE),
/* harmony export */   "GL_SHADING_LANGUAGE_VERSION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SHADING_LANGUAGE_VERSION),
/* harmony export */   "GL_SIGNALED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SIGNALED),
/* harmony export */   "GL_SIGNED_NORMALIZED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SIGNED_NORMALIZED),
/* harmony export */   "GL_SRC_ALPHA": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRC_ALPHA),
/* harmony export */   "GL_SRC_ALPHA_SATURATE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRC_ALPHA_SATURATE),
/* harmony export */   "GL_SRC_COLOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRC_COLOR),
/* harmony export */   "GL_SRGB": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB),
/* harmony export */   "GL_SRGB8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB8),
/* harmony export */   "GL_SRGB8_ALPHA8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB8_ALPHA8),
/* harmony export */   "GL_SRGB8_ALPHA8_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB8_ALPHA8_EXT),
/* harmony export */   "GL_SRGB_ALPHA_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB_ALPHA_EXT),
/* harmony export */   "GL_SRGB_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SRGB_EXT),
/* harmony export */   "GL_STATIC_COPY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STATIC_COPY),
/* harmony export */   "GL_STATIC_DRAW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STATIC_DRAW),
/* harmony export */   "GL_STATIC_READ": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STATIC_READ),
/* harmony export */   "GL_STENCIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL),
/* harmony export */   "GL_STENCIL_ATTACHMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_ATTACHMENT),
/* harmony export */   "GL_STENCIL_BACK_FAIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_FAIL),
/* harmony export */   "GL_STENCIL_BACK_FUNC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_FUNC),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_FAIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_PASS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_BACK_REF": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_REF),
/* harmony export */   "GL_STENCIL_BACK_VALUE_MASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_VALUE_MASK),
/* harmony export */   "GL_STENCIL_BACK_WRITEMASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BACK_WRITEMASK),
/* harmony export */   "GL_STENCIL_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BITS),
/* harmony export */   "GL_STENCIL_BUFFER_BIT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_BUFFER_BIT),
/* harmony export */   "GL_STENCIL_CLEAR_VALUE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_CLEAR_VALUE),
/* harmony export */   "GL_STENCIL_FAIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_FAIL),
/* harmony export */   "GL_STENCIL_FUNC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_FUNC),
/* harmony export */   "GL_STENCIL_INDEX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_INDEX),
/* harmony export */   "GL_STENCIL_INDEX8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_INDEX8),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_FAIL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_PASS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_REF": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_REF),
/* harmony export */   "GL_STENCIL_TEST": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_TEST),
/* harmony export */   "GL_STENCIL_VALUE_MASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_VALUE_MASK),
/* harmony export */   "GL_STENCIL_WRITEMASK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STENCIL_WRITEMASK),
/* harmony export */   "GL_STREAM_COPY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STREAM_COPY),
/* harmony export */   "GL_STREAM_DRAW": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STREAM_DRAW),
/* harmony export */   "GL_STREAM_READ": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_STREAM_READ),
/* harmony export */   "GL_SUBPIXEL_BITS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SUBPIXEL_BITS),
/* harmony export */   "GL_SYNC_CONDITION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_CONDITION),
/* harmony export */   "GL_SYNC_FENCE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_FENCE),
/* harmony export */   "GL_SYNC_FLAGS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_FLAGS),
/* harmony export */   "GL_SYNC_FLUSH_COMMANDS_BIT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_FLUSH_COMMANDS_BIT),
/* harmony export */   "GL_SYNC_GPU_COMMANDS_COMPLETE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_GPU_COMMANDS_COMPLETE),
/* harmony export */   "GL_SYNC_STATUS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_SYNC_STATUS),
/* harmony export */   "GL_TEXTURE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE),
/* harmony export */   "GL_TEXTURE0": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE0),
/* harmony export */   "GL_TEXTURE1": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE1),
/* harmony export */   "GL_TEXTURE10": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE10),
/* harmony export */   "GL_TEXTURE11": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE11),
/* harmony export */   "GL_TEXTURE12": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE12),
/* harmony export */   "GL_TEXTURE13": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE13),
/* harmony export */   "GL_TEXTURE14": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE14),
/* harmony export */   "GL_TEXTURE15": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE15),
/* harmony export */   "GL_TEXTURE16": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE16),
/* harmony export */   "GL_TEXTURE17": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE17),
/* harmony export */   "GL_TEXTURE18": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE18),
/* harmony export */   "GL_TEXTURE19": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE19),
/* harmony export */   "GL_TEXTURE2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE2),
/* harmony export */   "GL_TEXTURE20": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE20),
/* harmony export */   "GL_TEXTURE21": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE21),
/* harmony export */   "GL_TEXTURE22": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE22),
/* harmony export */   "GL_TEXTURE23": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE23),
/* harmony export */   "GL_TEXTURE24": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE24),
/* harmony export */   "GL_TEXTURE25": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE25),
/* harmony export */   "GL_TEXTURE26": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE26),
/* harmony export */   "GL_TEXTURE27": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE27),
/* harmony export */   "GL_TEXTURE28": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE28),
/* harmony export */   "GL_TEXTURE29": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE29),
/* harmony export */   "GL_TEXTURE3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE3),
/* harmony export */   "GL_TEXTURE30": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE30),
/* harmony export */   "GL_TEXTURE31": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE31),
/* harmony export */   "GL_TEXTURE4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE4),
/* harmony export */   "GL_TEXTURE5": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE5),
/* harmony export */   "GL_TEXTURE6": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE6),
/* harmony export */   "GL_TEXTURE7": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE7),
/* harmony export */   "GL_TEXTURE8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE8),
/* harmony export */   "GL_TEXTURE9": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE9),
/* harmony export */   "GL_TEXTURE_2D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_2D),
/* harmony export */   "GL_TEXTURE_2D_ARRAY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_3D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_3D),
/* harmony export */   "GL_TEXTURE_BASE_LEVEL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_BASE_LEVEL),
/* harmony export */   "GL_TEXTURE_BINDING_2D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_BINDING_2D),
/* harmony export */   "GL_TEXTURE_BINDING_2D_ARRAY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_BINDING_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_BINDING_3D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_BINDING_3D),
/* harmony export */   "GL_TEXTURE_BINDING_CUBE_MAP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_BINDING_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_COMPARE_FUNC": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_COMPARE_FUNC),
/* harmony export */   "GL_TEXTURE_COMPARE_MODE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_COMPARE_MODE),
/* harmony export */   "GL_TEXTURE_CUBE_MAP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_X": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_NEGATIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Y": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Z": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_X": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_POSITIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Y": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_POSITIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Z": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_CUBE_MAP_POSITIVE_Z),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_FORMAT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_IMMUTABLE_FORMAT),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_LEVELS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_IMMUTABLE_LEVELS),
/* harmony export */   "GL_TEXTURE_MAG_FILTER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MAG_FILTER),
/* harmony export */   "GL_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_TEXTURE_MAX_LEVEL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MAX_LEVEL),
/* harmony export */   "GL_TEXTURE_MAX_LOD": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MAX_LOD),
/* harmony export */   "GL_TEXTURE_MIN_FILTER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MIN_FILTER),
/* harmony export */   "GL_TEXTURE_MIN_LOD": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_MIN_LOD),
/* harmony export */   "GL_TEXTURE_WRAP_R": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_WRAP_R),
/* harmony export */   "GL_TEXTURE_WRAP_S": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_WRAP_S),
/* harmony export */   "GL_TEXTURE_WRAP_T": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TEXTURE_WRAP_T),
/* harmony export */   "GL_TIMEOUT_EXPIRED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TIMEOUT_EXPIRED),
/* harmony export */   "GL_TIMEOUT_IGNORED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TIMEOUT_IGNORED),
/* harmony export */   "GL_TIMESTAMP_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TIMESTAMP_EXT),
/* harmony export */   "GL_TIME_ELAPSED_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TIME_ELAPSED_EXT),
/* harmony export */   "GL_TRANSFORM_FEEDBACK": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_ACTIVE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_ACTIVE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BUFFER),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BUFFER_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_MODE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BUFFER_MODE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BUFFER_SIZE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_START": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_BUFFER_START),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PAUSED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_PAUSED),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_VARYINGS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRANSFORM_FEEDBACK_VARYINGS),
/* harmony export */   "GL_TRIANGLES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRIANGLES),
/* harmony export */   "GL_TRIANGLE_FAN": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRIANGLE_FAN),
/* harmony export */   "GL_TRIANGLE_STRIP": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_TRIANGLE_STRIP),
/* harmony export */   "GL_UNIFORM_ARRAY_STRIDE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_ARRAY_STRIDE),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),
/* harmony export */   "GL_UNIFORM_BLOCK_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_BINDING),
/* harmony export */   "GL_UNIFORM_BLOCK_DATA_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_DATA_SIZE),
/* harmony export */   "GL_UNIFORM_BLOCK_INDEX": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_INDEX),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),
/* harmony export */   "GL_UNIFORM_BUFFER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BUFFER),
/* harmony export */   "GL_UNIFORM_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BUFFER_BINDING),
/* harmony export */   "GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT),
/* harmony export */   "GL_UNIFORM_BUFFER_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BUFFER_SIZE),
/* harmony export */   "GL_UNIFORM_BUFFER_START": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_BUFFER_START),
/* harmony export */   "GL_UNIFORM_IS_ROW_MAJOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_IS_ROW_MAJOR),
/* harmony export */   "GL_UNIFORM_MATRIX_STRIDE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_MATRIX_STRIDE),
/* harmony export */   "GL_UNIFORM_OFFSET": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_OFFSET),
/* harmony export */   "GL_UNIFORM_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_SIZE),
/* harmony export */   "GL_UNIFORM_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNIFORM_TYPE),
/* harmony export */   "GL_UNMASKED_RENDERER_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNMASKED_RENDERER_WEBGL),
/* harmony export */   "GL_UNMASKED_VENDOR_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNMASKED_VENDOR_WEBGL),
/* harmony export */   "GL_UNPACK_ALIGNMENT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_ALIGNMENT),
/* harmony export */   "GL_UNPACK_COLORSPACE_CONVERSION_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_COLORSPACE_CONVERSION_WEBGL),
/* harmony export */   "GL_UNPACK_FLIP_Y_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_FLIP_Y_WEBGL),
/* harmony export */   "GL_UNPACK_IMAGE_HEIGHT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_IMAGE_HEIGHT),
/* harmony export */   "GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL),
/* harmony export */   "GL_UNPACK_ROW_LENGTH": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_ROW_LENGTH),
/* harmony export */   "GL_UNPACK_SKIP_IMAGES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_SKIP_IMAGES),
/* harmony export */   "GL_UNPACK_SKIP_PIXELS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_SKIP_PIXELS),
/* harmony export */   "GL_UNPACK_SKIP_ROWS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNPACK_SKIP_ROWS),
/* harmony export */   "GL_UNSIGNALED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNALED),
/* harmony export */   "GL_UNSIGNED_INT_10F_11F_11F_REV": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_10F_11F_11F_REV),
/* harmony export */   "GL_UNSIGNED_INT_24_8": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_24_8),
/* harmony export */   "GL_UNSIGNED_INT_24_8_WEBGL": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_24_8_WEBGL),
/* harmony export */   "GL_UNSIGNED_INT_2_10_10_10_REV": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_2_10_10_10_REV),
/* harmony export */   "GL_UNSIGNED_INT_5_9_9_9_REV": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_5_9_9_9_REV),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_SAMPLER_2D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_3D": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_SAMPLER_3D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_CUBE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_SAMPLER_CUBE),
/* harmony export */   "GL_UNSIGNED_INT_VEC2": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_VEC2),
/* harmony export */   "GL_UNSIGNED_INT_VEC3": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_VEC3),
/* harmony export */   "GL_UNSIGNED_INT_VEC4": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_INT_VEC4),
/* harmony export */   "GL_UNSIGNED_NORMALIZED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_NORMALIZED),
/* harmony export */   "GL_UNSIGNED_NORMALIZED_EXT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_UNSIGNED_NORMALIZED_EXT),
/* harmony export */   "GL_VALIDATE_STATUS": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VALIDATE_STATUS),
/* harmony export */   "GL_VENDOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VENDOR),
/* harmony export */   "GL_VERSION": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERSION),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ARRAY_BINDING),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING_OES": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ARRAY_BINDING_OES),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_DIVISOR),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_ENABLED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_ENABLED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_INTEGER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_INTEGER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_NORMALIZED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_NORMALIZED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_POINTER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_POINTER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_SIZE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_SIZE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_STRIDE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_STRIDE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_TYPE": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_ATTRIB_ARRAY_TYPE),
/* harmony export */   "GL_VERTEX_SHADER": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VERTEX_SHADER),
/* harmony export */   "GL_VIEWPORT": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_VIEWPORT),
/* harmony export */   "GL_WAIT_FAILED": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_WAIT_FAILED),
/* harmony export */   "GL_ZERO": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.GL_ZERO),
/* harmony export */   "GammaCorrectionMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GammaCorrectionMaterialContent),
/* harmony export */   "GaussianBlurForEncodedDepthMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GaussianBlurForEncodedDepthMaterialContent),
/* harmony export */   "GaussianBlurMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GaussianBlurMaterialContent),
/* harmony export */   "GetComponentFromEntities": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GetComponentFromEntities),
/* harmony export */   "Gizmo": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Gizmo),
/* harmony export */   "GlobalDataRepository": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GlobalDataRepository),
/* harmony export */   "Gltf1Importer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Gltf1Importer),
/* harmony export */   "Gltf2Exporter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Gltf2Exporter),
/* harmony export */   "Gltf2Importer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Gltf2Importer),
/* harmony export */   "GltfImporter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GltfImporter),
/* harmony export */   "GreaterShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.GreaterShaderNode),
/* harmony export */   "Grid": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Grid),
/* harmony export */   "HdriFormat": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.HdriFormat),
/* harmony export */   "INPUT_HANDLING_STATE_CAMERACONTROLLER": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.INPUT_HANDLING_STATE_CAMERACONTROLLER),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_SCALE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.INPUT_HANDLING_STATE_GIZMO_SCALE),
/* harmony export */   "INPUT_HANDLING_STATE_GIZMO_TRNSLATION": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.INPUT_HANDLING_STATE_GIZMO_TRNSLATION),
/* harmony export */   "INPUT_HANDLING_STATE_NONE": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.INPUT_HANDLING_STATE_NONE),
/* harmony export */   "IShape": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.IShape),
/* harmony export */   "IdentityMatrix33": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.IdentityMatrix33),
/* harmony export */   "IdentityMatrix44": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.IdentityMatrix44),
/* harmony export */   "IfStatementShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.IfStatementShader),
/* harmony export */   "IfStatementShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.IfStatementShaderNode),
/* harmony export */   "ImageUtil": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ImageUtil),
/* harmony export */   "InputManager": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.InputManager),
/* harmony export */   "Is": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Is),
/* harmony export */   "IsObj": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.IsObj),
/* harmony export */   "Joint": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Joint),
/* harmony export */   "KTX2TextureLoader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.KTX2TextureLoader),
/* harmony export */   "LightComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.LightComponent),
/* harmony export */   "LightType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.LightType),
/* harmony export */   "Line": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Line),
/* harmony export */   "LocatorGizmo": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.LocatorGizmo),
/* harmony export */   "LogQuaternion": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.LogQuaternion),
/* harmony export */   "MToonMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MToonMaterialContent),
/* harmony export */   "MatCapMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MatCapMaterialContent),
/* harmony export */   "Material": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Material),
/* harmony export */   "MaterialHelper": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MaterialHelper),
/* harmony export */   "MathClassUtil": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MathClassUtil),
/* harmony export */   "MathUtil": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MathUtil),
/* harmony export */   "Matrix22": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Matrix22),
/* harmony export */   "Matrix33": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Matrix33),
/* harmony export */   "Matrix44": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Matrix44),
/* harmony export */   "MemoryManager": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MemoryManager),
/* harmony export */   "Mesh": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Mesh),
/* harmony export */   "MeshComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MeshComponent),
/* harmony export */   "MeshHelper": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MeshHelper),
/* harmony export */   "MeshRendererComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MeshRendererComponent),
/* harmony export */   "MiscUtil": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MiscUtil),
/* harmony export */   "ModelConverter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ModelConverter),
/* harmony export */   "ModuleManager": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ModuleManager),
/* harmony export */   "MultiplyShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MultiplyShaderNode),
/* harmony export */   "MutableColorRgb": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableColorRgb),
/* harmony export */   "MutableColorRgba": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableColorRgba),
/* harmony export */   "MutableMatrix22": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableMatrix22),
/* harmony export */   "MutableMatrix33": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableMatrix33),
/* harmony export */   "MutableMatrix44": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableMatrix44),
/* harmony export */   "MutableQuaternion": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableQuaternion),
/* harmony export */   "MutableScalar": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableScalar),
/* harmony export */   "MutableScalar_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableScalar_),
/* harmony export */   "MutableScalard": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableScalard),
/* harmony export */   "MutableVector2": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector2),
/* harmony export */   "MutableVector2_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector2_),
/* harmony export */   "MutableVector2d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector2d),
/* harmony export */   "MutableVector3": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector3),
/* harmony export */   "MutableVector3_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector3_),
/* harmony export */   "MutableVector3d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector3d),
/* harmony export */   "MutableVector4": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector4),
/* harmony export */   "MutableVector4_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector4_),
/* harmony export */   "MutableVector4d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.MutableVector4d),
/* harmony export */   "None": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.None),
/* harmony export */   "NormalMatrixShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.NormalMatrixShaderNode),
/* harmony export */   "NormalizeShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.NormalizeShaderNode),
/* harmony export */   "Ok": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Ok),
/* harmony export */   "Option": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Option),
/* harmony export */   "OrbitCameraController": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.OrbitCameraController),
/* harmony export */   "OutColorShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.OutColorShaderNode),
/* harmony export */   "OutPositionShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.OutPositionShaderNode),
/* harmony export */   "PbrExtendedShadingMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PbrExtendedShadingMaterialContent),
/* harmony export */   "PbrShadingMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PbrShadingMaterialContent),
/* harmony export */   "PhysicsComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PhysicsComponent),
/* harmony export */   "PixelFormat": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PixelFormat),
/* harmony export */   "Plane": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Plane),
/* harmony export */   "Primitive": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Primitive),
/* harmony export */   "PrimitiveMode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveMode),
/* harmony export */   "PrimitiveSortKey_BitLength_Depth": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_Depth),
/* harmony export */   "PrimitiveSortKey_BitLength_Material": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_Material),
/* harmony export */   "PrimitiveSortKey_BitLength_PrimitiveType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitLength_TranslucencyType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitLength_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_Material": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_Material),
/* harmony export */   "PrimitiveSortKey_BitOffset_PrimitiveType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_PrimitiveType),
/* harmony export */   "PrimitiveSortKey_BitOffset_TranslucencyType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_TranslucencyType),
/* harmony export */   "PrimitiveSortKey_BitOffset_ViewportLayer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.PrimitiveSortKey_BitOffset_ViewportLayer),
/* harmony export */   "ProcessApproach": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ProcessApproach),
/* harmony export */   "ProcessApproachClass": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ProcessApproachClass),
/* harmony export */   "ProcessStage": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ProcessStage),
/* harmony export */   "ProjectionMatrixShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ProjectionMatrixShaderNode),
/* harmony export */   "Quaternion": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Quaternion),
/* harmony export */   "RenderBuffer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RenderBuffer),
/* harmony export */   "RenderBufferTarget": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RenderBufferTarget),
/* harmony export */   "RenderPass": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RenderPass),
/* harmony export */   "RenderTargetTexture": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RenderTargetTexture),
/* harmony export */   "RenderableHelper": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RenderableHelper),
/* harmony export */   "RhodoniteImportExtension": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RhodoniteImportExtension),
/* harmony export */   "RnException": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RnException),
/* harmony export */   "RnObject": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RnObject),
/* harmony export */   "RnPromise": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.RnPromise),
/* harmony export */   "Scalar": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Scalar),
/* harmony export */   "ScalarToVector4ShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ScalarToVector4ShaderNode),
/* harmony export */   "Scalar_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Scalar_),
/* harmony export */   "Scalard": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Scalard),
/* harmony export */   "ScaleGizmo": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ScaleGizmo),
/* harmony export */   "SceneGraphComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SceneGraphComponent),
/* harmony export */   "ShaderGraphResolver": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderGraphResolver),
/* harmony export */   "ShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderNode),
/* harmony export */   "ShaderSemantics": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderSemantics),
/* harmony export */   "ShaderSemanticsClass": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderSemanticsClass),
/* harmony export */   "ShaderType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderType),
/* harmony export */   "ShaderVariableType": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderVariableType),
/* harmony export */   "ShaderVariableUpdateInterval": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderVariableUpdateInterval),
/* harmony export */   "ShaderityMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderityMaterialContent),
/* harmony export */   "ShaderityUtility": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShaderityUtility),
/* harmony export */   "ShadingModel": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShadingModel),
/* harmony export */   "ShadowMap": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShadowMap),
/* harmony export */   "ShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ShadowMapDecodeClassicMaterialContent),
/* harmony export */   "SimpleVertexAttribute": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SimpleVertexAttribute),
/* harmony export */   "SkeletalComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SkeletalComponent),
/* harmony export */   "Some": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Some),
/* harmony export */   "Sphere": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Sphere),
/* harmony export */   "SphereCollider": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SphereCollider),
/* harmony export */   "SymbolWeakMap": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SymbolWeakMap),
/* harmony export */   "SynthesizeHdrMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.SynthesizeHdrMaterialContent),
/* harmony export */   "System": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.System),
/* harmony export */   "TagGltf2NodeIndex": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.TagGltf2NodeIndex),
/* harmony export */   "Texture": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Texture),
/* harmony export */   "TextureDataFloat": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.TextureDataFloat),
/* harmony export */   "TextureFetchMaterialNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.TextureFetchMaterialNode),
/* harmony export */   "TextureFetchShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.TextureFetchShader),
/* harmony export */   "TextureParameter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.TextureParameter),
/* harmony export */   "Time": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Time),
/* harmony export */   "TransformComponent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.TransformComponent),
/* harmony export */   "TranslationGizmo": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.TranslationGizmo),
/* harmony export */   "UniformDataShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.UniformDataShader),
/* harmony export */   "UniformDataShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.UniformDataShaderNode),
/* harmony export */   "VERSION": () => (/* binding */ VERSION),
/* harmony export */   "VRMColliderGroup": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VRMColliderGroup),
/* harmony export */   "VRMSpringBoneGroup": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VRMSpringBoneGroup),
/* harmony export */   "VRMSpringBonePhysicsStrategy": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VRMSpringBonePhysicsStrategy),
/* harmony export */   "VarianceShadowMapDecodeClassicMaterialContent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VarianceShadowMapDecodeClassicMaterialContent),
/* harmony export */   "VaryingInVariableShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VaryingInVariableShaderNode),
/* harmony export */   "VaryingOutVariableShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VaryingOutVariableShaderNode),
/* harmony export */   "VaryingVariableShader": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.VaryingVariableShader),
/* harmony export */   "Vector2": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector2),
/* harmony export */   "Vector2_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector2_),
/* harmony export */   "Vector2d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector2d),
/* harmony export */   "Vector3": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector3),
/* harmony export */   "Vector3AndScalarToVector4ShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector3AndScalarToVector4ShaderNode),
/* harmony export */   "Vector3_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector3_),
/* harmony export */   "Vector3d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector3d),
/* harmony export */   "Vector4": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector4),
/* harmony export */   "Vector4_": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector4_),
/* harmony export */   "Vector4d": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Vector4d),
/* harmony export */   "VectorN": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VectorN),
/* harmony export */   "VertexAttribute": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VertexAttribute),
/* harmony export */   "VertexAttributeClass": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VertexAttributeClass),
/* harmony export */   "VideoTexture": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VideoTexture),
/* harmony export */   "ViewMatrixShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ViewMatrixShaderNode),
/* harmony export */   "Visibility": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.Visibility),
/* harmony export */   "VrmImporter": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.VrmImporter),
/* harmony export */   "WalkThroughCameraController": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WalkThroughCameraController),
/* harmony export */   "WeakNone": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WeakNone),
/* harmony export */   "WeakOption": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WeakOption),
/* harmony export */   "WeakSome": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WeakSome),
/* harmony export */   "WebGLContextWrapper": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.WebGLContextWrapper),
/* harmony export */   "WebGLExtension": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.WebGLExtension),
/* harmony export */   "WebGLResourceRepository": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.WebGLResourceRepository),
/* harmony export */   "WebGLStrategyFastest": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.WebGLStrategyFastest),
/* harmony export */   "WebGLStrategyUniform": () => (/* reexport safe */ _webgl_index__WEBPACK_IMPORTED_MODULE_1__.WebGLStrategyUniform),
/* harmony export */   "WebXRSystem": () => (/* reexport safe */ _xr_index__WEBPACK_IMPORTED_MODULE_4__.WebXRSystem),
/* harmony export */   "WellKnownComponentTIDs": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WellKnownComponentTIDs),
/* harmony export */   "WireframeMaterialNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WireframeMaterialNode),
/* harmony export */   "WorldMatrixShaderNode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.WorldMatrixShaderNode),
/* harmony export */   "_from": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__._from),
/* harmony export */   "_fromString": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__._fromString),
/* harmony export */   "_fromStringCaseSensitively": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__._fromStringCaseSensitively),
/* harmony export */   "add2": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add2),
/* harmony export */   "add2_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add2_offset),
/* harmony export */   "add3": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add3),
/* harmony export */   "add3_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add3_offset),
/* harmony export */   "add4": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add4),
/* harmony export */   "add4_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.add4_offset),
/* harmony export */   "addLineNumberToCode": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.addLineNumberToCode),
/* harmony export */   "applyMixins": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.applyMixins),
/* harmony export */   "array3_lerp_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.array3_lerp_offsetAsComposition),
/* harmony export */   "arrayN_lerp_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.arrayN_lerp_offsetAsComposition),
/* harmony export */   "assertExist": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.assertExist),
/* harmony export */   "createAndAddGltf2BufferView": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.createAndAddGltf2BufferView),
/* harmony export */   "createEffekseer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.createEffekseer),
/* harmony export */   "createMotionController": () => (/* reexport safe */ _xr_index__WEBPACK_IMPORTED_MODULE_4__.createMotionController),
/* harmony export */   "deepCopyUsingJsonStringify": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.deepCopyUsingJsonStringify),
/* harmony export */   "defaultValue": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.defaultValue),
/* harmony export */   "detectFormatByArrayBuffers": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.detectFormatByArrayBuffers),
/* harmony export */   "detectFormatByUri": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.detectFormatByUri),
/* harmony export */   "downloadArrayBuffer": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.downloadArrayBuffer),
/* harmony export */   "downloadTypedArray": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.downloadTypedArray),
/* harmony export */   "enhanceArray": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.enhanceArray),
/* harmony export */   "fromTensorToCompositionType": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.fromTensorToCompositionType),
/* harmony export */   "get1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get1),
/* harmony export */   "get1_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get1_offset),
/* harmony export */   "get1_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get1_offsetAsComposition),
/* harmony export */   "get2": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get2),
/* harmony export */   "get2_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get2_offset),
/* harmony export */   "get2_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get2_offsetAsComposition),
/* harmony export */   "get3": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get3),
/* harmony export */   "get3_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get3_offset),
/* harmony export */   "get3_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get3_offsetAsComposition),
/* harmony export */   "get4": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get4),
/* harmony export */   "get4_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get4_offset),
/* harmony export */   "get4_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.get4_offsetAsComposition),
/* harmony export */   "getEvent": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.getEvent),
/* harmony export */   "getMotionController": () => (/* reexport safe */ _xr_index__WEBPACK_IMPORTED_MODULE_4__.getMotionController),
/* harmony export */   "getN_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.getN_offset),
/* harmony export */   "getN_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.getN_offsetAsComposition),
/* harmony export */   "greaterThan": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.greaterThan),
/* harmony export */   "ifDefinedThen": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifDefinedThen),
/* harmony export */   "ifDefinedThenWithReturn": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifDefinedThenWithReturn),
/* harmony export */   "ifExistsThen": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifExistsThen),
/* harmony export */   "ifExistsThenWithReturn": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifExistsThenWithReturn),
/* harmony export */   "ifNotExistsThen": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifNotExistsThen),
/* harmony export */   "ifNotExistsThenWithReturn": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifNotExistsThenWithReturn),
/* harmony export */   "ifUndefinedThen": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifUndefinedThen),
/* harmony export */   "ifUndefinedThenWithReturn": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.ifUndefinedThenWithReturn),
/* harmony export */   "isSameGlTF2TextureSampler": () => (/* reexport safe */ _types_index__WEBPACK_IMPORTED_MODULE_2__.isSameGlTF2TextureSampler),
/* harmony export */   "lessThan": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.lessThan),
/* harmony export */   "mulArray3WithScalar_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.mulArray3WithScalar_offset),
/* harmony export */   "mulArray4WithScalar_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.mulArray4WithScalar_offset),
/* harmony export */   "mulArrayNWithScalar_offset": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.mulArrayNWithScalar_offset),
/* harmony export */   "mulThatAndThisToOutAsMat44_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.mulThatAndThisToOutAsMat44_offsetAsComposition),
/* harmony export */   "normalizeArray4": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.normalizeArray4),
/* harmony export */   "nullishToEmptyArray": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.nullishToEmptyArray),
/* harmony export */   "nullishToEmptyMap": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.nullishToEmptyMap),
/* harmony export */   "objectCachify": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.objectCachify),
/* harmony export */   "primitiveCachify1": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.primitiveCachify1),
/* harmony export */   "qlerp_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.qlerp_offsetAsComposition),
/* harmony export */   "scalar_lerp_offsetAsComposition": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.scalar_lerp_offsetAsComposition),
/* harmony export */   "updateGamePad": () => (/* reexport safe */ _xr_index__WEBPACK_IMPORTED_MODULE_4__.updateGamePad),
/* harmony export */   "updateMotionControllerModel": () => (/* reexport safe */ _xr_index__WEBPACK_IMPORTED_MODULE_4__.updateMotionControllerModel),
/* harmony export */   "valueWithCompensation": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.valueWithCompensation),
/* harmony export */   "valueWithDefault": () => (/* reexport safe */ _foundation_index__WEBPACK_IMPORTED_MODULE_0__.valueWithDefault)
/* harmony export */ });
/* harmony import */ var _foundation_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./foundation/index */ "./src/foundation/index.ts");
/* harmony import */ var _webgl_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webgl/index */ "./src/webgl/index.ts");
/* harmony import */ var _types_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/index */ "./src/types/index.ts");
/* harmony import */ var _effekseer_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./effekseer/index */ "./src/effekseer/index.ts");
/* harmony import */ var _xr_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./xr/index */ "./src/xr/index.ts");






const VERSION = (__webpack_require__(/*! ./../VERSION-FILE */ "./VERSION-FILE")["default"]);


/***/ }),

/***/ "./src/pbr/main.ts":
/*!*************************!*\
  !*** ./src/pbr/main.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// This is based from https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/textures/brdfLUT.png
// and https://google.github.io/filament/Filament.html#lighting/imagebasedlights/cloth
const pbrCookTorranceBrdfLutDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDUtMjhUMTE6MDk6MjQrMDk6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA1LTI4VDExOjA5OjU4KzA5OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI4VDExOjA5OjU4KzA5OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmQwMDIyNWQ0LTE2OTItNDUyNS1hMTkxLWFjZDNiZDc4MjM3YSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkMDAyMjVkNC0xNjkyLTQ1MjUtYTE5MS1hY2QzYmQ3ODIzN2EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMDAyMjVkNC0xNjkyLTQ1MjUtYTE5MS1hY2QzYmQ3ODIzN2EiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQwMDIyNWQ0LTE2OTItNDUyNS1hMTkxLWFjZDNiZDc4MjM3YSIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOFQxMTowOToyNCswOTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+OECprwAAXI9JREFUeJztvVuW5LiOLbjpYZmn7kd1z7cH0FPokVbVORHhQn+QeAMUzcwjT2beq+XLnCJBkCZtAJsPycb/99v/A4BAAAjQT5I02Xwj5qtQIWwlfWZsDiDTYtS/q9UIxHbpGeFGsy0tJa2eUmdTy2ugQsMm3aty6a4b5h+dVHxWuBEo+1/rP6mSWzkUewyAgIFBIE6DgDFABMmxlUb5OVU0pTg55RY74dv8XSIpfyGBlSaTdtenEpbM+1oACDSG3HBqZFwafVG+cT5N5pRKyeb0VrgUsAjW8qChl3y2tNQcxR7oAA3IncAG9wc2gPPTsWBSlqZ86gTqhFceEkgtlomQiZimjbBDeasBwHJFXkkB1oRFyk3MM4vCO3y3FW+FU8IKlH2O+kudoYrpRtZT21gvRhIBQIwQB7KBQSk4rM8qf4xBFCRRnGrdUDqtrgf9rVVsE0Z5KILLJF9a41UuZYl4e3e3JhHvaEijVp6x2BV16C+QtKlYCZdItVlWQPTvMBo6cFKlA33GeikfIoDaADTzyc8UB4Kq5nQozowGK4yUOPfc3qRzkUNbBfQWxEaSUOcHn91qc2nD2eDoU2cktglNo2koKAkVvXCBfn+cm4etXrrtPV6znrJvJ4mVthGgwegAUQwO5zaArV21px6mZxCPIQWd8AARHSgsNVDOrNIR8fY+WWzt0vw1GuA6nU3TFtAdt7kVLtB/K+AL41co0d/wpaynbWWfyNpQjQEGMtb9gNgKV+xomkyBYIvO21P4RpESGetegOCKyAlz1q0ZYMdkXBN9+nD428UBx+xRdWyvDTv0F+jcm0ov0EI5CewHvrTNPCrNttTJxwgAf2psYMw7UZcmJUBEcKl/cwrU80J4IiZsvXvNhRAQj7PIEG5qn67HqX6Y4fM1DuzGtdylAnC9ndwKl4PUTqD4Xr7ZVuednrrpTsyDvuiATTxQEO5m1NvGgR7TqQqeNYZ+XugLEgMgjMZDV4hvbcOnOzQXVtGYk8uHGw/4ohbfFjRkSnfUJQmX6N9B+YD6u9JOT4PmTekToLeJx0BNuKvPNcXj86O1YGs26CXtKbwGVPNCLySQ9MMHmSS2iQaFW9qkwVVCunTbBS4HLzTuAP3yFOet5lLgJjjkDqDiS76Fum+hNCUOxYrEGgMguup+1HsXB5Crm2E0ziIAvGmhmhd6IYEK1nk8gF7JRmGVbuuep1WVjwNBMvvRworuhSXrfg4nJWJmwnpdpRdzmaXYQRM3iYeOeo8YzpistCT3onVjNkZgxp57Y1inDWW3RhUSWRidmCrfTfmXmrdpMvKaDvg7SdtumO4puOH7gF7Yd/LeVFJO6Jt+2RAQfHqvh+DrHFhO3cSziYfz9w7Z3foXsiS6cJGqYOfy61MVE7tpBEICqm036TnFkEw03LOAbFP9Zlk31d0V3VRxwcri1YL7rRlMr60wj2yZWWfu1VZPazBN4kbswH5UVZoGvY8DhbVEJb0NoGLz+wjgxE639BSIRy1PWurg1VbJmSYdEcPyhKoK3OnNBNE8k2CVFRbCsRR4ZhgQvktqsfhS5goc4jW0VlhgKfZ8QuFkVVWb4RTZd+tfzfa1zSfuVnnvjaHe0kMpZyXg9WxLCRXRgrGT7KGDKlQyvqgzkrpWgdcxkxGdtXBscS9AlYBF/83eHhRHqdyVNgkrtJnrjAkZbZ40ZCNAaQP3Tp0IKEylNh5A14kR8s+NIbnqTQJerb3xtRnM3vtMr5NMrdZto2qlPN2GC+pqoa/oe16YSi+g5SkHdzxnbxLk63V197vrXOLQ9vaJeiuEsYF+rddIghol7nOon04Tr3jSGNYePRZAkukSpXzMHADd2MlGA6KMBXG3rBs1d0pmxbxRF67uuxsZgnmkKhl/ZVetSSBkNrZxIrYSnadPX0cTfNk0p90MZ2zgHtxIG+C6T7kcdkR7CvoqksAXVYnNeKBf2HImSkaAsvAxiM1d8piwgAvga3V6K83CSZtoeG4jQ+5t2RDMtUrHl4H+pCI75CNVfQRQGzjaCYdqI3QhZkHcDKNxZwwqwFaUi0ICXiFSutywiaTKCxCqdAY0F0VDCq2EhswphTS8lbYCT5oHHPptH0r87dEp3SimR4Pd+s78CmtpE8VmuP2jYfxZWEWKA/VEKmzieLdPBrG1olyE2h4sBNGndTPm1mb0WpZOOoO7OrV4vSVI1kodnrATKMwDKdQgor/FX2kS3paObOMsEVo+SmyCQCh6HPGc451wyQYasWQDUrU3BufDXIK/kzjjvePfQt+nBwbzTHvXky3FdJZHTTxghO1pKxxagd8uWgg4/ZRyNLNEcM6kpDxlljYWNX8J6Pnmvl70QOHjK85T2Enj4A9sgC/ZgFlSwPMRAKlR1I5fL8DT0cD0rVKiV3fj6SuArjNzGvtTCidVdkBcUxpUmSmnc+p7mGaT2NnYXj5+s7cTZpRcFM2Tx2Z3g/8sd8IlmTUpuhpqBTLWjRevBfw1LRL9mDjI50wLnYJ7mKi5jxhZJxdZcCu8bEVTt8RfxJPD+pjj4XunvmwmZb48n1PWtVW2iWfli8TG098mhpsFGiCI835rR7RIohdAThw/CZkSbHTTyEx1VPaGbdp7X/uUZoHLkEZiX9idWnBHq8sCd6ZiC7OGZDOAN9FY/ZjnxLqieficvfwvSmyCwEz4vUDsRxtkc6y4tRO1qIFm8IAS4ts1sqNExaa41CIDT6d7LmS7kdPoh7ZZD2qeg72GeaXlzibwWSUZozEz6K9MgkJpVjKimPY/N4rV6A1Yu8Q+CFg/mGUefJ5tYDv7eTzxH+b7M+gjjgcG1n0+jgA+MbQ6TKlrxcDoCTMwV7ry7gXnqdz2Osug9OCzGqjUEHMiERK5w4nIMjOjf6+5EHsW0DmxhzgOjEeYQihSCuSOE3zXMuW7Um5soEhsHwDIVYwM2eq2NElKJm3SLM/pAZDlOe0DX9xcrRBGOAtkDaEbjf0U5B7VeBe1SdRoDmZcNUehOIQa2+euqE+cHh7GtRUhmUH7XiBFrtEe8b17a9CX2UAuanDsUZ7GxK2kSVu1XV14LlSJUVlkTh3srEDW0NSKrpq4b4L8ErjeimzZc2juHvz9BRAXBN4TpLQ54t4Mbt4Md7/h+T0uhJTIIL6xkx7Qc7fQQQRwV6grcmnGWXDDnfHIFa9grRkpp6iFCnwO1mNVy0DsTAJPozkqOUl0tneugb/ZocxOUswgbIXIy8C6BMaHO3vTBpASCcS791jtAe29NRkBW71Il/K2aZjvYi9tqdD2cJ5lYWhO6IbWKjNrm1kXjVzlY5MQzV7eNZHCxSZRHqegDwlGywm4j7S5t0LUn9upz3X4Ez96DqwpzgvhNmHM5lYYOdP4hCPvntJtkWo+5Ty92j1YawQb+Ir+wpe/QG9sJ3PpAfqLin9w4tAM9K0QjMhqZ//NElhcSpPj5TgQE70NWBy09rAdD2zSqcgig6zmqiKh0GMxvR+elpmlIWmm1h2UjdM2zdUz+mPY8aW1LaW6fwCyz4V3gwceAzwXB06XyeR41gZgrjUZMuNytjaDkOYWY36dJnNKQSyd3m5niA61FEgykumglg2pyiRA2aOX2oGYkpKmYqH2D07wvb4VdqaeqzwUzbw1561l4EYGrQ3EDXDw8i5xv/GzWIjV9KpeTGKmdFXdnaq/bIJAawlWwH5ruFp7t+2yySv0ar1J+P548Q79QWEo1UTZ4rOJp9bCjG/aCBdVpMPgWaD4MGQ6GGnGsXtA3z9OGXTtic2JDWBrM/COWarjbDxQnVJb6k3Ll5ZAt2YWb4kHKBnJWLubI9KmzaXfADRYddTX2sYXo5/9CQ7pDUy3t2bQNgSZBXLHfnaf14lzPYjYdvs0vLYXbMCCuIL+Nn0/HpArixJ/HqbOtLh0N4vvBeTmOZ1lQ6JvbxLRwQ+YB8c22LXHxjZO0P/m8RzLR+ohuaKbug+un1e4AnCP9gvJsR8z4EkbgPGgAuJz6AfEVOMBCnW7U3utoyUYtSzgPHR2tEZDzPSSNyaRe2tNAmlW9Fbb+kat2eyP1uOeYXqdvmAG0pCgn+6q9Ath+0cc7wbNgIPey3EAVabYAIJhJLgnPXyB/LaZA+hHeoPSEtjdSgdYwFlC1rnJLFvMBlMidTNspVO/Xh4nRvJmYp2+bAbJGGA8hebsfiIpoTzO6HsLqXcB5d2dhzYAL1MkzswGnlsrmIxHKizEXPQDSzA56cVVVgBbol9mliZhWm/n+J1CuQ07VuOqbyKD7eFT6D8OAl9iBnV++OIP6OSPg+YSHlRdHy23TbSxwtxMUeobcjYgKu/pkBuOtFM6XVq4QYBLOi0toYf1us/RA/laBHMFAto2S1HeSkvs1p5PotPer3sj/0r0gzXT07W0bu7Dtu6tcokA/lEuB+Lb2c/aTNo3rKiEN7lhLk+CfgR3qHICd59mqKXqLNkOf2FufEawNy1X8Y79t6Nbi5gGvjlcxBuSzS8n6I4X2eZeZj4v7fuv85sLeIp+mOcB1N0XKFf4NtscqrpGcW1ISPIDfAcqboNUUauw2WBbK8iU1a0GRGFKOXoWEcZzo1YVi5Xsv0Bn6EkoFW1Jxsmr+Y1gttJzhWbZik+A2uZOAf0yF7pVm9HfGNs6fSBO7wQqn3xyd/STp+D6JzbAotEG4OVjpvEqXa3sYvXUkJZUuhv+7jP9+9ucchFUdNpc388K9EGgEJNGnZs0gwH51xtPPLz1djBt6vkEX+RzM3hRsopUeppejJWA7qgOthvjfN3aEgyyn7IBJPmYabxK4EuAy/en6qXNgi5lYXi3/WxmxWpCfmg6o9lW2YGg7EY+ku3dJOgZYZ9oBfj2/Sr03wrElWAgL2MFNr99R9DJlrgQF7ykdNDagMssJbn+8I484CwgI5aaaJdLUXXV5FOd6efgOxBvIGuqnIA+9q2QH9gvjZWJN9B/YwYv7Gj4KvRDngiTQ3EMR+vd4bKCcy8GDFE52unRoNFayx0d4ovYL/TendKYisiWUpYPmUDAPcVMpzPeAArCsYmb3ZepD/dA3ASZX4n+IzOAuYDvg/tE4MGcpKL+Btt3SwT++yWeU5jZGzYQBBDSVdxAPQAQKBhh83N0Rt7hNWU6fyD61LSSFzF6aoCisIrQ1lNPpfggM+BdU3ccbYV4KdEKNF/qLZ2bfPtmuBFuJKGbA9Wfwg4Qt/NCoqy1hGMbECfqBSgLY2szSKc5h7hanvMBukw5qGyCu5tvs69ZaZsJB19flDTVBbFFvTQ1MqxP6XW/k/gjJduKTIE8YhyBKTgQH6FyKCmWwJIlpDWE0gYA5H2gN+lqswMc49RWkOJD4kLrqDy3yxeFUmK/QrpON8iubak6MnN42W3zNbz1tegF3nfYL0i+Yj+yGW7iNT8BLHTluYcEtPrtEtiIg41bG9jJJMBl84DBU8op8FqxDvt1xMwIRaln5wMmEBAaZPtetffvZTrE2vOUaP4uXwvlJ6D5pORR/kj5cTOcDwVuicB/30RxTDJaQhoSRC0MzwMboOCYM74d1tO8kLkklHJUBib6VRGgXslCLI1uVbqUa5Pr9WugPzkKzelLvQDlnf4m8fXoT9ftXuEjzoGi29qwnQBNbIc7ZIcE1sSqCSJjJ9jg2/h1bExFqphXzdkicxlKvy5ciAKLgxPOl75QZSqKd8mgb4/KPveCdaIwlGThr6L/BTM4lOxceC3wbL7ZCmE9dfLZlvDkwz8X3+51K+l+sD00i18u7VWNxOAFWKEKktXB9bOxhKH46bBIKbnZulxqqMB6HxBsgu5kaj0jf7O2V2eJdyUzUXkT5TlfLsV8LUoKAuiHwNWjw7Y0iZuMRPeDzBs24L5rFwqMt9vtdYNnOPYyWA9Ujg3C4S+G4Rgedq8NYUOt57n7SeLXVbn9yl+A/nEn/wj83sGvfy6sA7r19C3dJy9vS2sboABotQE4FOxDAdI39bVrS4AAy1MvK29qbW5qEk6d2R9Z0UmtVLtKxCDwvhk8ZyeN6T7dxNYF1Pk8CzQGgYpZ+QGPq3VsgK71E8q5rWJuNCbu4gD8xuMK9/m0+DYG9IUlIHw18ysBSBfljsRX3nqLvFBrVDLHiapHLyr5MsmDKHeT/8KoVxLzFvi3Q0f+z3kd1v35ZrQQ/b3ZapHUuDqdDYRu2+0PuDGDYq0XtSUQNsagRdkk4uXePX6VAospeQ2mL9nDfRB41gxagXEnsNfQX5b7/MyIdC9QeNtDj3W7LcK+NC5hNeVGtf0qmOVLNaFXMe1uTXvKukuewgVDjXhz5xgoDWRvDiqS0tVbmHaqyrpHCd/h87qv2MktHd83cWc2L1qLWQiTRBwSwE7yFEchz5+pKFZK9nZrA0GVwro23XrjJ2LfxBKi1asi33xJSCjlhERNY4Y1qFOF3ma64wl7sJNdd1UOdW6++GlFuG/6xfID9LBkRTzy/HUjPwPuJDLQ24eHx3C7YIohwSA/ri5sAG2skFMYTAfQgyEeqyST7ogQjJGgqhiq3x75wpaX74t2IOdmm4RewPfN4M7sn664k69C6JGYboaToxoSwBdXt8uDLpD+vSNvY0sk+vez+NU8T6jidyKwfGg/QJnS2WjcNqWcMlHcsFrh7fGCPZxKvjFI1bZeQP8BmkXyqGMbsfUjeRjE199TjyEcu3t9oqJurijUq8gentnZBwupd3qmwa4r5dNy7TZbjmbq72gQ5xcOOhzua2wl744dyEpzqsjP15mB2qFc9RfQvwSeRf+h/Ml44IQIjTgGKEelZXT2j0eGIpvlznqmJA0VtpGU520U8MLhGd9SxmWmPvNBXKu5B+/FgXik71z5wjslSaBRcqjzZQ1PoH/7NYPYTg8Kc70xHv2VSOMA4rbLm9WvdMzHBcrHwfJQ1SUqHhXbcXYSsl17JlxEZ1bM+g+f63uej77htsoRlNMOzVeU3Amk5Tkv4Kx65f8bfTmeh/W58egvxKDH6DzxSwH1/0BpUhLYMv4ssLcBBM0hpxGDAagb7MZ3aO4cubugp3Hg5thHlabS+2Zwa1ELFMfoR4N+16UTinLb7j507CPG/Pq6FUKngLwnHuFrJbiParpoCvVTQwCKhTBNqA1EVx0MLIUC6sSiOlT5LRdyR/GlYhzobt4+EbTtqvi+vWMGVX4aCSQ8tZqfJOi1ntuBx76VTcQIVsEUKBGI+dCjtYh1YdpBbpWxpzTbNy/mn8OITXlwJ2QzgjypmJe+/AZa8xR8HWhOjnN7OJU8eIbrq3y2JN5HfwnQw+oB9F2vdqUPxXdk/+sLBY9I6V8oq3YOdTFiNyQoS2OneqIlmfOfg7S/3wTES9mMbe7RfeC5m5rJulrfcIryfv/Fmde8DwKda3gR/bfG07W+6dVtKEh7gWx/0sy6LQhb0Ahrh08hjC3Qu+gRQ081pPZ9LkOBSh2sXmXbS5J34G6MZ1elk/SDgZc5zy1qbbW92eypyy9C/0GtmH9WiwA8ItdBxUzKcSsPMeNt7xDQ5JtBSO3C0yse3NdYOb59dF0wYuX7ZxxWGH/kZLrDaGvjQF1lh7le1Z01FvmjyTeJG5g+6W6P1PbUpbOKXa0NESp7/pjtRNeX2Y3C6hTrBW/ZeEdfJQ1JVutZgY8kxX1SwC8x3T4nR4tu7lUSvAO3duu4SgEy1+ENyhsGf+hNC3lPw44Q1l+lG6PqfH+H/q0Fdvltl2QQnGg6PylmMqoHwPLa7IY8cY2A8mEvYVHDQry2Af1OVXUExRXpMoe3GWdX3VFBqrb22xf7vOXs9xTlTuGRnmfx2jT3xegv80+UuNei8B33TtKiDzXI9pmdO/fd4sJq8ufWBlRrH2Scy9+6VW8P+Qs84cvPJXcU38STE2d/YAb3erZBoPiCBwwntvIU+ju63wh33ygqsQ/Fl+48DggGmo3RCs1DPo6oNp1sbKA7Bgv4b5IvcdSTVGYInsPddfql2cmEG9fbI5RvuDU3cWhF1dUr5PcA7fLvLfOpwUMZ3DYW9UCezykHAP5SZxNIjMmVBUAL59nunOvUBFOt4JV+vLo+dp61E+7hnruB0lyTly0rarPiTcLFyggr9DxDzUu1xUC8ROSXk5NNWzhG/22wenjgClSLIUG2jOkWS+cdzzq37aJFsQSR6jk07IKBsbpUv/Os+XgCzTl/uCbuvT7qG5YUVnqeXBnV6h1w0RvPZkx5ovxN9B/qPKgLMAXa7zPes//moZLasafMOl/mZQXllR314wGvubupsQPVxGjsWNCZtDUVi9XoIL+HjtPzLDmpAHqCyC4I7CHYNfo0NA/c+TuhwCyEyRE3+pdWoe2q6z6Fe0ds9kMFX1TaAAoFxv/XsIxxoEdzsnDaCpQe0Y0invD6CAA1ejq4N3TuaWd/QD92yl9Ff22uHYJvjXmv6hFBWXr0W697B3cXTlAJox0S5E7FHgGyXTtjM1XonHRd1RzRYOS0A1xI9A/d6ukL3v1ZuJcDj5cmXlx+7vlLtGSv6rVauw7IQtjWo99YRZODAHzSRIf1TS/q0UXb5+jOq/ashlEatm3iQKGVr/FqzOzObErSAiA8jVlq+zK4ax8Mi/sS19upOsbxa7Xiqe4GNTdUyM/eKio7gW6pznpdpSeGBJztnfTeQuR7NgJy1UIz3fMoldt2bKTF8Tzdw70fwgblLOYeXfgauN8xe1u3E/vD0P9UQzsl9neCBb6Sg3hqlfD0UbVxAu7oaM9mSEBFudm11Ci4fZzqfovlDV+KOO5ZTUmUZ8FI/ts3UXhi7LAYlLwwfMxNW1Vdrbfg/keh/6bdh9v5jwr0oSC85aQE992QIGQWJV18SEXzElBTyseT+G5m3DtA8/+dmEOqMZsKwUFb7MMolOzvuny1G0u7AeW6WRGUJ6r+Lejfn04NYTOc4LHlMF5ec4o3ZZ7bANp8+/MWqqBi/JUNtHEg/URFki94thOrAO2UdAhONtZiwuRH0/ol+Ha1vtLp5ob2p7kbv84Y+HeCj9475Xp0YhWSc+ehy3wq89UGEEcX2kdTq3axDt+Nr2UXu6fv9rQkJG0fbo2kxTfjzBGwV4D1Jfh+E+7vd/IdYzC/E3zD+MtAAXekOJAn+BUO2Qwa20hTUB1h81Br4wAlgSimV7AzyyCmkjeQ9crDvMrTfnQqCQ/yv+kab/BdrcS96c6fOn3TGPLVkHUAxrSimBnfhg7laZ8S3E/RobMhgbGBflzbWZrTsvPQpjd3YliXpywdWRjrYqf9H/d1czfGE6df76G/ENC+9ItjS3maH4hpTyunm3MG0lxNXavNLAA9gLzTbhMHKrkGWE2prb0JJhGdjnrVOiO9qSY0n5tVXF750M0XfXsGlEVnXj29weg76D+v+6h9f34NZzhlz6UN3iLe57TmxPrv8snVbuiT+OZQa1PqBTj/Htms+WgDfXdLym54ayxP9QmOd9xh22F36n8lJJT2hlqb03sdPkL/3hjcXiAHo6G41u3FZGJ2sooQzMVnhzt2byouP7Xm5VllPRWjp2Lm5VGX+u9TIRslvVE+GLtR8xnHsjr9+1Or8BXfvOce56eN5dyjH/8OYxhrDOB9v7MBmCsG6+kZMt4GAMTQYTTUlrPEjl43FBAWnOVmU909k2lK00Y0UyX0SnvSbRZS4QiUuF7e90EV+lO3ki+lL4C1aPRJwL1rgXfNdd1+xf4fepZ8f+fpHaBf2yb0FB3axYeQV5uHtpOixGhKE+aWzEgajJIb1KIF2TphatE5SNvKE5HhEFuVhqYnPhh6/V+AztcUnuu3pw/OHmR5v7rS5endwNZjfilrBKisghrBNXaVUUT4nAPd1ApvhYil1RqZd+FbDXrzCnNKMvWpqj130vC4rIBuv0vX9BHyemy9FnB2I+PXFG46HL6y3w69ATpnOzZtb8cAijXbKBBzUGRWLy60bcP2sLCig6JyN87QijV0tNcmQEqvw5cxtOQe6FAadgD0Btno7/oGpi8AcUP0n9TQfaOX+/DUdcAAPcwA1/RlNe1exR8Y9poOIKcP/lTuvr3nxWLZiWEY/farGuGE6SYOGMbvM71dZQdfyVS4t5lpcWDDVbAo1stAj7tEX8DccXx4oUqLwpNWXmv0rtthN6i8kdmFBe+TRxrmqkmUbv6lQQIKLys3OMu2/j5ta1MkKbOKrSznDYv2RsaYA+J11z4nc0q4txWNcfaerHSNtqs3VnTCuXcx5KCTz6tNrXDmYSsHXz9qjhRIUGxtgH2/Ib/Brxt4UPp5FqfKV3H3kxAh3xiGRzV54VSh3X7sXh6RgDtPwpAgohDFyNU1wbRqcaEd7k3F4S/Mc17Qz9M/Ca8WKL9A5qaKPX1h9Hyoea4EL8gGcNn3/4h3nxZA7rUkfMmdGXgoal3NiXVK5lPYQBkHyAt7h9fYxpEX10DUONonHXxAIQqgFBuPe/+HSuY1gJ54zV8oc1dlfyl2VZIGzbcUiDMNEMX3o/yRpESHMjsK90StK+VoZrSBcomABpJkrE5VfoDOTMXJn4pvxI4nSaok1bzCloeekKwvaGwgNnSDaQ7hDbBqAJUge5bEf50MUFV5wWD29uM2w9EwAzC7jutpUh74ul6ckR89CjpUPYGAVLHQRm2mUfKUp0ccmKpOC25QU7TKSb5Xh3uYW/iU7+wdqt74lxnLrqLxiq8ph7tQb7H/w1CQVT3ABIbXggeRudve97vYzKcG5ep51AxmOxYPeaKzyklwL7eJ9pkI+fa2xcZto1uI9/67YvmFvF7OjWvnK7e6Glxg0b0iM+1bvvXHt1b3FNV5ZzLn3H/fGsOtqmoWiL244N4plg6EsABziuT7+1MYy3JH9d7pjg4VmcZFSX+zfGQsTZGBeOvpzSLxlqa3jrOSr9a2zgC368mdsz+xkBvPfcJ/euWFwidlYh+aLuHhsDtMAmM++5ungObtWxSVvFYLRE+HuNTh6+b3fm2XXE7Ce5nJ1dMkpoQ915510hVuYq2h2ZzpZ5yOIH7kd5Eyi/saM9M26TO/Xkq2md1XeIPbfJnLP6n7WKB2L+1n0AX3X76g0KA2ipVxACnnBvGbXwSgmKkGZqBmHLPriFNbco+poahV3n5jP50H1W9UGlKNA/fMl1KsPZoPosTOPd86+8FfxDqLW25z2+0/AP3hVNcBaIBo0BwKC7rYHgK4yaYBmHfpCujtbb+dLIKpgaABmX5YMXI5nOG+88hS1Kn1HJpyrVHTff32eTxQ3HVvSNVdNJ25G/62AaG1xtqFv5d5bza24lMWciezb7SrC8gTYWsk6137tAdBFduAu71KgXyIYAmypbanFpGuCcmxAiuHqLYBvRwzM6xeAQWglwK27nQFa04vbn6kIod4DaKlf0Xq0mb0XCw15FrZzffyG0MK3+XNzJMuobmGTwP6ZHSR65onwmiVc3P6XmYH/Yj7ne8/c/wGF6Rn1p3bHCKHlWwq5VQPPKClv1aDUVv6aX+ti+jPrVsx29AON23dJVBYywbHpij2s4DUPvPridNN5k5DcWVerTtPH4rLBXdmQf5hd1IBFQZsRdOCr2L7xSkKwlaV7WITCvRr1zJQHuIux3CKjQb3bgXnjH3As9qMmw9FdgwqzVWI4e+SNfhuFAKZS2yKSsDtxwnHLvzNofMe0F8I+jr/oSrJbXBQ9z+mMM8I6TBgyCvieKbI6DbmkVF+88Cxntb4pkxyxmo+BwcLIwCzZtgdNEwrBVLNjqAIaGM5abCr/GrHWJKBteBWbb4PW7d9UrSXP888GHnvvuMLXvz9unMQ7H9uxSXWVVd6s6wlpmFlWImizBbpKYVSPYXNiTP6RRXN1G8IFFxo+A4ML5wmMW2i8bXGzAqBJ1B7M/zdMo2dg/d9KFvchKC7TPUON5qbnn+hhRyKuXYfMMDFYj7z6bDFhaSKwbd/EmBkGxjwdV0r3D7MhUug76zC4DutlI1Ua6hYvJHwYcQaxnEQAOItrwE9dgJuU2rlnk3FOqQcGtizRnUeK6qupi9bZZbftG2xaqtQWOlv29XfCSYit83S+Gzj/oeuZg1sp4C4IU+HpP/kT9UMLCizmy9y7FNXTsnwFdN2N0sqzCWuFoPZtCJ0KiIUKnbDUHKSBZV6doTdG9i95dwoPJS/U/JEBPiV/MflP1aAJIMtHgF79798PjG+tSkyXfDPDEjL0jT5U8RTx3am8EAhTxbf0SqsEnOB4raCVbeMA36hipV4GCXz6D29iYi+ooPXEUUpBuVlrRpkTxXt5e+UxF7ZzPct5A70u+9i8/UHMkAL3DrZvlgQ051EdVQZmQ6mtHZKOrOzAWmd5F94a0gVB2LOCC0asXgRy3kexbrrlBhMEQo2IYKj2Y4vxerSbl9liWx9f1PUu+1NLSezlT+B8im+344AXT5h7QWaI91FbyYLYqQQN1u6fIN12RRquX7P+wXlzakXJsQVK8vsg2s0iqqd8UZtGQcUeeYLBYMJdGXv6bcQrEyFv3QjcDuoreHVT0l9ZVgowZrt5Azfe9B/jTE8HKwN+QkJGJdPEgom6NICmbUTi2zRo0d1OqpStgG4ow4dRoOXEcqO7Iwr/91SczPHX8Fd1YaoIswqlQJomXoFONdKrsIyR+bx8ri2Dwt1c7eZpfLc4TvQd/mFMbiFsDASsAmSbi64xwVg7aC04vNh8+FPPYhlU3YoXTbAdWdnY/WUU8r4Naw2U+oGlLNwdFeBCG1toDEYbwMdNLeD2lsvfsudni266UDfq70e7HH8njGsxHogBgbWNAaB5roYYeXAevo7OlT7+w3uA58ZAGTInUqBOPPjsdjlBO+LcqRbuvzOMXdgTTYg3958tijflt7C+pbc14A7s5+otszsO+C0lU3c6an703XpxBgey38v734XAXwCFvqM74x7xaorSg+spFAAO9tTnTphFNWtg3dN+w5U9Ka2ljtIMUxN66WPL6sHI0wy7rQTK9FWmXdZqyh6HtnnseKotDOGr4oABtCT8TcjAfgE4LmTKJZMaVrz121w+Zwt1RW1t6CvHL9+57wdKK9n9cNfPT2TNPIErPFR6d3vbSC6cxwEhwIcX02Qdgr38vIVyoaOq7hW+tazQCvPWyEMCwKt+0Y8G7SqemRTlQmYKlDIxoceGfcFsgcIZm5+WZp64tnRZU/NKoE7NQK1gze7g25oj6lbEh7Jv8N0P0iYn26o0CppSguBp9B8HhwaEL/MgtrSqulO+Ln8B0kEYKdOQx4PGNAhAcQqIFVgbMBC38UH0kY9HG1d+AUpir78DuXrlFaL5L5tfLX/UK2SYXWKsfWTNjtryTgu4OsJTAXBeMsLrLfrx685+FdZEIf3km9sjKfKrKukpncNVdo6eTwY5QpoVCzI7pUobED0e0xLN0JYGIXMxLvZlrxCkWqQWgQqlgU2FqICCk3ufbQT4yBdVyVYmYUwrf5FNmDUGhdwbwkH/jtZ9SvBoSmKLfbdaLVVVepWTozhLB8DJBFg3o055wOQwRADnTQx1iSN8fSN+3e4d/bA3Rh+Txt58yDIKdHAAJUKzSlfUIa4Xmsvb/DdomrCFIH2OODKN0Z52n02RdueNGSpmXG6Z0HnEeCgyMmUmal0D9POl+8tp9a20fMQl6/unNZvBZAZCVSD4LRFonT/xh7i9oS5jMby6uDHKlyIDi/oHF6DaEf1OqBkFf5lEPGZL3O65dnlYnBDmbIv31iX+9wMozd963z/AZoPMH3K7w8jwEvGUDjybX74Ii7/oR5dKP4yicV51vY2UzpvPVsLq0xwj7M91aKY9coG91j+PpkTMdTcg5ExFDjcVBCPrMCxl/gkF1DSmK+ygS2mX4kJfEO6KjhiQZuhwleGhbKKbevEcp6Rjx3WCMA7gszkDztUktfF6ZDA7IaQOCD9Me7fZg5NLziTyyfA+XuxAVrRo+Q/tBRqS8EkMsSdwRRM3Q+j2QZU94kNbPB6bhtBWw1ro8HIpI5l5S1wXysKMgVSz42hasXV2uQn5bl1bfdBg4nIUAAWqwEDkEdk+jnQEAqCPRBcWBia7x4KIZdeICN2xsYGVsHgi2f6Ycmx64MYTODx5nDgbuDOX7HZGFfgtZr2Of/caS7kb6p3wkmgzDy3gROddZUOuyeg93pqo5J8fi0K8/GF77UnQm0APCSAXzYWyJHx+gbuJpP9fhBw1F9ovB3vWlta1Mg5cDsG0CBjiiy3MRXjvBD7Wm7zxga8sL2LDbNv8b23jZsJ066Vjdc/dN6vFd3A/czHHxlDsoFaT9W6qnpYziO4nwHBUhAxBpgnYwL0nQ3ApD3EZyYjdXlpsQ0C5McG5HcLJg6csweREH0bFuCQvXf8do9+Zi8z4NzbQNwZusQKG+j5zFOMv4gPleZgCR3d3zL7TVGQ2UQMV/Guyo3D7vO7VnJDKgN+MdYA+3sMPwtE4EeEveM3iCfWoM0G6C97WIKzA7I2LC5fEOPsTh280+P0w4Neixbo3VcuNtJxEbp9ddJ4A26Xo3eicL2dDTxjG/f20IDbNlfs/d6ZSpA8hXvy1mVmp7CrdQT6uyqrSCPA4haMb82HCRECevsgJYShd9DXTOmOd/kQ+C+42t+/sDJY3RPPV5oHQ0qy3aMqveOXUo+qIWrdHRot7EKLz3H64nM7W3pmCUVmJVwL9EWl2n3FurRU2NWq8ncKN1UebqeDTPnbOLBArz8kbBy/W/AiToA7wmll8wMLTIbxk0nDvp1oRKxjGVqcYDU+Wz163G3qJJPjdw64t4GpphMwOc60HNQ6xt+PBLRjm89uBlY1tApvxfZw39L62gaaUpTYPSEzJwQpFE1taxAMXQNmoJsIABMQAD/8tTbAkmwNCkfDfFbmgCqRNLt/uwKwqD8x7Dgf3AMPetyaR0RMCCatDfDn3kiiDfSfJVLbz1fjyUuW0Oq3kmVmCdwXjOEE653AeREcBYJnPtPZ0rrweSZ0KbPGAB8BjGHYQGGgTyttQoHaAHjUu4yHoGmwIskn9zXjODggmy+Bt4G4n0fjkvPQXuDOBp4aDW+9+PlnoTnK3FTJtfqiULpnMnsL6Wq1+V1wCEXozWD+QAa7fwFOtxvCBAR4ziNWEaAvaUv01QyIw49z/+rm51TPdP+yZ2/4fAtoEyLMLGeMAzJvYx0/rKQn33zJBo2IZr03Ghz084bb3PnvPdDvI0mpeV/d5LfBocwsnXcIO5We2GhnJF3FPn9vA6tU3w2KMPCVP54enYhbnSLj2k311YT304JsQKDPy8fGHgT6NBYsR3TzAetyYcxmIWcDbugcoKynheNvbSB69GwSBzNCO6uYD6I+VcXFn52AdpIt/84SXK0X4H7nwn8J1jehIBXhoWteHAdkOsgthw22EDDWCZCdQvCO3ydozDrq9QGZ4xcWRIOhLzbh3f+yHBiB0t+bWyt2YsNbdXpsA+Z03YOC5HDODeeJFTehoP3s4b4TSEpqnTizgT2bL23gGUyfYt07+NOihyM5YJRXn4JdMQbAJdAnDPTXeu1UyJ4eDHcYhmMjCWTrKFvouhjTjFba24C2rfkkBmZ8Ku5tAISK5CyoeSgz1ArIlviLbOfN6aBYa2cwptSdvm8DW9f+hVjfVHHVO7H1TLC6fzivnydGAbNigAU74gRSwnp9sIMnBs1MhJEAwTJ+s4XBjnRL978Mhmw3ONybqxxMorYBfzrgqM7AoAh0h1du8QTWT6D5yW0RAY4nltAInEiG0nsac4b1Oj8U+SbKWrWG+VYIJp5m1AvlP4vnRP7Dp6tlTkjO8DLqrOUNvMPAHcap64TPgj6JpBEgN1wupn0sybG2EU2itgFEl2+qDPiVNZTTlC0XZ7Xt5CZsu/c+3lkI6LbWa9GgkCxlylKr9tg2ssD7RVHsQQajJg64COANI42AFbg2oe9KZKDLgHg+24Xp5AfMAICY8YNMKGD8zSowszrGSKRdMZIFCOhQODj1exsI3EbJvVzHAugluCVuQAR8rYDjF1jQufyBJbi6NzZArYzVYNUe5DuFm/xQfWMGlh2JGK8Eg6c+wdM+MxPaTYt+Oxjwjp9CzsrjmKAJ+AggE0EwabYfmOGyYTjJ/YvJOQGXv7UBJTDzSgzAg94DwlZZpx7c7Q4fE1u2PnvwHQjsK4h5BN86+I0Lv7eBIF8p6Upfzo9dykW+1q5iUPKYZ87rw7p/MwHKoUAALadLcUoI0MGY5gTvdxi0EK8DAJ3OQ3L/rD+7/9oG1DlVywIz5ll81wjguoI/9evs5g2aPXEynx18c0hBwln3mVWlWjdVNsgua5WSWduh/34B688XRTErKbNAyf37yR9rCbCs6cDxY7552iRCKHA8Z8lNDbJEvNx/TIgKTTTWYnAMZwNyUfw8Ok99eoxiGG4TfTnfA3eqZKZH/FJ47+lfpTo3lrC1gTIaFHA/L+1Ru3HqG6A7sbNSFZgGYBDvhgFxX5BgWtm/MYbk+Bc0da+0oTowvB/Sa3IDYlfauH+CnyZSBDPEaxswXL8KFIPdORiOglE0HAnLPHZTotO0PL+/8fFPovyII/XRoNH5hg34uiix/r6/34j5/ti6wNwNCqH7gQJh/UGmgOYFtg/NcGnl+FeOm/Ln6SYF+oAZ8pop0bhdYolpwEF2/2I6JKhFbQMwNmA34ajPhrENi+wCE2nlyzv4OKI1mHsC/fq5fQ7z0Fqk/89EgyB5aANOSZUf9Vf599W9Blta1l0C671AjPXC/QshiINgg3IxBp3Jhw0FZnpnum/mPNNyBsBzres1QdNUbMICnQqvL7AAa5QEOawHG5Crtsg9iap1VSrbkPhg0WyCAAJHiri3erwJoRF7PhS0wrfevYsGWdLKlKWpMzsBq+G4KIplSc6xmdoB3g0KmOkgHwcY8UqBwupvYwxjeWxl/BwTyFCdddunDDt3fh87lJeTrv7eun8wcGGNQcfWC8rEdZU8CArR4Nug1peGGdKAXRtJGvhmvhQ+N2GhkzT5t2JFrY2klSlLU92NwKlMKNqbga9bVsfg3aBYvl+iAY1rGGNgG9BPnKDfJNjfWyK0+I8fDDDQBfF+Lqh3/2BZ6/6zDQh5gMznWIdtcGwZjiFCHFKwYT4t23kK8Sefb1rCbdBoVAmMCgdfwrcMFFagcuQ10IOGprTUUwiYQTDAiLdjYgbFLBU1N+jXZwYWpNjfExL/GRBybxIrOABYP9AxWxUfnxO2pyYxuhy9hW7xS2+V2ekJO/vpBgnRNkwQaL3+AJBmh+pV4TRiRhA45fQtsp/iOQV2KZR2dbNAUrWVuTODMlZ0AqrNLISB4b5ZDGagU4F+8qeA+vsFVEo50ARpgke9SOu+1Pr4NBLwOWOfgzggNkRIEVx5d4PpxvcPNhVWBYd7vRnh09lM/DRjhrsgcGoJWxuocdloiGJWwFfPAraoEMtm4OsWAikgWG2yDiDoBxFw+VkgYwPivWvfD+KRLq9wYQAgFVMdIJ5rF460IM5OneTtQAadAn1O9KNhnsdUQr/JYdcuBjYCyu1O/TQNChNJpJY3A0Tcx6HwxhjqTxj9uJPJYndFQebUBnypRV4G8alMEGuQ/YQZSBUzCMa4eK7bQJ8XyGZt8u206NdSdvk68LXLYRhkJjeZ7Swh78s9L1p0aILZ2cDCt+X3MAmd9fc5IXzrikFDhLKbD5FBbMOQonI+dEN4Tj9hemKgcG8JSTjI7yvG0lJJJ2A1eJkyGuxLOwHbYi0v06DjCr4/DAYM9N0AwMGd5FSmgERMNzsMLO/PkjAPiDHLWfmimRygOQLYkUC1ZDZEJ8jWnSQnFLkcC2tDhMSR5yUCA/qKAiWGE3CcEPwK6IW5DbJQyDagF7PH8bs2YAXekCnEvKQVaGWy/DzSINjYgCTQDgBIFY443Qms0XCYERpLoWwHWuYBbggSE5YPXsMGwFEpy4JGFHCIH7KbX6ooDhzPET9thYfBscaWCt8F84nUP4L7HvHPhAU4haG0EEtYfN0Gep1ZoJSpxbalVo8V0HSSD1XwoLF8v/sjXH4uyKpUfQLHYbKU6izOQLoeTIMX1DhEOP4DN9nPzIMokpxlZmEAIN66HSqIF3cbqrdEaKTqchH9FNA+CAAcN+xUj0g2JtF9ZtCjyiwsweJjbwN7T39nA1ntczJBjEs7AavKNuTkcxWkQfD8GxcQ5oLAI2B1/wH9erp8eRgP6PPvvL9ohRCzOcJOdJJgxav1Dh6B/AyBcpwStbZBYA7TESGdCFKbITYVs058EgSiGdT+folVJlF/eluqoO9OvRiWq0o2YEBTo/NLGH/A65mP72DdQd+JdXFgGcDF0CfArwnwfYZbCLOK5ofAnZ29SgwityTMhEfEhvjyEAqmiVB05DECLLFoG4PpiiZglJiEYDqYjQsCyoXM6ckamX9+svf3L4SCEtyZ59xHg23mLv9OYCNTFmnpLct/zRKC5sc1GPqEC3RBQX8Z6FNorQwCWrSojrcKhfWE/3BOHWRCh1/zCqfW5aNy8HCmYscDvAJgbUOmQQU0xcAgwP2dIGCWwM4QfxYQHAg6InTEiKrMmL80UM5/lgVFsSCZYV15d3fqq+wkBy+EgUCX4J5Ag2OCQN+6/4h7h2PDiFZ3FyAHZNnJ8/6F1AF4p7497VnQnUnE+aLl16sgMFIQwF0Q0PWBEv0Z981zks4MzLLXM+5fElk4SEbzyNVzflKi+ZUNbKp3pZ2dWOEg7069RWVJYK0DMNCJb7JbCMvu3x4CxxgEnNefGnjGU9eMhyAYZobn9jSPg9Uk5ihcOY8BN3t3T/HDehkQudMsChGjCwIKX/vOLGskei+L8YBQJrn9LxMhU+pOt+6/toFN/pmbjz4+lHLFsq6tHoStvFOeagVJPeUxAI8EeDAQTWIiV3w8z0v6Bnikm7w+DY4h2lejbWXM8Z8NIOq//WmKAHPUK/RGB7sB3D4aGKDzgNhD2YLbef1AdTy+byjQ8UjgVd4fTmt8f6ENBCiHnKciQBK4sQSW31TJFV3dx2I7Q6F/yafhP9mEl2u2IJ6FPpMHvsr4SUvZvgjQ4YED+hofw7h5D+UFPhscYCWDtUzHbPAtpWzmJ0HA5AR873dDcCLI8OkJ7p+xBAfHLQWKVcrSTiCoFZRtudNNBPACVv++ijutKoa6MgZQZ0+U4oBoDWMAGiYYWYCaIIChTnzhL1bBgnihx2bGCDAGjWgYBu6AgFUWwpbr5XlSS/HtrKgjSD4IjJSzTt07PQO/F+70dBA4/JR7/777Ly2kE0DEXOEnK5+9c+oZxEGeZYLO0G6pJ+ZAZ4GUAvmZUPGT7od5fX98/sAa2g6eXoHhSwTvxaVnCnE76gU5B691ectQMAzDhQYFx28XAYK/52/Jw1+D6eDy0YWFZBWjAnfiQjXi33f8Cdnr7mUbyDIJ4jc2EIr0np5GACtwKBMacrVSxRr6U2xRoMtM+1wAjSFBADxBWSiwnTG0RzLHIBK0kfIclSDSYbHaCdtgwn3MMRGg4EIchpbzto4/+HuDYxsEyq1BTRBQ4IpVBIg79Id3CgXcn21/gFYpM59w/NkGvJjcfyNAtiJy9VzaZaZamt7oyRVz3cY8NOdBH6DLUKAZCuIImD3j6D8N7RmmvzxOmCsNagzDVOQWaNnaHe55YOC8fg4Rw1lFcvxmrUpAH4IAfOnAUqWmojJuB4TmW/nIgrTuPeJZz50lOJA9xfsN6yuh/0QESLAriJCv1VWMvryLA6Grpaoy8zHvwMW4d6FAnBtF9dIDxXBy/4EaQYyBsV4Yg3IexT0pNMMQQozBen3eGOdHBWYwQMND1oJ+CPPZLQKYunDzoWIYLNm4/4oLRZM4ALq1ilCUQb+B/t5COslchISwE4iX5nEnliV3OV0mgMc1xjVAo1gDjiNgqa8j1PTHRVOT+WlfPbKP91surO3YICT9J4v15PW9g9f4UAwGLKtxzIe9sowQfCnUWhLXZ2jesCCcGkP9iaSKb3O2gRt/76HvaqHGN7utGp0WhbsIEBz2BvpJMijMdbvMwh4eEuMJuAa5pQCDPsYmSXfSHKhvepiuG8iy7/c9W27eYlf9t80fTT6c159Qgydx4s6VHXmrgH5jNQ9YI1mq7pbJuBbEcsykpwsRcJJAKtp+onf8z3Eei7kTx9+Au0b2HTsKMqHuXjJ0oNOQu6eHUqA59s3ToKvNBfn60LVe23hlG3lIMLQp/02iPUjQADxNcnM+1nn7wYBMSrGYx3dgPtajs3mEUh8H3KlALbIau8prl4rf+BQEHNhAh+w3oR/FkpIozAJO3ltIKDo0htBQ2aLLf1xzADDHAAMXiscDrJpRpVNHnRmM6jsNVkFuDLBQS4Pi11Of7SZGw/BAwsKIgwE/4bPCSBwDcB8lzliPbk2CQ4RZNIh0qNr+IFzInNrPMrNGdl906u9/EfT7CGBVOZkkFrRl4ZiTelW2WBQ96GMQEUeAhQKdA9UgQFKpUSdlzq9P1x7GBuzvQ9oo9/ZghhyuSNEvFyXhW2iPanO+P7n/MCVquROCSRg+YwTyygAn5CZROn3B5d+A/pjzPAX9VmwraVUFGXfq1ZbCWT63tcsMrcwIsJzVNIMLhk/kBpWvh17yX2Uiw9SVmHAAdyU/sm1ugDz6MdbLI+KkkGc+Fu62LT8vlEE/hWGVSCnY2gugO1ibaGBlnDE8/ehjmXns78mBr7QNoJSxerxOvd0d9GvNVa0g6XJMlSKzUuXUWng+aIA+cGFcl74SwkUA23pA9vSyu8YcIxJkEBZ8ae0R0iCgDREwtIpfAdDlAuVFminT/+s221Oos7dz/92CMRT0y7UrrFcR73dAMoOK1YTgIPfj6U84tehOdzbgxJzkRgaQweA99EtffgD9XDe0EnN8UQ3IsuhBMgYYo5wFwvLqrm2Gn/ZyGN2KWp7vH5p2GtJ3zO5/0RiNLSTPv/tRAbzX12fb7foAMVgVr973+3TYNYTVSr0Wll4FZ4a5BdXZ8BwbEDoZvtT21A0PEqAjml+BfpP2kvn0C6C/sYfcmXBsSh/Xx1rzmmbAW0ENdUjNduqsgw/5JgJMDYpyMpCVzBEWEFY0cJOkhvZM1Tok0HeAGnIPNkW3WcgSIT9JaiZ85EpEmmQMyQgYC5kVM9URagRjWnfUv8xsQZ/9fYn4HscWiNlCbBVN54pGxokdGoOpG3Wmoi4g1EWz9LEc/5wJHYPmU5HGb6/qsRdlX2uTkPFuXPDyE0SqZhiFYhhKfgzXh5n2gaJ/jXQdEbKnaUk4BLyYhrMNwVa5HRownl4MBtEMqphw+wlXN2bKBS9deBMWCsk/P/T30SAJ7MLC4xJoDN0HcRmcUqoTJ+xr6GsoYD6/RBfZzmvJif8Mi3jwapfRwtRIJfUNtRURsgu0iuA0Khgx34EbsENneEsAKjOAwXFnBmefJehrN5+h78X03v7vCf15PGjg+li7gKYrs/OhQQGZHlP1fWbJYPpkOQ85rV5JiDDBXKycIT+y+CWUA4x+uxTAANUZIYt41m69dRgJuPjQ8R9/WmHdL3uFmIDa61sZ/QwCMDelIUKurpW3wO2GBEg3OvD7r4N+0ObUdvm+xbp0I/aY6Fci5A1gKjJoJofVEdj+hOOqMAyTIhMHGnvwQSAQnjoghMjAKJeEZT4CXF0KWKfVplF4Q50hxY0NvME4GcDMe27HwfmzAfoG9PsxgAiHWlbgSejr2V8b+vN4zEWANQIea/h72ahptA6XDoXEP+sCC3oRppVJ+fuXxrAxjzAZusxDHD8S81FGxNTFTHdGl5/5j1vbMiah5hQsIVgIEvqfGwak05sxQJMooN/ZCRJwv8TrdyjfgHjDeRpM3wo4yTUNen3gokEfRFeOAFpBbcD5fjL/1t1lZy9QDnq4hQVlY16O6AvcV+GwYgDEu1vHj8R8YGb9JV/oyt2KWAwFAJuQyfGncHU75lMbQ4dvW9SAnkHDu54SNWqd/f9m0NemH9cHrsvwH7MnAv5LGPefrsL6Pbx1KY3Lt1VK95/cvA0CCndmO5YCBYJkkM3rYpJjd++IzZipT8FTuxBmQwT8forIiOCxbktnERub3IabT774mRq5030iGY/TbO7yDu4VQQrV3WlSUmpzmZv8pnRTsT7sd1wrwUSgD1wXPxnzAVz+a/F7nhfApeExP+yEz1zixXqV6CD/q6qB/UuHJFaYlS8Pcevp+7QLC8blw1iI+m8wpgv377gQ3DDawl15lAV3MIPnOM+G/yRkR1hzl7bOPoWIkH4B+klDUFJqc5lec6m/1taXuqPs84wA4HUAnQClj4nlaFvq15UFkWKfdx8QR4BlMroEK52IywIg6DRoaQMm33l9TWNYk3BmAG8Pi7eYXkVq5FDOfc7sKMiULt+j/8TrB7iXpKi1gRNnv4H7DvrTwxg9lbZQ0WWm/Jeh3yksjhL685hPhNH8nGCxG4FsU0PQP9SFADLtM0mOEVsJh/vEgsj/YVRF0QbgWdCKAFDHz2K6KGtGw/4plrDTwW8K4m4E3K+v4AfHw2G9eA7mnvlU++H4mjjzaE5dAi3iW7gH6CNhPQH9BPr3EH8Z+r1ALi3Qj/lQfAgCDo9LC0kKZHQN4jBAA6D1awA05mY3knmhhS1yv2lnXK8jRQJ03ubpbSDhXuAOBOhDBwCckFIdEMNEA0eBQPVeIMQ1YIt4ZOZjYF3wHJ6ujfkewfY0GEaRIHfX7qDfYT2cRqCXDv4LoZ9K93WLY+P45Xis9S9eC7MGIGqU0FvdJKawBgGoIgAtZMCbVbayhV0IpiHrVtwmGw97XBsNEK3CBIqFPxkQB5RbO/RbgIK/93souEpCvGE+DtAHzKfgPwHHGdabRBUQbPoI+gnrNdAPIL5x7V8MfeAI/ZDnAS7ZCmEoi4kAINEo1H8hfTmw5PhXjgCdmCr4oOysoogD8OOB1a3AgsA+2FiFsh1PgWDGssqCZOSqWPcBKlJ/mBx7yl9EM9Np/VlxG2cP6fQG8cdw32H9V0D/uKiWOUb/DfSn2ONSCsRmENtk7A7OZfe//g1+sRVvzCQycBcWZAbNm1AwHNw1FAwDeufvJ3xNQFDb0FODbwN6M0rGMCFiwd3vArKeIQSHvDyMwuXXyO5CgdzFLddvwd2w/zZ9BH1yp6bFo8zbIhTg/lXQF20yCObt0PM9WUvHhA47e77TH+C5P+ZFJAmZ/p/rAoOIhAUx0E3aAMuYgfD1YAYMesuCGOgAdEggtqELAoppMQNYzRCPHna/mdGwxf260GaHD0yVkWh9QPMmFMDhOJy6fJi5TpNQBJzBnQIoM0a3KO8w+m+Bfq1809aDPnj4O4cB0EAu+gIFWuR/YHp+mnnTBpj80Br7rio6o+JnVyzyvBkoiQ9mYPFtiBAc+YGOBCRKaCQZ0SRsQPChyVuFe5DADQYCNQJnlnA/of4hM+dXiZILOUl4R95jfQf0Dmob73tXFLvRC9THs45fjgejf1xEkwu54MoURn9WcV42Wonp6Gk9WwgiTntPn30/55CJBvKHYAbKXla+bF01zl68r6+4jERmJIfROWBMwtpDOSkkvUIgRQbTBehr3+8mf5wAUqY/rRPm1taZSMDdn6JC1ddCHw6OJ+bRKXkF+vOYY4BxXcqCfASQuUul/vPWzUiwxr5wEQBgrz8/V8Qgj340aWcMLsc6/plppowY93A5w1fU53fdvk7bDYH7ij8kfQvjARGGlsoW1Fmafutl7/WDs+/5T5nYZcID8QXoo8HZXwL6G20P3QcqBvCByWCm8gGFPgaARYGI02a2B7z6OkfBBj3q+zmnMIniL1jC7KyagXHz7o8XEAJZkpUpsyk6zgVxxyD4bnaDCnNzAeHe9zde3xOejv/sE+jhbsEdnPo90Aco5Wkn87HH5S1ZP4H+pvWnFD6ujzX5Q+YNWbN3An0CxsAHX4WF9zX8XTZAa95T9pOt4S+AgvdPSLkZ9+IvWwJwwZAiO1/kPt0CrcYBoR8FCzLePSd8fFBwK7JVDwq4uyXewuufEB6DqkyBbtl/kClOG0idZ94WfRn0jyXvdfI0qMwC6VVZ5IfWhntcwMeC/iqdywBuB6X9BKYZmPmfxYjGneNH8u4ALepvQW+NIX8OBqsdZljvbp+QFCuVuGSiFgsX0A+/d4Toxa0xuMzSHrAzCa1iE1VpSMeiBIuM2hJkG+TdgPIroG+D2OlxK/nQKSDeDSFNDV7ZBQAP/TERqr6fT1dcMHC3QcAMWPOfOOnhgc6lukjt+I8fBjibMWtbwoLSOm7w920QWLUmy3fPFlu2U0cA+NPGHk74j7RoE4fp+jShpIV+ld/J67EfCfRqi9YPJJ9SC+Rp0Pl7GbM20fpJd+6A3POFc/X9mMsEC+Vrh5B1qMaVFrgXq4igV3sQ47H8xwaBHApcwm4UXe7fBKKb98OBu+ToPteypD9HAH+640Kw4O5dfmEYLk15AHB7qjkHmZ2GePwboX8u/1jQt/sgxqT+63feJwg+Vnemo2cHu0bLawCg5MdGAMN2AvpHyFnb3excFE3SL3D3QcCPB7jvmrbrZTLkZUvTnc/26fhIhAC9JJHnjIh10wHe9lcPCeCKkDDdeHrn2ku2Y02iPiV7CkQB1VlluqIt9G9wf6eh69XXH3MQPKwB4IORDH06UVz6EOhPqBvcc5rNxCzHrhrz74rQF84TLYQ0X6FPSocsxNMngnlwFT8qsL4//VqwJnhCEyafT20EiDkhH60lHNpATHek/84S0IDsLdyHPnTHXsOZ2GvKi+NxmTnQS/gPwJObSys7Q97pAIB3bs4gwOOD5P4T9R8fywzsetaqYqY4B13OJGR4YNeG3SpY8We9vqFMAmveFadVlPZ4/gOY/HV6ZwZb33/Cf3bDgFSL75u7vxGR2Tdv44AretPl/6lwL7V4FuhjzEEwfxUa0wZAHyCArvWIGINx7ndYQYEgY19h/3G/g6J2pT9oXLRIzoKjsQe6ZDzAk/RmEBw2vTm4LwEIxBnZNiAE3w9EzmMT1jbAFyf7ewE9vtL3qxjuzAA7S3gP+i28713+r2P5b1actR5uAMBIweDBLXABawAw1jSP7D4Dc53l9Tv3P43lIpgXzy1qJNglMoi/hPYMIv3JVrufeZqNXxvWT7MQ5i2k8f07IgQ1knlqwoJRy/D1T3XBYT1YAgyAamPA1h7gYd1ZAhJEGmNQ+SrfHoXOfBy6/BNVLzVxVNFRoOnwFx9R3SQDAEHZcvK67CXu3038q7+fLp8HAMsMNAio+x/G90scYEsgmRESHIv9NBRIMGpy7EIYUHr6aUV2QcB6fWSr0ESOABnxG9+vpdiagb2LAdCNJTjNnbzPDEeps1NYHkUo+ePRb4/HZ4gAU/WYpIY+2NcN9vBgimPcP2QqaIGGVrRY6cu4548ZCsTr80upB1uF+n5OMwUChxph86o2PybmIgOEL3FFw/vNexws/0lBAHDa1CrW/dAlNhioveD70VOgUORKkaC8jwNIlpNqad2m6LZu1HAgfHR8Vd3HNcaygY81jgVAmPuH5+oveOy7oK+T/Asqhv+4JV6mLmvUy69e/6Ax00LrxbsTD4WFEUlAkG2bM0pY0BvEA/yAfLQB8+CY9f26fc0ag0YD+ZLwluCov5/0hAc6X+oI9ESQXOmJGeDGEkqx0HQ8nuRCe4Ea9yfanm/rxboPtw/iA7iA4a6CXVAlAwdMCgTmPMz7re9n938N6Kh3OmOJBjyxM01imYEAXYOAWIj48jDSzStlDQVChHv0/UJ7YCzBvErImIFOj3a0p7AEuQ2h9I4ChaKozdzjDrs7DvN10G9xf6jwyytujmIMMPiBRuE/FtSwn2HsSwS67GT/9Pd6+nFNe5hAhxCb9VvdcrqCgPp7DgJmW9uVzWCBr9ogZAgMp+3mUIa4cf8QI5HZIev1YSPAupjkoUwDgO6IVsmRbAAJ6xn6Ju0gvuc5d6FAMl9kKZ3ZvKbtyyve6omzQACII8A15pqYRACPfpgpIEd+LqE9w0B/Uv+F2jGnPpclrAhgvT7xVA/Zp3jX0hhjl5TZ+/GAcJ7g/vn7hYcBIFzIBYGVUHvAqh7SLrNkQR3u0zAAHdAbM9DMcHdDUXnv4Q3J5+8OX/pL/P2vQ3w45K0Q0wDW9SXQh/pS8f2gAeizAj4CuEnPi5e6aHxcywYm45+WwMMAFwGsGWhMcEQIzHbWsoA1AxLYBUtAtgGuaNy/9/ohFADoxwAxFCQWhI0NBAE5RQR69O5NEIhFDQioQ0aRT2Xpnxr356p8BFD+g2vQx8IaM/657gsI9KkxABCN68IHm8G0gQ/CdaklDI4AxL/MNJgF6eyqSc+KsgPUTwcpBSIHdBm8BArkfL8ZDFiISykMps2gGXcRAMG1V76/DgX7HERLqPN96U6mkuxKfwnP+XJyf67QjQEATPaPxQ9WBAD4+S/j++MYQIa/k+qsIe/F3v1il3zx52T5k9/zrofB1F+JkB0Tm1f9sDEsMyBGeXghCjv1NBJw1F9YPoKAeZnhvKzVGCAmDmzACmSec5QT8qsiOW6J0O7oaNKzer6qytfqnJvhzCLAwAA+Bnh+JLCgFQSU+rsIcI3LbPX5oMGOf3GeIRHgwhCr4MyJ72Gmg4Z17fzTlZYOyfBkhGEATPTy7D+4//TyH7vvTT796m9NfrKbR4P7XIRkFX0O4CumoqKtLHCbvw8Xx0q+ssqvUPuw/Af8JMA18LFcLgn5WTHBOn7IzM8FuhbboWtc1/i4MFmQ2MC4Fgti3EcW5N1/pEDDDAmgp34YALUBA+7g/uGpvwU6HKDdAIBrwQi4BBobMGqRZFQbbnIcpvfOviVCVGXGo26iPP7tRP99tW4dAB/E/IfMQ7sG+uvvKuc9YXz/xP24CONatEf4j+BeWRBDX9y/mQvyaT8F5PiPjQOQHECfaBHmA2A2JIQ+jImXwNKToL+mjEoWhA3tCbgPd65iPtooYqY93ZGcA9oTSc4tmP5U0H9H8+NT50BnrMdY7h/0weRnRQDv+GHQT9MqxOvz55ihgLAeOlgJjgAyHlBjWH6dh8VxdtU4fpkedfzH/mSYuHB+OFhn9GeO8nsxCZj1r0z6HeIT2zmxgYjyDc8pybfeaUIwDDyH/prZ/+Wg/6byh6Bfbvhy/x8rDmDEJxUT+ifnWYx/qO/nUDBBL/xnzC0Pi/ZMcj+G0h436z/Iuv/BlhCiAdze5jAFJDyHn4YBD2QAy23iLNBQkBksuvjgWZCHLD9QUTGi1m1neyhLQ76eErpSzmxHtL8I+u9U/AOUGwr0Acz3PgzQh7UB2B0O85fk3cBXY8IFugD1/YMRP9eA1evPgffgkcB09uNiWMt49xIfL4MBYwnLTmBlZC7IbGQwIC4ovqIqbXYwgItcP/B+eKAHUu7vVuT3myBg0iej3u70htb/RaH/Jfofdg4UoOsDH4PoA/iQYYBEgAsyCF7u/xpEhvbQZDv4UDOw5Gfxn+nvreOX91IPHeYyuZf1gTQMCDM/OoGjMcFHAAV97/7hR8Nw80KD54e5yNyG3TA34L6vFY5YpRPea26U7/KflfmqWn98E/paFFw0BvBB9AH6IPpg/+ko0MI9QLiuQSYgYE3+DNB0/Mx8pjEwERomQfyz3GoVPNjQWVFdDRAOJn4dbA95tsfyImgoQAZ9cP+LBuoToZH0Ky7dTrglk+5QjfvS2UtDuegk3RnMW46/ZUzbWr/4+MImHhe/ahAfoEEfC/3rb2KR9AkVbwMzDizok/H6tHA/iwZP9bC/VyK0qP+1yL0gHmYEbNd9zVKxDGGF/wj5EdBDH4GHmIe1hJUY8GthsKPeRPqREGwpEEogJmoEe9rP/5ykdwznj6Q9fwD0v7yVx2W2wY2J/m8ENYC1UkuDX0/C/GeMC9cF/n3hRYRkWZmDwNIgAWG4ULB4fxcBoIxftj+4CGDHAEDp+KE56MYA5am5SqUNZNTm6Z0b3PfzP6Wwq7hnQc9mPiXwJVVeOH5FK/PluHQNjBkEvoG+YY4B5jDA859L2P8MAmNS/+Xs1dNjmAGAOH7+HW7zg9z6lDCGjwDG9+vcfz0GgBkzLMfvrQKsKnp0O9tjMpElhwH61v1b5e4INClUOUD/dv7nLmeffy7wpvxrx69r5XFBpkHp4xvRN8I3WnGAV8SEfPOa1zX3e4rvHx/XmObhcW8sgeauU+PyhQXpXJD4dZkRskHAzPPYMQAC/wHAGNUhAeC2MwSG0/j+iHs4mGbiES0hhwI5jkefN+OBUtVr6P9zQv9XN6RjAOE/0wbwQcTsZTp43fIwLly0ZjynL5/U/0NW1T6nmAyFF6f3RIgjgD4bsCLAGh+7AQACF/IDXwA+ARi4+6l9O/wFj31h2f9oYN0wFjfhA1ca48Ct1w8hJZTm49+C/r8H9OehP5OKD6JvmAYwhwGYY4Dl+y/gGnQt9w/+BJsBicv/DCxo7QlNRMgMCcyUP8+36hSQ0hu7eUHHA4DZ0ak7giDCANQS5kUlgiTWYcC6Kkbc345ZOewYTfIpvzPii0ptpdhG5rb0KRPaH391zhOORYEwCB+gb4RvwGOyoIv5z8UzP8Tun5kPI36MCx+fYgZjXOPjU9N28kdDAW8LlTHAGtSu1V/dBKGzQLBcaDD/8Y/CwH4ah2oHwfK7jpb5aJqPiPty+tL8CrLmHwBuN794iONDlHwV+v9m0J/HY7KQ8QGw76dvhG/Xcv+DAbr2e4rj/wQ+lQLhEzMCfEzy8xncP3jPta6L6amEAp7iNFM95h0+AFwRAI0APNUDdqiWDllab61CMkN6WNxzNJAje+6Qj2USeSRQjGKfGQS745D8fAn6/5bQn8djvWBt4OMblvt/MAWSBWDH/i+L+8HQHx/C+z/HuAY+hxsDmOl/uBGwvBrRvRgUvAKtcQBmDCCOPyLeWgIQXuUQINulNSfgLxN0y3BEh7+RR2PfW+z+jdH/b8G9HA9eBSP6RvQgetCkQOq/2QAGfU70W96PBf1Pgb4bBuDTrgOsYCKbQNcpmekgxr06/rXHwWwLheFLi81b3w/AGsY8LYmN5z98Ohxok9ksrJeIDGOGlO+Ec36Zk48/DP1/b+jPY40Bxhz+Tvf/uPChq1q6z5mY7SzH/4kF/YV+gf4KAm4KiB/+UjMgfTFW+vUXnQ/1A1/9eXdP+vnr2FDAp/zWKhig+4tQzNUU9KbCvW3o9jg3g5D5wsD3T47+PwP05/EgjgAQ9D8IH8zgSWY5p/tfE52gz+n4+fPyQeBT2T8TnjHUDCARQIlQwr2yIAgLks3PSHSfyQ84MgAOx2HptITsjq4kvFZrsTzVc+L+8/GC+/9rof/Pg3s5HhdAHzQeRA/Qg/DbHAEzdukT9DnG57hk4KuIX+hfE0EW+j4CuHef2Fl/Zf+G/GAMPwfK5MRSoAEenq7PNcEPA/oUBGDnaiLzaaiF5U6dz34HuE+5/9cI0ldVf+f4E0J/Hg8i0AB9A34j/DYHAJdsZeOHfT+V+Uzyo+j/xMfnoEB+PnUIwY9E8htwHfkxg4E4vSNwZ2fOK19m26aW5gFAEQTm6Y60JDOIQ+Esn09Lx1/K3xY9S37+hOj/00J/Ho8LBBn+/nbhNzMBSgvrazg7bWBB/+dC/1ifsLgfn7L4xTbAoDfkh5fD1nTT8KB3vj89qpLoPizujQAfuh9ue3AkuXXYh0HgC+n7C2HnKeEvR+qfHPrzeBABH8BvhN8v/EZ4XPhgxE9Pf30O/BwkA1+FPsY8vdgMprNn/oPPtdArv2tU2IDM54gZwMWBsZi9t4TwLnJxunmO0tKh7mijwUn+lxD3F9z/ufwfj/6/BPTn8SAAD6LJf367eADwCfoc9DmuT+An8An6Cfwc9HOsaZ+fTH4+Ff1zGDC5k4yD+d3/bspfXL4OA8BmAI0DaaOO39cAGQ1jpeFKoSXhSBOgDQRV5z1q3+E/tzKvmdCbjb5w/IWgP48HEcaD8LsxgDmKJZ7ixCfwE/QT9HO6/EFMgQz67SIAv2vUroIxxR/OBtgw7Ow+dCjMuxVWZ90WHXXbfgRsDqVD4EmkFuvox8E5/Q7/uWVTe51ffnxVQ3856M/jQSA8QL8T/T4HABcGo//6uaC/fP80gwn6n5MCjTU4vtzOCB0Ek7zvFmIGhvHrrmbAsH8LcZ2/h2YugTvkxX1ph+7wnOR8rX/9493/l6D2Lwr9eTwIGL8Tfif8fq0BwCQ8E/f4MejHoJ8YPzF+jvFToT+DA4+AwdRfmQ/4cTD29MPZAIYUAXOecqS5HUtBhoxuEzNxYwAu3bOg4tgSnpD/VQT91x3/B/0nx4NA9DvhHxd+u/C4MD4HfuL6ievHAEcA+rFM4vqp7h8yC8Ts3+18XlOfwxEehKke6/uH2y7cpesx7v54zYU/ZT95AHA4//Ms/zl3/7/6+KtDfx4P+iD8x4XfL/w+538m1/858AP4AfoB+s7Q/4kPsQE79fmpu4OGPOPC/Mei3Dj+9f7amS9Eny9qGKRa3+yE+2XX+vaYKsNUeedeHgL9VvidUewLtd6E798D/QAe+Ab8B+Ef1/iNZ3WI0Y/voO/j+jHGj8H8Z0EfvO6LT93wPAzoF/QvXoNdiJ9p8wk2D+iqbegjj4b59AmikmU6uL8wAv4zgOAXmccvrf6nOh70G+F/XZgjYPwE/cD1A/gOfMf1fYzv+PiO6wc+PlcQ0C0Pn3O863AvT1EOJv1rmAtMzy0JyE8Rm/mc9c95+xLutWcdkRPlrZ374xfd2qfUvjnmfra5Z4+/E/oBPPA74T8Iv1/49hOY1P876DvGv8bHd1zfMX5g/AAm75+f09m7mX5+tkt2NFwA7By/azY8HXhG5TcHzRuT1JC/YXR3/24FXhP+KrW5qBSel2HTolynF9C8v1V/OfN40P8i/MeFxX8m7/8X6J/j+ifGd4zvwA+MH5A5H57uhOP67o9fpI7IduTwy1u7bHLJUaXzoaVU2MA8DjNHlR6mCXvafXa1QqJrDv6Lo8npvlQu6mT2wifHu57sDz8e+E82APzENYe8/8L1T4z/wfiB8R3jx8CPgWso4yfZ4cP8R1dwhwxS+5mct453NFGZ/CVev6uysYFdOj2K0Pn+TfTAMyErHH851354PPB/Ab/T+PaJ6yfoxxj/wvgnxn9j/DfWUPjn3A1B4vLNTwSQvGectySYpxj1HeRLxCakBpnL7X+HQwMKObgsb8oV46dbJzDp7dCZUN12U4V8oj6qstEpr4665//n+GXHA//5Db/NS/0T1w+MfwH/A/wX8N8G+j/Xi9EZ20QG9PON0XKbM4Q5e4nFqpwwzMkewQxCrWE+ESgXFehH1cRtGfGwRRKxSh/tngoaG5qX9XRBAGWL5vrUAncd646/dHB44D//gd8euOavA3zi+o7xT+C/gP8yLP8z+1k+XndSXc2g/WTYekszbts9wdZh6+e9eooFlb3q4H5LeF5jgLeq/lrHAB74x/8N+heu/8Lnb/gc9Hnh53d8/pM+/4c+CZ+ET+CT6BO0PkGfoAvzEfmPz/W85Hw8mH8SwL8Xi5cKZHtEXCszrx0i4Vn8Ggr9LY71e5PuF8n4PXHy02TrdRbmF2rAm+pWzkh/4HWAKeMyaUWSAc1cOXJafpJ+woBMRucxx2fCk/6I0erp5Dpzo+T2MF/w73o88I9PXJ+4PsEbHOZuZ+CnlRvuXzq+7iJ94eX+M9+5sm9/5g7/XY8HHv8vfv4L4zvGvwD+xL9QrMi+29gLCs6r/M3Q8zf7On/a4/8HNLxZOnyFFP8AAAAASUVORK5CYII=';
const pbrKelemenSzirmayKalosBrdfLutDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAABMIklEQVR4nO2ci5bsyG1sb9vy25KfsvT/P+q7gchEIp8kq6p7ZmRtBYMBJMjqaibnHI28/PWPf/v/Rv6XY81iZdG6ZnvRduEub9/gLX7ZT/95vjh+ad78GVYvAByf5Lg41ndZX7fuPuMT93iLX/wH+D7e3HCf4lM/xisvgGgjLb3CePVYv87n7vQWv5If4x0+tdve5+M/ydc//e3mCa27I2WqnF6nu0FXfIBP3+8tflU/zI6P77M3+b6fx14AMT6YsT7xv0+GD5TblNOH+Z67vsuv5Kf6vh32Dj/wU7UXALqH0RXXfOodALuTHd/Fd977M3zrT/gDu+pNfuAnjI/oXgDRfvst3cCH3T7E//Kf7+W77/9XHhGb8vuYP2LxAgjbHHY8oc7X83vUu9Tzd/Hd9/8rZ+ZN+XEOH7F9AcB2hh236Yf76iXSLVL8Ln7gI/5KcNiUn+LOR5xeAOPp30NW06vePVZXrnof5gc+4v8sdzblmzz6iK9/+t3VA/dVtxvs5/YrRzaXbdqf5Ac+4v8Ojzbla7z2EXdfAJHinuPQcXHF8YLj4sf4mU/5i+S1TfmINz/CXwA4P+R+ta8mLpaNGyOJG9M3Rj7Az3zKb503d+R9PvJBr7wAYtWrnNYa96buz90f/AA/+Vm/CT6yHe/w2Q/6+md/Aa7/Z6zNwLq97q65NXtrqPFw/C1+8rN+bXx2L575+GfphuUFMM7/wue0tlpctC44XXFa2/LSRW/x85/4i6Ct8zN8/LOGG3YvgKjnie1CoVvvigdsr9suXPPGpS/y85/4rQyb5gf4+CfubpheAKjPrZ571t2RNtXSYxaXLlqP+cQ9XuGX+tx32O2Yb+XjH3p5w/ULIPrKWbTW2KAd79Ldoyte50O3eZFf9tMPXO6V7+M7PvrmPfsXAKbn0zW64prr/259j3KbcvoYn77fi/wiP8bN/fGtfMfP8PSe1y+AaO2WbuDDbp/hU2/UwPfc9QO8/4M93RA/wHf8SC/fc3oBYP9btxU7npDmU3wVv4Xbt/B9d/4rL+/RA+/f89kLIJ79Y3ganhoPSden+GG+787/13h/j8586p7c5+tffrd62ItWwlfd7rEaXfVu01/cVx/mW2/+Fwx76+N86p75PvYCiO5Jd8WKOlDPR45Dx8UNm2s27c/wrTf/iyHvrU/xqXsu79NeAFEecznt6Qf6asXVxNX6xPGC4+K7fOvNf4ssN9ZH+MidzzcZXwBhz9iOI6uBVa9yWmvcm7o1d2PkXX7gI361nDfWO3zkzjdv8vUvf7d5jOf/0yDYL69X1t01t2ZvDRm3B1/nBz7i18DNXfUaH7n505vsXwDwvtuG09pqcdG64HTFaW3N8yte4Wc+5cd4uqWe8pH7v3yT6xdApJhYd0faVEvP2F63Xbjg1ese82Mf9EFe3kyP+NSnvHMfrvUXAHYPqu/3lbNorSmD5fQi49Vj/Zi3b/CMH/64+7AVfoZPfdA798nXPnsBRNfrimue/Y9oe9ptWnqLD93mMb/I5+Yd8DN86hPfuc/y2q9/9RfAHoMdKzb91m7pHj7v9i7lJuX0GT56s7d48ydZPu8f5lM/wzv3OV9bXgBj96991t2GrdvxhDSf4qvsfvL3+I57/h/hvOfu8+Z97lyeXgDwZ+7Ws2j1PN2C0/TUeEi9vp4/yXfc8y+SOxvuDm/e59HlixdApDgUG3zG7R6b0U37iumyqfEBvuOev3Ue7bZL3rnba9f2LwD0D7lVLW3oB/pqxdXE1frE5oJN+12+6ba/FV7bbTveudtr18ZVFy+AKL1y2jMNTI2ei2XjxkjlavRq/UW+6ba/QmLTfIp3bvjatfNV0wsAm0d6/W8w9wPrlXV3za3ZW0M3p17h++78SzHvmPd5854vXH645MELYPiS24bTmjGuj/U1pytOawsejj/mu+//TRy2yzu8edvXLr+86uv3f7d6TouWk/opJtbdkW6qKx6wvm7dveCli57xAx/xMpe75B3evPlrl9+/6uv3f18ejlulK3r6pb5yFq0tNmvHW4w3GOsHvHHpY37yszL3N8c7vPkpr13+9Crm2wsgWmypZ9Pv2l1xg6f/M8KGcpNyeotP3ONFPvXRPN2f580Pfe3yp1fleX8BYPqtn/4r72FJi3Y8Ic2n+DqnH/4hn7vTXzJ5S73GC3f4yCXbF8DY/YN53e14vAWn+anxhHpxPX+Gz97tt868mV7gtZs8veowX18AmB9v7dRzYtHqqQP1fIPN6KZ9RX9ZX73LZ+/22+Kwme7z2k2eXnVn/vgCQN9sVUt7+pm+WnE1cbXes5netF/n4zf8FXJnJ93htfs8verRfHoBYH6Yc8exth1XrGZWvcpprXFv6mLuuPgi33HPX4pH2+jMa7d6etWj+Rj++oO/AOXJlVPPsulc/0X/OLBYXLROXI9fT9wZeZHvu/M3EdviI7x8t6cX3p+fJ8sLIOyB2dEzd4K6VM8rTmuFbqQr7rK9aLuw4MnsK3z3/V9g3hDv8/I9n154f/4w2b0Ahj8lt8RYJ/qlvnIWrS1ltpxeYXHponXNSxc95mc+JTjsg/d5+eZPL3w0fzk8vQBQH0s95zSxWeraXXGD3b9+fUK7Q0uv8N7Vr/Py514+8s/y8sc9vfDR/M1hxr7+8A/TL3so1bBjw2EpFsvpNnW+nl/H7mDHB/jQbX7zsG/e4enl9+dvTuax1QsAc4feqmns+pkX/qHeX9BXD/GL3T7DB2/1GyLvmxd4evn9+ZuTy7EHL0A06zmxaE3UmXq+Yj+3X9nTX9NXb/HBW/0KWW6aRzy9w6P5m8OHsa9/+wd/hHb0zB3om13VFSumgakxcTVxtd6zml71Xuezd/ulOGyX+zy9yaP5m8N3xuwFMPzRuVW6orJsqm3HFfuZ9cq6u+DW4HHouPgi33HPb+LOXrnDC/e5f8nNyTtjMVNfAKiPq55zSiybwpfc9lwsT+tjfcHF+MVy4d7UY77ptq8RO+AjvHC3+5fcnHxtbPECBOv/1rtsin6pryrr7oI22NIzFtctWicejr/CD3zE8Mg/yAt3fnTJzeE7Y7uZ9ALA/DS845YY68RqaeyN9RUv/Buknu7yrnjAq9d9gPNH7x7tN/Haxz266ubwnbHLmVsvQNCqliYOS7FYTrep8/X8IuXycnqdt2/w2+NyJy15dNXN4Ttj92f6FwDmZzt36K2ahcNS8MI/1KcLpsZt/Eq3D/Cp+/wK0RZ5jUfX3hy+M3Y5Mwx8/fs/9rs5ZzF3RO3Xc2LRmkgzKe7ZD+1X9qRrUnyXD97ql2LYH095dPnN4TtjlzO7AXsB4rmVczkl5g5Mza7RFRummanRc7Fs3BhxNnOb9ot89m7fx25z3OfRHW4O3xm7nLkesBcA+mfV/Zkg5g4sm87iDjPHmcXiorXlevZq4mr9MR+/4Wtc7ombPL3P/fnLyQ8OrF+AKOs5p55dH+pSPa84rTXaVEsPWF+07i64PfgK33pziCf9KV644c1L7oxdzpwH5tX6AsDwKIaSxtQxls1gWh0bY33N+se4x3jpWF/z/IpPEp8+P8jv5oVPvHnJnbHLmfPAYfXBCxCdeq6MdeKwFIvldJs6X88vUi4vp1d449LfBod9c+D+VZeT3zqgpfQCwPBIhxKmjjXs2HNeFU//reg0PTVu8/Sj93zqPr8s2hYvcP/CO5OXM+eB+6tf/8G/BuUsWnKGEuaO8L7bxLrb08/01Yb90H5lQ7ogxbf41H1+hrwhnnL/2juTlzPngRdW7QXIjH/DHkqYO2Lqt0ZLezYzm/ZhoXFjxNnMbdov8tm7vclyKzzi/h1uTp7HzqtwGDgvff3HP/UPJ2WLdkzcb1bG92rJ1cy4PtYnLmYvli/XX+E77rmEx/wRnt7nzvzlzHngsHpYglidXgBYlW6Vrkjs+tAv9VVl3V1TZsvpGeuL1t0Ftwff4tGnxOP8Dp7e/M785cx54OXVeclfAMi/75xF37HKjhW7PmyWunZX3MDn3V6kXdvSA1666DfAvFEuuXnJ5dh54LD64tLiBYBzKWqznp2umDivat2OJ/TzffUAu9COt3j7Br8kh11y4OZVl2PngcPqm0v1BYD89HIWdzrO6a/7h6VMHavnKzZzm/aeekE9v8VHbvLdxD54ys0LL8fOAy+v7pbm/td/1hdg3LjnUiybkPopOmO9YjWz6lVOa4UbI840NzVe54O3epl5B9zn/rV3Js8zh9UXlnZ9aC+AkR7R+D7AnY7Y9bVixxVXM+P6WJ+4mN0v71de5zvuKQ5P/RH373Nn8jzz2uquD7ul6G9fACOVJZZTYu6IXV+k1RR7tgsjZbCcHrC+Yt1dcHvwt0fsj5tczr8z8MLS/f7Xf/5z/yRzhn3ZYks9uz7sl9pKS/fwebdX6C7sils8v+LXyLw/ztyZP88cVl9YeqH/8AWAfaeeK2Pdc14VT/8PdfrpvnrA4q9/D3n7Bj8EO+ApNy85j728ult61M9NfwEgP7Gc4VyKZZP2pl84r4o0k+Ke/dB+ZUWaTvF1PnKT98nP/hE3L7wcOwy8sPR+f/UCQC5zFnMHlk2Y+q3R0p79zHpl3R25ntpMbNov8tm7zczP+yk373A5dh7Yre76sFxaNmHZV/Prv/QCQH0adrYjMZRwpyN2feGrbnsulgttqqVbbMe3C4Wr9c+w+xQ9v+/g/p0vJ88Dh9Xd0qP+nWZ6ASD/snMGL92clhLLJuz6YlqdGsvWiYu/eu0ZrxvrE09mf3UM2+LMneHzzG5114fl0rIJy/66+egF6EidFlvq2fXhsFR5vKH7+b66i11lx4u8cekPsdwQB+7Mn2cOq7ulR/0Xml//9S/9s9plGEq40SmNctpwXhVpJsU9m6FNe49f4PYuH7nJO8RTf8Sdq84zh9Xd0qP+O81PvwCwbELf76u5XrGZ2bQPC4WrdWc1tOq9yAdvlZmf9CNuXn45dhjYLT3qv9NUx18AyM9hl2EoYe7Asgm7vrjzb/2vJ9JIS7fYjm8XjOPibwztiUsuxw4Du6VH/XeaQ+frv/0FsKdohxNBnEu40wkeLo29sb7izku1YrxqrLfcHvy1MGyIA5eTh4GnS8smLPtzc+7A3KRTXgAjP7pdhqGkMXWMZRN2fXFeddYfdyDNp/gAu8qOF3nj0m+Bp/6Iy/nzwG71Uf+d5rmTXgCIZxVBnEuYO9A3W9XSivOq6Gf6amK/vF9ZUafr+S0+cpM75If9iMsLzwOH1eXSsgnL/ty804G5+fXf/5qeRgTIGc4lzB1YNmHqt0ZLe44zi8VFa+R6ZDWx6n2AR7edH+rL3LzVYeyFpWX/neajTv8CwJ0MQwlzB5ZNcW8pxZ7twogN2vGM9RXrbuNq/ddIbIUzl2OHgeXSsgnL/tz8WMdeAIhHFwFyhnMJcweWTdj1xXG1LJbTPepwPT+gu6Qrrnk4/hPMm+DA5fBhYLe07L/TfKET5fQCwJ0s7nRg2YRdX5xXIQ2kuGc1tOodefVfK2Xev8Mj4mHf5/KSw8Bu6VF/bn5T5+uPegEgHksEyBnOpbjfBO+7Tay7PZuZdXvdbVytV/q5vnqXl+82PNcXuHOH88xuddl/p3nZGUrYdVYvAOwynEuYO7Bswq4vfNVtz8VyoUyV0y22s9sF47j4q0Ob4JLz2G71UX9ufqQzlDB0vv74+/TQIsCdLO50YNmEXV/sV9tKSzfwYbdndJd0xQVPZr+d4fGfOQ8fVpdL7zQvO0MJQ2dXPn8B4FyK+03Y9cV5FepAPR9ZDa16R977bwLvXPuIeMz3ubzkMLBbWvbn5kc6QwlDZyztBYB4JhFgl6GW5Xa1bMwdsemf/vfdw1KwmVm3193G1bqThlL8DI9uWB7BG9y5w2Fmt7Ts32xedoYShs7NcnoBILKHGFVZyFnc6cCyCbu+8FW3PRfLhTJVTtecBvdr+5VfC+2xHjmM7Zbu9z/SGUoYOhdleQHAH5oteyjsMgwl3OnAsgm7vtivlpVyukcdrue7dPNdccGT2W/BnuxtzsO71WX/ZvOyM5QwdF4r7QUoRX5EdzKcS3G/Cbu+OK9CGkhxw2pi1Ttx+pvbDd67+kR5pk+4vGQ3cL8/d2BoDiUMnaGEoXMocwbKr//5Q3oOc4Cc4XbJ3Y3U6bjq13Ni0ZrYzyxWFq2Oq/Vxoq9+A5RntOcwsFta9ufmC51PlV3uXgCIHAE22W6UysKdDiyb4vZSX1XW3QVP//m9Hl93C8fFXwB7ZDc4jy1X32kOnXMJQyeXOcOhVPYXAOJBRYA+6wIj92Eo4U4Hlk3Y9cV5lfWrgY40nOIt2nxLt3g4/hbtqd3gPLxbXfbn5gudT5U5Qy7rCwDxWFJoo9EUj0pxvwm7vjivwjQwNRKbtU17hY+6fYAX7tMe03PO1x5Wl0s3m0NnKGHoHMqc4VDmDCrXL4DWjGjCLsNQQu20W0FtdiybsOuzsl9qXM209ZZOXEytlle9X57uiWw4zOyW5v4LnU+VOUMuh/z1P//WHtRXDdFpQeQyZ8ivjRgGYO7AsileWmorLV3hk253GYfHes29qQ8zPpc9h8nd0rI/N4fOUMLQuV/mDLncZYiyvACljucTAXaZi/tyWDXudGDZhF1fnFchDaS4YZqYGids2I7Xee/qQnmOTzhfsltd9ufmZWcoIXdyhkOZM+TynL/+xAsA8eufA6R8senPpUhN/RBGanb0/b6a64n9wLgy1iNX6+NEX/26aL/2DbuBZf9mc+i8XOYMudxlyGWXty8ARI4/IkT0IWcYSj5g6hj3m7Drw2pp7I31llv/1aKynl13G1fr30L37PYcxnZLc/+FzqHMGXKZM+TyUa4vAMTD6UMZ9VzIGfpysePvdMTTPhyWRB2o5yP9UF9dUIbL6RkvXbSgPKwnHC7ZLS37c3PofKq8kyGXkSOA8tef/r3++uVQg03UbOwyk305rBp3OlCb9tEDh/8L5O1CZT8wrox1x3GxUofq+VfH4nfbsxtY9ufmZed+mTPk8iOZkF4AqKHb0JEjiPz3omEJ9p3TVbBswq4vptWxMdZb7v9FaDu4XTisfCPtF35kN7bs32kOJQydXOYMudxlyOUyR4Bl9hcA6pNpW38O4Llc7LkxlOCdMgxejtxvwq4Ph6XAZ9yuSEMpXlOGy+kZL1000n7b9zjM75bm/mXn5fLjOQIody+AtTwYEaDmbgByhlraGNSyMXfg2Cy3Cmq/nhOLVs9+YFwZ647jYqUO1fOvhfH3ObEbmPsvdA5lzpDLRzkCLHMEINcXgBTPag55FTaZ2+XSGEpIHZsXqdlYNmHXh9VS1+uKE+/+RWjdLRwXP0z7Je85zCyX5ubQebn8eI4Ay/z1p/+wB2J1PJYI4LlbhZxZ7cthNZd2H0idwtwRT/twWBJ1oJ73pIkUrynD5fSMly6qv9gnnC9Zrs7Ny8798iM5AizzIvACtB08hbYEUy538dzoS5vpO8adDteumsamb207jhwHusWuGDkuVupQPf/C2LPYs1td9ofmUMLQyWXOkMtHOQIscwSIPISvP/MnAOgRycGDJpQLNdtSzUbOoD9SMsMA1E6brJ2OZRN2fdgvlZVyusHh371OLCYXrcZx8QO0X+yew8xyaW4OnfvlLkOUEeAyR4DIc4DIhP4FgBraP30jgGcuMzw3vCxL4GUjlWUmdRr3m7Drw2FJ9AN91dOv9dWJMllObzHco/wCX+V8+XJ1bl52cpkz5PLlHAEiR4DIc4DI9QWA+DXHP79TR1i/ZiPlcQlSuViFuQO1aZcEtTmy60NdqueedbfR1ltac7HeL/fVD9H9JlfsBpb9ofly+ShHgMgRIHIEiHwKf/7P+ljktGqIjhFvBez6kJfgvAre6WbAmyP3m+KwJO7/9cbn3G4xTo71mntTF4y/yT2HyeXS3Bw6hzJnyOUyR4BlngNEngNEHkJ6ASD2a+oI69ccwZpQS6PmxZKonTIAtdOYO7Bscp/DPt4uVFYDq966u+qtOPyEP0v7nU/slub+0LlfvpwjQOQ5QOT7wV8A0COaXwA4N0VaYkd2pLJckjqFqTPeRCybsOvDaqnrdcUaG7Hjmu3UamHV+yTlt31kNzP3LzuH8lGOAJEjQOQ5QOSboXsBqBWMGrq9WHM3CZ6tKbxsDG8L9AO22neMuQPLJuz6cFiCtJriirSc4gVlspxeYXmp/cZe4nDhcmluDp375WWOAJEjQOQPhvoCQGzT+JXPHYgmpH73noCXy8lCvo9YzYhusjZHbvRTTKy7hbbY0oLjolMn6vmH6H51K5YDc/Oyk8uXcwSIHAEifyz8+b/KM2k7uIbWgZrnZtxLpbBmKo1a2hLUslE7ZUDUZsf9pjgsiZt/Tfcht2vGsbFec29qQfdLu2I3vOwPzfvloxwBIh8CRL4f5NBCewE4PBge1h3wLLr3AbwsY+ClsGYqjVTaKqROY9UcP1csm2rbsWezumgvWsveipuv2TdQfr0blqtzc+jkMmfI5TJHgMgRIPJ3B38BQH8hieejEqLDaMrqL2Y4UqlszcA7wvqpLPSd9Qwsm7Drw37JVuy45ub/kdx2arOwab+C/cZusBy70zyUOUOUEWCZI0DkzwY5DKG8AG1z1zB0NK0s2gB4XsxwpLIQb5foB2yp7xhzB5ZNeNoP+oG+SvQLfbWljJXTL4D9Yjcsl4bm/fJRngNEfiHIYRfkoFBfAI54NrFB9x0raxbb9wG8hNKpZdBdK6bOYgaWTXjYL+1yOlFGymnNcXFc7quPUX7Ve3YDc3/oHMrLHAEizwEi74IcLoMchlD8z/9tD8GKeBQqoXasrJlgpajN0sllzYV8FdTV1qydYLHj5w7cb4rDEqTVFCfSWoon2lhLP037bfcs+0PzUOYMUUaAZf6mIIchyEGheHsBoD6btvk82KoH0VYhrgXvDyWUTi3BOqks5FuJOzMwj8GyKaalrtEVI22xpZH9SqVO1PO3sPhFJXarQ/9+eZkjQOSPBDkMQQ4KclAobi8AJz0Kd1vwYOQN581SegYra4Zyn8pQMmnzQV1tzdopDPNimIG5I572RVpNcaKu1fOJcWasL1iOL34zV+wumfvnTs6Qy2WeA0R+IchhCHJQkIOCHBSKdy8AxJ6rnbbUZwbKJHi/lJ5hKME6qYTuhiLfFuYBGGZgOQb3+n01141upSsam3aPD7l9F+OvqGe5OjeHTi4f5QgQ+X6QwxDkMAQ5KMhBofPyAnDoacTe8jJnyPs1Z+jKuImYSmgdL6F0atkYLod5Bu43xWEJfNXtiE+4nVgMLFoLzlPjr+WK3fzcHzqH8jLPASLvghx2QQ4KclCQg4IcFDr/8x/t12xF/WW3raw+eCdnsHKV4VEJ7ROFlzYWeKcjfrbMPAbLpkhLKTpj3ehWuqKxafd8//8utvgVVZZLQ/N+GTkCRP5IkMMQ5KCQHRTkoNB5ewHAH4hlD9C2ZsxAn6GUOcPzEkqnlo38oWKegftN2PVFXa3nDff28WJm0Rq5HBl/J0d2w3N/6OTyUf5IkIOCHBTkoCAHheyg0Lm9AJz0m3a3BQ9Q+s7TDLnMGYYSxo6X9sME3smMl4j7Tej7fTXXha7dFY1Nu+Pm/678Gt2vbmJevezkcpkjQOQXghyGIAcFOShkB4XsoNB59wJA/IPWO5YjQGQPYBm8zBlymTOsSxg6tQzazxnc6YinfahL9bzBl91OLAYWrQW7qfJbusdueO4PnVxe5ggQ+X6Qg4IcFOSgIAeF7KAwOygULy8Ah37N6QUoASL7zEWGmHfyrs0ZhhLGTn8rIw2UpdQpzB1YNmHqd42u6OhWuqKw6o183x8C5ZezYrk0NA/lMkeAyJdBDkOQg4IcFOSgMDsozA4Kxf/8PzwEL+qTiC0YgSUbECm3gSFz1HLMsCpLBi9h7oj8QYW5sxyDvtmqllbU1Xpe4WtuJxYDi9a30H6fibk5dHJ5mSNA5F2QwxDkoCAHheygMDsonB3SCwD+MGLrWDNyBI5jtiDitpAzMz4ZnEsYO6kst02dxv0mrPqlV05r2mJLjVVv4t5/jb5P+Z1sWK4OzUO5zHOAyApy2AU5KMhBITso7BwULt1fAE56Au50hwCRLUCfS4CULfgYjBm8LBnOJXgHSrOWjdopA6I2O1ZN69mxIS2l2FMX6nnLODDWn6f7nVTm5tDJ5WV+IchhCNlBITso7BwULr28ADwDCmMVIPIYnPL+EDg8WxB5MmdmfFJYf1/C3KG0ZmYYgLkDyybs+lqxY0tZLKeRTTvhE27vMv5OeparQ/NQRo4Ake8HOSjIQUEOCtlB4b6DwtJvvAAQOQJX1sdVOmkpZwt5MmfwsmRIFxpTCXMnEz9VY+7Asgm1X8+JqTU1ulaKa7qBrvgk3a8rMfeHTi4v8/0gBwU5KMhBYXZQ+Jj/+U/ltx9b5xAgsl3v2QKkzWohL0Fe9SVhzVpahnulsGbfMTYdG05s//XLrg9Xf1m3VTvW7FectJziA4YvOLMcGJqHMnIEiLwLchiCHBTkoDA7KHzYb70AHJ4tQJ9LoON9KJ28xOGrFiBnSJMQ9xHn0qidcpNadszNuSP6fld1RWHs9XVfLWgDLX2M8guZmPtDJ5fLHAEiD0EOQ5CDQnZQmB0UPuII8PQCcHiA2GQKtgRpm6oP1vFsAfIMR16CvOpLwppeWhA3Spg7BS/bKnhnZNW0nh0b6lI9r7jzB8XMumvsVroveGQ5OTdz5zK/EOSgkB0UZgeFlx3B0r/+9Cc76Xccm7IFDs8K5o6F6ENe8j6UTl7i8FULkJYgLgTr19Iy1BKsk0rI1xbudGDZhFW/9MpppGt3hTE1RmzAjg9gv58Ny6XczBmijACR7wc5KGQHhZ2Dwk1HcOkI+heA4xBwz2ClZwuOlkqZdraFvETwEqyTM6QLISbFueTaoNwkdQpzB47Nek70rb6qeNdty2J10foA5bfRMzQP5TJfBjkMITso7BwUDo7gpiPo/PoFgLovzXd9qCXE7lRnKJeTYM1aWgYvS4Z0oeGrUJq1bHinrArvdPSdVrU0cfxLTlkqp5FNu+LLbo/pvuaKeWDo5PIy74IchpAdFM4OCoMjuOkIBkeA2wsAJP3WFcwhAv1YhV2fkMs8xpGWzFPZZYKXwpq1tAybUuRrjaGEuQPLJvT9VrXUGHupTnFNG2jpXcrvZ2Lu507OEOUcQFkOQ5CDghwUzg4K4QhuOoLBEQz+9ac/2y+dhEMXcM+goCZ0pS6fSujGCF5C6UyTUDppCWIVrJ9KyKtGLW0SatmYO7Bvuk3Ubj0v2P6bVme7uF14nfKrSAydQxn5fpCDghwUzg4K4QhuOoLBEYQjKK4XALSN1KWjoCZYWZug/q2yXiWPEiykMmcL+SaQVsmwLcE7jXytGAYgdVIcioa17VjQ2i0VpsaC82tzyfhNE/PS0MnlMl8GOSjIQWHnoDA4gktHMDiCwRGEm9oLwJGCuZN3szJYmWc4ainvSr/KgjyVoHuWsl4ltASl6WXOMJRgnVQWXuvA1GyNlgpTo7TctixWF61XsF/FxNzMncu8C3JQkIPCzkFh6QgOjmBwBOEIwhGEf/3Pn8s+o9Dv3QLuGRTUhFwqQy5L5jiUnmFRerYg0ithwVchZxhKI11YmAYWbJrLtuELbmsO/zjfr4xrfTUyfs0V88zQyeUyRwBlOQxBDgqzg8LBERwcweAIwhGEI8ARFLcXgLP/jhXMoQbzmkGbVaV5XuKoZXEfhkVZJ8FCLvMYpCWIVcjZ6CcpA+unsnDVaVVLHbv93bW7YqgW2IAdr2NfdsXcHzpRRoDIl0EOCrODwsERHBzB4AjCEeAIwhHgCHB7AUA7iVq/egt4yvQVzHPGfQxyWTJHHQYLtTSfJsEC1DGw0C9ByZAmjWm1I5VlJnVKLKeeqdkaLRl95XjLbctiddF6TPmOPUNzV0aAyLsgB4XZQeHSESwdweAIwhHgCMIR4AhwBN0LAAplzTNYWfdZcV8qmaOugoVaFp+GwQKeMqgE69SbgIV+SVgGL0sGL4U1U2mcS7FvuvXUVj2PWN+OBZu2k9ZSXGDf8Yp5ZujkMnIEiKwghyHMDgo3HcHgCAZHgCMIR4AjCEeAI8BNegH4HVOAec2gHamyyxx1rHhahVya3x7uJnOf4KWIXFZzWXOh3rAxDYxMHWvYseb6L0ItGX21oAyU02PG71uZ+7mzzJdBDgpyUHjkCJaOIBxBOAIcAY4gHAGOAEeAf/1R/x2A5L9uyxHwnDnqZir+0ipYqGVxHwYr6xJ0fVgtgTVzmbKRymGysOm4JcY6NVoy+srxltuaxdKi9Qz7shNDM5fLvAtyUJCDwguOYHAE4QjCEeAIcAQ4gnAJcAS4KV4Aft0K2j0lc0SfA3+0iudOzhz9tV2ZJz2DSpZKgJwZqJNGv0TZUcs24x23SldUarOeK7Wu55HrPyVmprWh0X74I/PY0Mll5AigLIchyEHhBUcwOIJwBOEIcAQ4AhwBjgBHgCPAEeD2AgCJ3655n0G7SmXxvjOUMHbq3Yrn1Zw56iTkpejLKSFyCZD74CWUTi0L5xLmDhz/lehyqTVbMvpqpKyW0wPKl52Y+7mzzJdBDgovO4LBEeAIwhHgCHAEOAIcAY4AR4AjwIvyCwAW8Jw56iZrnjool2A+dKYSFpkjlynTL0GdfgkWGbwUultjKOGqU6py6rCeHR1jo9b1vGBcGusHtF9CYmjmcpmHIAcFOSi87AjCEYQjwBHgCMIR4BLgCHAEuAQ4Avzrv+tfgbQ/SuaoG674sIr3naGE6CCIEswP958yWFkvAQu+ZAGmDFbWXEh3MKbVkdqpZ6cr+ioVKTY+8hehR3Tf1xk6uYx8GeSg8LIjCEcQjgBHEI4AR4AjwCXAEeAS4AjwovYCcPjv2gKeM4dvHQTNvQk4guGqodQ8AnMvoXgeTrkbS33NCOvUMmfIY0YtbQxqWehLq+yYqM16rnjtNlKa5dSYGiO7d2agfJ0N82ruLPMuyEFhdlAIR7B0BOEIwhHgCHAEOAIcAS4BjgCXAEeAS4DbCwAk0F5ZZA687yCIJgLztF/RWOL1EiCXwIH3S6Ccb0IGC1D7oHlhzVymbOQyZ3GvM/fEcr+2Xks5jnRLXXEL+/orhn4uI0cAZTkMITsoLB3B0hHgCMIR4AhwBDgCHAGOAJcAlwBHgEuAF+UXgN+1QnH/1ZMRmKcBBOZzM3UApwMEwIeyu0Ne8gxWphkyWIDah5iHnI00Ru44lzB1rGHHiPXsaPSVs395YL207l7TvnJl6OQy8mXIDgoHRzA4gnAEOIJwBLgEOAIcAS4BjgCXAJcAD8HXf/V/BTJXxv33XjKH+9BEEE0EeHQAR7o5AvNVCeb3MliA2gd9biH1DV8qHc+Ncwm1U89OKlJsRT13LP+IgE3bOa1dU75yZVdGgMgKclCQg8KlIxgcQTgCHAGOAEeAI8AlwBHgEuAS4BLgIcBN8QKAdo9KfCiheN1Y4YiHhCPAETAJZASUJbh0CeAol5cZuBuUMvUPWZROLY2cxdDx0i1R63queO02UprlVOirEVu145ryvVYMS7vyMshB4aYjGBwBjgBHgCPAEeAIcAS4BLgEuAS4BHgI8CZeACBB3lLF+w4Cc99YCHAEeMwjwOfOeG0dAHIJHFcZmIdSpv4hB7q2cSytsmNi8/eZ+R/zXaMW9bxgXBrrE+379uT+ZR6CHBQeOYJwBOEIcAQ4AhwBLgGOAJcAlwAPAS4BngX413/WPwHM614J1y4hQDgClkpwAY50EwQ4gnHYSwQ4q0AAcgkcVxmYh1Km/iE3PK+XwEs3p6XGvNHBenY0+srZvDmw7q+7F7SvVsmdZd4FOSg8cgThCHAEOAIcAY4AR4BLgEuAS4BLgIcADwHe1F4A/xWXzCGvWwdHgCMw91UEOALcVO+GAB87/bXdrTyD+b0MFqD2CZAzWFlzIZV8rijnckr0nVKVU6FU5WSk2Ni+OQcultfYV+7JnWUeghwUXnAE4QhwBDgCHAEuAY4AlwCXAA8BHgI8BHgW2AsAVtStM7i2BQFwBDgCPAYQ4JJuiAA3zZO5k+c9g/m9DF2AKYOVNRs5w7mE2qnnnHIshVtH6ZRToa8W2IAdJ+yrbRiWchn5MswOCjiCpSPAEYQjwCXAEeAS4AjwEOAS4CHAQ4APAtz0H5s/ARCY+z5DEI4AR8C1BAS4BDhLYMEFdAgIcEqwwGmzpD6YL7NPgpWeLcCUwcqajZzhRumW8NotsfpLTtepRT0v6Ja64oR9wYmhmcvIu5AdFAZHMDiCcAQ4AhwBjgCXAJcAlwCXAA8BngV4FuCdygsQO4lj8LSEAEeAI8BN/oQscHKXdPMQMFmCNFyYV+uSbgJ4a0L0vQlWerYAkT2IGC7kMmcYShpTRzNuHfNk1/DCbcG6v+6usa/cM3SivAxyUDg4gnAE4QhwBDgCXAJcAlwCXAI8BHgW4FmAzwJ7AUAborQ43BGY+yZDgCPAEeAS4NwKBzwE6iPATfVDTSkDZQmoLnU/RjRxz9ACh+cugGcRw0bOsC8t2jGy3ut2NPrKmK+CVa9yWltQvnUid5Z5CHJQuHQE4QhwBOES4AhwCXAJcAnwEOBZgGcBPgvwon/nTwD/tVJAOILivvMAR4BLgEuASzwqPAS4yfuAm+pHS3EVsFQCirEaoOU6Ca0J0e+bgYYLuwy1rOecDKvsaLSqpnpuWMeORl+tWP21qnyvPcNALiPvghwULh1BOAIcAY4AR4BLgEuAS4CHAA8BPgjwQYAv9O/1/zUigqVro1jg5C4BLgEeApwLzSnci9LdTH3JE8alyNDGaoCWfRLMUxMswJQND2NTTGXX6Aqv7Gi0ypNbR+mUk5HiSLfUFSPlu0wM/VxGHoIcFG46gnAEOAIcAS4BjgAPAS4BngV4FuCzAN8J2gsAgyMw9+2FAJcAlwAPAd7kz8xCUtxTyuUyA/eJAGOOVY7UBAsQ2UPBszXBcyFnqr40aqeeW6rnyvDyWCPhhduCRX/RGilfp2doRnkZHjmCcAQ4AlwCHAEuAR4CPAR4FuCzAN8J8KZ/0/93aBJH8rax3BF8fVlAwAABAR4CfBDEfIhniYe6sn66KWXNAM0SOCL7JCioySpY9gA5G56tCZ4LNZdzOVW8dKvUop4Lw8vTV1aPHWfZNLYLI+UbJXJnmRXkoJAdCAiWjgBHEC4BjgCXAJcADwGeBfggwHcCfCteACBB7BsE4Qi63V8FeFG6fBDgJt+sIeg6+Q6bzA7AkQLEKrQ8B4jsoZCyLm/k3dlSJa+KqWOlHY2+Gl8PsepVTmsL7Msmchl5F+SgMDiCwRHgCHAEOAJcAlwCPAR4CPBBgC8F+F39QX8C+GZCMDgCXC8A4BLgIcCL6g0R4J2G1VSa/BlbQJF9BnAyEPRjAx0FIIOVc4DIHgp3MvTlYu8uXwAopzgXSllOhb4asVU7Ouzr7BlWo4wAkRWyg8LSEYQjwBHgCHAEuAR4CPAQ4FmALwX4TQHe9If/sRMsHQGOQO8AAjwL8IX8aVkY5Fs2BF0nX+V9aAHFQA1sC3Oyd8DK2sxBWFlzC5Az5DJnqr4Ea9hRaNGTW6OVNdXzgm6pKzrsS63I/WUeghwUDo4gHAGOAEeAS4BLgIcAzwJ8EOBnAX5LvABAgsER4AhwvQCAhwDfCXCTb8FRfZNHixd5BlwZxUALuG8Iy96E3IEuQGQPhTsZalnO5VSwyo5Ci57cGq305LZg0V+0OuyrTeTmMivIQeHSEYQjwBHgEuAI8BDgIcAHAb4T4K/r95s/ARDgCHATB14F+E6Aj/I92mno+NO1gNISTx03xUANQI4AllMwh9QRORuRI4hc1lzO5WSUWE5xLgx/XPTVuCpWvcpprWDfrid3Iu/CTUcQjgBHgEuAS4CHAM8CfBbgHxYvAJAARxCOAEfAC0CQAJ8F+IV8U3bKnZohssmfugIOBCBHYGeYk6MDtZmD0FjhTgYv3Zya6rkkt0be4ikW8qqYGj0Xy4XyZRPRiQDKclC46QjCEeAS4AjwEOAhwAcBfhDg7+r3f+Q+hhWc5HWjA44AN3HgkwB/Jt+OTbvSH7YF5E04B7CcgjlEByJ7KESOIHI5/DddL9wqw4A1nHKKc8FKOxp9tWB4YexbbBiWchl5CHJQGBxBOIJwBLgEuAS4BHgW4EsB/l361z/aCRburwHgEqgZArypX23yLbjWsJTLyDVAy5sAzIDl2lkGYWXNLcA+58qYOsMGLZWf3BqtrKmeR7p+VzTsu6zI/ciX4eAIwhHgEuAIcAnwEOCDAD8L8Nf0N+6deAGABIMjDlwCXFsc8E7ev5bvP6n9NKlpyqU/aQVzF48fN6VVyEEzRg1aMmqHINoSRI4AKVu0I3F8AVr05FbIWYXbyLK56Rrl2yWGTpRDkIPCwRGEI8AlwBHgIcBDgM8C/AdkO/Bf/tsSmPsmBhwBzs4GTAI6hE5z50p/47uwU+4ssz9yC8ibUII7UgD6YLl2lkFYWXMLsMp2tqORtztYZUchxdVkML1FMHcapzXDvlQil3OWg8KlIwhHgEuAS4BLgA8CfCfAX5Zt8bN4AYAExX03A45g6KiUAM+d0Pmzy6rvxaZcLnMNPH7c5PtgGTRj1KAlo3YIoi1B5Ajg2c1pyaMdhRL95NbIL0CKhpV2NPpq4mLZKN+xksvIQ8gOBASDIwhHgEuAS4CHAB8E+A+o7Lqsf85/ArgjYE8DZuLAQxx4aLX7Q4uPnJu+HSVbSmXL/rwVzJEHWAawrI4cViHQVUYE6HOrWvJoh1HPJbkVLNtRSLHmcjJSXGCrdhTKd1kxLOUysoIcFJaOIBwBjgCXAJcAzwJ8FuCfkm2ko8rAP/+XnYS2MhRP5ZybhjJU++WTJN95XUf6377pY0WRUwAFc4oh1AGVRg1aMmqHUIgOpGaQ//lteOnmeHJz8tvilNJPboWWa6rnkbE/1unnTwzNKHfh4AjCEeAIcAnwEOBZgJ8F+FndnjlqO8kLACQo7icMceAI6BOKPAOuLJWPSR2p9Kus9N0Wsg7KzWVeBWjB+0AAy30nyhyCMgMRwLNbnBzPbo4nt0J+YVrcvRjgyW1k2dx0jfLVKrmcsxwULh0BjgBHgEuAhwAfBPg3qWynlcalf/pPO3GY29lgBwNm4sBRmlEuyhl5OX5M38mZPTeUeOl4LopcA48fN3mIcgjF6dTtEiGWCAUP1vRQyFu2Jcu5ouhKGqlusR/LGfIlYmokTmv+LRK5jDwEOSiEIwhHgCPAEeAS4CHAZwH+vspu2Wi52pq8AEAC9i64WS4BRfZgioByRrVsn+HKZc7ISt+LUldGQJGH4PtgEeQcPgbqQAm1T2jUrBkzOyo5U+1Li3YY9WyMMwkr7SikuOF6on5BZ5kV5KCwdAQ4AhwBjgCXAM8CfCnAH8l2yFHLgblpnX/UnwAkDnndwRw44sBNHkChqGa7Xc2SdZKijIBa9u04lKj7F6aRPbADcJMHKMEdKQB9kEOEGCAU5gCrbGc7ChbtKJToJ7eCZTuMejZKLqc4L+iWUlG+yETuR96FgyMIR4BLgEuAZwF+KcBDbTPc0G547nedf/wPPtQSh7mdbR+DmTdNHDhKHXMUAX31d+fD0mpesuybz0KVZW+inO8EtgKuEgiA5xLG4G4zHowIEDkC1GxnOwoW7TDq2VLLVjl+ciu07MltZNlcdu3r9ORO5CFkBwKCwRHgCHAJcAnwLMA/LtskKy37Q7OU7QVw2MHKBMBK8L7pEFDN5e5elpwCimzBt6kFKf+3Al9C7c+BPoCCHBRwILBFzMnquEOEGCAU5gCRPbg5ntwcT27G+i88y7eiki8RUyOxXytfqpLLyApyUFg6AhwBjgBHgIcAzwL8U2rbo9eyPzSH8usf/t1OwGYFM9+1QMeCu4nDnbNpCvkf9iiX8anbkDa9Bd+U0m7rmxTk/HA10IHiSMEdSvBhw0vLHow5QMrdHvXs5gybOxURLdhh1HPBSjsKKW44TtiXSkS5C5eOAEeAS4CHAB8E+DuyjbHSsj80tyUvAJCArQxmvneBDgEHnLNJQY76UG6d840gZ2uWgPpszlgN0VFgH+AmD1EqFKfj20UOERgAm/Fg7IOd7ahc7ng/uRUs22HUs1FyOcV5pOunwn7+FbkfeQhyUAhHEI4AR4BLgEuAzwL8BbVtMGleuuzk0vI//Bs/GGf+Y7Bxwcw7URLkgHM2KcTf+1Xqvjm79AdCK+W+NZFKNHa8tOzBNAQ58sCGwE2+M3AyEEAOJdRVgih9mAPEXi8nw6IdheULUIJTsp/cCi3388GyaUwL5UslcifyEA6OIBwBLgEeAnwW4PdlD32vefXcyRm18u//zU6CXQtmvllL6ZkDVzYpZOemNdCJD7DgfQsuhexsOwU5itcAtezBZjwURx7YB7jJQ5QKxen4dpEb6g8lRAdqzpu7NcthlLOf3Jy0oSOQWraqYdmORl9NbJbLF6nkMrKCHBTCEYQjwBHgEuAS4LMAvyl7xHvNq+dOzijKEv7+D/xstkeFAu7nGtyV5Rx42fFy5MHuGwHVl0GOFLIjC/U1QBZ8L0ZALcuRghwp+IZowZtAADmU4G4DHowaygCNGmLJ8OxWTm7OvLntkBXaPckclZLLKc5HjkP21SpzloPC0hGEI8AlwEOAzwL8juwpb7RcGpqHcp3/7g92AnPfuByDs4lxDlx5drujB1ReDAJeXwCksHNkIb8GvndRBFZxG/BgUnAHBTk7A0cKncMQYhsdAkTOu9yTm5OWSvCTm1GCn9wKLac7ZJbNoWvfZSKauyAHBRxBOAIcAY4ADwE+C/A7sie70bx07lzmEv7u9/x4tk3BzPcuR3hZqrk4UsCRh9j3lOXuNXTuYyX75ivZHeUmWzkCbtmDSUGOFKpDC9XpGApy0CqHh+IwB6jZznYUun+i11zPliJHILVsVSPuEEyNxGbNvlEiyl04OAIcAS4BLgE+C/A7soe70bw0dA5l5AioZb0AQMExODsYcJMl/lNyuN2rZlz7G6lvPufZ60aXd6Xv1AgmraayOT+kgnvJNXQOCrGBVELqFFKIGMnOdhjl7Cc3IzZ0PRvRhBQ921FIcc9+qHwjJ/IuDI4gHAEuAS4BPgvwm7JnutLcHzqHMnIEFNnC7/7Vkh9uvn05iiPOHO6czZFCcrtXztxdJQGPZnWk0Ll2ds0l4J5NGkhlc6RQHVrIzuEzOESQtxL6YGZHxbNbObk56T2xYIesYNkOWSFniq6sLJtD175CT3R24eAIwiXAJcAHAf5I9mRXmvu5kzPKZeQ5oJJ/9y8Y/zHYpoaXlj1w4JSmqSy7vLrd1LOC+ZyTI4XmvjVzRlZOW99KpE52fkgF98hAUImDmhBB/eLeL7GcnJrzP8JpdlUt6tlS5BYikTkqlu1o9NXEatm+ZiLKXVg6AhwBjgCXAM8C/AWVBzpp6B/KZZ4DatleAPBdC+xUMFfHPUqCaQjczj1n+4DY9NGZHCl0Xje3eWTfuKbaIYyOFNzZFrjJ98fsUIJPGirhKrjFyc92GHa2Q1aIvV7PHuww6tko2U9ua7ql+Pkncn/OclAYHAGOAEeAS4CHAH9H5cn2Gpq5vMwRUOQu/O0/204VCua+ZTnwKAmmXeB27mS7r7w2S3a1JZcCGxFHuYy8DLhlVMtwbQiTB5Wd+5JRSwKUJuxDbGXDs1s5uRkxVs5+cjNKSH8sQJdz4UyNxLRWvlQll5EVLh0BjgCXAA8B/qbKA+01NHO5zBFQ5G3gBQA2pbDgW5YDj7IExBlHNdiNCO7KzfkYXxoyGoJc/5gnmE8ZlbDf+iYFd3YGToYW3LWEQwQj9Y0USiwnI2/TLpdD5sTlFgvjJRXLdhRS3LCZsC+SiHIIB0eAI8AR4CHADwIclad21DwzdHIZOQKKfCd8/e0/YfyEbmxQO3nA7OA/NSDOOJqC3ZHArbN705wcwTUEOWJ3mnvWdifgpR8dD7hlVMtw9gRecoTeoQV3Q0EOcwDPZnYYdrbDKOdhx9th1LMHO2SFltPlmWVz6NqXSuQy8hCWjgBHgCPAJcBnAX5WeXArDUuHMnIEFPkymNsLAL5fDYInc7IlyyaiHeZ2ZkPXYOJ2yelwd2WCuXcsuHbBvG5r88i+a1EJtU8YHSm4szlwMnTOoeBu+CRe2If8T26arUo5Zuq5daDEPM9RKbmcjBQ3rCbs61TmLAeFwRGES4BLgGcB/kjlIfaam7mzzBFQ5CHIURf+5h9tswoLCMN973KQW5CocIm74MibdsfZfaYEVwQUuQu+F8ecNr0F7+OWUS3lgA8ZCJCdraMlguFuHQ9GDW0H12BnOww722HY2Q6ZYcEOmVGCn9wKLafXI7NsRtd+8p7ciawgB4VwBOEIcAnwEODvqDzBpKGTy2WOgCIryNEQ5PYCADvV8H3sh3cokRUeJCpcStluV50+O15unRxczOBSa/pWRqXj+5JgruyOSvB5hYOzM3CksHDw3cN8QUEOqxBRyc1OJTjxwpRzWm0hEpmjYtmOQoobVhPl2zmRdyEcQTgCHAEeAnwW4LPK89poWD2UkeeAIivI0RDkX3/zDxg/sBuHb1wO9iiYezZZ7SHEXXDECnvaw9L1YbhJTVcEZLnuaRyxI83JvlMt104J3pdrRhmxIfBS+uZYOIeCe8kcHopDH9zi1O/gmsvZT27GuKpgh6zQcnphMstmdO3n78mdyApyUMARhCPAEeAS4FmA35c9vklDM5eXeRfkaAhyfwGAiLmTFcw9c+awkEUPZ3Pjnluorg5OtoDUqVpk7WyCPErfypYV3MnWQbWcHXAyW6S5N0FemsowBDlEgNidfnIrJzdj3PFxicVCzECKnu0opLhhNWFfqhJ5F8IRhCPAJcBDgL+j8gSTcucy3w9ypCD/+vp7Dr4FkaNkc3Yqzhn33IkeXmX3SqHscjlKAS/Ztc6+HS3QrFs8mqWTSsLZ2Rw4GSKoGS5iqbAKJZaThRYjkcshM2K1nj3YISu0nO4czJ1CWrBvlMhlZAU5KIQjwBHgCHAJ8EGAn2WPbKWhn8tljoAiK8jREORIQW4vALBrDd+pdtRgfXfJMoZXsadxmkPg7hZwNIeqXHbZdzmypmeFcFSCe87Fke8JPGeYHUrIXptmdjgpRFRys1MJxJrq+dSBiCWUU5yPrIb44pkoFeSgEI4gHAEuAR4C/AXpmQ7Kzct8P8iRQvavr7/D+BYkjFMf3BHgS9mNFHDui5O9iVuJIy9LlmIJxS6vYvPhSMGWfCtbVsdL3DKq5eyAk9kla4c6VlCQQx/M7CjEJrazHYad7ZAZFuyQGRbskBkRIG4bTI1Ev1a+VCWXynJQGBxBuAS4BPgswGeVZ7TSsLQrI6DIuyBHQ8iOLNgLAFSYO9mCnDPueStuhLv8jl56s5RkpKbkzVZKvhctuCzXzU0wRx7YpuQWahOPAcCVcfYHTobOORTclQ0FOaxCRNIyxw6u51sdaDndbWDs+xecyc3IQ1g6AhwBjgDPAvyp7KlNys3LfBnkSCE7UjD/+h3GtzC3MwfCcDrVpZwR+9h6uDLupWXuTlBJRmpK3mxllXV8T6PIQzAnK7jPObt2BhlwsjpAaajMGVSCghxiR5aTn+0w7GyHzE4lWHTmDqGmejZKLqc471lNlO/iRB7CwRHgCHAJ8FmAL2WPbKW5nzvLfBnkSEGOFEa3FwCogD2aQ3IUoYlb4FWWa4dbW3BvWVLH7meeVTq+3ZGVnhXMyepUt6a7cnGk4M7mwHMOB/qGOlDLgoIcarCzHU7e1jWVc14qh8woIc1Al3PhTI1EXStfJBGdIchBAUcQjgCXAA8B/oLs2fUaOrmMfD/IkUJ2pCD/+n+/43B0YqcSXBgHJYowiw2NIwvcFycruJNLR/JsS5NK0zc3stLzEHB27VBeOvsjnI7hGYfSgdQ0UrBoR0Ud8JObnUpwtIPdDJVQzx7skBVa9uQ2MjfbV0jYd6lEHsLSEeAIcAnwQYCfpec1K/dzRlG+EORIYedf/+9vzUgGJxfGwa7NfhB7Gkd2Uxwp8DHuJaMauCs+qDVjfyPfkS3IWVVwn7OcbYIr47Bzw8dwQw6rUGI59dvaDqOc67CcUwkWC3E5RCyhnOJ8ZBqyr1OJPISDI8AR4CHA35E9waRdGQFF3gU5UsiOFCbnBQC2r7tBJrgIaA4SuxmXlO2OOFLgM+i7W0YerLNRW4p3IAVzsjrVaeI5D87OwMmAk9XBgY4oITvsQ9u4eVtHIvth7liwQ2aUkGagy7mg5DiQlu3bJXKpLAeFcAThCHAJ8BDgj2SPqdfQyWXk+0GOFLIjhex1P4LvVDtcbN/sKEIWGxpHCnYznMwHEFTWXJym+1JtSXt6E3D2q5Weo7NzwMnsktFBwcdwy1DLggczO5zYuH5ys1MJFnXIjNjQ9ezBDlmh5XS3YO4UfKH88InciaxwcAQ4AlwCfBDgO9ljWmno53KZL4McKcyOFJJjQIXhEoazj8P/xnwptjWOuJO5y66IgMjVS0fyjsl3M2qr3imlb8oWkrOt6SsURwq9sz9wMhTnUHAnR8dQkEMKJZaTn+2Q2akEYk3lnJc4nHHGKdlPbltYtR8bSBNlyYmsIAeFcAQ4AhwBHgL8ZZVHlpQ7kSOgyEOQIwU5UsiOFLL7BgQi+H61w8VulqMSNq8B+9icKbzmHMwRHTwU/ZBvQQtSlHWXEwZHJbjnjAOujKA4B53koCVlQ0EOfTCzo9BtYjtkdirBog5ZcWOYqVi2w6jnI9OQfbVK5CEcHAEuAR4C/Kn0HLNy5zIPQY4U5EghO1KYnDOC6uxaHCmEh7iOvUsIqbTb4TXnYI7o4FI0s3w7WpDSvo/QnI76XuI5ZweczBbByZBdfdyQpyUws8OpITY9LLOd7ZC52yEzSkgvAES2YEejryb6ZftGlTnLQWFwBDgCXAI8C/BL2aOZNDRzucxDkKMhZEcKO/ctiQSBhjtSCEcR9EcBmxiXLHNT3DN3xy17MOfqGkw5J7Ht8CLPdlvkexQnK+AaxsnRWTqbAyfD7FrFDWWoZcGDmR1O3rgp714AsGCHzLBgh8yIAHGrYGok0lr5CpUoh3BwBDgCXAJ8FuCD7OlsNCzlcpl3QY4UsiOFo3OGcIThLgu+1yV1irzPPsaRBWZxz3ZrHHkT1yrBFGGW7z8LUpQK2vEewtnEeM6zszlwMuBkdXCgY7hHszgoyDnXoI5bObnZqQRiTfVcOm6GBTtkhZbTrYK5U/AF+/l7cieywsER4AjwEODvSA8xlMtl3gU5UpAjhZ0jBXfOgoCAHsGlgLPdSwh90wvApO/yIt+mCrhldZJrHlfeOeBkNsrshjLUsqAgh9iU5eRnO2Tl5Fa2O9TzvQ6H8OQ2Mjf5djPlGzmRhzA4AhwBjgAPAf6C7En1yp1lvgxypJAdKeycDct3cRRweu5IAWe7l5CV3gFbx5VxPsADfbyUuJTzJB4kXuTZLk9hcM3jyjsHnMzemR1YLSjIQUEOHszsKHSb2A6ZnUqwaHSTztyBkv3kdoPVnH27SmQFOSjgCMIR4BLgIcAfyR5Tr9xZ5ghIWY6GIEcK971Yc/arO1Io7tt9VPwXYm6Hs7NdKk0eSolLOU9iI+JFnu3yFJbOVeHRAVwZZ4uE0zE841A6oCAHBTnUEBsXItvZDpmdSrDo3OlEKKc4H5mG7KtVIg/h4AhwCfAswG9Kjy9r6OQy8mWQI4XsSOHsjs54FVt59OULwFamzzpBpYsObtKSSlzKeZJd69vd5CE6Cktn+8ptrGacbYEPGbKrjxc8lCXwEFtcJdjZDqOtpmzneXPf6TiW7SikuGGasC9ViTyEpSPAEeAS4FmAn2VPZNLQzGXkCEhZjoYgRwpnRwREQI7OuITh7Gyc3Vx9+Q6wm3GkgCOuwE1c6q5sirCRXev7uMh3Zwu+xO5UNq8lrg4hnG2BDxmyq2/kUhkUYpuWkxF7nWaLNdnZDplhIU9ywNxxLNtRSHFDP2FfIRHlEJaOAEeAS4APAnwnezorDf1cRr4McqQgRwp3HDk64wjYwQRUdzwZX74AiD2dHXEFbuJSd2VThI3sWrYyLvl2bMGX2LjmSMGX8JKRgjvgOUN2tg6rhpfRLCi4m9lRiL1Os8Wa7GyHzLCQJzkgdSCyBTsafTXRL5dvVIlSQQ4K4QjCEeAS4LMAn2WPY6Whn8tlHoIcDSE7Ujg7qhAR4Oxgd6YIiIz/zAuA2IJ4ke/OFnxJA5Ql+BJeMlJwBzxnyM7WYdXwMpqFFCzaUVEHIhBrsrMdMsOCHTLDgh0yIwLErURfTfTL5Rs5c5aDQjiCcAlwCfBZgIfsQew1rOYy8v0gRwqzI4XZUYWIAGcHuyM2vXlo9Q6wp0fnA3DE1e7Kpgh7sQXxIt+dLfiSBihLqEu4sjnyAHjOMLvhoZRy6EO3KWPfR4CUNexmWLBDZliwQ2ZEAF0e9NVEWubLZqLchXAEOAIcAS4B/o7seSXtyvtBjhSeekURd7FrccSONw95ySa2XKWyc+6OI8bdlU0R9mIL4kW+d1vwJQVckzg5OsWRAt/LnQw7N3wMN+TQh25Txl73k5udSiB6cjMs2CEzLNghMyKALg/6aiIt27dIRDkEORAQhCPAEeAS4O/InldSLpd5F+RIQY4U7ntFEXexa3GkHU9ZVEv2MS4pd87dcbJCOIqwFzsSL/JN2YIvKeCaxMnRKY4U+F7uZMDJdIAMciMtFYc+dJsy9rqf3OxUAtGTm2HBDplhwQ6ZEQF0eWZqJNKafYtElEM4OAIcAS4B/o7seSXlcpl3QY4U5EjhvlcUcRebGEex4yUuwhH7GJeUO2cQJyuEowh7sSPxIt+UCriWrKO+O008Z3OkwPdyJwNOVgcHOoXULA596DZl7HU/udmpBGJNOpvbITMs2CEzIkBcHkyNRFqzb5GIcggHR4AjwEOAvyw9vlAul3kX5EhBjhTue0URd7GJcfTXF2AI3aaMve4nNzuVQKxJZ3M7ZIYFO2RGBIjLg6mRSGv2LRJRDuHgCHAEeAjwl6XHF8rlMu+CHClkRwp3vKKIu9jEOLJQNz2KzD7GJeXOGcTJCuEowl7sSLzIN6UCriXrqO9OE8/ZHCnwvdzJgJPVwYFOITWLQx+6TRl73U9udiqBWJPO5nbIDAt2yIwIEJcHUyOR1uxbJKIcwsER4AjwEOCvSc8uK3eWeRfkSCE7UrjjFUXcxSbGkYW66VFk9jEuKXfOIE5WCEcR9mJH4kW+KRVwLVlHfXeaeM7mSIHv5U4GnKwODnQKqVkchpD2N6lkP7nZqQRiTTqb2yEzLNghMyJAXB5MjURas2+RiHIIB0eAI8BDgL8mPbus3FnmXZAjhexI4Y5XFHEXmxhHFuqmR5HZx7ik3DmDOFkhHEXYix2JF/mmVMC1ZB313WniOZsjBb6XOxlwsjo40CmkZnEYQtrfpJL95GanEog16Wxuh8ywYIfMiABxeTA1EmnNvkUiyiEcHAGOAA8B/pr07LJyZ5mHIEdDyI4U7nhFEXexiXFkoW56FJl9jEvKnTOIkxXCUYS92JF4kW9KBVxL1lHfnSaeszlS4Hu5kwEnq4MDnUJqFochpP1NKtlPbnYqgViTzuZ2yAwLdsiMCBCXB1MjkdbsWySiHMLBEeAI8BDgr0nPLit3IkdAkRXkaAjZkcIdryjiLjYxjizUTY8is49xSblzBnGyQjiKsBc7Ei/yTamAa8k66rvTxHM2Rwp8L3cy4GR1cKBTSM3iMIS0v0kl+8nNTiUQa9LZ3A6ZYcEOmREB4vJgaiTSmn2LRJRDODgCHAEeAvw16dll5U7kCCiyghwNITtSuOMVRdzFJsaRhbrpUWT2MS4pd84gTlYIRxH2YkfiRb4pFXAtWUd9d5p4zuZIge/lTgacrA4OdAqpWRyGkPY3qWQ/udmpBGJNOpvbITMs2CEzIkBcHkyNRFqzb5GIcggHR4AjwEOAvyY9u6zciRwBRVaQoyFkRwqX/v8BU1MnOjN7Q+4AAAAASUVORK5CYII=';
const PBR = Object.freeze({
    pbrCookTorranceBrdfLutDataUrl,
    pbrKelemenSzirmayKalosBrdfLutDataUrl,
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PBR);


/***/ }),

/***/ "./src/sparkgear/SparkGearComponent.ts":
/*!*********************************************!*\
  !*** ./src/sparkgear/SparkGearComponent.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SparkGearComponent": () => (/* binding */ SparkGearComponent)
/* harmony export */ });
/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/ProcessStage */ "./src/foundation/definitions/ProcessStage.ts");
/* harmony import */ var _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/math/Matrix44 */ "./src/foundation/math/Matrix44.ts");
/* harmony import */ var _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");









class SparkGearComponent extends _foundation_core_Component__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(entityUid, componentSid, entityRepository) {
        super(entityUid, componentSid, entityRepository);
    }
    static get componentTID() {
        return _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_2__.WellKnownComponentTIDs.SparkGearComponentTID;
    }
    onBeforeRender() { }
    onAfterRender() {
        const ThisClass = SparkGearComponent;
        ThisClass.SPARK_BackupStatus();
        _SPARK_Draw(this.__hSPFXInst);
        ThisClass.SPARK_RestoreStatus();
    }
    // clone() {
    //   return new this.constructor(this._LoadingManager, this._Url).copy(this);
    // }
    play() {
        _SPARK_Instance_Play(this.__hSPFXInst, 1.0, false, 0);
    }
    stop() {
        _SPARK_Instance_Stop(this.__hSPFXInst);
    }
    pause() {
        _SPARK_Instance_Pause(this.__hSPFXInst);
    }
    isPlaying() {
        return _SPARK_Instance_IsPlaying(this.__hSPFXInst);
    }
    kickTrigger(trigger) {
        _SPARK_Instance_KickTrigger(this.__hSPFXInst, trigger);
    }
    static SPARK_BackupStatus() {
        const ThisClass = SparkGearComponent;
        const gl = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();
        ThisClass.SPFX_ArrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);
        ThisClass.SPFX_ElementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);
        ThisClass.SPFX_CurrentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
        ThisClass.SPFX_FrontFace = gl.getParameter(gl.FRONT_FACE);
        ThisClass.SPFX_DepthFunc = gl.getParameter(gl.DEPTH_FUNC);
        ThisClass.SPFX_DepthWriteMask = gl.getParameter(gl.DEPTH_WRITEMASK);
        ThisClass.SPFX_StencilTestEnabled = gl.isEnabled(gl.STENCIL_TEST);
        ThisClass.SPFX_DepthTestEnabled = gl.isEnabled(gl.DEPTH_TEST);
        ThisClass.SPFX_CullFaceEnabled = gl.isEnabled(gl.CULL_FACE);
        ThisClass.SPFX_BlendEnabled = gl.isEnabled(gl.BLEND);
        ThisClass.SPFX_BlendSrcRgb = gl.getParameter(gl.BLEND_SRC_RGB);
        ThisClass.SPFX_BlendDstRgb = gl.getParameter(gl.BLEND_DST_RGB);
        ThisClass.SPFX_BlendSrcAlpha = gl.getParameter(gl.BLEND_SRC_ALPHA);
        ThisClass.SPFX_BlendDstAlpha = gl.getParameter(gl.BLEND_DST_ALPHA);
        ThisClass.SPFX_ActiveTexture = gl.getParameter(gl.ACTIVE_TEXTURE);
        for (let i = 0; i < 8; i++) {
            gl.activeTexture(gl.TEXTURE0 + i);
            ThisClass.SPFX_Texture[i] = gl.getParameter(gl.TEXTURE_BINDING_2D);
        }
        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);
        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);
    }
    static SPFX_Uninitialize() {
        const ThisClass = SparkGearComponent;
        ThisClass.SPARK_BackupStatus();
        _SPARK_Uninitialize();
        ThisClass.SPARK_RestoreStatus();
    }
    static SPARK_SetCameraMatrix(viewMatrix, projectionMatrix) {
        const vMv = viewMatrix._v;
        _SPARK_SetMatrix(0, vMv[0], vMv[1], vMv[2], vMv[3], vMv[4], vMv[5], vMv[6], vMv[7], vMv[8], vMv[9], vMv[10], vMv[11], vMv[12], vMv[13], vMv[14], vMv[15]);
        const pMv = projectionMatrix._v;
        _SPARK_SetMatrix(1, pMv[0], pMv[1], pMv[2], pMv[3], pMv[4], pMv[5], pMv[6], pMv[7], pMv[8], pMv[9], pMv[10], pMv[11], pMv[12], pMv[13], pMv[14], pMv[15]);
    }
    static SPARK_Draw() {
        const ThisClass = SparkGearComponent;
        ThisClass.SPARK_BackupStatus();
        _SPARK_DrawAll();
        ThisClass.SPARK_RestoreStatus();
    }
    static SPARK_DrawDebugInfo(InfoType) {
        const ThisClass = SparkGearComponent;
        ThisClass.SPARK_BackupStatus();
        _SPARK_DrawDebugInfo(InfoType);
        ThisClass.SPARK_RestoreStatus();
    }
    $create() {
        this.__sceneGraphComponent = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.getComponentOfEntity(this.__entityUid, _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_7__.SceneGraphComponent);
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Load);
    }
    static common_$load() {
        if (SparkGearComponent.__isInitialized) {
            return;
        }
        const moduleManager = _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_8__.ModuleManager.getInstance();
        const moduleName = 'webgl';
        const webglModule = moduleManager.getModule(moduleName);
        // Initialize SPARKGEAR
        SparkGearComponent.SPFX_Initialize(webglModule.WebGLResourceRepository.getInstance());
    }
    $load() {
        if (this.url == null) {
            return;
        }
        const loadBytes = function (path, type, callback) {
            const request = new XMLHttpRequest();
            request.open('GET', path, true);
            request.responseType = type;
            request.onload = () => {
                switch (request.status) {
                    case 200:
                        callback(request.response);
                        break;
                    default:
                        console.error('Failed to load (' + request.status + ') : ' + path);
                        break;
                }
            };
            request.send(null);
        };
        const ThisClass = SparkGearComponent;
        loadBytes(this.url, 'arraybuffer', (data) => {
            const buffer = new Uint8Array(data);
            ThisClass.SPARK_BackupStatus();
            const SPFXData = window.Module.ccall('SPARK_Data_Create', 'number', ['string', 'number', 'array', 'number'], [this.url, this.url.length, buffer, buffer.length]);
            this.__hSPFXInst = _SPARK_Instance_Create(SPFXData);
            _SPARK_Data_Delete(SPFXData);
            ThisClass.SPARK_RestoreStatus();
            this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
        });
    }
    $logic() {
        // Keep Playing
        if (!this.isPlaying()) {
            this.play();
        }
        const cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__.ComponentRepository.getComponent(_foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent, _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_5__.CameraComponent.current);
        let viewMatrix = SparkGearComponent.__tmp_indentityMatrix;
        let projectionMatrix = SparkGearComponent.__tmp_indentityMatrix;
        if (cameraComponent) {
            viewMatrix = cameraComponent.viewMatrix;
            projectionMatrix = cameraComponent.projectionMatrix;
        }
        SparkGearComponent.SPARK_SetCameraMatrix(viewMatrix, projectionMatrix);
        SparkGearComponent.SPFX_Update(1.0);
        const m = this.__sceneGraphComponent.worldMatrixInner;
        _SPARK_Instance_SetTransformFor3D(this.__hSPFXInst, m._v[0], m._v[4], m._v[8], m._v[12], m._v[1], m._v[5], m._v[9], m._v[13], m._v[2], m._v[6], m._v[10], m._v[14], m._v[3], m._v[7], m._v[11], m._v[15]);
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Render);
    }
    $render() {
        this.onAfterRender();
        this.moveStageTo(_foundation_definitions_ProcessStage__WEBPACK_IMPORTED_MODULE_3__.ProcessStage.Logic);
    }
    /**
     * @override
     * Add this component to the entity
     * @param base the target entity
     * @param _componentClass the component class to add
     */
    addThisComponentToEntity(base, _componentClass) {
        class SparkGearEntity extends base.constructor {
            constructor(entityUID, isAlive, components) {
                super(entityUID, isAlive, components);
            }
            getSparkGear() {
                return this.getComponentByComponentTID(SparkGearComponent.componentTID);
            }
        }
        (0, _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.applyMixins)(base, SparkGearEntity);
        return base;
    }
}
SparkGearComponent.__isInitialized = false;
SparkGearComponent.SPFX_Texture = [];
SparkGearComponent.__tmp_indentityMatrix = _foundation_math_Matrix44__WEBPACK_IMPORTED_MODULE_4__.Matrix44.identity();
SparkGearComponent.SPARK_RestoreStatus = function () {
    const ThisClass = SparkGearComponent;
    const gl = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();
    gl.useProgram(ThisClass.SPFX_CurrentProgram);
    gl.bindBuffer(gl.ARRAY_BUFFER, ThisClass.SPFX_ArrayBuffer);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ThisClass.SPFX_ElementArrayBuffer);
    gl.frontFace(ThisClass.SPFX_FrontFace);
    gl.depthFunc(ThisClass.SPFX_DepthFunc);
    gl.depthMask(ThisClass.SPFX_DepthWriteMask);
    gl.blendFuncSeparate(ThisClass.SPFX_BlendSrcRgb, ThisClass.SPFX_BlendDstRgb, ThisClass.SPFX_BlendSrcAlpha, ThisClass.SPFX_BlendDstAlpha);
    ThisClass.SPFX_StencilTestEnabled
        ? gl.enable(gl.STENCIL_TEST)
        : gl.disable(gl.STENCIL_TEST);
    ThisClass.SPFX_DepthTestEnabled
        ? gl.enable(gl.DEPTH_TEST)
        : gl.disable(gl.DEPTH_TEST);
    ThisClass.SPFX_CullFaceEnabled
        ? gl.enable(gl.CULL_FACE)
        : gl.disable(gl.CULL_FACE);
    ThisClass.SPFX_BlendEnabled ? gl.enable(gl.BLEND) : gl.disable(gl.BLEND);
    for (let i = 0; i < 8; i++) {
        gl.activeTexture(gl.TEXTURE0 + i);
        gl.bindTexture(gl.TEXTURE_2D, ThisClass.SPFX_Texture[i]);
    }
    gl.activeTexture(ThisClass.SPFX_ActiveTexture);
};
SparkGearComponent.SPFX_Initialize = function (repository) {
    const ThisClass = SparkGearComponent;
    if (repository.currentWebGLContextWrapper == null) {
        return;
    }
    ThisClass.SPFX_WebGLResourceRepository = repository;
    window.GLctx =
        ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper.getRawContext();
    ThisClass.SPARK_BackupStatus();
    const glw = ThisClass.SPFX_WebGLResourceRepository.currentWebGLContextWrapper;
    _SPARK_InitializeFor3D(glw.width, glw.height);
    ThisClass.SPARK_RestoreStatus();
    ThisClass.__isInitialized = true;
};
SparkGearComponent.SPFX_Update = function (DeltaTime) {
    _SPARK_Update(DeltaTime);
};
_foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_6__.ComponentRepository.registerComponentClass(SparkGearComponent);


/***/ }),

/***/ "./src/sparkgear/main.ts":
/*!*******************************!*\
  !*** ./src/sparkgear/main.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SparkGearComponent */ "./src/sparkgear/SparkGearComponent.ts");
/* harmony import */ var _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/EntityRepository */ "./src/foundation/core/EntityRepository.ts");
/* harmony import */ var _foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/Transform/TransformComponent */ "./src/foundation/components/Transform/TransformComponent.ts");
/* harmony import */ var _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");




const createSparkGearEntity = function () {
    const entity = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.createEntity();
    const entity1 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_foundation_components_Transform_TransformComponent__WEBPACK_IMPORTED_MODULE_2__.TransformComponent, entity);
    const entity2 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_3__.SceneGraphComponent, entity1);
    const entity3 = _foundation_core_EntityRepository__WEBPACK_IMPORTED_MODULE_1__.EntityRepository.addComponentToEntity(_SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__.SparkGearComponent, entity2);
    return entity3;
};
const SparkGear = Object.freeze({
    SparkGearComponent: _SparkGearComponent__WEBPACK_IMPORTED_MODULE_0__.SparkGearComponent,
    createSparkGearEntity,
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SparkGear);


/***/ }),

/***/ "./src/types/AnimationTypes.ts":
/*!*************************************!*\
  !*** ./src/types/AnimationTypes.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/BasisTexture.ts":
/*!***********************************!*\
  !*** ./src/types/BasisTexture.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/CommonTypes.ts":
/*!**********************************!*\
  !*** ./src/types/CommonTypes.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/KTX2Texture.ts":
/*!**********************************!*\
  !*** ./src/types/KTX2Texture.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/RnM2.ts":
/*!***************************!*\
  !*** ./src/types/RnM2.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/TypeConverter.ts":
/*!************************************!*\
  !*** ./src/types/TypeConverter.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fromTensorToCompositionType": () => (/* binding */ fromTensorToCompositionType)
/* harmony export */ });
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");

function fromTensorToCompositionType(vec) {
    switch (vec.className) {
        case 'Scalar' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Scalar;
        case 'Vector2' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec2;
        case 'Vector3' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec3;
        case 'Vector4'   :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Vec4;
        case 'Matrix22' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat2;
        case 'Matrix33' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat3;
        case 'Matrix44' :
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Mat4;
        default:
            console.error('CompositionType.Unknown');
            return _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_0__.CompositionType.Unknown;
    }
}


/***/ }),

/***/ "./src/types/TypeGenerators.ts":
/*!*************************************!*\
  !*** ./src/types/TypeGenerators.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/VRM.ts":
/*!**************************!*\
  !*** ./src/types/VRM.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/WebGLConstants.ts":
/*!*************************************!*\
  !*** ./src/types/WebGLConstants.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GL_ACTIVE_ATTRIBUTES": () => (/* binding */ GL_ACTIVE_ATTRIBUTES),
/* harmony export */   "GL_ACTIVE_TEXTURE": () => (/* binding */ GL_ACTIVE_TEXTURE),
/* harmony export */   "GL_ACTIVE_UNIFORMS": () => (/* binding */ GL_ACTIVE_UNIFORMS),
/* harmony export */   "GL_ACTIVE_UNIFORM_BLOCKS": () => (/* binding */ GL_ACTIVE_UNIFORM_BLOCKS),
/* harmony export */   "GL_ALIASED_LINE_WIDTH_RANGE": () => (/* binding */ GL_ALIASED_LINE_WIDTH_RANGE),
/* harmony export */   "GL_ALIASED_POINT_SIZE_RANGE": () => (/* binding */ GL_ALIASED_POINT_SIZE_RANGE),
/* harmony export */   "GL_ALPHA": () => (/* binding */ GL_ALPHA),
/* harmony export */   "GL_ALPHA_BITS": () => (/* binding */ GL_ALPHA_BITS),
/* harmony export */   "GL_ALREADY_SIGNALED": () => (/* binding */ GL_ALREADY_SIGNALED),
/* harmony export */   "GL_ALWAYS": () => (/* binding */ GL_ALWAYS),
/* harmony export */   "GL_ANY_SAMPLES_PASSED": () => (/* binding */ GL_ANY_SAMPLES_PASSED),
/* harmony export */   "GL_ANY_SAMPLES_PASSED_CONSERVATIVE": () => (/* binding */ GL_ANY_SAMPLES_PASSED_CONSERVATIVE),
/* harmony export */   "GL_ARRAY_BUFFER": () => (/* binding */ GL_ARRAY_BUFFER),
/* harmony export */   "GL_ARRAY_BUFFER_BINDING": () => (/* binding */ GL_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_ATTACHED_SHADERS": () => (/* binding */ GL_ATTACHED_SHADERS),
/* harmony export */   "GL_BACK": () => (/* binding */ GL_BACK),
/* harmony export */   "GL_BLEND": () => (/* binding */ GL_BLEND),
/* harmony export */   "GL_BLEND_COLOR": () => (/* binding */ GL_BLEND_COLOR),
/* harmony export */   "GL_BLEND_DST_ALPHA": () => (/* binding */ GL_BLEND_DST_ALPHA),
/* harmony export */   "GL_BLEND_DST_RGB": () => (/* binding */ GL_BLEND_DST_RGB),
/* harmony export */   "GL_BLEND_EQUATION": () => (/* binding */ GL_BLEND_EQUATION),
/* harmony export */   "GL_BLEND_EQUATION_ALPHA": () => (/* binding */ GL_BLEND_EQUATION_ALPHA),
/* harmony export */   "GL_BLEND_EQUATION_RGB": () => (/* binding */ GL_BLEND_EQUATION_RGB),
/* harmony export */   "GL_BLEND_SRC_ALPHA": () => (/* binding */ GL_BLEND_SRC_ALPHA),
/* harmony export */   "GL_BLEND_SRC_RGB": () => (/* binding */ GL_BLEND_SRC_RGB),
/* harmony export */   "GL_BLUE_BITS": () => (/* binding */ GL_BLUE_BITS),
/* harmony export */   "GL_BOOL": () => (/* binding */ GL_BOOL),
/* harmony export */   "GL_BOOL_VEC2": () => (/* binding */ GL_BOOL_VEC2),
/* harmony export */   "GL_BOOL_VEC3": () => (/* binding */ GL_BOOL_VEC3),
/* harmony export */   "GL_BOOL_VEC4": () => (/* binding */ GL_BOOL_VEC4),
/* harmony export */   "GL_BROWSER_DEFAULT_WEBGL": () => (/* binding */ GL_BROWSER_DEFAULT_WEBGL),
/* harmony export */   "GL_BUFFER_SIZE": () => (/* binding */ GL_BUFFER_SIZE),
/* harmony export */   "GL_BUFFER_USAGE": () => (/* binding */ GL_BUFFER_USAGE),
/* harmony export */   "GL_CCW": () => (/* binding */ GL_CCW),
/* harmony export */   "GL_CLAMP_TO_EDGE": () => (/* binding */ GL_CLAMP_TO_EDGE),
/* harmony export */   "GL_COLOR": () => (/* binding */ GL_COLOR),
/* harmony export */   "GL_COLOR_ATTACHMENT0": () => (/* binding */ GL_COLOR_ATTACHMENT0),
/* harmony export */   "GL_COLOR_ATTACHMENT0_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT0_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1": () => (/* binding */ GL_COLOR_ATTACHMENT1),
/* harmony export */   "GL_COLOR_ATTACHMENT10": () => (/* binding */ GL_COLOR_ATTACHMENT10),
/* harmony export */   "GL_COLOR_ATTACHMENT10_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT10_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT11": () => (/* binding */ GL_COLOR_ATTACHMENT11),
/* harmony export */   "GL_COLOR_ATTACHMENT11_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT11_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT12": () => (/* binding */ GL_COLOR_ATTACHMENT12),
/* harmony export */   "GL_COLOR_ATTACHMENT12_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT12_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT13": () => (/* binding */ GL_COLOR_ATTACHMENT13),
/* harmony export */   "GL_COLOR_ATTACHMENT13_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT13_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT14": () => (/* binding */ GL_COLOR_ATTACHMENT14),
/* harmony export */   "GL_COLOR_ATTACHMENT14_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT14_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT15": () => (/* binding */ GL_COLOR_ATTACHMENT15),
/* harmony export */   "GL_COLOR_ATTACHMENT15_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT15_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT1_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT2": () => (/* binding */ GL_COLOR_ATTACHMENT2),
/* harmony export */   "GL_COLOR_ATTACHMENT2_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT2_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT3": () => (/* binding */ GL_COLOR_ATTACHMENT3),
/* harmony export */   "GL_COLOR_ATTACHMENT3_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT3_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT4": () => (/* binding */ GL_COLOR_ATTACHMENT4),
/* harmony export */   "GL_COLOR_ATTACHMENT4_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT4_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT5": () => (/* binding */ GL_COLOR_ATTACHMENT5),
/* harmony export */   "GL_COLOR_ATTACHMENT5_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT5_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT6": () => (/* binding */ GL_COLOR_ATTACHMENT6),
/* harmony export */   "GL_COLOR_ATTACHMENT6_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT6_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT7": () => (/* binding */ GL_COLOR_ATTACHMENT7),
/* harmony export */   "GL_COLOR_ATTACHMENT7_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT7_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT8": () => (/* binding */ GL_COLOR_ATTACHMENT8),
/* harmony export */   "GL_COLOR_ATTACHMENT8_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT8_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT9": () => (/* binding */ GL_COLOR_ATTACHMENT9),
/* harmony export */   "GL_COLOR_ATTACHMENT9_WEBGL": () => (/* binding */ GL_COLOR_ATTACHMENT9_WEBGL),
/* harmony export */   "GL_COLOR_BUFFER_BIT": () => (/* binding */ GL_COLOR_BUFFER_BIT),
/* harmony export */   "GL_COLOR_CLEAR_VALUE": () => (/* binding */ GL_COLOR_CLEAR_VALUE),
/* harmony export */   "GL_COLOR_WRITEMASK": () => (/* binding */ GL_COLOR_WRITEMASK),
/* harmony export */   "GL_COMPARE_REF_TO_TEXTURE": () => (/* binding */ GL_COMPARE_REF_TO_TEXTURE),
/* harmony export */   "GL_COMPILE_STATUS": () => (/* binding */ GL_COMPILE_STATUS),
/* harmony export */   "GL_COMPRESSED_R11_EAC": () => (/* binding */ GL_COMPRESSED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_RG11_EAC": () => (/* binding */ GL_COMPRESSED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_RGB8_ETC2": () => (/* binding */ GL_COMPRESSED_RGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* binding */ GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_RGBA8_ETC2_EAC": () => (/* binding */ GL_COMPRESSED_RGBA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X10_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X5_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X6_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X8_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X10_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X12_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_4X4_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X4_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X5_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X5_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X6_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X5_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X6_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X8_KHR": () => (/* binding */ GL_COMPRESSED_RGBA_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL": () => (/* binding */ GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL": () => (/* binding */ GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG": () => (/* binding */ GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG": () => (/* binding */ GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT1_EXT": () => (/* binding */ GL_COMPRESSED_RGBA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT3_EXT": () => (/* binding */ GL_COMPRESSED_RGBA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT5_EXT": () => (/* binding */ GL_COMPRESSED_RGBA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_RGB_ATC_WEBGL": () => (/* binding */ GL_COMPRESSED_RGB_ATC_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_ETC1_WEBGL": () => (/* binding */ GL_COMPRESSED_RGB_ETC1_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG": () => (/* binding */ GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG": () => (/* binding */ GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_S3TC_DXT1_EXT": () => (/* binding */ GL_COMPRESSED_RGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SIGNED_R11_EAC": () => (/* binding */ GL_COMPRESSED_SIGNED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_SIGNED_RG11_EAC": () => (/* binding */ GL_COMPRESSED_SIGNED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC": () => (/* binding */ GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ETC2": () => (/* binding */ GL_COMPRESSED_SRGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* binding */ GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT": () => (/* binding */ GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT": () => (/* binding */ GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT": () => (/* binding */ GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_S3TC_DXT1_EXT": () => (/* binding */ GL_COMPRESSED_SRGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_TEXTURE_FORMATS": () => (/* binding */ GL_COMPRESSED_TEXTURE_FORMATS),
/* harmony export */   "GL_CONDITION_SATISFIED": () => (/* binding */ GL_CONDITION_SATISFIED),
/* harmony export */   "GL_CONSTANT_ALPHA": () => (/* binding */ GL_CONSTANT_ALPHA),
/* harmony export */   "GL_CONSTANT_COLOR": () => (/* binding */ GL_CONSTANT_COLOR),
/* harmony export */   "GL_CONTEXT_LOST_WEBGL": () => (/* binding */ GL_CONTEXT_LOST_WEBGL),
/* harmony export */   "GL_COPY_READ_BUFFER": () => (/* binding */ GL_COPY_READ_BUFFER),
/* harmony export */   "GL_COPY_READ_BUFFER_BINDING": () => (/* binding */ GL_COPY_READ_BUFFER_BINDING),
/* harmony export */   "GL_COPY_WRITE_BUFFER": () => (/* binding */ GL_COPY_WRITE_BUFFER),
/* harmony export */   "GL_COPY_WRITE_BUFFER_BINDING": () => (/* binding */ GL_COPY_WRITE_BUFFER_BINDING),
/* harmony export */   "GL_CULL_FACE": () => (/* binding */ GL_CULL_FACE),
/* harmony export */   "GL_CULL_FACE_MODE": () => (/* binding */ GL_CULL_FACE_MODE),
/* harmony export */   "GL_CURRENT_PROGRAM": () => (/* binding */ GL_CURRENT_PROGRAM),
/* harmony export */   "GL_CURRENT_QUERY": () => (/* binding */ GL_CURRENT_QUERY),
/* harmony export */   "GL_CURRENT_QUERY_EXT": () => (/* binding */ GL_CURRENT_QUERY_EXT),
/* harmony export */   "GL_CURRENT_VERTEX_ATTRIB": () => (/* binding */ GL_CURRENT_VERTEX_ATTRIB),
/* harmony export */   "GL_CW": () => (/* binding */ GL_CW),
/* harmony export */   "GL_DATA_BYTE": () => (/* binding */ GL_DATA_BYTE),
/* harmony export */   "GL_DATA_FLOAT": () => (/* binding */ GL_DATA_FLOAT),
/* harmony export */   "GL_DATA_INT": () => (/* binding */ GL_DATA_INT),
/* harmony export */   "GL_DATA_SHORT": () => (/* binding */ GL_DATA_SHORT),
/* harmony export */   "GL_DATA_UNSIGNED_BYTE": () => (/* binding */ GL_DATA_UNSIGNED_BYTE),
/* harmony export */   "GL_DATA_UNSIGNED_INT": () => (/* binding */ GL_DATA_UNSIGNED_INT),
/* harmony export */   "GL_DATA_UNSIGNED_SHORT": () => (/* binding */ GL_DATA_UNSIGNED_SHORT),
/* harmony export */   "GL_DECR": () => (/* binding */ GL_DECR),
/* harmony export */   "GL_DECR_WRAP": () => (/* binding */ GL_DECR_WRAP),
/* harmony export */   "GL_DELETE_STATUS": () => (/* binding */ GL_DELETE_STATUS),
/* harmony export */   "GL_DEPTH": () => (/* binding */ GL_DEPTH),
/* harmony export */   "GL_DEPTH24_STENCIL8": () => (/* binding */ GL_DEPTH24_STENCIL8),
/* harmony export */   "GL_DEPTH32F_STENCIL8": () => (/* binding */ GL_DEPTH32F_STENCIL8),
/* harmony export */   "GL_DEPTH_ATTACHMENT": () => (/* binding */ GL_DEPTH_ATTACHMENT),
/* harmony export */   "GL_DEPTH_BITS": () => (/* binding */ GL_DEPTH_BITS),
/* harmony export */   "GL_DEPTH_BUFFER_BIT": () => (/* binding */ GL_DEPTH_BUFFER_BIT),
/* harmony export */   "GL_DEPTH_CLEAR_VALUE": () => (/* binding */ GL_DEPTH_CLEAR_VALUE),
/* harmony export */   "GL_DEPTH_COMPONENT": () => (/* binding */ GL_DEPTH_COMPONENT),
/* harmony export */   "GL_DEPTH_COMPONENT16": () => (/* binding */ GL_DEPTH_COMPONENT16),
/* harmony export */   "GL_DEPTH_COMPONENT24": () => (/* binding */ GL_DEPTH_COMPONENT24),
/* harmony export */   "GL_DEPTH_COMPONENT32F": () => (/* binding */ GL_DEPTH_COMPONENT32F),
/* harmony export */   "GL_DEPTH_FUNC": () => (/* binding */ GL_DEPTH_FUNC),
/* harmony export */   "GL_DEPTH_RANGE": () => (/* binding */ GL_DEPTH_RANGE),
/* harmony export */   "GL_DEPTH_STENCIL": () => (/* binding */ GL_DEPTH_STENCIL),
/* harmony export */   "GL_DEPTH_STENCIL_ATTACHMENT": () => (/* binding */ GL_DEPTH_STENCIL_ATTACHMENT),
/* harmony export */   "GL_DEPTH_TEST": () => (/* binding */ GL_DEPTH_TEST),
/* harmony export */   "GL_DEPTH_WRITEMASK": () => (/* binding */ GL_DEPTH_WRITEMASK),
/* harmony export */   "GL_DITHER": () => (/* binding */ GL_DITHER),
/* harmony export */   "GL_DONT_CARE": () => (/* binding */ GL_DONT_CARE),
/* harmony export */   "GL_DRAW_BUFFER0": () => (/* binding */ GL_DRAW_BUFFER0),
/* harmony export */   "GL_DRAW_BUFFER0_WEBGL": () => (/* binding */ GL_DRAW_BUFFER0_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1": () => (/* binding */ GL_DRAW_BUFFER1),
/* harmony export */   "GL_DRAW_BUFFER10": () => (/* binding */ GL_DRAW_BUFFER10),
/* harmony export */   "GL_DRAW_BUFFER10_WEBGL": () => (/* binding */ GL_DRAW_BUFFER10_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER11": () => (/* binding */ GL_DRAW_BUFFER11),
/* harmony export */   "GL_DRAW_BUFFER11_WEBGL": () => (/* binding */ GL_DRAW_BUFFER11_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER12": () => (/* binding */ GL_DRAW_BUFFER12),
/* harmony export */   "GL_DRAW_BUFFER12_WEBGL": () => (/* binding */ GL_DRAW_BUFFER12_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER13": () => (/* binding */ GL_DRAW_BUFFER13),
/* harmony export */   "GL_DRAW_BUFFER13_WEBGL": () => (/* binding */ GL_DRAW_BUFFER13_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER14": () => (/* binding */ GL_DRAW_BUFFER14),
/* harmony export */   "GL_DRAW_BUFFER14_WEBGL": () => (/* binding */ GL_DRAW_BUFFER14_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER15": () => (/* binding */ GL_DRAW_BUFFER15),
/* harmony export */   "GL_DRAW_BUFFER15_WEBGL": () => (/* binding */ GL_DRAW_BUFFER15_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1_WEBGL": () => (/* binding */ GL_DRAW_BUFFER1_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER2": () => (/* binding */ GL_DRAW_BUFFER2),
/* harmony export */   "GL_DRAW_BUFFER2_WEBGL": () => (/* binding */ GL_DRAW_BUFFER2_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER3": () => (/* binding */ GL_DRAW_BUFFER3),
/* harmony export */   "GL_DRAW_BUFFER3_WEBGL": () => (/* binding */ GL_DRAW_BUFFER3_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER4": () => (/* binding */ GL_DRAW_BUFFER4),
/* harmony export */   "GL_DRAW_BUFFER4_WEBGL": () => (/* binding */ GL_DRAW_BUFFER4_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER5": () => (/* binding */ GL_DRAW_BUFFER5),
/* harmony export */   "GL_DRAW_BUFFER5_WEBGL": () => (/* binding */ GL_DRAW_BUFFER5_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER6": () => (/* binding */ GL_DRAW_BUFFER6),
/* harmony export */   "GL_DRAW_BUFFER6_WEBGL": () => (/* binding */ GL_DRAW_BUFFER6_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER7": () => (/* binding */ GL_DRAW_BUFFER7),
/* harmony export */   "GL_DRAW_BUFFER7_WEBGL": () => (/* binding */ GL_DRAW_BUFFER7_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER8": () => (/* binding */ GL_DRAW_BUFFER8),
/* harmony export */   "GL_DRAW_BUFFER8_WEBGL": () => (/* binding */ GL_DRAW_BUFFER8_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER9": () => (/* binding */ GL_DRAW_BUFFER9),
/* harmony export */   "GL_DRAW_BUFFER9_WEBGL": () => (/* binding */ GL_DRAW_BUFFER9_WEBGL),
/* harmony export */   "GL_DRAW_FRAMEBUFFER": () => (/* binding */ GL_DRAW_FRAMEBUFFER),
/* harmony export */   "GL_DRAW_FRAMEBUFFER_BINDING": () => (/* binding */ GL_DRAW_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_DST_ALPHA": () => (/* binding */ GL_DST_ALPHA),
/* harmony export */   "GL_DST_COLOR": () => (/* binding */ GL_DST_COLOR),
/* harmony export */   "GL_DYNAMIC_COPY": () => (/* binding */ GL_DYNAMIC_COPY),
/* harmony export */   "GL_DYNAMIC_DRAW": () => (/* binding */ GL_DYNAMIC_DRAW),
/* harmony export */   "GL_DYNAMIC_READ": () => (/* binding */ GL_DYNAMIC_READ),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER": () => (/* binding */ GL_ELEMENT_ARRAY_BUFFER),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER_BINDING": () => (/* binding */ GL_ELEMENT_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_EQUAL": () => (/* binding */ GL_EQUAL),
/* harmony export */   "GL_FASTEST": () => (/* binding */ GL_FASTEST),
/* harmony export */   "GL_FLOAT_32_UNSIGNED_INT_24_8_REV": () => (/* binding */ GL_FLOAT_32_UNSIGNED_INT_24_8_REV),
/* harmony export */   "GL_FLOAT_MAT2": () => (/* binding */ GL_FLOAT_MAT2),
/* harmony export */   "GL_FLOAT_MAT2X3": () => (/* binding */ GL_FLOAT_MAT2X3),
/* harmony export */   "GL_FLOAT_MAT2X4": () => (/* binding */ GL_FLOAT_MAT2X4),
/* harmony export */   "GL_FLOAT_MAT3": () => (/* binding */ GL_FLOAT_MAT3),
/* harmony export */   "GL_FLOAT_MAT3X2": () => (/* binding */ GL_FLOAT_MAT3X2),
/* harmony export */   "GL_FLOAT_MAT3X4": () => (/* binding */ GL_FLOAT_MAT3X4),
/* harmony export */   "GL_FLOAT_MAT4": () => (/* binding */ GL_FLOAT_MAT4),
/* harmony export */   "GL_FLOAT_MAT4X2": () => (/* binding */ GL_FLOAT_MAT4X2),
/* harmony export */   "GL_FLOAT_MAT4X3": () => (/* binding */ GL_FLOAT_MAT4X3),
/* harmony export */   "GL_FLOAT_VEC2": () => (/* binding */ GL_FLOAT_VEC2),
/* harmony export */   "GL_FLOAT_VEC3": () => (/* binding */ GL_FLOAT_VEC3),
/* harmony export */   "GL_FLOAT_VEC4": () => (/* binding */ GL_FLOAT_VEC4),
/* harmony export */   "GL_FRAGMENT_SHADER": () => (/* binding */ GL_FRAGMENT_SHADER),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT": () => (/* binding */ GL_FRAGMENT_SHADER_DERIVATIVE_HINT),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES": () => (/* binding */ GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES),
/* harmony export */   "GL_FRAMEBUFFER": () => (/* binding */ GL_FRAMEBUFFER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL": () => (/* binding */ GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL),
/* harmony export */   "GL_FRAMEBUFFER_BINDING": () => (/* binding */ GL_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_FRAMEBUFFER_COMPLETE": () => (/* binding */ GL_FRAMEBUFFER_COMPLETE),
/* harmony export */   "GL_FRAMEBUFFER_DEFAULT": () => (/* binding */ GL_FRAMEBUFFER_DEFAULT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT": () => (/* binding */ GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS": () => (/* binding */ GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT": () => (/* binding */ GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE": () => (/* binding */ GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE),
/* harmony export */   "GL_FRAMEBUFFER_UNSUPPORTED": () => (/* binding */ GL_FRAMEBUFFER_UNSUPPORTED),
/* harmony export */   "GL_FRONT": () => (/* binding */ GL_FRONT),
/* harmony export */   "GL_FRONT_AND_BACK": () => (/* binding */ GL_FRONT_AND_BACK),
/* harmony export */   "GL_FRONT_FACE": () => (/* binding */ GL_FRONT_FACE),
/* harmony export */   "GL_FUNC_ADD": () => (/* binding */ GL_FUNC_ADD),
/* harmony export */   "GL_FUNC_REVERSE_SUBTRACT": () => (/* binding */ GL_FUNC_REVERSE_SUBTRACT),
/* harmony export */   "GL_FUNC_SUBSTRACT": () => (/* binding */ GL_FUNC_SUBSTRACT),
/* harmony export */   "GL_GENERATE_MIPMAP_HINT": () => (/* binding */ GL_GENERATE_MIPMAP_HINT),
/* harmony export */   "GL_GEQUAL": () => (/* binding */ GL_GEQUAL),
/* harmony export */   "GL_GPU_DISJOINT_EXT": () => (/* binding */ GL_GPU_DISJOINT_EXT),
/* harmony export */   "GL_GREATER": () => (/* binding */ GL_GREATER),
/* harmony export */   "GL_GREEN_BITS": () => (/* binding */ GL_GREEN_BITS),
/* harmony export */   "GL_HALF_FLOAT": () => (/* binding */ GL_HALF_FLOAT),
/* harmony export */   "GL_HALF_FLOAT_OES": () => (/* binding */ GL_HALF_FLOAT_OES),
/* harmony export */   "GL_HIGH_FLOAT": () => (/* binding */ GL_HIGH_FLOAT),
/* harmony export */   "GL_HIGH_INT": () => (/* binding */ GL_HIGH_INT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_FORMAT": () => (/* binding */ GL_IMPLEMENTATION_COLOR_READ_FORMAT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_TYPE": () => (/* binding */ GL_IMPLEMENTATION_COLOR_READ_TYPE),
/* harmony export */   "GL_INCR": () => (/* binding */ GL_INCR),
/* harmony export */   "GL_INCR_WRAP": () => (/* binding */ GL_INCR_WRAP),
/* harmony export */   "GL_INTERLEAVED_ATTRIBS": () => (/* binding */ GL_INTERLEAVED_ATTRIBS),
/* harmony export */   "GL_INT_2_10_10_10_REV": () => (/* binding */ GL_INT_2_10_10_10_REV),
/* harmony export */   "GL_INT_SAMPLER_2D": () => (/* binding */ GL_INT_SAMPLER_2D),
/* harmony export */   "GL_INT_SAMPLER_2D_ARRAY": () => (/* binding */ GL_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_INT_SAMPLER_3D": () => (/* binding */ GL_INT_SAMPLER_3D),
/* harmony export */   "GL_INT_SAMPLER_CUBE": () => (/* binding */ GL_INT_SAMPLER_CUBE),
/* harmony export */   "GL_INT_VEC2": () => (/* binding */ GL_INT_VEC2),
/* harmony export */   "GL_INT_VEC3": () => (/* binding */ GL_INT_VEC3),
/* harmony export */   "GL_INT_VEC4": () => (/* binding */ GL_INT_VEC4),
/* harmony export */   "GL_INVALID_ENUM": () => (/* binding */ GL_INVALID_ENUM),
/* harmony export */   "GL_INVALID_FRAMEBUFFER_OPERATION": () => (/* binding */ GL_INVALID_FRAMEBUFFER_OPERATION),
/* harmony export */   "GL_INVALID_INDEX": () => (/* binding */ GL_INVALID_INDEX),
/* harmony export */   "GL_INVALID_OPERATION": () => (/* binding */ GL_INVALID_OPERATION),
/* harmony export */   "GL_INVALID_VALUE": () => (/* binding */ GL_INVALID_VALUE),
/* harmony export */   "GL_INVERT": () => (/* binding */ GL_INVERT),
/* harmony export */   "GL_KEEP": () => (/* binding */ GL_KEEP),
/* harmony export */   "GL_LEQUAL": () => (/* binding */ GL_LEQUAL),
/* harmony export */   "GL_LESS": () => (/* binding */ GL_LESS),
/* harmony export */   "GL_LINEAR": () => (/* binding */ GL_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_LINEAR": () => (/* binding */ GL_LINEAR_MIPMAP_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_NEAREST": () => (/* binding */ GL_LINEAR_MIPMAP_NEAREST),
/* harmony export */   "GL_LINES": () => (/* binding */ GL_LINES),
/* harmony export */   "GL_LINE_LOOP": () => (/* binding */ GL_LINE_LOOP),
/* harmony export */   "GL_LINE_STRIP": () => (/* binding */ GL_LINE_STRIP),
/* harmony export */   "GL_LINE_WIDTH": () => (/* binding */ GL_LINE_WIDTH),
/* harmony export */   "GL_LINK_STATUS": () => (/* binding */ GL_LINK_STATUS),
/* harmony export */   "GL_LOW_FLOAT": () => (/* binding */ GL_LOW_FLOAT),
/* harmony export */   "GL_LOW_INT": () => (/* binding */ GL_LOW_INT),
/* harmony export */   "GL_LUMINANCE": () => (/* binding */ GL_LUMINANCE),
/* harmony export */   "GL_LUMINANCE_ALPHA": () => (/* binding */ GL_LUMINANCE_ALPHA),
/* harmony export */   "GL_MAX": () => (/* binding */ GL_MAX),
/* harmony export */   "GL_MAX_3D_TEXTURE_SIZE": () => (/* binding */ GL_MAX_3D_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_ARRAY_TEXTURE_LAYERS": () => (/* binding */ GL_MAX_ARRAY_TEXTURE_LAYERS),
/* harmony export */   "GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL": () => (/* binding */ GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS": () => (/* binding */ GL_MAX_COLOR_ATTACHMENTS),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS_WEBGL": () => (/* binding */ GL_MAX_COLOR_ATTACHMENTS_WEBGL),
/* harmony export */   "GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS": () => (/* binding */ GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS": () => (/* binding */ GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_COMBINED_UNIFORM_BLOCKS": () => (/* binding */ GL_MAX_COMBINED_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS": () => (/* binding */ GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_CUBE_MAP_TEXTURE_SIZE": () => (/* binding */ GL_MAX_CUBE_MAP_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_DRAW_BUFFERS": () => (/* binding */ GL_MAX_DRAW_BUFFERS),
/* harmony export */   "GL_MAX_DRAW_BUFFERS_WEBGL": () => (/* binding */ GL_MAX_DRAW_BUFFERS_WEBGL),
/* harmony export */   "GL_MAX_ELEMENTS_INDICES": () => (/* binding */ GL_MAX_ELEMENTS_INDICES),
/* harmony export */   "GL_MAX_ELEMENTS_VERTICES": () => (/* binding */ GL_MAX_ELEMENTS_VERTICES),
/* harmony export */   "GL_MAX_ELEMENT_INDEX": () => (/* binding */ GL_MAX_ELEMENT_INDEX),
/* harmony export */   "GL_MAX_EXT": () => (/* binding */ GL_MAX_EXT),
/* harmony export */   "GL_MAX_FRAGMENT_INPUT_COMPONENTS": () => (/* binding */ GL_MAX_FRAGMENT_INPUT_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_BLOCKS": () => (/* binding */ GL_MAX_FRAGMENT_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_COMPONENTS": () => (/* binding */ GL_MAX_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_VECTORS": () => (/* binding */ GL_MAX_FRAGMENT_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_PROGRAM_TEXEL_OFFSET": () => (/* binding */ GL_MAX_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MAX_RENDERBUFFER_SIZE": () => (/* binding */ GL_MAX_RENDERBUFFER_SIZE),
/* harmony export */   "GL_MAX_SAMPLES": () => (/* binding */ GL_MAX_SAMPLES),
/* harmony export */   "GL_MAX_SERVER_WAIT_TIMEOUT": () => (/* binding */ GL_MAX_SERVER_WAIT_TIMEOUT),
/* harmony export */   "GL_MAX_TEXTURE_IMAGE_UNITS": () => (/* binding */ GL_MAX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_TEXTURE_LOD_BIAS": () => (/* binding */ GL_MAX_TEXTURE_LOD_BIAS),
/* harmony export */   "GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* binding */ GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_MAX_TEXTURE_SIZE": () => (/* binding */ GL_MAX_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS": () => (/* binding */ GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS": () => (/* binding */ GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS": () => (/* binding */ GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS),
/* harmony export */   "GL_MAX_UNIFORM_BLOCK_SIZE": () => (/* binding */ GL_MAX_UNIFORM_BLOCK_SIZE),
/* harmony export */   "GL_MAX_UNIFORM_BUFFER_BINDINGS": () => (/* binding */ GL_MAX_UNIFORM_BUFFER_BINDINGS),
/* harmony export */   "GL_MAX_VARYING_COMPONENTS": () => (/* binding */ GL_MAX_VARYING_COMPONENTS),
/* harmony export */   "GL_MAX_VARYING_VECTORS": () => (/* binding */ GL_MAX_VARYING_VECTORS),
/* harmony export */   "GL_MAX_VERTEX_ATTRIBS": () => (/* binding */ GL_MAX_VERTEX_ATTRIBS),
/* harmony export */   "GL_MAX_VERTEX_OUTPUT_COMPONENTS": () => (/* binding */ GL_MAX_VERTEX_OUTPUT_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS": () => (/* binding */ GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_BLOCKS": () => (/* binding */ GL_MAX_VERTEX_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_COMPONENTS": () => (/* binding */ GL_MAX_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_VECTORS": () => (/* binding */ GL_MAX_VERTEX_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_VIEWPORT_DIMS": () => (/* binding */ GL_MAX_VIEWPORT_DIMS),
/* harmony export */   "GL_MEDIUM_FLOAT": () => (/* binding */ GL_MEDIUM_FLOAT),
/* harmony export */   "GL_MEDIUM_INT": () => (/* binding */ GL_MEDIUM_INT),
/* harmony export */   "GL_MIN": () => (/* binding */ GL_MIN),
/* harmony export */   "GL_MIN_EXT": () => (/* binding */ GL_MIN_EXT),
/* harmony export */   "GL_MIN_PROGRAM_TEXEL_OFFSET": () => (/* binding */ GL_MIN_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MIRRORED_REPEAT": () => (/* binding */ GL_MIRRORED_REPEAT),
/* harmony export */   "GL_NEAREST": () => (/* binding */ GL_NEAREST),
/* harmony export */   "GL_NEAREST_MIPMAP_LINEAR": () => (/* binding */ GL_NEAREST_MIPMAP_LINEAR),
/* harmony export */   "GL_NEAREST_MIPMAP_NEAREST": () => (/* binding */ GL_NEAREST_MIPMAP_NEAREST),
/* harmony export */   "GL_NEVER": () => (/* binding */ GL_NEVER),
/* harmony export */   "GL_NICEST": () => (/* binding */ GL_NICEST),
/* harmony export */   "GL_NONE": () => (/* binding */ GL_NONE),
/* harmony export */   "GL_NOTEQUAL": () => (/* binding */ GL_NOTEQUAL),
/* harmony export */   "GL_NO_ERROR": () => (/* binding */ GL_NO_ERROR),
/* harmony export */   "GL_OBJECT_TYPE": () => (/* binding */ GL_OBJECT_TYPE),
/* harmony export */   "GL_ONE": () => (/* binding */ GL_ONE),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_ALPHA": () => (/* binding */ GL_ONE_MINUS_CONSTANT_ALPHA),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_COLOR": () => (/* binding */ GL_ONE_MINUS_CONSTANT_COLOR),
/* harmony export */   "GL_ONE_MINUS_DST_ALPHA": () => (/* binding */ GL_ONE_MINUS_DST_ALPHA),
/* harmony export */   "GL_ONE_MINUS_DST_COLOR": () => (/* binding */ GL_ONE_MINUS_DST_COLOR),
/* harmony export */   "GL_ONE_MINUS_SRC_ALPHA": () => (/* binding */ GL_ONE_MINUS_SRC_ALPHA),
/* harmony export */   "GL_ONE_MINUS_SRC_COLOR": () => (/* binding */ GL_ONE_MINUS_SRC_COLOR),
/* harmony export */   "GL_OUT_OF_MEMORY": () => (/* binding */ GL_OUT_OF_MEMORY),
/* harmony export */   "GL_PACK_ALIGNMENT": () => (/* binding */ GL_PACK_ALIGNMENT),
/* harmony export */   "GL_PACK_ROW_LENGTH": () => (/* binding */ GL_PACK_ROW_LENGTH),
/* harmony export */   "GL_PACK_SKIP_PIXELS": () => (/* binding */ GL_PACK_SKIP_PIXELS),
/* harmony export */   "GL_PACK_SKIP_ROWS": () => (/* binding */ GL_PACK_SKIP_ROWS),
/* harmony export */   "GL_PIXEL_PACK_BUFFER": () => (/* binding */ GL_PIXEL_PACK_BUFFER),
/* harmony export */   "GL_PIXEL_PACK_BUFFER_BINDING": () => (/* binding */ GL_PIXEL_PACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER": () => (/* binding */ GL_PIXEL_UNPACK_BUFFER),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER_BINDING": () => (/* binding */ GL_PIXEL_UNPACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNSIGNED_BYTE": () => (/* binding */ GL_PIXEL_UNSIGNED_BYTE),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_4_4_4_4": () => (/* binding */ GL_PIXEL_UNSIGNED_SHORT_4_4_4_4),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_5_5_1": () => (/* binding */ GL_PIXEL_UNSIGNED_SHORT_5_5_5_1),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_6_5": () => (/* binding */ GL_PIXEL_UNSIGNED_SHORT_5_6_5),
/* harmony export */   "GL_POINTS": () => (/* binding */ GL_POINTS),
/* harmony export */   "GL_POLYGON_OFFSET_FACTOR": () => (/* binding */ GL_POLYGON_OFFSET_FACTOR),
/* harmony export */   "GL_POLYGON_OFFSET_FILL": () => (/* binding */ GL_POLYGON_OFFSET_FILL),
/* harmony export */   "GL_POLYGON_OFFSET_UNITS": () => (/* binding */ GL_POLYGON_OFFSET_UNITS),
/* harmony export */   "GL_QUERY_COUNTER_BITS_EXT": () => (/* binding */ GL_QUERY_COUNTER_BITS_EXT),
/* harmony export */   "GL_QUERY_RESULT": () => (/* binding */ GL_QUERY_RESULT),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE": () => (/* binding */ GL_QUERY_RESULT_AVAILABLE),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE_EXT": () => (/* binding */ GL_QUERY_RESULT_AVAILABLE_EXT),
/* harmony export */   "GL_QUERY_RESULT_EXT": () => (/* binding */ GL_QUERY_RESULT_EXT),
/* harmony export */   "GL_R11F_G11F_B10F": () => (/* binding */ GL_R11F_G11F_B10F),
/* harmony export */   "GL_R16F": () => (/* binding */ GL_R16F),
/* harmony export */   "GL_R16I": () => (/* binding */ GL_R16I),
/* harmony export */   "GL_R16UI": () => (/* binding */ GL_R16UI),
/* harmony export */   "GL_R32F": () => (/* binding */ GL_R32F),
/* harmony export */   "GL_R32I": () => (/* binding */ GL_R32I),
/* harmony export */   "GL_R32UI": () => (/* binding */ GL_R32UI),
/* harmony export */   "GL_R8": () => (/* binding */ GL_R8),
/* harmony export */   "GL_R8I": () => (/* binding */ GL_R8I),
/* harmony export */   "GL_R8UI": () => (/* binding */ GL_R8UI),
/* harmony export */   "GL_R8_SNORM": () => (/* binding */ GL_R8_SNORM),
/* harmony export */   "GL_RASTERIZER_DISCARD": () => (/* binding */ GL_RASTERIZER_DISCARD),
/* harmony export */   "GL_READ_BUFFER": () => (/* binding */ GL_READ_BUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER": () => (/* binding */ GL_READ_FRAMEBUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER_BINDING": () => (/* binding */ GL_READ_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_RED": () => (/* binding */ GL_RED),
/* harmony export */   "GL_RED_BITS": () => (/* binding */ GL_RED_BITS),
/* harmony export */   "GL_RED_INTEGER": () => (/* binding */ GL_RED_INTEGER),
/* harmony export */   "GL_RENDERBUFFER": () => (/* binding */ GL_RENDERBUFFER),
/* harmony export */   "GL_RENDERBUFFER_ALPHA_SIZE": () => (/* binding */ GL_RENDERBUFFER_ALPHA_SIZE),
/* harmony export */   "GL_RENDERBUFFER_BINDING": () => (/* binding */ GL_RENDERBUFFER_BINDING),
/* harmony export */   "GL_RENDERBUFFER_BLUE_SIZE": () => (/* binding */ GL_RENDERBUFFER_BLUE_SIZE),
/* harmony export */   "GL_RENDERBUFFER_DEPTH_SIZE": () => (/* binding */ GL_RENDERBUFFER_DEPTH_SIZE),
/* harmony export */   "GL_RENDERBUFFER_GREEN_SIZE": () => (/* binding */ GL_RENDERBUFFER_GREEN_SIZE),
/* harmony export */   "GL_RENDERBUFFER_HEIGHT": () => (/* binding */ GL_RENDERBUFFER_HEIGHT),
/* harmony export */   "GL_RENDERBUFFER_INTERNAL_FORMAT": () => (/* binding */ GL_RENDERBUFFER_INTERNAL_FORMAT),
/* harmony export */   "GL_RENDERBUFFER_RED_SIZE": () => (/* binding */ GL_RENDERBUFFER_RED_SIZE),
/* harmony export */   "GL_RENDERBUFFER_SAMPLES": () => (/* binding */ GL_RENDERBUFFER_SAMPLES),
/* harmony export */   "GL_RENDERBUFFER_STENCIL_SIZE": () => (/* binding */ GL_RENDERBUFFER_STENCIL_SIZE),
/* harmony export */   "GL_RENDERBUFFER_WIDTH": () => (/* binding */ GL_RENDERBUFFER_WIDTH),
/* harmony export */   "GL_RENDERER": () => (/* binding */ GL_RENDERER),
/* harmony export */   "GL_REPEAT": () => (/* binding */ GL_REPEAT),
/* harmony export */   "GL_REPLACE": () => (/* binding */ GL_REPLACE),
/* harmony export */   "GL_RG": () => (/* binding */ GL_RG),
/* harmony export */   "GL_RG16F": () => (/* binding */ GL_RG16F),
/* harmony export */   "GL_RG16I": () => (/* binding */ GL_RG16I),
/* harmony export */   "GL_RG16UI": () => (/* binding */ GL_RG16UI),
/* harmony export */   "GL_RG32F": () => (/* binding */ GL_RG32F),
/* harmony export */   "GL_RG32I": () => (/* binding */ GL_RG32I),
/* harmony export */   "GL_RG32UI": () => (/* binding */ GL_RG32UI),
/* harmony export */   "GL_RG8": () => (/* binding */ GL_RG8),
/* harmony export */   "GL_RG8I": () => (/* binding */ GL_RG8I),
/* harmony export */   "GL_RG8UI": () => (/* binding */ GL_RG8UI),
/* harmony export */   "GL_RG8_SNORM": () => (/* binding */ GL_RG8_SNORM),
/* harmony export */   "GL_RGB": () => (/* binding */ GL_RGB),
/* harmony export */   "GL_RGB10_A2": () => (/* binding */ GL_RGB10_A2),
/* harmony export */   "GL_RGB10_A2UI": () => (/* binding */ GL_RGB10_A2UI),
/* harmony export */   "GL_RGB16F": () => (/* binding */ GL_RGB16F),
/* harmony export */   "GL_RGB16I": () => (/* binding */ GL_RGB16I),
/* harmony export */   "GL_RGB16UI": () => (/* binding */ GL_RGB16UI),
/* harmony export */   "GL_RGB32F": () => (/* binding */ GL_RGB32F),
/* harmony export */   "GL_RGB32F_EXT": () => (/* binding */ GL_RGB32F_EXT),
/* harmony export */   "GL_RGB32I": () => (/* binding */ GL_RGB32I),
/* harmony export */   "GL_RGB32UI": () => (/* binding */ GL_RGB32UI),
/* harmony export */   "GL_RGB565": () => (/* binding */ GL_RGB565),
/* harmony export */   "GL_RGB5_A1": () => (/* binding */ GL_RGB5_A1),
/* harmony export */   "GL_RGB8": () => (/* binding */ GL_RGB8),
/* harmony export */   "GL_RGB8I": () => (/* binding */ GL_RGB8I),
/* harmony export */   "GL_RGB8UI": () => (/* binding */ GL_RGB8UI),
/* harmony export */   "GL_RGB8_SNORM": () => (/* binding */ GL_RGB8_SNORM),
/* harmony export */   "GL_RGB9_E5": () => (/* binding */ GL_RGB9_E5),
/* harmony export */   "GL_RGBA": () => (/* binding */ GL_RGBA),
/* harmony export */   "GL_RGBA16F": () => (/* binding */ GL_RGBA16F),
/* harmony export */   "GL_RGBA16I": () => (/* binding */ GL_RGBA16I),
/* harmony export */   "GL_RGBA16UI": () => (/* binding */ GL_RGBA16UI),
/* harmony export */   "GL_RGBA32F": () => (/* binding */ GL_RGBA32F),
/* harmony export */   "GL_RGBA32F_EXT": () => (/* binding */ GL_RGBA32F_EXT),
/* harmony export */   "GL_RGBA32I": () => (/* binding */ GL_RGBA32I),
/* harmony export */   "GL_RGBA32UI": () => (/* binding */ GL_RGBA32UI),
/* harmony export */   "GL_RGBA4": () => (/* binding */ GL_RGBA4),
/* harmony export */   "GL_RGBA8": () => (/* binding */ GL_RGBA8),
/* harmony export */   "GL_RGBA8I": () => (/* binding */ GL_RGBA8I),
/* harmony export */   "GL_RGBA8UI": () => (/* binding */ GL_RGBA8UI),
/* harmony export */   "GL_RGBA8_SNORM": () => (/* binding */ GL_RGBA8_SNORM),
/* harmony export */   "GL_RGBA_INTEGER": () => (/* binding */ GL_RGBA_INTEGER),
/* harmony export */   "GL_RGB_INTEGER": () => (/* binding */ GL_RGB_INTEGER),
/* harmony export */   "GL_RG_INTEGER": () => (/* binding */ GL_RG_INTEGER),
/* harmony export */   "GL_SAMPLER_2D": () => (/* binding */ GL_SAMPLER_2D),
/* harmony export */   "GL_SAMPLER_2D_ARRAY": () => (/* binding */ GL_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_SAMPLER_2D_ARRAY_SHADOW": () => (/* binding */ GL_SAMPLER_2D_ARRAY_SHADOW),
/* harmony export */   "GL_SAMPLER_2D_SHADOW": () => (/* binding */ GL_SAMPLER_2D_SHADOW),
/* harmony export */   "GL_SAMPLER_3D": () => (/* binding */ GL_SAMPLER_3D),
/* harmony export */   "GL_SAMPLER_BINDING": () => (/* binding */ GL_SAMPLER_BINDING),
/* harmony export */   "GL_SAMPLER_CUBE": () => (/* binding */ GL_SAMPLER_CUBE),
/* harmony export */   "GL_SAMPLER_CUBE_SHADOW": () => (/* binding */ GL_SAMPLER_CUBE_SHADOW),
/* harmony export */   "GL_SAMPLES": () => (/* binding */ GL_SAMPLES),
/* harmony export */   "GL_SAMPLE_ALPHA_TO_COVERAGE": () => (/* binding */ GL_SAMPLE_ALPHA_TO_COVERAGE),
/* harmony export */   "GL_SAMPLE_BUFFERS": () => (/* binding */ GL_SAMPLE_BUFFERS),
/* harmony export */   "GL_SAMPLE_COVERAGE": () => (/* binding */ GL_SAMPLE_COVERAGE),
/* harmony export */   "GL_SAMPLE_COVERAGE_INVERT": () => (/* binding */ GL_SAMPLE_COVERAGE_INVERT),
/* harmony export */   "GL_SAMPLE_COVERAGE_VALUE": () => (/* binding */ GL_SAMPLE_COVERAGE_VALUE),
/* harmony export */   "GL_SCISSOR_BOX": () => (/* binding */ GL_SCISSOR_BOX),
/* harmony export */   "GL_SCISSOR_TEST": () => (/* binding */ GL_SCISSOR_TEST),
/* harmony export */   "GL_SEPARATE_ATTRIBS": () => (/* binding */ GL_SEPARATE_ATTRIBS),
/* harmony export */   "GL_SHADER_TYPE": () => (/* binding */ GL_SHADER_TYPE),
/* harmony export */   "GL_SHADING_LANGUAGE_VERSION": () => (/* binding */ GL_SHADING_LANGUAGE_VERSION),
/* harmony export */   "GL_SIGNALED": () => (/* binding */ GL_SIGNALED),
/* harmony export */   "GL_SIGNED_NORMALIZED": () => (/* binding */ GL_SIGNED_NORMALIZED),
/* harmony export */   "GL_SRC_ALPHA": () => (/* binding */ GL_SRC_ALPHA),
/* harmony export */   "GL_SRC_ALPHA_SATURATE": () => (/* binding */ GL_SRC_ALPHA_SATURATE),
/* harmony export */   "GL_SRC_COLOR": () => (/* binding */ GL_SRC_COLOR),
/* harmony export */   "GL_SRGB": () => (/* binding */ GL_SRGB),
/* harmony export */   "GL_SRGB8": () => (/* binding */ GL_SRGB8),
/* harmony export */   "GL_SRGB8_ALPHA8": () => (/* binding */ GL_SRGB8_ALPHA8),
/* harmony export */   "GL_SRGB8_ALPHA8_EXT": () => (/* binding */ GL_SRGB8_ALPHA8_EXT),
/* harmony export */   "GL_SRGB_ALPHA_EXT": () => (/* binding */ GL_SRGB_ALPHA_EXT),
/* harmony export */   "GL_SRGB_EXT": () => (/* binding */ GL_SRGB_EXT),
/* harmony export */   "GL_STATIC_COPY": () => (/* binding */ GL_STATIC_COPY),
/* harmony export */   "GL_STATIC_DRAW": () => (/* binding */ GL_STATIC_DRAW),
/* harmony export */   "GL_STATIC_READ": () => (/* binding */ GL_STATIC_READ),
/* harmony export */   "GL_STENCIL": () => (/* binding */ GL_STENCIL),
/* harmony export */   "GL_STENCIL_ATTACHMENT": () => (/* binding */ GL_STENCIL_ATTACHMENT),
/* harmony export */   "GL_STENCIL_BACK_FAIL": () => (/* binding */ GL_STENCIL_BACK_FAIL),
/* harmony export */   "GL_STENCIL_BACK_FUNC": () => (/* binding */ GL_STENCIL_BACK_FUNC),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_FAIL": () => (/* binding */ GL_STENCIL_BACK_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_PASS": () => (/* binding */ GL_STENCIL_BACK_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_BACK_REF": () => (/* binding */ GL_STENCIL_BACK_REF),
/* harmony export */   "GL_STENCIL_BACK_VALUE_MASK": () => (/* binding */ GL_STENCIL_BACK_VALUE_MASK),
/* harmony export */   "GL_STENCIL_BACK_WRITEMASK": () => (/* binding */ GL_STENCIL_BACK_WRITEMASK),
/* harmony export */   "GL_STENCIL_BITS": () => (/* binding */ GL_STENCIL_BITS),
/* harmony export */   "GL_STENCIL_BUFFER_BIT": () => (/* binding */ GL_STENCIL_BUFFER_BIT),
/* harmony export */   "GL_STENCIL_CLEAR_VALUE": () => (/* binding */ GL_STENCIL_CLEAR_VALUE),
/* harmony export */   "GL_STENCIL_FAIL": () => (/* binding */ GL_STENCIL_FAIL),
/* harmony export */   "GL_STENCIL_FUNC": () => (/* binding */ GL_STENCIL_FUNC),
/* harmony export */   "GL_STENCIL_INDEX": () => (/* binding */ GL_STENCIL_INDEX),
/* harmony export */   "GL_STENCIL_INDEX8": () => (/* binding */ GL_STENCIL_INDEX8),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_FAIL": () => (/* binding */ GL_STENCIL_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_PASS": () => (/* binding */ GL_STENCIL_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_REF": () => (/* binding */ GL_STENCIL_REF),
/* harmony export */   "GL_STENCIL_TEST": () => (/* binding */ GL_STENCIL_TEST),
/* harmony export */   "GL_STENCIL_VALUE_MASK": () => (/* binding */ GL_STENCIL_VALUE_MASK),
/* harmony export */   "GL_STENCIL_WRITEMASK": () => (/* binding */ GL_STENCIL_WRITEMASK),
/* harmony export */   "GL_STREAM_COPY": () => (/* binding */ GL_STREAM_COPY),
/* harmony export */   "GL_STREAM_DRAW": () => (/* binding */ GL_STREAM_DRAW),
/* harmony export */   "GL_STREAM_READ": () => (/* binding */ GL_STREAM_READ),
/* harmony export */   "GL_SUBPIXEL_BITS": () => (/* binding */ GL_SUBPIXEL_BITS),
/* harmony export */   "GL_SYNC_CONDITION": () => (/* binding */ GL_SYNC_CONDITION),
/* harmony export */   "GL_SYNC_FENCE": () => (/* binding */ GL_SYNC_FENCE),
/* harmony export */   "GL_SYNC_FLAGS": () => (/* binding */ GL_SYNC_FLAGS),
/* harmony export */   "GL_SYNC_FLUSH_COMMANDS_BIT": () => (/* binding */ GL_SYNC_FLUSH_COMMANDS_BIT),
/* harmony export */   "GL_SYNC_GPU_COMMANDS_COMPLETE": () => (/* binding */ GL_SYNC_GPU_COMMANDS_COMPLETE),
/* harmony export */   "GL_SYNC_STATUS": () => (/* binding */ GL_SYNC_STATUS),
/* harmony export */   "GL_TEXTURE": () => (/* binding */ GL_TEXTURE),
/* harmony export */   "GL_TEXTURE0": () => (/* binding */ GL_TEXTURE0),
/* harmony export */   "GL_TEXTURE1": () => (/* binding */ GL_TEXTURE1),
/* harmony export */   "GL_TEXTURE10": () => (/* binding */ GL_TEXTURE10),
/* harmony export */   "GL_TEXTURE11": () => (/* binding */ GL_TEXTURE11),
/* harmony export */   "GL_TEXTURE12": () => (/* binding */ GL_TEXTURE12),
/* harmony export */   "GL_TEXTURE13": () => (/* binding */ GL_TEXTURE13),
/* harmony export */   "GL_TEXTURE14": () => (/* binding */ GL_TEXTURE14),
/* harmony export */   "GL_TEXTURE15": () => (/* binding */ GL_TEXTURE15),
/* harmony export */   "GL_TEXTURE16": () => (/* binding */ GL_TEXTURE16),
/* harmony export */   "GL_TEXTURE17": () => (/* binding */ GL_TEXTURE17),
/* harmony export */   "GL_TEXTURE18": () => (/* binding */ GL_TEXTURE18),
/* harmony export */   "GL_TEXTURE19": () => (/* binding */ GL_TEXTURE19),
/* harmony export */   "GL_TEXTURE2": () => (/* binding */ GL_TEXTURE2),
/* harmony export */   "GL_TEXTURE20": () => (/* binding */ GL_TEXTURE20),
/* harmony export */   "GL_TEXTURE21": () => (/* binding */ GL_TEXTURE21),
/* harmony export */   "GL_TEXTURE22": () => (/* binding */ GL_TEXTURE22),
/* harmony export */   "GL_TEXTURE23": () => (/* binding */ GL_TEXTURE23),
/* harmony export */   "GL_TEXTURE24": () => (/* binding */ GL_TEXTURE24),
/* harmony export */   "GL_TEXTURE25": () => (/* binding */ GL_TEXTURE25),
/* harmony export */   "GL_TEXTURE26": () => (/* binding */ GL_TEXTURE26),
/* harmony export */   "GL_TEXTURE27": () => (/* binding */ GL_TEXTURE27),
/* harmony export */   "GL_TEXTURE28": () => (/* binding */ GL_TEXTURE28),
/* harmony export */   "GL_TEXTURE29": () => (/* binding */ GL_TEXTURE29),
/* harmony export */   "GL_TEXTURE3": () => (/* binding */ GL_TEXTURE3),
/* harmony export */   "GL_TEXTURE30": () => (/* binding */ GL_TEXTURE30),
/* harmony export */   "GL_TEXTURE31": () => (/* binding */ GL_TEXTURE31),
/* harmony export */   "GL_TEXTURE4": () => (/* binding */ GL_TEXTURE4),
/* harmony export */   "GL_TEXTURE5": () => (/* binding */ GL_TEXTURE5),
/* harmony export */   "GL_TEXTURE6": () => (/* binding */ GL_TEXTURE6),
/* harmony export */   "GL_TEXTURE7": () => (/* binding */ GL_TEXTURE7),
/* harmony export */   "GL_TEXTURE8": () => (/* binding */ GL_TEXTURE8),
/* harmony export */   "GL_TEXTURE9": () => (/* binding */ GL_TEXTURE9),
/* harmony export */   "GL_TEXTURE_2D": () => (/* binding */ GL_TEXTURE_2D),
/* harmony export */   "GL_TEXTURE_2D_ARRAY": () => (/* binding */ GL_TEXTURE_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_3D": () => (/* binding */ GL_TEXTURE_3D),
/* harmony export */   "GL_TEXTURE_BASE_LEVEL": () => (/* binding */ GL_TEXTURE_BASE_LEVEL),
/* harmony export */   "GL_TEXTURE_BINDING_2D": () => (/* binding */ GL_TEXTURE_BINDING_2D),
/* harmony export */   "GL_TEXTURE_BINDING_2D_ARRAY": () => (/* binding */ GL_TEXTURE_BINDING_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_BINDING_3D": () => (/* binding */ GL_TEXTURE_BINDING_3D),
/* harmony export */   "GL_TEXTURE_BINDING_CUBE_MAP": () => (/* binding */ GL_TEXTURE_BINDING_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_COMPARE_FUNC": () => (/* binding */ GL_TEXTURE_COMPARE_FUNC),
/* harmony export */   "GL_TEXTURE_COMPARE_MODE": () => (/* binding */ GL_TEXTURE_COMPARE_MODE),
/* harmony export */   "GL_TEXTURE_CUBE_MAP": () => (/* binding */ GL_TEXTURE_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_X": () => (/* binding */ GL_TEXTURE_CUBE_MAP_NEGATIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Y": () => (/* binding */ GL_TEXTURE_CUBE_MAP_NEGATIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Z": () => (/* binding */ GL_TEXTURE_CUBE_MAP_NEGATIVE_Z),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_X": () => (/* binding */ GL_TEXTURE_CUBE_MAP_POSITIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Y": () => (/* binding */ GL_TEXTURE_CUBE_MAP_POSITIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Z": () => (/* binding */ GL_TEXTURE_CUBE_MAP_POSITIVE_Z),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_FORMAT": () => (/* binding */ GL_TEXTURE_IMMUTABLE_FORMAT),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_LEVELS": () => (/* binding */ GL_TEXTURE_IMMUTABLE_LEVELS),
/* harmony export */   "GL_TEXTURE_MAG_FILTER": () => (/* binding */ GL_TEXTURE_MAG_FILTER),
/* harmony export */   "GL_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* binding */ GL_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_TEXTURE_MAX_LEVEL": () => (/* binding */ GL_TEXTURE_MAX_LEVEL),
/* harmony export */   "GL_TEXTURE_MAX_LOD": () => (/* binding */ GL_TEXTURE_MAX_LOD),
/* harmony export */   "GL_TEXTURE_MIN_FILTER": () => (/* binding */ GL_TEXTURE_MIN_FILTER),
/* harmony export */   "GL_TEXTURE_MIN_LOD": () => (/* binding */ GL_TEXTURE_MIN_LOD),
/* harmony export */   "GL_TEXTURE_WRAP_R": () => (/* binding */ GL_TEXTURE_WRAP_R),
/* harmony export */   "GL_TEXTURE_WRAP_S": () => (/* binding */ GL_TEXTURE_WRAP_S),
/* harmony export */   "GL_TEXTURE_WRAP_T": () => (/* binding */ GL_TEXTURE_WRAP_T),
/* harmony export */   "GL_TIMEOUT_EXPIRED": () => (/* binding */ GL_TIMEOUT_EXPIRED),
/* harmony export */   "GL_TIMEOUT_IGNORED": () => (/* binding */ GL_TIMEOUT_IGNORED),
/* harmony export */   "GL_TIMESTAMP_EXT": () => (/* binding */ GL_TIMESTAMP_EXT),
/* harmony export */   "GL_TIME_ELAPSED_EXT": () => (/* binding */ GL_TIME_ELAPSED_EXT),
/* harmony export */   "GL_TRANSFORM_FEEDBACK": () => (/* binding */ GL_TRANSFORM_FEEDBACK),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_ACTIVE": () => (/* binding */ GL_TRANSFORM_FEEDBACK_ACTIVE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BINDING": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BUFFER),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_BINDING": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BUFFER_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_MODE": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BUFFER_MODE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_SIZE": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BUFFER_SIZE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_START": () => (/* binding */ GL_TRANSFORM_FEEDBACK_BUFFER_START),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PAUSED": () => (/* binding */ GL_TRANSFORM_FEEDBACK_PAUSED),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN": () => (/* binding */ GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_VARYINGS": () => (/* binding */ GL_TRANSFORM_FEEDBACK_VARYINGS),
/* harmony export */   "GL_TRIANGLES": () => (/* binding */ GL_TRIANGLES),
/* harmony export */   "GL_TRIANGLE_FAN": () => (/* binding */ GL_TRIANGLE_FAN),
/* harmony export */   "GL_TRIANGLE_STRIP": () => (/* binding */ GL_TRIANGLE_STRIP),
/* harmony export */   "GL_UNIFORM_ARRAY_STRIDE": () => (/* binding */ GL_UNIFORM_ARRAY_STRIDE),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS": () => (/* binding */ GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES": () => (/* binding */ GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),
/* harmony export */   "GL_UNIFORM_BLOCK_BINDING": () => (/* binding */ GL_UNIFORM_BLOCK_BINDING),
/* harmony export */   "GL_UNIFORM_BLOCK_DATA_SIZE": () => (/* binding */ GL_UNIFORM_BLOCK_DATA_SIZE),
/* harmony export */   "GL_UNIFORM_BLOCK_INDEX": () => (/* binding */ GL_UNIFORM_BLOCK_INDEX),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER": () => (/* binding */ GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER": () => (/* binding */ GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),
/* harmony export */   "GL_UNIFORM_BUFFER": () => (/* binding */ GL_UNIFORM_BUFFER),
/* harmony export */   "GL_UNIFORM_BUFFER_BINDING": () => (/* binding */ GL_UNIFORM_BUFFER_BINDING),
/* harmony export */   "GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT": () => (/* binding */ GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT),
/* harmony export */   "GL_UNIFORM_BUFFER_SIZE": () => (/* binding */ GL_UNIFORM_BUFFER_SIZE),
/* harmony export */   "GL_UNIFORM_BUFFER_START": () => (/* binding */ GL_UNIFORM_BUFFER_START),
/* harmony export */   "GL_UNIFORM_IS_ROW_MAJOR": () => (/* binding */ GL_UNIFORM_IS_ROW_MAJOR),
/* harmony export */   "GL_UNIFORM_MATRIX_STRIDE": () => (/* binding */ GL_UNIFORM_MATRIX_STRIDE),
/* harmony export */   "GL_UNIFORM_OFFSET": () => (/* binding */ GL_UNIFORM_OFFSET),
/* harmony export */   "GL_UNIFORM_SIZE": () => (/* binding */ GL_UNIFORM_SIZE),
/* harmony export */   "GL_UNIFORM_TYPE": () => (/* binding */ GL_UNIFORM_TYPE),
/* harmony export */   "GL_UNMASKED_RENDERER_WEBGL": () => (/* binding */ GL_UNMASKED_RENDERER_WEBGL),
/* harmony export */   "GL_UNMASKED_VENDOR_WEBGL": () => (/* binding */ GL_UNMASKED_VENDOR_WEBGL),
/* harmony export */   "GL_UNPACK_ALIGNMENT": () => (/* binding */ GL_UNPACK_ALIGNMENT),
/* harmony export */   "GL_UNPACK_COLORSPACE_CONVERSION_WEBGL": () => (/* binding */ GL_UNPACK_COLORSPACE_CONVERSION_WEBGL),
/* harmony export */   "GL_UNPACK_FLIP_Y_WEBGL": () => (/* binding */ GL_UNPACK_FLIP_Y_WEBGL),
/* harmony export */   "GL_UNPACK_IMAGE_HEIGHT": () => (/* binding */ GL_UNPACK_IMAGE_HEIGHT),
/* harmony export */   "GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL": () => (/* binding */ GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL),
/* harmony export */   "GL_UNPACK_ROW_LENGTH": () => (/* binding */ GL_UNPACK_ROW_LENGTH),
/* harmony export */   "GL_UNPACK_SKIP_IMAGES": () => (/* binding */ GL_UNPACK_SKIP_IMAGES),
/* harmony export */   "GL_UNPACK_SKIP_PIXELS": () => (/* binding */ GL_UNPACK_SKIP_PIXELS),
/* harmony export */   "GL_UNPACK_SKIP_ROWS": () => (/* binding */ GL_UNPACK_SKIP_ROWS),
/* harmony export */   "GL_UNSIGNALED": () => (/* binding */ GL_UNSIGNALED),
/* harmony export */   "GL_UNSIGNED_INT_10F_11F_11F_REV": () => (/* binding */ GL_UNSIGNED_INT_10F_11F_11F_REV),
/* harmony export */   "GL_UNSIGNED_INT_24_8": () => (/* binding */ GL_UNSIGNED_INT_24_8),
/* harmony export */   "GL_UNSIGNED_INT_24_8_WEBGL": () => (/* binding */ GL_UNSIGNED_INT_24_8_WEBGL),
/* harmony export */   "GL_UNSIGNED_INT_2_10_10_10_REV": () => (/* binding */ GL_UNSIGNED_INT_2_10_10_10_REV),
/* harmony export */   "GL_UNSIGNED_INT_5_9_9_9_REV": () => (/* binding */ GL_UNSIGNED_INT_5_9_9_9_REV),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D": () => (/* binding */ GL_UNSIGNED_INT_SAMPLER_2D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D_ARRAY": () => (/* binding */ GL_UNSIGNED_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_3D": () => (/* binding */ GL_UNSIGNED_INT_SAMPLER_3D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_CUBE": () => (/* binding */ GL_UNSIGNED_INT_SAMPLER_CUBE),
/* harmony export */   "GL_UNSIGNED_INT_VEC2": () => (/* binding */ GL_UNSIGNED_INT_VEC2),
/* harmony export */   "GL_UNSIGNED_INT_VEC3": () => (/* binding */ GL_UNSIGNED_INT_VEC3),
/* harmony export */   "GL_UNSIGNED_INT_VEC4": () => (/* binding */ GL_UNSIGNED_INT_VEC4),
/* harmony export */   "GL_UNSIGNED_NORMALIZED": () => (/* binding */ GL_UNSIGNED_NORMALIZED),
/* harmony export */   "GL_UNSIGNED_NORMALIZED_EXT": () => (/* binding */ GL_UNSIGNED_NORMALIZED_EXT),
/* harmony export */   "GL_VALIDATE_STATUS": () => (/* binding */ GL_VALIDATE_STATUS),
/* harmony export */   "GL_VENDOR": () => (/* binding */ GL_VENDOR),
/* harmony export */   "GL_VERSION": () => (/* binding */ GL_VERSION),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING": () => (/* binding */ GL_VERTEX_ARRAY_BINDING),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING_OES": () => (/* binding */ GL_VERTEX_ARRAY_BINDING_OES),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_DIVISOR),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_ENABLED": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_ENABLED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_INTEGER": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_INTEGER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_NORMALIZED": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_NORMALIZED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_POINTER": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_POINTER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_SIZE": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_SIZE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_STRIDE": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_STRIDE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_TYPE": () => (/* binding */ GL_VERTEX_ATTRIB_ARRAY_TYPE),
/* harmony export */   "GL_VERTEX_SHADER": () => (/* binding */ GL_VERTEX_SHADER),
/* harmony export */   "GL_VIEWPORT": () => (/* binding */ GL_VIEWPORT),
/* harmony export */   "GL_WAIT_FAILED": () => (/* binding */ GL_WAIT_FAILED),
/* harmony export */   "GL_ZERO": () => (/* binding */ GL_ZERO)
/* harmony export */ });
// This is from https://gist.github.com/TimvanScherpenzeel/1f4218a563789db17955a1926c8a8ee0#file-webgl-constants-ts.
// Thank you TimvanScherpenzeel and all contributers!
// ============================================================================================= //
// The following defined constants and descriptions are directly ported from https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Constants.
// Any copyright is dedicated to the Public Domain. http://creativecommons.org/publicdomain/zero/1.0/.
// Contributors
// https://developer.mozilla.org/en-US/profiles/Sheppy
// https://developer.mozilla.org/en-US/profiles/fscholz
// https://developer.mozilla.org/en-US/profiles/AtiX
// https://developer.mozilla.org/en-US/profiles/Sebastianz
// These constants are defined on the WebGLRenderingContext interface.
// Clearing buffers
// Constants passed to WebGLRenderingContext.clear() to clear buffer masks.
/**
 * Passed to clear to clear the current depth buffer.
 * @constant {number}
 */
const GL_DEPTH_BUFFER_BIT = 0x00000100;
/**
 * Passed to clear to clear the current stencil buffer.
 * @constant {number}
 */
const GL_STENCIL_BUFFER_BIT = 0x00000400;
/**
 * Passed to clear to clear the current color buffer.
 * @constant {number}
 */
const GL_COLOR_BUFFER_BIT = 0x00004000;
// Rendering primitives
// Constants passed to WebGLRenderingContext.drawElements() or WebGLRenderingContext.drawArrays() to specify what kind of primitive to render.
/**
 * Passed to drawElements or drawArrays to draw single points.
 * @constant {number}
 */
const GL_POINTS = 0x0000;
/**
 * Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it.
 * @constant {number}
 */
const GL_LINES = 0x0001;
/**
 * Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment.
 * @constant {number}
 */
const GL_LINE_LOOP = 0x0002;
/**
 * Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last.
 * @constant {number}
 */
const GL_LINE_STRIP = 0x0003;
/**
 * Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle.
 * @constant {number}
 */
const GL_TRIANGLES = 0x0004;
/**
 * Passed to drawElements or drawArrays to draw a connected group of triangles.
 * @constant {number}
 */
const GL_TRIANGLE_STRIP = 0x0005;
/**
 * Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan.
 * @constant {number}
 */
const GL_TRIANGLE_FAN = 0x0006;
// Blending modes
// Constants passed to WebGLRenderingContext.blendFunc() or WebGLRenderingContext.blendFuncSeparate() to specify the blending mode (for both, RBG and alpha, or separately).
/**
 * Passed to blendFunc or blendFuncSeparate to turn off a component.
 * @constant {number}
 */
const GL_ZERO = 0;
/**
 * Passed to blendFunc or blendFuncSeparate to turn on a component.
 * @constant {number}
 */
const GL_ONE = 1;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color.
 * @constant {number}
 */
const GL_SRC_COLOR = 0x0300;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color.
 * @constant {number}
 */
const GL_ONE_MINUS_SRC_COLOR = 0x0301;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by the source's alpha.
 * @constant {number}
 */
const GL_SRC_ALPHA = 0x0302;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source's alpha.
 * @constant {number}
 */
const GL_ONE_MINUS_SRC_ALPHA = 0x0303;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's alpha.
 * @constant {number}
 */
const GL_DST_ALPHA = 0x0304;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's alpha.
 * @constant {number}
 */
const GL_ONE_MINUS_DST_ALPHA = 0x0305;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by the destination's color.
 * @constant {number}
 */
const GL_DST_COLOR = 0x0306;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination's color.
 * @constant {number}
 */
const GL_ONE_MINUS_DST_COLOR = 0x0307;
/**
 * Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source's alpha or one minus the destination's alpha.
 * @constant {number}
 */
const GL_SRC_ALPHA_SATURATE = 0x0308;
/**
 * Passed to blendFunc or blendFuncSeparate to specify a constant color blend function.
 * @constant {number}
 */
const GL_CONSTANT_COLOR = 0x8001;
/**
 * Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function.
 * @constant {number}
 */
const GL_ONE_MINUS_CONSTANT_COLOR = 0x8002;
/**
 * Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function.
 * @constant {number}
 */
const GL_CONSTANT_ALPHA = 0x8003;
/**
 * Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function.
 * @constant {number}
 */
const GL_ONE_MINUS_CONSTANT_ALPHA = 0x8004;
// Blending equations
// Constants passed to WebGLRenderingContext.blendEquation() or WebGLRenderingContext.blendEquationSeparate() to control how the blending is calculated (for both, RBG and alpha, or separately).
/**
 * Passed to blendEquation or blendEquationSeparate to set an addition blend function.
 * @constant {number}
 */
const GL_FUNC_ADD = 0x8006;
/**
 * Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination).
 * @constant {number}
 */
const GL_FUNC_SUBSTRACT = 0x800a;
/**
 * Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source).
 * @constant {number}
 */
const GL_FUNC_REVERSE_SUBTRACT = 0x800b;
// Getting GL parameter information
// Constants passed to WebGLRenderingContext.getParameter() to specify what information to return.
/**
 * Passed to getParameter to get the current RGB blend function.
 * @constant {number}
 */
const GL_BLEND_EQUATION = 0x8009;
/**
 * Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION.
 * @constant {number}
 */
const GL_BLEND_EQUATION_RGB = 0x8009;
/**
 * Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION.
 * @constant {number}
 */
const GL_BLEND_EQUATION_ALPHA = 0x883d;
/**
 * Passed to getParameter to get the current destination RGB blend function.
 * @constant {number}
 */
const GL_BLEND_DST_RGB = 0x80c8;
/**
 * Passed to getParameter to get the current source RGB blend function.
 * @constant {number}
 */
const GL_BLEND_SRC_RGB = 0x80c9;
/**
 * Passed to getParameter to get the current destination alpha blend function.
 * @constant {number}
 */
const GL_BLEND_DST_ALPHA = 0x80ca;
/**
 * Passed to getParameter to get the current source alpha blend function.
 * @constant {number}
 */
const GL_BLEND_SRC_ALPHA = 0x80cb;
/**
 * Passed to getParameter to return a the current blend color.
 * @constant {number}
 */
const GL_BLEND_COLOR = 0x8005;
/**
 * Passed to getParameter to get the array buffer binding.
 * @constant {number}
 */
const GL_ARRAY_BUFFER_BINDING = 0x8894;
/**
 * Passed to getParameter to get the current element array buffer.
 * @constant {number}
 */
const GL_ELEMENT_ARRAY_BUFFER_BINDING = 0x8895;
/**
 * Passed to getParameter to get the current lineWidth (set by the lineWidth method).
 * @constant {number}
 */
const GL_LINE_WIDTH = 0x0b21;
/**
 * Passed to getParameter to get the current size of a point drawn with gl.POINTS.
 * @constant {number}
 */
const GL_ALIASED_POINT_SIZE_RANGE = 0x846d;
/**
 * Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1.
 * @constant {number}
 */
const GL_ALIASED_LINE_WIDTH_RANGE = 0x846e;
/**
 * Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK.
 * @constant {number}
 */
const GL_CULL_FACE_MODE = 0x0b45;
/**
 * Passed to getParameter to determine the current value of frontFace. Should return CW or CCW.
 * @constant {number}
 */
const GL_FRONT_FACE = 0x0b46;
/**
 * Passed to getParameter to return a length-2 array of floats giving the current depth range.
 * @constant {number}
 */
const GL_DEPTH_RANGE = 0x0b70;
/**
 * Passed to getParameter to determine if the depth write mask is enabled.
 * @constant {number}
 */
const GL_DEPTH_WRITEMASK = 0x0b72;
/**
 * Passed to getParameter to determine the current depth clear value.
 * @constant {number}
 */
const GL_DEPTH_CLEAR_VALUE = 0x0b73;
/**
 * Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.
 * @constant {number}
 */
const GL_DEPTH_FUNC = 0x0b74;
/**
 * Passed to getParameter to get the value the stencil will be cleared to.
 * @constant {number}
 */
const GL_STENCIL_CLEAR_VALUE = 0x0b91;
/**
 * Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.
 * @constant {number}
 */
const GL_STENCIL_FUNC = 0x0b92;
/**
 * Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.
 * @constant {number}
 */
const GL_STENCIL_FAIL = 0x0b94;
/**
 * Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.
 * @constant {number}
 */
const GL_STENCIL_PASS_DEPTH_FAIL = 0x0b95;
/**
 * Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.
 * @constant {number}
 */
const GL_STENCIL_PASS_DEPTH_PASS = 0x0b96;
/**
 * Passed to getParameter to get the reference value used for stencil tests.
 * @constant {number}
 */
const GL_STENCIL_REF = 0x0b97;
/**
 * @constant {number}
 */
const GL_STENCIL_VALUE_MASK = 0x0b93;
/**
 * @constant {number}
 */
const GL_STENCIL_WRITEMASK = 0x0b98;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_FUNC = 0x8800;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_FAIL = 0x8801;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_PASS_DEPTH_FAIL = 0x8802;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_PASS_DEPTH_PASS = 0x8803;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_REF = 0x8ca3;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_VALUE_MASK = 0x8ca4;
/**
 * @constant {number}
 */
const GL_STENCIL_BACK_WRITEMASK = 0x8ca5;
/**
 * Returns an Int32Array with four elements for the current viewport dimensions.
 * @constant {number}
 */
const GL_VIEWPORT = 0x0ba2;
/**
 * Returns an Int32Array with four elements for the current scissor box dimensions.
 * @constant {number}
 */
const GL_SCISSOR_BOX = 0x0c10;
/**
 * @constant {number}
 */
const GL_COLOR_CLEAR_VALUE = 0x0c22;
/**
 * @constant {number}
 */
const GL_COLOR_WRITEMASK = 0x0c23;
/**
 * @constant {number}
 */
const GL_UNPACK_ALIGNMENT = 0x0cf5;
/**
 * @constant {number}
 */
const GL_PACK_ALIGNMENT = 0x0d05;
/**
 * @constant {number}
 */
const GL_MAX_TEXTURE_SIZE = 0x0d33;
/**
 * @constant {number}
 */
const GL_MAX_VIEWPORT_DIMS = 0x0d3a;
/**
 * @constant {number}
 */
const GL_SUBPIXEL_BITS = 0x0d50;
/**
 * @constant {number}
 */
const GL_RED_BITS = 0x0d52;
/**
 * @constant {number}
 */
const GL_GREEN_BITS = 0x0d53;
/**
 * @constant {number}
 */
const GL_BLUE_BITS = 0x0d54;
/**
 * @constant {number}
 */
const GL_ALPHA_BITS = 0x0d55;
/**
 * @constant {number}
 */
const GL_DEPTH_BITS = 0x0d56;
/**
 * @constant {number}
 */
const GL_STENCIL_BITS = 0x0d57;
/**
 * @constant {number}
 */
const GL_POLYGON_OFFSET_UNITS = 0x2a00;
/**
 * @constant {number}
 */
const GL_POLYGON_OFFSET_FACTOR = 0x8038;
/**
 * @constant {number}
 */
const GL_TEXTURE_BINDING_2D = 0x8069;
/**
 * @constant {number}
 */
const GL_SAMPLE_BUFFERS = 0x80a8;
/**
 * @constant {number}
 */
const GL_SAMPLES = 0x80a9;
/**
 * @constant {number}
 */
const GL_SAMPLE_COVERAGE_VALUE = 0x80aa;
/**
 * @constant {number}
 */
const GL_SAMPLE_COVERAGE_INVERT = 0x80ab;
/**
 * @constant {number}
 */
const GL_COMPRESSED_TEXTURE_FORMATS = 0x86a3;
/**
 * @constant {number}
 */
const GL_VENDOR = 0x1f00;
/**
 * @constant {number}
 */
const GL_RENDERER = 0x1f01;
/**
 * @constant {number}
 */
const GL_VERSION = 0x1f02;
/**
 * @constant {number}
 */
const GL_IMPLEMENTATION_COLOR_READ_TYPE = 0x8b9a;
/**
 * @constant {number}
 */
const GL_IMPLEMENTATION_COLOR_READ_FORMAT = 0x8b9b;
/**
 * @constant {number}
 */
const GL_BROWSER_DEFAULT_WEBGL = 0x9244;
// Buffers
// Constants passed to WebGLRenderingContext.bufferData(), WebGLRenderingContext.bufferSubData(), WebGLRenderingContext.bindBuffer(), or WebGLRenderingContext.getBufferParameter().
/**
 * Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often.
 * @constant {number}
 */
const GL_STATIC_DRAW = 0x88e4;
/**
 * Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often.
 * @constant {number}
 */
const GL_STREAM_DRAW = 0x88e0;
/**
 * Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often.
 * @constant {number}
 */
const GL_DYNAMIC_DRAW = 0x88e8;
/**
 * Passed to bindBuffer or bufferData to specify the type of buffer being used.
 * @constant {number}
 */
const GL_ARRAY_BUFFER = 0x8892;
/**
 * Passed to bindBuffer or bufferData to specify the type of buffer being used.
 * @constant {number}
 */
const GL_ELEMENT_ARRAY_BUFFER = 0x8893;
/**
 * Passed to getBufferParameter to get a buffer's size.
 * @constant {number}
 */
const GL_BUFFER_SIZE = 0x8764;
/**
 * Passed to getBufferParameter to get the hint for the buffer passed in when it was created.
 * @constant {number}
 */
const GL_BUFFER_USAGE = 0x8765;
// Vertex attributes
// Constants passed to WebGLRenderingContext.getVertexAttrib().
/**
 * Passed to getVertexAttrib to read back the current vertex attribute.
 * @constant {number}
 */
const GL_CURRENT_VERTEX_ATTRIB = 0x8626;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_ENABLED = 0x8622;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_SIZE = 0x8623;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_STRIDE = 0x8624;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_TYPE = 0x8625;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_NORMALIZED = 0x886a;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_POINTER = 0x8645;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889f;
// Culling
// Constants passed to WebGLRenderingContext.cullFace().
/**
 * Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method.
 * @constant {number}
 */
const GL_CULL_FACE = 0x0b44;
/**
 * Passed to cullFace to specify that only front faces should be culled.
 * @constant {number}
 */
const GL_FRONT = 0x0404;
/**
 * Passed to cullFace to specify that only back faces should be culled.
 * @constant {number}
 */
const GL_BACK = 0x0405;
/**
 * Passed to cullFace to specify that front and back faces should be culled.
 * @constant {number}
 */
const GL_FRONT_AND_BACK = 0x0408;
// Enabling and disabling
// Constants passed to WebGLRenderingContext.enable() or WebGLRenderingContext.disable().
/**
 * Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method.
 * @constant {number}
 */
const GL_BLEND = 0x0be2;
/**
 * Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test.
 * @constant {number}
 */
const GL_DEPTH_TEST = 0x0b71;
/**
 * Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method.
 * @constant {number}
 */
const GL_DITHER = 0x0bd0;
/**
 * Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test.
 * @constant {number}
 */
const GL_POLYGON_OFFSET_FILL = 0x8037;
/**
 * Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels.
 * @constant {number}
 */
const GL_SAMPLE_ALPHA_TO_COVERAGE = 0x809e;
/**
 * Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling.
 * @constant {number}
 */
const GL_SAMPLE_COVERAGE = 0x80a0;
/**
 * Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test.
 * @constant {number}
 */
const GL_SCISSOR_TEST = 0x0c11;
/**
 * Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test.
 * @constant {number}
 */
const GL_STENCIL_TEST = 0x0b90;
// Errors
// Constants returned from WebGLRenderingContext.getError().
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_NO_ERROR = 0;
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_INVALID_ENUM = 0x0500;
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_INVALID_VALUE = 0x0501;
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_INVALID_OPERATION = 0x0502;
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_OUT_OF_MEMORY = 0x0505;
/**
 * Returned from getError.
 * @constant {number}
 */
const GL_CONTEXT_LOST_WEBGL = 0x9242;
// Front face directions
// Constants passed to WebGLRenderingContext.frontFace().
/**
 * Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction,
 * @constant {number}
 */
const GL_CW = 0x0900;
/**
 * Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction.
 * @constant {number}
 */
const GL_CCW = 0x0901;
// Hints
// Constants passed to WebGLRenderingContext.hint().
/**
 * There is no preference for this behavior.
 * @constant {number}
 */
const GL_DONT_CARE = 0x1100;
/**
 * The most efficient behavior should be used.
 * @constant {number}
 */
const GL_FASTEST = 0x1101;
/**
 * The most correct or the highest quality option should be used.
 * @constant {number}
 */
const GL_NICEST = 0x1102;
/**
 * Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap().
 * @constant {number}
 */
const GL_GENERATE_MIPMAP_HINT = 0x8192;
// Data types
/**
 * @constant {number}
 */
const GL_DATA_BYTE = 0x1400;
/**
 * @constant {number}
 */
const GL_DATA_UNSIGNED_BYTE = 0x1401;
/**
 * @constant {number}
 */
const GL_DATA_SHORT = 0x1402;
/**
 * @constant {number}
 */
const GL_DATA_UNSIGNED_SHORT = 0x1403;
/**
 * @constant {number}
 */
const GL_DATA_INT = 0x1404;
/**
 * @constant {number}
 */
const GL_DATA_UNSIGNED_INT = 0x1405;
/**
 * @constant {number}
 */
const GL_DATA_FLOAT = 0x1406;
// Pixel formats
/**
 * @constant {number}
 */
const GL_DEPTH_COMPONENT = 0x1902;
/**
 * @constant {number}
 */
const GL_ALPHA = 0x1906;
/**
 * @constant {number}
 */
const GL_RGB = 0x1907;
/**
 * @constant {number}
 */
const GL_RGBA = 0x1908;
/**
 * @constant {number}
 */
const GL_LUMINANCE = 0x1909;
/**
 * @constant {number}
 */
const GL_LUMINANCE_ALPHA = 0x190a;
// Pixel types
/**
 * @constant {number}
 */
const GL_PIXEL_UNSIGNED_BYTE = 0x1401;
/**
 * @constant {number}
 */
const GL_PIXEL_UNSIGNED_SHORT_4_4_4_4 = 0x8033;
/**
 * @constant {number}
 */
const GL_PIXEL_UNSIGNED_SHORT_5_5_5_1 = 0x8034;
/**
 * @constant {number}
 */
const GL_PIXEL_UNSIGNED_SHORT_5_6_5 = 0x8363;
// Shaders
// Constants passed to WebGLRenderingContext.getShaderParameter().
/**
 * Passed to createShader to define a fragment shader.
 * @constant {number}
 */
const GL_FRAGMENT_SHADER = 0x8b30;
/**
 * Passed to createShader to define a vertex shader.
 * @constant {number}
 */
const GL_VERTEX_SHADER = 0x8b31;
/**
 * Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error.
 * @constant {number}
 */
const GL_COMPILE_STATUS = 0x8b81;
/**
 * Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise.
 * @constant {number}
 */
const GL_DELETE_STATUS = 0x8b80;
/**
 * Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error.
 * @constant {number}
 */
const GL_LINK_STATUS = 0x8b82;
/**
 * Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found.
 * @constant {number}
 */
const GL_VALIDATE_STATUS = 0x8b83;
/**
 * Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred.
 * @constant {number}
 */
const GL_ATTACHED_SHADERS = 0x8b85;
/**
 * Passed to getProgramParameter to get the number of attributes active in a program.
 * @constant {number}
 */
const GL_ACTIVE_ATTRIBUTES = 0x8b89;
/**
 * Passed to getProgramParamter to get the number of uniforms active in a program.
 * @constant {number}
 */
const GL_ACTIVE_UNIFORMS = 0x8b86;
/**
 * The maximum number of entries possible in the vertex attribute list.
 * @constant {number}
 */
const GL_MAX_VERTEX_ATTRIBS = 0x8869;
/**
 * @constant {number}
 */
const GL_MAX_VERTEX_UNIFORM_VECTORS = 0x8dfb;
/**
 * @constant {number}
 */
const GL_MAX_VARYING_VECTORS = 0x8dfc;
/**
 * @constant {number}
 */
const GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8b4d;
/**
 * @constant {number}
 */
const GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8b4c;
/**
 * Implementation dependent number of maximum texture units. At least 8.
 * @constant {number}
 */
const GL_MAX_TEXTURE_IMAGE_UNITS = 0x8872;
/**
 * @constant {number}
 */
const GL_MAX_FRAGMENT_UNIFORM_VECTORS = 0x8dfd;
/**
 * @constant {number}
 */
const GL_SHADER_TYPE = 0x8b4f;
/**
 * @constant {number}
 */
const GL_SHADING_LANGUAGE_VERSION = 0x8b8c;
/**
 * @constant {number}
 */
const GL_CURRENT_PROGRAM = 0x8b8d;
// Depth or stencil tests
// Constants passed to WebGLRenderingContext.stencilFunc().
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn.
 * @constant {number}
 */
const GL_NEVER = 0x0200;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn.
 * @constant {number}
 */
const GL_ALWAYS = 0x0207;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value.
 * @constant {number}
 */
const GL_LESS = 0x0201;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value.
 * @constant {number}
 */
const GL_EQUAL = 0x0202;
/**
 *  Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value.
 * @constant {number}
 */
const GL_LEQUAL = 0x0203;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value.
 * @constant {number}
 */
const GL_GREATER = 0x0204;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value.
 * @constant {number}
 */
const GL_GEQUAL = 0x0206;
/**
 * Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value.
 * @constant {number}
 */
const GL_NOTEQUAL = 0x0205;
// Stencil actions
// Constants passed to WebGLRenderingContext.stencilOp().
/**
 * @constant {number}
 */
const GL_KEEP = 0x1e00;
/**
 * @constant {number}
 */
const GL_REPLACE = 0x1e01;
/**
 * @constant {number}
 */
const GL_INCR = 0x1e02;
/**
 * @constant {number}
 */
const GL_DECR = 0x1e03;
/**
 * @constant {number}
 */
const GL_INVERT = 0x150a;
/**
 * @constant {number}
 */
const GL_INCR_WRAP = 0x8507;
/**
 * @constant {number}
 */
const GL_DECR_WRAP = 0x8508;
// Textures
// Constants passed to WebGLRenderingContext.texParameteri(), WebGLRenderingContext.texParameterf(), WebGLRenderingContext.bindTexture(), WebGLRenderingContext.texImage2D(), and others.
/**
 * @constant {number}
 */
const GL_NEAREST = 0x2600;
/**
 * @constant {number}
 */
const GL_LINEAR = 0x2601;
/**
 * @constant {number}
 */
const GL_NEAREST_MIPMAP_NEAREST = 0x2700;
/**
 * @constant {number}
 */
const GL_LINEAR_MIPMAP_NEAREST = 0x2701;
/**
 * @constant {number}
 */
const GL_NEAREST_MIPMAP_LINEAR = 0x2702;
/**
 * @constant {number}
 */
const GL_LINEAR_MIPMAP_LINEAR = 0x2703;
/**
 * @constant {number}
 */
const GL_TEXTURE_MAG_FILTER = 0x2800;
/**
 * @constant {number}
 */
const GL_TEXTURE_MIN_FILTER = 0x2801;
/**
 * @constant {number}
 */
const GL_TEXTURE_WRAP_S = 0x2802;
/**
 * @constant {number}
 */
const GL_TEXTURE_WRAP_T = 0x2803;
/**
 * @constant {number}
 */
const GL_TEXTURE_2D = 0x0de1;
/**
 * @constant {number}
 */
const GL_TEXTURE = 0x1702;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP = 0x8513;
/**
 * @constant {number}
 */
const GL_TEXTURE_BINDING_CUBE_MAP = 0x8514;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_NEGATIVE_X = 0x8516;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_POSITIVE_Y = 0x8517;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_NEGATIVE_Y = 0x8518;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_POSITIVE_Z = 0x8519;
/**
 * @constant {number}
 */
const GL_TEXTURE_CUBE_MAP_NEGATIVE_Z = 0x851a;
/**
 * @constant {number}
 */
const GL_MAX_CUBE_MAP_TEXTURE_SIZE = 0x851c;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE0 = 0x84c0;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE1 = 0x84c1;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE2 = 0x84c2;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE3 = 0x84c3;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE4 = 0x84c4;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE5 = 0x84c5;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE6 = 0x84c6;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE7 = 0x84c7;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE8 = 0x84c8;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE9 = 0x84c9;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE10 = 0x84ca;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE11 = 0x84cb;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE12 = 0x84cc;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE13 = 0x84cd;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE14 = 0x84ce;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE15 = 0x84cf;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE16 = 0x84d0;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE17 = 0x84d1;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE18 = 0x84d2;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE19 = 0x84d3;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE20 = 0x84d4;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE21 = 0x84d5;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE22 = 0x84d6;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE23 = 0x84d7;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE24 = 0x84d8;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE25 = 0x84d9;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE26 = 0x84da;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE27 = 0x84db;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE28 = 0x84dc;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE29 = 0x84dd;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE30 = 0x84de;
/**
 * A texture unit.
 * @constant {number}
 */
const GL_TEXTURE31 = 0x84df;
/**
 * The current active texture unit.
 * @constant {number}
 */
const GL_ACTIVE_TEXTURE = 0x84e0;
/**
 * @constant {number}
 */
const GL_REPEAT = 0x2901;
/**
 * @constant {number}
 */
const GL_CLAMP_TO_EDGE = 0x812f;
/**
 * @constant {number}
 */
const GL_MIRRORED_REPEAT = 0x8370;
// Uniform types
/**
 * @constant {number}
 */
const GL_FLOAT_VEC2 = 0x8b50;
/**
 * @constant {number}
 */
const GL_FLOAT_VEC3 = 0x8b51;
/**
 * @constant {number}
 */
const GL_FLOAT_VEC4 = 0x8b52;
/**
 * @constant {number}
 */
const GL_INT_VEC2 = 0x8b53;
/**
 * @constant {number}
 */
const GL_INT_VEC3 = 0x8b54;
/**
 * @constant {number}
 */
const GL_INT_VEC4 = 0x8b55;
/**
 * @constant {number}
 */
const GL_BOOL = 0x8b56;
/**
 * @constant {number}
 */
const GL_BOOL_VEC2 = 0x8b57;
/**
 * @constant {number}
 */
const GL_BOOL_VEC3 = 0x8b58;
/**
 * @constant {number}
 */
const GL_BOOL_VEC4 = 0x8b59;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT2 = 0x8b5a;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT3 = 0x8b5b;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT4 = 0x8b5c;
/**
 * @constant {number}
 */
const GL_SAMPLER_2D = 0x8b5e;
/**
 * @constant {number}
 */
const GL_SAMPLER_CUBE = 0x8b60;
// Shader precision-specified types
/**
 * @constant {number}
 */
const GL_LOW_FLOAT = 0x8df0;
/**
 * @constant {number}
 */
const GL_MEDIUM_FLOAT = 0x8df1;
/**
 * @constant {number}
 */
const GL_HIGH_FLOAT = 0x8df2;
/**
 * @constant {number}
 */
const GL_LOW_INT = 0x8df3;
/**
 * @constant {number}
 */
const GL_MEDIUM_INT = 0x8df4;
/**
 * @constant {number}
 */
const GL_HIGH_INT = 0x8df5;
// Framebuffers and renderbuffers
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER = 0x8d40;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER = 0x8d41;
/**
 * @constant {number}
 */
const GL_RGBA4 = 0x8056;
/**
 * @constant {number}
 */
const GL_RGB5_A1 = 0x8057;
/**
 * @constant {number}
 */
const GL_RGB565 = 0x8d62;
/**
 * @constant {number}
 */
const GL_DEPTH_COMPONENT16 = 0x81a5;
/**
 * @constant {number}
 */
const GL_STENCIL_INDEX = 0x1901;
/**
 * @constant {number}
 */
const GL_STENCIL_INDEX8 = 0x8d48;
/**
 * @constant {number}
 */
const GL_DEPTH_STENCIL = 0x84f9;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_WIDTH = 0x8d42;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_HEIGHT = 0x8d43;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_INTERNAL_FORMAT = 0x8d44;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_RED_SIZE = 0x8d50;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_GREEN_SIZE = 0x8d51;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_BLUE_SIZE = 0x8d52;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_ALPHA_SIZE = 0x8d53;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_DEPTH_SIZE = 0x8d54;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_STENCIL_SIZE = 0x8d55;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 0x8cd0;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 0x8cd1;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 0x8cd2;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8cd3;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT0 = 0x8ce0;
/**
 * @constant {number}
 */
const GL_DEPTH_ATTACHMENT = 0x8d00;
/**
 * @constant {number}
 */
const GL_STENCIL_ATTACHMENT = 0x8d20;
/**
 * @constant {number}
 */
const GL_DEPTH_STENCIL_ATTACHMENT = 0x821a;
/**
 * @constant {number}
 */
const GL_NONE = 0;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_COMPLETE = 0x8cd5;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8cd6;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8cd7;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8cd9;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_UNSUPPORTED = 0x8cdd;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_BINDING = 0x8ca6;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_BINDING = 0x8ca7;
/**
 * @constant {number}
 */
const GL_MAX_RENDERBUFFER_SIZE = 0x84e8;
/**
 * @constant {number}
 */
const GL_INVALID_FRAMEBUFFER_OPERATION = 0x0506;
// Pixel storage modes
// Constants passed to WebGLRenderingContext.pixelStorei().
/**
 * @constant {number}
 */
const GL_UNPACK_FLIP_Y_WEBGL = 0x9240;
/**
 * @constant {number}
 */
const GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241;
/**
 * @constant {number}
 */
const GL_UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;
// Additional constants defined WebGL 2
// These constants are defined on the WebGL2RenderingContext interface. All WebGL 1 constants are also available in a WebGL 2 context.
// Getting GL parameter information
// Constants passed to WebGLRenderingContext.getParameter() to specify what information to return.
/**
 * @constant {number}
 */
const GL_READ_BUFFER = 0x0c02;
/**
 * @constant {number}
 */
const GL_UNPACK_ROW_LENGTH = 0x0cf2;
/**
 * @constant {number}
 */
const GL_UNPACK_SKIP_ROWS = 0x0cf3;
/**
 * @constant {number}
 */
const GL_UNPACK_SKIP_PIXELS = 0x0cf4;
/**
 * @constant {number}
 */
const GL_PACK_ROW_LENGTH = 0x0d02;
/**
 * @constant {number}
 */
const GL_PACK_SKIP_ROWS = 0x0d03;
/**
 * @constant {number}
 */
const GL_PACK_SKIP_PIXELS = 0x0d04;
/**
 * @constant {number}
 */
const GL_TEXTURE_BINDING_3D = 0x806a;
/**
 * @constant {number}
 */
const GL_UNPACK_SKIP_IMAGES = 0x806d;
/**
 * @constant {number}
 */
const GL_UNPACK_IMAGE_HEIGHT = 0x806e;
/**
 * @constant {number}
 */
const GL_MAX_3D_TEXTURE_SIZE = 0x8073;
/**
 * @constant {number}
 */
const GL_MAX_ELEMENTS_VERTICES = 0x80e8;
/**
 * @constant {number}
 */
const GL_MAX_ELEMENTS_INDICES = 0x80e9;
/**
 * @constant {number}
 */
const GL_MAX_TEXTURE_LOD_BIAS = 0x84fd;
/**
 * @constant {number}
 */
const GL_MAX_FRAGMENT_UNIFORM_COMPONENTS = 0x8b49;
/**
 * @constant {number}
 */
const GL_MAX_VERTEX_UNIFORM_COMPONENTS = 0x8b4a;
/**
 * @constant {number}
 */
const GL_MAX_ARRAY_TEXTURE_LAYERS = 0x88ff;
/**
 * @constant {number}
 */
const GL_MIN_PROGRAM_TEXEL_OFFSET = 0x8904;
/**
 * @constant {number}
 */
const GL_MAX_PROGRAM_TEXEL_OFFSET = 0x8905;
/**
 * @constant {number}
 */
const GL_MAX_VARYING_COMPONENTS = 0x8b4b;
/**
 * @constant {number}
 */
const GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;
/**
 * @constant {number}
 */
const GL_RASTERIZER_DISCARD = 0x8c89;
/**
 * @constant {number}
 */
const GL_VERTEX_ARRAY_BINDING = 0x85b5;
/**
 * @constant {number}
 */
const GL_MAX_VERTEX_OUTPUT_COMPONENTS = 0x9122;
/**
 * @constant {number}
 */
const GL_MAX_FRAGMENT_INPUT_COMPONENTS = 0x9125;
/**
 * @constant {number}
 */
const GL_MAX_SERVER_WAIT_TIMEOUT = 0x9111;
/**
 * @constant {number}
 */
const GL_MAX_ELEMENT_INDEX = 0x8d6b;
// Textures
// Constants passed to WebGLRenderingContext.texParameteri(), WebGLRenderingContext.texParameterf(), WebGLRenderingContext.bindTexture(), WebGLRenderingContext.texImage2D(), and others.
/**
 * @constant {number}
 */
const GL_RED = 0x1903;
/**
 * @constant {number}
 */
const GL_RGB8 = 0x8051;
/**
 * @constant {number}
 */
const GL_RGBA8 = 0x8058;
/**
 * @constant {number}
 */
const GL_RGB10_A2 = 0x8059;
/**
 * @constant {number}
 */
const GL_TEXTURE_3D = 0x806f;
/**
 * @constant {number}
 */
const GL_TEXTURE_WRAP_R = 0x8072;
/**
 * @constant {number}
 */
const GL_TEXTURE_MIN_LOD = 0x813a;
/**
 * @constant {number}
 */
const GL_TEXTURE_MAX_LOD = 0x813b;
/**
 * @constant {number}
 */
const GL_TEXTURE_BASE_LEVEL = 0x813c;
/**
 * @constant {number}
 */
const GL_TEXTURE_MAX_LEVEL = 0x813d;
/**
 * @constant {number}
 */
const GL_TEXTURE_COMPARE_MODE = 0x884c;
/**
 * @constant {number}
 */
const GL_TEXTURE_COMPARE_FUNC = 0x884d;
/**
 * @constant {number}
 */
const GL_SRGB = 0x8c40;
/**
 * @constant {number}
 */
const GL_SRGB8 = 0x8c41;
/**
 * @constant {number}
 */
const GL_SRGB8_ALPHA8 = 0x8c43;
/**
 * @constant {number}
 */
const GL_COMPARE_REF_TO_TEXTURE = 0x884e;
/**
 * @constant {number}
 */
const GL_RGBA32F = 0x8814;
/**
 * @constant {number}
 */
const GL_RGB32F = 0x8815;
/**
 * @constant {number}
 */
const GL_RGBA16F = 0x881a;
/**
 * @constant {number}
 */
const GL_RGB16F = 0x881b;
/**
 * @constant {number}
 */
const GL_TEXTURE_2D_ARRAY = 0x8c1a;
/**
 * @constant {number}
 */
const GL_TEXTURE_BINDING_2D_ARRAY = 0x8c1d;
/**
 * @constant {number}
 */
const GL_R11F_G11F_B10F = 0x8c3a;
/**
 * @constant {number}
 */
const GL_RGB9_E5 = 0x8c3d;
/**
 * @constant {number}
 */
const GL_RGBA32UI = 0x8d70;
/**
 * @constant {number}
 */
const GL_RGB32UI = 0x8d71;
/**
 * @constant {number}
 */
const GL_RGBA16UI = 0x8d76;
/**
 * @constant {number}
 */
const GL_RGB16UI = 0x8d77;
/**
 * @constant {number}
 */
const GL_RGBA8UI = 0x8d7c;
/**
 * @constant {number}
 */
const GL_RGB8UI = 0x8d7d;
/**
 * @constant {number}
 */
const GL_RGBA32I = 0x8d82;
/**
 * @constant {number}
 */
const GL_RGB32I = 0x8d83;
/**
 * @constant {number}
 */
const GL_RGBA16I = 0x8d88;
/**
 * @constant {number}
 */
const GL_RGB16I = 0x8d89;
/**
 * @constant {number}
 */
const GL_RGBA8I = 0x8d8e;
/**
 * @constant {number}
 */
const GL_RGB8I = 0x8d8f;
/**
 * @constant {number}
 */
const GL_RED_INTEGER = 0x8d94;
/**
 * @constant {number}
 */
const GL_RGB_INTEGER = 0x8d98;
/**
 * @constant {number}
 */
const GL_RGBA_INTEGER = 0x8d99;
/**
 * @constant {number}
 */
const GL_R8 = 0x8229;
/**
 * @constant {number}
 */
const GL_RG8 = 0x822b;
/**
 * @constant {number}
 */
const GL_R16F = 0x822d;
/**
 * @constant {number}
 */
const GL_R32F = 0x822e;
/**
 * @constant {number}
 */
const GL_RG16F = 0x822f;
/**
 * @constant {number}
 */
const GL_RG32F = 0x8230;
/**
 * @constant {number}
 */
const GL_R8I = 0x8231;
/**
 * @constant {number}
 */
const GL_R8UI = 0x8232;
/**
 * @constant {number}
 */
const GL_R16I = 0x8233;
/**
 * @constant {number}
 */
const GL_R16UI = 0x8234;
/**
 * @constant {number}
 */
const GL_R32I = 0x8235;
/**
 * @constant {number}
 */
const GL_R32UI = 0x8236;
/**
 * @constant {number}
 */
const GL_RG8I = 0x8237;
/**
 * @constant {number}
 */
const GL_RG8UI = 0x8238;
/**
 * @constant {number}
 */
const GL_RG16I = 0x8239;
/**
 * @constant {number}
 */
const GL_RG16UI = 0x823a;
/**
 * @constant {number}
 */
const GL_RG32I = 0x823b;
/**
 * @constant {number}
 */
const GL_RG32UI = 0x823c;
/**
 * @constant {number}
 */
const GL_R8_SNORM = 0x8f94;
/**
 * @constant {number}
 */
const GL_RG8_SNORM = 0x8f95;
/**
 * @constant {number}
 */
const GL_RGB8_SNORM = 0x8f96;
/**
 * @constant {number}
 */
const GL_RGBA8_SNORM = 0x8f97;
/**
 * @constant {number}
 */
const GL_RGB10_A2UI = 0x906f;
/**
 * @constant {number}
 */
const GL_TEXTURE_IMMUTABLE_FORMAT = 0x912f;
/**
 * @constant {number}
 */
const GL_TEXTURE_IMMUTABLE_LEVELS = 0x82df;
// Pixel types
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_2_10_10_10_REV = 0x8368;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_10F_11F_11F_REV = 0x8c3b;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_5_9_9_9_REV = 0x8c3e;
/**
 * @constant {number}
 */
const GL_FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8dad;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_24_8 = 0x84fa;
/**
 * @constant {number}
 */
const GL_HALF_FLOAT = 0x140b;
/**
 * @constant {number}
 */
const GL_RG = 0x8227;
/**
 * @constant {number}
 */
const GL_RG_INTEGER = 0x8228;
/**
 * @constant {number}
 */
const GL_INT_2_10_10_10_REV = 0x8d9f;
// Queries
/**
 * @constant {number}
 */
const GL_CURRENT_QUERY = 0x8865;
/**
 * @constant {number}
 */
const GL_QUERY_RESULT = 0x8866;
/**
 * @constant {number}
 */
const GL_QUERY_RESULT_AVAILABLE = 0x8867;
/**
 * @constant {number}
 */
const GL_ANY_SAMPLES_PASSED = 0x8c2f;
/**
 * @constant {number}
 */
const GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;
// Draw buffers
/**
 * @constant {number}
 */
const GL_MAX_DRAW_BUFFERS = 0x8824;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER0 = 0x8825;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER1 = 0x8826;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER2 = 0x8827;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER3 = 0x8828;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER4 = 0x8829;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER5 = 0x882a;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER6 = 0x882b;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER7 = 0x882c;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER8 = 0x882d;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER9 = 0x882e;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER10 = 0x882f;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER11 = 0x8830;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER12 = 0x8831;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER13 = 0x8832;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER14 = 0x8833;
/**
 * @constant {number}
 */
const GL_DRAW_BUFFER15 = 0x8834;
/**
 * @constant {number}
 */
const GL_MAX_COLOR_ATTACHMENTS = 0x8cdf;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT1 = 0x8ce1;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT2 = 0x8ce2;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT3 = 0x8ce3;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT4 = 0x8ce4;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT5 = 0x8ce5;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT6 = 0x8ce6;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT7 = 0x8ce7;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT8 = 0x8ce8;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT9 = 0x8ce9;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT10 = 0x8cea;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT11 = 0x8ceb;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT12 = 0x8cec;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT13 = 0x8ced;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT14 = 0x8cee;
/**
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT15 = 0x8cef;
// Samplers
/**
 * @constant {number}
 */
const GL_SAMPLER_3D = 0x8b5f;
/**
 * @constant {number}
 */
const GL_SAMPLER_2D_SHADOW = 0x8b62;
/**
 * @constant {number}
 */
const GL_SAMPLER_2D_ARRAY = 0x8dc1;
/**
 * @constant {number}
 */
const GL_SAMPLER_2D_ARRAY_SHADOW = 0x8dc4;
/**
 * @constant {number}
 */
const GL_SAMPLER_CUBE_SHADOW = 0x8dc5;
/**
 * @constant {number}
 */
const GL_INT_SAMPLER_2D = 0x8dca;
/**
 * @constant {number}
 */
const GL_INT_SAMPLER_3D = 0x8dcb;
/**
 * @constant {number}
 */
const GL_INT_SAMPLER_CUBE = 0x8dcc;
/**
 * @constant {number}
 */
const GL_INT_SAMPLER_2D_ARRAY = 0x8dcf;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_SAMPLER_2D = 0x8dd2;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_SAMPLER_3D = 0x8dd3;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_SAMPLER_CUBE = 0x8dd4;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8dd7;
/**
 * @constant {number}
 */
const GL_MAX_SAMPLES = 0x8d57;
/**
 * @constant {number}
 */
const GL_SAMPLER_BINDING = 0x8919;
// Buffers
/**
 * @constant {number}
 */
const GL_PIXEL_PACK_BUFFER = 0x88eb;
/**
 * @constant {number}
 */
const GL_PIXEL_UNPACK_BUFFER = 0x88ec;
/**
 * @constant {number}
 */
const GL_PIXEL_PACK_BUFFER_BINDING = 0x88ed;
/**
 * @constant {number}
 */
const GL_PIXEL_UNPACK_BUFFER_BINDING = 0x88ef;
/**
 * @constant {number}
 */
const GL_COPY_READ_BUFFER = 0x8f36;
/**
 * @constant {number}
 */
const GL_COPY_WRITE_BUFFER = 0x8f37;
/**
 * @constant {number}
 */
const GL_COPY_READ_BUFFER_BINDING = 0x8f36;
/**
 * @constant {number}
 */
const GL_COPY_WRITE_BUFFER_BINDING = 0x8f37;
// Data types
/**
 * @constant {number}
 */
const GL_FLOAT_MAT2X3 = 0x8b65;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT2X4 = 0x8b66;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT3X2 = 0x8b67;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT3X4 = 0x8b68;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT4X2 = 0x8b69;
/**
 * @constant {number}
 */
const GL_FLOAT_MAT4X3 = 0x8b6a;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_VEC2 = 0x8dc6;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_VEC3 = 0x8dc7;
/**
 * @constant {number}
 */
const GL_UNSIGNED_INT_VEC4 = 0x8dc8;
/**
 * @constant {number}
 */
const GL_UNSIGNED_NORMALIZED = 0x8c17;
/**
 * @constant {number}
 */
const GL_SIGNED_NORMALIZED = 0x8f9c;
// Vertex attributes
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_INTEGER = 0x88fd;
/**
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_DIVISOR = 0x88fe;
// Transform feedback
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BUFFER_MODE = 0x8c7f;
/**
 * @constant {number}
 */
const GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 0x8c80;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_VARYINGS = 0x8c83;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BUFFER_START = 0x8c84;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BUFFER_SIZE = 0x8c85;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;
/**
 * @constant {number}
 */
const GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 0x8c8a;
/**
 * @constant {number}
 */
const GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 0x8c8b;
/**
 * @constant {number}
 */
const GL_INTERLEAVED_ATTRIBS = 0x8c8c;
/**
 * @constant {number}
 */
const GL_SEPARATE_ATTRIBS = 0x8c8d;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BUFFER = 0x8c8e;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BUFFER_BINDING = 0x8c8f;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK = 0x8e22;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_PAUSED = 0x8e23;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_ACTIVE = 0x8e24;
/**
 * @constant {number}
 */
const GL_TRANSFORM_FEEDBACK_BINDING = 0x8e25;
// Framebuffers and renderbuffers
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 0x8210;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 0x8211;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE = 0x8212;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 0x8213;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 0x8214;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 0x8215;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 0x8216;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 0x8217;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_DEFAULT = 0x8218;
/**
 * @constant {number}
 */
const GL_DEPTH24_STENCIL8 = 0x88f0;
/**
 * @constant {number}
 */
const GL_DRAW_FRAMEBUFFER_BINDING = 0x8ca6;
/**
 * @constant {number}
 */
const GL_READ_FRAMEBUFFER = 0x8ca8;
/**
 * @constant {number}
 */
const GL_DRAW_FRAMEBUFFER = 0x8ca9;
/**
 * @constant {number}
 */
const GL_READ_FRAMEBUFFER_BINDING = 0x8caa;
/**
 * @constant {number}
 */
const GL_RENDERBUFFER_SAMPLES = 0x8cab;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 0x8cd4;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 0x8d56;
// Uniforms
/**
 * @constant {number}
 */
const GL_UNIFORM_BUFFER = 0x8a11;
/**
 * @constant {number}
 */
const GL_UNIFORM_BUFFER_BINDING = 0x8a28;
/**
 * @constant {number}
 */
const GL_UNIFORM_BUFFER_START = 0x8a29;
/**
 * @constant {number}
 */
const GL_UNIFORM_BUFFER_SIZE = 0x8a2a;
/**
 * @constant {number}
 */
const GL_MAX_VERTEX_UNIFORM_BLOCKS = 0x8a2b;
/**
 * @constant {number}
 */
const GL_MAX_FRAGMENT_UNIFORM_BLOCKS = 0x8a2d;
/**
 * @constant {number}
 */
const GL_MAX_COMBINED_UNIFORM_BLOCKS = 0x8a2e;
/**
 * @constant {number}
 */
const GL_MAX_UNIFORM_BUFFER_BINDINGS = 0x8a2f;
/**
 * @constant {number}
 */
const GL_MAX_UNIFORM_BLOCK_SIZE = 0x8a30;
/**
 * @constant {number}
 */
const GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 0x8a31;
/**
 * @constant {number}
 */
const GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 0x8a33;
/**
 * @constant {number}
 */
const GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT = 0x8a34;
/**
 * @constant {number}
 */
const GL_ACTIVE_UNIFORM_BLOCKS = 0x8a36;
/**
 * @constant {number}
 */
const GL_UNIFORM_TYPE = 0x8a37;
/**
 * @constant {number}
 */
const GL_UNIFORM_SIZE = 0x8a38;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_INDEX = 0x8a3a;
/**
 * @constant {number}
 */
const GL_UNIFORM_OFFSET = 0x8a3b;
/**
 * @constant {number}
 */
const GL_UNIFORM_ARRAY_STRIDE = 0x8a3c;
/**
 * @constant {number}
 */
const GL_UNIFORM_MATRIX_STRIDE = 0x8a3d;
/**
 * @constant {number}
 */
const GL_UNIFORM_IS_ROW_MAJOR = 0x8a3e;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_BINDING = 0x8a3f;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_DATA_SIZE = 0x8a40;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS = 0x8a42;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 0x8a43;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 0x8a44;
/**
 * @constant {number}
 */
const GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46;
// Sync objects
/**
 * @constant {number}
 */
const GL_OBJECT_TYPE = 0x9112;
/**
 * @constant {number}
 */
const GL_SYNC_CONDITION = 0x9113;
/**
 * @constant {number}
 */
const GL_SYNC_STATUS = 0x9114;
/**
 * @constant {number}
 */
const GL_SYNC_FLAGS = 0x9115;
/**
 * @constant {number}
 */
const GL_SYNC_FENCE = 0x9116;
/**
 * @constant {number}
 */
const GL_SYNC_GPU_COMMANDS_COMPLETE = 0x9117;
/**
 * @constant {number}
 */
const GL_UNSIGNALED = 0x9118;
/**
 * @constant {number}
 */
const GL_SIGNALED = 0x9119;
/**
 * @constant {number}
 */
const GL_ALREADY_SIGNALED = 0x911a;
/**
 * @constant {number}
 */
const GL_TIMEOUT_EXPIRED = 0x911b;
/**
 * @constant {number}
 */
const GL_CONDITION_SATISFIED = 0x911c;
/**
 * @constant {number}
 */
const GL_WAIT_FAILED = 0x911d;
/**
 * @constant {number}
 */
const GL_SYNC_FLUSH_COMMANDS_BIT = 0x00000001;
// Miscellaneous constants
/**
 * @constant {number}
 */
const GL_COLOR = 0x1800;
/**
 * @constant {number}
 */
const GL_DEPTH = 0x1801;
/**
 * @constant {number}
 */
const GL_STENCIL = 0x1802;
/**
 * @constant {number}
 */
const GL_MIN = 0x8007;
/**
 * @constant {number}
 */
const GL_MAX = 0x8008;
/**
 * @constant {number}
 */
const GL_DEPTH_COMPONENT24 = 0x81a6;
/**
 * @constant {number}
 */
const GL_STREAM_READ = 0x88e1;
/**
 * @constant {number}
 */
const GL_STREAM_COPY = 0x88e2;
/**
 * @constant {number}
 */
const GL_STATIC_READ = 0x88e5;
/**
 * @constant {number}
 */
const GL_STATIC_COPY = 0x88e6;
/**
 * @constant {number}
 */
const GL_DYNAMIC_READ = 0x88e9;
/**
 * @constant {number}
 */
const GL_DYNAMIC_COPY = 0x88ea;
/**
 * @constant {number}
 */
const GL_DEPTH_COMPONENT32F = 0x8cac;
/**
 * @constant {number}
 */
const GL_DEPTH32F_STENCIL8 = 0x8cad;
/**
 * @constant {number}
 */
const GL_INVALID_INDEX = 0xffffffff;
/**
 * @constant {number}
 */
const GL_TIMEOUT_IGNORED = -1;
/**
 * @constant {number}
 */
const GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL = 0x9247;
// Constants defined in WebGL extensions
// ANGLE_instanced_arrays
// The ANGLE_instanced_arrays extension is part of the WebGL API and allows to draw the same object, or groups of similar objects multiple times, if they share the same vertex data, primitive count and type.
/**
 * Describes the frequency divisor used for instanced rendering.
 * @constant {number}
 */
const GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE = 0x88fe;
// WEBGL_debug_renderer_info
// The WEBGL_debug_renderer_info extension is part of the WebGL API and exposes two constants with information about the graphics driver for debugging purposes.
/**
 * Passed to getParameter to get the vendor string of the graphics driver.
 * @constant {number}
 */
const GL_UNMASKED_VENDOR_WEBGL = 0x9245;
/**
 * Passed to getParameter to get the renderer string of the graphics driver.
 * @constant {number}
 */
const GL_UNMASKED_RENDERER_WEBGL = 0x9246;
// EXT_texture_filter_anisotropic
// The EXT_texture_filter_anisotropic extension is part of the WebGL API and exposes two constants for anisotropic filtering (AF).
/**
 * Returns the maximum available anisotropy.
 * @constant {number}
 */
const GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;
/**
 * Passed to texParameter to set the desired maximum anisotropy for a texture.
 * @constant {number}
 */
const GL_TEXTURE_MAX_ANISOTROPY_EXT = 0x84fe;
// WEBGL_compressed_texture_s3tc
// The WEBGL_compressed_texture_s3tc extension is part of the WebGL API and exposes four S3TC compressed texture formats.
/**
 * A DXT1-compressed image in an RGB image format.
 * @constant {number}
 */
const GL_COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83f0;
/**
 * A DXT1-compressed image in an RGB image format with a simple on/off alpha value.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83f1;
/**
 * A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83f2;
/**
 * A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83f3;
// WEBGL_compressed_texture_s3tc_srgb
// The WEBGL_compressed_texture_s3tc_srgb extension is part of the WebGL API and exposes four S3TC compressed texture formats for the sRGB colorspace.
/**
 * A DXT1-compressed image in an sRGB image format.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB_S3TC_DXT1_EXT = 0x8c4c;
/**
 * A DXT1-compressed image in an sRGB image format with a simple on/off alpha value.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 0x8c4d;
/**
 * A DXT3-compressed image in an sRGBA image format.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 0x8c4e;
/**
 * A DXT5-compressed image in an sRGBA image format.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 0x8c4f;
// WEBGL_compressed_texture_etc
// The WEBGL_compressed_texture_etc extension is part of the WebGL API and exposes 10 ETC/EAC compressed texture formats.
/**
 * One-channel (red) unsigned format compression.
 * @constant {number}
 */
const GL_COMPRESSED_R11_EAC = 0x9270;
/**
 * One-channel (red) signed format compression.
 * @constant {number}
 */
const GL_COMPRESSED_SIGNED_R11_EAC = 0x9271;
/**
 * Two-channel (red and green) unsigned format compression.
 * @constant {number}
 */
const GL_COMPRESSED_RG11_EAC = 0x9272;
/**
 * Two-channel (red and green) signed format compression.
 * @constant {number}
 */
const GL_COMPRESSED_SIGNED_RG11_EAC = 0x9273;
/**
 * Compresses RBG8 data with no alpha channel.
 * @constant {number}
 */
const GL_COMPRESSED_RGB8_ETC2 = 0x9274;
/**
 * Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA8_ETC2_EAC = 0x9275;
/**
 * Compresses sRBG8 data with no alpha channel.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ETC2 = 0x9276;
/**
 * Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9277;
/**
 * Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.
 * @constant {number}
 */
const GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9278;
/**
 * Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9279;
// WEBGL_compressed_texture_pvrtc
// The WEBGL_compressed_texture_pvrtc extension is part of the WebGL API and exposes four PVRTC compressed texture formats.
/**
 * RGB compression in 4-bit mode. One block for each 44 pixels.
 * @constant {number}
 */
const GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8c00;
/**
 * RGBA compression in 4-bit mode. One block for each 44 pixels.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8c02;
/**
 * RGB compression in 2-bit mode. One block for each 84 pixels.
 * @constant {number}
 */
const GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8c01;
/**
 * RGBA compression in 2-bit mode. One block for each 84 pixels.
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8c03;
// WEBGL_compressed_texture_etc1
// The WEBGL_compressed_texture_etc1 extension is part of the WebGL API and exposes the ETC1 compressed texture format.
/**
 * Compresses 24-bit RGB data with no alpha channel.
 * @constant {number}
 */
const GL_COMPRESSED_RGB_ETC1_WEBGL = 0x8d64;
// WEBGL_compressed_texture_atc
// The WEBGL_compressed_texture_atc extension is part of the WebGL API and exposes 3 ATC compressed texture formats. ATC is a proprietary compression algorithm for compressing textures on handheld devices.
/**
 * Compresses RGB textures with no alpha channel.
 * @constant {number}
 */
const GL_COMPRESSED_RGB_ATC_WEBGL = 0x8c92;
/**
 * Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8c92;
/**
 * Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87ee;
// WEBGL_compressed_texture_astc
// The WEBGL_compressed_texture_astc extension is part of the WebGL API and exposes Adaptive Scalable Texture Compression (ASTC) compressed texture formats to WebGL.
// https://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_astc/
// https://developer.nvidia.com/astc-texture-compression-for-game-assets
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 4x4
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_4X4_KHR = 0x93b0;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 5x4
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_5X4_KHR = 0x93b1;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 5x5
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_5X5_KHR = 0x93b2;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 6x5
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_6X5_KHR = 0x93b3;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 6x6
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_6X6_KHR = 0x93b4;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 8x5
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_8X5_KHR = 0x93b5;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 8x6
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_8X6_KHR = 0x93b6;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 8x8
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_8X8_KHR = 0x93b7;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 10x5
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_10X5_KHR = 0x93b8;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 10x6
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_10X6_KHR = 0x93b9;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 10x8
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_10X8_KHR = 0x93ba;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 10x10
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_10X10_KHR = 0x93bb;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 12x10
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_12X10_KHR = 0x93bc;
/**
 * Compresses RGBA textures using ASTC compression in a blocksize of 12x12
 * @constant {number}
 */
const GL_COMPRESSED_RGBA_ASTC_12X12_KHR = 0x93bd;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 4x4
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR = 0x93d0;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 5x4
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR = 0x93d1;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 5x5
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR = 0x93d2;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 6x5
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR = 0x93d3;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 6x6
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR = 0x93d4;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x5
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR = 0x93d5;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x6
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR = 0x93d6;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 8x8
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR = 0x93d7;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x5
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR = 0x93d8;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x6
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR = 0x93d9;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x8
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR = 0x93da;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 10x10
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR = 0x93db;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 12x10
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR = 0x93dc;
/**
 * Compresses SRGB8 textures using ASTC compression in a blocksize of 12x12
 * @constant {number}
 */
const GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR = 0x93dd;
// WEBGL_depth_texture
// The WEBGL_depth_texture extension is part of the WebGL API and defines 2D depth and depth-stencil textures.
/**
 * Unsigned integer type for 24-bit depth texture data.
 * @constant {number}
 */
const GL_UNSIGNED_INT_24_8_WEBGL = 0x84fa;
// OES_texture_half_float
// The OES_texture_half_float extension is part of the WebGL API and adds texture formats with 16- (aka half float) and 32-bit floating-point components.
/**
 * Half floating-point type (16-bit).
 * @constant {number}
 */
const GL_HALF_FLOAT_OES = 0x8d61;
// WEBGL_color_buffer_float
// The WEBGL_color_buffer_float extension is part of the WebGL API and adds the ability to render to 32-bit floating-point color buffers.
/**
 * RGBA 32-bit floating-point color-renderable format.
 * @constant {number}
 */
const GL_RGBA32F_EXT = 0x8814;
/**
 * RGB 32-bit floating-point color-renderable format.
 * @constant {number}
 */
const GL_RGB32F_EXT = 0x8815;
/**
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT = 0x8211;
/**
 * @constant {number}
 */
const GL_UNSIGNED_NORMALIZED_EXT = 0x8c17;
// EXT_blend_minmax
// The EXT_blend_minmax extension is part of the WebGL API and extends blending capabilities by adding two new blend equations: the minimum or maximum color components of the source and destination colors.
/**
 * Produces the minimum color components of the source and destination colors.
 * @constant {number}
 */
const GL_MIN_EXT = 0x8007;
/**
 * Produces the maximum color components of the source and destination colors.
 * @constant {number}
 */
const GL_MAX_EXT = 0x8008;
// EXT_sRGB
// The EXT_sRGB extension is part of the WebGL API and adds sRGB support to textures and framebuffer objects.
/**
 * Unsized sRGB format that leaves the precision up to the driver.
 * @constant {number}
 */
const GL_SRGB_EXT = 0x8c40;
/**
 * Unsized sRGB format with unsized alpha component.
 * @constant {number}
 */
const GL_SRGB_ALPHA_EXT = 0x8c42;
/**
 * Sized (8-bit) sRGB and alpha formats.
 * @constant {number}
 */
const GL_SRGB8_ALPHA8_EXT = 0x8c43;
/**
 * Returns the framebuffer color encoding.
 * @constant {number}
 */
const GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT = 0x8210;
// OES_standard_derivatives
// The OES_standard_derivatives extension is part of the WebGL API and adds the GLSL derivative functions dFdx, dFdy, and fwidth.
/**
 * Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.
 * @constant {number}
 */
const GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES = 0x8b8b;
// WEBGL_draw_buffers
// The WEBGL_draw_buffers extension is part of the WebGL API and enables a fragment shader to write to several textures, which is useful for deferred shading, for example.
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT0_WEBGL = 0x8ce0;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT1_WEBGL = 0x8ce1;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT2_WEBGL = 0x8ce2;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT3_WEBGL = 0x8ce3;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT4_WEBGL = 0x8ce4;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT5_WEBGL = 0x8ce5;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT6_WEBGL = 0x8ce6;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT7_WEBGL = 0x8ce7;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT8_WEBGL = 0x8ce8;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT9_WEBGL = 0x8ce9;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT10_WEBGL = 0x8cea;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT11_WEBGL = 0x8ceb;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT12_WEBGL = 0x8cec;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT13_WEBGL = 0x8ced;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT14_WEBGL = 0x8cee;
/**
 * Framebuffer color attachment point.
 * @constant {number}
 */
const GL_COLOR_ATTACHMENT15_WEBGL = 0x8cef;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER0_WEBGL = 0x8825;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER1_WEBGL = 0x8826;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER2_WEBGL = 0x8827;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER3_WEBGL = 0x8828;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER4_WEBGL = 0x8829;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER5_WEBGL = 0x882a;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER6_WEBGL = 0x882b;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER7_WEBGL = 0x882c;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER8_WEBGL = 0x882d;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER9_WEBGL = 0x882e;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER10_WEBGL = 0x882f;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER11_WEBGL = 0x8830;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER12_WEBGL = 0x8831;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER13_WEBGL = 0x8832;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER14_WEBGL = 0x8833;
/**
 * Draw buffer.
 * @constant {number}
 */
const GL_DRAW_BUFFER15_WEBGL = 0x8834;
/**
 * Maximum number of framebuffer color attachment points.
 * @constant {number}
 */
const GL_MAX_COLOR_ATTACHMENTS_WEBGL = 0x8cdf;
/**
 * Maximum number of draw buffers.
 * @constant {number}
 */
const GL_MAX_DRAW_BUFFERS_WEBGL = 0x8824;
// OES_vertex_array_object
// The OES_vertex_array_object extension is part of the WebGL API and provides vertex array objects (VAOs) which encapsulate vertex array states. These objects keep pointers to vertex data and provide names for different sets of vertex data.
/**
 * The bound vertex array object (VAO).
 * @constant {number}
 */
const GL_VERTEX_ARRAY_BINDING_OES = 0x85b5;
// EXT_disjoint_timer_query
// The EXT_disjoint_timer_query extension is part of the WebGL API and provides a way to measure the duration of a set of GL commands, without stalling the rendering pipeline.
/**
 * The number of bits used to hold the query result for the given target.
 * @constant {number}
 */
const GL_QUERY_COUNTER_BITS_EXT = 0x8864;
/**
 * The currently active query.
 * @constant {number}
 */
const GL_CURRENT_QUERY_EXT = 0x8865;
/**
 * The query result.
 * @constant {number}
 */
const GL_QUERY_RESULT_EXT = 0x8866;
/**
 * A Boolean indicating whether or not a query result is available.
 * @constant {number}
 */
const GL_QUERY_RESULT_AVAILABLE_EXT = 0x8867;
/**
 * Elapsed time (in nanoseconds).
 * @constant {number}
 */
const GL_TIME_ELAPSED_EXT = 0x88bf;
/**
 * The current time.
 * @constant {number}
 */
const GL_TIMESTAMP_EXT = 0x8e28;
/**
 * A Boolean indicating whether or not the GPU performed any disjoint operation.
 * @constant {number}
 */
const GL_GPU_DISJOINT_EXT = 0x8fbb;


/***/ }),

/***/ "./src/types/glTF1.ts":
/*!****************************!*\
  !*** ./src/types/glTF1.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/glTF2.ts":
/*!****************************!*\
  !*** ./src/types/glTF2.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TagGltf2NodeIndex": () => (/* binding */ TagGltf2NodeIndex),
/* harmony export */   "isSameGlTF2TextureSampler": () => (/* binding */ isSameGlTF2TextureSampler)
/* harmony export */ });
const TagGltf2NodeIndex = 'gltf_node_index';
function isSameGlTF2TextureSampler(lhs, rhs) {
    return (lhs.magFilter === rhs.magFilter &&
        lhs.minFilter === rhs.minFilter &&
        lhs.wrapS === rhs.wrapS &&
        lhs.wrapT === rhs.wrapT);
}


/***/ }),

/***/ "./src/types/glTF2ForOutput.ts":
/*!*************************************!*\
  !*** ./src/types/glTF2ForOutput.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/types/index.ts":
/*!****************************!*\
  !*** ./src/types/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GL_ACTIVE_ATTRIBUTES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ACTIVE_ATTRIBUTES),
/* harmony export */   "GL_ACTIVE_TEXTURE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ACTIVE_TEXTURE),
/* harmony export */   "GL_ACTIVE_UNIFORMS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ACTIVE_UNIFORMS),
/* harmony export */   "GL_ACTIVE_UNIFORM_BLOCKS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ACTIVE_UNIFORM_BLOCKS),
/* harmony export */   "GL_ALIASED_LINE_WIDTH_RANGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALIASED_LINE_WIDTH_RANGE),
/* harmony export */   "GL_ALIASED_POINT_SIZE_RANGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALIASED_POINT_SIZE_RANGE),
/* harmony export */   "GL_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALPHA),
/* harmony export */   "GL_ALPHA_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALPHA_BITS),
/* harmony export */   "GL_ALREADY_SIGNALED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALREADY_SIGNALED),
/* harmony export */   "GL_ALWAYS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ALWAYS),
/* harmony export */   "GL_ANY_SAMPLES_PASSED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ANY_SAMPLES_PASSED),
/* harmony export */   "GL_ANY_SAMPLES_PASSED_CONSERVATIVE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ANY_SAMPLES_PASSED_CONSERVATIVE),
/* harmony export */   "GL_ARRAY_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ARRAY_BUFFER),
/* harmony export */   "GL_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_ATTACHED_SHADERS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ATTACHED_SHADERS),
/* harmony export */   "GL_BACK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BACK),
/* harmony export */   "GL_BLEND": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND),
/* harmony export */   "GL_BLEND_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_COLOR),
/* harmony export */   "GL_BLEND_DST_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_DST_ALPHA),
/* harmony export */   "GL_BLEND_DST_RGB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_DST_RGB),
/* harmony export */   "GL_BLEND_EQUATION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_EQUATION),
/* harmony export */   "GL_BLEND_EQUATION_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_EQUATION_ALPHA),
/* harmony export */   "GL_BLEND_EQUATION_RGB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_EQUATION_RGB),
/* harmony export */   "GL_BLEND_SRC_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_SRC_ALPHA),
/* harmony export */   "GL_BLEND_SRC_RGB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLEND_SRC_RGB),
/* harmony export */   "GL_BLUE_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BLUE_BITS),
/* harmony export */   "GL_BOOL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BOOL),
/* harmony export */   "GL_BOOL_VEC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BOOL_VEC2),
/* harmony export */   "GL_BOOL_VEC3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BOOL_VEC3),
/* harmony export */   "GL_BOOL_VEC4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BOOL_VEC4),
/* harmony export */   "GL_BROWSER_DEFAULT_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BROWSER_DEFAULT_WEBGL),
/* harmony export */   "GL_BUFFER_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BUFFER_SIZE),
/* harmony export */   "GL_BUFFER_USAGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_BUFFER_USAGE),
/* harmony export */   "GL_CCW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CCW),
/* harmony export */   "GL_CLAMP_TO_EDGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CLAMP_TO_EDGE),
/* harmony export */   "GL_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR),
/* harmony export */   "GL_COLOR_ATTACHMENT0": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT0),
/* harmony export */   "GL_COLOR_ATTACHMENT0_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT0_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT1),
/* harmony export */   "GL_COLOR_ATTACHMENT10": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT10),
/* harmony export */   "GL_COLOR_ATTACHMENT10_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT10_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT11": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT11),
/* harmony export */   "GL_COLOR_ATTACHMENT11_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT11_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT12": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT12),
/* harmony export */   "GL_COLOR_ATTACHMENT12_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT12_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT13": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT13),
/* harmony export */   "GL_COLOR_ATTACHMENT13_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT13_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT14": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT14),
/* harmony export */   "GL_COLOR_ATTACHMENT14_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT14_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT15": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT15),
/* harmony export */   "GL_COLOR_ATTACHMENT15_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT15_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT1_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT1_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT2),
/* harmony export */   "GL_COLOR_ATTACHMENT2_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT2_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT3),
/* harmony export */   "GL_COLOR_ATTACHMENT3_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT3_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT4),
/* harmony export */   "GL_COLOR_ATTACHMENT4_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT4_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT5": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT5),
/* harmony export */   "GL_COLOR_ATTACHMENT5_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT5_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT6": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT6),
/* harmony export */   "GL_COLOR_ATTACHMENT6_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT6_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT7": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT7),
/* harmony export */   "GL_COLOR_ATTACHMENT7_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT7_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT8),
/* harmony export */   "GL_COLOR_ATTACHMENT8_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT8_WEBGL),
/* harmony export */   "GL_COLOR_ATTACHMENT9": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT9),
/* harmony export */   "GL_COLOR_ATTACHMENT9_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_ATTACHMENT9_WEBGL),
/* harmony export */   "GL_COLOR_BUFFER_BIT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_BUFFER_BIT),
/* harmony export */   "GL_COLOR_CLEAR_VALUE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_CLEAR_VALUE),
/* harmony export */   "GL_COLOR_WRITEMASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COLOR_WRITEMASK),
/* harmony export */   "GL_COMPARE_REF_TO_TEXTURE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPARE_REF_TO_TEXTURE),
/* harmony export */   "GL_COMPILE_STATUS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPILE_STATUS),
/* harmony export */   "GL_COMPRESSED_R11_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_RG11_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_RGB8_ETC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_RGBA8_ETC2_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X10_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_10X8_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X10_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_12X12_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_4X4_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X4_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_5X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_6X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ASTC_8X8_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT1_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT3_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_RGBA_S3TC_DXT5_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGBA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_RGB_ATC_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB_ATC_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_ETC1_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB_ETC1_WEBGL),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG),
/* harmony export */   "GL_COMPRESSED_RGB_S3TC_DXT1_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_RGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SIGNED_R11_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SIGNED_R11_EAC),
/* harmony export */   "GL_COMPRESSED_SIGNED_RG11_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SIGNED_RG11_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR),
/* harmony export */   "GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC),
/* harmony export */   "GL_COMPRESSED_SRGB8_ETC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),
/* harmony export */   "GL_COMPRESSED_SRGB_S3TC_DXT1_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_SRGB_S3TC_DXT1_EXT),
/* harmony export */   "GL_COMPRESSED_TEXTURE_FORMATS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COMPRESSED_TEXTURE_FORMATS),
/* harmony export */   "GL_CONDITION_SATISFIED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CONDITION_SATISFIED),
/* harmony export */   "GL_CONSTANT_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CONSTANT_ALPHA),
/* harmony export */   "GL_CONSTANT_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CONSTANT_COLOR),
/* harmony export */   "GL_CONTEXT_LOST_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CONTEXT_LOST_WEBGL),
/* harmony export */   "GL_COPY_READ_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COPY_READ_BUFFER),
/* harmony export */   "GL_COPY_READ_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COPY_READ_BUFFER_BINDING),
/* harmony export */   "GL_COPY_WRITE_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COPY_WRITE_BUFFER),
/* harmony export */   "GL_COPY_WRITE_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_COPY_WRITE_BUFFER_BINDING),
/* harmony export */   "GL_CULL_FACE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CULL_FACE),
/* harmony export */   "GL_CULL_FACE_MODE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CULL_FACE_MODE),
/* harmony export */   "GL_CURRENT_PROGRAM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CURRENT_PROGRAM),
/* harmony export */   "GL_CURRENT_QUERY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CURRENT_QUERY),
/* harmony export */   "GL_CURRENT_QUERY_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CURRENT_QUERY_EXT),
/* harmony export */   "GL_CURRENT_VERTEX_ATTRIB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CURRENT_VERTEX_ATTRIB),
/* harmony export */   "GL_CW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_CW),
/* harmony export */   "GL_DATA_BYTE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_BYTE),
/* harmony export */   "GL_DATA_FLOAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_FLOAT),
/* harmony export */   "GL_DATA_INT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_INT),
/* harmony export */   "GL_DATA_SHORT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_SHORT),
/* harmony export */   "GL_DATA_UNSIGNED_BYTE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_UNSIGNED_BYTE),
/* harmony export */   "GL_DATA_UNSIGNED_INT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_UNSIGNED_INT),
/* harmony export */   "GL_DATA_UNSIGNED_SHORT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DATA_UNSIGNED_SHORT),
/* harmony export */   "GL_DECR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DECR),
/* harmony export */   "GL_DECR_WRAP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DECR_WRAP),
/* harmony export */   "GL_DELETE_STATUS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DELETE_STATUS),
/* harmony export */   "GL_DEPTH": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH),
/* harmony export */   "GL_DEPTH24_STENCIL8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH24_STENCIL8),
/* harmony export */   "GL_DEPTH32F_STENCIL8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH32F_STENCIL8),
/* harmony export */   "GL_DEPTH_ATTACHMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_ATTACHMENT),
/* harmony export */   "GL_DEPTH_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_BITS),
/* harmony export */   "GL_DEPTH_BUFFER_BIT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_BUFFER_BIT),
/* harmony export */   "GL_DEPTH_CLEAR_VALUE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_CLEAR_VALUE),
/* harmony export */   "GL_DEPTH_COMPONENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_COMPONENT),
/* harmony export */   "GL_DEPTH_COMPONENT16": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_COMPONENT16),
/* harmony export */   "GL_DEPTH_COMPONENT24": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_COMPONENT24),
/* harmony export */   "GL_DEPTH_COMPONENT32F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_COMPONENT32F),
/* harmony export */   "GL_DEPTH_FUNC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_FUNC),
/* harmony export */   "GL_DEPTH_RANGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_RANGE),
/* harmony export */   "GL_DEPTH_STENCIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_STENCIL),
/* harmony export */   "GL_DEPTH_STENCIL_ATTACHMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_STENCIL_ATTACHMENT),
/* harmony export */   "GL_DEPTH_TEST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_TEST),
/* harmony export */   "GL_DEPTH_WRITEMASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DEPTH_WRITEMASK),
/* harmony export */   "GL_DITHER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DITHER),
/* harmony export */   "GL_DONT_CARE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DONT_CARE),
/* harmony export */   "GL_DRAW_BUFFER0": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER0),
/* harmony export */   "GL_DRAW_BUFFER0_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER0_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER1),
/* harmony export */   "GL_DRAW_BUFFER10": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER10),
/* harmony export */   "GL_DRAW_BUFFER10_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER10_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER11": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER11),
/* harmony export */   "GL_DRAW_BUFFER11_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER11_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER12": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER12),
/* harmony export */   "GL_DRAW_BUFFER12_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER12_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER13": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER13),
/* harmony export */   "GL_DRAW_BUFFER13_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER13_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER14": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER14),
/* harmony export */   "GL_DRAW_BUFFER14_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER14_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER15": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER15),
/* harmony export */   "GL_DRAW_BUFFER15_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER15_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER1_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER1_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER2),
/* harmony export */   "GL_DRAW_BUFFER2_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER2_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER3),
/* harmony export */   "GL_DRAW_BUFFER3_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER3_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER4),
/* harmony export */   "GL_DRAW_BUFFER4_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER4_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER5": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER5),
/* harmony export */   "GL_DRAW_BUFFER5_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER5_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER6": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER6),
/* harmony export */   "GL_DRAW_BUFFER6_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER6_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER7": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER7),
/* harmony export */   "GL_DRAW_BUFFER7_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER7_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER8),
/* harmony export */   "GL_DRAW_BUFFER8_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER8_WEBGL),
/* harmony export */   "GL_DRAW_BUFFER9": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER9),
/* harmony export */   "GL_DRAW_BUFFER9_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_BUFFER9_WEBGL),
/* harmony export */   "GL_DRAW_FRAMEBUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_FRAMEBUFFER),
/* harmony export */   "GL_DRAW_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DRAW_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_DST_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DST_ALPHA),
/* harmony export */   "GL_DST_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DST_COLOR),
/* harmony export */   "GL_DYNAMIC_COPY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DYNAMIC_COPY),
/* harmony export */   "GL_DYNAMIC_DRAW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DYNAMIC_DRAW),
/* harmony export */   "GL_DYNAMIC_READ": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_DYNAMIC_READ),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ELEMENT_ARRAY_BUFFER),
/* harmony export */   "GL_ELEMENT_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ELEMENT_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_EQUAL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_EQUAL),
/* harmony export */   "GL_FASTEST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FASTEST),
/* harmony export */   "GL_FLOAT_32_UNSIGNED_INT_24_8_REV": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_32_UNSIGNED_INT_24_8_REV),
/* harmony export */   "GL_FLOAT_MAT2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT2),
/* harmony export */   "GL_FLOAT_MAT2X3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT2X3),
/* harmony export */   "GL_FLOAT_MAT2X4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT2X4),
/* harmony export */   "GL_FLOAT_MAT3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT3),
/* harmony export */   "GL_FLOAT_MAT3X2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT3X2),
/* harmony export */   "GL_FLOAT_MAT3X4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT3X4),
/* harmony export */   "GL_FLOAT_MAT4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT4),
/* harmony export */   "GL_FLOAT_MAT4X2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT4X2),
/* harmony export */   "GL_FLOAT_MAT4X3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_MAT4X3),
/* harmony export */   "GL_FLOAT_VEC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_VEC2),
/* harmony export */   "GL_FLOAT_VEC3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_VEC3),
/* harmony export */   "GL_FLOAT_VEC4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FLOAT_VEC4),
/* harmony export */   "GL_FRAGMENT_SHADER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAGMENT_SHADER),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAGMENT_SHADER_DERIVATIVE_HINT),
/* harmony export */   "GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES),
/* harmony export */   "GL_FRAMEBUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),
/* harmony export */   "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL),
/* harmony export */   "GL_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_FRAMEBUFFER_COMPLETE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_COMPLETE),
/* harmony export */   "GL_FRAMEBUFFER_DEFAULT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_DEFAULT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT),
/* harmony export */   "GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE),
/* harmony export */   "GL_FRAMEBUFFER_UNSUPPORTED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRAMEBUFFER_UNSUPPORTED),
/* harmony export */   "GL_FRONT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRONT),
/* harmony export */   "GL_FRONT_AND_BACK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRONT_AND_BACK),
/* harmony export */   "GL_FRONT_FACE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FRONT_FACE),
/* harmony export */   "GL_FUNC_ADD": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FUNC_ADD),
/* harmony export */   "GL_FUNC_REVERSE_SUBTRACT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FUNC_REVERSE_SUBTRACT),
/* harmony export */   "GL_FUNC_SUBSTRACT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_FUNC_SUBSTRACT),
/* harmony export */   "GL_GENERATE_MIPMAP_HINT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_GENERATE_MIPMAP_HINT),
/* harmony export */   "GL_GEQUAL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_GEQUAL),
/* harmony export */   "GL_GPU_DISJOINT_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_GPU_DISJOINT_EXT),
/* harmony export */   "GL_GREATER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_GREATER),
/* harmony export */   "GL_GREEN_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_GREEN_BITS),
/* harmony export */   "GL_HALF_FLOAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_HALF_FLOAT),
/* harmony export */   "GL_HALF_FLOAT_OES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_HALF_FLOAT_OES),
/* harmony export */   "GL_HIGH_FLOAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_HIGH_FLOAT),
/* harmony export */   "GL_HIGH_INT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_HIGH_INT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_FORMAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_IMPLEMENTATION_COLOR_READ_FORMAT),
/* harmony export */   "GL_IMPLEMENTATION_COLOR_READ_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_IMPLEMENTATION_COLOR_READ_TYPE),
/* harmony export */   "GL_INCR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INCR),
/* harmony export */   "GL_INCR_WRAP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INCR_WRAP),
/* harmony export */   "GL_INTERLEAVED_ATTRIBS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INTERLEAVED_ATTRIBS),
/* harmony export */   "GL_INT_2_10_10_10_REV": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_2_10_10_10_REV),
/* harmony export */   "GL_INT_SAMPLER_2D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_SAMPLER_2D),
/* harmony export */   "GL_INT_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_INT_SAMPLER_3D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_SAMPLER_3D),
/* harmony export */   "GL_INT_SAMPLER_CUBE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_SAMPLER_CUBE),
/* harmony export */   "GL_INT_VEC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_VEC2),
/* harmony export */   "GL_INT_VEC3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_VEC3),
/* harmony export */   "GL_INT_VEC4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INT_VEC4),
/* harmony export */   "GL_INVALID_ENUM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVALID_ENUM),
/* harmony export */   "GL_INVALID_FRAMEBUFFER_OPERATION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVALID_FRAMEBUFFER_OPERATION),
/* harmony export */   "GL_INVALID_INDEX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVALID_INDEX),
/* harmony export */   "GL_INVALID_OPERATION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVALID_OPERATION),
/* harmony export */   "GL_INVALID_VALUE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVALID_VALUE),
/* harmony export */   "GL_INVERT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_INVERT),
/* harmony export */   "GL_KEEP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_KEEP),
/* harmony export */   "GL_LEQUAL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LEQUAL),
/* harmony export */   "GL_LESS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LESS),
/* harmony export */   "GL_LINEAR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_LINEAR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINEAR_MIPMAP_LINEAR),
/* harmony export */   "GL_LINEAR_MIPMAP_NEAREST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINEAR_MIPMAP_NEAREST),
/* harmony export */   "GL_LINES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINES),
/* harmony export */   "GL_LINE_LOOP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINE_LOOP),
/* harmony export */   "GL_LINE_STRIP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINE_STRIP),
/* harmony export */   "GL_LINE_WIDTH": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINE_WIDTH),
/* harmony export */   "GL_LINK_STATUS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LINK_STATUS),
/* harmony export */   "GL_LOW_FLOAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LOW_FLOAT),
/* harmony export */   "GL_LOW_INT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LOW_INT),
/* harmony export */   "GL_LUMINANCE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LUMINANCE),
/* harmony export */   "GL_LUMINANCE_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_LUMINANCE_ALPHA),
/* harmony export */   "GL_MAX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX),
/* harmony export */   "GL_MAX_3D_TEXTURE_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_3D_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_ARRAY_TEXTURE_LAYERS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_ARRAY_TEXTURE_LAYERS),
/* harmony export */   "GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COLOR_ATTACHMENTS),
/* harmony export */   "GL_MAX_COLOR_ATTACHMENTS_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COLOR_ATTACHMENTS_WEBGL),
/* harmony export */   "GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_COMBINED_UNIFORM_BLOCKS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COMBINED_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_CUBE_MAP_TEXTURE_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_CUBE_MAP_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_DRAW_BUFFERS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_DRAW_BUFFERS),
/* harmony export */   "GL_MAX_DRAW_BUFFERS_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_DRAW_BUFFERS_WEBGL),
/* harmony export */   "GL_MAX_ELEMENTS_INDICES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_ELEMENTS_INDICES),
/* harmony export */   "GL_MAX_ELEMENTS_VERTICES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_ELEMENTS_VERTICES),
/* harmony export */   "GL_MAX_ELEMENT_INDEX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_ELEMENT_INDEX),
/* harmony export */   "GL_MAX_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_EXT),
/* harmony export */   "GL_MAX_FRAGMENT_INPUT_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_FRAGMENT_INPUT_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_BLOCKS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_FRAGMENT_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_FRAGMENT_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_FRAGMENT_UNIFORM_VECTORS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_FRAGMENT_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_PROGRAM_TEXEL_OFFSET": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MAX_RENDERBUFFER_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_RENDERBUFFER_SIZE),
/* harmony export */   "GL_MAX_SAMPLES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_SAMPLES),
/* harmony export */   "GL_MAX_SERVER_WAIT_TIMEOUT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_SERVER_WAIT_TIMEOUT),
/* harmony export */   "GL_MAX_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_TEXTURE_LOD_BIAS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TEXTURE_LOD_BIAS),
/* harmony export */   "GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_MAX_TEXTURE_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TEXTURE_SIZE),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),
/* harmony export */   "GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS),
/* harmony export */   "GL_MAX_UNIFORM_BLOCK_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_UNIFORM_BLOCK_SIZE),
/* harmony export */   "GL_MAX_UNIFORM_BUFFER_BINDINGS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_UNIFORM_BUFFER_BINDINGS),
/* harmony export */   "GL_MAX_VARYING_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VARYING_COMPONENTS),
/* harmony export */   "GL_MAX_VARYING_VECTORS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VARYING_VECTORS),
/* harmony export */   "GL_MAX_VERTEX_ATTRIBS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_ATTRIBS),
/* harmony export */   "GL_MAX_VERTEX_OUTPUT_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_OUTPUT_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_BLOCKS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_UNIFORM_BLOCKS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_COMPONENTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_UNIFORM_COMPONENTS),
/* harmony export */   "GL_MAX_VERTEX_UNIFORM_VECTORS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VERTEX_UNIFORM_VECTORS),
/* harmony export */   "GL_MAX_VIEWPORT_DIMS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MAX_VIEWPORT_DIMS),
/* harmony export */   "GL_MEDIUM_FLOAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MEDIUM_FLOAT),
/* harmony export */   "GL_MEDIUM_INT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MEDIUM_INT),
/* harmony export */   "GL_MIN": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MIN),
/* harmony export */   "GL_MIN_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MIN_EXT),
/* harmony export */   "GL_MIN_PROGRAM_TEXEL_OFFSET": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MIN_PROGRAM_TEXEL_OFFSET),
/* harmony export */   "GL_MIRRORED_REPEAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_MIRRORED_REPEAT),
/* harmony export */   "GL_NEAREST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NEAREST),
/* harmony export */   "GL_NEAREST_MIPMAP_LINEAR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NEAREST_MIPMAP_LINEAR),
/* harmony export */   "GL_NEAREST_MIPMAP_NEAREST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NEAREST_MIPMAP_NEAREST),
/* harmony export */   "GL_NEVER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NEVER),
/* harmony export */   "GL_NICEST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NICEST),
/* harmony export */   "GL_NONE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NONE),
/* harmony export */   "GL_NOTEQUAL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NOTEQUAL),
/* harmony export */   "GL_NO_ERROR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_NO_ERROR),
/* harmony export */   "GL_OBJECT_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_OBJECT_TYPE),
/* harmony export */   "GL_ONE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_CONSTANT_ALPHA),
/* harmony export */   "GL_ONE_MINUS_CONSTANT_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_CONSTANT_COLOR),
/* harmony export */   "GL_ONE_MINUS_DST_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_DST_ALPHA),
/* harmony export */   "GL_ONE_MINUS_DST_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_DST_COLOR),
/* harmony export */   "GL_ONE_MINUS_SRC_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_SRC_ALPHA),
/* harmony export */   "GL_ONE_MINUS_SRC_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ONE_MINUS_SRC_COLOR),
/* harmony export */   "GL_OUT_OF_MEMORY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_OUT_OF_MEMORY),
/* harmony export */   "GL_PACK_ALIGNMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PACK_ALIGNMENT),
/* harmony export */   "GL_PACK_ROW_LENGTH": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PACK_ROW_LENGTH),
/* harmony export */   "GL_PACK_SKIP_PIXELS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PACK_SKIP_PIXELS),
/* harmony export */   "GL_PACK_SKIP_ROWS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PACK_SKIP_ROWS),
/* harmony export */   "GL_PIXEL_PACK_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_PACK_BUFFER),
/* harmony export */   "GL_PIXEL_PACK_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_PACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNPACK_BUFFER),
/* harmony export */   "GL_PIXEL_UNPACK_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNPACK_BUFFER_BINDING),
/* harmony export */   "GL_PIXEL_UNSIGNED_BYTE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNSIGNED_BYTE),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_4_4_4_4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNSIGNED_SHORT_4_4_4_4),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_5_5_1": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNSIGNED_SHORT_5_5_5_1),
/* harmony export */   "GL_PIXEL_UNSIGNED_SHORT_5_6_5": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_PIXEL_UNSIGNED_SHORT_5_6_5),
/* harmony export */   "GL_POINTS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_POINTS),
/* harmony export */   "GL_POLYGON_OFFSET_FACTOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_POLYGON_OFFSET_FACTOR),
/* harmony export */   "GL_POLYGON_OFFSET_FILL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_POLYGON_OFFSET_FILL),
/* harmony export */   "GL_POLYGON_OFFSET_UNITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_POLYGON_OFFSET_UNITS),
/* harmony export */   "GL_QUERY_COUNTER_BITS_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_QUERY_COUNTER_BITS_EXT),
/* harmony export */   "GL_QUERY_RESULT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_QUERY_RESULT),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_QUERY_RESULT_AVAILABLE),
/* harmony export */   "GL_QUERY_RESULT_AVAILABLE_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_QUERY_RESULT_AVAILABLE_EXT),
/* harmony export */   "GL_QUERY_RESULT_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_QUERY_RESULT_EXT),
/* harmony export */   "GL_R11F_G11F_B10F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R11F_G11F_B10F),
/* harmony export */   "GL_R16F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R16F),
/* harmony export */   "GL_R16I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R16I),
/* harmony export */   "GL_R16UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R16UI),
/* harmony export */   "GL_R32F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R32F),
/* harmony export */   "GL_R32I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R32I),
/* harmony export */   "GL_R32UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R32UI),
/* harmony export */   "GL_R8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R8),
/* harmony export */   "GL_R8I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R8I),
/* harmony export */   "GL_R8UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R8UI),
/* harmony export */   "GL_R8_SNORM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_R8_SNORM),
/* harmony export */   "GL_RASTERIZER_DISCARD": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RASTERIZER_DISCARD),
/* harmony export */   "GL_READ_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_READ_BUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_READ_FRAMEBUFFER),
/* harmony export */   "GL_READ_FRAMEBUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_READ_FRAMEBUFFER_BINDING),
/* harmony export */   "GL_RED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RED),
/* harmony export */   "GL_RED_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RED_BITS),
/* harmony export */   "GL_RED_INTEGER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RED_INTEGER),
/* harmony export */   "GL_RENDERBUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER),
/* harmony export */   "GL_RENDERBUFFER_ALPHA_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_ALPHA_SIZE),
/* harmony export */   "GL_RENDERBUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_BINDING),
/* harmony export */   "GL_RENDERBUFFER_BLUE_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_BLUE_SIZE),
/* harmony export */   "GL_RENDERBUFFER_DEPTH_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_DEPTH_SIZE),
/* harmony export */   "GL_RENDERBUFFER_GREEN_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_GREEN_SIZE),
/* harmony export */   "GL_RENDERBUFFER_HEIGHT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_HEIGHT),
/* harmony export */   "GL_RENDERBUFFER_INTERNAL_FORMAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_INTERNAL_FORMAT),
/* harmony export */   "GL_RENDERBUFFER_RED_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_RED_SIZE),
/* harmony export */   "GL_RENDERBUFFER_SAMPLES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_SAMPLES),
/* harmony export */   "GL_RENDERBUFFER_STENCIL_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_STENCIL_SIZE),
/* harmony export */   "GL_RENDERBUFFER_WIDTH": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERBUFFER_WIDTH),
/* harmony export */   "GL_RENDERER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RENDERER),
/* harmony export */   "GL_REPEAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_REPEAT),
/* harmony export */   "GL_REPLACE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_REPLACE),
/* harmony export */   "GL_RG": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG),
/* harmony export */   "GL_RG16F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG16F),
/* harmony export */   "GL_RG16I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG16I),
/* harmony export */   "GL_RG16UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG16UI),
/* harmony export */   "GL_RG32F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG32F),
/* harmony export */   "GL_RG32I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG32I),
/* harmony export */   "GL_RG32UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG32UI),
/* harmony export */   "GL_RG8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG8),
/* harmony export */   "GL_RG8I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG8I),
/* harmony export */   "GL_RG8UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG8UI),
/* harmony export */   "GL_RG8_SNORM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG8_SNORM),
/* harmony export */   "GL_RGB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB),
/* harmony export */   "GL_RGB10_A2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB10_A2),
/* harmony export */   "GL_RGB10_A2UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB10_A2UI),
/* harmony export */   "GL_RGB16F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB16F),
/* harmony export */   "GL_RGB16I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB16I),
/* harmony export */   "GL_RGB16UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB16UI),
/* harmony export */   "GL_RGB32F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB32F),
/* harmony export */   "GL_RGB32F_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB32F_EXT),
/* harmony export */   "GL_RGB32I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB32I),
/* harmony export */   "GL_RGB32UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB32UI),
/* harmony export */   "GL_RGB565": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB565),
/* harmony export */   "GL_RGB5_A1": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB5_A1),
/* harmony export */   "GL_RGB8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB8),
/* harmony export */   "GL_RGB8I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB8I),
/* harmony export */   "GL_RGB8UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB8UI),
/* harmony export */   "GL_RGB8_SNORM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB8_SNORM),
/* harmony export */   "GL_RGB9_E5": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB9_E5),
/* harmony export */   "GL_RGBA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA),
/* harmony export */   "GL_RGBA16F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA16F),
/* harmony export */   "GL_RGBA16I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA16I),
/* harmony export */   "GL_RGBA16UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA16UI),
/* harmony export */   "GL_RGBA32F": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA32F),
/* harmony export */   "GL_RGBA32F_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA32F_EXT),
/* harmony export */   "GL_RGBA32I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA32I),
/* harmony export */   "GL_RGBA32UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA32UI),
/* harmony export */   "GL_RGBA4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA4),
/* harmony export */   "GL_RGBA8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA8),
/* harmony export */   "GL_RGBA8I": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA8I),
/* harmony export */   "GL_RGBA8UI": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA8UI),
/* harmony export */   "GL_RGBA8_SNORM": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA8_SNORM),
/* harmony export */   "GL_RGBA_INTEGER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGBA_INTEGER),
/* harmony export */   "GL_RGB_INTEGER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RGB_INTEGER),
/* harmony export */   "GL_RG_INTEGER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_RG_INTEGER),
/* harmony export */   "GL_SAMPLER_2D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_2D),
/* harmony export */   "GL_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_SAMPLER_2D_ARRAY_SHADOW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_2D_ARRAY_SHADOW),
/* harmony export */   "GL_SAMPLER_2D_SHADOW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_2D_SHADOW),
/* harmony export */   "GL_SAMPLER_3D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_3D),
/* harmony export */   "GL_SAMPLER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_BINDING),
/* harmony export */   "GL_SAMPLER_CUBE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_CUBE),
/* harmony export */   "GL_SAMPLER_CUBE_SHADOW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLER_CUBE_SHADOW),
/* harmony export */   "GL_SAMPLES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLES),
/* harmony export */   "GL_SAMPLE_ALPHA_TO_COVERAGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLE_ALPHA_TO_COVERAGE),
/* harmony export */   "GL_SAMPLE_BUFFERS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLE_BUFFERS),
/* harmony export */   "GL_SAMPLE_COVERAGE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLE_COVERAGE),
/* harmony export */   "GL_SAMPLE_COVERAGE_INVERT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLE_COVERAGE_INVERT),
/* harmony export */   "GL_SAMPLE_COVERAGE_VALUE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SAMPLE_COVERAGE_VALUE),
/* harmony export */   "GL_SCISSOR_BOX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SCISSOR_BOX),
/* harmony export */   "GL_SCISSOR_TEST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SCISSOR_TEST),
/* harmony export */   "GL_SEPARATE_ATTRIBS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SEPARATE_ATTRIBS),
/* harmony export */   "GL_SHADER_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SHADER_TYPE),
/* harmony export */   "GL_SHADING_LANGUAGE_VERSION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SHADING_LANGUAGE_VERSION),
/* harmony export */   "GL_SIGNALED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SIGNALED),
/* harmony export */   "GL_SIGNED_NORMALIZED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SIGNED_NORMALIZED),
/* harmony export */   "GL_SRC_ALPHA": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRC_ALPHA),
/* harmony export */   "GL_SRC_ALPHA_SATURATE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRC_ALPHA_SATURATE),
/* harmony export */   "GL_SRC_COLOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRC_COLOR),
/* harmony export */   "GL_SRGB": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB),
/* harmony export */   "GL_SRGB8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB8),
/* harmony export */   "GL_SRGB8_ALPHA8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB8_ALPHA8),
/* harmony export */   "GL_SRGB8_ALPHA8_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB8_ALPHA8_EXT),
/* harmony export */   "GL_SRGB_ALPHA_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB_ALPHA_EXT),
/* harmony export */   "GL_SRGB_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SRGB_EXT),
/* harmony export */   "GL_STATIC_COPY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STATIC_COPY),
/* harmony export */   "GL_STATIC_DRAW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STATIC_DRAW),
/* harmony export */   "GL_STATIC_READ": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STATIC_READ),
/* harmony export */   "GL_STENCIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL),
/* harmony export */   "GL_STENCIL_ATTACHMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_ATTACHMENT),
/* harmony export */   "GL_STENCIL_BACK_FAIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_FAIL),
/* harmony export */   "GL_STENCIL_BACK_FUNC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_FUNC),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_FAIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_BACK_PASS_DEPTH_PASS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_BACK_REF": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_REF),
/* harmony export */   "GL_STENCIL_BACK_VALUE_MASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_VALUE_MASK),
/* harmony export */   "GL_STENCIL_BACK_WRITEMASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BACK_WRITEMASK),
/* harmony export */   "GL_STENCIL_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BITS),
/* harmony export */   "GL_STENCIL_BUFFER_BIT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_BUFFER_BIT),
/* harmony export */   "GL_STENCIL_CLEAR_VALUE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_CLEAR_VALUE),
/* harmony export */   "GL_STENCIL_FAIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_FAIL),
/* harmony export */   "GL_STENCIL_FUNC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_FUNC),
/* harmony export */   "GL_STENCIL_INDEX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_INDEX),
/* harmony export */   "GL_STENCIL_INDEX8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_INDEX8),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_FAIL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_PASS_DEPTH_FAIL),
/* harmony export */   "GL_STENCIL_PASS_DEPTH_PASS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_PASS_DEPTH_PASS),
/* harmony export */   "GL_STENCIL_REF": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_REF),
/* harmony export */   "GL_STENCIL_TEST": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_TEST),
/* harmony export */   "GL_STENCIL_VALUE_MASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_VALUE_MASK),
/* harmony export */   "GL_STENCIL_WRITEMASK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STENCIL_WRITEMASK),
/* harmony export */   "GL_STREAM_COPY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STREAM_COPY),
/* harmony export */   "GL_STREAM_DRAW": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STREAM_DRAW),
/* harmony export */   "GL_STREAM_READ": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_STREAM_READ),
/* harmony export */   "GL_SUBPIXEL_BITS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SUBPIXEL_BITS),
/* harmony export */   "GL_SYNC_CONDITION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_CONDITION),
/* harmony export */   "GL_SYNC_FENCE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_FENCE),
/* harmony export */   "GL_SYNC_FLAGS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_FLAGS),
/* harmony export */   "GL_SYNC_FLUSH_COMMANDS_BIT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_FLUSH_COMMANDS_BIT),
/* harmony export */   "GL_SYNC_GPU_COMMANDS_COMPLETE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_GPU_COMMANDS_COMPLETE),
/* harmony export */   "GL_SYNC_STATUS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_SYNC_STATUS),
/* harmony export */   "GL_TEXTURE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE),
/* harmony export */   "GL_TEXTURE0": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE0),
/* harmony export */   "GL_TEXTURE1": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE1),
/* harmony export */   "GL_TEXTURE10": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE10),
/* harmony export */   "GL_TEXTURE11": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE11),
/* harmony export */   "GL_TEXTURE12": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE12),
/* harmony export */   "GL_TEXTURE13": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE13),
/* harmony export */   "GL_TEXTURE14": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE14),
/* harmony export */   "GL_TEXTURE15": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE15),
/* harmony export */   "GL_TEXTURE16": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE16),
/* harmony export */   "GL_TEXTURE17": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE17),
/* harmony export */   "GL_TEXTURE18": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE18),
/* harmony export */   "GL_TEXTURE19": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE19),
/* harmony export */   "GL_TEXTURE2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE2),
/* harmony export */   "GL_TEXTURE20": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE20),
/* harmony export */   "GL_TEXTURE21": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE21),
/* harmony export */   "GL_TEXTURE22": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE22),
/* harmony export */   "GL_TEXTURE23": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE23),
/* harmony export */   "GL_TEXTURE24": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE24),
/* harmony export */   "GL_TEXTURE25": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE25),
/* harmony export */   "GL_TEXTURE26": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE26),
/* harmony export */   "GL_TEXTURE27": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE27),
/* harmony export */   "GL_TEXTURE28": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE28),
/* harmony export */   "GL_TEXTURE29": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE29),
/* harmony export */   "GL_TEXTURE3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE3),
/* harmony export */   "GL_TEXTURE30": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE30),
/* harmony export */   "GL_TEXTURE31": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE31),
/* harmony export */   "GL_TEXTURE4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE4),
/* harmony export */   "GL_TEXTURE5": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE5),
/* harmony export */   "GL_TEXTURE6": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE6),
/* harmony export */   "GL_TEXTURE7": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE7),
/* harmony export */   "GL_TEXTURE8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE8),
/* harmony export */   "GL_TEXTURE9": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE9),
/* harmony export */   "GL_TEXTURE_2D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_2D),
/* harmony export */   "GL_TEXTURE_2D_ARRAY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_3D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_3D),
/* harmony export */   "GL_TEXTURE_BASE_LEVEL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_BASE_LEVEL),
/* harmony export */   "GL_TEXTURE_BINDING_2D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_BINDING_2D),
/* harmony export */   "GL_TEXTURE_BINDING_2D_ARRAY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_BINDING_2D_ARRAY),
/* harmony export */   "GL_TEXTURE_BINDING_3D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_BINDING_3D),
/* harmony export */   "GL_TEXTURE_BINDING_CUBE_MAP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_BINDING_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_COMPARE_FUNC": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_COMPARE_FUNC),
/* harmony export */   "GL_TEXTURE_COMPARE_MODE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_COMPARE_MODE),
/* harmony export */   "GL_TEXTURE_CUBE_MAP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_X": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_NEGATIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Y": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_NEGATIVE_Z": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_X": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_POSITIVE_X),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Y": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_POSITIVE_Y),
/* harmony export */   "GL_TEXTURE_CUBE_MAP_POSITIVE_Z": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_CUBE_MAP_POSITIVE_Z),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_FORMAT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_IMMUTABLE_FORMAT),
/* harmony export */   "GL_TEXTURE_IMMUTABLE_LEVELS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_IMMUTABLE_LEVELS),
/* harmony export */   "GL_TEXTURE_MAG_FILTER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MAG_FILTER),
/* harmony export */   "GL_TEXTURE_MAX_ANISOTROPY_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MAX_ANISOTROPY_EXT),
/* harmony export */   "GL_TEXTURE_MAX_LEVEL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MAX_LEVEL),
/* harmony export */   "GL_TEXTURE_MAX_LOD": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MAX_LOD),
/* harmony export */   "GL_TEXTURE_MIN_FILTER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MIN_FILTER),
/* harmony export */   "GL_TEXTURE_MIN_LOD": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_MIN_LOD),
/* harmony export */   "GL_TEXTURE_WRAP_R": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_WRAP_R),
/* harmony export */   "GL_TEXTURE_WRAP_S": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_WRAP_S),
/* harmony export */   "GL_TEXTURE_WRAP_T": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TEXTURE_WRAP_T),
/* harmony export */   "GL_TIMEOUT_EXPIRED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TIMEOUT_EXPIRED),
/* harmony export */   "GL_TIMEOUT_IGNORED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TIMEOUT_IGNORED),
/* harmony export */   "GL_TIMESTAMP_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TIMESTAMP_EXT),
/* harmony export */   "GL_TIME_ELAPSED_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TIME_ELAPSED_EXT),
/* harmony export */   "GL_TRANSFORM_FEEDBACK": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_ACTIVE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_ACTIVE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BUFFER),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BUFFER_BINDING),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_MODE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BUFFER_MODE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BUFFER_SIZE),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_BUFFER_START": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_BUFFER_START),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PAUSED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_PAUSED),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN),
/* harmony export */   "GL_TRANSFORM_FEEDBACK_VARYINGS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRANSFORM_FEEDBACK_VARYINGS),
/* harmony export */   "GL_TRIANGLES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRIANGLES),
/* harmony export */   "GL_TRIANGLE_FAN": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRIANGLE_FAN),
/* harmony export */   "GL_TRIANGLE_STRIP": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_TRIANGLE_STRIP),
/* harmony export */   "GL_UNIFORM_ARRAY_STRIDE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_ARRAY_STRIDE),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS),
/* harmony export */   "GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),
/* harmony export */   "GL_UNIFORM_BLOCK_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_BINDING),
/* harmony export */   "GL_UNIFORM_BLOCK_DATA_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_DATA_SIZE),
/* harmony export */   "GL_UNIFORM_BLOCK_INDEX": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_INDEX),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),
/* harmony export */   "GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),
/* harmony export */   "GL_UNIFORM_BUFFER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BUFFER),
/* harmony export */   "GL_UNIFORM_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BUFFER_BINDING),
/* harmony export */   "GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT),
/* harmony export */   "GL_UNIFORM_BUFFER_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BUFFER_SIZE),
/* harmony export */   "GL_UNIFORM_BUFFER_START": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_BUFFER_START),
/* harmony export */   "GL_UNIFORM_IS_ROW_MAJOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_IS_ROW_MAJOR),
/* harmony export */   "GL_UNIFORM_MATRIX_STRIDE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_MATRIX_STRIDE),
/* harmony export */   "GL_UNIFORM_OFFSET": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_OFFSET),
/* harmony export */   "GL_UNIFORM_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_SIZE),
/* harmony export */   "GL_UNIFORM_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNIFORM_TYPE),
/* harmony export */   "GL_UNMASKED_RENDERER_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNMASKED_RENDERER_WEBGL),
/* harmony export */   "GL_UNMASKED_VENDOR_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNMASKED_VENDOR_WEBGL),
/* harmony export */   "GL_UNPACK_ALIGNMENT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_ALIGNMENT),
/* harmony export */   "GL_UNPACK_COLORSPACE_CONVERSION_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_COLORSPACE_CONVERSION_WEBGL),
/* harmony export */   "GL_UNPACK_FLIP_Y_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_FLIP_Y_WEBGL),
/* harmony export */   "GL_UNPACK_IMAGE_HEIGHT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_IMAGE_HEIGHT),
/* harmony export */   "GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL),
/* harmony export */   "GL_UNPACK_ROW_LENGTH": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_ROW_LENGTH),
/* harmony export */   "GL_UNPACK_SKIP_IMAGES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_SKIP_IMAGES),
/* harmony export */   "GL_UNPACK_SKIP_PIXELS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_SKIP_PIXELS),
/* harmony export */   "GL_UNPACK_SKIP_ROWS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNPACK_SKIP_ROWS),
/* harmony export */   "GL_UNSIGNALED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNALED),
/* harmony export */   "GL_UNSIGNED_INT_10F_11F_11F_REV": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_10F_11F_11F_REV),
/* harmony export */   "GL_UNSIGNED_INT_24_8": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_24_8),
/* harmony export */   "GL_UNSIGNED_INT_24_8_WEBGL": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_24_8_WEBGL),
/* harmony export */   "GL_UNSIGNED_INT_2_10_10_10_REV": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_2_10_10_10_REV),
/* harmony export */   "GL_UNSIGNED_INT_5_9_9_9_REV": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_5_9_9_9_REV),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_SAMPLER_2D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_2D_ARRAY": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_SAMPLER_2D_ARRAY),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_3D": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_SAMPLER_3D),
/* harmony export */   "GL_UNSIGNED_INT_SAMPLER_CUBE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_SAMPLER_CUBE),
/* harmony export */   "GL_UNSIGNED_INT_VEC2": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_VEC2),
/* harmony export */   "GL_UNSIGNED_INT_VEC3": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_VEC3),
/* harmony export */   "GL_UNSIGNED_INT_VEC4": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_INT_VEC4),
/* harmony export */   "GL_UNSIGNED_NORMALIZED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_NORMALIZED),
/* harmony export */   "GL_UNSIGNED_NORMALIZED_EXT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_UNSIGNED_NORMALIZED_EXT),
/* harmony export */   "GL_VALIDATE_STATUS": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VALIDATE_STATUS),
/* harmony export */   "GL_VENDOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VENDOR),
/* harmony export */   "GL_VERSION": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERSION),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ARRAY_BINDING),
/* harmony export */   "GL_VERTEX_ARRAY_BINDING_OES": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ARRAY_BINDING_OES),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_DIVISOR),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_ENABLED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_ENABLED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_INTEGER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_INTEGER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_NORMALIZED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_NORMALIZED),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_POINTER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_POINTER),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_SIZE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_SIZE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_STRIDE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_STRIDE),
/* harmony export */   "GL_VERTEX_ATTRIB_ARRAY_TYPE": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_ATTRIB_ARRAY_TYPE),
/* harmony export */   "GL_VERTEX_SHADER": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VERTEX_SHADER),
/* harmony export */   "GL_VIEWPORT": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_VIEWPORT),
/* harmony export */   "GL_WAIT_FAILED": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_WAIT_FAILED),
/* harmony export */   "GL_ZERO": () => (/* reexport safe */ _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__.GL_ZERO),
/* harmony export */   "TagGltf2NodeIndex": () => (/* reexport safe */ _glTF2__WEBPACK_IMPORTED_MODULE_9__.TagGltf2NodeIndex),
/* harmony export */   "fromTensorToCompositionType": () => (/* reexport safe */ _TypeConverter__WEBPACK_IMPORTED_MODULE_4__.fromTensorToCompositionType),
/* harmony export */   "isSameGlTF2TextureSampler": () => (/* reexport safe */ _glTF2__WEBPACK_IMPORTED_MODULE_9__.isSameGlTF2TextureSampler)
/* harmony export */ });
/* harmony import */ __webpack_require__(/*! ./AnimationTypes */ "./src/types/AnimationTypes.ts");
/* harmony import */ __webpack_require__(/*! ./BasisTexture */ "./src/types/BasisTexture.ts");
/* harmony import */ __webpack_require__(/*! ./CommonTypes */ "./src/types/CommonTypes.ts");
/* harmony import */ __webpack_require__(/*! ./KTX2Texture */ "./src/types/KTX2Texture.ts");
/* harmony import */ var _TypeConverter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TypeConverter */ "./src/types/TypeConverter.ts");
/* harmony import */ __webpack_require__(/*! ./TypeGenerators */ "./src/types/TypeGenerators.ts");
/* harmony import */ __webpack_require__(/*! ./VRM */ "./src/types/VRM.ts");
/* harmony import */ var _WebGLConstants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WebGLConstants */ "./src/types/WebGLConstants.ts");
/* harmony import */ __webpack_require__(/*! ./glTF1 */ "./src/types/glTF1.ts");
/* harmony import */ var _glTF2__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./glTF2 */ "./src/types/glTF2.ts");
/* harmony import */ __webpack_require__(/*! ./glTF2ForOutput */ "./src/types/glTF2ForOutput.ts");
/* harmony import */ __webpack_require__(/*! ./RnM2 */ "./src/types/RnM2.ts");














/***/ }),

/***/ "./src/webgl/WebGLContextWrapper.ts":
/*!******************************************!*\
  !*** ./src/webgl/WebGLContextWrapper.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebGLContextWrapper": () => (/* binding */ WebGLContextWrapper)
/* harmony export */ });
/* harmony import */ var _WebGLExtension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLExtension */ "./src/webgl/WebGLExtension.ts");
/* harmony import */ var _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/core/Config */ "./src/foundation/core/Config.ts");
var __classPrivateFieldSet = function (receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
};
var __classPrivateFieldGet = function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _WebGLContextWrapper_alignedMaxUniformBlockSize, _WebGLContextWrapper_maxUniformBlockSize, _WebGLContextWrapper_uniformBufferOffsetAlignment, _WebGLContextWrapper_maxVertexUniformBlocks, _WebGLContextWrapper_maxFragmentUniformBlocks, _WebGLContextWrapper_maxConventionUniformBlocks;



const INVALID_SIZE = -1;
class WebGLContextWrapper {
    constructor(gl, canvas, isDebug) {
        this.__webglVersion = 1;
        this.width = 0;
        this.height = 0;
        this.__activeTextureBackup = -1;
        this.__activeTextures2D = [];
        this.__activeTexturesCube = [];
        this.__isDebugMode = false;
        this.__viewport_left = 0;
        this.__viewport_top = 0;
        this.__viewport_width = 0;
        this.__viewport_height = 0;
        this.__default_viewport_left = 0;
        this.__default_viewport_top = 0;
        this.__default_viewport_width = 0;
        this.__default_viewport_height = 0;
        _WebGLContextWrapper_alignedMaxUniformBlockSize.set(this, INVALID_SIZE);
        _WebGLContextWrapper_maxUniformBlockSize.set(this, INVALID_SIZE);
        _WebGLContextWrapper_uniformBufferOffsetAlignment.set(this, INVALID_SIZE);
        _WebGLContextWrapper_maxVertexUniformBlocks.set(this, INVALID_SIZE);
        _WebGLContextWrapper_maxFragmentUniformBlocks.set(this, INVALID_SIZE);
        _WebGLContextWrapper_maxConventionUniformBlocks.set(this, INVALID_SIZE);
        this.__maxVertexUniformVectors = INVALID_SIZE;
        this.__maxFragmentUniformVectors = INVALID_SIZE;
        this.__extensions = new Map();
        this.__gl = gl;
        this.width = canvas.width;
        this.height = canvas.height;
        this.canvas = canvas;
        this.__viewport_width = this.__default_viewport_width = this.width;
        this.__viewport_height = this.__default_viewport_height = this.height;
        this.__isDebugMode = isDebug;
        if (this.__gl.constructor.name === 'WebGL2RenderingContext') {
            this.__webglVersion = 2;
            this.webgl2ExtTFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureFloatLinear);
            this.webgl2ExtTFA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureFilterAnisotropic);
            this.webgl2ExtCTAstc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureAstc);
            this.webgl2ExtCTS3tc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureS3tc);
            this.webgl2ExtCTPvrtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTexturePvrtc);
            this.webgl2ExtCTAtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureAtc);
            this.webgl2ExtCTEtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureEtc);
            this.webgl2ExtCTEtc1 = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureEtc1);
            this.webgl2ExtCTBptc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureBptc);
        }
        else {
            this.webgl1ExtVAO = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.VertexArrayObject);
            this.webgl1ExtIA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.InstancedArrays);
            this.webgl1ExtTF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureFloat);
            this.webgl1ExtTHF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureHalfFloat);
            this.webgl1ExtTFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureFloatLinear);
            this.webgl1ExtTHFL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureHalfFloatLinear);
            this.webgl1ExtTFA = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.TextureFilterAnisotropic);
            this.webgl1ExtEIUI = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.ElementIndexUint);
            this.webgl1ExtSTL = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.ShaderTextureLod);
            this.webgl1ExtDRV = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.ShaderDerivatives);
            this.webgl1ExtDB = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.DrawBuffers);
            this.webgl1ExtBM = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.BlendMinmax);
            this.webgl1ExtCBF = this.__getExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.ColorBufferFloat);
            this.webgl1ExtCTAstc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureAstc);
            this.webgl1ExtCTS3tc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureS3tc);
            this.webgl1ExtCTPvrtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTexturePvrtc);
            this.webgl1ExtCTAtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureAtc);
            this.webgl1ExtCTEtc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureEtc);
            this.webgl1ExtCTEtc1 = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureEtc1);
            this.webgl1ExtCTBptc = this.__getCompressedTextureExtension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_0__.WebGLExtension.CompressedTextureBptc);
        }
        this.__getUniformBufferInfo();
        this.__getMaxUniformVectors();
    }
    getRawContext() {
        return this.__gl;
    }
    getRawContextAsWebGL1() {
        return this.__gl;
    }
    getRawContextAsWebGL2() {
        return this.__gl;
    }
    get viewport() {
        return _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_1__.Vector4.fromCopyArray([
            this.__viewport_left,
            this.__viewport_top,
            this.__viewport_width,
            this.__viewport_height,
        ]);
    }
    get defaultViewport() {
        return _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_1__.Vector4.fromCopyArray([
            this.__default_viewport_left,
            this.__default_viewport_top,
            this.__default_viewport_width,
            this.__default_viewport_height,
        ]);
    }
    isSupportWebGL1Extension(webGLExtension) {
        if (this.__getExtension(webGLExtension)) {
            return true;
        }
        else {
            return false;
        }
    }
    isNotSupportWebGL1Extension(webGLExtension) {
        return !this.isSupportWebGL1Extension(webGLExtension);
    }
    get isDebugMode() {
        return this.__isDebugMode;
    }
    getIsWebGL2(gl) {
        return this.isWebGL2;
    }
    get isWebGL2() {
        if (this.__webglVersion === 2) {
            return true;
        }
        else {
            return false;
        }
    }
    createVertexArray() {
        if (this.getIsWebGL2(this.__gl)) {
            return this.__gl.createVertexArray();
        }
        else {
            if (this.webgl1ExtVAO != null) {
                return this.webgl1ExtVAO.createVertexArrayOES();
            }
            else {
                return undefined;
            }
        }
    }
    deleteVertexArray(vertexArray) {
        if (this.getIsWebGL2(this.__gl)) {
            this.__gl.deleteVertexArray(vertexArray);
        }
        else {
            if (this.webgl1ExtVAO != null) {
                this.webgl1ExtVAO.deleteVertexArrayOES(vertexArray);
            }
        }
    }
    bindVertexArray(vao) {
        if (this.getIsWebGL2(this.__gl)) {
            this.__gl.bindVertexArray(vao);
        }
        else {
            if (this.webgl1ExtVAO != null) {
                this.webgl1ExtVAO.bindVertexArrayOES(vao);
            }
        }
    }
    vertexAttribDivisor(index, divisor) {
        if (this.getIsWebGL2(this.__gl)) {
            this.__gl.vertexAttribDivisor(index, divisor);
        }
        else {
            this.webgl1ExtIA.vertexAttribDivisorANGLE(index, divisor);
        }
    }
    drawElementsInstanced(primitiveMode, indexCount, type, offset, instanceCount) {
        if (this.getIsWebGL2(this.__gl)) {
            this.__gl.drawElementsInstanced(primitiveMode, indexCount, type, offset, instanceCount);
        }
        else {
            this.webgl1ExtIA.drawElementsInstancedANGLE(primitiveMode, indexCount, type, offset, instanceCount);
        }
    }
    drawArraysInstanced(primitiveMode, first, count, instanceCount) {
        if (this.getIsWebGL2(this.__gl)) {
            this.__gl.drawArraysInstanced(primitiveMode, first, count, instanceCount);
        }
        else {
            this.webgl1ExtIA.drawArraysInstancedANGLE(primitiveMode, first, count, instanceCount);
        }
    }
    colorAttachment(index) {
        return 0x8ce0 + index; // GL_COLOR_ATTACHMENT0 = 0x8ce0
    }
    drawBuffers(buffers) {
        const gl = this.__gl;
        if (buffers.length === 0) {
            return;
        }
        const buffer = buffers[0].webGLConstantValue();
        if (this.getIsWebGL2(gl)) {
            gl.drawBuffers(buffers.map(buf => {
                return buf.webGLConstantValue();
            }));
        }
        else if (this.webgl1ExtDB) {
            this.webgl1ExtDB.drawBuffersWEBGL(buffers.map(buf => {
                return buf.webGLConstantValue();
            }));
        }
        if (buffer === gl.NONE) {
            gl.colorMask(false, false, false, false);
        }
        else {
            gl.colorMask(true, true, true, true);
        }
    }
    __activeTexture(activeTextureIndex) {
        if (this.__activeTextureBackup === activeTextureIndex) {
            return;
        }
        switch (activeTextureIndex) {
            case 0:
                this.__gl.activeTexture(this.__gl.TEXTURE0);
                break;
            case 1:
                this.__gl.activeTexture(this.__gl.TEXTURE1);
                break;
            case 2:
                this.__gl.activeTexture(this.__gl.TEXTURE2);
                break;
            case 3:
                this.__gl.activeTexture(this.__gl.TEXTURE3);
                break;
            case 4:
                this.__gl.activeTexture(this.__gl.TEXTURE4);
                break;
            case 5:
                this.__gl.activeTexture(this.__gl.TEXTURE5);
                break;
            case 6:
                this.__gl.activeTexture(this.__gl.TEXTURE6);
                break;
            case 7:
                this.__gl.activeTexture(this.__gl.TEXTURE7);
                break;
            case 8:
                this.__gl.activeTexture(this.__gl.TEXTURE8);
                break;
            case 9:
                this.__gl.activeTexture(this.__gl.TEXTURE9);
                break;
            case 10:
                this.__gl.activeTexture(this.__gl.TEXTURE10);
                break;
            case 11:
                this.__gl.activeTexture(this.__gl.TEXTURE11);
                break;
            case 12:
                this.__gl.activeTexture(this.__gl.TEXTURE12);
                break;
            case 13:
                this.__gl.activeTexture(this.__gl.TEXTURE13);
                break;
            case 14:
                this.__gl.activeTexture(this.__gl.TEXTURE14);
                break;
            case 15:
                this.__gl.activeTexture(this.__gl.TEXTURE15);
                break;
        }
        this.__activeTextureBackup = activeTextureIndex;
    }
    bindTexture2D(activeTextureIndex, texture) {
        if (this.__isDebugMode) {
            if (texture) {
                if (texture._bound_as === 'CUBE_MAP') {
                    debugger;
                }
                texture._bound_as = '2D';
            }
        }
        if (!_foundation_core_Config__WEBPACK_IMPORTED_MODULE_2__.Config.noWebGLTex2DStateCache &&
            this.__activeTextures2D[activeTextureIndex] === texture) {
            return;
        }
        this.__activeTexture(activeTextureIndex);
        this.__gl.bindTexture(this.__gl.TEXTURE_2D, texture);
        this.__activeTextures2D[activeTextureIndex] = texture;
    }
    bindTextureCube(activeTextureIndex, texture) {
        if (this.__isDebugMode) {
            if (texture) {
                if (texture._bound_as === '2D') {
                    debugger;
                }
                texture._bound_as = 'CUBE_MAP';
            }
        }
        if (this.__activeTexturesCube[activeTextureIndex] === texture) {
            return;
        }
        this.__activeTexture(activeTextureIndex);
        this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, texture);
        this.__activeTexturesCube[activeTextureIndex] = texture;
    }
    unbindTexture2D(activeTextureIndex) {
        this.__activeTexture(activeTextureIndex);
        this.__gl.bindTexture(this.__gl.TEXTURE_2D, null);
        delete this.__activeTextures2D[activeTextureIndex];
    }
    unbindTextureCube(activeTextureIndex) {
        this.__activeTexture(activeTextureIndex);
        this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, null);
        delete this.__activeTexturesCube[activeTextureIndex];
    }
    unbindTextures() {
        for (let i = 0; i < this.__activeTextures2D.length; i++) {
            if (this.__activeTextures2D[i] == null) {
                continue;
            }
            this.__activeTexture(i);
            this.__gl.bindTexture(this.__gl.TEXTURE_2D, null);
            delete this.__activeTextures2D[i];
        }
        for (let i = 0; i < this.__activeTexturesCube.length; i++) {
            if (this.__activeTexturesCube[i] == null) {
                continue;
            }
            this.__activeTexture(i);
            this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP, null);
            delete this.__activeTexturesCube[i];
        }
    }
    __getExtension(extension) {
        const gl = this.__gl;
        if (!this.__extensions.has(extension)) {
            const extObj = gl.getExtension(extension.toString());
            if (extObj == null) {
                const text = `${extension.toString()} Not Available in this environment`;
                console.warn(text);
            }
            this.__extensions.set(extension, extObj);
            return extObj;
        }
        return this.__extensions.get(extension);
    }
    __getCompressedTextureExtension(extension) {
        var _a, _b;
        const gl = this.__gl;
        if (!this.__extensions.has(extension)) {
            const extensionName = extension.toString();
            const extObj = (_b = (_a = gl.getExtension(extensionName)) !== null && _a !== void 0 ? _a : gl.getExtension('MOZ_' + extensionName)) !== null && _b !== void 0 ? _b : gl.getExtension('WEBKIT_' + extensionName);
            if (extObj == null) {
                const text = `${extension.toString()} Not Available in this environment`;
                console.warn(text);
            }
            else {
                this.__extensions.set(extension, extObj);
            }
            return extObj;
        }
        return this.__extensions.get(extension);
    }
    setViewport(left, top, width, height) {
        const gl = this.__gl;
        if (this.__viewport_width !== width ||
            this.__viewport_height !== height ||
            this.__viewport_left !== left ||
            this.__viewport_top !== top) {
            gl.viewport(left, top, width, height);
            this.__viewport_left = left;
            this.__viewport_top = top;
            this.__viewport_width = width;
            this.__viewport_height = height;
        }
    }
    setViewportAsVector4(viewport) {
        const gl = this.__gl;
        if (this.__viewport_width !== viewport.z ||
            this.__viewport_height !== viewport.w ||
            this.__viewport_left !== viewport.x ||
            this.__viewport_top !== viewport.y) {
            gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);
            this.__viewport_left = viewport.x;
            this.__viewport_top = viewport.y;
            this.__viewport_width = viewport.z;
            this.__viewport_height = viewport.w;
        }
    }
    __getUniformBufferInfo() {
        if (!this.isWebGL2) {
            return;
        }
        const gl = this.__gl;
        const offsetAlignment = gl.getParameter(gl.UNIFORM_BUFFER_OFFSET_ALIGNMENT);
        const maxBlockSize = gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE);
        __classPrivateFieldSet(this, _WebGLContextWrapper_maxVertexUniformBlocks, gl.getParameter(gl.MAX_VERTEX_UNIFORM_BLOCKS), "f");
        __classPrivateFieldSet(this, _WebGLContextWrapper_maxFragmentUniformBlocks, gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_BLOCKS), "f");
        __classPrivateFieldSet(this, _WebGLContextWrapper_maxConventionUniformBlocks, Math.min(__classPrivateFieldGet(this, _WebGLContextWrapper_maxVertexUniformBlocks, "f"), __classPrivateFieldGet(this, _WebGLContextWrapper_maxFragmentUniformBlocks, "f")), "f");
        __classPrivateFieldSet(this, _WebGLContextWrapper_alignedMaxUniformBlockSize, maxBlockSize - (maxBlockSize % offsetAlignment), "f");
        __classPrivateFieldSet(this, _WebGLContextWrapper_uniformBufferOffsetAlignment, offsetAlignment, "f");
        __classPrivateFieldSet(this, _WebGLContextWrapper_maxUniformBlockSize, maxBlockSize, "f");
    }
    __getMaxUniformVectors() {
        const gl = this.getRawContext();
        this.__maxVertexUniformVectors = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
        this.__maxVertexUniformVectors = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
    }
    getMaxConventionUniformBlocks() {
        return __classPrivateFieldGet(this, _WebGLContextWrapper_maxConventionUniformBlocks, "f");
    }
    getAlignedMaxUniformBlockSize() {
        return __classPrivateFieldGet(this, _WebGLContextWrapper_alignedMaxUniformBlockSize, "f");
    }
    getMaxVertexUniformVectors() {
        return this.__maxVertexUniformVectors;
    }
    getMaxFragmentUniformVectors() {
        return this.__maxFragmentUniformVectors;
    }
}
_WebGLContextWrapper_alignedMaxUniformBlockSize = new WeakMap(), _WebGLContextWrapper_maxUniformBlockSize = new WeakMap(), _WebGLContextWrapper_uniformBufferOffsetAlignment = new WeakMap(), _WebGLContextWrapper_maxVertexUniformBlocks = new WeakMap(), _WebGLContextWrapper_maxFragmentUniformBlocks = new WeakMap(), _WebGLContextWrapper_maxConventionUniformBlocks = new WeakMap();


/***/ }),

/***/ "./src/webgl/WebGLExtendedTypes.ts":
/*!*****************************************!*\
  !*** ./src/webgl/WebGLExtendedTypes.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/webgl/WebGLExtension.ts":
/*!*************************************!*\
  !*** ./src/webgl/WebGLExtension.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebGLExtension": () => (/* binding */ WebGLExtension)
/* harmony export */ });
/* harmony import */ var _foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/misc/EnumIO */ "./src/foundation/misc/EnumIO.ts");

class WebGLExtensionClass extends _foundation_misc_EnumIO__WEBPACK_IMPORTED_MODULE_0__.EnumClass {
    constructor({ index, str }) {
        super({ index, str });
    }
}
const VertexArrayObject = new WebGLExtensionClass({
    index: 1,
    str: 'OES_vertex_array_object',
});
const TextureFloat = new WebGLExtensionClass({
    index: 2,
    str: 'OES_texture_float',
});
const TextureHalfFloat = new WebGLExtensionClass({
    index: 3,
    str: 'OES_texture_half_float',
});
const TextureFloatLinear = new WebGLExtensionClass({
    index: 4,
    str: 'OES_texture_float_linear',
});
const TextureHalfFloatLinear = new WebGLExtensionClass({
    index: 5,
    str: 'OES_texture_half_float_linear',
});
const InstancedArrays = new WebGLExtensionClass({
    index: 6,
    str: 'ANGLE_instanced_arrays',
});
const TextureFilterAnisotropic = new WebGLExtensionClass({
    index: 7,
    str: 'EXT_texture_filter_anisotropic',
});
const ElementIndexUint = new WebGLExtensionClass({
    index: 8,
    str: 'OES_element_index_uint',
});
const ShaderTextureLod = new WebGLExtensionClass({
    index: 9,
    str: 'EXT_shader_texture_lod',
});
const ShaderDerivatives = new WebGLExtensionClass({
    index: 10,
    str: 'OES_standard_derivatives',
});
const DrawBuffers = new WebGLExtensionClass({
    index: 11,
    str: 'WEBGL_draw_buffers',
});
const BlendMinmax = new WebGLExtensionClass({
    index: 12,
    str: 'EXT_blend_minmax',
});
const ColorBufferFloat = new WebGLExtensionClass({
    index: 13,
    str: 'WEBGL_color_buffer_float',
});
const CompressedTextureAstc = new WebGLExtensionClass({
    index: 14,
    str: 'WEBGL_compressed_texture_astc',
});
const CompressedTextureS3tc = new WebGLExtensionClass({
    index: 15,
    str: 'WEBGL_compressed_texture_s3tc',
});
const CompressedTexturePvrtc = new WebGLExtensionClass({
    index: 16,
    str: 'WEBGL_compressed_texture_pvrtc',
});
const CompressedTextureAtc = new WebGLExtensionClass({
    index: 17,
    str: 'WEBGL_compressed_texture_atc',
});
const CompressedTextureEtc = new WebGLExtensionClass({
    index: 18,
    str: 'WEBGL_compressed_texture_etc',
});
const CompressedTextureEtc1 = new WebGLExtensionClass({
    index: 19,
    str: 'WEBGL_compressed_texture_etc1',
});
const CompressedTextureBptc = new WebGLExtensionClass({
    index: 20,
    str: 'EXT_texture_compression_bptc',
});
const WebGLExtension = Object.freeze({
    VertexArrayObject,
    TextureFloat,
    TextureHalfFloat,
    TextureFloatLinear,
    TextureHalfFloatLinear,
    InstancedArrays,
    TextureFilterAnisotropic,
    ElementIndexUint,
    ShaderTextureLod,
    ShaderDerivatives,
    DrawBuffers,
    BlendMinmax,
    ColorBufferFloat,
    CompressedTextureAstc,
    CompressedTextureS3tc,
    CompressedTexturePvrtc,
    CompressedTextureAtc,
    CompressedTextureEtc,
    CompressedTextureEtc1,
    CompressedTextureBptc,
});


/***/ }),

/***/ "./src/webgl/WebGLResourceRepository.ts":
/*!**********************************************!*\
  !*** ./src/webgl/WebGLResourceRepository.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebGLResourceRepository": () => (/* binding */ WebGLResourceRepository)
/* harmony export */ });
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebGLContextWrapper */ "./src/webgl/WebGLContextWrapper.ts");
/* harmony import */ var _foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/math/MathUtil */ "./src/foundation/math/MathUtil.ts");
/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/textures/AbstractTexture */ "./src/foundation/textures/AbstractTexture.ts");
/* harmony import */ var _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/textures/RenderTargetTexture */ "./src/foundation/textures/RenderTargetTexture.ts");
/* harmony import */ var _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/definitions/HdriFormat */ "./src/foundation/definitions/HdriFormat.ts");
/* harmony import */ var _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/definitions/RenderBufferTarget */ "./src/foundation/definitions/RenderBufferTarget.ts");
/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _foundation_misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/misc/DataUtil */ "./src/foundation/misc/DataUtil.ts");
/* harmony import */ var _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../foundation/definitions/BasisCompressionType */ "./src/foundation/definitions/BasisCompressionType.ts");
/* harmony import */ var _WebGLExtension__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./WebGLExtension */ "./src/webgl/WebGLExtension.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _foundation_system_System__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../foundation/system/System */ "./src/foundation/system/System.ts");
/* harmony import */ var _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./getRenderingStrategy */ "./src/webgl/getRenderingStrategy.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../foundation/core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _types_WebGLConstants__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../types/WebGLConstants */ "./src/types/WebGLConstants.ts");























class WebGLResourceRepository extends _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository {
    constructor() {
        super();
        this.__webglContexts = new Map();
        this.__resourceCounter = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__webglResources = new Map();
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new WebGLResourceRepository();
        }
        return this.__instance;
    }
    addWebGLContext(gl, canvas, asCurrent, isDebug) {
        const glw = new _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_6__.WebGLContextWrapper(gl, canvas, isDebug);
        this.__webglContexts.set('default', glw);
        if (asCurrent) {
            this.__glw = glw;
        }
    }
    generateWebGLContext(canvas, version, asCurrent, isDebug, webglOption, fallback = true) {
        let gl;
        if (version === 2) {
            gl = canvas.getContext('webgl2', webglOption);
            if (fallback && _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(gl)) {
                gl = canvas.getContext('webgl', webglOption);
                console.warn('WebGL2 Not Supported. Fallback to WebGL1.');
                return gl;
            }
        }
        else {
            gl = canvas.getContext('webgl', webglOption);
        }
        this.addWebGLContext(gl, canvas, asCurrent, isDebug);
        if (_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.isSafari()) {
            // Safari (WebGL2 via Metal) does't support UBO properly at 2022/04/15
            _foundation_core_Config__WEBPACK_IMPORTED_MODULE_21__.Config.isUboEnabled = false;
        }
        return gl;
    }
    get currentWebGLContextWrapper() {
        return this.__glw;
    }
    getResourceNumber() {
        return ++this.__resourceCounter;
    }
    __registerResource(obj) {
        const handle = this.getResourceNumber();
        obj._resourceUid = handle;
        this.__webglResources.set(handle, obj);
        return handle;
    }
    getWebGLResource(WebGLResourceHandle) {
        const result = this.__webglResources.get(WebGLResourceHandle);
        return result !== null && result !== void 0 ? result : null;
    }
    createIndexBuffer(accessor) {
        const gl = this.__glw.getRawContext();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        this.__glw.bindVertexArray(null);
        const ibo = gl.createBuffer();
        const resourceHandle = this.__registerResource(ibo);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);
        //    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accessor.bufferView.buffer.getArrayBuffer(), gl.STATIC_DRAW);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
        return resourceHandle;
    }
    updateIndexBuffer(accessor, resourceHandle) {
        const glw = this.__glw;
        const gl = glw === null || glw === void 0 ? void 0 : glw.getRawContext();
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(gl)) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const ibo = this.__webglResources.get(resourceHandle);
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(ibo)) {
            throw new Error('Not found VBO.');
        }
        glw.bindVertexArray(null);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);
        gl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER, 0, accessor.getTypedArray());
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
    }
    createVertexBuffer(accessor) {
        const gl = this.__glw.getRawContext();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        this.__glw.bindVertexArray(null);
        const vbo = gl.createBuffer();
        const resourceHandle = this.__registerResource(vbo);
        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
        gl.bufferData(gl.ARRAY_BUFFER, accessor.bufferView.getUint8Array(), gl.STATIC_DRAW);
        //    gl.bufferData(gl.ARRAY_BUFFER, accessor.getTypedArray(), gl.STATIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        return resourceHandle;
    }
    createVertexBufferFromTypedArray(typedArray) {
        const gl = this.__glw.getRawContext();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        this.__glw.bindVertexArray(null);
        const vbo = gl.createBuffer();
        const resourceHandle = this.__registerResource(vbo);
        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
        gl.bufferData(gl.ARRAY_BUFFER, typedArray, gl.STATIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        return resourceHandle;
    }
    updateVertexBuffer(accessor, resourceHandle) {
        const glw = this.__glw;
        const gl = glw === null || glw === void 0 ? void 0 : glw.getRawContext();
        if (!_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(gl)) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const vbo = this.__webglResources.get(resourceHandle);
        if (!_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(vbo)) {
            throw new Error('Not found VBO.');
        }
        glw.bindVertexArray(null);
        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
        gl.bufferSubData(gl.ARRAY_BUFFER, 0, accessor.bufferView.getUint8Array());
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
    }
    createVertexArray() {
        const gl = this.__glw;
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const vao = this.__glw.createVertexArray();
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(vao)) {
            return undefined;
        }
        const resourceHandle = this.__registerResource(vao);
        return resourceHandle;
    }
    /**
     * bind the Texture2D
     * @param textureSlotIndex
     * @param textureUid
     */
    bindTexture2D(textureSlotIndex, textureUid) {
        const texture = this.getWebGLResource(textureUid);
        this.__glw.bindTexture2D(textureSlotIndex, texture);
    }
    /**
     * bind the TextureCube
     * @param textureSlotIndex
     * @param textureUid
     */
    bindTextureCube(textureSlotIndex, textureUid) {
        const texture = this.getWebGLResource(textureUid);
        this.__glw.bindTextureCube(textureSlotIndex, texture);
    }
    /**
     * create a VertexBuffer and IndexBuffer
     * @param primitive
     * @returns
     */
    createVertexBufferAndIndexBuffer(primitive) {
        let iboHandle;
        if (primitive.hasIndices()) {
            iboHandle = this.createIndexBuffer(primitive.indicesAccessor);
        }
        const attributesFlags = [];
        for (let i = 0; i < _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.AttributeTypeNumber; i++) {
            attributesFlags[i] = false;
        }
        const vboHandles = [];
        primitive.attributeAccessors.forEach((accessor, i) => {
            const vboHandle = this.createVertexBuffer(accessor);
            const slotIdx = _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.toAttributeSlotFromJoinedString(primitive.attributeSemantics[i]);
            attributesFlags[slotIdx] = true;
            vboHandles.push(vboHandle);
        });
        return {
            vaoHandle: -1,
            iboHandle: iboHandle,
            vboHandles: vboHandles,
            attributesFlags: attributesFlags,
            setComplete: false,
        };
    }
    /**
     * update the VertexBuffer and IndexBuffer
     * @param primitive
     * @param vertexHandles
     */
    updateVertexBufferAndIndexBuffer(primitive, vertexHandles) {
        if (vertexHandles.iboHandle) {
            this.updateIndexBuffer(primitive.indicesAccessor, vertexHandles.iboHandle);
        }
        const attributeAccessors = primitive.attributeAccessors;
        for (let i = 0; i < attributeAccessors.length; i++) {
            this.updateVertexBuffer(attributeAccessors[i], vertexHandles.vboHandles[i]);
        }
    }
    /**
     * create a shader program
     * @param param0
     * @returns
     */
    createShaderProgram({ material, vertexShaderStr, fragmentShaderStr, attributeNames, attributeSemantics, }) {
        const gl = this.__glw.getRawContext();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const isDebugMode = this.__glw.isDebugMode;
        const vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vertexShaderStr);
        gl.compileShader(vertexShader);
        if (isDebugMode) {
            this.__checkShaderCompileStatus(material.materialTypeName, vertexShader, vertexShaderStr);
        }
        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, fragmentShaderStr);
        gl.compileShader(fragmentShader);
        if (isDebugMode) {
            this.__checkShaderCompileStatus(material.materialTypeName, fragmentShader, fragmentShaderStr);
        }
        const shaderProgram = gl.createProgram();
        shaderProgram._gl = gl;
        shaderProgram._materialTypeName = material.materialTypeName;
        shaderProgram._vertexShaderStr = vertexShaderStr;
        shaderProgram._fragmentShaderStr = fragmentShaderStr;
        shaderProgram._shaderSemanticsInfoMap = new Map();
        shaderProgram._material = material;
        gl.attachShader(shaderProgram, vertexShader);
        gl.attachShader(shaderProgram, fragmentShader);
        attributeNames.forEach((attributeName, i) => {
            gl.bindAttribLocation(shaderProgram, attributeSemantics[i].getAttributeSlot(), attributeName);
        });
        gl.linkProgram(shaderProgram);
        shaderProgram.__SPECTOR_rebuildProgram =
            this.rebuildProgram.bind(shaderProgram);
        if (isDebugMode) {
            this.__checkShaderProgramLinkStatus(material.materialTypeName, shaderProgram, vertexShaderStr, fragmentShaderStr);
        }
        const resourceHandle = this.__registerResource(shaderProgram);
        gl.deleteShader(vertexShader);
        gl.deleteShader(fragmentShader);
        return resourceHandle;
    }
    __checkShaderCompileStatus(materialTypeName, shader, shaderText) {
        const glw = this.__glw;
        const gl = glw.getRawContext();
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is["false"](gl.getShaderParameter(shader, gl.COMPILE_STATUS)) &&
            _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is["false"](gl.isContextLost())) {
            console.log('MaterialTypeName: ' + materialTypeName);
            console.log(_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.addLineNumberToCode(shaderText));
            throw new Error('An error occurred compiling the shaders:' + gl.getShaderInfoLog(shader));
        }
    }
    __checkShaderProgramLinkStatus(materialTypeName, shaderProgram, vertexShaderText, fragmentShaderText) {
        const glw = this.__glw;
        const gl = glw.getRawContext();
        // If creating the shader program failed, alert
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is["false"](gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) &&
            _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is["false"](gl.isContextLost())) {
            console.log('MaterialTypeName: ' + materialTypeName);
            console.log(_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.addLineNumberToCode('Vertex Shader:'));
            console.log(_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.addLineNumberToCode(vertexShaderText));
            console.log(_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.addLineNumberToCode('Fragment Shader:'));
            console.log(_foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_14__.MiscUtil.addLineNumberToCode(fragmentShaderText));
            throw new Error('Unable to initialize the shader program: ' +
                gl.getProgramInfoLog(shaderProgram));
        }
    }
    /**
     * setup the uniform locations
     * @param shaderProgramUid
     * @param infoArray
     * @param isUniformOnlyMode
     * @returns
     */
    setupUniformLocations(shaderProgramUid, infoArray, isUniformOnlyMode) {
        const glw = this.__glw;
        const gl = glw.getRawContext();
        const shaderProgram = this.getWebGLResource(shaderProgramUid);
        const infoArrayLen = infoArray.length;
        for (let i = 0; i < infoArrayLen; i++) {
            const info = infoArray[i];
            shaderProgram._shaderSemanticsInfoMap.set(info.semantic.str, info);
        }
        for (let i = 0; i < infoArrayLen; i++) {
            const info = infoArray[i];
            const isUniformExist = isUniformOnlyMode ||
                info.needUniformInFastest ||
                _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.isTexture(info.compositionType);
            if (isUniformExist) {
                const semanticSingular = info.semantic.str;
                const identifier = semanticSingular;
                let shaderVarName = _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__.ShaderSemantics.fullSemanticStr(info);
                if (info.none_u_prefix !== true) {
                    shaderVarName = 'u_' + shaderVarName;
                }
                const location = gl.getUniformLocation(shaderProgram, shaderVarName);
                const _shaderProgram = shaderProgram;
                _shaderProgram[identifier] = location;
                if (location == null && glw.isDebugMode) {
                    console.warn(`Rn: Can not get the uniform location: ${shaderVarName}`);
                }
            }
        }
        return shaderProgram;
    }
    setupBasicUniformLocations(shaderProgramUid) {
        const shaderProgram = this.getWebGLResource(shaderProgramUid);
        const gl = this.currentWebGLContextWrapper.getRawContext();
        shaderProgram.dataTexture = gl.getUniformLocation(shaderProgram, 'u_dataTexture');
        shaderProgram.currentComponentSIDs = gl.getUniformLocation(shaderProgram, 'u_currentComponentSIDs');
    }
    /**
     * set an uniform value
     */
    setUniformValue(shaderProgram_, semanticStr, firstTime, value) {
        const shaderProgram = shaderProgram_;
        const info = shaderProgram._shaderSemanticsInfoMap.get(semanticStr);
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(info)) {
            return false;
        }
        let setAsMatrix = false;
        let componentNumber = 0;
        if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Mat3) {
            setAsMatrix = true;
            componentNumber = 3;
        }
        else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Mat4) {
            setAsMatrix = true;
            componentNumber = 4;
        }
        else {
            componentNumber = info.compositionType.getNumberOfComponents();
        }
        const isCompositionTypeArray = info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.ScalarArray ||
            info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec4Array ||
            info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec3Array ||
            info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Vec2Array;
        const isCompositionTypeTexture = info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Texture2D ||
            info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.TextureCube;
        const key = semanticStr;
        let updated = false;
        if (isCompositionTypeTexture) {
            updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, false, { x: value[0] });
            this.bindTexture(info, value);
        }
        else if (isCompositionTypeArray) {
            if (value._v == null) {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, true, { x: value });
            }
            else {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, true, { x: value._v });
            }
        }
        else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar) {
            if (value._v == null) {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, false, { x: value });
            }
            else {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, true, { x: value._v });
            }
        }
        else {
            // if CompositionType.Vec*|Mat*, then...
            if (value._v == null) {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, false, value);
            }
            else {
                updated = this.setUniformValueInner(shaderProgram_, key, info, setAsMatrix, componentNumber, true, { x: value._v });
            }
        }
        return updated;
    }
    /**
     * bind the texture
     * @param info
     * @param value
     */
    bindTexture(info, value) {
        if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Texture2D) {
            this.bindTexture2D(value[0], value[1] instanceof _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__.AbstractTexture
                ? value[1].cgApiResourceUid
                : value[1]);
        }
        else if (info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.TextureCube) {
            this.bindTextureCube(value[0], value[1] instanceof _foundation_textures_AbstractTexture__WEBPACK_IMPORTED_MODULE_9__.AbstractTexture
                ? value[1].cgApiResourceUid
                : value[1]);
        }
    }
    /**
     * set the uniform value
     * @param shaderProgram
     * @param semanticStr
     * @param info
     * @param isMatrix
     * @param componentNumber
     * @param isVector
     * @param param6
     * @param index
     * @returns
     */
    setUniformValueInner(shaderProgram, semanticStr, info, isMatrix, componentNumber, isVector, { x, y, z, w, }) {
        const identifier = semanticStr;
        const loc = shaderProgram[identifier];
        if (loc == null) {
            return false;
        }
        const uLocation = loc;
        const gl = this.__glw.getRawContext();
        if (isMatrix) {
            if (componentNumber === 4) {
                gl.uniformMatrix4fv(uLocation, false, x);
            }
            else {
                gl.uniformMatrix3fv(uLocation, false, x);
            }
        }
        else if (isVector) {
            const componentType = info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int ||
                info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Short ||
                info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Byte;
            if (componentNumber === 1) {
                if (componentType) {
                    gl.uniform1iv(uLocation, x);
                }
                else {
                    gl.uniform1fv(uLocation, x);
                }
            }
            else if (componentNumber === 2) {
                if (componentType) {
                    gl.uniform2iv(uLocation, x);
                }
                else {
                    gl.uniform2fv(uLocation, x);
                }
            }
            else if (componentNumber === 3) {
                if (componentType) {
                    gl.uniform3iv(uLocation, x);
                }
                else {
                    gl.uniform3fv(uLocation, x);
                }
            }
            else if (componentNumber === 4) {
                if (componentType) {
                    gl.uniform4iv(uLocation, x);
                }
                else {
                    gl.uniform4fv(uLocation, x);
                }
            }
        }
        else {
            const componentType = info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Int ||
                info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Short ||
                info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Byte;
            if (componentNumber === 1) {
                if (componentType) {
                    gl.uniform1i(uLocation, x);
                }
                else {
                    gl.uniform1f(uLocation, x);
                }
            }
            else if (componentNumber === 2) {
                if (componentType) {
                    gl.uniform2i(uLocation, x, y);
                }
                else {
                    gl.uniform2f(uLocation, x, y);
                }
            }
            else if (componentNumber === 3) {
                if (componentType) {
                    gl.uniform3i(uLocation, x, y, z);
                }
                else {
                    gl.uniform3f(uLocation, x, y, z);
                }
            }
            else if (componentNumber === 4) {
                if (componentType) {
                    gl.uniform4i(uLocation, x, y, z, w);
                }
                else {
                    gl.uniform4f(uLocation, x, y, z, w);
                }
            }
        }
        return true;
    }
    /**
     * set the VertexData to the Pipeline
     */
    setVertexDataToPipeline({ vaoHandle, iboHandle, vboHandles, }, primitive, instanceIDBufferUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
        const gl = this.__glw.getRawContext();
        const vao = this.getWebGLResource(vaoHandle);
        // VAO bind
        this.__glw.bindVertexArray(vao);
        // IBO bind
        if (iboHandle != null) {
            const ibo = this.getWebGLResource(iboHandle);
            if (ibo != null) {
                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);
            }
            else {
                throw new Error('Nothing Element Array Buffer!');
            }
        }
        // bind vertex attributes to VBO's
        vboHandles.forEach((vboHandle, i) => {
            const vbo = this.getWebGLResource(vboHandle);
            if (vbo != null) {
                gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
            }
            else {
                throw new Error('Nothing Element Array Buffer at index ' + i);
            }
            gl.enableVertexAttribArray(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.toAttributeSlotFromJoinedString(primitive.attributeSemantics[i]));
            gl.vertexAttribPointer(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.toAttributeSlotFromJoinedString(primitive.attributeSemantics[i]), primitive.attributeCompositionTypes[i].getNumberOfComponents(), primitive.attributeComponentTypes[i].index, primitive.attributeAccessors[i].normalized, primitive.attributeAccessors[i].byteStride, primitive.attributeAccessors[i].byteOffsetInBufferView);
        });
        /// for InstanceIDBuffer
        if (instanceIDBufferUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
            const instanceIDBuffer = this.getWebGLResource(instanceIDBufferUid);
            if (instanceIDBuffer != null) {
                gl.bindBuffer(gl.ARRAY_BUFFER, instanceIDBuffer);
            }
            else {
                throw new Error('Nothing Element Array Buffer at index');
            }
            gl.enableVertexAttribArray(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Instance.getAttributeSlot());
            gl.vertexAttribPointer(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Instance.getAttributeSlot(), _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_4__.CompositionType.Scalar.getNumberOfComponents(), _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.Float.index, false, 0, 0);
            this.__glw.vertexAttribDivisor(_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_1__.VertexAttribute.Instance.getAttributeSlot(), 1);
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        this.__glw.bindVertexArray(null);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
    }
    /**
     * create a TexStorage2D
     * @param data
     * @param param1
     * @returns
     */
    createTexStorage2D({ levels, internalFormat, width, height, }) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const texture = gl.createTexture();
        this.__glw.bindTexture2D(0, texture);
        gl.texStorage2D(_types_WebGLConstants__WEBPACK_IMPORTED_MODULE_22__.GL_TEXTURE_2D, levels, internalFormat.index, width, height);
        const resourceHandle = this.__registerResource(texture);
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    /**
     * create a TexStorage2D
     * @param data
     * @param param1
     * @returns
     */
    createTexStorage2DWithSamplerParameters({ levels, internalFormat, width, height, magFilter, minFilter, wrapS, wrapT, anisotropy, isPremultipliedAlpha, }) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const texture = gl.createTexture();
        this.__glw.bindTexture2D(0, texture);
        gl.texStorage2D(_types_WebGLConstants__WEBPACK_IMPORTED_MODULE_22__.GL_TEXTURE_2D, levels, internalFormat.index, width, height);
        const resourceHandle = this.__registerResource(texture);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);
        if (_foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.isPowerOfTwoTexture(width, height)) {
            if (anisotropy) {
                if (this.__glw.webgl2ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
                else if (this.__glw.webgl1ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
            }
            else if (this.__glw.webgl1ExtTFA) {
                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 1);
            }
        }
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    createTextureSampler({ magFilter, minFilter, wrapS, wrapT, anisotropy, isPremultipliedAlpha, }) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const sampler = gl.createSampler();
        const resourceHandle = this.__registerResource(sampler);
        gl.samplerParameteri(sampler, gl.TEXTURE_MIN_FILTER, minFilter.index);
        gl.samplerParameteri(sampler, gl.TEXTURE_MAG_FILTER, magFilter.index);
        gl.samplerParameteri(sampler, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.samplerParameteri(sampler, gl.TEXTURE_WRAP_T, wrapT.index);
        if (anisotropy) {
            if (this.__glw.webgl2ExtTFA) {
                gl.samplerParameteri(sampler, this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
            }
            else if (this.__glw.webgl1ExtTFA) {
                gl.samplerParameteri(sampler, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
            }
        }
        return resourceHandle;
    }
    /**
     * create a Texture
     * @param data
     * @param param1
     * @returns
     */
    createTexture(data, { level, internalFormat, width, height, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy, isPremultipliedAlpha, }) {
        const isWebGL2 = this.__glw.isWebGL2;
        const gl = this.__glw.getRawContext();
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        this.__glw.bindTexture2D(0, texture);
        if (data instanceof HTMLImageElement ||
            data instanceof HTMLCanvasElement ||
            data instanceof HTMLVideoElement) {
            if (isWebGL2) {
                const gl = this.__glw.getRawContextAsWebGL2();
                // const levels = Math.max(Math.log2(width), Math.log2(height));
                const levels = generateMipmap
                    ? Math.max(Math.log2(width), Math.log2(height))
                    : 1;
                gl.texStorage2D(_types_WebGLConstants__WEBPACK_IMPORTED_MODULE_22__.GL_TEXTURE_2D, levels, internalFormat.index, width, height);
                gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, format.index, type.index, data);
            }
            else {
                gl.texImage2D(gl.TEXTURE_2D, level, _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.migrateToWebGL1InternalFormat(internalFormat).index, format.index, type.index, data);
            }
        }
        else {
            if (isWebGL2) {
                const gl = this.__glw.getRawContextAsWebGL2();
                // const levels = Math.max(Math.log2(width), Math.log2(height));
                const levels = generateMipmap
                    ? Math.max(Math.log2(width), Math.log2(height))
                    : 1;
                gl.texStorage2D(_types_WebGLConstants__WEBPACK_IMPORTED_MODULE_22__.GL_TEXTURE_2D, levels, internalFormat.index, width, height);
                gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, format.index, type.index, data);
            }
            else {
                gl.texImage2D(gl.TEXTURE_2D, level, _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.migrateToWebGL1InternalFormat(internalFormat).index, width, height, border, format.index, type.index, data);
            }
        }
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);
        if (_foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.isPowerOfTwoTexture(width, height)) {
            if (anisotropy) {
                if (this.__glw.webgl2ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
                else if (this.__glw.webgl1ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
            }
            else if (this.__glw.webgl1ExtTFA) {
                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 1);
            }
            const isGenerateMipmap = generateMipmap && height !== 1 && width !== 1;
            if (isGenerateMipmap) {
                gl.generateMipmap(gl.TEXTURE_2D);
            }
        }
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    /**
     * Create and bind compressed texture object
     * @param textureDataArray transcoded texture data for each mipmaps(levels)
     * @param compressionTextureType
     */
    createCompressedTexture(textureDataArray, compressionTextureType, { magFilter, minFilter, wrapS, wrapT, anisotropy, }) {
        const gl = this.__glw.getRawContext();
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        this.__glw.bindTexture2D(0, texture);
        const internalFormat = compressionTextureType.index;
        for (const textureData of textureDataArray) {
            gl.compressedTexImage2D(gl.TEXTURE_2D, textureData.level, internalFormat, textureData.width, textureData.height, 0, textureData.buffer);
        }
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);
        if (minFilter === _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear) {
            minFilter = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear;
        }
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);
        const width = textureDataArray[0].width;
        const height = textureDataArray[0].height;
        if (_foundation_math_MathUtil__WEBPACK_IMPORTED_MODULE_7__.MathUtil.isPowerOfTwoTexture(width, height)) {
            if (anisotropy) {
                if (this.__glw.webgl2ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
                else if (this.__glw.webgl1ExtTFA) {
                    gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
                }
            }
            else if (this.__glw.webgl1ExtTFA) {
                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 1);
            }
        }
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    /**
     * create CompressedTextureFromBasis
     * @param basisFile
     * @param param1
     * @returns
     */
    createCompressedTextureFromBasis(basisFile, { border, format, type, magFilter, minFilter, wrapS, wrapT, anisotropy, isPremultipliedAlpha, }) {
        let basisCompressionType;
        let compressionType;
        const gl = this.__glw.getRawContext();
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        gl.bindTexture(gl.TEXTURE_2D, texture);
        const s3tc = gl.getExtension('WEBGL_compressed_texture_s3tc');
        if (s3tc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.BC3;
            compressionType = s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;
        }
        const etc1 = gl.getExtension('WEBGL_compressed_texture_etc1');
        if (etc1) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ETC1;
            compressionType = etc1.COMPRESSED_RGB_ETC1_WEBGL;
        }
        const atc = gl.getExtension('WEBGL_compressed_texture_atc');
        if (atc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ATC_RGBA;
            compressionType = atc.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL;
        }
        const etc2 = gl.getExtension('WEBGL_compressed_texture_etc');
        if (etc2) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ETC2;
            compressionType = etc2.COMPRESSED_RGBA8_ETC2_EAC;
        }
        const pvrtc = gl.getExtension('WEBGL_compressed_texture_pvrtc') ||
            gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
        if (pvrtc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.PVRTC1_RGBA;
            compressionType = pvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        }
        const astc = gl.getExtension('WEBGL_compressed_texture_astc');
        if (astc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ASTC;
            compressionType = astc.COMPRESSED_RGBA_ASTC_4x4_KHR;
        }
        const mipmapDepth = basisFile.getNumLevels(0);
        for (let i = 0; i < mipmapDepth; i++) {
            const width = basisFile.getImageWidth(0, i);
            const height = basisFile.getImageHeight(0, i);
            const textureSource = this.decodeBasisImage(basisFile, basisCompressionType, 0, i);
            gl.compressedTexImage2D(gl.TEXTURE_2D, i, compressionType, width, height, border, textureSource);
        }
        if (mipmapDepth === 0) {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
            let minFilter_ = minFilter;
            if (minFilter === _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear) {
                minFilter_ = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear;
            }
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter_.index);
        }
        else {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);
            if (anisotropy && this.__glw.webgl1ExtTFA) {
                gl.texParameteri(gl.TEXTURE_2D, this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT, 4);
            }
        }
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    /**
     * decode the BasisImage
     * @param basisFile
     * @param basisCompressionType
     * @param imageIndex
     * @param levelIndex
     * @returns
     */
    decodeBasisImage(basisFile, basisCompressionType, imageIndex, levelIndex) {
        const extractSize = basisFile.getImageTranscodedSizeInBytes(imageIndex, levelIndex, basisCompressionType.index);
        const textureSource = new Uint8Array(extractSize);
        if (!basisFile.transcodeImage(textureSource, imageIndex, levelIndex, basisCompressionType.index, 0, 0)) {
            console.error('failed to transcode the image.');
        }
        return textureSource;
    }
    /**
     * create a FrameBufferObject
     * @returns
     */
    createFrameBufferObject() {
        const gl = this.__glw.getRawContext();
        const fbo = gl.createFramebuffer();
        const resourceHandle = this.__registerResource(fbo);
        return resourceHandle;
    }
    /**
     * attach the ColorBuffer to the FrameBufferObject
     * @param framebuffer a Framebuffer
     * @param renderable a ColorBuffer
     */
    attachColorBufferToFrameBufferObject(framebuffer, index, renderable) {
        const gl = this.__glw.getRawContext();
        const fbo = this.getWebGLResource(framebuffer.framebufferUID);
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        const renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);
        const attachmentId = this.__glw.colorAttachment(index);
        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__.RenderTargetTexture) {
            renderable._fbo = framebuffer;
            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentId, gl.TEXTURE_2D, renderableWebGLResource, 0);
        }
        else {
            // It's must be RenderBuffer
            renderable._fbo = framebuffer;
            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachmentId, gl.RENDERBUFFER, renderableWebGLResource);
        }
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
    }
    /**
     * attach the DepthBuffer to the FrameBufferObject
     * @param framebuffer a Framebuffer
     * @param renderable a DepthBuffer
     */
    attachDepthBufferToFrameBufferObject(framebuffer, renderable) {
        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36096); // gl.DEPTH_ATTACHMENT
    }
    /**
     * attach the StencilBuffer to the FrameBufferObject
     * @param framebuffer a Framebuffer
     * @param renderable a StencilBuffer
     */
    attachStencilBufferToFrameBufferObject(framebuffer, renderable) {
        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 36128); // gl.STENCIL_ATTACHMENT
    }
    /**
     * attach the depthStencilBuffer to the FrameBufferObject
     * @param framebuffer a Framebuffer
     * @param renderable a depthStencilBuffer
     */
    attachDepthStencilBufferToFrameBufferObject(framebuffer, renderable) {
        this.__attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, 33306); // gl.DEPTH_STENCIL_ATTACHMENT
    }
    __attachDepthOrStencilBufferToFrameBufferObject(framebuffer, renderable, attachmentType) {
        const gl = this.__glw.getRawContext();
        const fbo = this.getWebGLResource(framebuffer.framebufferUID);
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        const renderableWebGLResource = this.getWebGLResource(renderable.cgApiResourceUid);
        if (renderable instanceof _foundation_textures_RenderTargetTexture__WEBPACK_IMPORTED_MODULE_10__.RenderTargetTexture) {
            renderable._fbo = framebuffer;
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.TEXTURE_2D, renderableWebGLResource, 0);
        }
        else {
            // It's must be RenderBuffer
            renderable._fbo = framebuffer;
            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachmentType, gl.RENDERBUFFER, renderableWebGLResource);
        }
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
    }
    /**
     * create Renderbuffer
     */
    createRenderBuffer(width, height, internalFormat, isMSAA, sampleCountMSAA) {
        const gl = this.__glw.getRawContext();
        const renderBuffer = gl.createRenderbuffer();
        const resourceHandle = this.__registerResource(renderBuffer);
        gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);
        if (isMSAA) {
            if (this.__glw.isWebGL2) {
                gl.renderbufferStorageMultisample(gl.RENDERBUFFER, sampleCountMSAA, gl[internalFormat.str], width, height);
            }
            else {
                console.error('MSAA is unavailable in this webgl context');
            }
        }
        else {
            gl.renderbufferStorage(gl.RENDERBUFFER, gl[internalFormat.str], width, height);
        }
        gl.bindRenderbuffer(gl.RENDERBUFFER, null);
        return resourceHandle;
    }
    /**
     * set drawTargets
     * @param framebuffer
     */
    setDrawTargets(renderPass) {
        const framebuffer = renderPass.getFramebuffer();
        if (framebuffer) {
            const renderBufferTargetEnums = renderPass.getRenderTargetColorAttachments();
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(renderBufferTargetEnums)) {
                this.__glw.drawBuffers(renderBufferTargetEnums);
            }
            else {
                this.__glw.drawBuffers(framebuffer.colorAttachmentsRenderBufferTargets);
            }
        }
        else {
            this.__glw.drawBuffers([_foundation_definitions_RenderBufferTarget__WEBPACK_IMPORTED_MODULE_13__.RenderBufferTarget.Back]);
        }
    }
    /**
     * bind Framebuffer
     * @param framebuffer
     */
    bindFramebuffer(framebuffer) {
        const gl = this.__glw.getRawContext();
        if (framebuffer) {
            const fboUid = framebuffer.cgApiResourceUid;
            const fbo = this.getWebGLResource(fboUid);
            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        }
        else {
            gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        }
    }
    /**
     * unbind Framebuffer
     */
    unbindFramebuffer() {
        const gl = this.__glw.getRawContext();
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
    }
    /**
     * create a RenderTargetTexture
     * @param param0
     * @returns
     */
    createRenderTargetTexture({ width, height, level, internalFormat, format, type, magFilter, minFilter, wrapS, wrapT, }) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        this.__glw.bindTexture2D(0, texture);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT.index);
        if (
        // if WebGL2
        this.__glw.isWebGL2 &&
            // if DEPTH_COMPONENT
            (internalFormat.index === 6402 ||
                internalFormat.index === 33189 ||
                internalFormat.index === 33190 ||
                internalFormat.index === 33191)) {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_COMPARE_FUNC, gl.LESS);
        }
        if (this.__glw.isWebGL2) {
            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat.index, width, height, 0, format.index, _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.UnsignedByte.index, null);
        }
        else {
            gl.texImage2D(gl.TEXTURE_2D, level, _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.migrateToWebGL1InternalFormat(internalFormat).index, width, height, 0, format.index, type.index, null);
        }
        this.__glw.unbindTexture2D(0);
        return resourceHandle;
    }
    /**
     * create a CubeTexture
     *
     * @param mipLevelCount
     * @param images
     * @param width
     * @param height
     * @returns resource handle
     */
    createCubeTexture(mipLevelCount, images, width, height) {
        const gl = this.__glw.getRawContext();
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        this.__glw.bindTextureCube(0, texture);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        if (images[0].posX.hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.HDR_LINEAR &&
            this.__glw.isNotSupportWebGL1Extension(_WebGLExtension__WEBPACK_IMPORTED_MODULE_17__.WebGLExtension.TextureFloatLinear)) {
            if (mipLevelCount >= 2) {
                gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.NEAREST_MIPMAP_NEAREST);
            }
            else {
                gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
            }
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
        }
        else {
            if (mipLevelCount >= 2) {
                gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
            }
            else {
                gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
            }
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        }
        const loadImageToGPU = (image, cubeMapSide, i) => {
            if (image.hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.HDR_LINEAR) {
                if (this.__glw.isWebGL2) {
                    const gl = this.__glw.getRawContextAsWebGL2();
                    gl.texImage2D(cubeMapSide, i, gl.RGB32F, image.width, image.height, 0, gl.RGB, gl.FLOAT, image.dataFloat);
                }
                else {
                    gl.texImage2D(cubeMapSide, i, gl.RGB, image.width, image.height, 0, gl.RGB, gl.FLOAT, image.dataFloat);
                }
            }
            else if (image instanceof HTMLImageElement ||
                image instanceof HTMLCanvasElement) {
                gl.texImage2D(cubeMapSide, i, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);
            }
            else {
                gl.texImage2D(cubeMapSide, i, gl.RGBA, width / 2 ** i, height / 2 ** i, 0, gl.RGBA, gl.UNSIGNED_BYTE, image);
            }
        };
        for (let i = 0; i < images.length; i++) {
            const image = images[i];
            loadImageToGPU(image.posX, gl.TEXTURE_CUBE_MAP_POSITIVE_X, i);
            loadImageToGPU(image.negX, gl.TEXTURE_CUBE_MAP_NEGATIVE_X, i);
            loadImageToGPU(image.posY, gl.TEXTURE_CUBE_MAP_POSITIVE_Y, i);
            loadImageToGPU(image.negY, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, i);
            loadImageToGPU(image.posZ, gl.TEXTURE_CUBE_MAP_POSITIVE_Z, i);
            loadImageToGPU(image.negZ, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, i);
        }
        this.__glw.unbindTextureCube(0);
        return resourceHandle;
    }
    /**
     * Create Cube Texture from image files.
     * @param baseUri the base uri to load images;
     * @param mipLevelCount the number of mip levels (include root level). if no mipmap, the value should be 1;
     * @returns the WebGLResourceHandle for the generated Cube Texture
     */
    async createCubeTextureFromFiles(baseUri, mipLevelCount, isNamePosNeg, hdriFormat) {
        const gl = this.__glw.getRawContext();
        const imageArgs = [];
        let width = 0;
        let height = 0;
        for (let i = 0; i < mipLevelCount; i++) {
            const loadOneLevel = () => {
                return new Promise((resolve, reject) => {
                    let loadedCount = 0;
                    const images = [];
                    let extension = '.jpg';
                    if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.HDR_LINEAR) {
                        extension = '.hdr';
                    }
                    else if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.RGBE_PNG) {
                        extension = '.RGBE.PNG';
                    }
                    let posX = '_right_';
                    let negX = '_left_';
                    let posY = '_top_';
                    let negY = '_bottom_';
                    let posZ = '_front_';
                    let negZ = '_back_';
                    if (isNamePosNeg) {
                        posX = '_posx_';
                        negX = '_negx_';
                        posY = '_posy_';
                        negY = '_negy_';
                        posZ = '_posz_';
                        negZ = '_negz_';
                    }
                    const faces = [
                        [baseUri + posX + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_X],
                        [baseUri + negX + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_X],
                        [baseUri + posY + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Y],
                        [baseUri + negY + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y],
                        [baseUri + posZ + i + extension, gl.TEXTURE_CUBE_MAP_POSITIVE_Z],
                        [baseUri + negZ + i + extension, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z],
                    ];
                    for (let j = 0; j < faces.length; j++) {
                        const face = faces[j][1];
                        let image;
                        if (hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.HDR_LINEAR ||
                            hdriFormat === _foundation_definitions_HdriFormat__WEBPACK_IMPORTED_MODULE_11__.HdriFormat.RGB9_E5_PNG) {
                            image = new HDRImage();
                        }
                        else {
                            image = new Image();
                        }
                        image.hdriFormat = hdriFormat;
                        image.side = face;
                        image.uri = faces[j][0];
                        image.crossOrigin = 'Anonymous';
                        image.onload = () => {
                            loadedCount++;
                            images.push(image);
                            if (loadedCount === 6) {
                                resolve(images);
                            }
                        };
                        image.onerror = () => {
                            reject(image.uri);
                        };
                        image.src = faces[j][0];
                    }
                });
            };
            let images;
            try {
                images = await loadOneLevel();
            }
            catch (e) {
                // Try again once
                try {
                    images = await loadOneLevel();
                }
                catch (uri) {
                    // Give up
                    console.error(`failed to load ${uri}`);
                }
            }
            const imageObj = {};
            for (const image of images) {
                switch (image.side) {
                    case gl.TEXTURE_CUBE_MAP_POSITIVE_X:
                        imageObj.posX = image;
                        break;
                    case gl.TEXTURE_CUBE_MAP_POSITIVE_Y:
                        imageObj.posY = image;
                        break;
                    case gl.TEXTURE_CUBE_MAP_POSITIVE_Z:
                        imageObj.posZ = image;
                        break;
                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_X:
                        imageObj.negX = image;
                        break;
                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_Y:
                        imageObj.negY = image;
                        break;
                    case gl.TEXTURE_CUBE_MAP_NEGATIVE_Z:
                        imageObj.negZ = image;
                        break;
                }
                if (i === 0) {
                    width = image.width;
                    height = image.height;
                }
            }
            imageArgs.push(imageObj);
        }
        return this.createCubeTexture(mipLevelCount, imageArgs, width, height);
    }
    createCubeTextureFromBasis(basisFile, { magFilter = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear, minFilter = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear, wrapS = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, wrapT = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Repeat, border = 0, }) {
        const gl = this.__glw.getRawContext();
        let basisCompressionType;
        let compressionType;
        const texture = gl.createTexture();
        const resourceHandle = this.__registerResource(texture);
        this.__glw.bindTextureCube(0, texture);
        const s3tc = gl.getExtension('WEBGL_compressed_texture_s3tc');
        if (s3tc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.BC3;
            compressionType = s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;
        }
        const etc1 = gl.getExtension('WEBGL_compressed_texture_etc1');
        if (etc1) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ETC1;
            compressionType = etc1.COMPRESSED_RGB_ETC1_WEBGL;
        }
        const atc = gl.getExtension('WEBGL_compressed_texture_atc');
        if (atc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ATC_RGBA;
            compressionType = atc.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL;
        }
        const etc2 = gl.getExtension('WEBGL_compressed_texture_etc');
        if (etc2) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ETC2;
            compressionType = etc2.COMPRESSED_RGBA8_ETC2_EAC;
        }
        const pvrtc = gl.getExtension('WEBGL_compressed_texture_pvrtc') ||
            gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
        if (pvrtc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.PVRTC1_RGBA;
            compressionType = pvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        }
        const astc = gl.getExtension('WEBGL_compressed_texture_astc');
        if (astc) {
            basisCompressionType = _foundation_definitions_BasisCompressionType__WEBPACK_IMPORTED_MODULE_16__.BasisCompressionType.ASTC;
            compressionType = astc.COMPRESSED_RGBA_ASTC_4x4_KHR;
        }
        const numImages = basisFile.getNumImages();
        const mipmapDepth = basisFile.getNumLevels(0);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, wrapS.index);
        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, wrapT.index);
        if (mipmapDepth >= 2) {
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, minFilter.index);
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, magFilter.index);
        }
        else {
            let minFilter_ = minFilter;
            if (minFilter === _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.LinearMipmapLinear) {
                minFilter_ = _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Linear;
            }
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, minFilter_.index);
            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, magFilter.index);
        }
        for (let i = 0; i < mipmapDepth; i++) {
            for (let j = 0; j < numImages; j++) {
                const width = basisFile.getImageWidth(j, i);
                const height = basisFile.getImageHeight(j, i);
                const textureSource = this.decodeBasisImage(basisFile, basisCompressionType, j, i);
                gl.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + j, i, compressionType, width, height, border, textureSource);
            }
        }
        this.__glw.unbindTextureCube(0);
        return resourceHandle;
    }
    createDummyBlackCubeTexture() {
        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg==';
        const arrayBuffer = this.__createDummyTextureInner(base64);
        const typedArray = new Uint8Array(arrayBuffer);
        return this.createCubeTexture(1, [
            {
                posX: typedArray,
                negX: typedArray,
                posY: typedArray,
                negY: typedArray,
                posZ: typedArray,
                negZ: typedArray,
            },
        ], 1, 1);
    }
    createDummyCubeTexture(rgbaStr = 'rgba(0,0,0,1)') {
        const canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = rgbaStr;
        ctx.fillRect(0, 0, 1, 1);
        return this.createCubeTexture(1, [
            {
                posX: canvas,
                negX: canvas,
                posY: canvas,
                negY: canvas,
                posZ: canvas,
                negZ: canvas,
            },
        ], 1, 1);
    }
    setWebGLTextureDirectly(webGLTexture) {
        const texture = webGLTexture;
        const resourceHandle = this.__registerResource(texture);
        return resourceHandle;
    }
    async createTextureFromDataUri(dataUri, { level, internalFormat, border, format, type, magFilter, minFilter, wrapS, wrapT, generateMipmap, anisotropy, isPremultipliedAlpha, }) {
        return new Promise(resolve => {
            const img = new Image();
            if (!dataUri.match(/^data:/)) {
                img.crossOrigin = 'Anonymous';
            }
            img.onload = () => {
                const width = img.width;
                const height = img.height;
                const texture = this.createTexture(img, {
                    level,
                    internalFormat,
                    width,
                    height,
                    border,
                    format,
                    type,
                    magFilter,
                    minFilter,
                    wrapS,
                    wrapT,
                    generateMipmap,
                    anisotropy,
                    isPremultipliedAlpha,
                });
                resolve(texture);
            };
            img.src = dataUri;
        });
    }
    updateLevel0TextureAndGenerateMipmap(textureUid, textureData, { width, height, format, type, }) {
        const texture = this.getWebGLResource(textureUid);
        const isWebGL2 = this.__glw.isWebGL2;
        this.__glw.bindTexture2D(0, texture);
        if (isWebGL2 || ArrayBuffer.isView(textureData)) {
            const gl = this.__glw.getRawContextAsWebGL2();
            gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, format.index, type.index, textureData);
            gl.generateMipmap(gl.TEXTURE_2D);
        }
        else {
            const gl = this.__glw.getRawContextAsWebGL1();
            gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, format.index, type.index, textureData);
            gl.generateMipmap(gl.TEXTURE_2D);
        }
        this.__glw.unbindTexture2D(0);
    }
    updateTexture(textureUid, textureData, { level, xoffset, yoffset, width, height, format, type, }) {
        const texture = this.getWebGLResource(textureUid);
        const isWebGL2 = this.__glw.isWebGL2;
        this.__glw.bindTexture2D(0, texture);
        if (isWebGL2 || ArrayBuffer.isView(textureData)) {
            const gl = this.__glw.getRawContextAsWebGL2();
            gl.texSubImage2D(gl.TEXTURE_2D, level, 0, 0, width, height, format.index, type.index, textureData);
        }
        else {
            const gl = this.__glw.getRawContextAsWebGL1();
            gl.texSubImage2D(gl.TEXTURE_2D, level, 0, 0, format.index, type.index, textureData);
        }
        this.__glw.unbindTexture2D(0);
    }
    deleteFrameBufferObject(frameBufferObjectHandle) {
        const fbo = this.getWebGLResource(frameBufferObjectHandle);
        const gl = this.__glw.getRawContext();
        if (fbo != null) {
            gl.deleteFramebuffer(fbo);
            this.__webglResources.delete(frameBufferObjectHandle);
        }
    }
    deleteRenderBuffer(renderBufferUid) {
        const gl = this.__glw.getRawContext();
        const renderBuffer = this.getWebGLResource(renderBufferUid);
        gl.deleteRenderbuffer(renderBuffer);
        this.__webglResources.delete(renderBufferUid);
    }
    deleteTexture(textureHandle) {
        const texture = this.getWebGLResource(textureHandle);
        const gl = this.__glw.getRawContext();
        if (texture != null) {
            gl.deleteTexture(texture);
            this.__webglResources.delete(textureHandle);
        }
    }
    createDummyTexture(rgbaStr = 'rgba(255,255,255,1)') {
        const canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = rgbaStr;
        ctx.fillRect(0, 0, 1, 1);
        return this.createTexture(canvas, {
            level: 0,
            internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8,
            width: 1,
            height: 1,
            border: 0,
            format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__.PixelFormat.RGBA,
            type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.UnsignedByte,
            magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            generateMipmap: false,
            anisotropy: false,
            isPremultipliedAlpha: false,
        });
    }
    createDummyBlackTexture() {
        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg==';
        return this.__createDummyTextureInner(base64);
    }
    createDummyWhiteTexture() {
        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5/hPwAIAgL/4d1j8wAAAABJRU5ErkJggg==';
        return this.__createDummyTextureInner(base64);
    }
    createDummyNormalTexture() {
        const base64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsr///HwAGgAL+v1RumAAAAABJRU5ErkJggg==';
        return this.__createDummyTextureInner(base64);
    }
    __createDummyTextureInner(base64) {
        const arrayBuffer = _foundation_misc_DataUtil__WEBPACK_IMPORTED_MODULE_15__.DataUtil.base64ToArrayBuffer(base64);
        return this.createTexture(new Uint8Array(arrayBuffer), {
            level: 0,
            internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.RGBA8,
            width: 1,
            height: 1,
            border: 0,
            format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_3__.PixelFormat.RGBA,
            type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_5__.ComponentType.UnsignedByte,
            magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.Nearest,
            wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_2__.TextureParameter.ClampToEdge,
            generateMipmap: false,
            anisotropy: false,
            isPremultipliedAlpha: false,
        });
    }
    createUniformBuffer(bufferView) {
        const gl = this.__glw.getRawContextAsWebGL2();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const ubo = gl.createBuffer();
        const resourceHandle = this.__registerResource(ubo);
        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);
        gl.bufferData(gl.UNIFORM_BUFFER, bufferView, gl.DYNAMIC_DRAW);
        gl.bindBuffer(gl.UNIFORM_BUFFER, null);
        return resourceHandle;
    }
    updateUniformBuffer(uboUid, typedArray, offsetByte, arrayLength) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const ubo = this.getWebGLResource(uboUid);
        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);
        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, typedArray, offsetByte, arrayLength);
        gl.bindBuffer(gl.UNIFORM_BUFFER, null);
    }
    bindUniformBlock(shaderProgramUid, blockName, blockIndex) {
        const gl = this.__glw.getRawContextAsWebGL2();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const shaderProgram = this.getWebGLResource(shaderProgramUid);
        const block = gl.getUniformBlockIndex(shaderProgram, blockName);
        gl.uniformBlockBinding(shaderProgram, block, blockIndex);
    }
    bindUniformBufferBase(blockIndex, uboUid) {
        const gl = this.__glw.getRawContextAsWebGL2();
        if (gl == null) {
            throw new Error('No WebGLRenderingContext set as Default.');
        }
        const ubo = this.getWebGLResource(uboUid);
        gl.bindBufferBase(gl.UNIFORM_BUFFER, blockIndex, ubo);
    }
    deleteUniformBuffer(uboUid) {
        const gl = this.__glw.getRawContext();
        const ubo = this.getWebGLResource(uboUid);
        this.__webglResources.delete(uboUid);
        gl.deleteBuffer(ubo);
    }
    setupUniformBufferDataArea(typedArray) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const ubo = gl.createBuffer();
        const resourceHandle = this.__registerResource(ubo);
        const maxConventionBlocks = this.__glw.getMaxConventionUniformBlocks();
        const alignedMaxUniformBlockSize = this.__glw.getAlignedMaxUniformBlockSize();
        const realSize = alignedMaxUniformBlockSize * maxConventionBlocks;
        const array = new Float32Array(realSize / 4);
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.exist(typedArray)) {
            array.set(typedArray.subarray(0, array.length));
        }
        gl.bindBuffer(gl.UNIFORM_BUFFER, ubo);
        gl.bufferData(gl.UNIFORM_BUFFER, array, gl.DYNAMIC_DRAW, 0, 0);
        for (let i = 0; i < maxConventionBlocks; i++) {
            gl.bindBufferRange(gl.UNIFORM_BUFFER, i, ubo, alignedMaxUniformBlockSize * i, alignedMaxUniformBlockSize);
        }
        gl.bindBuffer(gl.UNIFORM_BUFFER, null);
        return resourceHandle;
    }
    getGlslRenderTargetBeginString(renderTargetNumber) {
        let text = '';
        if (this.__glw.isWebGL2) {
            for (let i = 0; i < renderTargetNumber; i++) {
                text += `layout(location = ${i}) out vec4 rt${i};`;
            }
        }
        else {
            for (let i = 0; i < renderTargetNumber; i++) {
                text += `vec4 rt${i};`;
            }
        }
        return text;
    }
    getGlslRenderTargetEndString(renderTargetNumber) {
        let text = '';
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is["false"](this.__glw.isWebGL2)) {
            for (let i = 0; i < renderTargetNumber; i++) {
                text += `gl_FragData[${i}] = rt${i};`;
            }
        }
        return text;
    }
    getGlslDataUBODefinitionString() {
        let text = '';
        const maxConventionblocks = this.__glw.getMaxConventionUniformBlocks();
        const alignedMaxUniformBlockSize = this.__glw.getAlignedMaxUniformBlockSize();
        for (let i = 0; i < maxConventionblocks; i++) {
            text += `
layout (std140) uniform Vec4Block${i} {
  vec4 vec4Block${i}[${alignedMaxUniformBlockSize / 4 / 4}];
};
`;
        }
        text += `
vec4 fetchVec4FromVec4Block(int vec4Idx) {
  int vec4IdxForEachBlock = vec4Idx % dataUBOVec4Size;
  if (vec4Idx < dataUBOVec4Size) {
    return vec4Block0[vec4IdxForEachBlock];
  }`;
        for (let i = 1; i < maxConventionblocks; i++) {
            text += `
 else if (vec4Idx < dataUBOVec4Size * ${i + 1}) {
    return vec4Block${i}[vec4IdxForEachBlock];
}`;
        }
        text += '}\n';
        return text;
    }
    getGlslDataUBOVec4SizeString() {
        const alignedMaxUniformBlockSize = this.__glw.getAlignedMaxUniformBlockSize();
        return `const int dataUBOVec4Size = ${alignedMaxUniformBlockSize / 4 / 4};`;
    }
    createTransformFeedback() {
        const gl = this.__glw.getRawContextAsWebGL2();
        const transformFeedback = gl.createTransformFeedback();
        const resourceHandle = this.__registerResource(transformFeedback);
        gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, transformFeedback);
        return resourceHandle;
    }
    deleteTransformFeedback(transformFeedbackUid) {
        const gl = this.__glw.getRawContextAsWebGL2();
        const transformFeedback = this.getWebGLResource(transformFeedbackUid);
        gl.deleteTransformFeedback(transformFeedback);
        this.__webglResources.delete(transformFeedbackUid);
    }
    setViewport(viewport) {
        var _a, _b;
        if (viewport) {
            (_a = this.__glw) === null || _a === void 0 ? void 0 : _a.setViewportAsVector4(viewport);
        }
        else {
            (_b = this.__glw) === null || _b === void 0 ? void 0 : _b.setViewport(0, 0, this.__glw.width, this.__glw.height);
        }
    }
    clearFrameBuffer(renderPass) {
        const gl = this.__glw.getRawContext();
        let bufferBit = 0;
        if (renderPass.toClearColorBuffer) {
            gl.clearColor(renderPass.clearColor.x, renderPass.clearColor.y, renderPass.clearColor.z, renderPass.clearColor.w);
            bufferBit |= gl.COLOR_BUFFER_BIT;
        }
        if (renderPass.toClearDepthBuffer) {
            gl.clearDepth(renderPass.clearDepth);
            bufferBit |= gl.DEPTH_BUFFER_BIT;
        }
        if (renderPass.toClearStencilBuffer) {
            gl.clearStencil(renderPass.clearStencil);
            bufferBit |= gl.STENCIL_BUFFER_BIT;
        }
        if (bufferBit !== 0) {
            gl.clear(bufferBit);
        }
    }
    deleteVertexDataResources(vertexHandles) {
        const gl = this.__glw.getRawContext();
        const iboHandle = vertexHandles.iboHandle;
        if (iboHandle) {
            const ibo = this.getWebGLResource(iboHandle);
            gl.deleteBuffer(ibo);
        }
        const vboHandles = vertexHandles.vboHandles;
        for (const vboHandle of vboHandles) {
            const vbo = this.getWebGLResource(vboHandle);
            gl.deleteBuffer(vbo);
        }
        const vaoHandle = vertexHandles.vaoHandle;
        const vao = this.getWebGLResource(vaoHandle);
        this.__glw.deleteVertexArray(vao);
    }
    deleteVertexArray(vaoHandle) {
        const vao = this.getWebGLResource(vaoHandle);
        this.__glw.deleteVertexArray(vao);
    }
    deleteVertexBuffer(vboUid) {
        const gl = this.__glw.getRawContext();
        const vbo = this.getWebGLResource(vboUid);
        gl.deleteBuffer(vbo);
    }
    resizeCanvas(width, height) {
        this.__glw.width = width;
        this.__glw.height = height;
        this.__glw.canvas.width = width;
        this.__glw.canvas.height = height;
        this.__glw.setViewportAsVector4(_foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_12__.Vector4.fromCopyArray([0, 0, width, height]));
    }
    getCanvasSize() {
        return [this.__glw.canvas.width, this.__glw.canvas.height];
    }
    switchDepthTest(flag) {
        const gl = this.__glw.getRawContext();
        if (flag) {
            gl.enable(gl.DEPTH_TEST);
        }
        else {
            gl.disable(gl.DEPTH_TEST);
        }
    }
    rebuildProgram(updatedVertexSourceCode, // The new vertex shader source
    updatedFragmentSourceCode, // The new fragment shader source
    onCompiled, // Callback triggered by your engine when the compilation is successful. It needs to send back the new linked program.
    onError) {
        // Callback triggered by your engine in case of error. It needs to send the WebGL error to allow the editor to display the error in the gutter.
        const material = this._material;
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_18__.Is.not.exist(material)) {
            const warn = 'Material Not found';
            console.warn(warn);
            onError(warn);
            return false;
        }
        const processApproach = _foundation_system_System__WEBPACK_IMPORTED_MODULE_19__.System.processApproach;
        const renderingStrategy = (0, _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_20__["default"])(processApproach);
        const modifiedVertexSourceCode = updatedVertexSourceCode.replace(/! =/g, '!=');
        const modifiedPixelSourceCode = updatedFragmentSourceCode.replace(/! =/g, '!=');
        const programUid = renderingStrategy.setupShaderForMaterial(material, {
            vertex: modifiedVertexSourceCode,
            pixel: modifiedPixelSourceCode,
        });
        const webglResourceRepository = WebGLResourceRepository.getInstance();
        const program = webglResourceRepository.getWebGLResource(programUid);
        onCompiled(program);
        return true;
    }
    getPixelDataFromTexture(texUid, x, y, width, height) {
        const gl = this.__glw.getRawContext();
        const pixels = new Uint8Array((width - x) * (height - y) * 4);
        const texture = this.getWebGLResource(texUid);
        const fbo = gl.createFramebuffer();
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);
        gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        gl.deleteFramebuffer(fbo);
        return pixels;
    }
    setWebGLStateToDefault() {
        const gl = this.__glw.getRawContextAsWebGL2();
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
        gl.bindTexture(gl.TEXTURE_2D, null);
        gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);
        gl.bindRenderbuffer(gl.RENDERBUFFER, null);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        gl.bindVertexArray(null);
        gl.clearColor(0, 0, 0, 0);
        gl.clearDepth(1);
        gl.clearStencil(0);
        gl.depthFunc(gl.LESS);
        gl.disable(gl.DEPTH_TEST);
        gl.disable(gl.STENCIL_TEST);
        gl.disable(gl.BLEND);
        gl.disable(gl.DITHER);
        gl.disable(gl.SCISSOR_TEST);
        gl.disable(gl.POLYGON_OFFSET_FILL);
        gl.disable(gl.SAMPLE_COVERAGE);
        gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);
        gl.disable(gl.CULL_FACE);
        gl.frontFace(gl.CCW);
        gl.cullFace(gl.BACK);
        gl.blendColor(0, 0, 0, 0);
        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);
        gl.blendFuncSeparate(gl.ONE, gl.ZERO, gl.ONE, gl.ZERO);
        gl.stencilOpSeparate(gl.FRONT, gl.KEEP, gl.KEEP, gl.KEEP);
        gl.stencilOpSeparate(gl.BACK, gl.KEEP, gl.KEEP, gl.KEEP);
        gl.stencilFuncSeparate(gl.FRONT, gl.ALWAYS, 0, 0xffffffff);
        gl.stencilFuncSeparate(gl.BACK, gl.ALWAYS, 0, 0xffffffff);
        gl.stencilMaskSeparate(gl.FRONT, 0xffffffff);
        gl.stencilMaskSeparate(gl.BACK, 0xffffffff);
        gl.colorMask(true, true, true, true);
        gl.depthMask(true);
        gl.sampleCoverage(1.0, false);
    }
}


/***/ }),

/***/ "./src/webgl/WebGLStrategy.ts":
/*!************************************!*\
  !*** ./src/webgl/WebGLStrategy.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/webgl/WebGLStrategyCommonMethod.ts":
/*!************************************************!*\
  !*** ./src/webgl/WebGLStrategyCommonMethod.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _foundation_materials_core_Material__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/materials/core/Material */ "./src/foundation/materials/core/Material.ts");
/* harmony import */ var _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/definitions/AlphaMode */ "./src/foundation/definitions/AlphaMode.ts");
/* harmony import */ var _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _foundation_math_Scalar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/math/Scalar */ "./src/foundation/math/Scalar.ts");
/* harmony import */ var _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/math/Vector3 */ "./src/foundation/math/Vector3.ts");















let lastIsTransparentMode;
let lastBlendEquationMode;
let lastBlendEquationModeAlpha;
let lastBlendFuncSrcFactor;
let lastBlendFuncDstFactor;
let lastBlendFuncAlphaSrcFactor;
let lastBlendFuncAlphaDstFactor;
let lastCullFace;
let lastFrontFaceCCW;
let lastAlphaToCoverage;
function setWebGLParameters(material, gl) {
    setCull(material, gl);
    setBlendSettings(material, gl);
    setAlphaToCoverage(material, gl);
}
function setCull(material, gl) {
    const cullFace = material.cullFace;
    const cullFrontFaceCCW = material.cullFrontFaceCCW;
    if (lastCullFace !== cullFace) {
        if (cullFace) {
            gl.enable(gl.CULL_FACE);
        }
        else {
            gl.disable(gl.CULL_FACE);
        }
        lastCullFace = cullFace;
    }
    if (cullFace === true && lastFrontFaceCCW !== cullFrontFaceCCW) {
        if (cullFrontFaceCCW) {
            gl.frontFace(gl.CCW);
        }
        else {
            gl.frontFace(gl.CW);
        }
        lastFrontFaceCCW = cullFrontFaceCCW;
    }
}
function setBlendSettings(material, gl) {
    const isBlendMode = material.isBlend();
    if (lastIsTransparentMode !== isBlendMode) {
        if (isBlendMode) {
            gl.enable(gl.BLEND);
        }
        else {
            gl.disable(gl.BLEND);
        }
        lastIsTransparentMode = isBlendMode;
    }
    if (material.alphaMode === _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Translucent) {
        setBlendEquationMode(material.blendEquationMode, material.blendEquationModeAlpha, gl);
        setBlendFuncSrcFactor(material.blendFuncSrcFactor, material.blendFuncDstFactor, material.blendFuncAlphaSrcFactor, material.blendFuncAlphaDstFactor, gl);
    }
    else if (material.alphaMode === _foundation_definitions_AlphaMode__WEBPACK_IMPORTED_MODULE_1__.AlphaMode.Additive) {
        setBlendEquationMode(32774, 32774, gl); // gl.FUNC_ADD
        setBlendFuncSrcFactor(1, 1, 1, 1, gl); // gl.ONE
    }
}
function setBlendEquationMode(blendEquationMode, blendEquationModeAlpha, gl) {
    const needUpdateBlendEquation = differentWithLastBlendEquation(blendEquationMode, blendEquationModeAlpha);
    if (needUpdateBlendEquation) {
        gl.blendEquationSeparate(blendEquationMode, blendEquationModeAlpha);
        lastBlendEquationMode = blendEquationMode;
        lastBlendEquationModeAlpha = blendEquationModeAlpha;
    }
}
function differentWithLastBlendEquation(equationMode, equationModeAlpha) {
    const result = lastBlendEquationMode !== equationMode ||
        lastBlendEquationModeAlpha !== equationModeAlpha;
    return result;
}
function setBlendFuncSrcFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor, gl) {
    const needUpdateBlendFunc = differentWithLastBlendFuncFactor(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor);
    if (needUpdateBlendFunc) {
        gl.blendFuncSeparate(blendFuncSrcFactor, blendFuncDstFactor, blendFuncAlphaSrcFactor, blendFuncAlphaDstFactor);
        lastBlendFuncSrcFactor = blendFuncSrcFactor;
        lastBlendFuncDstFactor = blendFuncDstFactor;
        lastBlendFuncAlphaSrcFactor = blendFuncAlphaSrcFactor;
        lastBlendFuncAlphaDstFactor = blendFuncAlphaDstFactor;
    }
}
function differentWithLastBlendFuncFactor(srcFactor, dstFactor, alphaSrcFactor, alphaDstFactor) {
    const result = lastBlendFuncSrcFactor !== srcFactor ||
        lastBlendFuncDstFactor !== dstFactor ||
        lastBlendFuncAlphaSrcFactor !== alphaSrcFactor ||
        lastBlendFuncAlphaDstFactor !== alphaDstFactor;
    return result;
}
function setAlphaToCoverage(material, gl) {
    const alphaToCoverage = material.alphaToCoverage;
    if (alphaToCoverage !== lastAlphaToCoverage) {
        if (alphaToCoverage) {
            gl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);
        }
        else {
            gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);
        }
        lastAlphaToCoverage = alphaToCoverage;
    }
}
function startDepthMasking(primitive, gl) {
    if (_foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_2__.MeshRendererComponent.isDepthMaskTrueForTransparencies) {
        return;
    }
    if (primitive._sortkey === _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_2__.MeshRendererComponent._firstTransparentSortKey) {
        gl.depthMask(false);
    }
}
function endDepthMasking(primitive, gl) {
    if (primitive._sortkey === _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_2__.MeshRendererComponent._lastTransparentSortKey) {
        gl.depthMask(true);
    }
}
function updateVBOAndVAO(mesh) {
    const primitiveNum = mesh.getPrimitiveNumber();
    for (let i = 0; i < primitiveNum; i++) {
        const primitive = mesh.getPrimitiveAt(i);
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.exist(primitive.vertexHandles)) {
            primitive.update3DAPIVertexData();
        }
        else {
            primitive.create3DAPIVertexData();
        }
    }
    mesh.updateVariationVBO();
    mesh.updateVAO();
}
function isMaterialsSetup(meshComponent) {
    if (meshComponent.mesh._variationVBOUid !==
        _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_3__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();
        let count = 0;
        for (let i = 0; i < primitiveNum; i++) {
            const primitive = meshComponent.mesh.getPrimitiveAt(i);
            if (primitive.material._shaderProgramUid !== -1) {
                count++;
            }
        }
        if (primitiveNum === count) {
            return true;
        }
        else {
            return false;
        }
    }
    else {
        return false;
    }
}
function isSkipDrawing(material) {
    if (material.isEmptyMaterial() || material._shaderProgramUid === -1) {
        return true;
    }
    else {
        return false;
    }
}
function setVRViewport(renderPass, displayIdx) {
    const webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_6__.WebGLResourceRepository.getInstance();
    const rnXRModule = _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_5__.ModuleManager.getInstance().getModule('xr');
    const webxrSystem = rnXRModule.WebXRSystem.getInstance();
    if (webxrSystem.isWebXRMode) {
        webglResourceRepository.setViewport(webxrSystem._getViewportAt(displayIdx));
    }
}
function getDisplayNumber(isVRMainPass) {
    if (isVRMainPass) {
        return 2;
    }
    else {
        return 1;
    }
}
function isVrMainPass(renderPass) {
    const rnXRModule = _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_5__.ModuleManager.getInstance().getModule('xr');
    const isVRMainPass = (rnXRModule === null || rnXRModule === void 0 ? void 0 : rnXRModule.WebXRSystem.getInstance().isWebXRMode) &&
        renderPass.isVrRendering;
    return isVRMainPass;
}
function getLocationOffsetOfProperty(propertyIndex, materialTypeName) {
    if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.exist(materialTypeName)) {
        const dataBeginPos = _foundation_materials_core_Material__WEBPACK_IMPORTED_MODULE_0__.Material.getLocationOffsetOfMemberOfMaterial(materialTypeName, propertyIndex);
        return dataBeginPos;
    }
    else {
        const globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_7__.GlobalDataRepository.getInstance();
        const dataBeginPos = globalDataRepository.getLocationOffsetOfProperty(propertyIndex);
        return dataBeginPos;
    }
}
function getPointSpriteShaderSemanticsInfoArray() {
    return [
        {
            semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__.ShaderSemantics.PointSize,
            compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__.CompositionType.Scalar,
            componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__.ComponentType.Float,
            stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_11__.ShaderType.PixelShader,
            initialValue: _foundation_math_Scalar__WEBPACK_IMPORTED_MODULE_12__.Scalar.fromCopyNumber(30.0),
            min: 0,
            max: Number.MAX_VALUE,
            isCustomSetting: false,
            updateInterval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_13__.ShaderVariableUpdateInterval.EveryTime,
        },
        {
            semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_8__.ShaderSemantics.PointDistanceAttenuation,
            compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_9__.CompositionType.Vec3,
            componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_10__.ComponentType.Float,
            stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_11__.ShaderType.PixelShader,
            initialValue: _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_14__.Vector3.fromCopyArray([0.0, 0.1, 0.01]),
            min: 0,
            max: 1,
            isCustomSetting: false,
            updateInterval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_13__.ShaderVariableUpdateInterval.EveryTime,
        },
    ];
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.freeze({
    setWebGLParameters,
    startDepthMasking,
    endDepthMasking,
    updateVBOAndVAO,
    isMaterialsSetup,
    isSkipDrawing,
    setVRViewport,
    getDisplayNumber,
    isVrMainPass,
    getLocationOffsetOfProperty,
    getPointSpriteShaderSemanticsInfoArray,
}));


/***/ }),

/***/ "./src/webgl/WebGLStrategyFastest.ts":
/*!*******************************************!*\
  !*** ./src/webgl/WebGLStrategyFastest.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebGLStrategyFastest": () => (/* binding */ WebGLStrategyFastest)
/* harmony export */ });
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _foundation_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/components/Mesh/MeshComponent */ "./src/foundation/components/Mesh/MeshComponent.ts");
/* harmony import */ var _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/core/Component */ "./src/foundation/core/Component.ts");
/* harmony import */ var _foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/components/SceneGraph/SceneGraphComponent */ "./src/foundation/components/SceneGraph/SceneGraphComponent.ts");
/* harmony import */ var _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../foundation/components/Camera/CameraComponent */ "./src/foundation/components/Camera/CameraComponent.ts");
/* harmony import */ var _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../foundation/core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../foundation/components/WellKnownComponentTIDs */ "./src/foundation/components/WellKnownComponentTIDs.ts");
/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./WebGLStrategyCommonMethod */ "./src/webgl/WebGLStrategyCommonMethod.ts");
/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../foundation/system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _foundation_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../foundation/components/Light/LightComponent */ "./src/foundation/components/Light/LightComponent.ts");
























class WebGLStrategyFastest {
    constructor() {
        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__.WebGLResourceRepository.getInstance();
        this.__dataTextureUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__dataUBOUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__lastShader = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__lastRenderPassTickCount = -1;
        this._totalSizeOfGPUShaderDataStorageExceptMorphData = 0;
        this.__latestPrimitivePositionAccessorVersions = [];
    }
    static dumpDataTextureBuffer() {
        this.__isDebugOperationToDataTextureBufferDone = false;
    }
    get vertexShaderMethodDefinitions_dataTexture() {
        return `

  mat4 get_worldMatrix(float instanceId)
  {
    int index = ${_foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__.Component.getLocationOffsetOfMemberOfComponent(_foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__.SceneGraphComponent, 'worldMatrix')} + 4 * int(instanceId);
    mat4 matrix = fetchMat4(index);

    return matrix;
  }


  mat3 get_normalMatrix(float instanceId) {
    int index = ${_foundation_core_Component__WEBPACK_IMPORTED_MODULE_11__.Component.getLocationOffsetOfMemberOfComponent(_foundation_components_SceneGraph_SceneGraphComponent__WEBPACK_IMPORTED_MODULE_12__.SceneGraphComponent, 'normalMatrix')} * 4 + 9 * int(instanceId);
    mat3 matrix = fetchMat3No16BytesAligned(index);
    return matrix;
  }

#ifdef RN_IS_VERTEX_SHADER
  #ifdef RN_IS_MORPHING
  vec3 get_position(float vertexId, vec3 basePosition) {
    vec3 position = basePosition;
    int scalar_idx = 3 * int(vertexId);
    for (int i=0; i<${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_15__.Config.maxVertexMorphNumberInShader}; i++) {

      int basePosIn4bytes = u_dataTextureMorphOffsetPosition[i] * 4 + scalar_idx;
      vec3 addPos = fetchVec3No16BytesAligned(basePosIn4bytes);

      position += addPos * u_morphWeights[i];
      if (i == u_morphTargetNumber-1) {
        break;
      }
    }

    return position;
  }
  #endif
#endif
`;
    }
    setupShaderProgramForMeshComponent(meshComponent) {
        if (meshComponent.mesh == null) {
            _foundation_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_6__.MeshComponent.alertNoMeshSet(meshComponent);
            return;
        }
        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();
        for (let i = 0; i < primitiveNum; i++) {
            const primitive = meshComponent.mesh.getPrimitiveAt(i);
            const material = primitive.material;
            if (material == null || material.isEmptyMaterial()) {
                continue;
            }
            if (material.isShaderProgramReady()) {
                continue;
            }
            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
            const gl = glw.getRawContext();
            primitive.primitiveMode.index === gl.POINTS;
            try {
                this.setupShaderForMaterial(material);
                primitive._backupMaterial();
            }
            catch (e) {
                console.log(e);
                primitive._restoreMaterial();
                this.setupShaderForMaterial(primitive._prevMaterial);
            }
        }
    }
    /**
     * setup shader program for the material in this WebGL strategy
     * @param material
     * @param isPointSprite
     */
    setupShaderForMaterial(material, updatedShaderSources) {
        const webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__.WebGLResourceRepository.getInstance();
        const glw = webglResourceRepository.currentWebGLContextWrapper;
        let programUid;
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.not.exist(updatedShaderSources)) {
            programUid = material._createProgram(this.vertexShaderMethodDefinitions_dataTexture, this.__getShaderProperty, glw.isWebGL2);
        }
        else {
            programUid = material.createProgramByUpdatedSources(updatedShaderSources);
        }
        material._setupBasicUniformsLocations();
        material._setUniformLocationsOfMaterialNodes(false);
        material._setupAdditionalUniformLocations(_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].getPointSpriteShaderSemanticsInfoArray(), false);
        WebGLStrategyFastest.__globalDataRepository.setUniformLocationsForFastestModeOnly(material._shaderProgramUid);
        return programUid;
    }
    __getShaderProperty(materialTypeName, info, propertyIndex, isGlobalData, isWebGL2) {
        var _a, _b;
        const returnType = info.compositionType.getGlslStr(info.componentType);
        let indexStr;
        const isTexture = info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Texture2D ||
            info.compositionType === _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.TextureCube;
        const methodName = info.semantic.str.replace('.', '_');
        // definition of uniform variable for texture sampler or what must be explicitly uniform variabl)
        let varDef = '';
        const varType = info.compositionType.getGlslStr(info.componentType);
        let varIndexStr = '';
        if (info.arrayLength) {
            varIndexStr = `[${info.arrayLength}]`;
        }
        if (info.needUniformInFastest || isTexture) {
            varDef = `  uniform ${varType} u_${methodName}${varIndexStr};\n`;
        }
        // inner contents of 'get_' shader function
        const vec4SizeOfProperty = info.compositionType.getVec4SizeOfProperty();
        // for non-`index` property (this is general case)
        const scalarSizeOfProperty = info.compositionType.getNumberOfComponents();
        const offsetOfProperty = WebGLStrategyFastest.getOffsetOfPropertyInShader(isGlobalData, propertyIndex, materialTypeName);
        if (offsetOfProperty === -1) {
            console.error('Could not get the location offset of the property.');
        }
        const instanceSize = vec4SizeOfProperty * ((_a = info.arrayLength) !== null && _a !== void 0 ? _a : 1);
        indexStr = `int vec4_idx = ${offsetOfProperty} + ${instanceSize} * instanceId;\n`;
        if (_foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.isArray(info.compositionType)) {
            const instanceSizeInScalar = scalarSizeOfProperty * ((_b = info.arrayLength) !== null && _b !== void 0 ? _b : 1);
            indexStr = `int vec4_idx = ${offsetOfProperty} + ${instanceSize} * instanceId + ${vec4SizeOfProperty} * idxOfArray;\n`;
            indexStr += `int scalar_idx = ${
            // IndexOf4Bytes
            offsetOfProperty * 4 // IndexOf16bytes to IndexOf4Bytes
            } + ${instanceSizeInScalar} * instanceId + ${scalarSizeOfProperty} * idxOfArray;\n`;
        }
        let intStr = '';
        if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int &&
            info.compositionType !== _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Scalar) {
            intStr = 'i';
        }
        let firstPartOfInnerFunc = '';
        if (!isTexture && !info.needUniformInFastest) {
            firstPartOfInnerFunc += `
${returnType} get_${methodName}(highp float _instanceId, const int idxOfArray) {
  int instanceId = int(_instanceId);
  ${indexStr}
  `;
            let str = `${varDef}\n${firstPartOfInnerFunc}`;
            switch (info.compositionType) {
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec4:
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec4Array:
                    str += '        highp vec4 val = fetchElement(vec4_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec3:
                    str += '        vec4 col0 = fetchElement(vec4_idx);\n';
                    str += `        highp ${intStr}vec3 val = ${intStr}vec3(col0.xyz);`;
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec3Array:
                    str += '        vec3 val = fetchVec3No16BytesAligned(scalar_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec2:
                    str += '        highp vec4 col0 = fetchElement(vec4_idx);\n';
                    str += `        highp ${intStr}vec2 val = ${intStr}vec2(col0.xy);`;
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Vec2Array:
                    str +=
                        '        highp vec2 val = fetchVec2No16BytesAligned(scalar_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Scalar:
                    str += '        vec4 col0 = fetchElement(vec4_idx);\n';
                    if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int) {
                        str += '        int val = int(col0.x);';
                    }
                    else if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool) {
                        str += '        bool val = bool(col0.x);';
                    }
                    else {
                        str += '       float val = col0.x;';
                    }
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.ScalarArray:
                    str +=
                        '        float col0 = fetchScalarNo16BytesAligned(scalar_idx);\n';
                    if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Int) {
                        str += '        int val = int(col0);';
                    }
                    else if (info.componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Bool) {
                        str += '        bool val = bool(col0);';
                    }
                    else {
                        str += '       float val = col0;';
                    }
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat4:
                    str += '        mat4 val = fetchMat4(vec4_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat4Array:
                    str += '        mat4 val = fetchMat4(vec4_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat3:
                    str += '        mat3 val = fetchMat3(vec4_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat3Array:
                    str += '        mat3 val = fetchMat3No16BytesAligned(scalar_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat2:
                    str += '        mat2 val = fetchMat2(vec4_idx);\n';
                    break;
                case _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_10__.CompositionType.Mat2Array:
                    str += '        mat2 val = fetchMat2No16BytesAligned(scalar_idx);\n';
                    break;
                default:
                    // console.error('unknown composition type', info.compositionType.str, memberName);
                    str += '';
            }
            str += `
  return val;
}
`;
            return str;
        }
        else if (!isTexture && info.needUniformInFastest) {
            if (!isWebGL2 && info.arrayLength) {
                return `\n${varDef}\n`;
            }
            else {
                let varIndexStr = '';
                if (info.arrayLength) {
                    varIndexStr = '[idxOfArray]';
                }
                const str = `${varDef}
${returnType} get_${methodName}(highp float _instanceId, const int idxOfArray) {
  return u_${methodName}${varIndexStr};
}
`;
                return str;
            }
        }
        else {
            return varDef;
        }
    }
    static getOffsetOfPropertyInShader(isGlobalData, propertyIndex, materialTypeName) {
        if (isGlobalData) {
            return _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].getLocationOffsetOfProperty(propertyIndex);
        }
        else {
            return _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].getLocationOffsetOfProperty(propertyIndex, materialTypeName);
        }
    }
    getOffsetOfTheOffsetVariableOfPropertyInShader(propertyIndex) { }
    $load(meshComponent) {
        const mesh = meshComponent.mesh;
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.not.exist(mesh)) {
            _foundation_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_6__.MeshComponent.alertNoMeshSet(meshComponent);
            return;
        }
        WebGLStrategyFastest.__currentComponentSIDs =
            WebGLStrategyFastest.__globalDataRepository.getValue(_foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_9__.ShaderSemantics.CurrentComponentSIDs, 0);
        if (!_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].isMaterialsSetup(meshComponent)) {
            this.setupShaderProgramForMeshComponent(meshComponent);
        }
        if (!this.isMeshSetup(mesh)) {
            this.deleteDataTexture(); // delete data texture to recreate one on next
            _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].updateVBOAndVAO(mesh);
            const primitiveNum = mesh.getPrimitiveNumber();
            for (let i = 0; i < primitiveNum; i++) {
                const primitive = mesh.getPrimitiveAt(i);
                this.__latestPrimitivePositionAccessorVersions[primitive.primitiveUid] =
                    primitive.positionAccessorVersion;
            }
        }
    }
    isMeshSetup(mesh) {
        if (mesh._variationVBOUid === _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
            return false;
        }
        const primitiveNum = mesh.getPrimitiveNumber();
        for (let i = 0; i < primitiveNum; i++) {
            const primitive = mesh.getPrimitiveAt(i);
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.not.exist(primitive.vertexHandles) ||
                primitive.positionAccessorVersion !==
                    this.__latestPrimitivePositionAccessorVersions[primitive.primitiveUid]) {
                return false;
            }
        }
        return true;
    }
    $prerender(meshComponent, meshRendererComponent, instanceIDBufferUid) {
        if (meshRendererComponent._readyForRendering) {
            return;
        }
        if (meshComponent.mesh == null) {
            _foundation_components_Mesh_MeshComponent__WEBPACK_IMPORTED_MODULE_6__.MeshComponent.alertNoMeshSet(meshComponent);
            return;
        }
        if (meshComponent.mesh.isInstanceMesh()) {
            meshRendererComponent._readyForRendering = true;
            return;
        }
        meshRendererComponent._readyForRendering = true;
    }
    __createAndUpdateDataTexture() {
        const memoryManager = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.getInstance();
        // the GPU global Storage
        const gpuInstanceDataBuffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__.BufferUse.GPUInstanceData);
        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
        const uboTotalSize = glw.getAlignedMaxUniformBlockSize();
        const startOffsetOfDataTextureOnGPUInstanceData = this.__isUboUse()
            ? uboTotalSize
            : 0;
        if (gpuInstanceDataBuffer == null) {
            return;
        }
        // const morphBuffer = memoryManager.getBuffer(BufferUse.GPUVertexData);
        // if all the necessary data fits in the UBO, then no data textures will be created.
        // if (
        //   this.__isUboUse() &&
        //   DataUtil.addPaddingBytes(gpuInstanceDataBuffer.takenSizeInByte, 4) +
        //     DataUtil.addPaddingBytes(morphBuffer!.takenSizeInByte, 4) <
        //     uboTotalSize
        // ) {
        //   return;
        // }
        const dataTextureByteSize = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength *
            _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferHeightLength *
            4 *
            4;
        if (this.__dataTextureUid !== _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
            const bufferSizeForDataTextureInByte = gpuInstanceDataBuffer.takenSizeInByte -
                startOffsetOfDataTextureOnGPUInstanceData;
            const height = Math.min(Math.ceil(bufferSizeForDataTextureInByte /
                _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength /
                4 /
                4), _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferHeightLength);
            const updateByteSize = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength * height * 4 * 4;
            if (bufferSizeForDataTextureInByte > dataTextureByteSize) {
                console.warn('The buffer size exceeds the size of the data texture.');
            }
            const floatDataTextureBuffer = new Float32Array(gpuInstanceDataBuffer.getArrayBuffer(), startOffsetOfDataTextureOnGPUInstanceData, updateByteSize / 4);
            this.__webglResourceRepository.updateTexture(this.__dataTextureUid, floatDataTextureBuffer, {
                level: 0,
                xoffset: 0,
                yoffset: 0,
                width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength,
                height: height,
                format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,
                type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
            });
            // debug
            if (!WebGLStrategyFastest.__isDebugOperationToDataTextureBufferDone) {
                _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_19__.MiscUtil.downloadTypedArray('Rhodonite_dataTextureBuffer.bin', floatDataTextureBuffer);
                WebGLStrategyFastest.__isDebugOperationToDataTextureBufferDone = true;
            }
        }
        else {
            const morphBuffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__.BufferUse.GPUVertexData);
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.exist(morphBuffer)) {
                morphBuffer.getArrayBuffer();
            }
            let floatDataTextureBuffer;
            {
                const morphBuffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__.BufferUse.GPUVertexData);
                // the size of morph buffer.
                let morphBufferTakenSizeInByte = 0;
                if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.exist(morphBuffer)) {
                    morphBufferTakenSizeInByte = morphBuffer.takenSizeInByte;
                }
                // the arraybuffer of morph buffer.
                let morphBufferArrayBuffer = new ArrayBuffer(0);
                if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_22__.Is.exist(morphBuffer)) {
                    morphBufferArrayBuffer = morphBuffer.getArrayBuffer();
                }
                // the DataTexture size (GPU global storage size - UBO space size)
                const actualSpaceForDataTextureInByte = gpuInstanceDataBuffer.takenSizeInByte -
                    startOffsetOfDataTextureOnGPUInstanceData;
                // spare padding texel for texture alignment (to edge of the width of texture)
                const paddingSpaceTexel = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength -
                    ((actualSpaceForDataTextureInByte / 4 / 4) %
                        _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength);
                const paddingSpaceBytes = paddingSpaceTexel * 4 * 4;
                const finalArrayBuffer = _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_19__.MiscUtil.concatArrayBuffers2({
                    finalSize: dataTextureByteSize,
                    srcs: [
                        gpuInstanceDataBuffer.getArrayBuffer(),
                        morphBufferArrayBuffer,
                    ],
                    srcsCopySize: [
                        // final size =
                        actualSpaceForDataTextureInByte + paddingSpaceBytes,
                        morphBufferTakenSizeInByte,
                    ],
                    srcsOffset: [startOffsetOfDataTextureOnGPUInstanceData, 0],
                });
                // warning if the used memory exceeds the size of the data texture.
                if (actualSpaceForDataTextureInByte +
                    paddingSpaceBytes +
                    morphBufferTakenSizeInByte >
                    dataTextureByteSize) {
                    console.warn('The buffer size exceeds the size of the data texture.');
                }
                floatDataTextureBuffer = new Float32Array(finalArrayBuffer);
                _foundation_core_Config__WEBPACK_IMPORTED_MODULE_15__.Config.totalSizeOfGPUShaderDataStorageExceptMorphData =
                    gpuInstanceDataBuffer.takenSizeInByte + paddingSpaceBytes;
            }
            // write data
            if (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2) {
                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {
                    level: 0,
                    internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.RGBA32F,
                    width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength,
                    height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferHeightLength,
                    border: 0,
                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,
                    type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                    magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Nearest,
                    minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Nearest,
                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Repeat,
                    wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Repeat,
                    generateMipmap: false,
                    anisotropy: false,
                    isPremultipliedAlpha: true,
                });
            }
            else {
                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {
                    level: 0,
                    internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.RGBA8,
                    width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferWidthLength,
                    height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.bufferHeightLength,
                    border: 0,
                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,
                    type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_3__.ComponentType.Float,
                    magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Nearest,
                    minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Nearest,
                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Repeat,
                    wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_4__.TextureParameter.Repeat,
                    generateMipmap: false,
                    anisotropy: false,
                    isPremultipliedAlpha: true,
                });
            }
        }
    }
    deleteDataTexture() {
        if (this.__dataTextureUid != null) {
            this.__webglResourceRepository.deleteTexture(this.__dataTextureUid);
            this.__dataTextureUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        }
    }
    common_$prerender() {
        // Setup GPU Storage (Data Texture & UBO)
        this.__createAndUpdateDataTexture();
        this.__createAndUpdateUBO();
        this.__lightComponents = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_14__.ComponentRepository.getComponentsWithType(_foundation_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_23__.LightComponent);
    }
    __isUboUse() {
        return (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2 &&
            _foundation_core_Config__WEBPACK_IMPORTED_MODULE_15__.Config.isUboEnabled);
    }
    __createAndUpdateUBO() {
        if (this.__isUboUse()) {
            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
            const alignedMaxUniformBlockSize = glw.getAlignedMaxUniformBlockSize();
            const maxConventionBlocks = glw.getMaxConventionUniformBlocks();
            const memoryManager = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_1__.MemoryManager.getInstance();
            const buffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_5__.BufferUse.GPUInstanceData);
            if (this.__dataUBOUid === _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_8__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
                this.__dataUBOUid =
                    this.__webglResourceRepository.setupUniformBufferDataArea(new Float32Array(buffer.getArrayBuffer()));
            }
            else {
                const array = new Float32Array(buffer.getArrayBuffer());
                this.__webglResourceRepository.updateUniformBuffer(this.__dataUBOUid, array, 0, (alignedMaxUniformBlockSize * maxConventionBlocks) / 4 // (4 bytes unit)
                );
            }
        }
    }
    attachGPUData(primitive) { }
    attachGPUDataInner(gl, shaderProgram) { }
    attachShaderProgram(material) {
        const shaderProgramUid = material._shaderProgramUid;
        if (shaderProgramUid !== this.__lastShader) {
            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
            const gl = glw.getRawContext();
            const shaderProgram = this.__webglResourceRepository.getWebGLResource(shaderProgramUid);
            gl.useProgram(shaderProgram);
            this.__lastShader = shaderProgramUid;
        }
    }
    attachVertexData(i, primitive, glw, instanceIDBufferUid) { }
    attachVertexDataInner(mesh, primitive, primitiveIndex, glw, instanceIDBufferUid) {
        const vertexHandles = primitive.vertexHandles;
        const gl = glw.getRawContext();
        // bind
        const vao = this.__webglResourceRepository.getWebGLResource(mesh.getVaoUids(primitiveIndex));
        if (vao != null) {
            glw.bindVertexArray(vao);
        }
        else {
            this.__webglResourceRepository.setVertexDataToPipeline(vertexHandles, primitive, mesh._variationVBOUid);
            const ibo = this.__webglResourceRepository.getWebGLResource(vertexHandles.iboHandle);
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);
        }
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new WebGLStrategyFastest();
        }
        return this.__instance;
    }
    __setCurrentComponentSIDsForEachRenderPass(renderPass, displayIdx, isVRMainPass) {
        if (isVRMainPass) {
            const rnXRModule = _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_21__.ModuleManager.getInstance().getModule('xr');
            const webxrSystem = rnXRModule.WebXRSystem.getInstance();
            webxrSystem._setValuesToGlobalDataRepository();
            let cameraComponentSid = -1;
            if (webxrSystem.isWebXRMode) {
                cameraComponentSid = webxrSystem._getCameraComponentSIDAt(displayIdx);
            }
            WebGLStrategyFastest.__currentComponentSIDs._v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__.WellKnownComponentTIDs.CameraComponentTID] = cameraComponentSid;
        }
        else {
            let cameraComponent = renderPass.cameraComponent;
            if (cameraComponent == null) {
                cameraComponent = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_14__.ComponentRepository.getComponent(_foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_16__.CameraComponent, _foundation_components_Camera_CameraComponent__WEBPACK_IMPORTED_MODULE_16__.CameraComponent.current);
            }
            if (cameraComponent) {
                WebGLStrategyFastest.__currentComponentSIDs._v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__.WellKnownComponentTIDs.CameraComponentTID] = cameraComponent.componentSID;
            }
            else {
                WebGLStrategyFastest.__currentComponentSIDs._v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__.WellKnownComponentTIDs.CameraComponentTID] = -1;
            }
        }
    }
    __setCurrentComponentSIDsForEachEntity(gl, renderPass, entity) {
        const skeletalComponent = entity.tryToGetSkeletal();
        if (skeletalComponent) {
            let index = 0;
            if (skeletalComponent.componentSID < _foundation_core_Config__WEBPACK_IMPORTED_MODULE_15__.Config.maxSkeletonNumber) {
                index = skeletalComponent.componentSID;
            }
            WebGLStrategyFastest.__currentComponentSIDs._v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__.WellKnownComponentTIDs.SkeletalComponentTID] = index;
        }
        else {
            WebGLStrategyFastest.__currentComponentSIDs._v[_foundation_components_WellKnownComponentTIDs__WEBPACK_IMPORTED_MODULE_18__.WellKnownComponentTIDs.SkeletalComponentTID] = -1;
        }
    }
    __setCurrentComponentSIDsForEachPrimitive(gl, material, shaderProgram) {
        WebGLStrategyFastest.__currentComponentSIDs._v[0] = material.materialSID;
        gl.uniform1fv(shaderProgram.currentComponentSIDs, WebGLStrategyFastest.__currentComponentSIDs._v);
    }
    common_$render(primitiveUids, meshComponents, viewMatrix, projectionMatrix, renderPass, renderPassTickCount) {
        if (typeof spector !== 'undefined') {
            spector.setMarker('|  |  Fastest:common_$render#');
        }
        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        const isVRMainPass = _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].isVrMainPass(renderPass);
        const displayNumber = _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].getDisplayNumber(isVRMainPass);
        for (let displayIdx = 0; displayIdx < displayNumber; displayIdx++) {
            if (isVRMainPass) {
                _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].setVRViewport(renderPass, displayIdx);
            }
            this.__setCurrentComponentSIDsForEachRenderPass(renderPass, displayIdx, isVRMainPass);
            // For opaque primitives
            if (renderPass.toRenderOpaquePrimitives) {
                for (let i = 0; i <= _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__.MeshRendererComponent._lastOpaqueIndex; i++) {
                    const primitiveUid = primitiveUids[i];
                    this.renderInner(primitiveUid, glw, renderPass, isVRMainPass, displayIdx);
                }
            }
            // For translucent primitives
            if (renderPass.toRenderTransparentPrimitives) {
                if (!_foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__.MeshRendererComponent.isDepthMaskTrueForTransparencies) {
                    // disable depth write for transparent primitives
                    gl.depthMask(false);
                }
                for (let i = _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__.MeshRendererComponent._lastOpaqueIndex + 1; i <= _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_13__.MeshRendererComponent._lastTransparentIndex; i++) {
                    const primitiveUid = primitiveUids[i];
                    this.renderInner(primitiveUid, glw, renderPass, isVRMainPass, displayIdx);
                }
            }
            gl.depthMask(true);
        }
        this.__lastRenderPassTickCount = renderPassTickCount;
        return false;
    }
    renderInner(primitiveUid, glw, renderPass, isVRMainPass, displayIdx) {
        const gl = glw.getRawContext();
        const primitive = _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_7__.Primitive.getPrimitive(primitiveUid);
        const mesh = primitive.mesh;
        const meshEntity = mesh.meshEntity;
        if (!meshEntity.getSceneGraph().isVisible) {
            return false;
        }
        const meshComponent = meshEntity.getMesh();
        const material = renderPass.getAppropriateMaterial(primitive);
        if (_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].isSkipDrawing(material)) {
            return false;
        }
        if (!(mesh === null || mesh === void 0 ? void 0 : mesh.isOriginalMesh())) {
            return false;
        }
        const entity = meshComponent.entity;
        this.__setCurrentComponentSIDsForEachEntity(gl, renderPass, entity);
        const meshRendererComponent = entity.getMeshRenderer();
        let firstTime = false;
        const shaderProgramUid = material._shaderProgramUid;
        const primitiveIndex = mesh.getPrimitiveIndexInMesh(primitive);
        this.attachVertexDataInner(mesh, primitive, primitiveIndex, glw, mesh._variationVBOUid);
        if (shaderProgramUid !== this.__lastShader) {
            const shaderProgram = this.__webglResourceRepository.getWebGLResource(shaderProgramUid);
            gl.useProgram(shaderProgram);
            // Bind DataTexture
            gl.uniform1i(shaderProgram.dataTexture, 7);
            this.__webglResourceRepository.bindTexture2D(7, this.__dataTextureUid);
            WebGLStrategyFastest.__shaderProgram = shaderProgram;
            firstTime = true;
        }
        if (this.__lastMaterial !== material) {
            firstTime = true;
            this.__lastMaterial = material;
        }
        this.__setCurrentComponentSIDsForEachPrimitive(gl, material, WebGLStrategyFastest.__shaderProgram);
        _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_20__["default"].setWebGLParameters(material, gl);
        material._setParametersToGpu({
            material: material,
            shaderProgram: WebGLStrategyFastest.__shaderProgram,
            firstTime: firstTime,
            args: {
                glw: glw,
                entity: entity,
                worldMatrix: entity.getSceneGraph().worldMatrixInner,
                normalMatrix: entity.getSceneGraph().normalMatrixInner,
                lightComponents: this.__lightComponents,
                renderPass: renderPass,
                primitive: primitive,
                diffuseCube: meshRendererComponent.diffuseCubeMap,
                specularCube: meshRendererComponent.specularCubeMap,
                setUniform: false,
                isVr: isVRMainPass,
                displayIdx,
            },
        });
        if (primitive.indicesAccessor) {
            glw.drawElementsInstanced(primitive.primitiveMode.index, primitive.indicesAccessor.elementCount, primitive.indicesAccessor.componentType.index, 0, mesh.instanceCountIncludeOriginal);
        }
        else {
            glw.drawArraysInstanced(primitive.primitiveMode.index, 0, primitive.getVertexCountAsVerticesBased(), mesh.instanceCountIncludeOriginal);
        }
        this.__lastShader = shaderProgramUid;
        return true;
    }
    $render() { }
}
WebGLStrategyFastest.__globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_17__.GlobalDataRepository.getInstance();
WebGLStrategyFastest.__isDebugOperationToDataTextureBufferDone = true;


/***/ }),

/***/ "./src/webgl/WebGLStrategyUniform.ts":
/*!*******************************************!*\
  !*** ./src/webgl/WebGLStrategyUniform.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebGLStrategyUniform": () => (/* binding */ WebGLStrategyUniform)
/* harmony export */ });
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/geometry/Primitive */ "./src/foundation/geometry/Primitive.ts");
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/core/ComponentRepository */ "./src/foundation/core/ComponentRepository.ts");
/* harmony import */ var _foundation_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/components/Light/LightComponent */ "./src/foundation/components/Light/LightComponent.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/definitions/PixelFormat */ "./src/foundation/definitions/PixelFormat.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");
/* harmony import */ var _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/definitions/TextureParameter */ "./src/foundation/definitions/TextureParameter.ts");
/* harmony import */ var _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/components/MeshRenderer/MeshRendererComponent */ "./src/foundation/components/MeshRenderer/MeshRendererComponent.ts");
/* harmony import */ var _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/definitions/CompositionType */ "./src/foundation/definitions/CompositionType.ts");
/* harmony import */ var _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../foundation/definitions/ShaderVariableUpdateInterval */ "./src/foundation/definitions/ShaderVariableUpdateInterval.ts");
/* harmony import */ var _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../foundation/core/MemoryManager */ "./src/foundation/core/MemoryManager.ts");
/* harmony import */ var _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../foundation/definitions/ShaderType */ "./src/foundation/definitions/ShaderType.ts");
/* harmony import */ var _foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../foundation/definitions/BufferUse */ "./src/foundation/definitions/BufferUse.ts");
/* harmony import */ var _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../foundation/core/GlobalDataRepository */ "./src/foundation/core/GlobalDataRepository.ts");
/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./WebGLStrategyCommonMethod */ "./src/webgl/WebGLStrategyCommonMethod.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");




















class WebGLStrategyUniform {
    constructor() {
        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__.WebGLResourceRepository.getInstance();
        this.__dataTextureUid = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.InvalidCGAPIResourceUid;
        this.__lastShader = -1;
        this.__lastRenderPassTickCount = -1;
        this.__latestPrimitivePositionAccessorVersions = [];
        this.componentMatrices = [
            {
                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.VertexAttributesExistenceArray,
                compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__.CompositionType.ScalarArray,
                componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Int,
                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__.ShaderType.VertexShader,
                min: 0,
                max: 1,
                isCustomSetting: true,
                updateInterval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__.ShaderVariableUpdateInterval.EveryTime,
            },
            {
                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.WorldMatrix,
                compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__.CompositionType.Mat4,
                componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float,
                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__.ShaderType.VertexShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__.ShaderVariableUpdateInterval.EveryTime,
            },
            {
                semantic: _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.NormalMatrix,
                compositionType: _foundation_definitions_CompositionType__WEBPACK_IMPORTED_MODULE_11__.CompositionType.Mat3,
                componentType: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float,
                stage: _foundation_definitions_ShaderType__WEBPACK_IMPORTED_MODULE_14__.ShaderType.VertexShader,
                min: -Number.MAX_VALUE,
                max: Number.MAX_VALUE,
                isCustomSetting: true,
                updateInterval: _foundation_definitions_ShaderVariableUpdateInterval__WEBPACK_IMPORTED_MODULE_12__.ShaderVariableUpdateInterval.EveryTime,
            },
        ];
    }
    setupShaderProgram(meshComponent) {
        if (meshComponent.mesh == null) {
            return;
        }
        const primitiveNum = meshComponent.mesh.getPrimitiveNumber();
        for (let i = 0; i < primitiveNum; i++) {
            const primitive = meshComponent.mesh.getPrimitiveAt(i);
            const material = primitive.material;
            if (material == null || material.isEmptyMaterial()) {
                continue;
            }
            if (material._shaderProgramUid !==
                _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
                continue;
            }
            const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
            const gl = glw.getRawContext();
            primitive.primitiveMode.index === gl.POINTS;
            try {
                this.setupShaderForMaterial(material);
                primitive._backupMaterial();
            }
            catch (e) {
                console.log(e);
                primitive._restoreMaterial();
                this.setupShaderForMaterial(primitive.material);
            }
        }
    }
    /**
     * setup shader program for the material in this WebGL strategy
     * @param material
     * @param isPointSprite
     */
    setupShaderForMaterial(material, updatedShaderSources) {
        const webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_0__.WebGLResourceRepository.getInstance();
        const glw = webglResourceRepository.currentWebGLContextWrapper;
        let programUid;
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(updatedShaderSources)) {
            programUid = material._createProgram(WebGLStrategyUniform.__vertexShaderMethodDefinitions_uniform, _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_3__.ShaderSemantics.getShaderProperty, glw.isWebGL2);
        }
        else {
            programUid = material.createProgramByUpdatedSources(updatedShaderSources);
        }
        material._setupBasicUniformsLocations();
        material._setUniformLocationsOfMaterialNodes(true);
        const shaderSemanticsInfos = this.componentMatrices;
        const shaderSemanticsInfosPointSprite = _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].getPointSpriteShaderSemanticsInfoArray();
        material._setupAdditionalUniformLocations(shaderSemanticsInfos.concat(shaderSemanticsInfosPointSprite), true);
        WebGLStrategyUniform.__globalDataRepository.setUniformLocationsForUniformModeOnly(material._shaderProgramUid);
        return programUid;
    }
    $load(meshComponent) {
        const mesh = meshComponent.mesh;
        if (!_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.exist(mesh)) {
            return;
        }
        if (!_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].isMaterialsSetup(meshComponent)) {
            this.setupShaderProgram(meshComponent);
        }
        if (!this.isMeshSetup(mesh)) {
            _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].updateVBOAndVAO(mesh);
            const primitiveNum = mesh.getPrimitiveNumber();
            for (let i = 0; i < primitiveNum; i++) {
                const primitive = mesh.getPrimitiveAt(i);
                this.__latestPrimitivePositionAccessorVersions[primitive.primitiveUid] =
                    primitive.positionAccessorVersion;
            }
        }
    }
    isMeshSetup(mesh) {
        if (mesh._variationVBOUid === _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
            return false;
        }
        const primitiveNum = mesh.getPrimitiveNumber();
        for (let i = 0; i < primitiveNum; i++) {
            const primitive = mesh.getPrimitiveAt(i);
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_19__.Is.not.exist(primitive.vertexHandles) ||
                primitive.positionAccessorVersion !==
                    this.__latestPrimitivePositionAccessorVersions[primitive.primitiveUid]) {
                return false;
            }
        }
        return true;
    }
    $prerender(meshComponent, meshRendererComponent, instanceIDBufferUid) {
        if (meshComponent.mesh == null) {
            return;
        }
    }
    common_$prerender() {
        this.__lightComponents = _foundation_core_ComponentRepository__WEBPACK_IMPORTED_MODULE_4__.ComponentRepository.getComponentsWithType(_foundation_components_Light_LightComponent__WEBPACK_IMPORTED_MODULE_5__.LightComponent);
        // Setup Data Texture
        if (this.__dataTextureUid === _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.InvalidCGAPIResourceUid) {
            const memoryManager = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.getInstance();
            const buffer = memoryManager.getBuffer(_foundation_definitions_BufferUse__WEBPACK_IMPORTED_MODULE_15__.BufferUse.GPUVertexData);
            if (buffer == null) {
                return;
            }
            if (buffer.takenSizeInByte / _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferWidthLength / 4 >
                _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferHeightLength) {
                console.warn('The buffer size exceeds the size of the data texture.');
            }
            const dataTextureByteSize = _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferWidthLength *
                _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferHeightLength *
                4 *
                4;
            const concatArrayBuffer = _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_17__.MiscUtil.concatArrayBuffers2({
                finalSize: dataTextureByteSize,
                srcs: [buffer.getArrayBuffer()],
                srcsCopySize: [buffer.takenSizeInByte],
                srcsOffset: [0],
            });
            const floatDataTextureBuffer = new Float32Array(concatArrayBuffer);
            if (this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2) {
                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {
                    level: 0,
                    internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.RGBA32F,
                    width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferWidthLength,
                    height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferHeightLength,
                    border: 0,
                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,
                    type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float,
                    magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Repeat,
                    wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Repeat,
                    generateMipmap: false,
                    anisotropy: false,
                    isPremultipliedAlpha: true,
                });
            }
            else {
                this.__dataTextureUid = this.__webglResourceRepository.createTexture(floatDataTextureBuffer, {
                    level: 0,
                    internalFormat: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.RGBA8,
                    width: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferWidthLength,
                    height: _foundation_core_MemoryManager__WEBPACK_IMPORTED_MODULE_13__.MemoryManager.bufferHeightLength,
                    border: 0,
                    format: _foundation_definitions_PixelFormat__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,
                    type: _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_8__.ComponentType.Float,
                    magFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    minFilter: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Nearest,
                    wrapS: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Repeat,
                    wrapT: _foundation_definitions_TextureParameter__WEBPACK_IMPORTED_MODULE_9__.TextureParameter.Repeat,
                    generateMipmap: false,
                    anisotropy: false,
                    isPremultipliedAlpha: true,
                });
            }
        }
    }
    attachGPUData(primitive) { }
    attachShaderProgram(material) { }
    attachVertexData(i, primitive, glw, instanceIDBufferUid) { }
    attachVertexDataInner(mesh, primitive, primitiveUid, glw, instanceIDBufferUid) {
        const vaoHandles = primitive.vertexHandles;
        const vao = this.__webglResourceRepository.getWebGLResource(mesh.getVaoUidsByPrimitiveUid(primitiveUid));
        const gl = glw.getRawContext();
        if (vao != null) {
            glw.bindVertexArray(vao);
        }
        else {
            this.__webglResourceRepository.setVertexDataToPipeline(vaoHandles, primitive, instanceIDBufferUid);
            const ibo = this.__webglResourceRepository.getWebGLResource(vaoHandles.iboHandle);
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);
        }
    }
    dettachVertexData(glw) {
        const gl = glw.getRawContext();
        if (glw.bindVertexArray) {
            glw.bindVertexArray(null);
        }
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new WebGLStrategyUniform();
        }
        return this.__instance;
    }
    common_$render(primitiveUids, meshComponents, viewMatrix, projectionMatrix, renderPass, renderPassTickCount) {
        if (meshComponents.length === 0) {
            return false;
        }
        if (typeof spector !== 'undefined') {
            spector.setMarker('|  |  Uniform:$render#');
        }
        const glw = this.__webglResourceRepository.currentWebGLContextWrapper;
        const gl = glw.getRawContext();
        const isVrMainPass = _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].isVrMainPass(renderPass);
        const displayNumber = _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].getDisplayNumber(isVrMainPass);
        for (let displayIdx = 0; displayIdx < displayNumber; displayIdx++) {
            if (isVrMainPass) {
                _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].setVRViewport(renderPass, displayIdx);
            }
            // For opaque primitives
            if (renderPass.toRenderOpaquePrimitives) {
                for (let i = 0; i <= _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_10__.MeshRendererComponent._lastOpaqueIndex; i++) {
                    const primitiveUid = primitiveUids[i];
                    this.renderInner(primitiveUid, glw, renderPass, renderPassTickCount, isVrMainPass, displayIdx);
                }
            }
            // For translucent primitives
            if (renderPass.toRenderTransparentPrimitives) {
                if (!_foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_10__.MeshRendererComponent.isDepthMaskTrueForTransparencies) {
                    // disable depth write for transparent primitives
                    gl.depthMask(false);
                }
                for (let i = _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_10__.MeshRendererComponent._lastOpaqueIndex + 1; i <= _foundation_components_MeshRenderer_MeshRendererComponent__WEBPACK_IMPORTED_MODULE_10__.MeshRendererComponent._lastTransparentIndex; i++) {
                    const primitiveUid = primitiveUids[i];
                    this.renderInner(primitiveUid, glw, renderPass, renderPassTickCount, isVrMainPass, displayIdx);
                }
            }
            gl.depthMask(true);
        }
        return false;
    }
    renderInner(primitiveUid, glw, renderPass, renderPassTickCount, isVRMainPass, displayIdx) {
        var _a, _b;
        const gl = glw.getRawContext();
        const primitive = _foundation_geometry_Primitive__WEBPACK_IMPORTED_MODULE_1__.Primitive.getPrimitive(primitiveUid);
        const material = renderPass.getAppropriateMaterial(primitive);
        if (_WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].isSkipDrawing(material)) {
            return false;
        }
        const mesh = primitive.mesh;
        const meshEntity = mesh.meshEntity;
        if (!meshEntity.getSceneGraph().isVisible) {
            return false;
        }
        const meshComponent = meshEntity.getMesh();
        this.attachVertexDataInner(meshComponent.mesh, primitive, primitiveUid, glw, _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_2__.CGAPIResourceRepository.InvalidCGAPIResourceUid);
        const shaderProgram = this.__webglResourceRepository.getWebGLResource(material._shaderProgramUid);
        const shaderProgramUid = material._shaderProgramUid;
        let firstTime = renderPassTickCount !== this.__lastRenderPassTickCount;
        if (shaderProgramUid !== this.__lastShader) {
            firstTime = true;
            gl.useProgram(shaderProgram);
            gl.uniform1i(shaderProgram.dataTexture, 7);
            this.__webglResourceRepository.bindTexture2D(7, this.__dataTextureUid);
            this.__lastShader = shaderProgramUid;
        }
        if (this.__lastMaterial !== material) {
            firstTime = true;
            this.__lastMaterial = material;
        }
        const entity = meshComponent.entity;
        _WebGLStrategyCommonMethod__WEBPACK_IMPORTED_MODULE_18__["default"].setWebGLParameters(material, gl);
        material._setParametersToGpu({
            material,
            shaderProgram,
            firstTime,
            args: {
                setUniform: true,
                glw: glw,
                entity,
                primitive: primitive,
                worldMatrix: entity.getSceneGraph().worldMatrix,
                normalMatrix: entity.getSceneGraph().normalMatrix,
                lightComponents: this.__lightComponents,
                renderPass: renderPass,
                diffuseCube: (_a = entity.tryToGetMeshRenderer()) === null || _a === void 0 ? void 0 : _a.diffuseCubeMap,
                specularCube: (_b = entity.tryToGetMeshRenderer()) === null || _b === void 0 ? void 0 : _b.specularCubeMap,
                isVr: isVRMainPass,
                displayIdx,
            },
        });
        if (primitive.indicesAccessor) {
            gl.drawElements(primitive.primitiveMode.index, primitive.indicesAccessor.elementCount, primitive.indicesAccessor.componentType.index, 0);
        }
        else {
            gl.drawArrays(primitive.primitiveMode.index, 0, primitive.getVertexCountAsVerticesBased());
        }
        return true;
    }
    $render() { }
}
WebGLStrategyUniform.__globalDataRepository = _foundation_core_GlobalDataRepository__WEBPACK_IMPORTED_MODULE_16__.GlobalDataRepository.getInstance();
WebGLStrategyUniform.__vertexShaderMethodDefinitions_uniform = `uniform mat4 u_worldMatrix;
uniform mat3 u_normalMatrix;

mat4 get_worldMatrix(float instanceId) {
  return u_worldMatrix;
}

mat3 get_normalMatrix(float instanceId) {
  return u_normalMatrix;
}

#ifdef RN_IS_VERTEX_SHADER
# ifdef RN_IS_MORPHING
  vec3 get_position(float vertexId, vec3 basePosition) {
    vec3 position = basePosition;
    int scalar_idx = 3 * int(vertexId);
    #ifdef GLSL_ES3
      int posIn4bytes = scalar_idx % 4;
    #else
      int posIn4bytes = int(mod(float(scalar_idx), 4.0));
    #endif
    for (int i=0; i<${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_6__.Config.maxVertexMorphNumberInShader}; i++) {

      int basePosIn16bytes = u_dataTextureMorphOffsetPosition[i] + (scalar_idx - posIn4bytes)/4;

      vec3 addPos = vec3(0.0);
      if (posIn4bytes == 0) {
        vec4 val = fetchElement(basePosIn16bytes);
        addPos = val.xyz;
      } else if (posIn4bytes == 1) {
        vec4 val0 = fetchElement(basePosIn16bytes);
        addPos = vec3(val0.yzw);
      } else if (posIn4bytes == 2) {
        vec4 val0 = fetchElement(basePosIn16bytes);
        vec4 val1 = fetchElement(basePosIn16bytes+1);
        addPos = vec3(val0.zw, val1.x);
      } else if (posIn4bytes == 3) {
        vec4 val0 = fetchElement(basePosIn16bytes);
        vec4 val1 = fetchElement(basePosIn16bytes+1);
        addPos = vec3(val0.w, val1.xy);
      }

      // int index = u_dataTextureMorphOffsetPosition[i] + 1 * int(vertexId);
      // vec3 addPos = fetchElement(u_dataTexture, index, widthOfDataTexture, heightOfDataTexture).xyz;

      position += addPos * u_morphWeights[i];
      if (i == u_morphTargetNumber-1) {
        break;
      }
    }

    return position;
  }
# endif
#endif
  `;


/***/ }),

/***/ "./src/webgl/getRenderingStrategy.ts":
/*!*******************************************!*\
  !*** ./src/webgl/getRenderingStrategy.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebGLStrategyUniform */ "./src/webgl/WebGLStrategyUniform.ts");
/* harmony import */ var _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebGLStrategyFastest */ "./src/webgl/WebGLStrategyFastest.ts");



const getRenderingStrategy = function (processApproach) {
    // Strategy
    if (_foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__.ProcessApproach.isFastestApproach(processApproach)) {
        return _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_2__.WebGLStrategyFastest.getInstance();
    }
    else if (_foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__.ProcessApproach.isUniformApproach(processApproach)) {
        return _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__.WebGLStrategyUniform.getInstance();
    }
    return _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_1__.WebGLStrategyUniform.getInstance();
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getRenderingStrategy);


/***/ }),

/***/ "./src/webgl/index.ts":
/*!****************************!*\
  !*** ./src/webgl/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockBeginShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.BlockBeginShader),
/* harmony export */   "BlockEndShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.BlockEndShader),
/* harmony export */   "ClassicShadingShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.ClassicShadingShader),
/* harmony export */   "ConstantVariableShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.ConstantVariableShader),
/* harmony export */   "EndShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.EndShader),
/* harmony export */   "GLSLShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.GLSLShader),
/* harmony export */   "IfStatementShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.IfStatementShader),
/* harmony export */   "KTX2TextureLoader": () => (/* reexport safe */ _textureLoader_index__WEBPACK_IMPORTED_MODULE_10__.KTX2TextureLoader),
/* harmony export */   "TextureFetchShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.TextureFetchShader),
/* harmony export */   "UniformDataShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.UniformDataShader),
/* harmony export */   "VaryingVariableShader": () => (/* reexport safe */ _shaders_index__WEBPACK_IMPORTED_MODULE_9__.VaryingVariableShader),
/* harmony export */   "WebGLContextWrapper": () => (/* reexport safe */ _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_0__.WebGLContextWrapper),
/* harmony export */   "WebGLExtension": () => (/* reexport safe */ _WebGLExtension__WEBPACK_IMPORTED_MODULE_2__.WebGLExtension),
/* harmony export */   "WebGLResourceRepository": () => (/* reexport safe */ _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__.WebGLResourceRepository),
/* harmony export */   "WebGLStrategyFastest": () => (/* reexport safe */ _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_6__.WebGLStrategyFastest),
/* harmony export */   "WebGLStrategyUniform": () => (/* reexport safe */ _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_7__.WebGLStrategyUniform)
/* harmony export */ });
/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebGLContextWrapper */ "./src/webgl/WebGLContextWrapper.ts");
/* harmony import */ __webpack_require__(/*! ./WebGLExtendedTypes */ "./src/webgl/WebGLExtendedTypes.ts");
/* harmony import */ var _WebGLExtension__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebGLExtension */ "./src/webgl/WebGLExtension.ts");
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ __webpack_require__(/*! ./WebGLStrategy */ "./src/webgl/WebGLStrategy.ts");
/* harmony import */ __webpack_require__(/*! ./WebGLStrategyCommonMethod */ "./src/webgl/WebGLStrategyCommonMethod.ts");
/* harmony import */ var _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebGLStrategyFastest */ "./src/webgl/WebGLStrategyFastest.ts");
/* harmony import */ var _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./WebGLStrategyUniform */ "./src/webgl/WebGLStrategyUniform.ts");
/* harmony import */ __webpack_require__(/*! ./getRenderingStrategy */ "./src/webgl/getRenderingStrategy.ts");
/* harmony import */ var _shaders_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./shaders/index */ "./src/webgl/shaders/index.ts");
/* harmony import */ var _textureLoader_index__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./textureLoader/index */ "./src/webgl/textureLoader/index.ts");
/* harmony import */ __webpack_require__(/*! ./types/index */ "./src/webgl/types/index.ts");














/***/ }),

/***/ "./src/webgl/main.ts":
/*!***************************!*\
  !*** ./src/webgl/main.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getRenderingStrategy */ "./src/webgl/getRenderingStrategy.ts");
/* harmony import */ var _shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shaders/GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebGLContextWrapper */ "./src/webgl/WebGLContextWrapper.ts");
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WebGLStrategyUniform */ "./src/webgl/WebGLStrategyUniform.ts");
/* harmony import */ var _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WebGLStrategyFastest */ "./src/webgl/WebGLStrategyFastest.ts");






const WebGL = Object.freeze({
    getRenderingStrategy: _getRenderingStrategy__WEBPACK_IMPORTED_MODULE_0__["default"],
    GLSLShader: _shaders_GLSLShader__WEBPACK_IMPORTED_MODULE_1__.GLSLShader,
    WebGLContextWrapper: _WebGLContextWrapper__WEBPACK_IMPORTED_MODULE_2__.WebGLContextWrapper,
    WebGLResourceRepository: _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__.WebGLResourceRepository,
    WebGLStrategyUniform: _WebGLStrategyUniform__WEBPACK_IMPORTED_MODULE_4__.WebGLStrategyUniform,
    WebGLStrategyFastest: _WebGLStrategyFastest__WEBPACK_IMPORTED_MODULE_5__.WebGLStrategyFastest,
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WebGL);
(0, eval)('this').RnWebGL = WebGL;


/***/ }),

/***/ "./src/webgl/shaders/GLSLShader.ts":
/*!*****************************************!*\
  !*** ./src/webgl/shaders/GLSLShader.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GLSLShader": () => (/* binding */ GLSLShader)
/* harmony export */ });
/* harmony import */ var _foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../foundation/definitions/ProcessApproach */ "./src/foundation/definitions/ProcessApproach.ts");
/* harmony import */ var _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../foundation/definitions/ShaderSemantics */ "./src/foundation/definitions/ShaderSemantics.ts");
/* harmony import */ var _foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/VertexAttribute */ "./src/foundation/definitions/VertexAttribute.ts");
/* harmony import */ var _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../WebGLResourceRepository */ "./src/webgl/WebGLResourceRepository.ts");
/* harmony import */ var _foundation_system_SystemState__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../foundation/system/SystemState */ "./src/foundation/system/SystemState.ts");





class GLSLShader {
    constructor() {
        this.__webglResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__.WebGLResourceRepository.getInstance();
    }
    get glsl_fragColor() {
        const repo = this.__webglResourceRepository;
        if (repo.currentWebGLContextWrapper != null &&
            repo.currentWebGLContextWrapper.isWebGL2) {
            return '';
        }
        else {
            return 'gl_FragColor = rt0;\n';
        }
    }
    get glsl_textureCube() {
        const repo = this.__webglResourceRepository;
        if (repo.currentWebGLContextWrapper.isWebGL2) {
            return 'texture';
        }
        else {
            return 'textureCube';
        }
    }
    static get glslMainBegin() {
        return `
void main() {
`;
    }
    static get glslMainEnd() {
        return `
}
    `;
    }
    getGlslVertexShaderProperies(str = '') {
        return str;
    }
    get prerequisites() {
        const webGLResourceRepository = _WebGLResourceRepository__WEBPACK_IMPORTED_MODULE_3__.WebGLResourceRepository.getInstance();
        webGLResourceRepository.getGlslDataUBODefinitionString();
        webGLResourceRepository.getGlslDataUBOVec4SizeString();
        return `uniform float u_materialSID;
`;
    }
    get mainPrerequisites() {
        const processApproach = _foundation_system_SystemState__WEBPACK_IMPORTED_MODULE_4__["default"].currentProcessApproach;
        if (_foundation_definitions_ProcessApproach__WEBPACK_IMPORTED_MODULE_0__.ProcessApproach.isFastestApproach(processApproach)) {
            return `
`;
        }
        else {
            return `
      `;
        }
    }
    static getStringFromShaderAnyDataType(data) {
        if (data instanceof _foundation_definitions_ShaderSemantics__WEBPACK_IMPORTED_MODULE_1__.ShaderSemanticsClass) {
            return 'u_' + data.str;
        }
        else if (_foundation_definitions_VertexAttribute__WEBPACK_IMPORTED_MODULE_2__.VertexAttribute.isInstanceOfVertexAttributeClass(data)) {
            return data.shaderStr;
        }
        else {
            return data;
        }
    }
}


/***/ }),

/***/ "./src/webgl/shaders/index.ts":
/*!************************************!*\
  !*** ./src/webgl/shaders/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockBeginShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.BlockBeginShader),
/* harmony export */   "BlockEndShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.BlockEndShader),
/* harmony export */   "ClassicShadingShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ClassicShadingShader),
/* harmony export */   "ConstantVariableShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.ConstantVariableShader),
/* harmony export */   "EndShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.EndShader),
/* harmony export */   "GLSLShader": () => (/* reexport safe */ _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader),
/* harmony export */   "IfStatementShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.IfStatementShader),
/* harmony export */   "TextureFetchShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.TextureFetchShader),
/* harmony export */   "UniformDataShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.UniformDataShader),
/* harmony export */   "VaryingVariableShader": () => (/* reexport safe */ _nodes_index__WEBPACK_IMPORTED_MODULE_1__.VaryingVariableShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _nodes_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodes/index */ "./src/webgl/shaders/nodes/index.ts");




/***/ }),

/***/ "./src/webgl/shaders/nodes/BlockBeginShader.ts":
/*!*****************************************************!*\
  !*** ./src/webgl/shaders/nodes/BlockBeginShader.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockBeginShader": () => (/* binding */ BlockBeginShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class BlockBeginShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor(__functionName, __valueInputs, __valueOutputs) {
        super();
        this.__functionName = __functionName;
        this.__valueInputs = __valueInputs;
        this.__valueOutputs = __valueOutputs;
    }
    get vertexShaderDefinitions() {
        let funcStr = `void ${this.__functionName}(
in bool context,
      `;
        for (let i = 0; i < this.__valueInputs.length; i++) {
            const input = this.__valueInputs[i];
            const type = input.compositionType.getGlslStr(input.componentType);
            funcStr += `
        in ${type} value${i},`;
        }
        for (let i = 0; i < this.__valueOutputs.length; i++) {
            const output = this.__valueOutputs[i];
            const type = output.compositionType.getGlslStr(output.componentType);
            funcStr +=
                `
        out ${type} outValue${i}` +
                    (i === this.__valueOutputs.length - 1 ? '' : ',');
        }
        funcStr += ') {\n';
        for (let i = 0; i < this.__valueOutputs.length; i++) {
            funcStr += `
      outValue${i} = value${i};\n`;
        }
        funcStr += '}';
        return funcStr;
    }
    get pixelShaderDefinitions() {
        return this.vertexShaderDefinitions;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/BlockEndShader.ts":
/*!***************************************************!*\
  !*** ./src/webgl/shaders/nodes/BlockEndShader.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockEndShader": () => (/* binding */ BlockEndShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class BlockEndShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor(__functionName, __valueInputs, __valueOutputs) {
        super();
        this.__functionName = __functionName;
        this.__valueInputs = __valueInputs;
        this.__valueOutputs = __valueOutputs;
    }
    get vertexShaderDefinitions() {
        let funcStr = `void ${this.__functionName}(`;
        for (let i = 0; i < this.__valueInputs.length; i++) {
            const input = this.__valueInputs[i];
            const type = input.compositionType.getGlslStr(input.componentType);
            funcStr += `
        in ${type} value${i},`;
        }
        for (let i = 0; i < this.__valueOutputs.length; i++) {
            const output = this.__valueOutputs[i];
            const type = output.compositionType.getGlslStr(output.componentType);
            funcStr +=
                `
        out ${type} outValue${i}` +
                    (i === this.__valueOutputs.length - 1 ? '' : ',');
        }
        funcStr += ') {\n';
        for (let i = 0; i < this.__valueOutputs.length; i++) {
            funcStr += `
      outValue${i} = value${i};\n`;
        }
        funcStr += '}';
        return funcStr;
    }
    get pixelShaderDefinitions() {
        return this.vertexShaderDefinitions;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/ClassicShadingShader.ts":
/*!*********************************************************!*\
  !*** ./src/webgl/shaders/nodes/ClassicShadingShader.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ClassicShadingShader": () => (/* binding */ ClassicShadingShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _foundation_core_Config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/core/Config */ "./src/foundation/core/Config.ts");
/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../foundation/definitions/ShaderNode */ "./src/foundation/definitions/ShaderNode.ts");



class ClassicShadingShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor() {
        super();
        this.vertexShaderBody = `


  `;
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new ClassicShadingShader();
        }
        return this.__instance;
    }
    get vertexShaderDefinitions() {
        return `

`;
    }
    get pixelShaderDefinitions() {
        return `
uniform int u_shadingModel;
uniform float u_shininess;

struct Light {
  vec4 lightPosition;
  vec4 lightDirection;
  vec4 lightIntensity;
};
uniform Light u_lights[${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_1__.Config.maxLightNumberInShader}];
uniform int u_lightNumber;
uniform vec3 u_viewPosition;


bool classicShading(
  in vec3 diffuseColor,
  in vec3 position_inWorld,
  in vec3 normal_inWorld,
  out vec3 outColor
  )
{
  // Lighting
  outColor = vec3(0.0, 0.0, 0.0);
  if (u_shadingModel > 0) {

    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    for (int i = 0; i < ${_foundation_core_Config__WEBPACK_IMPORTED_MODULE_1__.Config.maxLightNumberInShader}; i++) {
      if (i >= u_lightNumber) {
        break;
      }

      vec3 lightDirection = u_lights[i].lightDirection.xyz;
      float lightType = u_lights[i].lightPosition.w;
      float spotCosCutoff = u_lights[i].lightDirection.w;
      float spotExponent = u_lights[i].lightIntensity.w;

      if (0.75 < lightType) { // is pointlight or spotlight
        lightDirection = normalize(u_lights[i].lightPosition.xyz - position_inWorld.xyz);
      }
      float spotEffect = 1.0;
      if (lightType > 1.75) { // is spotlight
        spotEffect = dot(u_lights[i].lightDirection.xyz, lightDirection);
        if (spotEffect > spotCosCutoff) {
          spotEffect = pow(spotEffect, spotExponent);
        } else {
          spotEffect = 0.0;
        }
      }

      vec3 incidentLight = spotEffect * u_lights[i].lightIntensity.xyz;
//      incidentLight *= M_PI;

      normal_inWorld = normalize(normal_inWorld);

      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;

      if (u_shadingModel == 2) {// BLINN
        // ViewDirection
        vec3 viewDirection = normalize(u_viewPosition - position_inWorld.xyz);
        vec3 halfVector = normalize(lightDirection + viewDirection);
        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), u_shininess);
      } else if (u_shadingModel == 3) { // PHONG
        vec3 viewDirection = normalize(u_viewPosition - position_inWorld.xyz);
        vec3 R = reflect(lightDirection, normal_inWorld);
        specular += pow(max(0.0, dot(R, viewDirection)), u_shininess);
      }

    }

    outColor = diffuse + specular;
  } else {
    outColor = diffuseColor;
  }
}

    `;
    }
    get pixelShaderBody() {
        return '';
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}
ClassicShadingShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_2__.ShaderNode.PBRShading;


/***/ }),

/***/ "./src/webgl/shaders/nodes/ConstantVariableShader.ts":
/*!***********************************************************!*\
  !*** ./src/webgl/shaders/nodes/ConstantVariableShader.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConstantVariableShader": () => (/* binding */ ConstantVariableShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/definitions/ComponentType */ "./src/foundation/definitions/ComponentType.ts");


class ConstantVariableShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor(__functionName, __compositionType, __componentType) {
        super();
        this.__functionName = __functionName;
        this.__compositionType = __compositionType;
        this.__componentType = __componentType;
        this.__constantValueStr = '';
    }
    setConstantValue(value) {
        let constant = '';
        if (this.__componentType.isFloatingPoint()) {
            constant = value.glslStrAsFloat;
        }
        else if (this.__componentType.isInteger()) {
            constant = value.glslStrAsInt;
        }
        else if (this.__componentType === _foundation_definitions_ComponentType__WEBPACK_IMPORTED_MODULE_1__.ComponentType.Bool) {
            constant = value.x ? 'true' : 'false';
        }
        this.__constantValueStr = constant;
    }
    get vertexShaderDefinitions() {
        return `
    void ${this.__functionName}(
      out ${this.__compositionType.getGlslStr(this.__componentType)} outValue) {
      outValue = ${this.__constantValueStr};
    }
    `;
    }
    get pixelShaderDefinitions() {
        return `
    void ${this.__functionName}(
      out ${this.__compositionType.getGlslStr(this.__componentType)} outValue) {
      outValue = ${this.__constantValueStr};
    }
    `;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/EndShader.ts":
/*!**********************************************!*\
  !*** ./src/webgl/shaders/nodes/EndShader.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EndShader": () => (/* binding */ EndShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");
/* harmony import */ var _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../foundation/definitions/ShaderNode */ "./src/foundation/definitions/ShaderNode.ts");


class EndShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor() {
        super();
    }
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new EndShader();
        }
        return this.__instance;
    }
    get vertexShaderDefinitions() {
        return `
    void outPosition(in vec4 inPosition) {
      gl_Position = inPosition;
    }
    `;
    }
    get vertexShaderBody() {
        return `

    `;
    }
    get pixelShaderDefinitions() {
        const _def_fragColor = this.glsl_fragColor;
        let vec4StrOrNot = '';
        if (_def_fragColor !== '') {
            vec4StrOrNot = 'vec4';
        }
        return `
    void outColor(in vec4 inColor) {
      ${vec4StrOrNot} rt0 = inColor;
      ${_def_fragColor}
    }
    `;
    }
    getPixelShaderBody() {
        return '';
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}
EndShader.materialElement = _foundation_definitions_ShaderNode__WEBPACK_IMPORTED_MODULE_1__.ShaderNode.PBRShading;


/***/ }),

/***/ "./src/webgl/shaders/nodes/IfStatementShader.ts":
/*!******************************************************!*\
  !*** ./src/webgl/shaders/nodes/IfStatementShader.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IfStatementShader": () => (/* binding */ IfStatementShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class IfStatementShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor() {
        super();
    }
    get vertexShaderDefinitions() {
        return `
    `;
    }
    get pixelShaderDefinitions() {
        return `
    `;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/TextureFetchShader.ts":
/*!*******************************************************!*\
  !*** ./src/webgl/shaders/nodes/TextureFetchShader.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextureFetchShader": () => (/* binding */ TextureFetchShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class TextureFetchShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor() {
        super();
        this.__materialNodeUid = 0;
        this.vertexShaderBody = `
  `;
    }
    set materialNodeUid(materialNodeUid) {
        this.__materialNodeUid = materialNodeUid;
    }
    getPixelShaderBody() {
        return `
    `;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/UniformDataShader.ts":
/*!******************************************************!*\
  !*** ./src/webgl/shaders/nodes/UniformDataShader.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UniformDataShader": () => (/* binding */ UniformDataShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class UniformDataShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor(__functionName, __compositionType, __componentType) {
        super();
        this.__functionName = __functionName;
        this.__compositionType = __compositionType;
        this.__componentType = __componentType;
        this.__variableName = '';
        this.__valueStr = '';
    }
    setVariableName(name) {
        this.__variableName = name;
    }
    setDefaultValue(value) {
        this.__valueStr = value.toString();
    }
    get vertexShaderDefinitions() {
        return `
    uniform ${this.__compositionType.getGlslStr(this.__componentType)} u_${this.__variableName}; // initialValue=${this.__valueStr}
    void ${this.__functionName}(out ${this.__compositionType.getGlslStr(this.__componentType)} outValue) {
#ifdef RN_IS_FASTEST_MODE
  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID
#else
  float materialSID = u_materialSID;
#endif

outValue = get_${this.__variableName}(materialSID, 0);
    }
    `;
    }
    get pixelShaderDefinitions() {
        return `
    uniform ${this.__compositionType.getGlslStr(this.__componentType)} u_${this.__variableName}; // initialValue=${this.__valueStr}
    void ${this.__functionName}(out ${this.__compositionType.getGlslStr(this.__componentType)} outValue) {
#ifdef RN_IS_FASTEST_MODE
  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID
#else
  float materialSID = u_materialSID;
#endif

outValue = get_${this.__variableName}(materialSID, 0);
    }
    `;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/VaryingVariableShader.ts":
/*!**********************************************************!*\
  !*** ./src/webgl/shaders/nodes/VaryingVariableShader.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VaryingVariableShader": () => (/* binding */ VaryingVariableShader)
/* harmony export */ });
/* harmony import */ var _GLSLShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLSLShader */ "./src/webgl/shaders/GLSLShader.ts");

class VaryingVariableShader extends _GLSLShader__WEBPACK_IMPORTED_MODULE_0__.GLSLShader {
    constructor(__functionName, __compositionType, __componentType) {
        super();
        this.__functionName = __functionName;
        this.__compositionType = __compositionType;
        this.__componentType = __componentType;
        this.__variableName = '';
    }
    setVariableName(name) {
        this.__variableName = name;
    }
    get vertexShaderDefinitions() {
        return `
    out ${this.__compositionType.getGlslStr(this.__componentType)} ${this.__variableName};
    void ${this.__functionName}(
      in ${this.__compositionType.getGlslStr(this.__componentType)} value) {
      ${this.__variableName} = value;
    }
    `;
    }
    get pixelShaderDefinitions() {
        return `
    in ${this.__compositionType.getGlslStr(this.__componentType)} ${this.__variableName};
    void ${this.__functionName}(
      out ${this.__compositionType.getGlslStr(this.__componentType)} outValue) {
      outValue = ${this.__variableName};
    }
    `;
    }
    get attributeNames() {
        return [];
    }
    get attributeSemantics() {
        return [];
    }
    get attributeCompositions() {
        return [];
    }
}


/***/ }),

/***/ "./src/webgl/shaders/nodes/index.ts":
/*!******************************************!*\
  !*** ./src/webgl/shaders/nodes/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BlockBeginShader": () => (/* reexport safe */ _BlockBeginShader__WEBPACK_IMPORTED_MODULE_0__.BlockBeginShader),
/* harmony export */   "BlockEndShader": () => (/* reexport safe */ _BlockEndShader__WEBPACK_IMPORTED_MODULE_1__.BlockEndShader),
/* harmony export */   "ClassicShadingShader": () => (/* reexport safe */ _ClassicShadingShader__WEBPACK_IMPORTED_MODULE_2__.ClassicShadingShader),
/* harmony export */   "ConstantVariableShader": () => (/* reexport safe */ _ConstantVariableShader__WEBPACK_IMPORTED_MODULE_3__.ConstantVariableShader),
/* harmony export */   "EndShader": () => (/* reexport safe */ _EndShader__WEBPACK_IMPORTED_MODULE_4__.EndShader),
/* harmony export */   "IfStatementShader": () => (/* reexport safe */ _IfStatementShader__WEBPACK_IMPORTED_MODULE_5__.IfStatementShader),
/* harmony export */   "TextureFetchShader": () => (/* reexport safe */ _TextureFetchShader__WEBPACK_IMPORTED_MODULE_6__.TextureFetchShader),
/* harmony export */   "UniformDataShader": () => (/* reexport safe */ _UniformDataShader__WEBPACK_IMPORTED_MODULE_7__.UniformDataShader),
/* harmony export */   "VaryingVariableShader": () => (/* reexport safe */ _VaryingVariableShader__WEBPACK_IMPORTED_MODULE_8__.VaryingVariableShader)
/* harmony export */ });
/* harmony import */ var _BlockBeginShader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BlockBeginShader */ "./src/webgl/shaders/nodes/BlockBeginShader.ts");
/* harmony import */ var _BlockEndShader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BlockEndShader */ "./src/webgl/shaders/nodes/BlockEndShader.ts");
/* harmony import */ var _ClassicShadingShader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ClassicShadingShader */ "./src/webgl/shaders/nodes/ClassicShadingShader.ts");
/* harmony import */ var _ConstantVariableShader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConstantVariableShader */ "./src/webgl/shaders/nodes/ConstantVariableShader.ts");
/* harmony import */ var _EndShader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EndShader */ "./src/webgl/shaders/nodes/EndShader.ts");
/* harmony import */ var _IfStatementShader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./IfStatementShader */ "./src/webgl/shaders/nodes/IfStatementShader.ts");
/* harmony import */ var _TextureFetchShader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TextureFetchShader */ "./src/webgl/shaders/nodes/TextureFetchShader.ts");
/* harmony import */ var _UniformDataShader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UniformDataShader */ "./src/webgl/shaders/nodes/UniformDataShader.ts");
/* harmony import */ var _VaryingVariableShader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./VaryingVariableShader */ "./src/webgl/shaders/nodes/VaryingVariableShader.ts");











/***/ }),

/***/ "./src/webgl/textureLoader/KTX2TextureLoader.ts":
/*!******************************************************!*\
  !*** ./src/webgl/textureLoader/KTX2TextureLoader.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KTX2TextureLoader": () => (/* binding */ KTX2TextureLoader)
/* harmony export */ });
/* harmony import */ var ktx_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ktx-parse */ "./node_modules/ktx-parse/dist/ktx-parse.modern.js");
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../foundation/definitions/CompressionTextureType */ "./src/foundation/definitions/CompressionTextureType.ts");
/* harmony import */ var zstddec__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zstddec */ "./node_modules/zstddec/dist/zstddec.modern.js");




const CompressedTextureFormat = {
    ETC1S: 0,
    UASTC4x4: 1,
};
const TranscodeTarget = {
    ETC1_RGB: 'ETC1_RGB',
    BC1_RGB: 'BC1_RGB',
    BC4_R: 'BC4_R',
    BC5_RG: 'BC5_RG',
    BC3_RGBA: 'BC3_RGBA',
    PVRTC1_4_RGB: 'PVRTC1_4_RGB',
    PVRTC1_4_RGBA: 'PVRTC1_4_RGBA',
    BC7_RGBA: 'BC7_RGBA',
    BC7_M6_RGB: 'BC7_M6_RGB',
    BC7_M5_RGBA: 'BC7_M5_RGBA',
    ETC2_RGBA: 'ETC2_RGBA',
    ASTC_4x4_RGBA: 'ASTC_4x4_RGBA',
    RGBA32: 'RGBA32',
    RGB565: 'RGB565',
    BGR565: 'BGR565',
    RGBA4444: 'RGBA4444',
    PVRTC2_4_RGB: 'PVRTC2_4_RGB',
    PVRTC2_4_RGBA: 'PVRTC2_4_RGBA',
    EAC_R11: 'EAC_R11',
    EAC_RG11: 'EAC_RG11',
};
class KTX2TextureLoader {
    constructor() {
        if (typeof MSC_TRANSCODER === 'undefined') {
            console.error('Failed to call MSC_TRANSCODER() function. Please check to import msc_basis_transcoder.js.');
        }
        this.__mscTranscoderPromise = this.__loadMSCTranscoder();
    }
    // ----- Public Methods -----------------------------------------------------
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new KTX2TextureLoader();
        }
        return this.__instance;
    }
    transcode(uint8Array) {
        const ktx2Container = this.__parse(uint8Array);
        if (ktx2Container.pixelDepth > 0) {
            throw new Error('Only 2D textures are currently supported');
        }
        if (ktx2Container.layerCount > 1) {
            throw new Error('Array textures are not currently supported');
        }
        if (ktx2Container.faceCount > 1) {
            throw new Error('Cube textures are not currently supported');
        }
        if (ktx2Container.supercompressionScheme === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2SupercompressionScheme.ZSTD) {
            if (KTX2TextureLoader.__zstdDecoder == null) {
                KTX2TextureLoader.__zstdDecoder = new zstddec__WEBPACK_IMPORTED_MODULE_3__.ZSTDDecoder();
            }
            return KTX2TextureLoader.__zstdDecoder.init().then(() => {
                return this.__mscTranscoderPromise.then(() => {
                    return this.__transcodeData(ktx2Container);
                });
            });
        }
        else {
            return this.__mscTranscoderPromise.then(() => {
                return this.__transcodeData(ktx2Container);
            });
        }
    }
    // ----- Private Methods ----------------------------------------------------
    __loadMSCTranscoder() {
        // load msc_basis_transcoder once
        return new Promise(resolve => {
            if (KTX2TextureLoader.__mscTranscoderModule) {
                resolve();
            }
            MSC_TRANSCODER().then((transcoderModule) => {
                transcoderModule.initTranscoders();
                KTX2TextureLoader.__mscTranscoderModule = transcoderModule;
                resolve();
            });
        });
    }
    __getDeviceDependentParameters(hasAlpha) {
        const webGLResourceRepository = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_1__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webGLResourceRepository.currentWebGLContextWrapper;
        const astc = glw.webgl2ExtCTAstc || glw.webgl1ExtCTAstc;
        const bptc = glw.webgl2ExtCTBptc || glw.webgl1ExtCTBptc;
        const s3tc = glw.webgl2ExtCTS3tc || glw.webgl1ExtCTS3tc;
        const pvrtc = glw.webgl2ExtCTPvrtc || glw.webgl1ExtCTPvrtc;
        const etc2 = glw.webgl2ExtCTEtc || glw.webgl1ExtCTEtc;
        const etc1 = glw.webgl2ExtCTEtc1 || glw.webgl1ExtCTEtc1;
        let transcodeTargetStr;
        let compressionTextureType;
        if (astc) {
            transcodeTargetStr = TranscodeTarget.ASTC_4x4_RGBA;
            compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.ASTC_RGBA_4x4;
        }
        else if (bptc) {
            transcodeTargetStr = TranscodeTarget.BC7_RGBA;
            compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.BPTC_RGBA;
        }
        else if (s3tc) {
            if (hasAlpha) {
                transcodeTargetStr = TranscodeTarget.BC3_RGBA;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.S3TC_RGBA_DXT5;
            }
            else {
                transcodeTargetStr = TranscodeTarget.BC1_RGB;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.S3TC_RGB_DXT1;
            }
        }
        else if (pvrtc) {
            if (hasAlpha) {
                transcodeTargetStr = TranscodeTarget.PVRTC1_4_RGBA;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.PVRTC_RGBA_4BPPV1;
            }
            else {
                transcodeTargetStr = TranscodeTarget.PVRTC1_4_RGB;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.PVRTC_RGB_4BPPV1;
            }
        }
        else if (etc2) {
            if (hasAlpha) {
                transcodeTargetStr = TranscodeTarget.ETC2_RGBA;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.ETC2_RGBA8_EAC;
            }
            else {
                transcodeTargetStr = TranscodeTarget.ETC1_RGB;
                compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.ETC2_RGB8;
            }
        }
        else if (etc1) {
            transcodeTargetStr = TranscodeTarget.ETC1_RGB;
            compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.ETC1_RGB;
        }
        else {
            transcodeTargetStr = TranscodeTarget.RGBA32;
            compressionTextureType = _foundation_definitions_CompressionTextureType__WEBPACK_IMPORTED_MODULE_2__.CompressionTextureType.RGBA8_EXT;
        }
        return { transcodeTargetStr, compressionTextureType };
    }
    __parse(uint8Array) {
        // The parser can detect an invalid identifier.
        return (0, ktx_parse__WEBPACK_IMPORTED_MODULE_0__.read)(uint8Array);
    }
    __transcodeData(ktx2Container) {
        var _a;
        const width = ktx2Container.pixelWidth;
        const height = ktx2Container.pixelHeight;
        const faceCount = ktx2Container.faceCount; // faceCount is 6 if the transcoded data is a cube map (not support yet)
        const imageDescs = (_a = ktx2Container.globalData) === null || _a === void 0 ? void 0 : _a.imageDescs;
        const dfd = ktx2Container.dataFormatDescriptor[0];
        const compressedTextureFormat = dfd.colorModel === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2Model.UASTC
            ? CompressedTextureFormat.UASTC4x4
            : CompressedTextureFormat.ETC1S;
        const hasAlpha = this.__hasAlpha(dfd, compressedTextureFormat);
        const isVideo = false;
        const transcoderModule = KTX2TextureLoader.__mscTranscoderModule;
        const transcoder = compressedTextureFormat === CompressedTextureFormat.UASTC4x4
            ? new transcoderModule.UastcImageTranscoder()
            : new transcoderModule.BasisLzEtc1sImageTranscoder();
        const textureFormat = compressedTextureFormat === CompressedTextureFormat.UASTC4x4
            ? transcoderModule.TextureFormat.UASTC4x4
            : transcoderModule.TextureFormat.ETC1S;
        const { transcodeTargetStr, compressionTextureType } = this.__getDeviceDependentParameters(hasAlpha);
        const transcodeTarget = transcoderModule.TranscodeTarget[transcodeTargetStr];
        const mipmapData = [];
        const transcodedData = {
            width,
            height,
            compressionTextureType,
            mipmapData,
            needGammaCorrection: dfd.transferFunction !== ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2Transfer.SRGB,
        };
        for (let level = 0; level < ktx2Container.levels.length; level++) {
            const levelWidth = Math.max(1, width >> level);
            const levelHeight = Math.max(1, height >> level);
            const imageInfo = new transcoderModule.ImageInfo(textureFormat, levelWidth, levelHeight, level);
            let levelBuffer = ktx2Container.levels[level].levelData;
            const levelUncompressedByteLength = ktx2Container.levels[level].uncompressedByteLength;
            const levelBufferByteLength = imageInfo.numBlocksX * imageInfo.numBlocksY * dfd.bytesPlane[0];
            if (ktx2Container.supercompressionScheme === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2SupercompressionScheme.ZSTD) {
                levelBuffer = KTX2TextureLoader.__zstdDecoder.decode(levelBuffer, levelUncompressedByteLength);
            }
            let faceBufferByteOffset = 0;
            const firstImageDescIndexInLevel = level *
                Math.max(ktx2Container.layerCount, 1) *
                faceCount *
                Math.max(ktx2Container.pixelDepth, 1);
            for (let faceIndex = 0; faceIndex < faceCount; faceIndex++) {
                let imageDesc = null;
                let faceBuffer;
                if (ktx2Container.supercompressionScheme ===
                    ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2SupercompressionScheme.BASISLZ) {
                    imageDesc = imageDescs === null || imageDescs === void 0 ? void 0 : imageDescs[firstImageDescIndexInLevel + faceIndex];
                    faceBuffer = new Uint8Array(levelBuffer, imageDesc.rgbSliceByteOffset, imageDesc.rgbSliceByteLength + imageDesc.alphaSliceByteLength);
                }
                else {
                    faceBuffer = new Uint8Array(levelBuffer, faceBufferByteOffset, levelBufferByteLength);
                    faceBufferByteOffset += levelBufferByteLength;
                }
                let result;
                if (compressedTextureFormat === CompressedTextureFormat.UASTC4x4) {
                    imageInfo.flags = 0;
                    imageInfo.rgbByteOffset = 0;
                    imageInfo.rgbByteLength = levelUncompressedByteLength;
                    imageInfo.alphaByteOffset = 0;
                    imageInfo.alphaByteLength = 0;
                    result = transcoder.transcodeImage(transcodeTarget, faceBuffer, imageInfo, 0, hasAlpha, isVideo);
                }
                else {
                    const sgd = ktx2Container.globalData;
                    const basisTranscoder = transcoder;
                    basisTranscoder.decodePalettes(sgd.endpointCount, sgd.endpointsData, sgd.selectorCount, sgd.selectorsData);
                    basisTranscoder.decodeTables(sgd.tablesData);
                    imageInfo.flags = imageDesc.imageFlags;
                    imageInfo.rgbByteOffset = 0;
                    imageInfo.rgbByteLength = imageDesc.rgbSliceByteLength;
                    imageInfo.alphaByteOffset =
                        imageDesc.alphaSliceByteOffset > 0
                            ? imageDesc.rgbSliceByteLength
                            : 0;
                    imageInfo.alphaByteLength = imageDesc.alphaSliceByteLength;
                    result = basisTranscoder.transcodeImage(transcodeTarget, faceBuffer, imageInfo, 0, isVideo);
                }
                if ((result === null || result === void 0 ? void 0 : result.transcodedImage) != null) {
                    const transcodedTextureBuffer = result.transcodedImage
                        .get_typed_memory_view()
                        .slice();
                    result.transcodedImage.delete();
                    const mipmap = {
                        level,
                        width: levelWidth,
                        height: levelHeight,
                        buffer: transcodedTextureBuffer,
                    };
                    mipmapData.push(mipmap);
                }
            }
        }
        return transcodedData;
    }
    __hasAlpha(dfd, compressedTextureFormat) {
        if (compressedTextureFormat === CompressedTextureFormat.UASTC4x4) {
            return dfd.samples[0].channelID === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2ChannelUASTC.RGBA;
        }
        else {
            return (dfd.samples.length === 2 &&
                (dfd.samples[0].channelID === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2ChannelETC1S.AAA ||
                    dfd.samples[1].channelID === ktx_parse__WEBPACK_IMPORTED_MODULE_0__.KTX2ChannelETC1S.AAA));
        }
    }
}


/***/ }),

/***/ "./src/webgl/textureLoader/index.ts":
/*!******************************************!*\
  !*** ./src/webgl/textureLoader/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KTX2TextureLoader": () => (/* reexport safe */ _KTX2TextureLoader__WEBPACK_IMPORTED_MODULE_0__.KTX2TextureLoader)
/* harmony export */ });
/* harmony import */ var _KTX2TextureLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KTX2TextureLoader */ "./src/webgl/textureLoader/KTX2TextureLoader.ts");



/***/ }),

/***/ "./src/webgl/types/CommonTypes.ts":
/*!****************************************!*\
  !*** ./src/webgl/types/CommonTypes.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "./src/webgl/types/index.ts":
/*!**********************************!*\
  !*** ./src/webgl/types/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ __webpack_require__(/*! ./CommonTypes */ "./src/webgl/types/CommonTypes.ts");



/***/ }),

/***/ "./src/xr/WebXRInput.ts":
/*!******************************!*\
  !*** ./src/xr/WebXRInput.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createMotionController": () => (/* binding */ createMotionController),
/* harmony export */   "getMotionController": () => (/* binding */ getMotionController),
/* harmony export */   "updateGamePad": () => (/* binding */ updateGamePad),
/* harmony export */   "updateMotionControllerModel": () => (/* binding */ updateMotionControllerModel)
/* harmony export */ });
/* harmony import */ var webxr_input_profiles_packages_motion_controllers_src_motionController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webxr-input-profiles/packages/motion-controllers/src/motionController */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/motionController.js");
/* harmony import */ var webxr_input_profiles_packages_motion_controllers_src_profiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! webxr-input-profiles/packages/motion-controllers/src/profiles */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/profiles.js");
/* harmony import */ var _foundation_importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/importer/Gltf2Importer */ "./src/foundation/importer/Gltf2Importer.ts");
/* harmony import */ var _foundation_importer_ModelConverter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/importer/ModelConverter */ "./src/foundation/importer/ModelConverter.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _foundation_math_Quaternion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/math/Quaternion */ "./src/foundation/math/Quaternion.ts");
/* harmony import */ var _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../foundation/math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/misc/MiscUtil */ "./src/foundation/misc/MiscUtil.ts");
/* harmony import */ var _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _foundation_math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/math/MutableMatrix33 */ "./src/foundation/math/MutableMatrix33.ts");










// const oculusProfile = require('webxr-input-profiles/packages/registry/profiles/oculus/oculus-touch.json');
const motionControllers = new Map();
const GeneralType = Object.freeze({
    TRIGGER: 'trigger',
    SQUEEZE: 'squeeze',
    TOUCHPAD: 'touchpad',
    THUMBSTICK: 'thumbstick',
    BUTTON_1: 'button_1',
    BUTTON_2: 'button_2',
    BUTTON_3: 'button_3',
    BUTTON_SPECIAL: 'button_special',
});
const wellKnownMapping = new Map();
wellKnownMapping.set('a_button', GeneralType.BUTTON_1);
wellKnownMapping.set('b_button', GeneralType.BUTTON_2);
wellKnownMapping.set('x_button', GeneralType.BUTTON_1);
wellKnownMapping.set('y_button', GeneralType.BUTTON_2);
wellKnownMapping.set('thumbrest', GeneralType.BUTTON_3);
wellKnownMapping.set('menu', GeneralType.BUTTON_SPECIAL);
wellKnownMapping.set('xr_standard_trigger', GeneralType.TRIGGER);
wellKnownMapping.set('xr_standard_squeeze', GeneralType.SQUEEZE);
wellKnownMapping.set('xr_standard_thumbstick', GeneralType.THUMBSTICK);
wellKnownMapping.set('xr_standard_touchpad', GeneralType.TOUCHPAD);
wellKnownMapping.set('trigger', GeneralType.TRIGGER);
wellKnownMapping.set('squeeze', GeneralType.SQUEEZE);
wellKnownMapping.set('thumbstick', GeneralType.THUMBSTICK);
wellKnownMapping.set('touchpad', GeneralType.TOUCHPAD);
async function createMotionController(xrInputSource, basePath, profilePriorities) {
    const { profile, assetPath } = await (0, webxr_input_profiles_packages_motion_controllers_src_profiles__WEBPACK_IMPORTED_MODULE_1__.fetchProfile)(xrInputSource, basePath);
    const motionController = new webxr_input_profiles_packages_motion_controllers_src_motionController__WEBPACK_IMPORTED_MODULE_0__.MotionController(xrInputSource, profile, assetPath);
    motionControllers.set(xrInputSource, motionController);
    const asset = await addMotionControllerToScene(motionController);
    if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.exist(asset)) {
        const rootGroup = _foundation_importer_ModelConverter__WEBPACK_IMPORTED_MODULE_3__.ModelConverter.convertToRhodoniteObject(asset);
        return rootGroup;
    }
    else {
        return undefined;
    }
}
async function addMotionControllerToScene(motionController) {
    const asset = await _foundation_importer_Gltf2Importer__WEBPACK_IMPORTED_MODULE_2__.Gltf2Importer["import"](motionController.assetUrl);
    addTouchPointDots(motionController, asset);
    // MyEngine.scene.add(asset);
    return asset;
}
function updateGamePad(timestamp, xrFrame, viewerData) {
    // Other frame-loop stuff ...
    Array.from(motionControllers.values()).forEach((motionController) => {
        motionController.updateFromGamepad();
        Object.keys(motionController.components).forEach((componentId) => {
            const component = motionController.components[componentId];
            processInput(component, motionController.xrInputSource.handedness, viewerData, timestamp);
        });
    });
    // Other frame-loop stuff ...
}
let lastTimestamp = 0;
function processInput(component, handed, viewerData, timestamp) {
    const componentName = wellKnownMapping.get(component.rootNodeName);
    if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.not.exist(componentName)) {
        return;
    }
    if (lastTimestamp === 0) {
        lastTimestamp = timestamp;
        return;
    }
    const deltaSec = (timestamp - lastTimestamp) * 0.000001;
    switch (componentName) {
        case GeneralType.TRIGGER:
            processTriggerInput(component, handed, viewerData, deltaSec);
            break;
        case GeneralType.THUMBSTICK:
            processThumbstickInput(component, handed, viewerData, deltaSec);
            break;
        case GeneralType.SQUEEZE:
            processSqueezeInput(component, handed);
            break;
        case GeneralType.BUTTON_1:
        case GeneralType.BUTTON_2:
        case GeneralType.BUTTON_3:
        case GeneralType.BUTTON_SPECIAL:
            processButtonInput(component, handed);
            break;
        case GeneralType.TOUCHPAD:
            processTouchpadInput(component);
            break;
    }
}
const scaleVec3 = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.one();
function processTriggerInput(triggerComponent, handed, viewerData, deltaSec) {
    let value = 0;
    const scale = 0.1;
    const componentName = wellKnownMapping.get(triggerComponent.rootNodeName);
    if (triggerComponent.values.state === "pressed" /* Constants.ComponentState.PRESSED */) {
        console.log(componentName, triggerComponent.values.button, handed);
        value =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: triggerComponent.values.button,
                defaultValue: 0,
            }) * deltaSec;
        // Fire ray gun
    }
    else if (triggerComponent.values.state === "touched" /* Constants.ComponentState.TOUCHED */) {
        console.log(componentName, triggerComponent.values.button, handed);
        value =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: triggerComponent.values.button,
                defaultValue: 0,
            }) * deltaSec;
        // Show ray gun charging up
    }
    if (handed === 'right') {
        value *= -1;
    }
    scaleVec3.x -= value * scale;
    scaleVec3.y -= value * scale;
    scaleVec3.z -= value * scale;
    scaleVec3.x = Math.max(scaleVec3.x, 0.05);
    scaleVec3.y = Math.max(scaleVec3.y, 0.05);
    scaleVec3.z = Math.max(scaleVec3.z, 0.05);
    scaleVec3.x = Math.min(scaleVec3.x, 3.0);
    scaleVec3.y = Math.min(scaleVec3.y, 3.0);
    scaleVec3.z = Math.min(scaleVec3.z, 3.0);
    viewerData.viewerScale.copyComponents(scaleVec3);
}
function processSqueezeInput(squeezeComponent, handed, viewerData, deltaSec) {
    const componentName = wellKnownMapping.get(squeezeComponent.rootNodeName);
    if (squeezeComponent.values.state === "pressed" /* Constants.ComponentState.PRESSED */) {
        console.log(componentName, squeezeComponent.values.button, handed);
        // Fire ray gun
    }
    else if (squeezeComponent.values.state === "touched" /* Constants.ComponentState.TOUCHED */) {
        console.log(componentName, squeezeComponent.values.button, handed);
        // Show ray gun charging up
    }
}
function processThumbstickInput(thumbstickComponent, handed, viewerData, deltaSec) {
    const componentName = wellKnownMapping.get(thumbstickComponent.rootNodeName);
    let xAxis = 0;
    let yAxis = 0;
    const deltaScaleHorizontal = 0.25;
    const deltaScaleVertical = 0.1;
    const deltaScaleAzimuthAngle = 0.15;
    if (thumbstickComponent.values.state === "pressed" /* Constants.ComponentState.PRESSED */) {
        console.log(componentName, thumbstickComponent.values.button, thumbstickComponent.values.state, handed);
        xAxis =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: thumbstickComponent.values.xAxis,
                defaultValue: 0,
            }) * deltaSec;
        yAxis =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: thumbstickComponent.values.yAxis,
                defaultValue: 0,
            }) * deltaSec;
        // Align the world orientation to the user's current orientation
    }
    else if (thumbstickComponent.values.state === "touched" /* Constants.ComponentState.TOUCHED */) {
        xAxis =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: thumbstickComponent.values.xAxis,
                defaultValue: 0,
            }) * deltaSec;
        yAxis =
            (0, _foundation_misc_MiscUtil__WEBPACK_IMPORTED_MODULE_7__.valueWithDefault)({
                value: thumbstickComponent.values.yAxis,
                defaultValue: 0,
            }) * deltaSec;
    }
    xAxis = Math.min(xAxis, 1);
    yAxis = Math.min(yAxis, 1);
    const deltaVector = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.zero();
    if (handed === 'right') {
        viewerData.viewerAzimuthAngle.x -= xAxis * deltaScaleAzimuthAngle;
        deltaVector.y -= yAxis * deltaScaleVertical * viewerData.viewerScale.x;
    }
    else {
        deltaVector.x += xAxis * deltaScaleHorizontal * viewerData.viewerScale.x;
        deltaVector.z += yAxis * deltaScaleHorizontal * viewerData.viewerScale.x;
    }
    const orientationMat = _foundation_math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix33.fromCopyQuaternion(viewerData.viewerOrientation);
    const rotateMat = orientationMat.multiply(_foundation_math_MutableMatrix33__WEBPACK_IMPORTED_MODULE_9__.MutableMatrix33.rotateY(viewerData.viewerAzimuthAngle.x));
    rotateMat.multiplyVectorTo(deltaVector, deltaVector);
    viewerData.viewerTranslate.add(deltaVector);
}
function processButtonInput(buttonComponent, handed, viewerData, deltaSec) {
    const componentName = wellKnownMapping.get(buttonComponent.rootNodeName);
    if (buttonComponent.values.state === "pressed" /* Constants.ComponentState.PRESSED */) {
        console.log(componentName, buttonComponent.values.button, buttonComponent.values.state, handed);
    }
    else if (buttonComponent.values.state === "touched" /* Constants.ComponentState.TOUCHED */) {
        console.log(componentName, buttonComponent.values.button, buttonComponent.values.state, handed);
    }
}
function processTouchpadInput(thumbstick, handed, viewerData, deltaSec) {
    if (thumbstick.values.state === "pressed" /* Constants.ComponentState.PRESSED */) ;
    else if (thumbstick.values.state === "touched" /* Constants.ComponentState.TOUCHED */ &&
        thumbstick.values.yAxis !== 0) {
        thumbstick.values.yAxis; //* scootIncrement;
        // Scoot the user forward
    }
}
function addTouchPointDots(motionController, asset) {
    Object.values(motionController.components).forEach(component => {
        if (component.touchPointNodeName) {
            asset.getChildByName(component.touchPointNodeName, true);
            // const sphereGeometry = new THREE.SphereGeometry(0.001);
            // const material = new THREE.MeshBasicMaterial({ color: 0x0000FF });
            // const touchPointDot = new THREE.Mesh(sphereGeometry, material);
            // touchPointRoot.add(touchPointDot);
        }
    });
}
function updateMotionControllerModel(entity, motionController) {
    // this codes are from https://immersive-web.github.io/webxr-input-profiles/packages/motion-controllers/#animating-components
    // Update the 3D model to reflect the button, thumbstick, and touchpad state
    const map = entity.getTagValue('rnEntitiesByNames');
    Object.values(motionController.components).forEach((component) => {
        for (const visualResponseName in component.visualResponses) {
            const visualResponse = component.visualResponses[visualResponseName];
            // Find the topmost node in the visualization
            const entity = map.get(visualResponse.valueNodeName);
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.not.exist(entity)) {
                console.warn("The entity of the controller doesn't exist");
                continue;
            }
            // Calculate the new properties based on the weight supplied
            if (visualResponse.valueNodeProperty === 'visibility') {
                entity.getSceneGraph().isVisible = !!visualResponse.value;
            }
            else if (visualResponse.valueNodeProperty === 'transform') {
                const minNode = map.get(visualResponse.minNodeName);
                const maxNode = map.get(visualResponse.maxNodeName);
                if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.not.exist(minNode) || _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_4__.Is.not.exist(maxNode)) {
                    console.warn("The min/max Node of the component of the controller doesn't exist");
                    continue;
                }
                const minNodeTransform = minNode.getTransform();
                const maxNodeTransform = maxNode.getTransform();
                entity.getTransform().quaternion = _foundation_math_Quaternion__WEBPACK_IMPORTED_MODULE_5__.Quaternion.qlerp(minNodeTransform.quaternionInner, maxNodeTransform.quaternionInner, visualResponse.value);
                entity.getTransform().translate = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_6__.Vector3.lerp(maxNodeTransform.translateInner, minNodeTransform.translateInner, visualResponse.value);
            }
        }
    });
}
function getMotionController(xrInputSource) {
    return motionControllers.get(xrInputSource);
}


/***/ }),

/***/ "./src/xr/WebXRSystem.ts":
/*!*******************************!*\
  !*** ./src/xr/WebXRSystem.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebXRSystem": () => (/* binding */ WebXRSystem)
/* harmony export */ });
/* harmony import */ var _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../foundation/renderer/CGAPIResourceRepository */ "./src/foundation/renderer/CGAPIResourceRepository.ts");
/* harmony import */ var _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../foundation/math/Vector3 */ "./src/foundation/math/Vector3.ts");
/* harmony import */ var _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../foundation/math/MutableMatrix44 */ "./src/foundation/math/MutableMatrix44.ts");
/* harmony import */ var _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../foundation/math/Vector4 */ "./src/foundation/math/Vector4.ts");
/* harmony import */ var _foundation_system_System__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../foundation/system/System */ "./src/foundation/system/System.ts");
/* harmony import */ var _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../foundation/system/ModuleManager */ "./src/foundation/system/ModuleManager.ts");
/* harmony import */ var _WebXRInput__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebXRInput */ "./src/xr/WebXRInput.ts");
/* harmony import */ var _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../foundation/misc/Is */ "./src/foundation/misc/Is.ts");
/* harmony import */ var _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../foundation/math/MutableVector3 */ "./src/foundation/math/MutableVector3.ts");
/* harmony import */ var _foundation_math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../foundation/math/MutableQuaternion */ "./src/foundation/math/MutableQuaternion.ts");
/* harmony import */ var _foundation_math_MutableScalar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../foundation/math/MutableScalar */ "./src/foundation/math/MutableScalar.ts");
/* harmony import */ var _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../foundation/helpers/EntityHelper */ "./src/foundation/helpers/EntityHelper.ts");












const defaultUserPositionInVR = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([0.0, 1.1, 0]);
class WebXRSystem {
    constructor() {
        this.__isWebXRMode = false;
        this.__spaceType = 'local';
        this.__requestedToEnterWebXR = false;
        this.__isReadyForWebXR = false;
        this.__defaultPositionInLocalSpaceMode = defaultUserPositionInVR;
        this.__canvasWidthForVR = 0;
        this.__canvasHeightForVR = 0;
        this.__controllerEntities = [];
        this.__xrInputSources = [];
        this.__viewerTranslate = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.zero();
        this.__viewerAzimuthAngle = _foundation_math_MutableScalar__WEBPACK_IMPORTED_MODULE_10__.MutableScalar.zero();
        this.__viewerOrientation = _foundation_math_MutableQuaternion__WEBPACK_IMPORTED_MODULE_9__.MutableQuaternion.identity();
        this.__viewerScale = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.one();
        this.__viewerEntity = _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createGroupEntity();
        this.__viewerEntity.tryToSetUniqueName('WebXR Viewer', true);
        this.__viewerEntity.tryToSetTag({
            tag: 'type',
            value: 'background-assets',
        });
        this.__leftCameraEntity = _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createCameraEntity();
        this.__leftCameraEntity.tryToSetUniqueName('WebXR Left Camera', true);
        this.__leftCameraEntity.tryToSetTag({
            tag: 'type',
            value: 'background-assets',
        });
        this.__rightCameraEntity = _foundation_helpers_EntityHelper__WEBPACK_IMPORTED_MODULE_11__.EntityHelper.createCameraEntity();
        this.__rightCameraEntity.tryToSetUniqueName('WebXR Right Camera', true);
        this.__rightCameraEntity.tryToSetTag({
            tag: 'type',
            value: 'background-assets',
        });
        this.__viewerEntity
            .getSceneGraph()
            .addChild(this.__leftCameraEntity.getSceneGraph());
        this.__viewerEntity
            .getSceneGraph()
            .addChild(this.__rightCameraEntity.getSceneGraph());
    }
    /// Public Methods
    /**
     * Ready for WebXR
     *
     * @param requestButtonDom
     * @returns true: prepared properly, false: failed to prepare
     */
    async readyForWebXR(requestButtonDom, basePath) {
        this.__basePath = basePath;
        await _foundation_system_ModuleManager__WEBPACK_IMPORTED_MODULE_5__.ModuleManager.getInstance().loadModule('xr');
        const glw = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.getWebGLResourceRepository()
            .currentWebGLContextWrapper;
        if (glw == null) {
            console.error('WebGL Context is not ready yet.');
            return [];
        }
        this.__glw = glw;
        const supported = await navigator.xr.isSessionSupported('immersive-vr');
        if (supported) {
            if (requestButtonDom) {
                requestButtonDom.style.display = 'block';
            }
            else {
                const paragraph = document.createElement('p');
                const anchor = document.createElement('a');
                anchor.setAttribute('id', 'enter-vr');
                const enterVr = document.createTextNode('Enter VR');
                anchor.appendChild(enterVr);
                paragraph.appendChild(anchor);
                const canvas = glw.canvas;
                canvas.parentNode.insertBefore(paragraph, canvas);
                window.addEventListener('click', this.enterWebXR.bind(this));
            }
            this.__isReadyForWebXR = true;
        }
        else {
            console.error('WebXR is not supported in this environment.');
            return [];
        }
        return [];
    }
    /**
     * Enter to WebXR (VR mode)
     * @param initialUserPosition the initial user position in world space
     * @param callbackOnXrSessionEnd the callback function for XrSession ending
     * @returns boolean value about succeeded or not
     */
    async enterWebXR({ initialUserPosition, callbackOnXrSessionStart = () => { }, callbackOnXrSessionEnd = () => { }, profilePriorities = [], }) {
        const webglResourceRepository = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.getWebGLResourceRepository();
        const glw = webglResourceRepository.currentWebGLContextWrapper;
        if (glw != null && this.__isReadyForWebXR) {
            let referenceSpace;
            const session = (await navigator.xr.requestSession('immersive-vr'));
            this.__xrSession = session;
            session.addEventListener('end', () => {
                glw.__gl.bindFramebuffer(glw.__gl.FRAMEBUFFER, null);
                this.__xrSession = undefined;
                this.__webglLayer = undefined;
                this.__xrViewerPose = undefined;
                this.__xrReferenceSpace = undefined;
                this.__spaceType = 'local';
                this.__isReadyForWebXR = false;
                this.__requestedToEnterWebXR = false;
                this.__isWebXRMode = false;
                this.__defaultPositionInLocalSpaceMode = defaultUserPositionInVR;
                console.log('XRSession ends.');
                _foundation_system_System__WEBPACK_IMPORTED_MODULE_4__.System.stopRenderLoop();
                _foundation_system_System__WEBPACK_IMPORTED_MODULE_4__.System.restartRenderLoop();
                callbackOnXrSessionEnd();
            });
            const promiseFn = (resolve) => {
                session.addEventListener('inputsourceschange', (e) => {
                    this.__onInputSourcesChange(e, resolve, profilePriorities);
                });
            };
            const promise = new Promise(promiseFn);
            // try {
            //   referenceSpace = await session.requestReferenceSpace('local-floor');
            //   this.__spaceType = 'local-floor';
            //   this.__defaultPositionInLocalSpaceMode =
            //     initialUserPosition ?? Vector3.zero();
            // } catch (err) {
            // console.error(`Failed to start XRSession: ${err}`);
            referenceSpace = await session.requestReferenceSpace('local');
            this.__spaceType = 'local';
            this.__defaultPositionInLocalSpaceMode =
                initialUserPosition !== null && initialUserPosition !== void 0 ? initialUserPosition : defaultUserPositionInVR;
            this.__xrReferenceSpace = referenceSpace;
            _foundation_system_System__WEBPACK_IMPORTED_MODULE_4__.System.stopRenderLoop();
            await this.__setupWebGLLayer(session, callbackOnXrSessionStart);
            this.__requestedToEnterWebXR = true;
            _foundation_system_System__WEBPACK_IMPORTED_MODULE_4__.System.restartRenderLoop();
            console.warn('End of enterWebXR.');
            return promise;
        }
        else {
            console.error('WebGL context or WebXRSession is not ready yet.');
            return undefined;
        }
    }
    /**
     * Disable WebXR (Close the XrSession)
     */
    async exitWebXR() {
        if (this.__xrSession != null) {
            // End the XR session now.
            await this.__xrSession.end();
        }
    }
    /// Getter Methods
    getCanvasWidthForVr() {
        return this.__canvasWidthForVR;
    }
    getCanvasHeightForVr() {
        return this.__canvasHeightForVR;
    }
    getControllerEntities() {
        return this.__controllerEntities;
    }
    /// Accessors
    get leftViewMatrix() {
        return this.__leftCameraEntity.getCamera().viewMatrix;
    }
    get rightViewMatrix() {
        return this.__rightCameraEntity.getCamera().viewMatrix;
    }
    get leftProjectionMatrix() {
        var _a;
        const xrViewLeft = (_a = this.__xrViewerPose) === null || _a === void 0 ? void 0 : _a.views[0];
        return _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyFloat32ArrayColumnMajor(_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(xrViewLeft)
            ? xrViewLeft.projectionMatrix
            : _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.identity()._v);
    }
    get rightProjectionMatrix() {
        var _a;
        const xrViewRight = (_a = this.__xrViewerPose) === null || _a === void 0 ? void 0 : _a.views[1];
        return _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyFloat32ArrayColumnMajor(_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(xrViewRight)
            ? xrViewRight.projectionMatrix
            : _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.identity()._v);
    }
    get framebuffer() {
        var _a, _b;
        return (_b = (_a = this.__xrSession) === null || _a === void 0 ? void 0 : _a.renderState.baseLayer) === null || _b === void 0 ? void 0 : _b.framebuffer;
    }
    get requestedToEnterWebXR() {
        return this.__requestedToEnterWebXR;
    }
    get xrSession() {
        return this.__xrSession;
    }
    get requestedToEnterWebVR() {
        return this.__requestedToEnterWebXR;
    }
    get isWebXRMode() {
        return this.__isWebXRMode;
    }
    get isReadyForWebXR() {
        return this.__isReadyForWebXR;
    }
    /// Public Static Methods
    static getInstance() {
        if (!this.__instance) {
            this.__instance = new WebXRSystem();
        }
        return this.__instance;
    }
    /// Friend methods
    /**
     * Getter of the view matrix of right eye
     * @param index (0: left, 1: right)
     * @private
     * @returns The view matrix vector of right eye
     */
    _getViewMatrixAt(index) {
        if (index === 0) {
            return this.leftViewMatrix;
        }
        else {
            return this.rightViewMatrix;
        }
    }
    /**
     * Getter of the project matrix of right eye
     * @param index (0: left, 1: right)
     * @private
     * @returns The project matrix of right eye
     */
    _getProjectMatrixAt(index) {
        if (index === 0) {
            return this.leftProjectionMatrix;
        }
        else {
            return this.rightProjectionMatrix;
        }
    }
    /**
     * Getter of the viewport vector
     * @param index (0: left, 1: right)
     * @private
     * @returns the viewport vector
     */
    _getViewportAt(index) {
        if (index === 0) {
            return this._getLeftViewport();
        }
        else {
            return this._getRightViewport();
        }
    }
    /**
     * Getter of the viewport vector of left eye
     * @private
     * @returns The viewport vector of left eye
     */
    _getLeftViewport() {
        return _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_3__.Vector4.fromCopyArray([
            0,
            0,
            this.__canvasWidthForVR / 2,
            this.__canvasHeightForVR,
        ]);
    }
    /**
     * Getter of the viewport vector of right eye
     * @private
     * @returns The viewport vector of right eye
     */
    _getRightViewport() {
        return _foundation_math_Vector4__WEBPACK_IMPORTED_MODULE_3__.Vector4.fromCopyArray([
            this.__canvasWidthForVR / 2,
            0,
            this.__canvasWidthForVR / 2,
            this.__canvasHeightForVR,
        ]);
    }
    _setValuesToGlobalDataRepository() {
        this.__leftCameraEntity.getCamera().projectionMatrix =
            this.leftProjectionMatrix;
        this.__rightCameraEntity.getCamera().projectionMatrix =
            this.rightProjectionMatrix;
        this.__leftCameraEntity.getCamera().setValuesToGlobalDataRepository();
        this.__rightCameraEntity.getCamera().setValuesToGlobalDataRepository();
    }
    /**
     * Getter of the position of the VR camera in world space
     * @private
     * @param displayIdx (0: left, 1: right)
     * @returns The position of the VR camera in world space
     */
    _getCameraWorldPositionAt(displayIdx) {
        var _a;
        const xrView = (_a = this.__xrViewerPose) === null || _a === void 0 ? void 0 : _a.views[displayIdx];
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(xrView)) {
            const pos = xrView.transform.position;
            const def = this.__defaultPositionInLocalSpaceMode;
            const translate = this.__viewerTranslate;
            const viewerHeadPos = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.add(_foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([pos.x, pos.y, pos.z]), def);
            return _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([
                (viewerHeadPos.x + translate.x) * this.__viewerScale.x,
                (viewerHeadPos.y + translate.y) * this.__viewerScale.y,
                (viewerHeadPos.z + translate.z) * this.__viewerScale.z,
            ]);
        }
        else {
            return this.__defaultPositionInLocalSpaceMode;
        }
    }
    /**
     * Getter of the CameraComponent SID of left/right eye
     * @private
     * @param index (0: left, 1: right)
     * @returns the SID of the CameraComponent of left/right eye
     */
    _getCameraComponentSIDAt(index) {
        if (index === 0) {
            return this.__leftCameraEntity.getCamera().componentSID;
        }
        else {
            return this.__rightCameraEntity.getCamera().componentSID;
        }
    }
    /**
     * Pre process for rendering
     * @private
     * @param xrFrame XRFrame object
     */
    _preRender(time, xrFrame) {
        if (this.isWebXRMode && this.__requestedToEnterWebXR && xrFrame != null) {
            this.__updateView(xrFrame);
            this.__updateInputSources(xrFrame);
            (0, _WebXRInput__WEBPACK_IMPORTED_MODULE_6__.updateGamePad)(time, xrFrame, {
                viewerTranslate: this.__viewerTranslate,
                viewerScale: this.__viewerScale,
                viewerOrientation: this.__viewerOrientation,
                viewerAzimuthAngle: this.__viewerAzimuthAngle,
            });
        }
    }
    /**
     * Post process for rendering
     * @private
     */
    _postRender() {
        var _a;
        if (this.__isWebXRMode) {
            (_a = this.__glw) === null || _a === void 0 ? void 0 : _a.getRawContext();
            // gl?.bindFramebuffer(gl.FRAMEBUFFER, null);
        }
        if (this.requestedToEnterWebVR) ;
    }
    /// Private Methods
    async __onInputSourcesChange(event, resolve, profilePriorities) {
        this.__xrInputSources.length = 0;
        for (const xrInputSource of event.added) {
            this.__xrInputSources.push(xrInputSource);
            const controller = await (0, _WebXRInput__WEBPACK_IMPORTED_MODULE_6__.createMotionController)(xrInputSource, this.__basePath, profilePriorities);
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(controller)) {
                this.__controllerEntities.push(controller);
                this.__viewerEntity
                    .getSceneGraph()
                    .addChild(controller.getSceneGraph());
            }
        }
        resolve(this.__controllerEntities);
    }
    __setCameraInfoFromXRViews(xrViewerPose) {
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.not.exist(xrViewerPose)) {
            console.warn('xrViewerPose not exist');
            return;
        }
        const xrViewLeft = xrViewerPose.views[0];
        const xrViewRight = xrViewerPose.views[1];
        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.not.exist(xrViewLeft) || _foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.not.exist(xrViewRight)) {
            return;
        }
        const orientation = xrViewerPose.transform.orientation;
        this.__viewerOrientation.x = orientation.x;
        this.__viewerOrientation.y = orientation.y;
        this.__viewerOrientation.z = orientation.z;
        this.__viewerOrientation.w = orientation.w;
        const lm = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyFloat32ArrayColumnMajor(xrViewLeft === null || xrViewLeft === void 0 ? void 0 : xrViewLeft.transform.matrix);
        const rm = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyFloat32ArrayColumnMajor(xrViewRight === null || xrViewRight === void 0 ? void 0 : xrViewRight.transform.matrix);
        const rotateMatLeft = lm;
        const rotateMatRight = rm;
        const scale = this.__viewerScale.x;
        const pos = xrViewLeft.transform.position;
        const translateLeftScaled = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.add(this.__defaultPositionInLocalSpaceMode, this.__viewerTranslate);
        const translateRightScaled = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.add(this.__defaultPositionInLocalSpaceMode, this.__viewerTranslate);
        const xrViewerPosLeft = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([pos.x, pos.y, pos.z]);
        const xrViewerPosRight = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([pos.x, pos.y, pos.z]);
        const translateLeft = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.add(this.__defaultPositionInLocalSpaceMode, this.__viewerTranslate).add(xrViewerPosLeft);
        const translateRight = _foundation_math_MutableVector3__WEBPACK_IMPORTED_MODULE_8__.MutableVector3.add(this.__defaultPositionInLocalSpaceMode, this.__viewerTranslate).add(xrViewerPosRight);
        const viewerTranslateScaledX = (translateLeftScaled.x + translateRightScaled.x) / 2;
        const viewerTranslateScaledZ = (translateLeftScaled.z + translateRightScaled.z) / 2;
        const viewerTranslateX = (translateLeft.x + translateRight.x) / 2;
        const viewerTranslateZ = (translateLeft.z + translateRight.z) / 2;
        const viewerTransform = this.__viewerEntity.getTransform();
        viewerTransform.translate = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([
            viewerTranslateScaledX,
            0,
            viewerTranslateScaledZ,
        ]);
        viewerTransform.scale = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([scale, scale, scale]);
        viewerTransform.rotate = _foundation_math_Vector3__WEBPACK_IMPORTED_MODULE_1__.Vector3.fromCopyArray([
            0,
            this.__viewerAzimuthAngle.x,
            0,
        ]);
        rotateMatLeft.translateY = translateLeft.y;
        rotateMatLeft.translateX = translateLeft.x - viewerTranslateX;
        rotateMatLeft.translateZ = translateLeft.z - viewerTranslateZ;
        rotateMatLeft.translateY += xrViewerPosLeft.y;
        rotateMatLeft.translateX += xrViewerPosLeft.x;
        rotateMatLeft.translateZ += xrViewerPosLeft.z;
        rotateMatRight.translateY = translateRight.y;
        rotateMatRight.translateX = translateRight.x - viewerTranslateX;
        rotateMatRight.translateZ = translateRight.z - viewerTranslateZ;
        rotateMatRight.translateY += xrViewerPosRight.y;
        rotateMatRight.translateX += xrViewerPosRight.x;
        rotateMatRight.translateZ += xrViewerPosRight.z;
        this.__leftCameraEntity.getTransform().matrix = rotateMatLeft;
        this.__rightCameraEntity.getTransform().matrix = rotateMatRight;
    }
    async __setupWebGLLayer(xrSession, callbackOnXrSessionStart) {
        var _a;
        const gl = (_a = this.__glw) === null || _a === void 0 ? void 0 : _a.getRawContext();
        if (gl != null) {
            // Make sure the canvas context we want to use is compatible with the current xr device.
            await gl.makeXRCompatible();
            // The content that will be shown on the device is defined by the session's
            // baseLayer.
            this.__webglLayer = new window.XRWebGLLayer(xrSession, gl);
            const webglLayer = this.__webglLayer;
            xrSession.updateRenderState({
                baseLayer: webglLayer,
                depthNear: 0.1,
                depthFar: 10000,
            });
            const webglResourceRepository = _foundation_renderer_CGAPIResourceRepository__WEBPACK_IMPORTED_MODULE_0__.CGAPIResourceRepository.getWebGLResourceRepository();
            this.__canvasWidthForVR = webglLayer.framebufferWidth;
            this.__canvasHeightForVR = webglLayer.framebufferHeight;
            console.log(this.__canvasWidthForVR);
            console.log(this.__canvasHeightForVR);
            webglResourceRepository.resizeCanvas(this.__canvasWidthForVR, this.__canvasHeightForVR);
            this.__isWebXRMode = true;
            callbackOnXrSessionStart();
        }
        else {
            console.error('WebGL context is not ready for WebXR.');
        }
    }
    __updateView(xrFrame) {
        this.__xrViewerPose = xrFrame.getViewerPose(this.__xrReferenceSpace);
        this.__setCameraInfoFromXRViews(this.__xrViewerPose);
    }
    __updateInputSources(xrFrame) {
        this.__xrInputSources.forEach((input, i) => {
            if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(input.gripSpace)) {
                const xrPose = xrFrame.getPose(input.gripSpace, this.__xrReferenceSpace);
                if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(xrPose)) {
                    const hand = this.__controllerEntities[i];
                    if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(hand)) {
                        // update the transform of the controller itself
                        const handWorldMatrix = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyFloat32ArrayColumnMajor(xrPose.transform.matrix);
                        const rotateMat = _foundation_math_MutableMatrix44__WEBPACK_IMPORTED_MODULE_2__.MutableMatrix44.fromCopyMatrix44(handWorldMatrix);
                        rotateMat.translateY += this.__defaultPositionInLocalSpaceMode.y;
                        rotateMat.translateY += this.__viewerTranslate.y;
                        hand.getTransform().matrix = rotateMat;
                        // update the components (buttons, etc...) of the controller
                        const motionController = (0, _WebXRInput__WEBPACK_IMPORTED_MODULE_6__.getMotionController)(input);
                        if (_foundation_misc_Is__WEBPACK_IMPORTED_MODULE_7__.Is.exist(motionController)) {
                            (0, _WebXRInput__WEBPACK_IMPORTED_MODULE_6__.updateMotionControllerModel)(hand, motionController);
                        }
                        else {
                            console.warn('motionController not found');
                        }
                    }
                }
            }
        });
    }
}


/***/ }),

/***/ "./src/xr/index.ts":
/*!*************************!*\
  !*** ./src/xr/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebXRSystem": () => (/* reexport safe */ _WebXRSystem__WEBPACK_IMPORTED_MODULE_1__.WebXRSystem),
/* harmony export */   "createMotionController": () => (/* reexport safe */ _WebXRInput__WEBPACK_IMPORTED_MODULE_0__.createMotionController),
/* harmony export */   "getMotionController": () => (/* reexport safe */ _WebXRInput__WEBPACK_IMPORTED_MODULE_0__.getMotionController),
/* harmony export */   "updateGamePad": () => (/* reexport safe */ _WebXRInput__WEBPACK_IMPORTED_MODULE_0__.updateGamePad),
/* harmony export */   "updateMotionControllerModel": () => (/* reexport safe */ _WebXRInput__WEBPACK_IMPORTED_MODULE_0__.updateMotionControllerModel)
/* harmony export */ });
/* harmony import */ var _WebXRInput__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebXRInput */ "./src/xr/WebXRInput.ts");
/* harmony import */ var _WebXRSystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebXRSystem */ "./src/xr/WebXRSystem.ts");
/* harmony import */ __webpack_require__(/*! ./main */ "./src/xr/main.ts");





/***/ }),

/***/ "./src/xr/main.ts":
/*!************************!*\
  !*** ./src/xr/main.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _WebXRSystem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WebXRSystem */ "./src/xr/WebXRSystem.ts");

const XR = Object.freeze({
    WebXRSystem: _WebXRSystem__WEBPACK_IMPORTED_MODULE_0__.WebXRSystem,
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (XR);
(0, eval)('this').RnXR = XR;


/***/ }),

/***/ "./VERSION-FILE":
/*!**********************!*\
  !*** ./VERSION-FILE ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"version":"v0.8.5-0-g3ced14e8-dirty","branch":"master"});

/***/ }),

/***/ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/components.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/webxr-input-profiles/packages/motion-controllers/src/components.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* binding */ Component)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/constants.js");
/* harmony import */ var _visualResponse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./visualResponse */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/visualResponse.js");



class Component {
  /**
   * @param {Object} componentId - Id of the component
   * @param {Object} componentDescription - Description of the component to be created
   */
  constructor(componentId, componentDescription) {
    if (!componentId
     || !componentDescription
     || !componentDescription.visualResponses
     || !componentDescription.gamepadIndices
     || Object.keys(componentDescription.gamepadIndices).length === 0) {
      throw new Error('Invalid arguments supplied');
    }

    this.id = componentId;
    this.type = componentDescription.type;
    this.rootNodeName = componentDescription.rootNodeName;
    this.touchPointNodeName = componentDescription.touchPointNodeName;

    // Build all the visual responses for this component
    this.visualResponses = {};
    Object.keys(componentDescription.visualResponses).forEach((responseName) => {
      const visualResponse = new _visualResponse__WEBPACK_IMPORTED_MODULE_1__.VisualResponse(componentDescription.visualResponses[responseName]);
      this.visualResponses[responseName] = visualResponse;
    });

    // Set default values
    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);

    this.values = {
      state: _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.DEFAULT,
      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,
      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,
      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined
    };
  }

  get data() {
    const data = { id: this.id, ...this.values };
    return data;
  }

  /**
   * @description Poll for updated data based on current gamepad state
   * @param {Object} gamepad - The gamepad object from which the component data should be polled
   */
  updateFromGamepad(gamepad) {
    // Set the state to default before processing other data sources
    this.values.state = _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.DEFAULT;

    // Get and normalize button
    if (this.gamepadIndices.button !== undefined
        && gamepad.buttons.length > this.gamepadIndices.button) {
      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];
      this.values.button = gamepadButton.value;
      this.values.button = (this.values.button < 0) ? 0 : this.values.button;
      this.values.button = (this.values.button > 1) ? 1 : this.values.button;

      // Set the state based on the button
      if (gamepadButton.pressed || this.values.button === 1) {
        this.values.state = _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.PRESSED;
      } else if (gamepadButton.touched || this.values.button > _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ButtonTouchThreshold) {
        this.values.state = _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.TOUCHED;
      }
    }

    // Get and normalize x axis value
    if (this.gamepadIndices.xAxis !== undefined
        && gamepad.axes.length > this.gamepadIndices.xAxis) {
      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];
      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;
      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;

      // If the state is still default, check if the xAxis makes it touched
      if (this.values.state === _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.DEFAULT
        && Math.abs(this.values.xAxis) > _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.AxisTouchThreshold) {
        this.values.state = _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.TOUCHED;
      }
    }

    // Get and normalize Y axis value
    if (this.gamepadIndices.yAxis !== undefined
        && gamepad.axes.length > this.gamepadIndices.yAxis) {
      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];
      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;
      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;

      // If the state is still default, check if the yAxis makes it touched
      if (this.values.state === _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.DEFAULT
        && Math.abs(this.values.yAxis) > _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.AxisTouchThreshold) {
        this.values.state = _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.TOUCHED;
      }
    }

    // Update the visual response weights based on the current component data
    Object.values(this.visualResponses).forEach((visualResponse) => {
      visualResponse.updateFromComponent(this.values);
    });
  }
}




/***/ }),

/***/ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/constants.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/webxr-input-profiles/packages/motion-controllers/src/constants.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Constants": () => (/* binding */ Constants)
/* harmony export */ });
const Constants = {
  Handedness: Object.freeze({
    NONE: 'none',
    LEFT: 'left',
    RIGHT: 'right'
  }),

  ComponentState: Object.freeze({
    DEFAULT: 'default',
    TOUCHED: 'touched',
    PRESSED: 'pressed'
  }),

  ComponentProperty: Object.freeze({
    BUTTON: 'button',
    X_AXIS: 'xAxis',
    Y_AXIS: 'yAxis',
    STATE: 'state'
  }),

  ComponentType: Object.freeze({
    TRIGGER: 'trigger',
    SQUEEZE: 'squeeze',
    TOUCHPAD: 'touchpad',
    THUMBSTICK: 'thumbstick',
    BUTTON: 'button'
  }),

  ButtonTouchThreshold: 0.05,

  AxisTouchThreshold: 0.1,

  VisualResponseProperty: Object.freeze({
    TRANSFORM: 'transform',
    VISIBILITY: 'visibility'
  })
};




/***/ }),

/***/ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/motionController.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/webxr-input-profiles/packages/motion-controllers/src/motionController.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MotionController": () => (/* binding */ MotionController)
/* harmony export */ });
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/components.js");


/**
  * @description Builds a motion controller with components and visual responses based on the
  * supplied profile description. Data is polled from the xrInputSource's gamepad.
  * @author Nell Waliczek / https://github.com/NellWaliczek
*/
class MotionController {
  /**
   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around
   * @param {Object} profile - The best matched profile description for the supplied xrInputSource
   * @param {Object} assetUrl
   */
  constructor(xrInputSource, profile, assetUrl) {
    if (!xrInputSource) {
      throw new Error('No xrInputSource supplied');
    }

    if (!profile) {
      throw new Error('No profile supplied');
    }

    this.xrInputSource = xrInputSource;
    this.assetUrl = assetUrl;
    this.id = profile.profileId;

    // Build child components as described in the profile description
    this.layoutDescription = profile.layouts[xrInputSource.handedness];
    this.components = {};
    Object.keys(this.layoutDescription.components).forEach((componentId) => {
      const componentDescription = this.layoutDescription.components[componentId];
      this.components[componentId] = new _components__WEBPACK_IMPORTED_MODULE_0__.Component(componentId, componentDescription);
    });

    // Initialize components based on current gamepad state
    this.updateFromGamepad();
  }

  get gripSpace() {
    return this.xrInputSource.gripSpace;
  }

  get targetRaySpace() {
    return this.xrInputSource.targetRaySpace;
  }

  /**
   * @description Returns a subset of component data for simplified debugging
   */
  get data() {
    const data = [];
    Object.values(this.components).forEach((component) => {
      data.push(component.data);
    });
    return data;
  }

  /**
   * @description Poll for updated data based on current gamepad state
   */
  updateFromGamepad() {
    Object.values(this.components).forEach((component) => {
      component.updateFromGamepad(this.xrInputSource.gamepad);
    });
  }
}




/***/ }),

/***/ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/profiles.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/webxr-input-profiles/packages/motion-controllers/src/profiles.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fetchProfile": () => (/* binding */ fetchProfile),
/* harmony export */   "fetchProfilesList": () => (/* binding */ fetchProfilesList)
/* harmony export */ });
/**
 * @description Static helper function to fetch a JSON file and turn it into a JS object
 * @param {string} path - Path to JSON file to be fetched
 */
async function fetchJsonFile(path) {
  const response = await fetch(path);
  if (!response.ok) {
    throw new Error(response.statusText);
  } else {
    return response.json();
  }
}

async function fetchProfilesList(basePath) {
  if (!basePath) {
    throw new Error('No basePath supplied');
  }

  const profileListFileName = 'profilesList.json';
  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);
  return profilesList;
}

async function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {
  if (!xrInputSource) {
    throw new Error('No xrInputSource supplied');
  }

  if (!basePath) {
    throw new Error('No basePath supplied');
  }

  // Get the list of profiles
  const supportedProfilesList = await fetchProfilesList(basePath);

  // Find the relative path to the first requested profile that is recognized
  let match;
  xrInputSource.profiles.some((profileId) => {
    const supportedProfile = supportedProfilesList[profileId];
    if (supportedProfile) {
      match = {
        profileId,
        profilePath: `${basePath}/${supportedProfile.path}`,
        deprecated: !!supportedProfile.deprecated
      };
    }
    return !!match;
  });

  if (!match) {
    if (!defaultProfile) {
      throw new Error('No matching profile name found');
    }

    const supportedProfile = supportedProfilesList[defaultProfile];
    if (!supportedProfile) {
      throw new Error(`No matching profile name found and default profile "${defaultProfile}" missing.`);
    }

    match = {
      profileId: defaultProfile,
      profilePath: `${basePath}/${supportedProfile.path}`,
      deprecated: !!supportedProfile.deprecated
    };
  }

  const profile = await fetchJsonFile(match.profilePath);

  let assetPath;
  if (getAssetPath) {
    let layout;
    if (xrInputSource.handedness === 'any') {
      layout = profile.layouts[Object.keys(profile.layouts)[0]];
    } else {
      layout = profile.layouts[xrInputSource.handedness];
    }
    if (!layout) {
      throw new Error(
        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`
      );
    }

    if (layout.assetPath) {
      assetPath = match.profilePath.replace('profile.json', layout.assetPath);
    }
  }

  return { profile, assetPath };
}




/***/ }),

/***/ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/visualResponse.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/webxr-input-profiles/packages/motion-controllers/src/visualResponse.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VisualResponse": () => (/* binding */ VisualResponse)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./node_modules/webxr-input-profiles/packages/motion-controllers/src/constants.js");


/** @constant {Object} */
const defaultComponentValues = {
  xAxis: 0,
  yAxis: 0,
  button: 0,
  state: _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentState.DEFAULT
};

/**
 * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad
 * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within
 * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical
 * range of motion and touchpads do not report touch locations off their physical bounds.
 * @param {number} x The original x coordinate in the range -1 to 1
 * @param {number} y The original y coordinate in the range -1 to 1
 */
function normalizeAxes(x = 0, y = 0) {
  let xAxis = x;
  let yAxis = y;

  // Determine if the point is outside the bounds of the circle
  // and, if so, place it on the edge of the circle
  const hypotenuse = Math.sqrt((x * x) + (y * y));
  if (hypotenuse > 1) {
    const theta = Math.atan2(y, x);
    xAxis = Math.cos(theta);
    yAxis = Math.sin(theta);
  }

  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves
  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.
  const result = {
    normalizedXAxis: (xAxis * 0.5) + 0.5,
    normalizedYAxis: (yAxis * 0.5) + 0.5
  };
  return result;
}

/**
 * Contains the description of how the 3D model should visually respond to a specific user input.
 * This is accomplished by initializing the object with the name of a node in the 3D model and
 * property that need to be modified in response to user input, the name of the nodes representing
 * the allowable range of motion, and the name of the input which triggers the change. In response
 * to the named input changing, this object computes the appropriate weighting to use for
 * interpolating between the range of motion nodes.
 */
class VisualResponse {
  constructor(visualResponseDescription) {
    this.componentProperty = visualResponseDescription.componentProperty;
    this.states = visualResponseDescription.states;
    this.valueNodeName = visualResponseDescription.valueNodeName;
    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;

    if (this.valueNodeProperty === _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.VisualResponseProperty.TRANSFORM) {
      this.minNodeName = visualResponseDescription.minNodeName;
      this.maxNodeName = visualResponseDescription.maxNodeName;
    }

    // Initializes the response's current value based on default data
    this.value = 0;
    this.updateFromComponent(defaultComponentValues);
  }

  /**
   * Computes the visual response's interpolation weight based on component state
   * @param {Object} componentValues - The component from which to update
   * @param {number} xAxis - The reported X axis value of the component
   * @param {number} yAxis - The reported Y axis value of the component
   * @param {number} button - The reported value of the component's button
   * @param {string} state - The component's active state
   */
  updateFromComponent({
    xAxis, yAxis, button, state
  }) {
    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);
    switch (this.componentProperty) {
      case _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentProperty.X_AXIS:
        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;
        break;
      case _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentProperty.Y_AXIS:
        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;
        break;
      case _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentProperty.BUTTON:
        this.value = (this.states.includes(state)) ? button : 0;
        break;
      case _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.ComponentProperty.STATE:
        if (this.valueNodeProperty === _constants__WEBPACK_IMPORTED_MODULE_0__.Constants.VisualResponseProperty.VISIBILITY) {
          this.value = (this.states.includes(state));
        } else {
          this.value = this.states.includes(state) ? 1.0 : 0.0;
        }
        break;
      default:
        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);
    }
  }
}




/***/ }),

/***/ "./node_modules/zlibjs/bin/unzip.min.js":
/*!**********************************************!*\
  !*** ./node_modules/zlibjs/bin/unzip.min.js ***!
  \**********************************************/
/***/ (function() {

/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function() {function l(a){throw a;}var r=void 0,t,aa=this;function v(a,b){var c=a.split("."),d=aa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==r?d[f]=b:d=d[f]?d[f]:d[f]={};}var y="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;new (y?Uint8Array:Array)(256);var ca=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,
2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,
2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,
2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,
3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,
936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],C=y?new Uint32Array(ca):ca;if(aa.Uint8Array!==r)try{eval("String.fromCharCode.apply(null, new Uint8Array([0]));");}catch(ea){String.fromCharCode.apply=function(a){return function(b,c){return a.call(String.fromCharCode,b,Array.prototype.slice.call(c))}}(String.fromCharCode.apply);}function D(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,f,h,k,e,g,m,p,s,q,x;for(s=0;s<b;++s)a[s]>c&&(c=a[s]),a[s]<d&&(d=a[s]);f=1<<c;h=new (y?Uint32Array:Array)(f);k=1;e=0;for(g=2;k<=c;){for(s=0;s<b;++s)if(a[s]===k){m=0;p=e;for(q=0;q<k;++q)m=m<<1|p&1,p>>=1;x=k<<16|s;for(q=m;q<f;q+=g)h[q]=x;++e;}++k;e<<=1;g<<=1;}return [h,c,d]}var G;for(G=0;288>G;G++)switch(!0){case 143>=G:break;case 255>=G:break;case 279>=G:break;case 287>=G:break;default:l("invalid literal: "+G);}
(function(){function a(a){switch(!0){case 3===a:return [257,a-3,0];case 4===a:return [258,a-4,0];case 5===a:return [259,a-5,0];case 6===a:return [260,a-6,0];case 7===a:return [261,a-7,0];case 8===a:return [262,a-8,0];case 9===a:return [263,a-9,0];case 10===a:return [264,a-10,0];case 12>=a:return [265,a-11,1];case 14>=a:return [266,a-13,1];case 16>=a:return [267,a-15,1];case 18>=a:return [268,a-17,1];case 22>=a:return [269,a-19,2];case 26>=a:return [270,a-23,2];case 30>=a:return [271,a-27,2];case 34>=a:return [272,
a-31,2];case 42>=a:return [273,a-35,3];case 50>=a:return [274,a-43,3];case 58>=a:return [275,a-51,3];case 66>=a:return [276,a-59,3];case 82>=a:return [277,a-67,4];case 98>=a:return [278,a-83,4];case 114>=a:return [279,a-99,4];case 130>=a:return [280,a-115,4];case 162>=a:return [281,a-131,5];case 194>=a:return [282,a-163,5];case 226>=a:return [283,a-195,5];case 257>=a:return [284,a-227,5];case 258===a:return [285,a-258,0];default:l("invalid length: "+a);}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|d[1]<<
16|d[0];return b})();function I(a,b){this.l=[];this.m=32768;this.d=this.f=this.c=this.t=0;this.input=y?new Uint8Array(a):a;this.u=!1;this.n=J;this.K=!1;if(b||!(b={}))b.index&&(this.c=b.index),b.bufferSize&&(this.m=b.bufferSize),b.bufferType&&(this.n=b.bufferType),b.resize&&(this.K=b.resize);switch(this.n){case ga:this.a=32768;this.b=new (y?Uint8Array:Array)(32768+this.m+258);break;case J:this.a=0;this.b=new (y?Uint8Array:Array)(this.m);this.e=this.W;this.B=this.R;this.q=this.V;break;default:l(Error("invalid inflate mode"));}}
var ga=0,J=1;
I.prototype.r=function(){for(;!this.u;){var a=K(this,3);a&1&&(this.u=!0);a>>>=1;switch(a){case 0:var b=this.input,c=this.c,d=this.b,f=this.a,h=b.length,k=r,e=r,g=d.length,m=r;this.d=this.f=0;c+1>=h&&l(Error("invalid uncompressed block header: LEN"));k=b[c++]|b[c++]<<8;c+1>=h&&l(Error("invalid uncompressed block header: NLEN"));e=b[c++]|b[c++]<<8;k===~e&&l(Error("invalid uncompressed block header: length verify"));c+k>b.length&&l(Error("input buffer is broken"));switch(this.n){case ga:for(;f+k>d.length;){m=
g-f;k-=m;if(y)d.set(b.subarray(c,c+m),f),f+=m,c+=m;else for(;m--;)d[f++]=b[c++];this.a=f;d=this.e();f=this.a;}break;case J:for(;f+k>d.length;)d=this.e({H:2});break;default:l(Error("invalid inflate mode"));}if(y)d.set(b.subarray(c,c+k),f),f+=k,c+=k;else for(;k--;)d[f++]=b[c++];this.c=c;this.a=f;this.b=d;break;case 1:this.q(ha,ia);break;case 2:for(var p=K(this,5)+257,s=K(this,5)+1,q=K(this,4)+4,x=new (y?Uint8Array:Array)(L.length),u=r,n=r,E=r,A=r,X=r,O=r,H=r,w=r,da=r,w=0;w<q;++w)x[L[w]]=K(this,3);if(!y){w=
q;for(q=x.length;w<q;++w)x[L[w]]=0;}u=D(x);A=new (y?Uint8Array:Array)(p+s);w=0;for(da=p+s;w<da;)switch(X=M(this,u),X){case 16:for(H=3+K(this,2);H--;)A[w++]=O;break;case 17:for(H=3+K(this,3);H--;)A[w++]=0;O=0;break;case 18:for(H=11+K(this,7);H--;)A[w++]=0;O=0;break;default:O=A[w++]=X;}n=y?D(A.subarray(0,p)):D(A.slice(0,p));E=y?D(A.subarray(p)):D(A.slice(p));this.q(n,E);break;default:l(Error("unknown BTYPE: "+a));}}return this.B()};
var ja=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=y?new Uint16Array(ja):ja,ka=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],la=y?new Uint16Array(ka):ka,ma=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],N=y?new Uint8Array(ma):ma,na=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],oa=y?new Uint16Array(na):na,pa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,
11,11,12,12,13,13],P=y?new Uint8Array(pa):pa,Q=new (y?Uint8Array:Array)(288),R,qa;R=0;for(qa=Q.length;R<qa;++R)Q[R]=143>=R?8:255>=R?9:279>=R?7:8;var ha=D(Q),S=new (y?Uint8Array:Array)(30),T,ra;T=0;for(ra=S.length;T<ra;++T)S[T]=5;var ia=D(S);function K(a,b){for(var c=a.f,d=a.d,f=a.input,h=a.c,k=f.length,e;d<b;)h>=k&&l(Error("input buffer is broken")),c|=f[h++]<<d,d+=8;e=c&(1<<b)-1;a.f=c>>>b;a.d=d-b;a.c=h;return e}
function M(a,b){for(var c=a.f,d=a.d,f=a.input,h=a.c,k=f.length,e=b[0],g=b[1],m,p;d<g&&!(h>=k);)c|=f[h++]<<d,d+=8;m=e[c&(1<<g)-1];p=m>>>16;p>d&&l(Error("invalid code length: "+p));a.f=c>>p;a.d=d-p;a.c=h;return m&65535}t=I.prototype;
t.q=function(a,b){var c=this.b,d=this.a;this.C=a;for(var f=c.length-258,h,k,e,g;256!==(h=M(this,a));)if(256>h)d>=f&&(this.a=d,c=this.e(),d=this.a),c[d++]=h;else {k=h-257;g=la[k];0<N[k]&&(g+=K(this,N[k]));h=M(this,b);e=oa[h];0<P[h]&&(e+=K(this,P[h]));d>=f&&(this.a=d,c=this.e(),d=this.a);for(;g--;)c[d]=c[d++-e];}for(;8<=this.d;)this.d-=8,this.c--;this.a=d;};
t.V=function(a,b){var c=this.b,d=this.a;this.C=a;for(var f=c.length,h,k,e,g;256!==(h=M(this,a));)if(256>h)d>=f&&(c=this.e(),f=c.length),c[d++]=h;else {k=h-257;g=la[k];0<N[k]&&(g+=K(this,N[k]));h=M(this,b);e=oa[h];0<P[h]&&(e+=K(this,P[h]));d+g>f&&(c=this.e(),f=c.length);for(;g--;)c[d]=c[d++-e];}for(;8<=this.d;)this.d-=8,this.c--;this.a=d;};
t.e=function(){var a=new (y?Uint8Array:Array)(this.a-32768),b=this.a-32768,c,d,f=this.b;if(y)a.set(f.subarray(32768,a.length));else {c=0;for(d=a.length;c<d;++c)a[c]=f[c+32768];}this.l.push(a);this.t+=a.length;if(y)f.set(f.subarray(b,b+32768));else for(c=0;32768>c;++c)f[c]=f[b+c];this.a=32768;return f};
t.W=function(a){var b,c=this.input.length/this.c+1|0,d,f,h,k=this.input,e=this.b;a&&("number"===typeof a.H&&(c=a.H),"number"===typeof a.P&&(c+=a.P));2>c?(d=(k.length-this.c)/this.C[2],h=258*(d/2)|0,f=h<e.length?e.length+h:e.length<<1):f=e.length*c;y?(b=new Uint8Array(f),b.set(e)):b=e;return this.b=b};
t.B=function(){var a=0,b=this.b,c=this.l,d,f=new (y?Uint8Array:Array)(this.t+(this.a-32768)),h,k,e,g;if(0===c.length)return y?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);h=0;for(k=c.length;h<k;++h){d=c[h];e=0;for(g=d.length;e<g;++e)f[a++]=d[e];}h=32768;for(k=this.a;h<k;++h)f[a++]=b[h];this.l=[];return this.buffer=f};
t.R=function(){var a,b=this.a;y?this.K?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};function U(a){a=a||{};this.files=[];this.v=a.comment;}U.prototype.L=function(a){this.j=a;};U.prototype.s=function(a){var b=a[2]&65535|2;return b*(b^1)>>8&255};U.prototype.k=function(a,b){a[0]=(C[(a[0]^b)&255]^a[0]>>>8)>>>0;a[1]=(6681*(20173*(a[1]+(a[0]&255))>>>0)>>>0)+1>>>0;a[2]=(C[(a[2]^a[1]>>>24)&255]^a[2]>>>8)>>>0;};U.prototype.T=function(a){var b=[305419896,591751049,878082192],c,d;y&&(b=new Uint32Array(b));c=0;for(d=a.length;c<d;++c)this.k(b,a[c]&255);return b};function V(a,b){b=b||{};this.input=y&&a instanceof Array?new Uint8Array(a):a;this.c=0;this.ba=b.verify||!1;this.j=b.password;}var sa={O:0,M:8},W=[80,75,1,2],Y=[80,75,3,4],Z=[80,75,5,6];function ta(a,b){this.input=a;this.offset=b;}
ta.prototype.parse=function(){var a=this.input,b=this.offset;(a[b++]!==W[0]||a[b++]!==W[1]||a[b++]!==W[2]||a[b++]!==W[3])&&l(Error("invalid file header signature"));this.version=a[b++];this.ia=a[b++];this.Z=a[b++]|a[b++]<<8;this.I=a[b++]|a[b++]<<8;this.A=a[b++]|a[b++]<<8;this.time=a[b++]|a[b++]<<8;this.U=a[b++]|a[b++]<<8;this.p=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.z=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.J=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.h=a[b++]|a[b++]<<
8;this.g=a[b++]|a[b++]<<8;this.F=a[b++]|a[b++]<<8;this.ea=a[b++]|a[b++]<<8;this.ga=a[b++]|a[b++]<<8;this.fa=a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24;this.$=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.filename=String.fromCharCode.apply(null,y?a.subarray(b,b+=this.h):a.slice(b,b+=this.h));this.X=y?a.subarray(b,b+=this.g):a.slice(b,b+=this.g);this.v=y?a.subarray(b,b+this.F):a.slice(b,b+this.F);this.length=b-this.offset;};function ua(a,b){this.input=a;this.offset=b;}var va={N:1,ca:8,da:2048};
ua.prototype.parse=function(){var a=this.input,b=this.offset;(a[b++]!==Y[0]||a[b++]!==Y[1]||a[b++]!==Y[2]||a[b++]!==Y[3])&&l(Error("invalid local file header signature"));this.Z=a[b++]|a[b++]<<8;this.I=a[b++]|a[b++]<<8;this.A=a[b++]|a[b++]<<8;this.time=a[b++]|a[b++]<<8;this.U=a[b++]|a[b++]<<8;this.p=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.z=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.J=(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;this.h=a[b++]|a[b++]<<8;this.g=a[b++]|a[b++]<<8;this.filename=
String.fromCharCode.apply(null,y?a.subarray(b,b+=this.h):a.slice(b,b+=this.h));this.X=y?a.subarray(b,b+=this.g):a.slice(b,b+=this.g);this.length=b-this.offset;};
function $(a){var b=[],c={},d,f,h,k;if(!a.i){if(a.o===r){var e=a.input,g;if(!a.D)a:{var m=a.input,p;for(p=m.length-12;0<p;--p)if(m[p]===Z[0]&&m[p+1]===Z[1]&&m[p+2]===Z[2]&&m[p+3]===Z[3]){a.D=p;break a}l(Error("End of Central Directory Record not found"));}g=a.D;(e[g++]!==Z[0]||e[g++]!==Z[1]||e[g++]!==Z[2]||e[g++]!==Z[3])&&l(Error("invalid signature"));a.ha=e[g++]|e[g++]<<8;a.ja=e[g++]|e[g++]<<8;a.ka=e[g++]|e[g++]<<8;a.aa=e[g++]|e[g++]<<8;a.Q=(e[g++]|e[g++]<<8|e[g++]<<16|e[g++]<<24)>>>0;a.o=(e[g++]|
e[g++]<<8|e[g++]<<16|e[g++]<<24)>>>0;a.w=e[g++]|e[g++]<<8;a.v=y?e.subarray(g,g+a.w):e.slice(g,g+a.w);}d=a.o;h=0;for(k=a.aa;h<k;++h)f=new ta(a.input,d),f.parse(),d+=f.length,b[h]=f,c[f.filename]=h;a.Q<d-a.o&&l(Error("invalid file header size"));a.i=b;a.G=c;}}t=V.prototype;t.Y=function(){var a=[],b,c,d;this.i||$(this);d=this.i;b=0;for(c=d.length;b<c;++b)a[b]=d[b].filename;return a};
t.r=function(a,b){var c;this.G||$(this);c=this.G[a];c===r&&l(Error(a+" not found"));var d;d=b||{};var f=this.input,h=this.i,k,e,g,m,p,s,q,x;h||$(this);h[c]===r&&l(Error("wrong index"));e=h[c].$;k=new ua(this.input,e);k.parse();e+=k.length;g=k.z;if(0!==(k.I&va.N)){!d.password&&!this.j&&l(Error("please set password"));s=this.S(d.password||this.j);q=e;for(x=e+12;q<x;++q)wa(this,s,f[q]);e+=12;g-=12;q=e;for(x=e+g;q<x;++q)f[q]=wa(this,s,f[q]);}switch(k.A){case sa.O:m=y?this.input.subarray(e,e+g):this.input.slice(e,
e+g);break;case sa.M:m=(new I(this.input,{index:e,bufferSize:k.J})).r();break;default:l(Error("unknown compression type"));}if(this.ba){var u=r,n,E="number"===typeof u?u:u=0,A=m.length;n=-1;for(E=A&7;E--;++u)n=n>>>8^C[(n^m[u])&255];for(E=A>>3;E--;u+=8)n=n>>>8^C[(n^m[u])&255],n=n>>>8^C[(n^m[u+1])&255],n=n>>>8^C[(n^m[u+2])&255],n=n>>>8^C[(n^m[u+3])&255],n=n>>>8^C[(n^m[u+4])&255],n=n>>>8^C[(n^m[u+5])&255],n=n>>>8^C[(n^m[u+6])&255],n=n>>>8^C[(n^m[u+7])&255];p=(n^4294967295)>>>0;k.p!==p&&l(Error("wrong crc: file=0x"+
k.p.toString(16)+", data=0x"+p.toString(16)));}return m};t.L=function(a){this.j=a;};function wa(a,b,c){c^=a.s(b);a.k(b,c);return c}t.k=U.prototype.k;t.S=U.prototype.T;t.s=U.prototype.s;v("Zlib.Unzip",V);v("Zlib.Unzip.prototype.decompress",V.prototype.r);v("Zlib.Unzip.prototype.getFilenames",V.prototype.Y);v("Zlib.Unzip.prototype.setPassword",V.prototype.L);}).call(this);


/***/ }),

/***/ "./node_modules/zstddec/dist/zstddec.modern.js":
/*!*****************************************************!*\
  !*** ./node_modules/zstddec/dist/zstddec.modern.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ZSTDDecoder": () => (/* binding */ Q)
/* harmony export */ });
let A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer);}}};class Q{init(){return A||(A="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,"base64"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0);}decode(A,g=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";



/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/compat get default export */
/******/ (() => {
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = (module) => {
/******/ 		var getter = module && module.__esModule ?
/******/ 			() => (module['default']) :
/******/ 			() => (module);
/******/ 		__webpack_require__.d(getter, { a: getter });
/******/ 		return getter;
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop));
/******/ })();
/******/ 
/******/ /* webpack/runtime/make namespace object */
/******/ (() => {
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = (exports) => {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/ })();
/******/ 
/************************************************************************/
/******/ 
/******/ // startup
/******/ // Load entry module and return exports
/******/ // This entry module is referenced by other modules so it can't be inlined
/******/ var __webpack_exports__ = __webpack_require__("./src/cjs.ts");
/******/ var __webpack_exports__default = __webpack_exports__["default"];
/******/

var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof undefined === "function") r = undefined(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var _a;
const $isRhodoniteInitDone = Symbol('isRhodoniteInitDone');
const $updateSize = Symbol('updateSize');
const $updateScenario = Symbol('updateScenario');
const $canvas = Symbol('canvas');
let RhodoniteViewer = class RhodoniteViewer extends s {
    constructor() {
        super(...arguments);
        this.scenario = null;
        this[_a] = false;
    }
    static get styles() {
        return r$2 `
  :host {
    display: block;
  }
  `;
    }
    render() {
        return $ `<canvas id="canvas"></canvas>`;
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        this[$updateSize]();
        if (changedProperties.has('scenario') && this.scenario != null) {
            this[$updateScenario](this.scenario);
        }
    }
    async [(_a = $isRhodoniteInitDone, $updateScenario)](scenario) {
        // Rhodonite Initialization
        await this.initRhodonite();
        const iblRotation = +180;
        // Update Size
        this[$updateSize]();
        // create Frame and Expressions
        const frame = new __webpack_exports__default.Frame();
        // create FrameBuffers
        const { framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference } = createRenderTargets(scenario.dimensions.width, scenario.dimensions.height);
        // Load glTF Expression
        const { cameraComponent, cameraEntity, mainRenderPass, modelTransparentExpression } = await loadGltf(frame, scenario, framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference);
        // setup IBL
        const prefilterObj = await setupIBL(scenario, iblRotation);
        if (__webpack_exports__default.Is.exist(prefilterObj)) {
            setupBackgroundEnvCubeExpression(frame, prefilterObj, framebufferTargetOfGammaMsaa, mainRenderPass, scenario, iblRotation);
        }
        // MSAA Resolve Expression
        setupMsaaResolveExpression(frame, framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference);
        frame.addExpression(modelTransparentExpression);
        // Post GammaCorrection Expression
        setupGammaExpression(frame, framebufferTargetOfGammaResolve);
        // setup camera
        setupCamera(mainRenderPass, scenario, cameraEntity, cameraComponent);
        // Draw
        this.draw(frame);
    }
    async initRhodonite() {
        if (this[$isRhodoniteInitDone] === false) {
            this[$canvas] = this.shadowRoot.querySelector('canvas');
            await __webpack_exports__default.System.init({
                approach: __webpack_exports__default.ProcessApproach.UniformWebGL2,
                canvas: this[$canvas],
            });
            this[$isRhodoniteInitDone] === true;
        }
        __webpack_exports__default.MeshRendererComponent.isDepthMaskTrueForTransparencies = true;
    }
    draw(frame) {
        requestAnimationFrame(() => {
            function draw() {
                __webpack_exports__default.System.process(frame);
                requestAnimationFrame(draw);
            }
            draw();
            this.dispatchEvent(
            // This notifies the framework that the model is visible and the
            // screenshot can be taken
            new CustomEvent('model-visibility', { detail: { visible: true } }));
        });
    }
    [$updateSize]() {
        if (this[$canvas] == null || this.scenario == null) {
            return;
        }
        const canvas = this[$canvas];
        const { dimensions } = this.scenario;
        const dpr = window.devicePixelRatio;
        const width = dimensions.width * dpr;
        const height = dimensions.height * dpr;
        __webpack_exports__default.System.resizeCanvas(width, height);
        canvas.style.width = `${dimensions.width}px`;
        canvas.style.height = `${dimensions.height}px`;
    }
};
__decorate([
    e({ type: Object })
], RhodoniteViewer.prototype, "scenario", void 0);
RhodoniteViewer = __decorate([
    n$1('rhodonite-viewer')
], RhodoniteViewer);
async function setupIBL(scenario, rotation) {
    const split = scenario.lighting.split('.');
    const ext = split[split.length - 1];
    if (ext === 'hdr') {
        const prefilterObj = await prefilterFromUri(scenario.lighting);
        setupPrefilteredIBLTexture(prefilterObj, rotation);
        return prefilterObj;
    }
    return undefined;
}
function setupCamera(mainRenderPass, scenario, cameraEntity, cameraComponent) {
    const sceneTopLevelGraphComponents = mainRenderPass.sceneTopLevelGraphComponents;
    const rootGroup = sceneTopLevelGraphComponents[0].entity;
    const aabb = rootGroup.getSceneGraph().calcWorldAABB();
    __webpack_exports__default.MeshRendererComponent.isViewFrustumCullingEnabled = false;
    const { target, orbit } = scenario;
    const center = [target.x, target.y, target.z];
    const theta = (orbit.theta) * Math.PI / 180;
    const phi = (orbit.phi) * Math.PI / 180;
    const radiusSinPhi = orbit.radius * Math.sin(phi);
    const eye = [
        radiusSinPhi * Math.sin(theta) + target.x,
        orbit.radius * Math.cos(phi) + target.y,
        radiusSinPhi * Math.cos(theta) + target.z
    ];
    if (orbit.radius <= 0) {
        center[0] = eye[0] - Math.sin(phi) * Math.sin(theta);
        center[1] = eye[1] - Math.cos(phi);
        center[2] = eye[2] - Math.sin(phi) * Math.cos(theta);
    }
    const up = [0, 1, 0];
    cameraEntity.getCamera().eyeInner = __webpack_exports__default.Vector3.fromCopyArray3(eye);
    cameraEntity.getCamera().up = __webpack_exports__default.Vector3.fromCopyArray3(up);
    cameraEntity.getCamera().directionInner = __webpack_exports__default.Vector3.fromCopyArray3(center);
    cameraEntity.getCamera().primitiveMode = true;
    const modelRadius = aabb.lengthCenterToCorner;
    // const max = aabb.maxPoint;
    // const min = aabb.minPoint;
    // const modelRadius = Math.max(max.x - min.x, max.y - min.y, max.z - min.z);
    const far = 6 * Math.max(modelRadius, orbit.radius);
    const near = far / 100;
    cameraComponent.zNearInner = near;
    cameraComponent.zFarInner = far;
}
async function loadGltf(frame, scenario, framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference) {
    const initialExpression = setupInitialExpression(framebufferTargetOfGammaMsaa);
    frame.addExpression(initialExpression);
    // camera
    const cameraEntity = __webpack_exports__default.EntityHelper.createCameraEntity();
    const cameraComponent = cameraEntity.getCamera();
    cameraComponent.fovyInner = scenario.verticalFoV;
    cameraComponent.aspectInner = scenario.dimensions.width / scenario.dimensions.height;
    // gltf
    const modelOpaqueExpression = await __webpack_exports__default.GltfImporter.import(scenario.model, {
        cameraComponent: cameraComponent,
        defaultMaterialHelperArgumentArray: [
            {
                makeOutputSrgb: false,
            },
        ],
    });
    const modelOpaquePass = modelOpaqueExpression.renderPasses[0];
    modelOpaquePass.tryToSetUniqueName('modelOpaque', true);
    modelOpaquePass.cameraComponent = cameraComponent;
    __webpack_exports__default.CameraComponent.current = cameraComponent.componentSID;
    modelOpaquePass.setFramebuffer(framebufferTargetOfGammaMsaa);
    modelOpaquePass.toClearColorBuffer = false;
    modelOpaquePass.toClearDepthBuffer = false;
    modelOpaquePass.toRenderOpaquePrimitives = true;
    modelOpaquePass.toRenderTransparentPrimitives = false;
    // Transparent
    const modelTransparentExpression = modelOpaqueExpression.clone();
    modelTransparentExpression.tryToSetUniqueName('modelTransparent', true);
    const renderPassMainTranslucent = modelTransparentExpression.renderPasses[0];
    renderPassMainTranslucent.toRenderOpaquePrimitives = false;
    renderPassMainTranslucent.toRenderTransparentPrimitives = true;
    renderPassMainTranslucent.toClearDepthBuffer = false;
    renderPassMainTranslucent.setFramebuffer(framebufferTargetOfGammaMsaa);
    renderPassMainTranslucent.setResolveFramebuffer(framebufferTargetOfGammaResolve);
    for (const entity of renderPassMainTranslucent.entities) {
        const meshComponent = entity.tryToGetMesh();
        if (__webpack_exports__default.Is.exist(meshComponent)) {
            const mesh = meshComponent.mesh;
            if (__webpack_exports__default.Is.exist(mesh)) {
                for (const primitive of mesh.primitives) {
                    primitive.material.setTextureParameter(__webpack_exports__default.ShaderSemantics.BackBufferTexture, framebufferTargetOfGammaResolveForReference.getColorAttachedRenderTargetTexture(0));
                }
            }
        }
    }
    frame.addExpression(modelOpaqueExpression);
    return { cameraComponent, cameraEntity, mainRenderPass: modelOpaquePass, modelTransparentExpression };
}
function setupGammaExpression(frame, gammaTargetFramebuffer) {
    const expressionGammaEffect = new __webpack_exports__default.Expression();
    // gamma correction (and super sampling)
    const postEffectCameraEntity = createPostEffectCameraEntity();
    const postEffectCameraComponent = postEffectCameraEntity.getCamera();
    const gammaCorrectionMaterial = __webpack_exports__default.MaterialHelper.createGammaCorrectionMaterial();
    // gammaCorrectionMaterial.setParameter(Rn.ShaderSemantics.EnableLinearToSrgb, Rn.Scalar.fromCopyNumber(0));
    const gammaCorrectionRenderPass = createPostEffectRenderPass(gammaCorrectionMaterial, postEffectCameraComponent);
    setTextureParameterForMeshComponents(gammaCorrectionRenderPass.meshComponents, __webpack_exports__default.ShaderSemantics.BaseColorTexture, gammaTargetFramebuffer.getColorAttachedRenderTargetTexture(0));
    expressionGammaEffect.addRenderPasses([gammaCorrectionRenderPass]);
    frame.addExpression(expressionGammaEffect);
}
function setupInitialExpression(framebufferTargetOfGammaMsaa) {
    const expression = new __webpack_exports__default.Expression();
    expression.tryToSetUniqueName('Initial', true);
    const initialRenderPass = new __webpack_exports__default.RenderPass();
    initialRenderPass.clearColor = __webpack_exports__default.Vector4.fromCopyArray4([0.0, 0.0, 0.0, 0.0]);
    initialRenderPass.toClearColorBuffer = false;
    initialRenderPass.toClearDepthBuffer = true;
    const initialRenderPassForFrameBuffer = new __webpack_exports__default.RenderPass();
    initialRenderPassForFrameBuffer.clearColor = __webpack_exports__default.Vector4.fromCopyArray4([0.0, 0.0, 0.0, 0.0]);
    initialRenderPassForFrameBuffer.toClearColorBuffer = true;
    initialRenderPassForFrameBuffer.toClearDepthBuffer = true;
    initialRenderPassForFrameBuffer.setFramebuffer(framebufferTargetOfGammaMsaa);
    expression.addRenderPasses([initialRenderPass, initialRenderPassForFrameBuffer]);
    return expression;
}
function setupMsaaResolveExpression(frame, framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference) {
    const expressionForResolve = new __webpack_exports__default.Expression();
    expressionForResolve.tryToSetUniqueName('Resolve', true);
    const renderPassForResolve = new __webpack_exports__default.RenderPass();
    expressionForResolve.addRenderPasses([renderPassForResolve]);
    renderPassForResolve.toClearDepthBuffer = false;
    renderPassForResolve.setFramebuffer(framebufferTargetOfGammaMsaa);
    renderPassForResolve.setResolveFramebuffer(framebufferTargetOfGammaResolve);
    renderPassForResolve.setResolveFramebuffer2(framebufferTargetOfGammaResolveForReference);
    // getRnAppModel().setResolveExpression(expressionForResolve.objectUID)
    frame.addExpression(expressionForResolve);
    return expressionForResolve;
}
function createRenderTargets(canvasWidth, canvasHeight) {
    // MSAA depth
    const framebufferTargetOfGammaMsaa = __webpack_exports__default.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 0, {
        isMSAA: true,
        sampleCountMSAA: 4,
    });
    framebufferTargetOfGammaMsaa.tryToSetUniqueName('FramebufferTargetOfGammaMsaa', true);
    // Resolve Color 1
    const framebufferTargetOfGammaResolve = __webpack_exports__default.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 1, {
        createDepthBuffer: true,
    });
    framebufferTargetOfGammaResolve.tryToSetUniqueName('FramebufferTargetOfGammaResolve', true);
    // Resolve Color 2
    const framebufferTargetOfGammaResolveForReference = __webpack_exports__default.RenderableHelper.createTexturesForRenderTarget(canvasWidth, canvasHeight, 1, {
        createDepthBuffer: false,
        minFilter: __webpack_exports__default.TextureParameter.LinearMipmapLinear
    });
    framebufferTargetOfGammaResolveForReference.tryToSetUniqueName('FramebufferTargetOfGammaResolveForReference', true);
    return { framebufferTargetOfGammaMsaa, framebufferTargetOfGammaResolve, framebufferTargetOfGammaResolveForReference };
}
function createPostEffectRenderPass(material, cameraComponent) {
    const boardPrimitive = new __webpack_exports__default.Plane();
    boardPrimitive.generate({
        width: 1,
        height: 1,
        uSpan: 1,
        vSpan: 1,
        isUVRepeat: false,
        material,
    });
    const boardMesh = new __webpack_exports__default.Mesh();
    boardMesh.addPrimitive(boardPrimitive);
    const boardEntity = __webpack_exports__default.EntityHelper.createMeshEntity();
    boardEntity.getTransform().rotate = __webpack_exports__default.Vector3.fromCopyArray([
        Math.PI / 2,
        0.0,
        0.0,
    ]);
    boardEntity.getTransform().translate = __webpack_exports__default.Vector3.fromCopyArray([
        0.0, 0.0, -0.5,
    ]);
    const boardMeshComponent = boardEntity.getMesh();
    boardMeshComponent.setMesh(boardMesh);
    const renderPass = new __webpack_exports__default.RenderPass();
    renderPass.toClearColorBuffer = false;
    renderPass.cameraComponent = cameraComponent;
    renderPass.addEntities([boardEntity]);
    return renderPass;
}
function createPostEffectCameraEntity() {
    const cameraEntity = __webpack_exports__default.EntityHelper.createCameraEntity();
    const cameraComponent = cameraEntity.getCamera();
    cameraComponent.zNearInner = 0.5;
    cameraComponent.zFarInner = 2.0;
    return cameraEntity;
}
function setTextureParameterForMeshComponents(meshComponents, shaderSemantic, value) {
    for (let i = 0; i < meshComponents.length; i++) {
        const mesh = meshComponents[i].mesh;
        if (!mesh)
            continue;
        const primitiveNumber = mesh.getPrimitiveNumber();
        for (let j = 0; j < primitiveNumber; j++) {
            const primitive = mesh.getPrimitiveAt(j);
            primitive.material.setTextureParameter(shaderSemantic, value);
        }
    }
}
let initPrefilteringWasmPromise;
let glPrefiltering;
function initPrefilteringWasm() {
    return new Promise(resolve => {
        if (initPrefilteringWasmPromise != null) {
            // already initialized
            initPrefilteringWasmPromise.then(() => {
                resolve();
            });
        }
        const uri = 'https://storage.googleapis.com/emadurandal-3d-public.appspot.com/rhodonite/vendor/ibl_prefiltering_wasm_bg.wasm';
        initPrefilteringWasmPromise = wasm_bindgen(uri).then(() => {
            const canvas = document.createElement('canvas');
            glPrefiltering = canvas.getContext('webgl');
            const { init_webgl_extensions } = wasm_bindgen;
            init_webgl_extensions(glPrefiltering);
            resolve();
        });
    });
}
async function prefilterFromUri(hdrFileUri) {
    await initPrefilteringWasm();
    const { request_binary, CubeMapPrefilter } = wasm_bindgen;
    const cubeMapSize = 512;
    const irradianceCubeMapSize = 32;
    const pmremCubeMapSize = 128;
    const pmremCubeMapMipCount = 8;
    const brdfLutSize = 512;
    const sample_count = 1024;
    const prefilter = new CubeMapPrefilter(glPrefiltering, cubeMapSize, irradianceCubeMapSize, pmremCubeMapSize, pmremCubeMapMipCount, brdfLutSize, sample_count);
    const hdrImageData = await request_binary(hdrFileUri);
    prefilter.load_hdr_image(glPrefiltering, hdrImageData);
    prefilter.process(glPrefiltering);
    return prefilter;
}
function setupPrefilteredIBLTexture(prefilter, rotation) {
    const specularCubeTexture = new __webpack_exports__default.CubeTexture();
    const specularTextureTypedArrayImages = getSpecularCubeTextureTypedArrays(prefilter);
    specularCubeTexture.mipmapLevelNumber = specularTextureTypedArrayImages.length;
    const specularTextureSize = getSpecularCubeTextureSize(prefilter, 0);
    specularCubeTexture.generateTextureFromTypedArrays(specularTextureTypedArrayImages, specularTextureSize, specularTextureSize);
    specularCubeTexture.hdriFormat = __webpack_exports__default.HdriFormat.RGBE_PNG;
    const diffuseCubeTexture = new __webpack_exports__default.CubeTexture();
    const diffuseTextureTypedArrayImages = getDiffuseCubeTextureTypedArrays(prefilter);
    const diffuseTextureSize = getDiffuseCubeTextureSize(prefilter);
    diffuseCubeTexture.generateTextureFromTypedArrays(diffuseTextureTypedArrayImages, diffuseTextureSize, diffuseTextureSize);
    diffuseCubeTexture.hdriFormat = __webpack_exports__default.HdriFormat.RGBE_PNG;
    attachIBLTextureToAllMeshComponents(diffuseCubeTexture, specularCubeTexture, rotation);
    return [diffuseCubeTexture, specularCubeTexture];
}
function getSpecularCubeTextureTypedArrays(prefilter) {
    const specularTextureTypedArrays = [];
    const mipCount = prefilter.pmrem_cubemap_mip_count();
    for (let mipLevel = 0; mipLevel < mipCount; mipLevel++) {
        specularTextureTypedArrays.push({
            posX: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_X, mipLevel),
            negX: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_X, mipLevel),
            posY: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Y, mipLevel),
            negY: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Y, mipLevel),
            posZ: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Z, mipLevel),
            negZ: prefilter.pmrem_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Z, mipLevel)
        });
    }
    return specularTextureTypedArrays;
}
function getDiffuseCubeTextureTypedArrays(prefilter) {
    return [
        {
            posX: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_X),
            negX: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_X),
            posY: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Y),
            negY: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Y),
            posZ: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Z),
            negZ: prefilter.irradiance_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Z)
        }
    ];
}
function getEnvCubeTextureSize(prefilter) {
    return prefilter.hdr_cubemap_texture_size();
}
function getDiffuseCubeTextureSize(prefilter) {
    return prefilter.irradiance_cubemap_texture_size();
}
function getSpecularCubeTextureSize(prefilter, mipLevel) {
    return prefilter.pmrem_cubemap_texture_size(mipLevel);
}
function attachIBLTextureToAllMeshComponents(diffuseCubeTexture, specularCubeTexture, rotation) {
    const meshRendererComponents = __webpack_exports__default.ComponentRepository.getComponentsWithType(__webpack_exports__default.MeshRendererComponent);
    for (let i = 0; i < meshRendererComponents.length; i++) {
        const meshRendererComponent = meshRendererComponents[i];
        meshRendererComponent.specularCubeMap = specularCubeTexture;
        meshRendererComponent.diffuseCubeMap = diffuseCubeTexture;
        meshRendererComponent.diffuseCubeMapContribution = 0.5;
        meshRendererComponent.specularCubeMapContribution = 0.5;
        meshRendererComponent.rotationOfCubeMap = __webpack_exports__default.MathUtil.degreeToRadian(rotation);
    }
    const meshComponents = __webpack_exports__default.ComponentRepository.getComponentsWithType(__webpack_exports__default.MeshComponent);
    for (let i = 0; i < meshComponents.length; i++) {
        const meshComponent = meshComponents[i];
        const mesh = meshComponent.mesh;
        if (__webpack_exports__default.Is.exist(mesh)) {
            for (let i = 0; i < mesh.getPrimitiveNumber(); i++) {
                const primitive = mesh.getPrimitiveAt(i);
                primitive.material.setParameter(__webpack_exports__default.ShaderSemantics.InverseEnvironment, __webpack_exports__default.Scalar.fromCopyNumber(0));
            }
        }
    }
}
function getEnvCubeTextureTypedArrays(prefilter) {
    return [
        {
            posX: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_X),
            negX: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_X),
            posY: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Y),
            negY: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Y),
            posZ: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_POSITIVE_Z),
            negZ: prefilter.hdr_cubemap_texture_to_arrybuffer(glPrefiltering, glPrefiltering.TEXTURE_CUBE_MAP_NEGATIVE_Z)
        }
    ];
}
function setPrefilteredEnvCubeTexture(cubeTexture, sphereMaterial, prefilter) {
    const envCubeTextureTypedArrayImages = getEnvCubeTextureTypedArrays(prefilter);
    const envCubeTextureSize = getEnvCubeTextureSize(prefilter);
    cubeTexture.generateTextureFromTypedArrays(envCubeTextureTypedArrayImages, envCubeTextureSize, envCubeTextureSize);
    cubeTexture.hdriFormat = __webpack_exports__default.HdriFormat.RGBE_PNG;
    sphereMaterial.setParameter(__webpack_exports__default.ShaderSemantics.EnvHdriFormat, __webpack_exports__default.HdriFormat.RGBE_PNG.index);
}
function setupBackgroundEnvCubeExpression(frame, prefilter, framebufferTargetOfGammaMsaa, mainRenderPass, scenario, rotation) {
    // create sphere
    const sphereEntity = __webpack_exports__default.EntityHelper.createMeshEntity();
    sphereEntity.tryToSetUniqueName('Sphere Env Cube', true);
    sphereEntity.tryToSetTag({
        tag: 'type',
        value: 'background-assets',
    });
    const spherePrimitive = new __webpack_exports__default.Sphere();
    const sphereMaterial = __webpack_exports__default.MaterialHelper.createEnvConstantMaterial();
    sphereMaterial.setParameter(__webpack_exports__default.ShaderSemantics.MakeOutputSrgb, 0);
    sphereMaterial.setParameter(__webpack_exports__default.ShaderSemantics.envRotation, __webpack_exports__default.MathUtil.degreeToRadian(rotation));
    sphereMaterial.setParameter(__webpack_exports__default.ShaderSemantics.InverseEnvironment, __webpack_exports__default.Scalar.fromCopyNumber(0));
    // environment Cube Texture
    const environmentCubeTexture = new __webpack_exports__default.CubeTexture();
    setPrefilteredEnvCubeTexture(environmentCubeTexture, sphereMaterial, prefilter);
    sphereMaterial.setTextureParameter(__webpack_exports__default.ShaderSemantics.ColorEnvTexture, environmentCubeTexture);
    // setup sphere
    const sceneTopLevelGraphComponents = mainRenderPass.sceneTopLevelGraphComponents;
    const rootGroup = sceneTopLevelGraphComponents[0].entity;
    const aabb = rootGroup.getSceneGraph().calcWorldAABB();
    spherePrimitive.generate({ radius: aabb.lengthCenterToCorner * 6.0, widthSegments: 40, heightSegments: 40, material: sphereMaterial });
    const sphereMeshComponent = sphereEntity.getComponent(__webpack_exports__default.MeshComponent);
    const sphereMesh = new __webpack_exports__default.Mesh();
    sphereMesh.addPrimitive(spherePrimitive);
    sphereMeshComponent.setMesh(sphereMesh);
    sphereEntity.translate = __webpack_exports__default.Vector3.fromCopy3(scenario.target.x, scenario.target.y, scenario.target.z);
    sphereEntity.scale = __webpack_exports__default.Vector3.fromCopyArray3([-1, 1, 1]);
    if (!scenario.renderSkybox) {
        sphereEntity.getSceneGraph().isVisible = false;
    }
    const renderPass = new __webpack_exports__default.RenderPass();
    renderPass.clearColor = __webpack_exports__default.Vector4.fromCopyArray4([0, 0, 0, 0]);
    renderPass.addEntities([sphereEntity]);
    // renderPass.cameraComponent = cameraComponent
    renderPass.toClearDepthBuffer = false;
    renderPass.isDepthTest = true;
    renderPass.toClearColorBuffer = false;
    renderPass.setFramebuffer(framebufferTargetOfGammaMsaa);
    const expression = new __webpack_exports__default.Expression();
    expression.tryToSetUniqueName('EnvCube', true);
    expression.addRenderPasses([renderPass]);
    frame.addExpression(expression);
    // frame;
    return expression;
}

export { RhodoniteViewer, getDiffuseCubeTextureSize, getEnvCubeTextureSize, getSpecularCubeTextureSize };
//# sourceMappingURL=rhodonite-viewer.js.map
